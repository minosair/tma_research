(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const j of document.querySelectorAll('link[rel="modulepreload"]'))d(j);new MutationObserver(j=>{for(const $ of j)if($.type==="childList")for(const ot of $.addedNodes)ot.tagName==="LINK"&&ot.rel==="modulepreload"&&d(ot)}).observe(document,{childList:!0,subtree:!0});function o(j){const $={};return j.integrity&&($.integrity=j.integrity),j.referrerPolicy&&($.referrerPolicy=j.referrerPolicy),j.crossOrigin==="use-credentials"?$.credentials="include":j.crossOrigin==="anonymous"?$.credentials="omit":$.credentials="same-origin",$}function d(j){if(j.ep)return;j.ep=!0;const $=o(j);fetch(j.href,$)}})();function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(i){return i===null||typeof i!="object"?null:(i=z$2&&i[z$2]||i["@@iterator"],typeof i=="function"?i:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$2={};function E$2(i,s,o){this.props=i,this.context=s,this.refs=D$2,this.updater=o||B$1}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(i,s){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,s,"setState")};E$2.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$2(i,s,o){this.props=i,this.context=s,this.refs=D$2,this.updater=o||B$1}var H$1=G$2.prototype=new F$1;H$1.constructor=G$2;C$1(H$1,E$2.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$2(i,s,o){var d,j={},$=null,ot=null;if(s!=null)for(d in s.ref!==void 0&&(ot=s.ref),s.key!==void 0&&($=""+s.key),s)J$1.call(s,d)&&!L$1.hasOwnProperty(d)&&(j[d]=s[d]);var ht=arguments.length-2;if(ht===1)j.children=o;else if(1<ht){for(var pt=Array(ht),dt=0;dt<ht;dt++)pt[dt]=arguments[dt+2];j.children=pt}if(i&&i.defaultProps)for(d in ht=i.defaultProps,ht)j[d]===void 0&&(j[d]=ht[d]);return{$$typeof:l$1,type:i,key:$,ref:ot,props:j,_owner:K$1.current}}function N$1(i,s){return{$$typeof:l$1,type:i.type,key:s,ref:i.ref,props:i.props,_owner:i._owner}}function O$2(i){return typeof i=="object"&&i!==null&&i.$$typeof===l$1}function escape(i){var s={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(o){return s[o]})}var P$1=/\/+/g;function Q$1(i,s){return typeof i=="object"&&i!==null&&i.key!=null?escape(""+i.key):s.toString(36)}function R$2(i,s,o,d,j){var $=typeof i;($==="undefined"||$==="boolean")&&(i=null);var ot=!1;if(i===null)ot=!0;else switch($){case"string":case"number":ot=!0;break;case"object":switch(i.$$typeof){case l$1:case n$1:ot=!0}}if(ot)return ot=i,j=j(ot),i=d===""?"."+Q$1(ot,0):d,I$1(j)?(o="",i!=null&&(o=i.replace(P$1,"$&/")+"/"),R$2(j,s,o,"",function(dt){return dt})):j!=null&&(O$2(j)&&(j=N$1(j,o+(!j.key||ot&&ot.key===j.key?"":(""+j.key).replace(P$1,"$&/")+"/")+i)),s.push(j)),1;if(ot=0,d=d===""?".":d+":",I$1(i))for(var ht=0;ht<i.length;ht++){$=i[ht];var pt=d+Q$1($,ht);ot+=R$2($,s,o,pt,j)}else if(pt=A$2(i),typeof pt=="function")for(i=pt.call(i),ht=0;!($=i.next()).done;)$=$.value,pt=d+Q$1($,ht++),ot+=R$2($,s,o,pt,j);else if($==="object")throw s=String(i),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return ot}function S$2(i,s,o){if(i==null)return i;var d=[],j=0;return R$2(i,d,"","",function($){return s.call(o,$,j++)}),d}function T$1(i){if(i._status===-1){var s=i._result;s=s(),s.then(function(o){(i._status===0||i._status===-1)&&(i._status=1,i._result=o)},function(o){(i._status===0||i._status===-1)&&(i._status=2,i._result=o)}),i._status===-1&&(i._status=0,i._result=s)}if(i._status===1)return i._result.default;throw i._result}var U$1={current:null},V$2={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(i,s,o){S$2(i,function(){s.apply(this,arguments)},o)},count:function(i){var s=0;return S$2(i,function(){s++}),s},toArray:function(i){return S$2(i,function(s){return s})||[]},only:function(i){if(!O$2(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};react_production_min.Component=E$2;react_production_min.Fragment=p$3;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$1;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(i,s,o){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var d=C$1({},i.props),j=i.key,$=i.ref,ot=i._owner;if(s!=null){if(s.ref!==void 0&&($=s.ref,ot=K$1.current),s.key!==void 0&&(j=""+s.key),i.type&&i.type.defaultProps)var ht=i.type.defaultProps;for(pt in s)J$1.call(s,pt)&&!L$1.hasOwnProperty(pt)&&(d[pt]=s[pt]===void 0&&ht!==void 0?ht[pt]:s[pt])}var pt=arguments.length-2;if(pt===1)d.children=o;else if(1<pt){ht=Array(pt);for(var dt=0;dt<pt;dt++)ht[dt]=arguments[dt+2];d.children=ht}return{$$typeof:l$1,type:i.type,key:j,ref:$,props:d,_owner:ot}};react_production_min.createContext=function(i){return i={$$typeof:u,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:t,_context:i},i.Consumer=i};react_production_min.createElement=M$2;react_production_min.createFactory=function(i){var s=M$2.bind(null,i);return s.type=i,s};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(i){return{$$typeof:v$1,render:i}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(i){return{$$typeof:y$1,_payload:{_status:-1,_result:i},_init:T$1}};react_production_min.memo=function(i,s){return{$$typeof:x,type:i,compare:s===void 0?null:s}};react_production_min.startTransition=function(i){var s=V$2.transition;V$2.transition={};try{i()}finally{V$2.transition=s}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(i,s){return U$1.current.useCallback(i,s)};react_production_min.useContext=function(i){return U$1.current.useContext(i)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(i){return U$1.current.useDeferredValue(i)};react_production_min.useEffect=function(i,s){return U$1.current.useEffect(i,s)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(i,s,o){return U$1.current.useImperativeHandle(i,s,o)};react_production_min.useInsertionEffect=function(i,s){return U$1.current.useInsertionEffect(i,s)};react_production_min.useLayoutEffect=function(i,s){return U$1.current.useLayoutEffect(i,s)};react_production_min.useMemo=function(i,s){return U$1.current.useMemo(i,s)};react_production_min.useReducer=function(i,s,o){return U$1.current.useReducer(i,s,o)};react_production_min.useRef=function(i){return U$1.current.useRef(i)};react_production_min.useState=function(i){return U$1.current.useState(i)};react_production_min.useSyncExternalStore=function(i,s,o){return U$1.current.useSyncExternalStore(i,s,o)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$1=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q(i,s,o){var d,j={},$=null,ot=null;o!==void 0&&($=""+o),s.key!==void 0&&($=""+s.key),s.ref!==void 0&&(ot=s.ref);for(d in s)m$1.call(s,d)&&!p$2.hasOwnProperty(d)&&(j[d]=s[d]);if(i&&i.defaultProps)for(d in s=i.defaultProps,s)j[d]===void 0&&(j[d]=s[d]);return{$$typeof:k$1,type:i,key:$,ref:ot,props:j,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports;/*!
 * excalibur - 0.29.3 - 2024-5-5
 * https://github.com/excaliburjs/Excalibur
 * Copyright (c) 2024 Excalibur.js <https://github.com/excaliburjs/Excalibur/graphs/contributors>
 * Licensed BSD-2-Clause
 * @preserve
 */var __webpack_modules__={8851:(i,s,o)=>{o.d(s,{A:()=>pt});var d=o(2001),j=o.n(d),$=o(935),ot=o.n($),ht=ot()(j());ht.push([i.id,`/* Buttons styles start */

button#excalibur-play {
  display: inline-block;
  position: relative;
  z-index: 999;
  border-radius: 6px;
  border: none;
  /*border: 3px solid;
    border-color: white;
    box-shadow: 0 0 10px #ccc;*/
  padding: 1rem 1.5rem 1rem 4rem;
  margin: 0;
  text-decoration: none;
  background: #00b233;
  color: #ffffff;
  font-family: sans-serif;
  font-size: 2rem;
  white-space: nowrap;
  line-height: 1;
  cursor: pointer;
  text-align: center;
  transition: background 250ms ease-in-out, transform 150ms ease;
  -webkit-appearance: none;
  -moz-appearance: none;

  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */
  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */
  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */
  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */
  animation: excalibur-button-fadein 200ms;
}

/*
button#excalibur-play {
  display: none;
}*/

button#excalibur-play:after {
  position: absolute;
  content: '';
  border: 8px solid;
  border-color: transparent transparent transparent white;
  left: 35px;
  top: 24px;
  width: 0;
  height: 0;
}

button#excalibur-play:before {
  position: absolute;
  content: '';
  border: 3px solid;
  left: 19px;
  top: 14px;
  border-radius: 20px;
  width: 30px;
  height: 30px;
}

button#excalibur-play:hover,
button#excalibur-play:focus {
  background: #00982c;
}

button#excalibur-play:focus {
  outline: 1px solid #fff;
  outline-offset: -4px;
}

button#excalibur-play:active {
  transform: scale(0.99);
}

@keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Firefox < 16 */
@-moz-keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Safari, Chrome and Opera > 12.1 */
@-webkit-keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Internet Explorer */
@-ms-keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Opera < 12.1 */
@-o-keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
`,"",{version:3,sources:["webpack://./Director/Loader.css"],names:[],mappings:"AAAA,yBAAyB;;AAEzB;EACE,qBAAqB;EACrB,kBAAkB;EAClB,YAAY;EACZ,kBAAkB;EAClB,YAAY;EACZ;;+BAE6B;EAC7B,8BAA8B;EAC9B,SAAS;EACT,qBAAqB;EACrB,mBAAmB;EACnB,cAAc;EACd,uBAAuB;EACvB,eAAe;EACf,mBAAmB;EACnB,cAAc;EACd,eAAe;EACf,kBAAkB;EAClB,8DAA8D;EAC9D,wBAAwB;EACxB,qBAAqB;;EAErB,gDAAgD,EAAE,oCAAoC;EACtF,6CAA6C,EAAE,iBAAiB;EAChE,4CAA4C,EAAE,sBAAsB;EACpE,2CAA2C,EAAE,iBAAiB;EAC9D,wCAAwC;AAC1C;;AAEA;;;EAGE;;AAEF;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,uDAAuD;EACvD,UAAU;EACV,SAAS;EACT,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,UAAU;EACV,SAAS;EACT,mBAAmB;EACnB,WAAW;EACX,YAAY;AACd;;AAEA;;EAEE,mBAAmB;AACrB;;AAEA;EACE,uBAAuB;EACvB,oBAAoB;AACtB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,oCAAoC;AACpC;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,sBAAsB;AACtB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF",sourcesContent:[`/* Buttons styles start */\r
\r
button#excalibur-play {\r
  display: inline-block;\r
  position: relative;\r
  z-index: 999;\r
  border-radius: 6px;\r
  border: none;\r
  /*border: 3px solid;\r
    border-color: white;\r
    box-shadow: 0 0 10px #ccc;*/\r
  padding: 1rem 1.5rem 1rem 4rem;\r
  margin: 0;\r
  text-decoration: none;\r
  background: #00b233;\r
  color: #ffffff;\r
  font-family: sans-serif;\r
  font-size: 2rem;\r
  white-space: nowrap;\r
  line-height: 1;\r
  cursor: pointer;\r
  text-align: center;\r
  transition: background 250ms ease-in-out, transform 150ms ease;\r
  -webkit-appearance: none;\r
  -moz-appearance: none;\r
\r
  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\r
  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\r
  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\r
  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\r
  animation: excalibur-button-fadein 200ms;\r
}\r
\r
/*\r
button#excalibur-play {\r
  display: none;\r
}*/\r
\r
button#excalibur-play:after {\r
  position: absolute;\r
  content: '';\r
  border: 8px solid;\r
  border-color: transparent transparent transparent white;\r
  left: 35px;\r
  top: 24px;\r
  width: 0;\r
  height: 0;\r
}\r
\r
button#excalibur-play:before {\r
  position: absolute;\r
  content: '';\r
  border: 3px solid;\r
  left: 19px;\r
  top: 14px;\r
  border-radius: 20px;\r
  width: 30px;\r
  height: 30px;\r
}\r
\r
button#excalibur-play:hover,\r
button#excalibur-play:focus {\r
  background: #00982c;\r
}\r
\r
button#excalibur-play:focus {\r
  outline: 1px solid #fff;\r
  outline-offset: -4px;\r
}\r
\r
button#excalibur-play:active {\r
  transform: scale(0.99);\r
}\r
\r
@keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Firefox < 16 */\r
@-moz-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Safari, Chrome and Opera > 12.1 */\r
@-webkit-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Internet Explorer */\r
@-ms-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Opera < 12.1 */\r
@-o-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
`],sourceRoot:""}]);const pt=ht},4296:(i,s,o)=>{o.d(s,{A:()=>pt});var d=o(2001),j=o.n(d),$=o(935),ot=o.n($),ht=ot()(j());ht.push([i.id,`
#ex-toast-container {
  position: absolute;
  height: 0;
  min-width: 50%;
  left: 50%;
  top: 0;
}

.ex-toast-message {
  left: -50%;
  position: relative;
  display: flex;
  justify-content: space-between;


  padding: 10px;
  margin-top: 5px;
  font-size: 18px;
  font-family: sans-serif;
  border-radius: 6px;
  border: 3px solid #b7b779;
  background-color: rgb(253, 253, 192);
}


.ex-toast-message button {
  align-self: flex-start;
}`,"",{version:3,sources:["webpack://./Util/Toaster.css"],names:[],mappings:";AACA;EACE,kBAAkB;EAClB,SAAS;EACT,cAAc;EACd,SAAS;EACT,MAAM;AACR;;AAEA;EACE,UAAU;EACV,kBAAkB;EAClB,aAAa;EACb,8BAA8B;;;EAG9B,aAAa;EACb,eAAe;EACf,eAAe;EACf,uBAAuB;EACvB,kBAAkB;EAClB,yBAAyB;EACzB,oCAAoC;AACtC;;;AAGA;EACE,sBAAsB;AACxB",sourcesContent:[`\r
#ex-toast-container {\r
  position: absolute;\r
  height: 0;\r
  min-width: 50%;\r
  left: 50%;\r
  top: 0;\r
}\r
\r
.ex-toast-message {\r
  left: -50%;\r
  position: relative;\r
  display: flex;\r
  justify-content: space-between;\r
\r
\r
  padding: 10px;\r
  margin-top: 5px;\r
  font-size: 18px;\r
  font-family: sans-serif;\r
  border-radius: 6px;\r
  border: 3px solid #b7b779;\r
  background-color: rgb(253, 253, 192);\r
}\r
\r
\r
.ex-toast-message button {\r
  align-self: flex-start;\r
}`],sourceRoot:""}]);const pt=ht},935:i=>{i.exports=function(s){var o=[];return o.toString=function(){return this.map(function(j){var $="",ot=typeof j[5]<"u";return j[4]&&($+="@supports (".concat(j[4],") {")),j[2]&&($+="@media ".concat(j[2]," {")),ot&&($+="@layer".concat(j[5].length>0?" ".concat(j[5]):""," {")),$+=s(j),ot&&($+="}"),j[2]&&($+="}"),j[4]&&($+="}"),$}).join("")},o.i=function(j,$,ot,ht,pt){typeof j=="string"&&(j=[[null,j,void 0]]);var dt={};if(ot)for(var gt=0;gt<this.length;gt++){var wt=this[gt][0];wt!=null&&(dt[wt]=!0)}for(var bt=0;bt<j.length;bt++){var St=[].concat(j[bt]);ot&&dt[St[0]]||(typeof pt<"u"&&(typeof St[5]>"u"||(St[1]="@layer".concat(St[5].length>0?" ".concat(St[5]):""," {").concat(St[1],"}")),St[5]=pt),$&&(St[2]&&(St[1]="@media ".concat(St[2]," {").concat(St[1],"}")),St[2]=$),ht&&(St[4]?(St[1]="@supports (".concat(St[4],") {").concat(St[1],"}"),St[4]=ht):St[4]="".concat(ht)),o.push(St))}},o}},2001:i=>{i.exports=function(s){var o=s[1],d=s[3];if(!d)return o;if(typeof btoa=="function"){var j=btoa(unescape(encodeURIComponent(JSON.stringify(d)))),$="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(j),ot="/*# ".concat($," */");return[o].concat([ot]).join(`
`)}return[o].join(`
`)}},9493:(i,s,o)=>{o(3975);var d=o(2564);i.exports=d("Array","sort")},311:(i,s,o)=>{o(8291);var d=o(9120);i.exports=d.Object.keys},4977:(i,s,o)=>{var d=o(4188),j=o(3174),$=TypeError;i.exports=function(ot){if(d(ot))return ot;throw new $(j(ot)+" is not a function")}},3770:(i,s,o)=>{var d=o(831),j=String,$=TypeError;i.exports=function(ot){if(d(ot))return ot;throw new $(j(ot)+" is not an object")}},1458:(i,s,o)=>{var d=o(380),j=o(675),$=o(9389),ot=function(ht){return function(pt,dt,gt){var wt=d(pt),bt=$(wt);if(bt===0)return!ht&&-1;var St=j(gt,bt),Ct;if(ht&&dt!==dt){for(;bt>St;)if(Ct=wt[St++],Ct!==Ct)return!0}else for(;bt>St;St++)if((ht||St in wt)&&wt[St]===dt)return ht||St||0;return!ht&&-1}};i.exports={includes:ot(!0),indexOf:ot(!1)}},5397:(i,s,o)=>{var d=o(5234);i.exports=function(j,$){var ot=[][j];return!!ot&&d(function(){ot.call(null,$||function(){return 1},1)})}},7825:(i,s,o)=>{var d=o(6881);i.exports=d([].slice)},9295:(i,s,o)=>{var d=o(7825),j=Math.floor,$=function(ot,ht){var pt=ot.length;if(pt<8)for(var dt=1,gt,wt;dt<pt;){for(wt=dt,gt=ot[dt];wt&&ht(ot[wt-1],gt)>0;)ot[wt]=ot[--wt];wt!==dt++&&(ot[wt]=gt)}else for(var bt=j(pt/2),St=$(d(ot,0,bt),ht),Ct=$(d(ot,bt),ht),Et=St.length,Pt=Ct.length,_t=0,yt=0;_t<Et||yt<Pt;)ot[_t+yt]=_t<Et&&yt<Pt?ht(St[_t],Ct[yt])<=0?St[_t++]:Ct[yt++]:_t<Et?St[_t++]:Ct[yt++];return ot};i.exports=$},8689:(i,s,o)=>{var d=o(6881),j=d({}.toString),$=d("".slice);i.exports=function(ot){return $(j(ot),8,-1)}},5438:(i,s,o)=>{var d=o(9345),j=o(4188),$=o(8689),ot=o(4282),ht=ot("toStringTag"),pt=Object,dt=$(function(){return arguments}())==="Arguments",gt=function(wt,bt){try{return wt[bt]}catch{}};i.exports=d?$:function(wt){var bt,St,Ct;return wt===void 0?"Undefined":wt===null?"Null":typeof(St=gt(bt=pt(wt),ht))=="string"?St:dt?$(bt):(Ct=$(bt))==="Object"&&j(bt.callee)?"Arguments":Ct}},8657:(i,s,o)=>{var d=o(4418),j=o(3168),$=o(9304),ot=o(4466);i.exports=function(ht,pt,dt){for(var gt=j(pt),wt=ot.f,bt=$.f,St=0;St<gt.length;St++){var Ct=gt[St];!d(ht,Ct)&&!(dt&&d(dt,Ct))&&wt(ht,Ct,bt(pt,Ct))}}},8088:(i,s,o)=>{var d=o(6893),j=o(4466),$=o(9123);i.exports=d?function(ot,ht,pt){return j.f(ot,ht,$(1,pt))}:function(ot,ht,pt){return ot[ht]=pt,ot}},9123:i=>{i.exports=function(s,o){return{enumerable:!(s&1),configurable:!(s&2),writable:!(s&4),value:o}}},7509:(i,s,o)=>{var d=o(4188),j=o(4466),$=o(4530),ot=o(4798);i.exports=function(ht,pt,dt,gt){gt||(gt={});var wt=gt.enumerable,bt=gt.name!==void 0?gt.name:pt;if(d(dt)&&$(dt,bt,gt),gt.global)wt?ht[pt]=dt:ot(pt,dt);else{try{gt.unsafe?ht[pt]&&(wt=!0):delete ht[pt]}catch{}wt?ht[pt]=dt:j.f(ht,pt,{value:dt,enumerable:!1,configurable:!gt.nonConfigurable,writable:!gt.nonWritable})}return ht}},4798:(i,s,o)=>{var d=o(1488),j=Object.defineProperty;i.exports=function($,ot){try{j(d,$,{value:ot,configurable:!0,writable:!0})}catch{d[$]=ot}return ot}},1305:(i,s,o)=>{var d=o(3174),j=TypeError;i.exports=function($,ot){if(!delete $[ot])throw new j("Cannot delete property "+d(ot)+" of "+d($))}},6893:(i,s,o)=>{var d=o(5234);i.exports=!d(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},5926:(i,s,o)=>{var d=o(1488),j=o(831),$=d.document,ot=j($)&&j($.createElement);i.exports=function(ht){return ot?$.createElement(ht):{}}},8807:(i,s,o)=>{var d=o(4109),j=d.match(/firefox\/(\d+)/i);i.exports=!!j&&+j[1]},5661:(i,s,o)=>{var d=o(4109);i.exports=/MSIE|Trident/.test(d)},4109:i=>{i.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},3749:(i,s,o)=>{var d=o(1488),j=o(4109),$=d.process,ot=d.Deno,ht=$&&$.versions||ot&&ot.version,pt=ht&&ht.v8,dt,gt;pt&&(dt=pt.split("."),gt=dt[0]>0&&dt[0]<4?1:+(dt[0]+dt[1])),!gt&&j&&(dt=j.match(/Edge\/(\d+)/),(!dt||dt[1]>=74)&&(dt=j.match(/Chrome\/(\d+)/),dt&&(gt=+dt[1]))),i.exports=gt},3589:(i,s,o)=>{var d=o(4109),j=d.match(/AppleWebKit\/(\d+)\./);i.exports=!!j&&+j[1]},2564:(i,s,o)=>{var d=o(1488),j=o(6881);i.exports=function($,ot){return j(d[$].prototype[ot])}},1274:i=>{i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},5613:(i,s,o)=>{var d=o(1488),j=o(9304).f,$=o(8088),ot=o(7509),ht=o(4798),pt=o(8657),dt=o(8489);i.exports=function(gt,wt){var bt=gt.target,St=gt.global,Ct=gt.stat,Et,Pt,_t,yt,xt,Dt;if(St?Pt=d:Ct?Pt=d[bt]||ht(bt,{}):Pt=d[bt]&&d[bt].prototype,Pt)for(_t in wt){if(xt=wt[_t],gt.dontCallGetSet?(Dt=j(Pt,_t),yt=Dt&&Dt.value):yt=Pt[_t],Et=dt(St?_t:bt+(Ct?".":"#")+_t,gt.forced),!Et&&yt!==void 0){if(typeof xt==typeof yt)continue;pt(xt,yt)}(gt.sham||yt&&yt.sham)&&$(xt,"sham",!0),ot(Pt,_t,xt,gt)}}},5234:i=>{i.exports=function(s){try{return!!s()}catch{return!0}}},9055:(i,s,o)=>{var d=o(5234);i.exports=!d(function(){var j=function(){}.bind();return typeof j!="function"||j.hasOwnProperty("prototype")})},9944:(i,s,o)=>{var d=o(9055),j=Function.prototype.call;i.exports=d?j.bind(j):function(){return j.apply(j,arguments)}},2735:(i,s,o)=>{var d=o(6893),j=o(4418),$=Function.prototype,ot=d&&Object.getOwnPropertyDescriptor,ht=j($,"name"),pt=ht&&function(){}.name==="something",dt=ht&&(!d||d&&ot($,"name").configurable);i.exports={EXISTS:ht,PROPER:pt,CONFIGURABLE:dt}},6881:(i,s,o)=>{var d=o(9055),j=Function.prototype,$=j.call,ot=d&&j.bind.bind($,$);i.exports=d?ot:function(ht){return function(){return $.apply(ht,arguments)}}},5604:(i,s,o)=>{var d=o(1488),j=o(4188),$=function(ot){return j(ot)?ot:void 0};i.exports=function(ot,ht){return arguments.length<2?$(d[ot]):d[ot]&&d[ot][ht]}},2913:(i,s,o)=>{var d=o(4977),j=o(4318);i.exports=function($,ot){var ht=$[ot];return j(ht)?void 0:d(ht)}},1488:function(i,s,o){var d=function(j){return j&&j.Math===Math&&j};i.exports=d(typeof globalThis=="object"&&globalThis)||d(typeof window=="object"&&window)||d(typeof self=="object"&&self)||d(typeof o.g=="object"&&o.g)||d(typeof this=="object"&&this)||function(){return this}()||Function("return this")()},4418:(i,s,o)=>{var d=o(6881),j=o(3628),$=d({}.hasOwnProperty);i.exports=Object.hasOwn||function(ht,pt){return $(j(ht),pt)}},7588:i=>{i.exports={}},9622:(i,s,o)=>{var d=o(6893),j=o(5234),$=o(5926);i.exports=!d&&!j(function(){return Object.defineProperty($("div"),"a",{get:function(){return 7}}).a!==7})},7568:(i,s,o)=>{var d=o(6881),j=o(5234),$=o(8689),ot=Object,ht=d("".split);i.exports=j(function(){return!ot("z").propertyIsEnumerable(0)})?function(pt){return $(pt)==="String"?ht(pt,""):ot(pt)}:ot},3029:(i,s,o)=>{var d=o(6881),j=o(4188),$=o(2694),ot=d(Function.toString);j($.inspectSource)||($.inspectSource=function(ht){return ot(ht)}),i.exports=$.inspectSource},3086:(i,s,o)=>{var d=o(5945),j=o(1488),$=o(831),ot=o(8088),ht=o(4418),pt=o(2694),dt=o(168),gt=o(7588),wt="Object already initialized",bt=j.TypeError,St=j.WeakMap,Ct,Et,Pt,_t=function(Ot){return Pt(Ot)?Et(Ot):Ct(Ot,{})},yt=function(Ot){return function(Bt){var At;if(!$(Bt)||(At=Et(Bt)).type!==Ot)throw new bt("Incompatible receiver, "+Ot+" required");return At}};if(d||pt.state){var xt=pt.state||(pt.state=new St);xt.get=xt.get,xt.has=xt.has,xt.set=xt.set,Ct=function(Ot,Bt){if(xt.has(Ot))throw new bt(wt);return Bt.facade=Ot,xt.set(Ot,Bt),Bt},Et=function(Ot){return xt.get(Ot)||{}},Pt=function(Ot){return xt.has(Ot)}}else{var Dt=dt("state");gt[Dt]=!0,Ct=function(Ot,Bt){if(ht(Ot,Dt))throw new bt(wt);return Bt.facade=Ot,ot(Ot,Dt,Bt),Bt},Et=function(Ot){return ht(Ot,Dt)?Ot[Dt]:{}},Pt=function(Ot){return ht(Ot,Dt)}}i.exports={set:Ct,get:Et,has:Pt,enforce:_t,getterFor:yt}},4188:i=>{var s=typeof document=="object"&&document.all;i.exports=typeof s>"u"&&s!==void 0?function(o){return typeof o=="function"||o===s}:function(o){return typeof o=="function"}},8489:(i,s,o)=>{var d=o(5234),j=o(4188),$=/#|\.prototype\./,ot=function(wt,bt){var St=pt[ht(wt)];return St===gt?!0:St===dt?!1:j(bt)?d(bt):!!bt},ht=ot.normalize=function(wt){return String(wt).replace($,".").toLowerCase()},pt=ot.data={},dt=ot.NATIVE="N",gt=ot.POLYFILL="P";i.exports=ot},4318:i=>{i.exports=function(s){return s==null}},831:(i,s,o)=>{var d=o(4188);i.exports=function(j){return typeof j=="object"?j!==null:d(j)}},1942:i=>{i.exports=!1},6032:(i,s,o)=>{var d=o(5604),j=o(4188),$=o(4578),ot=o(9809),ht=Object;i.exports=ot?function(pt){return typeof pt=="symbol"}:function(pt){var dt=d("Symbol");return j(dt)&&$(dt.prototype,ht(pt))}},9389:(i,s,o)=>{var d=o(7611);i.exports=function(j){return d(j.length)}},4530:(i,s,o)=>{var d=o(6881),j=o(5234),$=o(4188),ot=o(4418),ht=o(6893),pt=o(2735).CONFIGURABLE,dt=o(3029),gt=o(3086),wt=gt.enforce,bt=gt.get,St=String,Ct=Object.defineProperty,Et=d("".slice),Pt=d("".replace),_t=d([].join),yt=ht&&!j(function(){return Ct(function(){},"length",{value:8}).length!==8}),xt=String(String).split("String"),Dt=i.exports=function(Ot,Bt,At){Et(St(Bt),0,7)==="Symbol("&&(Bt="["+Pt(St(Bt),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),At&&At.getter&&(Bt="get "+Bt),At&&At.setter&&(Bt="set "+Bt),(!ot(Ot,"name")||pt&&Ot.name!==Bt)&&(ht?Ct(Ot,"name",{value:Bt,configurable:!0}):Ot.name=Bt),yt&&At&&ot(At,"arity")&&Ot.length!==At.arity&&Ct(Ot,"length",{value:At.arity});try{At&&ot(At,"constructor")&&At.constructor?ht&&Ct(Ot,"prototype",{writable:!1}):Ot.prototype&&(Ot.prototype=void 0)}catch{}var It=wt(Ot);return ot(It,"source")||(It.source=_t(xt,typeof Bt=="string"?Bt:"")),Ot};Function.prototype.toString=Dt(function(){return $(this)&&bt(this).source||dt(this)},"toString")},142:i=>{var s=Math.ceil,o=Math.floor;i.exports=Math.trunc||function(j){var $=+j;return($>0?o:s)($)}},4466:(i,s,o)=>{var d=o(6893),j=o(9622),$=o(3315),ot=o(3770),ht=o(2344),pt=TypeError,dt=Object.defineProperty,gt=Object.getOwnPropertyDescriptor,wt="enumerable",bt="configurable",St="writable";s.f=d?$?function(Et,Pt,_t){if(ot(Et),Pt=ht(Pt),ot(_t),typeof Et=="function"&&Pt==="prototype"&&"value"in _t&&St in _t&&!_t[St]){var yt=gt(Et,Pt);yt&&yt[St]&&(Et[Pt]=_t.value,_t={configurable:bt in _t?_t[bt]:yt[bt],enumerable:wt in _t?_t[wt]:yt[wt],writable:!1})}return dt(Et,Pt,_t)}:dt:function(Et,Pt,_t){if(ot(Et),Pt=ht(Pt),ot(_t),j)try{return dt(Et,Pt,_t)}catch{}if("get"in _t||"set"in _t)throw new pt("Accessors not supported");return"value"in _t&&(Et[Pt]=_t.value),Et}},9304:(i,s,o)=>{var d=o(6893),j=o(9944),$=o(4416),ot=o(9123),ht=o(380),pt=o(2344),dt=o(4418),gt=o(9622),wt=Object.getOwnPropertyDescriptor;s.f=d?wt:function(St,Ct){if(St=ht(St),Ct=pt(Ct),gt)try{return wt(St,Ct)}catch{}if(dt(St,Ct))return ot(!j($.f,St,Ct),St[Ct])}},5629:(i,s,o)=>{var d=o(1843),j=o(1274),$=j.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(ht){return d(ht,$)}},156:(i,s)=>{s.f=Object.getOwnPropertySymbols},4578:(i,s,o)=>{var d=o(6881);i.exports=d({}.isPrototypeOf)},1843:(i,s,o)=>{var d=o(6881),j=o(4418),$=o(380),ot=o(1458).indexOf,ht=o(7588),pt=d([].push);i.exports=function(dt,gt){var wt=$(dt),bt=0,St=[],Ct;for(Ct in wt)!j(ht,Ct)&&j(wt,Ct)&&pt(St,Ct);for(;gt.length>bt;)j(wt,Ct=gt[bt++])&&(~ot(St,Ct)||pt(St,Ct));return St}},7137:(i,s,o)=>{var d=o(1843),j=o(1274);i.exports=Object.keys||function(ot){return d(ot,j)}},4416:(i,s)=>{var o={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,j=d&&!o.call({1:2},1);s.f=j?function(ot){var ht=d(this,ot);return!!ht&&ht.enumerable}:o},2287:(i,s,o)=>{var d=o(9944),j=o(4188),$=o(831),ot=TypeError;i.exports=function(ht,pt){var dt,gt;if(pt==="string"&&j(dt=ht.toString)&&!$(gt=d(dt,ht))||j(dt=ht.valueOf)&&!$(gt=d(dt,ht))||pt!=="string"&&j(dt=ht.toString)&&!$(gt=d(dt,ht)))return gt;throw new ot("Can't convert object to primitive value")}},3168:(i,s,o)=>{var d=o(5604),j=o(6881),$=o(5629),ot=o(156),ht=o(3770),pt=j([].concat);i.exports=d("Reflect","ownKeys")||function(gt){var wt=$.f(ht(gt)),bt=ot.f;return bt?pt(wt,bt(gt)):wt}},9120:(i,s,o)=>{var d=o(1488);i.exports=d},9509:(i,s,o)=>{var d=o(4318),j=TypeError;i.exports=function($){if(d($))throw new j("Can't call method on "+$);return $}},168:(i,s,o)=>{var d=o(746),j=o(6209),$=d("keys");i.exports=function(ot){return $[ot]||($[ot]=j(ot))}},2694:(i,s,o)=>{var d=o(1942),j=o(1488),$=o(4798),ot="__core-js_shared__",ht=i.exports=j[ot]||$(ot,{});(ht.versions||(ht.versions=[])).push({version:"3.36.1",mode:d?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.1/LICENSE",source:"https://github.com/zloirock/core-js"})},746:(i,s,o)=>{var d=o(2694);i.exports=function(j,$){return d[j]||(d[j]=$||{})}},8944:(i,s,o)=>{var d=o(3749),j=o(5234),$=o(1488),ot=$.String;i.exports=!!Object.getOwnPropertySymbols&&!j(function(){var ht=Symbol("symbol detection");return!ot(ht)||!(Object(ht)instanceof Symbol)||!Symbol.sham&&d&&d<41})},675:(i,s,o)=>{var d=o(6744),j=Math.max,$=Math.min;i.exports=function(ot,ht){var pt=d(ot);return pt<0?j(pt+ht,0):$(pt,ht)}},380:(i,s,o)=>{var d=o(7568),j=o(9509);i.exports=function($){return d(j($))}},6744:(i,s,o)=>{var d=o(142);i.exports=function(j){var $=+j;return $!==$||$===0?0:d($)}},7611:(i,s,o)=>{var d=o(6744),j=Math.min;i.exports=function($){var ot=d($);return ot>0?j(ot,9007199254740991):0}},3628:(i,s,o)=>{var d=o(9509),j=Object;i.exports=function($){return j(d($))}},290:(i,s,o)=>{var d=o(9944),j=o(831),$=o(6032),ot=o(2913),ht=o(2287),pt=o(4282),dt=TypeError,gt=pt("toPrimitive");i.exports=function(wt,bt){if(!j(wt)||$(wt))return wt;var St=ot(wt,gt),Ct;if(St){if(bt===void 0&&(bt="default"),Ct=d(St,wt,bt),!j(Ct)||$(Ct))return Ct;throw new dt("Can't convert object to primitive value")}return bt===void 0&&(bt="number"),ht(wt,bt)}},2344:(i,s,o)=>{var d=o(290),j=o(6032);i.exports=function($){var ot=d($,"string");return j(ot)?ot:ot+""}},9345:(i,s,o)=>{var d=o(4282),j=d("toStringTag"),$={};$[j]="z",i.exports=String($)==="[object z]"},2618:(i,s,o)=>{var d=o(5438),j=String;i.exports=function($){if(d($)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return j($)}},3174:i=>{var s=String;i.exports=function(o){try{return s(o)}catch{return"Object"}}},6209:(i,s,o)=>{var d=o(6881),j=0,$=Math.random(),ot=d(1 .toString);i.exports=function(ht){return"Symbol("+(ht===void 0?"":ht)+")_"+ot(++j+$,36)}},9809:(i,s,o)=>{var d=o(8944);i.exports=d&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},3315:(i,s,o)=>{var d=o(6893),j=o(5234);i.exports=d&&j(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},5945:(i,s,o)=>{var d=o(1488),j=o(4188),$=d.WeakMap;i.exports=j($)&&/native code/.test(String($))},4282:(i,s,o)=>{var d=o(1488),j=o(746),$=o(4418),ot=o(6209),ht=o(8944),pt=o(9809),dt=d.Symbol,gt=j("wks"),wt=pt?dt.for||dt:dt&&dt.withoutSetter||ot;i.exports=function(bt){return $(gt,bt)||(gt[bt]=ht&&$(dt,bt)?dt[bt]:wt("Symbol."+bt)),gt[bt]}},3975:(i,s,o)=>{var d=o(5613),j=o(6881),$=o(4977),ot=o(3628),ht=o(9389),pt=o(1305),dt=o(2618),gt=o(5234),wt=o(9295),bt=o(5397),St=o(8807),Ct=o(5661),Et=o(3749),Pt=o(3589),_t=[],yt=j(_t.sort),xt=j(_t.push),Dt=gt(function(){_t.sort(void 0)}),Ot=gt(function(){_t.sort(null)}),Bt=bt("sort"),At=!gt(function(){if(Et)return Et<70;if(!(St&&St>3)){if(Ct)return!0;if(Pt)return Pt<603;var Jt="",nn,Vt,Ut,Ht;for(nn=65;nn<76;nn++){switch(Vt=String.fromCharCode(nn),nn){case 66:case 69:case 70:case 72:Ut=3;break;case 68:case 71:Ut=4;break;default:Ut=2}for(Ht=0;Ht<47;Ht++)_t.push({k:Vt+Ht,v:Ut})}for(_t.sort(function(jt,Wt){return Wt.v-jt.v}),Ht=0;Ht<_t.length;Ht++)Vt=_t[Ht].k.charAt(0),Jt.charAt(Jt.length-1)!==Vt&&(Jt+=Vt);return Jt!=="DGBEFHACIJK"}}),It=Dt||!Ot||!Bt||!At,Gt=function(Jt){return function(nn,Vt){return Vt===void 0?-1:nn===void 0?1:Jt!==void 0?+Jt(nn,Vt)||0:dt(nn)>dt(Vt)?1:-1}};d({target:"Array",proto:!0,forced:It},{sort:function(nn){nn!==void 0&&$(nn);var Vt=ot(this);if(At)return nn===void 0?yt(Vt):yt(Vt,nn);var Ut=[],Ht=ht(Vt),jt,Wt;for(Wt=0;Wt<Ht;Wt++)Wt in Vt&&xt(Ut,Vt[Wt]);for(wt(Ut,Gt(nn)),jt=ht(Ut),Wt=0;Wt<jt;)Vt[Wt]=Ut[Wt++];for(;Wt<Ht;)pt(Vt,Wt++);return Vt}})},8291:(i,s,o)=>{var d=o(5613),j=o(3628),$=o(7137),ot=o(5234),ht=ot(function(){$(1)});d({target:"Object",stat:!0,forced:ht},{keys:function(dt){return $(j(dt))}})}},__webpack_module_cache__={};function __webpack_require__(i){var s=__webpack_module_cache__[i];if(s!==void 0)return s.exports;var o=__webpack_module_cache__[i]={id:i,exports:{}};return __webpack_modules__[i].call(o.exports,o,o.exports,__webpack_require__),o.exports}__webpack_require__.n=i=>{var s=i&&i.__esModule?()=>i.default:()=>i;return __webpack_require__.d(s,{a:s}),s};__webpack_require__.d=(i,s)=>{for(var o in s)__webpack_require__.o(s,o)&&!__webpack_require__.o(i,o)&&Object.defineProperty(i,o,{enumerable:!0,get:s[o]})};__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();__webpack_require__.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s);__webpack_require__.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{__webpack_require__.d(__webpack_exports__,{eKr:()=>Dl,yVm:()=>$a,a7j:()=>Fu,U_w:()=>dp,JF2:()=>Ms,htg:()=>_l,HXL:()=>Cp,mcg:()=>ro,Agj:()=>Yo,u6S:()=>Ju,x7M:()=>yn,X55:()=>ps,m3M:()=>Ol,aE5:()=>tp,YJU:()=>Jo,eZi:()=>np,GNv:()=>Lr,Y56:()=>fu,_0v:()=>cu,vhs:()=>su,Z8b:()=>ju,Yfw:()=>Ur,IcQ:()=>Wt,Rl2:()=>Os,kgJ:()=>cp,GTT:()=>Fp,ypY:()=>du,i7d:()=>tn,fQ3:()=>Ft,HlI:()=>fo,jlt:()=>eu,VQc:()=>Fo,zD7:()=>up,I0I:()=>Bl,AUF:()=>Ss,JoF:()=>rs,MlA:()=>xo,PZh:()=>Xs,qA:()=>Mo,CrD:()=>hs,dQK:()=>Go,D3r:()=>bs,Qpo:()=>ba,D9n:()=>_a,b6v:()=>Vs,mvh:()=>rp,Bpo:()=>On,Q1f:()=>Gt,IKv:()=>Ip,fcV:()=>Gl,Glf:()=>Dp,uAl:()=>oo,ElT:()=>So,MPu:()=>wp,Z8r:()=>Ut,QSL:()=>yp,sPV:()=>Is,nAn:()=>fs,zCU:()=>ga,QrV:()=>vr,fF9:()=>Sm,xI8:()=>El,yar:()=>Po,SP7:()=>Mp,oRy:()=>Ks,f5X:()=>Ap,V1c:()=>Kn,Mlx:()=>Bp,ZCo:()=>Fs,Vy3:()=>ao,J5p:()=>Op,mL_:()=>Uo,Guw:()=>Hu,VKx:()=>$s,N5j:()=>mr,pgY:()=>Uu,OP3:()=>lu,rl5:()=>jp,eod:()=>om,q5Z:()=>xr,YUC:()=>ds,saR:()=>Bs,hvr:()=>_p,Qol:()=>Cu,Wf4:()=>Nu,JCs:()=>vo,gJV:()=>Ko,fWD:()=>Lt,Va_:()=>uu,N$8:()=>ls,_jQ:()=>lm,rxj:()=>Pl,rhv:()=>Tl,wCu:()=>jo,HAp:()=>_f,Zy1:()=>co,Qev:()=>cm,bkB:()=>dt,wfL:()=>Eo,sVA:()=>s,$Gs:()=>_o,CJ0:()=>rr,NWh:()=>ar,tWi:()=>Rl,xAj:()=>ws,zWh:()=>$u,i_4:()=>km,iIx:()=>ot,c9e:()=>ku,KQV:()=>qs,weH:()=>ho,jXp:()=>Am,zzY:()=>au,yRQ:()=>ru,MtE:()=>zp,rPj:()=>Iu,KLc:()=>pt,Fir:()=>Or,V5f:()=>Io,Xj7:()=>Ts,Wud:()=>Pu,FVg:()=>na,g5Y:()=>Cl,YQB:()=>Al,KPb:()=>Ls,nHK:()=>Tu,TX_:()=>bm,r3n:()=>Ru,vYh:()=>cn,hnk:()=>Do,D2R:()=>os,n1o:()=>xp,RLG:()=>Rs,fBU:()=>Fl,Adb:()=>En,bEs:()=>An,wCy:()=>sr,CbD:()=>Gn,x_C:()=>Ns,pde:()=>d,pGf:()=>lp,ibQ:()=>Tp,QlN:()=>js,shR:()=>Eu,Yjk:()=>kp,_u1:()=>hm,OBI:()=>$p,klh:()=>gu,s3S:()=>op,D$R:()=>pu,xth:()=>Bo,JU7:()=>um,h9x:()=>Tt,N1A:()=>gp,e_k:()=>Lo,aHM:()=>nr,tlv:()=>_c,Vi9:()=>Zt,ieR:()=>Yt,$bb:()=>nn,VyI:()=>Vt,imn:()=>qr,uqu:()=>vn,QnL:()=>Rn,vnc:()=>Il,wk_:()=>iu,GH0:()=>uo,_1r:()=>vp,l0X:()=>Ou,HHX:()=>nu,tjk:()=>Js,rWe:()=>ks,j9l:()=>Ql,NVp:()=>Ys,cPK:()=>lo,XoL:()=>Sp,RmF:()=>bo,DXI:()=>Hl,tCD:()=>dm,oGn:()=>Up,J3D:()=>Yu,vCJ:()=>bp,f9l:()=>hu,AQx:()=>Nr,v9m:()=>qu,yRJ:()=>Ep,EU6:()=>ap,m3O:()=>Hs,Ryz:()=>Es,OxP:()=>mu,LEs:()=>Du,Ec:()=>gt,Pi5:()=>Xu,gmH:()=>Us,tS:()=>mp,XxX:()=>Ro,bCz:()=>Tn,nYS:()=>Cs,yiT:()=>is,NHl:()=>Oo,mO8:()=>Gs,PXI:()=>ns,bn5:()=>zs,Ywr:()=>As,cMd:()=>Ds,Bs6:()=>Zs,G0k:()=>ko,pyn:()=>xl,QeM:()=>Co,aPX:()=>em,ITP:()=>us,BY0:()=>ys,MFw:()=>zo,sBn:()=>Vr,S3L:()=>_u,XKQ:()=>po,ESI:()=>ts,uxz:()=>vt,o8N:()=>bt,u_r:()=>no,RlV:()=>Ho,gVA:()=>ip,M_G:()=>zl,GRB:()=>Mu,kM6:()=>Bu,dO8:()=>xu,jgM:()=>Dr,FWq:()=>Jn,s3j:()=>_r,hlw:()=>Au,B7e:()=>zu,H_X:()=>ss,S_d:()=>Nl,U7E:()=>Ll,Z58:()=>xs,yh2:()=>nm,ff$:()=>Ar,cWi:()=>Ht,NBt:()=>Su,oNz:()=>Pr,QlU:()=>Rp,Xey:()=>wl,jft:()=>Rm,Mtr:()=>tr,ypk:()=>No,mnM:()=>jt,bAZ:()=>Qo,ABN:()=>Jl,VK6:()=>wu,kxk:()=>kn,DT1:()=>Nn,FLG:()=>Wn,qN_:()=>hp,Z37:()=>wo,FtL:()=>Vu,Z6X:()=>Hp,iQT:()=>Gr,ziO:()=>Ul,OEF:()=>or,uuE:()=>Sr,tiv:()=>yo,T$Y:()=>Lp,EYj:()=>$l,nOB:()=>ou,Tap:()=>hn,FAs:()=>Gu,B_P:()=>Zu,aA5:()=>ep,M4G:()=>Qs,l$l:()=>Np,dLy:()=>so,WZP:()=>hr,eB6:()=>pp,nFK:()=>Vo,l9z:()=>Yn,YOF:()=>dn,yhB:()=>St,J0N:()=>j,Miz:()=>At,Bj4:()=>Jr,Rcs:()=>ir,vJ4:()=>Mn,TqC:()=>xa,nM0:()=>Sl,X1u:()=>Hr,SpZ:()=>Zo,DX8:()=>Zl,Yx$:()=>sp,HK4:()=>Wl,SE$:()=>_t,qE8:()=>Pt,Pz7:()=>Zp,sX_:()=>ht,JuI:()=>Ct,Nl$:()=>bu,OwT:()=>pm,P$G:()=>vm,mHV:()=>mm,Fx_:()=>wm,WFC:()=>ym,aDq:()=>fm,jIg:()=>_m,UH3:()=>gm,K6X:()=>_h,C1Y:()=>To,Aw1:()=>Ml,A8$:()=>_d,hsx:()=>Ws,l9E:()=>Wu,aSf:()=>es,Zex:()=>Gp,mXP:()=>Tm,vt$:()=>cr,hCA:()=>ur,pjR:()=>Qn,U43:()=>Ot,pSZ:()=>Bt,y17:()=>Dt,jVr:()=>Em,_SZ:()=>Et,xWn:()=>yt,ehJ:()=>xt,t6s:()=>It,Eyn:()=>i});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{getAttributeComponentSize:()=>_i,getAttributePointerType:()=>pr,getGLTypeFromSource:()=>In,getGlTypeSizeBytes:()=>Tr,isAttributeInSource:()=>fr});var s={};__webpack_require__.r(s),__webpack_require__.d(s,{ActionCompleteEvent:()=>Dl,ActionStartEvent:()=>Ms,ActivateEvent:()=>ro,CollisionEndEvent:()=>Mo,CollisionPostSolveEvent:()=>ba,CollisionPreSolveEvent:()=>_a,CollisionStartEvent:()=>Vs,ContactEndEvent:()=>Is,ContactStartEvent:()=>ga,DeactivateEvent:()=>El,EnterTriggerEvent:()=>Pl,EnterViewPortEvent:()=>Tl,EventTypes:()=>Eo,ExitTriggerEvent:()=>Rl,ExitViewPortEvent:()=>ws,GameEvent:()=>Or,GameStartEvent:()=>Io,GameStopEvent:()=>Ts,GamepadAxisEvent:()=>na,GamepadButtonEvent:()=>Cl,GamepadConnectEvent:()=>Al,GamepadDisconnectEvent:()=>Ls,HiddenEvent:()=>Rs,InitializeEvent:()=>Ns,KillEvent:()=>Bo,PostCollisionEvent:()=>Cs,PostDebugDrawEvent:()=>is,PostDrawEvent:()=>Oo,PostFrameEvent:()=>Gs,PostKillEvent:()=>ns,PostTransformDrawEvent:()=>zs,PostUpdateEvent:()=>As,PreCollisionEvent:()=>Ds,PreDebugDrawEvent:()=>Zs,PreDrawEvent:()=>ko,PreFrameEvent:()=>xl,PreKillEvent:()=>Co,PreTransformDrawEvent:()=>us,PreUpdateEvent:()=>ys,VisibleEvent:()=>Sl});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{circle:()=>zt,line:()=>Cr,point:()=>Xr,roundRect:()=>$t,vector:()=>wr});var d={};__webpack_require__.r(d),__webpack_require__.d(d,{Axes:()=>fu,Buttons:()=>du,Gamepad:()=>Pu,Gamepads:()=>Tu,KeyEvent:()=>gu,Keyboard:()=>op,Keys:()=>pu,NativePointerButton:()=>Js,PointerButton:()=>Hs,PointerComponent:()=>Es,PointerEvent:()=>mu,PointerEventReceiver:()=>Du,PointerScope:()=>gt,PointerSystem:()=>Xu,PointerType:()=>Us,WheelDeltaMode:()=>Zl,WheelEvent:()=>sp});var j={};__webpack_require__.r(j),__webpack_require__.d(j,{ConsoleAppender:()=>Ut,DrawUtil:()=>o,EasingFunctions:()=>vo,LogLevel:()=>nn,Logger:()=>Vt,Observable:()=>lo,ScreenAppender:()=>Ht,addItemToArray:()=>Qt,contains:()=>on,delay:()=>bn,fail:()=>sn,getPosition:()=>ln,omit:()=>Zn,removeItemFromArray:()=>Xt}),__webpack_require__(9493),__webpack_require__(311);function $(){if(typeof window>"u"&&(window={audioContext:function(){}}),typeof window<"u"&&!window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(ut){window.setInterval(ut,1e3/60)}),typeof window<"u"&&!window.cancelAnimationFrame&&(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(){}),typeof window<"u"&&!window.AudioContext){if(window.webkitAudioContext){const e=window.webkitAudioContext.prototype.decodeAudioData;window.webkitAudioContext.prototype.decodeAudioData=function(a){return new Promise((h,_)=>{e.call(this,a,h,_)})}}window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext||window.oAudioContext}typeof window<"u"&&!window.devicePixelRatio&&(window.devicePixelRatio=window.devicePixelRatio||1)}class ot{static useCanvasGraphicsContext(){ot.enable("use-canvas-context")}static freeze(){ot._FROZEN=!0}static _reset(){ot._FROZEN=!1,ot._FLAGS={}}static enable(e){if(this._FROZEN)throw Error("Feature flags can only be enabled before Engine constructor time");ot._FLAGS[e]=!0}static disable(e){if(this._FROZEN)throw Error("Feature flags can only be disabled before Engine constructor time");ot._FLAGS[e]=!1}static isEnabled(e){return!!ot._FLAGS[e]}static show(){return Object.keys(ot._FLAGS)}}ot._FROZEN=!1,ot._FLAGS={};function ht(ut,e){return{type:ut,value:e}}class pt{constructor(){this._isCompleted=!1,this.promise=new Promise((e,a)=>{this._resolver=e,this._rejecter=a})}get isCompleted(){return this._isCompleted}resolve(e){this._isCompleted||(this._isCompleted=!0,this._resolver(e))}reject(e){this._isCompleted||(this._isCompleted=!0,this._rejecter(e))}}class dt{constructor(){this._paused=!1,this._listeners={},this._listenersOnce={},this._pipes=[]}clear(){this._listeners={},this._listenersOnce={},this._pipes.length=0}on(e,a){var h;return this._listeners[e]=(h=this._listeners[e])!==null&&h!==void 0?h:[],this._listeners[e].push(a),{close:()=>this.off(e,a)}}once(e,a){var h;return this._listenersOnce[e]=(h=this._listenersOnce[e])!==null&&h!==void 0?h:[],this._listenersOnce[e].push(a),{close:()=>this.off(e,a)}}off(e,a){var h,_;if(a){const lt=(h=this._listeners[e])===null||h===void 0?void 0:h.filter(mt=>mt!==a);this._listeners[e]=lt;const ft=(_=this._listenersOnce[e])===null||_===void 0?void 0:_.filter(mt=>mt!==a);this._listenersOnce[e]=ft}else delete this._listeners[e]}emit(e,a){var h;if(this._paused)return;(h=this._listeners[e])===null||h===void 0||h.forEach(lt=>lt(a));const _=this._listenersOnce[e];this._listenersOnce[e]=[],_&&_.forEach(lt=>lt(a)),this._pipes.forEach(lt=>{lt.emit(e,a)})}pipe(e){if(this===e)throw Error("Cannot pipe to self");return this._pipes.push(e),{close:()=>{const a=this._pipes.indexOf(e);a>-1&&this._pipes.splice(a,1)}}}unpipe(e){const a=this._pipes.indexOf(e);a>-1&&this._pipes.splice(a,1)}pause(){this._paused=!0}unpause(){this._paused=!1}}var gt;(function(ut){ut.Canvas="Canvas",ut.Document="Document"})(gt||(gt={}));const wt=4294967295;class bt{constructor(e){this.seed=e,this._lowerMask=2147483647,this._upperMask=2147483648,this._w=32,this._n=624,this._m=397,this._a=2567483615,this._u=11,this._s=7,this._b=2636928640,this._t=15,this._c=4022730752,this._l=18,this._f=1812433253,this._mt=new Array(this._n),this._mt[0]=(e||Date.now())>>>0;for(let a=1;a<this._n;a++){const h=this._mt[a-1]^this._mt[a-1]>>>this._w-2;this._mt[a]=(this._f*((h&4294901760)>>>16)<<16)+this._f*(h&65535)+a>>>0}this._index=this._n}_twist(){const e=[0,this._a];let a=0,h=0;for(;h<this._n-this._m;h++)a=this._mt[h]&this._upperMask|this._mt[h+1]&this._lowerMask,this._mt[h]=this._mt[h+this._m]^a>>>1^e[a&1]&wt;for(;h<this._n-1;h++)a=this._mt[h]&this._upperMask|this._mt[h+1]&this._lowerMask,this._mt[h]=this._mt[h+(this._m-this._n)]^a>>>1^e[a&1]&wt;a=this._mt[this._n-1]&this._upperMask|this._mt[0]&this._lowerMask,this._mt[this._n-1]=this._mt[this._m-1]^a>>>1^e[a&1]&wt,this._index=0}nextInt(){this._index>=this._n&&this._twist();let e=this._mt[this._index++];return e^=e>>>this._u,e^=e<<this._s&this._b,e^=e<<this._t&this._c,e^=e>>>this._l,e>>>0}next(){return this.nextInt()*(1/4294967296)}floating(e,a){return(a-e)*this.next()+e}integer(e,a){return Math.floor((a-e+1)*this.next()+e)}bool(e=.5){return this.next()<=e}pickOne(e){return e[this.integer(0,e.length-1)]}pickSet(e,a,h=!1){return h?this._pickSetWithDuplicates(e,a):this._pickSetWithoutDuplicates(e,a)}_pickSetWithoutDuplicates(e,a){if(a>e.length||a<0)throw new Error("Invalid number of elements to pick, must pick a value 0 < n <= length");if(a===e.length)return e;const h=new Array(a);let _=0;const lt=e.slice(0);for(;_<a;){const ft=this.integer(0,lt.length-1);h[_++]=lt[ft],lt.splice(ft,1)}return h}_pickSetWithDuplicates(e,a){if(a<0)throw new Error("Invalid number of elements to pick, must pick a value 0 <= n < MAX_INT");const h=new Array(a);for(let _=0;_<a;_++)h[_]=this.pickOne(e);return h}shuffle(e){const a=e.slice(0);let h=null;for(let _=0;_<a.length-2;_++){const lt=this.integer(_,a.length-1);h=a[_],a[_]=a[lt],a[lt]=h}return a}range(e,a,h){const _=new Array(e);for(let lt=0;lt<e;lt++)_[lt]=this.integer(a,h);return _}d4(){return this.integer(1,4)}d6(){return this.integer(1,6)}d8(){return this.integer(1,8)}d10(){return this.integer(1,10)}d12(){return this.integer(1,12)}d20(){return this.integer(1,20)}}const St=Math.PI*2;function Ct(ut){return ut>=0?ut-Math.floor(ut):ut-Math.ceil(ut)}function Et(ut){return ut===0?0:ut<0?-1:1}function Pt(ut,e,a){return Math.min(Math.max(e,ut),a)}function _t(ut){let e=ut;if(ut>St)for(;e>St;)e-=St;if(ut<0)for(;e<0;)e+=St;return e}function yt(ut){return 180/Math.PI*ut}function xt(ut){return ut/180*Math.PI}const Dt=(ut,e)=>Array.from(new Array(e-ut+1),(a,h)=>h+ut);function Ot(ut,e,a=new bt){return a?a.floating(ut,e):ut+Math.random()*(e-ut)}function Bt(ut,e,a=new bt){return a?a.integer(ut,e):Math.round(Ot(ut,e))}class At{static get Zero(){return new At(0,0)}static get One(){return new At(1,1)}static get Half(){return new At(.5,.5)}static get Up(){return new At(0,-1)}static get Down(){return new At(0,1)}static get Left(){return new At(-1,0)}static get Right(){return new At(1,0)}static fromAngle(e){return new At(Math.cos(e),Math.sin(e))}static isValid(e){return!(e==null||isNaN(e.x)||isNaN(e.y)||e.x===1/0||e.y===1/0||e.x===-1/0||e.y===-1/0)}static distance(e,a){return Math.sqrt(Math.pow(e.x-a.x,2)+Math.pow(e.y-a.y,2))}static min(e,a){return new At(Math.min(e.x,a.x),Math.min(e.y,a.y))}static max(e,a){return new At(Math.max(e.x,a.x),Math.max(e.y,a.y))}constructor(e,a){this._x=0,this._y=0,this._x=e,this._y=a}get x(){return this._x}set x(e){this._x=e}get y(){return this._y}set y(e){this._y=e}setTo(e,a){this.x=e,this.y=a}equals(e,a=At.EQUALS_EPSILON){return Math.abs(this.x-e.x)<=a&&Math.abs(this.y-e.y)<=a}distance(e){if(!e)return Math.sqrt(this.x*this.x+this.y*this.y);const a=this.x-e.x,h=this.y-e.y;return Math.sqrt(a*a+h*h)}squareDistance(e){e||(e=At.Zero);const a=this.x-e.x,h=this.y-e.y;return a*a+h*h}clampMagnitude(e){const a=this.size,h=Pt(a,0,e);return this.size=h,this}get size(){return this.distance()}set size(e){const a=this.normalize().scale(e);this.setTo(a.x,a.y)}normalize(){const e=this.distance();return e>0?new At(this.x/e,this.y/e):new At(0,1)}average(e){return this.add(e).scale(.5)}scale(e,a){const h=a||new At(0,0);return e instanceof At?(h.x=this.x*e.x,h.y=this.y*e.y):(h.x=this.x*e,h.y=this.y*e),h}add(e,a){return a?(a.x=this.x+e.x,a.y=this.y+e.y,a):new At(this.x+e.x,this.y+e.y)}sub(e){return new At(this.x-e.x,this.y-e.y)}addEqual(e){return this.setTo(this.x+e.x,this.y+e.y),this}subEqual(e){return this.setTo(this.x-e.x,this.y-e.y),this}scaleEqual(e){return this.setTo(this.x*e,this.y*e),this}dot(e){return this.x*e.x+this.y*e.y}cross(e){if(e instanceof At)return this.x*e.y-this.y*e.x;if(typeof e=="number")return new At(e*this.y,-e*this.x)}static cross(e,a){return new At(-e*a.y,e*a.x)}perpendicular(){return new At(this.y,-this.x)}normal(){return this.perpendicular().normalize()}negate(){return this.scale(-1)}toAngle(){return _t(Math.atan2(this.y,this.x))}rotate(e,a){a||(a=new At(0,0));const h=Math.sin(e),_=Math.cos(e),lt=_*(this.x-a.x)-h*(this.y-a.y)+a.x,ft=h*(this.x-a.x)+_*(this.y-a.y)+a.y;return new At(lt,ft)}clone(e){const a=e??new At(0,0);return a.x=this.x,a.y=this.y,a}toString(e){return e?`(${this.x.toFixed(e)}, ${this.y.toFixed(e)})`:`(${this.x}, ${this.y})`}}At.EQUALS_EPSILON=.001;function It(ut,e){return new At(ut,e)}class Gt{constructor(e,a,h,_){this.r=e,this.g=a,this.b=h,this.a=_??1}static fromRGB(e,a,h,_){return new Gt(e,a,h,_)}static fromRGBString(e){const a=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)/i;let h=null;if(h=e.match(a)){const _=parseInt(h[1],10),lt=parseInt(h[2],10),ft=parseInt(h[3],10);let mt=1;return h[4]&&(mt=parseFloat(h[4])),new Gt(_,lt,ft,mt)}else throw new Error("Invalid rgb/a string: "+e)}static fromHex(e){const a=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i;let h=null;if(h=e.match(a)){const _=parseInt(h[1],16),lt=parseInt(h[2],16),ft=parseInt(h[3],16);let mt=1;return h[4]&&(mt=parseInt(h[4],16)/255),new Gt(_,lt,ft,mt)}else throw new Error("Invalid hex string: "+e)}static fromHSL(e,a,h,_=1){return new Jt(e,a,h,_).toRGBA()}lighten(e=.1){const a=Jt.fromRGBA(this.r,this.g,this.b,this.a);return a.l+=(1-a.l)*e,a.toRGBA()}darken(e=.1){const a=Jt.fromRGBA(this.r,this.g,this.b,this.a);return a.l-=a.l*e,a.toRGBA()}saturate(e=.1){const a=Jt.fromRGBA(this.r,this.g,this.b,this.a);return a.s+=a.s*e,a.toRGBA()}desaturate(e=.1){const a=Jt.fromRGBA(this.r,this.g,this.b,this.a);return a.s-=a.s*e,a.toRGBA()}multiply(e){const a=e.r/255*this.r/255*255,h=e.g/255*this.g/255*255,_=e.b/255*this.b/255*255,lt=e.a*this.a;return new Gt(a,h,_,lt)}screen(e){const a=e.invert(),h=e.invert();return a.multiply(h).invert()}invert(){return new Gt(255-this.r,255-this.g,255-this.b,1-this.a)}average(e){const a=(e.r+this.r)/2,h=(e.g+this.g)/2,_=(e.b+this.b)/2,lt=(e.a+this.a)/2;return new Gt(a,h,_,lt)}equal(e){return this.toString()===e.toString()}toString(e="rgb"){switch(e){case"rgb":return this.toRGBA();case"hsl":return this.toHSLA();case"hex":return this.toHex();default:throw new Error("Invalid Color format")}}_componentToHex(e){const a=Math.max(Math.round(e),0).toString(16);return a.length===1?"0"+a:a}toHex(){let e="#"+this._componentToHex(this.r)+this._componentToHex(this.g)+this._componentToHex(this.b);return this.a!==1&&(e+=this._componentToHex(this.a*255)),e}toRGBA(){const e=String(this.r.toFixed(0))+", "+String(this.g.toFixed(0))+", "+String(this.b.toFixed(0));return this.a!==void 0||this.a!==null?"rgba("+e+", "+String(this.a)+")":"rgb("+e+")"}toHSLA(){return Jt.fromRGBA(this.r,this.g,this.b,this.a).toString()}fillStyle(){return this.toString()}clone(){return new Gt(this.r,this.g,this.b,this.a)}static get Black(){return Gt.fromHex("#000000")}static get White(){return Gt.fromHex("#FFFFFF")}static get Gray(){return Gt.fromHex("#808080")}static get LightGray(){return Gt.fromHex("#D3D3D3")}static get DarkGray(){return Gt.fromHex("#A9A9A9")}static get Yellow(){return Gt.fromHex("#FFFF00")}static get Orange(){return Gt.fromHex("#FFA500")}static get Red(){return Gt.fromHex("#FF0000")}static get Vermilion(){return Gt.fromHex("#FF5B31")}static get Rose(){return Gt.fromHex("#FF007F")}static get Magenta(){return Gt.fromHex("#FF00FF")}static get Violet(){return Gt.fromHex("#7F00FF")}static get Blue(){return Gt.fromHex("#0000FF")}static get Azure(){return Gt.fromHex("#007FFF")}static get Cyan(){return Gt.fromHex("#00FFFF")}static get Viridian(){return Gt.fromHex("#59978F")}static get Green(){return Gt.fromHex("#00FF00")}static get Chartreuse(){return Gt.fromHex("#7FFF00")}static get Transparent(){return Gt.fromHex("#FFFFFF00")}static get ExcaliburBlue(){return Gt.fromHex("#176BAA")}}class Jt{constructor(e,a,h,_){this.h=e,this.s=a,this.l=h,this.a=_}static hue2rgb(e,a,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?e+(a-e)*6*h:h<1/2?a:h<2/3?e+(a-e)*(2/3-h)*6:e}static fromRGBA(e,a,h,_){e/=255,a/=255,h/=255;const lt=Math.max(e,a,h),ft=Math.min(e,a,h);let mt,kt;const Rt=(lt+ft)/2;if(lt===ft)mt=kt=0;else{const Mt=lt-ft;switch(kt=Rt>.5?Mt/(2-lt-ft):Mt/(lt+ft),lt){case e:mt=(a-h)/Mt+(a<h?6:0);break;case a:mt=(h-e)/Mt+2;break;case h:mt=(e-a)/Mt+4;break}mt/=6}return new Jt(mt,kt,Rt,_)}toRGBA(){let e,a,h;if(this.s===0)e=a=h=this.l;else{const _=this.l<.5?this.l*(1+this.s):this.l+this.s-this.l*this.s,lt=2*this.l-_;e=Jt.hue2rgb(lt,_,this.h+1/3),a=Jt.hue2rgb(lt,_,this.h),h=Jt.hue2rgb(lt,_,this.h-1/3)}return new Gt(e*255,a*255,h*255,this.a)}toString(){const e=this.h.toFixed(0),a=this.s.toFixed(0),h=this.l.toFixed(0),_=this.a.toFixed(0);return`hsla(${e}, ${a}, ${h}, ${_})`}}var nn;(function(ut){ut[ut.Debug=0]="Debug",ut[ut.Info=1]="Info",ut[ut.Warn=2]="Warn",ut[ut.Error=3]="Error",ut[ut.Fatal=4]="Fatal"})(nn||(nn={}));class Vt{constructor(){if(this._appenders=[],this.defaultLevel=nn.Info,this._logOnceSet=new Set,Vt._INSTANCE)throw new Error("Logger is a singleton");return Vt._INSTANCE=this,Vt._INSTANCE.addAppender(new Ut),Vt._INSTANCE}static getInstance(){return Vt._INSTANCE==null&&(Vt._INSTANCE=new Vt),Vt._INSTANCE}addAppender(e){this._appenders.push(e)}clearAppenders(){this._appenders.length=0}_log(e,a){e==null&&(e=this.defaultLevel);const h=this._appenders.length;for(let _=0;_<h;_++)e>=this.defaultLevel&&this._appenders[_].log(e,a)}_logOnce(e,a){const h=e+a.join("+");this._logOnceSet.has(h)||(this._logOnceSet.add(h),this._log(e,a))}debug(...e){this._log(nn.Debug,e)}debugOnce(...e){this._logOnce(nn.Debug,e)}info(...e){this._log(nn.Info,e)}infoOnce(...e){this._logOnce(nn.Info,e)}warn(...e){this._log(nn.Warn,e)}warnOnce(...e){this._logOnce(nn.Warn,e)}error(...e){this._log(nn.Error,e)}errorOnce(...e){this._logOnce(nn.Error,e)}fatal(...e){this._log(nn.Fatal,e)}fatalOnce(...e){this._logOnce(nn.Fatal,e)}}Vt._INSTANCE=null;class Ut{log(e,a){if(!console&&!console.log&&console.warn&&console.error)return;const h=[];h.unshift.apply(h,a),h.unshift("["+nn[e]+"] : "),e<nn.Warn?console.log.apply?console.log.apply(console,h):console.log(h.join(" ")):e<nn.Error?console.warn.apply?console.warn.apply(console,h):console.warn(h.join(" ")):console.error.apply?console.error.apply(console,h):console.error(h.join(" "))}}class Ht{constructor(e){var a,h;this._messages=[],this._pos=10,this._color=Gt.Black,this._options=e,this.canvas=document.createElement("canvas"),this._ctx=this.canvas.getContext("2d"),this.canvas.style.position="absolute",this.canvas.style.zIndex=(h=(a=e.zIndex)===null||a===void 0?void 0:a.toString())!==null&&h!==void 0?h:"99",document.body.appendChild(this.canvas),this._positionScreenAppenderCanvas(),e.engine.screen.events.on("resize",()=>{this._positionScreenAppenderCanvas()})}_positionScreenAppenderCanvas(){var e,a,h,_;const lt=this._options;this.canvas.width=(e=lt.width)!==null&&e!==void 0?e:lt.engine.screen.resolution.width,this.canvas.height=(a=lt.height)!==null&&a!==void 0?a:lt.engine.screen.resolution.height,this.canvas.style.position="absolute";const ft=lt.engine.screen.screenToPageCoordinates(It(0,0));this.canvas.style.left=ft.x+"px",this.canvas.style.top=ft.y+"px",this._pos=(h=lt.xPos)!==null&&h!==void 0?h:this._pos,this._color=(_=lt.color)!==null&&_!==void 0?_:this._color}log(e,a){const h=a.join(",");this._ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this._messages.unshift("["+nn[e]+"] : "+h);let _=10;this._messages=this._messages.slice(0,1e3);for(let lt=0;lt<this._messages.length;lt++)this._ctx.fillStyle=this._color.toRGBA(),this._ctx.fillText(this._messages[lt],this._pos,_),_+=10}}var jt;(function(ut){ut.None="None",ut.Top="Top",ut.Bottom="Bottom",ut.Left="Left",ut.Right="Right"})(jt||(jt={})),function(ut){function e(h){return h===ut.Top?ut.Bottom:h===ut.Bottom?ut.Top:h===ut.Left?ut.Right:h===ut.Right?ut.Left:ut.None}ut.getOpposite=e;function a(h){const _=[At.Left,At.Right,At.Up,At.Down],lt=[ut.Left,ut.Right,ut.Top,ut.Bottom];let ft=-Number.MAX_VALUE,mt=-1;for(let kt=0;kt<_.length;kt++)_[kt].dot(h)>ft&&(ft=_[kt].dot(h),mt=kt);return lt[mt]}ut.fromDirection=a}(jt||(jt={}));class Wt{constructor(e=0,a=0,h=0,_=0){this._points=[],typeof e=="object"?(this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom):typeof e=="number"&&(this.left=e,this.top=a,this.right=h,this.bottom=_)}clone(){return new Wt(this.left,this.top,this.right,this.bottom)}static getSideFromIntersection(e){return e&&e?Math.abs(e.x)>Math.abs(e.y)?e.x<0?jt.Right:jt.Left:e.y<0?jt.Bottom:jt.Top:jt.None}static fromPoints(e){let a=1/0,h=1/0,_=-1/0,lt=-1/0;for(let ft=0;ft<e.length;ft++)e[ft].x<a&&(a=e[ft].x),e[ft].x>_&&(_=e[ft].x),e[ft].y<h&&(h=e[ft].y),e[ft].y>lt&&(lt=e[ft].y);return new Wt(a,h,_,lt)}static fromDimension(e,a,h=At.Half,_=At.Zero){return new Wt(-e*h.x+_.x,-a*h.y+_.y,e-e*h.x+_.x,a-a*h.y+_.y)}get width(){return this.right-this.left}get height(){return this.bottom-this.top}hasZeroDimensions(){return this.width===0||this.height===0}get center(){return new At((this.left+this.right)/2,(this.top+this.bottom)/2)}get topLeft(){return new At(this.left,this.top)}get bottomRight(){return new At(this.right,this.bottom)}get topRight(){return new At(this.right,this.top)}get bottomLeft(){return new At(this.left,this.bottom)}translate(e){return new Wt(this.left+e.x,this.top+e.y,this.right+e.x,this.bottom+e.y)}rotate(e,a=At.Zero){const h=this.getPoints().map(_=>_.rotate(e,a));return Wt.fromPoints(h)}scale(e,a=At.Zero){const h=this.translate(a);return new Wt(h.left*e.x,h.top*e.y,h.right*e.x,h.bottom*e.y)}transform(e){const a=e.data[0]*this.left,h=e.data[1]*this.left,_=e.data[0]*this.right,lt=e.data[1]*this.right,ft=e.data[2]*this.top,mt=e.data[3]*this.top,kt=e.data[2]*this.bottom,Rt=e.data[3]*this.bottom,Mt=e.getPosition(),Nt=Math.min(a,_)+Math.min(ft,kt)+Mt.x,en=Math.min(h,lt)+Math.min(mt,Rt)+Mt.y,an=Math.max(a,_)+Math.max(ft,kt)+Mt.x,un=Math.max(h,lt)+Math.max(mt,Rt)+Mt.y;return new Wt({left:Nt,top:en,right:an,bottom:un})}getPerimeter(){const e=this.width,a=this.height;return 2*(e+a)}getPoints(){return(this._left!==this.left||this._right!==this.right||this._top!==this.top||this._bottom!==this.bottom)&&(this._points.length=0,this._points.push(new At(this.left,this.top)),this._points.push(new At(this.right,this.top)),this._points.push(new At(this.right,this.bottom)),this._points.push(new At(this.left,this.bottom)),this._left=this.left,this._right=this.right,this._top=this.top,this._bottom=this.bottom),this._points}rayCast(e,a=1/0){let h=-1/0,_=1/0;const lt=e.dir.x===0?Number.MAX_VALUE:1/e.dir.x,ft=e.dir.y===0?Number.MAX_VALUE:1/e.dir.y,mt=(this.left-e.pos.x)*lt,kt=(this.right-e.pos.x)*lt;h=Math.min(mt,kt),_=Math.max(mt,kt);const Rt=(this.top-e.pos.y)*ft,Mt=(this.bottom-e.pos.y)*ft;return h=Math.max(h,Math.min(Rt,Mt)),_=Math.min(_,Math.max(Rt,Mt)),_>=Math.max(0,h)&&h<a}rayCastTime(e,a=1/0){let h=-1/0,_=1/0;const lt=e.dir.x===0?Number.MAX_VALUE:1/e.dir.x,ft=e.dir.y===0?Number.MAX_VALUE:1/e.dir.y,mt=(this.left-e.pos.x)*lt,kt=(this.right-e.pos.x)*lt;h=Math.min(mt,kt),_=Math.max(mt,kt);const Rt=(this.top-e.pos.y)*ft,Mt=(this.bottom-e.pos.y)*ft;return h=Math.max(h,Math.min(Rt,Mt)),_=Math.min(_,Math.max(Rt,Mt)),_>=Math.max(0,h)&&h<a?h:-1}contains(e){return e instanceof At?this.left<=e.x&&this.top<=e.y&&this.bottom>=e.y&&this.right>=e.x:e instanceof Wt?this.left<=e.left&&this.top<=e.top&&e.bottom<=this.bottom&&e.right<=this.right:!1}combine(e){return new Wt(Math.min(this.left,e.left),Math.min(this.top,e.top),Math.max(this.right,e.right),Math.max(this.bottom,e.bottom))}get dimensions(){return new At(this.width,this.height)}overlaps(e,a){const h=a||0;if(e.hasZeroDimensions())return this.contains(e);if(this.hasZeroDimensions())return e.contains(this);const _=this.combine(e);return _.width+h<e.width+this.width&&_.height+h<e.height+this.height}intersect(e){const a=this.combine(e);if(a.width<e.width+this.width&&a.height<e.height+this.height&&!a.dimensions.equals(e.dimensions)&&!a.dimensions.equals(this.dimensions)){let h=0;this.right>=e.left&&this.right<=e.right?h=e.left-this.right:h=e.right-this.left;let _=0;return this.top<=e.bottom&&this.top>=e.top?_=e.bottom-this.top:_=e.top-this.bottom,Math.abs(h)<Math.abs(_)?new At(h,0):new At(0,_)}else if(a.dimensions.equals(e.dimensions)||a.dimensions.equals(this.dimensions)){let h=0;this.width-e.width>=0?this.right-e.right<=e.left-this.left?h=e.left-this.right:h=e.right-this.left:e.right-this.right<=this.left-e.left?h=this.left-e.right:h=this.right-e.left;let _=0;return this.height-e.height>=0?this.bottom-e.bottom<=e.top-this.top?_=e.top-this.bottom:_=e.bottom-this.top:e.bottom-this.bottom<=this.top-e.top?_=this.top-e.bottom:_=this.bottom-e.top,Math.abs(h)<Math.abs(_)?new At(h,0):new At(0,_)}else return null}intersectWithSide(e){const a=this.intersect(e);return Wt.getSideFromIntersection(a)}draw(e,a=Gt.Yellow){e.debug.drawRect(this.left,this.top,this.width,this.height,{color:a})}}function ln(ut){if(ut){const e=ut.getBoundingClientRect();return It(e.x+window.scrollX,e.y+window.scrollY)}return At.Zero}function Qt(ut,e){return e.indexOf(ut)===-1?(e.push(ut),!0):!1}function Xt(ut,e){let a=-1;return(a=e.indexOf(ut))>-1?(e.splice(a,1),!0):!1}function on(ut,e){for(let a=0;a<ut.length;a++)if(ut[a]===e)return!0;return!1}function sn(ut){throw new Error(ut)}function bn(ut,e){var a;const h=new pt;return((a=e?.schedule.bind(e))!==null&&a!==void 0?a:setTimeout)(()=>{h.resolve()},ut),h.promise}function Zn(ut,e){const a={};for(const h in ut)e.includes(h)||(a[h]=ut[h]);return a}var Rn;(function(ut){ut[ut.X=12]="X",ut[ut.Y=13]="Y"})(Rn||(Rn={}));class vn{constructor(){this.data=new Float32Array(16),this._scaleX=1,this._scaleSignX=1,this._scaleY=1,this._scaleSignY=1}static ortho(e,a,h,_,lt,ft){const mt=new vn;return mt.data[0]=2/(a-e),mt.data[1]=0,mt.data[2]=0,mt.data[3]=0,mt.data[4]=0,mt.data[5]=2/(_-h),mt.data[6]=0,mt.data[7]=0,mt.data[8]=0,mt.data[9]=0,mt.data[10]=-2/(ft-lt),mt.data[11]=0,mt.data[12]=-(a+e)/(a-e),mt.data[13]=-(_+h)/(_-h),mt.data[14]=-(ft+lt)/(ft-lt),mt.data[15]=1,mt}clone(e){const a=e||new vn;return a.data[0]=this.data[0],a.data[1]=this.data[1],a.data[2]=this.data[2],a.data[3]=this.data[3],a.data[4]=this.data[4],a.data[5]=this.data[5],a.data[6]=this.data[6],a.data[7]=this.data[7],a.data[8]=this.data[8],a.data[9]=this.data[9],a.data[10]=this.data[10],a.data[11]=this.data[11],a.data[12]=this.data[12],a.data[13]=this.data[13],a.data[14]=this.data[14],a.data[15]=this.data[15],a}toDOMMatrix(){return new DOMMatrix([...this.data])}static fromFloat32Array(e){const a=new vn;return a.data=e,a}static identity(){const e=new vn;return e.data[0]=1,e.data[1]=0,e.data[2]=0,e.data[3]=0,e.data[4]=0,e.data[5]=1,e.data[6]=0,e.data[7]=0,e.data[8]=0,e.data[9]=0,e.data[10]=1,e.data[11]=0,e.data[12]=0,e.data[13]=0,e.data[14]=0,e.data[15]=1,e}reset(){const e=this;return e.data[0]=1,e.data[1]=0,e.data[2]=0,e.data[3]=0,e.data[4]=0,e.data[5]=1,e.data[6]=0,e.data[7]=0,e.data[8]=0,e.data[9]=0,e.data[10]=1,e.data[11]=0,e.data[12]=0,e.data[13]=0,e.data[14]=0,e.data[15]=1,e}static translation(e,a){const h=vn.identity();return h.data[12]=e,h.data[13]=a,h}static scale(e,a){const h=vn.identity();return h.data[0]=e,h.data[5]=a,h.data[10]=1,h.data[15]=1,h}static rotation(e){const a=vn.identity();return a.data[0]=Math.cos(e),a.data[4]=-Math.sin(e),a.data[1]=Math.sin(e),a.data[5]=Math.cos(e),a}multiply(e,a){if(e instanceof At){const h=a||new At(0,0),_=e,lt=_.x*this.data[0]+_.y*this.data[4]+this.data[12],ft=_.x*this.data[1]+_.y*this.data[5]+this.data[13];return h.x=lt,h.y=ft,h}else{const h=a||new vn,_=e,lt=this.data[0],ft=this.data[1],mt=this.data[2],kt=this.data[3],Rt=this.data[4],Mt=this.data[5],Nt=this.data[6],en=this.data[7],an=this.data[8],un=this.data[9],wn=this.data[10],Bn=this.data[11],fn=this.data[12],pn=this.data[13],zn=this.data[14],Pn=this.data[15],yr=_.data[0],Qr=_.data[1],Hn=_.data[2],Kr=_.data[3],Ao=_.data[4],Wo=_.data[5],gs=_.data[6],ms=_.data[7],_s=_.data[8],cs=_.data[9],Xo=_.data[10],qo=_.data[11],Fr=_.data[12],Vl=_.data[13],Yl=_.data[14],Xl=_.data[15];h.data[0]=lt*yr+Rt*Qr+an*Hn+fn*Kr,h.data[1]=ft*yr+Mt*Qr+un*Hn+pn*Kr,h.data[2]=mt*yr+Nt*Qr+wn*Hn+zn*Kr,h.data[3]=kt*yr+en*Qr+Bn*Hn+Pn*Kr,h.data[4]=lt*Ao+Rt*Wo+an*gs+fn*ms,h.data[5]=ft*Ao+Mt*Wo+un*gs+pn*ms,h.data[6]=mt*Ao+Nt*Wo+wn*gs+zn*ms,h.data[7]=kt*Ao+en*Wo+Bn*gs+Pn*ms,h.data[8]=lt*_s+Rt*cs+an*Xo+fn*qo,h.data[9]=ft*_s+Mt*cs+un*Xo+pn*qo,h.data[10]=mt*_s+Nt*cs+wn*Xo+zn*qo,h.data[11]=kt*_s+en*cs+Bn*Xo+Pn*qo,h.data[12]=lt*Fr+Rt*Vl+an*Yl+fn*Xl,h.data[13]=ft*Fr+Mt*Vl+un*Yl+pn*Xl,h.data[14]=mt*Fr+Nt*Vl+wn*Yl+zn*Xl,h.data[15]=kt*Fr+en*Vl+Bn*Yl+Pn*Xl;const yu=this.getScale();return h._scaleSignX=Et(yu.x)*Et(h._scaleSignX),h._scaleSignY=Et(yu.y)*Et(h._scaleSignY),h}}translate(e,a){const h=this.data[0],_=this.data[1],lt=this.data[2],ft=this.data[3],mt=this.data[4],kt=this.data[5],Rt=this.data[6],Mt=this.data[7],Nt=this.data[8],en=this.data[9],an=this.data[10],un=this.data[11],wn=this.data[12],Bn=this.data[13],fn=this.data[14],pn=this.data[15],zn=0,Pn=1;return this.data[12]=h*e+mt*a+Nt*zn+wn*Pn,this.data[13]=_*e+kt*a+en*zn+Bn*Pn,this.data[14]=lt*e+Rt*a+an*zn+fn*Pn,this.data[15]=ft*e+Mt*a+un*zn+pn*Pn,this}setPosition(e,a){this.data[12]=e,this.data[13]=a}getPosition(){return It(this.data[12],this.data[13])}rotate(e){const a=this.data[0],h=this.data[1],_=this.data[2],lt=this.data[3],ft=this.data[4],mt=this.data[5],kt=this.data[6],Rt=this.data[7],Mt=Math.sin(e),Nt=Math.cos(e);return this.data[0]=Nt*a+Mt*ft,this.data[1]=Nt*h+Mt*mt,this.data[2]=Nt*_+Mt*kt,this.data[3]=Nt*lt+Mt*Rt,this.data[4]=Nt*ft-Mt*a,this.data[5]=Nt*mt-Mt*h,this.data[6]=Nt*kt-Mt*_,this.data[7]=Nt*Rt-Mt*lt,this}scale(e,a){const h=this.data[0],_=this.data[1],lt=this.data[2],ft=this.data[3],mt=this.data[4],kt=this.data[5],Rt=this.data[6],Mt=this.data[7];return this.data[0]=h*e,this.data[1]=_*e,this.data[2]=lt*e,this.data[3]=ft*e,this.data[4]=mt*a,this.data[5]=kt*a,this.data[6]=Rt*a,this.data[7]=Mt*a,this}setRotation(e){const a=this.getScale(),h=Math.sin(e),_=Math.cos(e);this.data[0]=_*a.x,this.data[1]=h*a.y,this.data[4]=-h*a.x,this.data[5]=_*a.y}getRotation(){const e=Math.atan2(this.data[1]/this.getScaleY(),this.data[0]/this.getScaleX());return _t(e)}getScaleX(){const e=It(this.data[0],this.data[4]).size;return this._scaleSignX*e}getScaleY(){const e=It(this.data[1],this.data[5]).size;return this._scaleSignY*e}getScale(){return It(this.getScaleX(),this.getScaleY())}setScaleX(e){if(this._scaleX===e)return;this._scaleSignX=Et(e);const a=It(this.data[0]*this._scaleSignX,this.data[4]*this._scaleSignX).normalize();this.data[0]=a.x*e,this.data[4]=a.y*e,this._scaleX=e}setScaleY(e){if(this._scaleY===e)return;this._scaleSignY=Et(e);const a=It(this.data[1]*this._scaleSignY,this.data[5]*this._scaleSignY).normalize();this.data[1]=a.x*e,this.data[5]=a.y*e,this._scaleY=e}setScale(e){this.setScaleX(e.x),this.setScaleY(e.y)}getBasisDeterminant(){return this.data[0]*this.data[5]-this.data[1]*this.data[4]}getAffineInverse(e){const h=1/this.getBasisDeterminant(),_=this.data[0],lt=this.data[4],ft=this.data[1],mt=this.data[5],kt=e||vn.identity();kt.data[0]=mt*h,kt.data[1]=-ft*h,kt.data[4]=-lt*h,kt.data[5]=_*h;const Rt=this.data[12],Mt=this.data[13];return kt.data[12]=-(Rt*kt.data[0]+Mt*kt.data[4]),kt.data[13]=-(Rt*kt.data[1]+Mt*kt.data[5]),kt}isIdentity(){return this.data[0]===1&&this.data[1]===0&&this.data[2]===0&&this.data[3]===0&&this.data[4]===0&&this.data[5]===1&&this.data[6]===0&&this.data[7]===0&&this.data[8]===0&&this.data[9]===0&&this.data[10]===1&&this.data[11]===0&&this.data[12]===0&&this.data[13]===0&&this.data[14]===0&&this.data[15]===1}toString(){return`
[${this.data[0]} ${this.data[4]} ${this.data[8]} ${this.data[12]}]
[${this.data[1]} ${this.data[5]} ${this.data[9]} ${this.data[13]}]
[${this.data[2]} ${this.data[6]} ${this.data[10]} ${this.data[14]}]
[${this.data[3]} ${this.data[7]} ${this.data[11]} ${this.data[15]}]
`}}class yn{constructor(){this.data=new Float64Array(6),this._scale=new Float64Array([1,1]),this._scaleSignX=1,this._scaleSignY=1}toDOMMatrix(){return new DOMMatrix([...this.data])}static identity(){const e=new yn;return e.data[0]=1,e.data[1]=0,e.data[2]=0,e.data[3]=1,e.data[4]=0,e.data[5]=0,e}static translation(e,a){const h=yn.identity();return h.data[4]=e,h.data[5]=a,h}static scale(e,a){const h=yn.identity();return h.data[0]=e,h.data[3]=a,h._scale[0]=e,h._scale[1]=a,h}static rotation(e){const a=yn.identity();return a.data[0]=Math.cos(e),a.data[1]=Math.sin(e),a.data[2]=-Math.sin(e),a.data[3]=Math.cos(e),a}setPosition(e,a){this.data[4]=e,this.data[5]=a}getPosition(){return It(this.data[4],this.data[5])}rotate(e){const a=this.data[0],h=this.data[1],_=this.data[2],lt=this.data[3],ft=Math.sin(e),mt=Math.cos(e);return this.data[0]=mt*a+ft*_,this.data[1]=mt*h+ft*lt,this.data[2]=mt*_-ft*a,this.data[3]=mt*lt-ft*h,this}translate(e,a){const h=this.data[0],_=this.data[1],lt=this.data[2],ft=this.data[3],mt=this.data[4],kt=this.data[5];return this.data[4]=h*e+lt*a+mt,this.data[5]=_*e+ft*a+kt,this}scale(e,a){const h=this.data[0],_=this.data[1],lt=this.data[2],ft=this.data[3];return this.data[0]=h*e,this.data[1]=_*e,this.data[2]=lt*a,this.data[3]=ft*a,this._scale[0]=e,this._scale[1]=a,this}determinant(){return this.data[0]*this.data[3]-this.data[1]*this.data[2]}inverse(e){const h=1/this.determinant(),_=this.data[0],lt=this.data[2],ft=this.data[1],mt=this.data[3],kt=e||yn.identity();kt.data[0]=mt*h,kt.data[1]=-ft*h,kt.data[2]=-lt*h,kt.data[3]=_*h;const Rt=this.data[4],Mt=this.data[5];return kt.data[4]=-(Rt*kt.data[0]+Mt*kt.data[2]),kt.data[5]=-(Rt*kt.data[1]+Mt*kt.data[3]),kt}multiply(e,a){if(e instanceof At){const h=a||new At(0,0),_=e,lt=_.x*this.data[0]+_.y*this.data[2]+this.data[4],ft=_.x*this.data[1]+_.y*this.data[3]+this.data[5];return h.x=lt,h.y=ft,h}else{const h=a||new yn,_=e,lt=this.data[0],ft=this.data[1],mt=this.data[2],kt=this.data[3],Rt=this.data[4],Mt=this.data[5],Nt=_.data[0],en=_.data[1],an=_.data[2],un=_.data[3],wn=_.data[4],Bn=_.data[5];h.data[0]=lt*Nt+mt*en,h.data[1]=ft*Nt+kt*en,h.data[2]=lt*an+mt*un,h.data[3]=ft*an+kt*un,h.data[4]=lt*wn+mt*Bn+Rt,h.data[5]=ft*wn+kt*Bn+Mt;const fn=this.getScale();return h._scaleSignX=Et(fn.x)*Et(h._scaleSignX),h._scaleSignY=Et(fn.y)*Et(h._scaleSignY),h}}multiplyQuadInPlace(e){const a=e[0]*this.data[0]+e[1]*this.data[2]+this.data[4],h=e[0]*this.data[1]+e[1]*this.data[3]+this.data[5];e[0]=a,e[1]=h;const _=e[2]*this.data[0]+e[3]*this.data[2]+this.data[4],lt=e[2]*this.data[1]+e[3]*this.data[3]+this.data[5];e[2]=_,e[3]=lt;const ft=e[4]*this.data[0]+e[5]*this.data[2]+this.data[4],mt=e[4]*this.data[1]+e[5]*this.data[3]+this.data[5];e[4]=ft,e[5]=mt;const kt=e[6]*this.data[0]+e[7]*this.data[2]+this.data[4],Rt=e[6]*this.data[1]+e[7]*this.data[3]+this.data[5];e[6]=kt,e[7]=Rt}to4x4(){const e=new vn;return e.data[0]=this.data[0],e.data[1]=this.data[1],e.data[2]=0,e.data[3]=0,e.data[4]=this.data[2],e.data[5]=this.data[3],e.data[6]=0,e.data[7]=0,e.data[8]=0,e.data[9]=0,e.data[10]=1,e.data[11]=0,e.data[12]=this.data[4],e.data[13]=this.data[5],e.data[14]=0,e.data[15]=1,e}setRotation(e){const a=this.getScale(),h=Math.sin(e),_=Math.cos(e);this.data[0]=_*a.x,this.data[1]=h*a.y,this.data[2]=-h*a.x,this.data[3]=_*a.y}getRotation(){const e=Math.atan2(this.data[1]/this.getScaleY(),this.data[0]/this.getScaleX());return _t(e)}getScaleX(){const e=It(this.data[0],this.data[2]).distance();return this._scaleSignX*e}getScaleY(){const e=It(this.data[1],this.data[3]).distance();return this._scaleSignY*e}getScale(){return It(this.getScaleX(),this.getScaleY())}setScaleX(e){if(e===this._scale[0])return;this._scaleSignX=Et(e);const a=It(this.data[0]*this._scaleSignX,this.data[2]*this._scaleSignX).normalize();this.data[0]=a.x*e,this.data[2]=a.y*e,this._scale[0]=e}setScaleY(e){if(e===this._scale[1])return;this._scaleSignY=Et(e);const a=It(this.data[1]*this._scaleSignY,this.data[3]*this._scaleSignY).normalize();this.data[1]=a.x*e,this.data[3]=a.y*e,this._scale[1]=e}setScale(e){this.setScaleX(e.x),this.setScaleY(e.y)}isIdentity(){return this.data[0]===1&&this.data[1]===0&&this.data[2]===0&&this.data[3]===1&&this.data[4]===0&&this.data[5]===0}reset(){const e=this;return e.data[0]=1,e.data[1]=0,e.data[2]=0,e.data[3]=1,e.data[4]=0,e.data[5]=0,e}clone(e){const a=e||new yn;return a.data.set(this.data),a}toString(){return`
[${this.data[0]} ${this.data[2]} ${this.data[4]}]
[${this.data[1]} ${this.data[3]} ${this.data[5]}]
[0 0 1]
`}}class Ln{constructor(){this._transforms=[],this._currentTransform=yn.identity()}save(){this._transforms.push(this._currentTransform),this._currentTransform=this._currentTransform.clone()}restore(){this._currentTransform=this._transforms.pop()}translate(e,a){return this._currentTransform.translate(e,a)}rotate(e){return this._currentTransform.rotate(e)}scale(e,a){return this._currentTransform.scale(e,a)}set current(e){this._currentTransform=e}get current(){return this._currentTransform}}class qn{constructor(){this.current=this._getDefaultState(),this._states=[]}_getDefaultState(){return{opacity:1,z:0,tint:Gt.White,material:null}}_cloneState(){return{opacity:this.current.opacity,z:this.current.z,tint:this.current.tint.clone(),material:this.current.material}}save(){this._states.push(this.current),this.current=this._cloneState()}restore(){this.current=this._states.pop()}}const _r={Complete:"complete",Load:"load",LoadStart:"loadstart",Progress:"progress",Error:"error"};class Jn{constructor(e,a,h=!1){this.path=e,this.responseType=a,this.bustCache=h,this.data=null,this.logger=Vt.getInstance(),this.events=new dt}isLoaded(){return this.data!==null}_cacheBust(e){return/\?\w*=\w*/.test(e)?e+="&__="+Date.now():e+="?__="+Date.now(),e}load(){return new Promise((e,a)=>{if(this.data!==null){this.logger.debug("Already have data for resource",this.path),this.events.emit("complete",this.data),e(this.data);return}const h=new XMLHttpRequest;h.open("GET",this.bustCache?this._cacheBust(this.path):this.path,!0),h.responseType=this.responseType,h.addEventListener("loadstart",_=>this.events.emit("loadstart",_)),h.addEventListener("progress",_=>this.events.emit("progress",_)),h.addEventListener("error",_=>this.events.emit("error",_)),h.addEventListener("load",_=>this.events.emit("load",_)),h.addEventListener("load",()=>{if(h.status!==0&&h.status!==200){this.logger.error("Failed to load resource ",this.path," server responded with error code",h.status),this.events.emit("error",h.response),a(new Error(h.statusText));return}this.data=h.response,this.events.emit("complete",this.data),this.logger.debug("Completed loading resource",this.path),e(this.data)}),h.send()})}}function dr(ut,e){return ut&&(ut.__isProxy===void 0?new Proxy(ut,{set:(a,h,_)=>(a[h]!==_&&(a[h]=_,typeof h=="string"&&h[0]!=="_"&&e(a)),!0),get:(a,h)=>h!=="__isProxy"?a[h]:!0}):ut)}const Un=(ut=[],e,a)=>({get:(h,_)=>_==="__isProxy"?!0:typeof h[_]=="object"&&h[_]!=null?new Proxy(h[_],Un([...ut,_],e,a)):h[_],set:(h,_,lt)=>(typeof _=="string"&&_[0]!=="_"&&e(a),h[_]=lt,!0)});function mn(ut,e){return ut&&(ut.__isProxy===void 0?new Proxy(ut,Un([],e,ut)):ut)}function xn(ut,e){return ut&&(ut.__isProxy===void 0?new Proxy(ut,{set:(a,h,_)=>(a[h]=_,typeof h=="string"&&h[0]!=="_"&&e(a),!0),get:(a,h)=>h!=="__isProxy"?a[h]:!0}):ut)}class cn{isStale(){return this._transformStale}get flipHorizontal(){return this._flipHorizontal}set flipHorizontal(e){this._flipHorizontal=e,this._transformStale=!0}get flipVertical(){return this._flipVertical}set flipVertical(e){this._flipVertical=e,this._transformStale=!0}get rotation(){return this._rotation}set rotation(e){this._rotation=e,this._transformStale=!0}get scale(){return this._scale}set scale(e){this._scale=dr(e,()=>{this._transformStale=!0}),this._transformStale=!0}get origin(){return this._origin}set origin(e){this._origin=dr(e,()=>{this._transformStale=!0}),this._transformStale=!0}constructor(e){var a,h,_,lt,ft,mt,kt;this.id=cn._ID++,this.transform=yn.identity(),this.tint=null,this._transformStale=!0,this.showDebug=!1,this._flipHorizontal=!1,this._flipVertical=!1,this._rotation=0,this.opacity=1,this._scale=At.One,this._origin=null,this._width=0,this._height=0,e&&(this.origin=(a=e.origin)!==null&&a!==void 0?a:this.origin,this.flipHorizontal=(h=e.flipHorizontal)!==null&&h!==void 0?h:this.flipHorizontal,this.flipVertical=(_=e.flipVertical)!==null&&_!==void 0?_:this.flipVertical,this.rotation=(lt=e.rotation)!==null&&lt!==void 0?lt:this.rotation,this.opacity=(ft=e.opacity)!==null&&ft!==void 0?ft:this.opacity,this.scale=(mt=e.scale)!==null&&mt!==void 0?mt:this.scale,this.tint=(kt=e.tint)!==null&&kt!==void 0?kt:this.tint)}cloneGraphicOptions(){return{width:this.width/this.scale.x,height:this.height/this.scale.y,origin:this.origin?this.origin.clone():null,flipHorizontal:this.flipHorizontal,flipVertical:this.flipVertical,rotation:this.rotation,opacity:this.opacity,scale:this.scale?this.scale.clone():null,tint:this.tint?this.tint.clone():null}}get width(){return Math.abs(this._width*this.scale.x)}get height(){return Math.abs(this._height*this.scale.y)}set width(e){this._width=e,this._transformStale=!0}set height(e){this._height=e,this._transformStale=!0}get localBounds(){return Wt.fromDimension(this.width,this.height,At.Zero)}draw(e,a,h){this._preDraw(e,a,h),this._drawImage(e,0,0),this._postDraw(e)}_preDraw(e,a,h){e.save(),e.translate(a,h),this._transformStale&&(this.transform.reset(),this.transform.scale(Math.abs(this.scale.x),Math.abs(this.scale.y)),this._rotate(this.transform),this._flip(this.transform),this._transformStale=!1),e.multiply(this.transform),e.opacity=e.opacity*this.opacity,this.tint&&(e.tint=this.tint)}_rotate(e){var a;const h=this.scale.x>0?1:-1,_=this.scale.y>0?1:-1,lt=(a=this.origin)!==null&&a!==void 0?a:It(this.width/2,this.height/2);e.translate(lt.x,lt.y),e.rotate(this.rotation),e.scale(h,_),e.translate(-lt.x,-lt.y)}_flip(e){this.flipHorizontal&&(e.translate(this.width/this.scale.x,0),e.scale(-1,1)),this.flipVertical&&(e.translate(0,this.height/this.scale.y),e.scale(1,-1))}_postDraw(e){this.showDebug&&e.debug.drawRect(0,0,this.width,this.height),e.restore()}}cn._ID=0;class kn extends cn{static from(e){return new kn({image:e})}constructor(e){var a,h;super(e),this._logger=Vt.getInstance(),this._dirty=!0,this.image=e.image;const{width:_,height:lt}=e;this.sourceView=(a=e.sourceView)!==null&&a!==void 0?a:{x:0,y:0,width:_??0,height:lt??0},this.destSize=(h=e.destSize)!==null&&h!==void 0?h:{width:_??0,height:lt??0},this._updateSpriteDimensions(),this.image.ready.then(()=>{this._updateSpriteDimensions()})}get width(){return Math.abs(this.destSize.width*this.scale.x)}get height(){return Math.abs(this.destSize.height*this.scale.y)}set width(e){e/=Math.abs(this.scale.x),this.destSize.width=e,super.width=Math.ceil(this.destSize.width)}set height(e){e/=Math.abs(this.scale.y),this.destSize.height=e,super.height=Math.ceil(this.destSize.height)}_updateSpriteDimensions(){var e,a,h,_,lt,ft;const{width:mt,height:kt}=this.image;this.sourceView.width=((e=this.sourceView)===null||e===void 0?void 0:e.width)||mt,this.sourceView.height=((a=this.sourceView)===null||a===void 0?void 0:a.height)||kt,this.destSize.width=((h=this.destSize)===null||h===void 0?void 0:h.width)||((_=this.sourceView)===null||_===void 0?void 0:_.width)||mt,this.destSize.height=((lt=this.destSize)===null||lt===void 0?void 0:lt.height)||((ft=this.sourceView)===null||ft===void 0?void 0:ft.height)||kt,this.width=Math.ceil(this.destSize.width)*this.scale.x,this.height=Math.ceil(this.destSize.height)*this.scale.y}_preDraw(e,a,h){this.image.isLoaded()&&this._dirty&&(this._dirty=!1,this._updateSpriteDimensions()),super._preDraw(e,a,h)}_drawImage(e,a,h){this.image.isLoaded()?e.drawImage(this.image.image,this.sourceView.x,this.sourceView.y,this.sourceView.width,this.sourceView.height,a,h,this.destSize.width,this.destSize.height):this._logger.warnOnce(`ImageSource ${this.image.path} is not yet loaded and won't be drawn. Please call .load() or include in a Loader.

Read https://excaliburjs.com/docs/imagesource for more information.`)}clone(){return new kn({image:this.image,sourceView:{...this.sourceView},destSize:{...this.destSize},...this.cloneGraphicOptions()})}}var En;(function(ut){ut.Pixel="Pixel",ut.Blended="Blended"})(En||(En={}));function cr(ut){switch(ut){case En.Pixel:return En.Pixel;case En.Blended:return En.Blended;default:return null}}var Gn;(function(ut){ut.Clamp="Clamp",ut.Repeat="Repeat",ut.Mirror="Mirror"})(Gn||(Gn={}));function ur(ut){switch(ut){case Gn.Clamp:return Gn.Clamp;case Gn.Repeat:return Gn.Repeat;case Gn.Mirror:return Gn.Mirror;default:return Gn.Clamp}}class hn{constructor(e){this._textureMap=new Map,this._gl=e,hn._MAX_TEXTURE_SIZE=e.getParameter(e.MAX_TEXTURE_SIZE)}dispose(){for(const[e]of this._textureMap)this.delete(e);this._textureMap.clear(),this._gl=null}get(e){return this._textureMap.get(e)}has(e){return this._textureMap.has(e)}load(e,a,h=!1){const _=this._gl;if(!_)return null;const{filtering:lt,wrapping:ft}={...a};let mt=null;if(this.has(e)&&(mt=this.get(e)),mt)return h&&(_.bindTexture(_.TEXTURE_2D,mt),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,e)),mt;mt=_.createTexture(),hn.checkImageSizeSupportedAndLog(e),_.bindTexture(_.TEXTURE_2D,mt),_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);let kt;ft&&(typeof ft=="string"?kt={x:ft,y:ft}:kt={x:ft.x,y:ft.y});const{x:Rt,y:Mt}=kt??hn.wrapping;switch(Rt){case Gn.Clamp:_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE);break;case Gn.Repeat:_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.REPEAT);break;case Gn.Mirror:_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.MIRRORED_REPEAT);break;default:_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE)}switch(Mt){case Gn.Clamp:_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE);break;case Gn.Repeat:_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.REPEAT);break;case Gn.Mirror:_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.MIRRORED_REPEAT);break;default:_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE)}const Nt=lt??hn.filtering;return _.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,Nt===En.Pixel?_.NEAREST:_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,Nt===En.Pixel?_.NEAREST:_.LINEAR),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,e),this._textureMap.set(e,mt),mt}delete(e){const a=this._gl;if(!a)return null;let h=null;this.has(e)&&(h=this.get(e),a.deleteTexture(h))}static checkImageSizeSupportedAndLog(e){var a;const h=(a=e.dataset.originalSrc)!==null&&a!==void 0?a:"internal canvas bitmap";return e.width>hn._MAX_TEXTURE_SIZE||e.height>hn._MAX_TEXTURE_SIZE?(hn._LOGGER.error(`The image [${h}] provided to Excalibur is too large for the device's maximum texture size of (${hn._MAX_TEXTURE_SIZE}x${hn._MAX_TEXTURE_SIZE}) please resize to an image for excalibur to render properly.

Images will likely render as black rectangles.

Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`),!1):((e.width>4096||e.height>4096)&&hn._LOGGER.warn(`The image [${h}] provided to excalibur is too large may not work on all mobile devices, it is recommended you resize images to a maximum (4096x4096).

Images will likely render as black rectangles on some mobile platforms.

Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`),!0)}}hn._LOGGER=Vt.getInstance(),hn.filtering=En.Blended,hn.wrapping={x:Gn.Clamp,y:Gn.Clamp},hn._MAX_TEXTURE_SIZE=4096;const sr={Filtering:"filtering",WrappingX:"wrapping-x",WrappingY:"wrapping-y"};class An{get width(){return this.image.naturalWidth}get height(){return this.image.naturalHeight}isLoaded(){return this._src||(this._src=this.data.src),!!this._src}get image(){return this.data}constructor(e,a,h){this._logger=Vt.getInstance(),this.data=new Image,this._readyFuture=new pt,this.ready=this._readyFuture.promise,this.path=e;let _=!1,lt;typeof a=="boolean"?_=a:{filtering:h,wrapping:lt,bustCache:_}={...a},this._resource=new Jn(e,"blob",_),this.filtering=h??this.filtering,typeof lt=="string"?this.wrapping={x:lt,y:lt}:this.wrapping=lt??this.wrapping,(e.endsWith(".svg")||e.endsWith(".gif"))&&this._logger.warn(`Image type is not fully supported, you may have mixed results ${e}. Fully supported: jpg, bmp, and png`)}static fromHtmlImageElement(e,a){const h=new An("");if(h._src="image-element",h.data=e,h.data.setAttribute("data-original-src","image-element"),a?.filtering?h.data.setAttribute(sr.Filtering,a?.filtering):h.data.setAttribute(sr.Filtering,En.Blended),a?.wrapping){let _;typeof a.wrapping=="string"?_={x:a.wrapping,y:a.wrapping}:_={x:a.wrapping.x,y:a.wrapping.y},h.data.setAttribute(sr.WrappingX,_.x),h.data.setAttribute(sr.WrappingY,_.y)}else h.data.setAttribute(sr.WrappingX,Gn.Clamp),h.data.setAttribute(sr.WrappingY,Gn.Clamp);return hn.checkImageSizeSupportedAndLog(e),h._readyFuture.resolve(e),h}get bustCache(){return this._resource.bustCache}set bustCache(e){this._resource.bustCache=e}async load(){var e,a,h,_;if(this.isLoaded())return this.data;try{let lt;if(this.path.includes("data:image/"))lt=this.path;else{const kt=await this._resource.load();lt=URL.createObjectURL(kt)}const ft=new Image,mt=new pt;ft.onload=()=>mt.resolve(),ft.src=lt,ft.setAttribute("data-original-src",this.path),await mt.promise,this.data=ft,hn.checkImageSizeSupportedAndLog(this.data)}catch(lt){throw`Error loading ImageSource from path '${this.path}' with error [${lt.message}]`}return this.data.setAttribute(sr.Filtering,this.filtering),this.data.setAttribute(sr.WrappingX,(a=(e=this.wrapping)===null||e===void 0?void 0:e.x)!==null&&a!==void 0?a:Gn.Clamp),this.data.setAttribute(sr.WrappingY,(_=(h=this.wrapping)===null||h===void 0?void 0:h.y)!==null&&_!==void 0?_:Gn.Clamp),this._readyFuture.resolve(this.data),this.data}toSprite(){return kn.from(this)}unload(){this.data=new Image}}class Nn extends cn{constructor(e){super(e),this._text="",this.alphabet="",this.shadow=null,this.caseInsensitive=!1,this.spacing=0,this.lineHeight=void 0,this._logger=Vt.getInstance();const{alphabet:a,spriteSheet:h,caseInsensitive:_,spacing:lt,shadow:ft,lineHeight:mt}=e;this.alphabet=a,this.spriteSheet=h,this.caseInsensitive=_??this.caseInsensitive,this.spacing=lt??this.spacing,this.shadow=ft??this.shadow,this.lineHeight=mt??this.lineHeight}_getCharacterSprites(e){const a=[],h=this.caseInsensitive?e.toLocaleLowerCase():e,_=this.caseInsensitive?this.alphabet.toLocaleLowerCase():this.alphabet;for(let lt=0;lt<h.length;lt++){const ft=h[lt];let mt=_.indexOf(ft);mt===-1&&(mt=0,this._logger.warnOnce(`SpriteFont - Cannot find letter '${ft}' in configured alphabet '${_}'.`),this._logger.warnOnce("There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged."));const kt=this.spriteSheet.sprites[mt];kt?a.push(kt):(this._logger.warnOnce(`SpriteFont - Cannot find sprite for '${ft}' at index '${mt}' in configured SpriteSheet`),this._logger.warnOnce("There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged."))}return a}measureText(e,a){const h=this._getLinesFromText(e,a),_=h.reduce((kt,Rt)=>kt.length>Rt.length?kt:Rt),lt=this._getCharacterSprites(_);let ft=0,mt=0;for(const kt of lt)ft+=kt.width+this.spacing,mt=Math.max(mt,kt.height);return Wt.fromDimension(ft,mt*h.length,At.Zero)}_drawImage(e,a,h,_){var lt;let ft=0,mt=0,kt=0;const Rt=this._getLinesFromText(this._text,_);for(const Mt of Rt){for(const Nt of this._getCharacterSprites(Mt))Nt.draw(e,a+ft,h+mt),ft+=Nt.width+this.spacing,kt=Math.max(kt,Nt.height);ft=0,mt+=(lt=this.lineHeight)!==null&&lt!==void 0?lt:kt}}render(e,a,h,_,lt,ft){this._text=a;const mt=this.measureText(a,ft);this.width=mt.width,this.height=mt.height,this.shadow&&(e.save(),e.translate(this.shadow.offset.x,this.shadow.offset.y),this._preDraw(e,_,lt),this._drawImage(e,0,0,ft),this._postDraw(e),e.restore()),this._preDraw(e,_,lt),this._drawImage(e,0,0,ft),this._postDraw(e)}clone(){return new Nn({alphabet:this.alphabet,spriteSheet:this.spriteSheet,spacing:this.spacing})}_getLinesFromText(e,a){if(this._cachedText===e&&this._cachedRenderWidth===a)return this._cachedLines;const h=e.split(`
`);if(a==null)return h;for(let _=0;_<h.length;_++){let lt=h[_],ft="";if(this.measureText(lt).width>a){for(;this.measureText(lt).width>a;)ft=lt[lt.length-1]+ft,lt=lt.slice(0,-1);h[_]=lt,h[_+1]=ft}}return this._cachedText=e,this._cachedLines=h,this._cachedRenderWidth=a,h}}class Wn{constructor(e){this.sprites=[];const{sprites:a,rows:h,columns:_}=e;this.sprites=a,this.rows=h??1,this.columns=_??this.sprites.length}getSprite(e,a,h){var _,lt,ft,mt,kt,Rt,Mt,Nt,en;if(e>=this.columns||e<0)throw Error(`No sprite exists in the SpriteSheet at (${e}, ${a}), x: ${e} should be between 0 and ${this.columns-1}`);if(a>=this.rows||a<0)throw Error(`No sprite exists in the SpriteSheet at (${e}, ${a}), y: ${a} should be between 0 and ${this.rows-1}`);const an=e+a*this.columns,un=this.sprites[an];if(un){if(h){const wn=un.clone();return wn.flipHorizontal=(_=h.flipHorizontal)!==null&&_!==void 0?_:wn.flipHorizontal,wn.flipVertical=(lt=h.flipVertical)!==null&&lt!==void 0?lt:wn.flipVertical,wn.width=(ft=h.width)!==null&&ft!==void 0?ft:wn.width,wn.height=(mt=h.height)!==null&&mt!==void 0?mt:wn.height,wn.rotation=(kt=h.rotation)!==null&&kt!==void 0?kt:wn.rotation,wn.scale=(Rt=h.scale)!==null&&Rt!==void 0?Rt:wn.scale,wn.opacity=(Mt=h.opacity)!==null&&Mt!==void 0?Mt:wn.opacity,wn.tint=(Nt=h.tint)!==null&&Nt!==void 0?Nt:wn.tint,wn.origin=(en=h.origin)!==null&&en!==void 0?en:wn.origin,wn}return un}throw Error(`Invalid sprite coordinates (${e}, ${a}`)}static fromImageSourceWithSourceViews(e){const a=e.sourceViews.map(h=>new kn({image:e.image,sourceView:h}));return new Wn({sprites:a})}static fromImageSource(e){var a;const h=[];e.spacing=(a=e.spacing)!==null&&a!==void 0?a:{};const{image:_,grid:{rows:lt,columns:ft,spriteWidth:mt,spriteHeight:kt},spacing:{originOffset:Rt,margin:Mt}}=e,Nt={x:0,y:0,...Rt},en={x:0,y:0,...Mt};for(let an=0;an<ft;an++)for(let un=0;un<lt;un++)h[an+un*ft]=new kn({image:_,sourceView:{x:an*mt+en.x*an+Nt.x,y:un*kt+en.y*un+Nt.y,width:mt,height:kt},destSize:{height:kt,width:mt}});return new Wn({sprites:h,rows:lt,columns:ft})}clone(){return new Wn({sprites:this.sprites.map(e=>e.clone()),rows:this.rows,columns:this.columns})}}const Dn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAABACAYAAAD1Xam+AAAAAXNSR0IArs4c6QAABlFJREFUeJztndmy4yoMRcWt/v9fdr8EWoDAaDD4JntVpeqcxBrMIGQDNhEAAAAAAAAAAAAAAOCrSbMfr+u6yoEpTY+906GV57YtPkjyXj9WZZ+wHWHfo2N3/bU6Tte9Rv6ptruqRyMvKvvIX/zY3I/vjLeqsg6l/CWdp0KHKO/1Y1H2EdsR9j06Ntdfp+N03SvkH2u7i3pu5XkQ+DNTkgNJSok+/183xpcdWZHjgUzpQ2pGD67vaf//KRAGAq3tdhCy2tcMQKPyXyz7iPqrdBjbX5h9g7xbtvWf4ZJvM4D/BKG24Sd+IkQ0TC9aW5NM5FbO2HgrPVzW2vmN50DZNv/QWtl5bfPy85SBtdy9dFmjsf2F2SehTBVE+u+tkE5+lAGcJlFwGuodwRRU2Qe3rx0FhPNflc3HWC7BEh8EDGVR5IMCiLnDONtPp87qhxVH/S/LvzUAuDs/kyGimA5oSONKR1w8vsLpv+v+S9vhmS71JRiX1xB5CWZNw7m6rMrllMag/RJyWb67BEgpDVMWSydc+K47pr35w05kWd7ReEq6116KaG4CsbJ7OmV9PdZLEKkONiC1/7ZONVgDsajLIJPYp2OUAXRpnPcGmnIE6eSK4nv5YQqqSYO52JqnYfYj/PdQXQIY7XszuMofMgZRT/1LdeC5h2I5/0EdWDMY2Yb05WDE1RodVdpSA5r85slArAVnSf+89iP896St0f5bZKVA7Gk/3ja8q+152/+wrLqBWZTem3IBADbRBoDuHgAA4HdAAADgh0EAAOCHQQAA4IdBAADgh0EAAOCHuVsKbJ3P9M7jjuxHzGfv8j9iDt47Dx7hP8cjq5F/o/0T62Aer//ZOgDrajBp6aNlOWTEajKLjgj/Pcs/vfZD/a++3Pc8hNfZ966EVeh5vP75luDRJUAl0KzJfnopaqbaTuzZiulc2BS5lltFXntu3dcQsXadl59Wn1H+dfYNtrt2d6D/LDF9HkCQw6eXFbr8P9X5W/un5Ol8gz1t39p5pWOPn0vLynbgdnfe8maEQw+UIPJdfxdOd/4oTtVD0IYg8wDywGas0I04T5O3P8/qf2UWwPpkn1PbOT1bN2tFe59EM7TvKf+TRFw+erZ2ey4hpS3hp9qBkqq/tjsSU1OYqucBWB1yynt5QxC42Mdk30pAEIio//zRG3feBzLUX+TTjCKwlH83aI/KbpQBVEHgUGF0j/SitcLofHem8q6AyH0wBhFv4WszuOjy0yK2vc/oRWQoP2X9ve78jfaLnpncbBqQSC6s0HnIRT0a2yNZjfxT8+ir8t+yDsDTWaS6X70GP33+d77stp+I5HtBdwEAAPBl8ECApcAA/DBvfSowAGAB7/05ZAAA/DAIAADMMU3fOuS2ggAAwBjrorKoxWiPBxHMAgAg490Ts0VeePdA+ZfJDKcCh7sBqY88mmjklZeOt9iXPrvx2I2QPRnN2/qzyJ84h4gNcbtfasq5mM1rZr+bBWh2A+bIIX13Z9wqL+nQvFno7v3oq4tJItCed7isUT6C/I7BUn9KP95wDicYBYpcjncrO2c/dmW4tBtw4RiRld1IDxDyYsoXMHxF1w3dyz0Nne8033AOFsT6VgRCafl89fenTZUfbm8CGhrgdDcS7anAsvnkkP0IeCfQ+JzYunky6jhNYj5bl7++4fJvN9WDSKS/292A0wyANyKDI91bfkm3kcH7ckaP/SKW/VHKRZAcI14pP3beu0fPyn/DuZQbWMogNnsc16sziE96f7H/iai7uTf0/3N8lwFz/e13T00Djt4OrInCnkeChXT+qOcKOLA21tJpsv/G8/COnGnw97J9QwbTvd6djYSv7fxEVTuV/LzNhj7nOawv6bfbAGCYEpQ6HxFtuxs6sq9tzOYHobQ6Nje+6vo5BwFrPZ4OgMayS4PPt1NlzdLfbRCYBoBc+NaO4JWPwLEf33oN3unY3InKPQBW6Z7nEZzEmrl4iZjC804lqgePPEOguQcwWghUphxm343wyt/pWpWR0OrR+jvyxavHajfb9pTjbt9bH07Z5/expM4TLWfwb7QQqMoC+UDWXZo/4RgA38LOgUvLJAAQ1Td9y9//0ylxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB+g79apuVUsS5ZmwAAAABJRU5ErkJggg==";class Kn{constructor(){this.fontSheet=Dn,this.size=16,this.load()}load(){return this._imageSource=new An(this.fontSheet),this._imageSource.load().then(()=>{this._spriteSheet=Wn.fromImageSource({image:this._imageSource,grid:{rows:4,columns:16,spriteWidth:16,spriteHeight:16}}),this._spriteFont=new Nn({alphabet:`0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ,!'&."?-()+# `,caseInsensitive:!0,spriteSheet:this._spriteSheet,spacing:-6})})}write(e,a,h){this._imageSource.isLoaded()&&this._spriteFont.render(e,a,null,h.x,h.y)}}class lr{constructor(e,a){this._gl=e,this._texture=a}use(){const e=this._gl;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._texture)}disable(){const e=this._gl;e.bindTexture(e.TEXTURE_2D,null)}}class Rr{constructor(e){var a,h;this.antialias=!1,this.samples=1,this._gl=e.gl,this.width=e.width,this.height=e.height,this.transparency=e.transparency,this.antialias=(a=e.antialias)!==null&&a!==void 0?a:this.antialias,this.samples=(h=e.samples)!==null&&h!==void 0?h:this._gl.getParameter(this._gl.MAX_SAMPLES);const _=this._gl;_.drawingBufferFormat?this.bufferFormat=_.drawingBufferFormat:this.transparency?this.bufferFormat=_.RGBA8:this.bufferFormat=_.RGB8,this._setupRenderBuffer(),this._setupFramebuffer()}setResolution(e,a){const h=this._gl;this.width=e,this.height=a,h.bindTexture(h.TEXTURE_2D,this._frameTexture),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,this.width,this.height,0,h.RGBA,h.UNSIGNED_BYTE,null),this._renderBuffer&&(h.bindRenderbuffer(h.RENDERBUFFER,this._renderBuffer),h.renderbufferStorageMultisample(h.RENDERBUFFER,Math.min(this.samples,h.getParameter(h.MAX_SAMPLES)),this.bufferFormat,this.width,this.height))}get renderBuffer(){return this._renderBuffer}get renderFrameBuffer(){return this._renderFrameBuffer}get frameBuffer(){return this._frameBuffer}get frameTexture(){return this._frameTexture}_setupRenderBuffer(){if(this.antialias){const e=this._gl;this._renderBuffer=e.createRenderbuffer(),this._renderFrameBuffer=e.createFramebuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this._renderBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,Math.min(this.samples,e.getParameter(e.MAX_SAMPLES)),this.bufferFormat,this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,this._renderFrameBuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,this._renderBuffer)}}_setupFramebuffer(){const e=this._gl;this._frameTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._frameTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);const a=e.COLOR_ATTACHMENT0;this._frameBuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this._frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,a,e.TEXTURE_2D,this._frameTexture,0),this.disable()}toRenderSource(){return this.renderBuffer&&this.blitRenderBufferToFrameBuffer(),new lr(this._gl,this._frameTexture)}blitToScreen(){const e=this._gl;this._renderBuffer?(e.bindFramebuffer(e.READ_FRAMEBUFFER,this.renderFrameBuffer),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.clearBufferfv(e.COLOR,0,[0,0,1,1]),e.blitFramebuffer(0,0,this.width,this.height,0,0,this.width,this.height,e.COLOR_BUFFER_BIT,e.LINEAR)):(e.bindFramebuffer(e.READ_FRAMEBUFFER,this.frameBuffer),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.clearBufferfv(e.COLOR,0,[0,0,1,1]),e.blitFramebuffer(0,0,this.width,this.height,0,0,this.width,this.height,e.COLOR_BUFFER_BIT,e.LINEAR))}blitRenderBufferToFrameBuffer(){if(this._renderBuffer){const e=this._gl;e.bindFramebuffer(e.READ_FRAMEBUFFER,this.renderFrameBuffer),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this.frameBuffer),e.clearBufferfv(e.COLOR,0,[0,0,1,1]),e.blitFramebuffer(0,0,this.width,this.height,0,0,this.width,this.height,e.COLOR_BUFFER_BIT,e.LINEAR)}}copyToTexture(e){const a=this._gl;this._renderBuffer&&this.blitRenderBufferToFrameBuffer(),a.bindFramebuffer(a.FRAMEBUFFER,this._frameBuffer),a.bindTexture(a.TEXTURE_2D,e),a.copyTexImage2D(a.TEXTURE_2D,0,a.RGBA,0,0,this.width,this.height,0)}use(){const e=this._gl;this.antialias?e.bindFramebuffer(e.FRAMEBUFFER,this._renderFrameBuffer):e.bindFramebuffer(e.FRAMEBUFFER,this._frameBuffer),e.viewport(0,0,this.width,this.height)}disable(){const e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null)}}const $r=`#version 300 es\r
in vec2 a_position;\r
in vec4 a_color;\r
\r
out lowp vec4 v_color;\r
\r
uniform mat4 u_matrix;\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Passthrough the color\r
   v_color = a_color;\r
}`,br=`#version 300 es\r
precision mediump float;\r
\r
// Color\r
in lowp vec4 v_color;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  fragColor = v_color;\r
}`;function Tr(ut,e){switch(e){case ut.FLOAT:return 4;case ut.SHORT:return 2;case ut.UNSIGNED_SHORT:return 2;case ut.BYTE:return 1;case ut.UNSIGNED_BYTE:return 1;default:return 1}}function fr(ut,e){const a=`(?<type>[a-z0-9]+)\\s+${e};`,_=new RegExp(a,"g").exec(ut);return _?.length>0}function In(ut,e,a){var h;const _=`(?<type>[a-z0-9]+)\\s+${a};`,ft=new RegExp(_,"g").exec(e);switch((h=ft?.groups)===null||h===void 0?void 0:h.type){case"float":case"vec2":case"vec3":case"vec4":return ut.FLOAT;case"int":case"ivec2":case"ivec3":case"ivec4":return ut.INT;case"uint":case"uvec2":case"uvec3":case"uvec4":return ut.UNSIGNED_INT;case"bool":case"bvec2":case"bvec3":case"bvec4":return ut.BOOL;case"short":return ut.SHORT;case"ushort":return ut.UNSIGNED_SHORT;case"ubyte":return ut.UNSIGNED_BYTE;case"byte":return ut.BYTE;default:return ut.FLOAT}}function _i(ut,e){switch(e){case ut.LOW_FLOAT:case ut.HIGH_FLOAT:case ut.FLOAT:return 1;case ut.FLOAT_VEC2:return 2;case ut.FLOAT_VEC3:return 3;case ut.FLOAT_VEC4:return 4;case ut.BYTE:return 1;case ut.UNSIGNED_BYTE:return 1;case ut.UNSIGNED_SHORT:case ut.SHORT:return 1;default:return 1}}function pr(ut,e){switch(e){case ut.LOW_FLOAT:case ut.HIGH_FLOAT:case ut.FLOAT:case ut.FLOAT_VEC2:case ut.FLOAT_VEC3:case ut.FLOAT_VEC4:return ut.FLOAT;case ut.BYTE:return ut.BYTE;case ut.UNSIGNED_BYTE:return ut.UNSIGNED_BYTE;case ut.SHORT:return ut.SHORT;case ut.UNSIGNED_SHORT:return ut.UNSIGNED_SHORT;default:return ut.FLOAT}}class tr{get compiled(){return this._compiled}constructor(e){this._logger=Vt.getInstance(),this.uniforms={},this.attributes={},this._compiled=!1;const{gl:a,vertexSource:h,fragmentSource:_}=e;this._gl=a,this.vertexSource=h,this.fragmentSource=_}dispose(){this._gl.deleteProgram(this.program),this._gl=null}use(){this._gl.useProgram(this.program),tr._ACTIVE_SHADER_INSTANCE=this}isCurrentlyBound(){return tr._ACTIVE_SHADER_INSTANCE===this}compile(){const e=this._gl,a=this._compileShader(e,this.vertexSource,e.VERTEX_SHADER),h=this._compileShader(e,this.fragmentSource,e.FRAGMENT_SHADER);this.program=this._createProgram(e,a,h);const _=this.getAttributes();for(const ft of _)this.attributes[ft.name]=ft;const lt=this.getUniforms();for(const ft of lt)this.uniforms[ft.name]=ft;return this._compiled=!0,this.program}getUniforms(){const e=this._gl,a=e.getProgramParameter(this.program,e.ACTIVE_UNIFORMS),h=[];for(let _=0;_<a;_++){const lt=e.getActiveUniform(this.program,_),ft=e.getUniformLocation(this.program,lt.name);h.push({name:lt.name,glType:lt.type,location:ft})}return h}getAttributes(){const e=this._gl,a=e.getProgramParameter(this.program,e.ACTIVE_ATTRIBUTES),h=[];for(let _=0;_<a;_++){const lt=e.getActiveAttrib(this.program,_),ft=e.getAttribLocation(this.program,lt.name);h.push({name:lt.name,glType:pr(e,lt.type),size:_i(e,lt.type),location:ft,normalized:!1})}return h}setTexture(e,a){const h=this._gl;h.activeTexture(h.TEXTURE0+e),h.bindTexture(h.TEXTURE_2D,a)}setUniformInt(e,a){this.setUniform("uniform1i",e,~~a)}trySetUniformInt(e,a){return this.trySetUniform("uniform1i",e,~~a)}setUniformIntArray(e,a){this.setUniform("uniform1iv",e,a)}trySetUniformIntArray(e,a){return this.trySetUniform("uniform1iv",e,a)}setUniformBoolean(e,a){this.setUniform("uniform1i",e,a?1:0)}trySetUniformBoolean(e,a){return this.trySetUniform("uniform1i",e,a?1:0)}setUniformFloat(e,a){this.setUniform("uniform1f",e,a)}trySetUniformFloat(e,a){return this.trySetUniform("uniform1f",e,a)}setUniformFloatArray(e,a){this.setUniform("uniform1fv",e,a)}trySetUniformFloatArray(e,a){return this.trySetUniform("uniform1fv",e,a)}setUniformFloatVector(e,a){this.setUniform("uniform2f",e,a.x,a.y)}trySetUniformFloatVector(e,a){return this.trySetUniform("uniform2f",e,a.x,a.y)}setUniformFloatColor(e,a){this.setUniform("uniform4f",e,a.r/255,a.g/255,a.b/255,a.a)}trySetUniformFloatColor(e,a){return this.trySetUniform("uniform4f",e,a.r/255,a.g/255,a.b/255,a.a)}setUniformMatrix(e,a){this.setUniform("uniformMatrix4fv",e,!1,a.data)}trySetUniformMatrix(e,a){return this.trySetUniform("uniformMatrix4fv",e,!1,a.data)}setUniform(e,a,...h){if(!this._compiled)throw Error(`Must compile shader before setting a uniform ${e}:${a}`);if(!this.isCurrentlyBound())throw Error("Currently accessed shader instance is not the current active shader in WebGL, must call `shader.use()` before setting uniforms");const lt=this._gl.getUniformLocation(this.program,a);if(lt){const ft=[lt,...h];this._gl[e].apply(this._gl,ft)}else throw Error(`Uniform ${e}:${a} doesn't exist or is not used in the shader source code, unused uniforms are optimized away by most browsers`)}trySetUniform(e,a,...h){if(!this._compiled)return this._logger.warn(`Must compile shader before setting a uniform ${e}:${a}`),!1;if(!this.isCurrentlyBound())return this._logger.warn("Currently accessed shader instance is not the current active shader in WebGL, must call `shader.use()` before setting uniforms"),!1;const lt=this._gl.getUniformLocation(this.program,a);if(lt){const ft=[lt,...h];this._gl[e].apply(this._gl,ft)}else return!1;return!0}_createProgram(e,a,h){const _=e.createProgram();if(_===null)throw Error("Could not create graphics shader program");if(e.attachShader(_,a),e.attachShader(_,h),e.linkProgram(_),!e.getProgramParameter(_,e.LINK_STATUS))throw Error(`Could not link the program: [${e.getProgramInfoLog(_)}]`);return _}_compileShader(e,a,h){const _=e.VERTEX_SHADER===h?"vertex":"fragment",lt=e.createShader(h);if(lt===null)throw Error(`Could not build shader: [${a}]`);if(e.shaderSource(lt,a),e.compileShader(lt),!e.getShaderParameter(lt,e.COMPILE_STATUS)){const mt=e.getShaderInfoLog(lt);throw Error(`Could not compile ${_} shader:

${mt}${this._processSourceForError(a,mt)}`)}return lt}_processSourceForError(e,a){if(!e)return a;const h=e.split(`
`),_=a.search(/\d:\d/),lt=a.indexOf(" ",_),[ft,mt]=a.slice(_,lt).split(":").map(kt=>Number(kt));for(let kt=0;kt<h.length;kt++)h[kt]=`${kt+1}: ${h[kt]}${mt===kt+1?" <----- ERROR!":""}`;return`

Source:
`+h.join(`
`)}}tr._ACTIVE_SHADER_INSTANCE=null;class ir{constructor(e){this.type="dynamic";const{gl:a,size:h,type:_,data:lt}=e;if(this._gl=a,this.buffer=this._gl.createBuffer(),!lt&&!h)throw Error("Must either provide data or a size to the VertexBuffer");lt?this.bufferData=lt:this.bufferData=new Float32Array(h),this.type=_??this.type,a.bindBuffer(a.ARRAY_BUFFER,this.buffer),a.bufferData(a.ARRAY_BUFFER,this.bufferData,this.type==="static"?a.STATIC_DRAW:a.DYNAMIC_DRAW)}bind(){const e=this._gl;e.bindBuffer(e.ARRAY_BUFFER,this.buffer)}unbind(){const e=this._gl;e.bindBuffer(e.ARRAY_BUFFER,null)}upload(e){const a=this._gl;a.bindBuffer(a.ARRAY_BUFFER,this.buffer),e?a.bufferSubData(a.ARRAY_BUFFER,0,this.bufferData,0,e):a.bufferData(a.ARRAY_BUFFER,this.bufferData,this.type==="static"?a.STATIC_DRAW:a.DYNAMIC_DRAW)}dispose(){this._gl.deleteBuffer(this.buffer),this._gl=null}}class Mn{get vertexBuffer(){return this._vertexBuffer}get attributes(){return this._attributes}constructor(e){this._logger=Vt.getInstance(),this._suppressWarnings=!1,this._layout=[],this._attributes=[],this._vertexTotalSizeBytes=0,this._initialized=!1;const{gl:a,shader:h,vertexBuffer:_,attributes:lt,suppressWarnings:ft}=e;this._gl=a,this._vertexBuffer=_,this._attributes=lt,this._shader=h,this._suppressWarnings=ft,h&&this.initialize()}get totalVertexSizeBytes(){return this._vertexTotalSizeBytes}set shader(e){e&&this._shader!==e&&(this._shader=e,this.initialize())}get shader(){return this._shader}initialize(){if(this._initialized||!this._shader)return;if(!this._shader.compiled)throw Error("Shader not compiled, shader must be compiled before defining a vertex layout");this._vertexTotalSizeBytes=0,this._layout.length=0;const e=this._shader.attributes;for(const lt of this._attributes){const ft=e[lt[0]];if(!ft){if(!fr(this._shader.vertexSource,lt[0]))throw Error(`The attribute named: ${lt[0]} size ${lt[1]} not found in the shader source code:
 ${this._shader.vertexSource}`);this._suppressWarnings||this._logger.warn(`The attribute named: ${lt[0]} size ${lt[1]} not found in the compiled shader. This is possibly a bug:
 1. Not a bug, but should remove unused code - attribute "${lt[0]}" is unused in vertex/fragment and has been automatically removed by glsl compiler.
 2. Definitely a bug, attribute "${lt[0]}" in layout has been mistyped or is missing in shader, check vertex/fragment source.`);const mt=In(this._gl,this._shader.vertexSource,lt[0]);this._layout.push({name:lt[0],glType:mt,size:lt[1],location:-1,normalized:!1})}if(ft){if(ft.size!==lt[1])throw Error(`VertexLayout size definition for attribute: [${lt[0]}, ${lt[1]}], doesn't match shader source size ${ft.size}:
 ${this._shader.vertexSource}`);this._layout.push(ft)}}let a=0;for(const lt of this._layout){const ft=Tr(this._gl,lt.glType);this._vertexTotalSizeBytes+=ft*lt.size,a+=lt.size}this._vertexBuffer.bufferData.length%a!==0&&this._logger.warn(`The vertex component size (${a})  does NOT divide evenly into the specified vertex buffer (${this._vertexBuffer.bufferData.length})`);const h=this._gl;this._vao=h.createVertexArray(),h.bindVertexArray(this._vao),this._vertexBuffer.bind();let _=0;for(const lt of this._layout)lt.location!==-1&&(h.vertexAttribPointer(lt.location,lt.size,lt.glType,lt.normalized,this.totalVertexSizeBytes,_),h.enableVertexAttribArray(lt.location)),_+=Tr(h,lt.glType)*lt.size;h.bindVertexArray(null),this._vertexBuffer.unbind(),this._initialized=!0}use(e=!1,a){if(!this._shader)throw Error("No shader is associated with this vertex layout, a shader must be set");const h=this._gl;if(!this._shader.isCurrentlyBound())throw Error("Shader associated with this vertex layout is not active! Call shader.use() before layout.use()");this._vertexBuffer.bind(),e&&this._vertexBuffer.upload(a),h.bindVertexArray(this._vao)}}class gn{static clear(){gn.DrawCallCount=0,gn.DrawnImagesCount=0}}gn.DrawCallCount=0,gn.DrawnImagesCount=0;class Xn{constructor(){this.type="ex.line",this.priority=0,this._maxLines=10922,this._vertexIndex=0,this._lineCount=0}initialize(e,a){this._gl=e,this._context=a,this._shader=new tr({gl:e,vertexSource:$r,fragmentSource:br}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._vertexBuffer=new ir({gl:e,size:6*2*this._maxLines,type:"dynamic"}),this._layout=new Mn({gl:e,vertexBuffer:this._vertexBuffer,shader:this._shader,attributes:[["a_position",2],["a_color",4]]})}dispose(){this._vertexBuffer.dispose(),this._shader.dispose(),this._context=null,this._gl=null}draw(e,a,h){this._isFull()&&this.flush(),this._lineCount++;const _=this._context.getTransform(),lt=_.multiply(e),ft=_.multiply(a),mt=this._vertexBuffer.bufferData;mt[this._vertexIndex++]=lt.x,mt[this._vertexIndex++]=lt.y,mt[this._vertexIndex++]=h.r/255,mt[this._vertexIndex++]=h.g/255,mt[this._vertexIndex++]=h.b/255,mt[this._vertexIndex++]=h.a,mt[this._vertexIndex++]=ft.x,mt[this._vertexIndex++]=ft.y,mt[this._vertexIndex++]=h.r/255,mt[this._vertexIndex++]=h.g/255,mt[this._vertexIndex++]=h.b/255,mt[this._vertexIndex++]=h.a}_isFull(){return this._lineCount>=this._maxLines}hasPendingDraws(){return this._lineCount!==0}flush(){if(this._lineCount===0)return;const e=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),e.drawArrays(e.LINES,0,this._lineCount*2),gn.DrawnImagesCount+=this._lineCount,gn.DrawCallCount++,this._vertexIndex=0,this._lineCount=0}}const Vn=`#version 300 es\r
in vec2 a_position;\r
in vec4 a_color;\r
in float a_size;\r
out lowp vec4 v_color;\r
uniform mat4 u_matrix;\r
\r
void main() {\r
  gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
  gl_PointSize = a_size * 2.0;\r
  v_color = a_color;\r
}`,gr=`#version 300 es\r
\r
precision mediump float;\r
in lowp vec4 v_color;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  float r = 0.0, delta = 0.0, alpha = 1.0;\r
  vec2 cxy = 2.0 * gl_PointCoord - 1.0;\r
  r = dot(cxy, cxy);\r
\r
  delta = fwidth(r);\r
  alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\r
  // "premultiply" the color by alpha\r
  vec4 color = v_color;\r
  color.a = color.a * alpha;\r
  color.rgb = color.rgb * color.a;\r
  fragColor = color;\r
}`;class zr{constructor(){this.type="ex.point",this.priority=0,this._maxPoints=10922,this._pointCount=0,this._vertexIndex=0}initialize(e,a){this._gl=e,this._context=a,this._shader=new tr({gl:e,vertexSource:Vn,fragmentSource:gr}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._buffer=new ir({gl:e,size:7*this._maxPoints,type:"dynamic"}),this._layout=new Mn({gl:e,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_color",4],["a_size",1]]})}dispose(){this._buffer.dispose(),this._shader.dispose(),this._context=null,this._gl=null}draw(e,a,h){this._isFull()&&this.flush(),this._pointCount++;const _=this._context.getTransform(),lt=this._context.opacity,ft=this._context.snapToPixel,mt=_.multiply(e);ft&&(mt.x=~~(mt.x+Qn),mt.y=~~(mt.y+Qn));const kt=this._buffer.bufferData;kt[this._vertexIndex++]=mt.x,kt[this._vertexIndex++]=mt.y,kt[this._vertexIndex++]=a.r/255,kt[this._vertexIndex++]=a.g/255,kt[this._vertexIndex++]=a.b/255,kt[this._vertexIndex++]=a.a*lt,kt[this._vertexIndex++]=h*Math.max(_.getScaleX(),_.getScaleY())}_isFull(){return this._pointCount>=this._maxPoints}hasPendingDraws(){return this._pointCount!==0}flush(){if(this._pointCount===0)return;const e=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),e.drawArrays(e.POINTS,0,this._pointCount),gn.DrawnImagesCount+=this._pointCount,gn.DrawCallCount++,this._pointCount=0,this._vertexIndex=0}}const Ir=`#version 300 es\r
in vec2 a_position;\r
\r
in vec2 a_texcoord;\r
out vec2 v_texcoord;\r
\r
void main() {\r
  gl_Position = vec4(a_position, 0.0, 1.0);\r
\r
  // Pass the texcoord to the fragment shader.\r
  v_texcoord = a_texcoord;\r
}`,Wr=`#version 300 es\r
precision mediump float;\r
\r
// Passed in from the vertex shader.\r
in vec2 v_texcoord;\r
\r
// The texture.\r
uniform sampler2D u_texture;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
   fragColor = texture(u_texture, v_texcoord);\r
}`;class eo{constructor(e){this._gl=e,this._shader=new tr({gl:e,vertexSource:Ir,fragmentSource:Wr}),this._shader.compile(),this._buffer=new ir({gl:e,type:"static",data:new Float32Array([-1,-1,0,0,-1,1,0,1,1,-1,1,0,1,-1,1,0,-1,1,0,1,1,1,1,1])}),this._layout=new Mn({gl:e,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_texcoord",2]]}),this._buffer.upload()}renderWithPostProcessor(e){const a=this._gl;e.getShader().use(),e.getLayout().use(),a.drawArrays(a.TRIANGLES,0,6)}renderToScreen(){const e=this._gl;this._shader.use(),this._layout.use(),e.drawArrays(e.TRIANGLES,0,6)}}class Vr{constructor(e,a,h){this._logger=Vt.getInstance(),this._gl=e,this.buffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffer);const _=a*6;if(!h)this.bufferData=new Uint32Array(_);else{const mt=Math.floor(16383.5);this.bufferGlType=e.UNSIGNED_SHORT,this.bufferData=new Uint16Array(_),a>mt&&this._logger.warn(`Total quads exceeds hardware index buffer limit (uint16), max(${mt}) requested quads(${a})`)}let lt=0;for(let ft=0;ft<_;ft+=6)this.bufferData[ft+0]=lt+0,this.bufferData[ft+1]=lt+1,this.bufferData[ft+2]=lt+2,this.bufferData[ft+3]=lt+2,this.bufferData[ft+4]=lt+1,this.bufferData[ft+5]=lt+3,lt+=4;e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.bufferData,e.STATIC_DRAW)}get size(){return this.bufferData.length}upload(){const e=this._gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.bufferData,e.STATIC_DRAW)}bind(){const e=this._gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffer)}dispose(){this._gl.deleteBuffer(this.buffer),this._gl=null}}const go=`#version 300 es\r
precision mediump float;\r
\r
// UV coord\r
in vec2 v_texcoord;\r
\r
// Texture index\r
in lowp float v_textureIndex;\r
\r
// Textures in the current draw\r
uniform sampler2D u_textures[%%count%%];\r
\r
uniform bool u_pixelart;\r
\r
// Opacity\r
in float v_opacity;\r
\r
in vec4 v_tint;\r
\r
in vec2 v_res;\r
\r
out vec4 fragColor;\r
\r
// Inigo Quilez pixel art filter https://jorenjoestar.github.io/post/pixel_art_filtering/\r
vec2 uv_iq(in vec2 uv, in vec2 texture_size) {\r
  vec2 pixel = uv * texture_size;\r
  \r
  vec2 seam=floor(pixel+.5);\r
  vec2 dudv=fwidth(pixel);\r
  pixel=seam+clamp((pixel-seam)/dudv,-.5,.5);\r
  \r
  return pixel/texture_size;\r
}\r
\r
void main(){\r
  // In order to support the most efficient sprite batching, we have multiple\r
  // textures loaded into the gpu (usually 8) this picker logic skips over textures\r
  // that do not apply to a particular sprite.\r
  \r
  vec4 color=vec4(1.,0,0,1.);\r
  \r
  // GLSL is templated out to pick the right texture and set the vec4 color\r
  %%texture_picker%%\r
  \r
  color.rgb=color.rgb*v_opacity;\r
  color.a=color.a*v_opacity;\r
  fragColor=color*v_tint;\r
}`,mo=`#version 300 es\r
in vec2 a_position;\r
\r
// Opacity\r
in float a_opacity;\r
out float v_opacity;\r
\r
// UV coordinate\r
in vec2 a_texcoord;\r
out vec2 v_texcoord;\r
\r
// Texture res\r
in vec2 a_res;\r
out vec2 v_res;\r
\r
// Texture number\r
in lowp float a_textureIndex;\r
out lowp float v_textureIndex;\r
\r
in vec4 a_tint;\r
out vec4 v_tint;\r
\r
uniform mat4 u_matrix;\r
\r
void main(){\r
  // Set the vertex position using the ortho transform matrix\r
  gl_Position=u_matrix*vec4(a_position,0.,1.);\r
  \r
  // Pass through the Opacity to the fragment shader\r
  v_opacity=a_opacity;\r
  // Pass through the UV coord to the fragment shader\r
  v_texcoord=a_texcoord;\r
\r
  v_res = a_res;\r
\r
  // Pass through the texture number to the fragment shader\r
  v_textureIndex=a_textureIndex;\r
  // Pass through the tint\r
  v_tint=a_tint;\r
}`;class $o{constructor(e){this.type="ex.image",this.priority=0,this._maxImages=10922,this._maxTextures=0,this._imageCount=0,this._textures=[],this._textureIndex=0,this._textureToIndex=new Map,this._images=new Set,this._vertexIndex=0,this._imageToWidth=new Map,this._imageToHeight=new Map,this._view=[0,0,0,0],this._dest=[0,0],this._quad=[0,0,0,0,0,0,0,0],this.pixelArtSampler=e.pixelArtSampler,this.uvPadding=e.uvPadding}initialize(e,a){this._gl=e,this._context=a,this._maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),125);const h=this._transformFragmentSource(go,this._maxTextures);this._shader=new tr({gl:e,fragmentSource:h,vertexSource:mo}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",a.ortho),this._shader.setUniformIntArray("u_textures",[...Array(this._maxTextures)].map((_,lt)=>lt)),this._buffer=new ir({gl:e,size:12*4*this._maxImages,type:"dynamic"}),this._layout=new Mn({gl:e,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_opacity",1],["a_res",2],["a_texcoord",2],["a_textureIndex",1],["a_tint",4]]}),this._quads=new Vr(e,this._maxImages,!0)}dispose(){this._buffer.dispose(),this._quads.dispose(),this._shader.dispose(),this._textures.length=0,this._context=null,this._gl=null}_transformFragmentSource(e,a){let h=e.replace("%%count%%",a.toString()),_="";for(let lt=0;lt<a;lt++)lt===0?_+=`if (v_textureIndex <= ${lt}.5) {
`:_+=`   else if (v_textureIndex <= ${lt}.5) {
`,_+=`      vec2 uv = u_pixelart ? uv_iq(v_texcoord, v_res) : v_texcoord;
`,_+=`      color = texture(u_textures[${lt}], uv);
`,_+=`   }
`;return h=h.replace("%%texture_picker%%",_),h}_addImageAsTexture(e){if(this._images.has(e))return;const a=e.getAttribute(sr.Filtering),h=a?cr(a):null,_=ur(e.getAttribute(sr.WrappingX)),lt=ur(e.getAttribute(sr.WrappingY)),ft=e.getAttribute("forceUpload")==="true",mt=this._context.textureLoader.load(e,{filtering:h,wrapping:{x:_,y:lt}},ft);e.removeAttribute("forceUpload"),this._textures.indexOf(mt)===-1&&(this._textures.push(mt),this._textureToIndex.set(mt,this._textureIndex++),this._images.add(e))}_bindTextures(e){for(let a=0;a<this._maxTextures;a++)e.activeTexture(e.TEXTURE0+a),e.bindTexture(e.TEXTURE_2D,this._textures[a]||this._textures[0])}_getTextureIdForImage(e){var a;if(e){const h=this._context.textureLoader.get(e);return(a=this._textureToIndex.get(h))!==null&&a!==void 0?a:-1}return-1}_isFull(){return this._imageCount>=this._maxImages||this._textures.length>=this._maxTextures}_getImageWidth(e){let a=this._imageToWidth.get(e);return a===void 0&&(a=e.width,this._imageToWidth.set(e,a)),a}_getImageHeight(e){let a=this._imageToHeight.get(e);return a===void 0&&(a=e.height,this._imageToHeight.set(e,a)),a}draw(e,a,h,_,lt,ft,mt,kt,Rt){var Mt,Nt,en,an;this._isFull()&&this.flush(),this._imageCount++,this._addImageAsTexture(e);const un=this._getImageWidth(e),wn=this._getImageHeight(e);let Bn=un||_||0,fn=wn||lt||0;this._view[0]=0,this._view[1]=0,this._view[2]=(Mt=_??un)!==null&&Mt!==void 0?Mt:0,this._view[3]=(Nt=lt??wn)!==null&&Nt!==void 0?Nt:0,this._dest[0]=a??1,this._dest[1]=h??1,ft!==void 0&&mt!==void 0&&kt!==void 0&&Rt!==void 0&&(this._view[0]=a??1,this._view[1]=h??1,this._view[2]=(en=_??un)!==null&&en!==void 0?en:0,this._view[3]=(an=lt??wn)!==null&&an!==void 0?an:0,this._dest[0]=ft,this._dest[1]=mt,Bn=kt,fn=Rt),a=this._view[0],h=this._view[1];const pn=this._view[2],zn=this._view[3],Pn=this._context.getTransform(),yr=this._context.opacity,Qr=this._context.snapToPixel;this._quad[0]=this._dest[0],this._quad[1]=this._dest[1],this._quad[2]=this._dest[0]+Bn,this._quad[3]=this._dest[1],this._quad[4]=this._dest[0],this._quad[5]=this._dest[1]+fn,this._quad[6]=this._dest[0]+Bn,this._quad[7]=this._dest[1]+fn,Pn.multiplyQuadInPlace(this._quad),Qr&&(this._quad[0]=~~(this._quad[0]+Et(this._quad[0])*Qn),this._quad[1]=~~(this._quad[1]+Et(this._quad[1])*Qn),this._quad[2]=~~(this._quad[2]+Et(this._quad[2])*Qn),this._quad[3]=~~(this._quad[3]+Et(this._quad[3])*Qn),this._quad[4]=~~(this._quad[4]+Et(this._quad[4])*Qn),this._quad[5]=~~(this._quad[5]+Et(this._quad[5])*Qn),this._quad[6]=~~(this._quad[6]+Et(this._quad[6])*Qn),this._quad[7]=~~(this._quad[7]+Et(this._quad[7])*Qn));const Hn=this._context.tint,Kr=this._getTextureIdForImage(e),Ao=un||Bn,Wo=wn||fn,gs=(a+this.uvPadding)/Ao,ms=(h+this.uvPadding)/Wo,_s=(a+pn-this.uvPadding)/Ao,cs=(h+zn-this.uvPadding)/Wo,Xo=un,qo=wn,Fr=this._layout.vertexBuffer.bufferData;Fr[this._vertexIndex++]=this._quad[0],Fr[this._vertexIndex++]=this._quad[1],Fr[this._vertexIndex++]=yr,Fr[this._vertexIndex++]=Xo,Fr[this._vertexIndex++]=qo,Fr[this._vertexIndex++]=gs,Fr[this._vertexIndex++]=ms,Fr[this._vertexIndex++]=Kr,Fr[this._vertexIndex++]=Hn.r/255,Fr[this._vertexIndex++]=Hn.g/255,Fr[this._vertexIndex++]=Hn.b/255,Fr[this._vertexIndex++]=Hn.a,Fr[this._vertexIndex++]=this._quad[4],Fr[this._vertexIndex++]=this._quad[5],Fr[this._vertexIndex++]=yr,Fr[this._vertexIndex++]=Xo,Fr[this._vertexIndex++]=qo,Fr[this._vertexIndex++]=gs,Fr[this._vertexIndex++]=cs,Fr[this._vertexIndex++]=Kr,Fr[this._vertexIndex++]=Hn.r/255,Fr[this._vertexIndex++]=Hn.g/255,Fr[this._vertexIndex++]=Hn.b/255,Fr[this._vertexIndex++]=Hn.a,Fr[this._vertexIndex++]=this._quad[2],Fr[this._vertexIndex++]=this._quad[3],Fr[this._vertexIndex++]=yr,Fr[this._vertexIndex++]=Xo,Fr[this._vertexIndex++]=qo,Fr[this._vertexIndex++]=_s,Fr[this._vertexIndex++]=ms,Fr[this._vertexIndex++]=Kr,Fr[this._vertexIndex++]=Hn.r/255,Fr[this._vertexIndex++]=Hn.g/255,Fr[this._vertexIndex++]=Hn.b/255,Fr[this._vertexIndex++]=Hn.a,Fr[this._vertexIndex++]=this._quad[6],Fr[this._vertexIndex++]=this._quad[7],Fr[this._vertexIndex++]=yr,Fr[this._vertexIndex++]=Xo,Fr[this._vertexIndex++]=qo,Fr[this._vertexIndex++]=_s,Fr[this._vertexIndex++]=cs,Fr[this._vertexIndex++]=Kr,Fr[this._vertexIndex++]=Hn.r/255,Fr[this._vertexIndex++]=Hn.g/255,Fr[this._vertexIndex++]=Hn.b/255,Fr[this._vertexIndex++]=Hn.a}hasPendingDraws(){return this._imageCount!==0}flush(){if(this._imageCount===0)return;const e=this._gl;this._shader.use(),this._layout.use(!0,4*12*this._imageCount),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._shader.setUniformBoolean("u_pixelart",this.pixelArtSampler),this._bindTextures(e),this._quads.bind(),e.drawElements(e.TRIANGLES,this._imageCount*6,this._quads.bufferGlType,0),gn.DrawnImagesCount+=this._imageCount,gn.DrawCallCount++,this._imageCount=0,this._vertexIndex=0,this._textures.length=0,this._textureIndex=0,this._textureToIndex.clear(),this._images.clear(),this._imageToWidth.clear(),this._imageToHeight.clear()}}const vs=`#version 300 es\r
\r
precision mediump float;\r
\r
// UV coord\r
in vec2 v_uv;\r
\r
in vec2 v_size; // in pixels\r
\r
// Color coord to blend with image\r
in lowp vec4 v_color;\r
\r
// Stroke color if used\r
in lowp vec4 v_strokeColor;\r
\r
// Stroke thickness if used\r
in lowp float v_strokeThickness; // in pixels\r
\r
// Opacity\r
in float v_opacity;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
    // modified from https://stackoverflow.com/questions/59197671/glsl-rounded-rectangle-with-variable-border\r
    vec2 uv = v_uv;\r
    vec2 fragCoord = uv * v_size;\r
    float maxX = v_size.x - v_strokeThickness;\r
    float minX = v_strokeThickness;\r
    float maxY = v_size.y - v_strokeThickness;\r
    float minY = v_strokeThickness;\r
\r
    if (fragCoord.x < maxX && fragCoord.x > minX &&\r
        fragCoord.y < maxY && fragCoord.y > minY) {\r
      fragColor = v_color;\r
    } else {\r
      fragColor = v_strokeColor;\r
    }\r
    fragColor.a *= v_opacity;\r
    fragColor.rgb *= fragColor.a;\r
\r
    // vec2 v2CenteredPos     = abs(fragCoord - v_size.xy / 2.0);\r
    // vec2 v2HalfShapeSizePx = v_size.xy/2.0 - v_strokeThickness/2.0;\r
\r
    // float fHalfBorderDist      = 0.0;\r
    // float fHalfBorderThickness = 0.0;\r
\r
    // if (fragCoord.x > max(v_radius, v_strokeThickness) && \r
    //     fragCoord.x < v_size.x - max(v_radius, v_strokeThickness))\r
    // {\r
    //     fHalfBorderDist      = v2CenteredPos.y - v2HalfShapeSizePx.y;\r
    //     fHalfBorderThickness = v_strokeThickness / 2.0;\r
    // }\r
    // else if (fragCoord.y > max(v_radius, v_strokeThickness) && \r
    //          fragCoord.y < v_size.y - max(v_radius, v_strokeThickness))\r
    // {\r
    //     fHalfBorderDist      = v2CenteredPos.x - v2HalfShapeSizePx.x;\r
    //     fHalfBorderThickness = v_strokeThickness / 2.0;\r
    // }\r
    // else\r
    // {\r
    //     vec2 edgeVec = max(vec2(0.0), v_radius - vec2(\r
    //         uv.x > 0.5 ? v_size.x - fragCoord.x : fragCoord.x,\r
    //         uv.y > 0.5 ? v_size.y - fragCoord.y : fragCoord.y));\r
        \r
    //     float ellipse_ab    = v_radius-v_strokeThickness;\r
    //     vec2 ellipse_isect = (v_strokeThickness > v_radius || v_strokeThickness > v_radius) ? vec2(0.0) :\r
    //                             edgeVec.xy * ellipse_ab*ellipse_ab / length(ellipse_ab*edgeVec.yx); \r
            \r
    //     fHalfBorderThickness = (v_radius - length(ellipse_isect)) / 2.0;\r
    //     fHalfBorderDist      = length(edgeVec) - (v_radius - fHalfBorderThickness);\r
    // }\r
\r
    // vec4 v4FromColor = v_strokeColor;\r
    // v4FromColor.rgb *= v4FromColor.a;\r
    // vec4 v4ToColor   = vec4(0.0); // background color is transparent\r
    // if (fHalfBorderDist < 0.0) {\r
    //     v4ToColor = v_color;\r
    //     v4ToColor.rgb *= v4ToColor.a;\r
    // }\r
\r
    // float mixPct = abs(fHalfBorderDist) - fHalfBorderThickness;\r
\r
    // vec4 finalColor = mix(v4FromColor, v4ToColor, mixPct);\r
    // gl_FragColor = finalColor;\r
}`,Zr=`#version 300 es\r
in vec2 a_position;\r
\r
// UV coordinate\r
in vec2 a_uv;\r
out vec2 v_uv;\r
\r
in vec2 a_size;\r
out vec2 v_size;\r
\r
// Opacity \r
in float a_opacity;\r
out float v_opacity;\r
\r
in vec4 a_color;\r
out vec4 v_color;\r
\r
in vec4 a_strokeColor;\r
out vec4 v_strokeColor;\r
\r
in float a_strokeThickness;\r
out float v_strokeThickness;\r
\r
uniform mat4 u_matrix;\r
\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Pass through UV coords\r
   v_uv = a_uv;\r
   // Pass through size\r
   v_size = a_size;\r
   // Pass through the Opacity to the fragment shader\r
   v_opacity = a_opacity;\r
   // Pass through the color to the fragment shader\r
   v_color = a_color;\r
   // Pass through the stroke color to the fragment shader\r
   v_strokeColor = a_strokeColor;\r
   // Pass through the stroke thickenss to the fragment shader\r
   v_strokeThickness = a_strokeThickness;\r
}`;class jr{constructor(){this.type="ex.rectangle",this.priority=0,this._maxRectangles=10922,this._rectangleCount=0,this._vertexIndex=0}initialize(e,a){this._gl=e,this._context=a,this._shader=new tr({gl:e,fragmentSource:vs,vertexSource:Zr}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",a.ortho),this._buffer=new ir({gl:e,size:16*4*this._maxRectangles,type:"dynamic"}),this._layout=new Mn({gl:e,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_uv",2],["a_size",2],["a_opacity",1],["a_color",4],["a_strokeColor",4],["a_strokeThickness",1]]}),this._quads=new Vr(e,this._maxRectangles,!0)}dispose(){this._buffer.dispose(),this._quads.dispose(),this._shader.dispose(),this._context=null,this._gl=null}_isFull(){return this._rectangleCount>=this._maxRectangles}draw(...e){e[0]instanceof At&&e[1]instanceof At?this.drawLine.apply(this,e):this.drawRectangle.apply(this,e)}drawLine(e,a,h,_=1){this._isFull()&&this.flush(),this._rectangleCount++;const lt=this._context.getTransform(),ft=this._context.opacity,mt=this._context.snapToPixel,kt=a.sub(e),Rt=kt.size,Mt=kt.normalize().perpendicular(),Nt=_/2,en=lt.multiply(Mt.scale(Nt).add(e)),an=lt.multiply(Mt.scale(-Nt).add(e)),un=lt.multiply(Mt.scale(Nt).add(a)),wn=lt.multiply(Mt.scale(-Nt).add(a));mt&&(en.x=~~(en.x+Qn),en.y=~~(en.y+Qn),un.x=~~(un.x+Qn),un.y=~~(un.y+Qn),an.x=~~(an.x+Qn),an.y=~~(an.y+Qn),wn.x=~~(wn.x+Qn),wn.y=~~(wn.y+Qn));const Bn=0,fn=0,pn=1,zn=1,Pn=Gt.Transparent,yr=0,Qr=1,Hn=this._layout.vertexBuffer.bufferData;Hn[this._vertexIndex++]=en.x,Hn[this._vertexIndex++]=en.y,Hn[this._vertexIndex++]=Bn,Hn[this._vertexIndex++]=fn,Hn[this._vertexIndex++]=Rt,Hn[this._vertexIndex++]=_,Hn[this._vertexIndex++]=ft,Hn[this._vertexIndex++]=h.r/255,Hn[this._vertexIndex++]=h.g/255,Hn[this._vertexIndex++]=h.b/255,Hn[this._vertexIndex++]=h.a,Hn[this._vertexIndex++]=Pn.r/255,Hn[this._vertexIndex++]=Pn.g/255,Hn[this._vertexIndex++]=Pn.b/255,Hn[this._vertexIndex++]=Pn.a,Hn[this._vertexIndex++]=yr/Qr,Hn[this._vertexIndex++]=an.x,Hn[this._vertexIndex++]=an.y,Hn[this._vertexIndex++]=Bn,Hn[this._vertexIndex++]=zn,Hn[this._vertexIndex++]=Rt,Hn[this._vertexIndex++]=_,Hn[this._vertexIndex++]=ft,Hn[this._vertexIndex++]=h.r/255,Hn[this._vertexIndex++]=h.g/255,Hn[this._vertexIndex++]=h.b/255,Hn[this._vertexIndex++]=h.a,Hn[this._vertexIndex++]=Pn.r/255,Hn[this._vertexIndex++]=Pn.g/255,Hn[this._vertexIndex++]=Pn.b/255,Hn[this._vertexIndex++]=Pn.a,Hn[this._vertexIndex++]=yr/Qr,Hn[this._vertexIndex++]=un.x,Hn[this._vertexIndex++]=un.y,Hn[this._vertexIndex++]=pn,Hn[this._vertexIndex++]=fn,Hn[this._vertexIndex++]=Rt,Hn[this._vertexIndex++]=_,Hn[this._vertexIndex++]=ft,Hn[this._vertexIndex++]=h.r/255,Hn[this._vertexIndex++]=h.g/255,Hn[this._vertexIndex++]=h.b/255,Hn[this._vertexIndex++]=h.a,Hn[this._vertexIndex++]=Pn.r/255,Hn[this._vertexIndex++]=Pn.g/255,Hn[this._vertexIndex++]=Pn.b/255,Hn[this._vertexIndex++]=Pn.a,Hn[this._vertexIndex++]=yr/Qr,Hn[this._vertexIndex++]=wn.x,Hn[this._vertexIndex++]=wn.y,Hn[this._vertexIndex++]=pn,Hn[this._vertexIndex++]=zn,Hn[this._vertexIndex++]=Rt,Hn[this._vertexIndex++]=_,Hn[this._vertexIndex++]=ft,Hn[this._vertexIndex++]=h.r/255,Hn[this._vertexIndex++]=h.g/255,Hn[this._vertexIndex++]=h.b/255,Hn[this._vertexIndex++]=h.a,Hn[this._vertexIndex++]=Pn.r/255,Hn[this._vertexIndex++]=Pn.g/255,Hn[this._vertexIndex++]=Pn.b/255,Hn[this._vertexIndex++]=Pn.a,Hn[this._vertexIndex++]=yr/Qr}drawRectangle(e,a,h,_,lt=Gt.Transparent,ft=0){this._isFull()&&this.flush(),this._rectangleCount++;const mt=this._context.getTransform(),kt=this._context.opacity,Rt=this._context.snapToPixel,Mt=mt.multiply(e.add(It(0,0))),Nt=mt.multiply(e.add(It(a,0))),en=mt.multiply(e.add(It(a,h))),an=mt.multiply(e.add(It(0,h)));Rt&&(Mt.x=~~(Mt.x+Qn),Mt.y=~~(Mt.y+Qn),Nt.x=~~(Nt.x+Qn),Nt.y=~~(Nt.y+Qn),an.x=~~(an.x+Qn),an.y=~~(an.y+Qn),en.x=~~(en.x+Qn),en.y=~~(en.y+Qn));const un=0,wn=0,Bn=1,fn=1,pn=this._layout.vertexBuffer.bufferData;pn[this._vertexIndex++]=Mt.x,pn[this._vertexIndex++]=Mt.y,pn[this._vertexIndex++]=un,pn[this._vertexIndex++]=wn,pn[this._vertexIndex++]=a,pn[this._vertexIndex++]=h,pn[this._vertexIndex++]=kt,pn[this._vertexIndex++]=_.r/255,pn[this._vertexIndex++]=_.g/255,pn[this._vertexIndex++]=_.b/255,pn[this._vertexIndex++]=_.a,pn[this._vertexIndex++]=lt.r/255,pn[this._vertexIndex++]=lt.g/255,pn[this._vertexIndex++]=lt.b/255,pn[this._vertexIndex++]=lt.a,pn[this._vertexIndex++]=ft,pn[this._vertexIndex++]=an.x,pn[this._vertexIndex++]=an.y,pn[this._vertexIndex++]=un,pn[this._vertexIndex++]=fn,pn[this._vertexIndex++]=a,pn[this._vertexIndex++]=h,pn[this._vertexIndex++]=kt,pn[this._vertexIndex++]=_.r/255,pn[this._vertexIndex++]=_.g/255,pn[this._vertexIndex++]=_.b/255,pn[this._vertexIndex++]=_.a,pn[this._vertexIndex++]=lt.r/255,pn[this._vertexIndex++]=lt.g/255,pn[this._vertexIndex++]=lt.b/255,pn[this._vertexIndex++]=lt.a,pn[this._vertexIndex++]=ft,pn[this._vertexIndex++]=Nt.x,pn[this._vertexIndex++]=Nt.y,pn[this._vertexIndex++]=Bn,pn[this._vertexIndex++]=wn,pn[this._vertexIndex++]=a,pn[this._vertexIndex++]=h,pn[this._vertexIndex++]=kt,pn[this._vertexIndex++]=_.r/255,pn[this._vertexIndex++]=_.g/255,pn[this._vertexIndex++]=_.b/255,pn[this._vertexIndex++]=_.a,pn[this._vertexIndex++]=lt.r/255,pn[this._vertexIndex++]=lt.g/255,pn[this._vertexIndex++]=lt.b/255,pn[this._vertexIndex++]=lt.a,pn[this._vertexIndex++]=ft,pn[this._vertexIndex++]=en.x,pn[this._vertexIndex++]=en.y,pn[this._vertexIndex++]=Bn,pn[this._vertexIndex++]=fn,pn[this._vertexIndex++]=a,pn[this._vertexIndex++]=h,pn[this._vertexIndex++]=kt,pn[this._vertexIndex++]=_.r/255,pn[this._vertexIndex++]=_.g/255,pn[this._vertexIndex++]=_.b/255,pn[this._vertexIndex++]=_.a,pn[this._vertexIndex++]=lt.r/255,pn[this._vertexIndex++]=lt.g/255,pn[this._vertexIndex++]=lt.b/255,pn[this._vertexIndex++]=lt.a,pn[this._vertexIndex++]=ft}hasPendingDraws(){return this._rectangleCount!==0}flush(){if(this._rectangleCount===0)return;const e=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._quads.bind(),e.drawElements(e.TRIANGLES,this._rectangleCount*6,this._quads.bufferGlType,0),gn.DrawnImagesCount+=this._rectangleCount,gn.DrawCallCount++,this._rectangleCount=0,this._vertexIndex=0}}const Er=`#version 300 es\r
precision highp float;\r
\r
// UV coord\r
in vec2 v_uv;\r
\r
// Color coord to blend with image\r
in lowp vec4 v_color;\r
\r
// Stroke color if used\r
in lowp vec4 v_strokeColor;\r
\r
// Stroke thickness if used\r
in lowp float v_strokeThickness;\r
\r
// Opacity\r
in float v_opacity;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  // make (0, 0) the center the uv \r
  vec2 uv = v_uv * 2.0 - 1.0;\r
\r
  vec4 color = v_color;\r
  vec4 strokeColor = v_strokeColor;\r
\r
  // circle border is at radius 1.0 \r
  // dist is > 0 when inside the circle \r
  float d = length(uv);\r
  float dist = 1.0 - length(uv);\r
\r
  // Fade based on fwidth\r
  float fade = fwidth(dot(uv, uv));\r
\r
  // if dist is greater than 0 step to 1;\r
  // when we cross this 0 threshold add a smooth fade\r
  float fill = smoothstep(-fade/2.0, fade/2.0, dist);\r
\r
  // if dist is greater than the stroke thickness step to 1\r
  float stroke = 1.0 - smoothstep(v_strokeThickness, v_strokeThickness + fade, dist);\r
\r
  strokeColor.a *= fill * stroke;\r
  strokeColor.rgb *= strokeColor.a;\r
\r
  color.a *= fill * (1.0 - stroke);\r
  color.rgb *= color.a;\r
\r
  vec4 finalColor = mix(vec4(0.0), (color + strokeColor), fill);\r
  finalColor.rgb = finalColor.rgb * v_opacity;\r
  finalColor.a = finalColor.a * v_opacity;\r
  fragColor = finalColor;\r
}`,Fn=`#version 300 es\r
in vec2 a_position;\r
\r
// UV coordinate\r
in vec2 a_uv;\r
out vec2 v_uv;\r
\r
// Opacity \r
in float a_opacity;\r
out float v_opacity;\r
\r
in vec4 a_color;\r
out vec4 v_color;\r
\r
in vec4 a_strokeColor;\r
out vec4 v_strokeColor;\r
\r
in float a_strokeThickness;\r
out float v_strokeThickness;\r
\r
uniform mat4 u_matrix;\r
\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Pass through UV coords\r
   v_uv = a_uv;\r
   // Pass through the Opacity to the fragment shader\r
   v_opacity = a_opacity;\r
   // Pass through the color to the fragment shader\r
   v_color = a_color;\r
   // Pass through the stroke color to the fragment shader\r
   v_strokeColor = a_strokeColor;\r
   // Pass through the stroke thickenss to the fragment shader\r
   v_strokeThickness = a_strokeThickness;\r
}`;class er{constructor(){this.type="ex.circle",this.priority=0,this._maxCircles=10922,this._circleCount=0,this._vertexIndex=0}initialize(e,a){this._gl=e,this._context=a,this._shader=new tr({gl:e,fragmentSource:Er,vertexSource:Fn}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",a.ortho),this._buffer=new ir({gl:e,size:14*4*this._maxCircles,type:"dynamic"}),this._layout=new Mn({gl:e,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_uv",2],["a_opacity",1],["a_color",4],["a_strokeColor",4],["a_strokeThickness",1]]}),this._quads=new Vr(e,this._maxCircles,!0)}dispose(){this._buffer.dispose(),this._quads.dispose(),this._shader.dispose(),this._context=null,this._gl=null}_isFull(){return this._circleCount>=this._maxCircles}draw(e,a,h,_=Gt.Transparent,lt=0){this._isFull()&&this.flush(),this._circleCount++;const ft=this._context.getTransform(),mt=this._context.opacity,kt=this._context.snapToPixel,Rt=ft.multiply(e.add(It(-a,-a))),Mt=ft.multiply(e.add(It(a,-a))),Nt=ft.multiply(e.add(It(a,a))),en=ft.multiply(e.add(It(-a,a)));kt&&(Rt.x=~~(Rt.x+Qn),Rt.y=~~(Rt.y+Qn),Mt.x=~~(Mt.x+Qn),Mt.y=~~(Mt.y+Qn),en.x=~~(en.x+Qn),en.y=~~(en.y+Qn),Nt.x=~~(Nt.x+Qn),Nt.y=~~(Nt.y+Qn));const an=0,un=0,wn=1,Bn=1,fn=this._layout.vertexBuffer.bufferData;fn[this._vertexIndex++]=Rt.x,fn[this._vertexIndex++]=Rt.y,fn[this._vertexIndex++]=an,fn[this._vertexIndex++]=un,fn[this._vertexIndex++]=mt,fn[this._vertexIndex++]=h.r/255,fn[this._vertexIndex++]=h.g/255,fn[this._vertexIndex++]=h.b/255,fn[this._vertexIndex++]=h.a,fn[this._vertexIndex++]=_.r/255,fn[this._vertexIndex++]=_.g/255,fn[this._vertexIndex++]=_.b/255,fn[this._vertexIndex++]=_.a,fn[this._vertexIndex++]=lt/a,fn[this._vertexIndex++]=en.x,fn[this._vertexIndex++]=en.y,fn[this._vertexIndex++]=an,fn[this._vertexIndex++]=Bn,fn[this._vertexIndex++]=mt,fn[this._vertexIndex++]=h.r/255,fn[this._vertexIndex++]=h.g/255,fn[this._vertexIndex++]=h.b/255,fn[this._vertexIndex++]=h.a,fn[this._vertexIndex++]=_.r/255,fn[this._vertexIndex++]=_.g/255,fn[this._vertexIndex++]=_.b/255,fn[this._vertexIndex++]=_.a,fn[this._vertexIndex++]=lt/a,fn[this._vertexIndex++]=Mt.x,fn[this._vertexIndex++]=Mt.y,fn[this._vertexIndex++]=wn,fn[this._vertexIndex++]=un,fn[this._vertexIndex++]=mt,fn[this._vertexIndex++]=h.r/255,fn[this._vertexIndex++]=h.g/255,fn[this._vertexIndex++]=h.b/255,fn[this._vertexIndex++]=h.a,fn[this._vertexIndex++]=_.r/255,fn[this._vertexIndex++]=_.g/255,fn[this._vertexIndex++]=_.b/255,fn[this._vertexIndex++]=_.a,fn[this._vertexIndex++]=lt/a,fn[this._vertexIndex++]=Nt.x,fn[this._vertexIndex++]=Nt.y,fn[this._vertexIndex++]=wn,fn[this._vertexIndex++]=Bn,fn[this._vertexIndex++]=mt,fn[this._vertexIndex++]=h.r/255,fn[this._vertexIndex++]=h.g/255,fn[this._vertexIndex++]=h.b/255,fn[this._vertexIndex++]=h.a,fn[this._vertexIndex++]=_.r/255,fn[this._vertexIndex++]=_.g/255,fn[this._vertexIndex++]=_.b/255,fn[this._vertexIndex++]=_.a,fn[this._vertexIndex++]=lt/a}hasPendingDraws(){return this._circleCount!==0}flush(){if(this._circleCount===0)return;const e=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._quads.bind(),e.drawElements(e.TRIANGLES,this._circleCount*6,this._quads.bufferGlType,0),gn.DrawnImagesCount+=this._circleCount,gn.DrawCallCount++,this._circleCount=0,this._vertexIndex=0}}class Tn{constructor(e,a,h=100){this.builder=e,this.recycler=a,this.maxObjects=h,this.totalAllocations=0,this.index=0,this.objects=[],this.disableWarnings=!1,this._logger=Vt.getInstance()}dispose(){this.objects.length=0}preallocate(){for(let e=0;e<this.maxObjects;e++)this.objects[e]=this.builder()}using(e){const a=e(this);return a?this.done(...a):this.done()}borrow(e){const a=this.get();e(a),this.index--}get(){return this.index===this.maxObjects&&(this.disableWarnings||this._logger.warn("Max pooled objects reached, possible memory leak? Doubling"),this.maxObjects=this.maxObjects*2),this.objects[this.index]?this.recycler(this.objects[this.index++]):(this.totalAllocations++,this.objects[this.index++]=this.builder())}done(...e){this.index=0;for(const a of e){const h=this.objects.indexOf(a);this.objects[h]=this.builder(),this.totalAllocations++}return e}}class qt{constructor(){this.z=0,this.priority=0,this.transform=yn.identity(),this.state={z:0,opacity:1,tint:Gt.White,material:null}}}const Mr=`#version 300 es
in vec2 a_position;

in vec2 a_uv;
out vec2 v_uv;

in vec2 a_screenuv;
out vec2 v_screenuv;

uniform mat4 u_matrix;
uniform mat4 u_transform;

void main() {
  // Set the vertex position using the ortho & transform matrix
  gl_Position = u_matrix * u_transform * vec4(a_position, 0.0, 1.0);

  // Pass through the UV coord to the fragment shader
  v_uv = a_uv;
  v_screenuv = a_screenuv;
}
`;class qr{constructor(e){this._logger=Vt.getInstance(),this._color=Gt.Transparent,this._initialized=!1,this._images=new Map,this._textures=new Map;const{color:a,name:h,vertexSource:_,fragmentSource:lt,graphicsContext:ft,images:mt}=e;if(this._name=h??"anonymous material",this._vertexSource=_??Mr,this._fragmentSource=lt,this._color=a??this._color,!ft)throw Error(`Material ${h} must be provided an excalibur webgl graphics context`);if(ft instanceof ar?(this._graphicsContext=ft,this._initialize(ft)):this._logger.warn(`Material ${h} was created in 2D Canvas mode, currently only WebGL is supported`),mt)for(const kt in mt)this.addImageSource(kt,mt[kt])}_initialize(e){if(this._initialized)return;const a=e.__gl;this._maxTextureSlots=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS)-2,this._shader=e.createShader({vertexSource:this._vertexSource,fragmentSource:this._fragmentSource}),this._shader.compile(),this._initialized=!0}get name(){var e;return(e=this._name)!==null&&e!==void 0?e:"anonymous material"}get isUsingScreenTexture(){return this._fragmentSource.includes("u_screen_texture")}update(e){this._shader&&(this._shader.use(),e(this._shader))}getShader(){return this._shader}addImageSource(e,a){this._images.size<this._maxTextureSlots?this._images.set(e,a):this._logger.warn(`Max number texture slots ${this._maxTextureSlots} have been reached for material "${this.name}", no more textures will be uploaded due to hardware constraints.`)}removeImageSource(e){const a=this._images.get(e);this._graphicsContext.textureLoader.delete(a.image),this._images.delete(e)}_loadImageSource(e){const a=e.image,h=a.getAttribute(sr.Filtering),_=h?cr(h):null,lt=ur(a.getAttribute(sr.WrappingX)),ft=ur(a.getAttribute(sr.WrappingY)),mt=a.getAttribute("forceUpload")==="true",kt=this._graphicsContext.textureLoader.load(a,{filtering:_,wrapping:{x:lt,y:ft}},mt);return a.removeAttribute("forceUpload"),this._textures.has(e)||this._textures.set(e,kt),kt}uploadAndBind(e,a=2){let h=a;for(const[_,lt]of this._images.entries()){if(!lt.isLoaded()){this._logger.warnOnce(`Image named ${_} in material ${this.name} not loaded, nothing will be uploaded to the shader. Did you forget to add this to a loader? https://excaliburjs.com/docs/loaders/`);continue}const ft=this._loadImageSource(lt);e.activeTexture(e.TEXTURE0+h),e.bindTexture(e.TEXTURE_2D,ft),this._shader.trySetUniformInt(_,h),h++}}use(){if(this._initialized)this._shader.use(),this._shader.trySetUniformFloatColor("u_color",this._color);else throw Error(`Material ${this.name} not yet initialized, use the ExcaliburGraphicsContext.createMaterial() to work around this.`)}}class Yr{constructor(){this.type="ex.material",this.priority=0,this._textures=[]}initialize(e,a){this._gl=e,this._context=a,this._buffer=new ir({gl:e,size:6*4,type:"dynamic"}),this._layout=new Mn({gl:e,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_uv",2],["a_screenuv",2]],suppressWarnings:!0}),this._quads=new Vr(e,1,!0)}dispose(){this._buffer.dispose(),this._quads.dispose(),this._textures.length=0,this._context=null,this._gl=null}draw(e,a,h,_,lt,ft,mt,kt,Rt){var Mt,Nt,en,an;const un=this._gl,wn=this._context.material,Bn=this._context.getTransform(),fn=this._context.opacity,pn=wn.getShader(),zn=this._layout.vertexBuffer.bufferData;let Pn=0,yr=e?.width||_||0,Qr=e?.height||lt||0,Hn=[0,0,(Mt=_??e?.width)!==null&&Mt!==void 0?Mt:0,(Nt=lt??e?.height)!==null&&Nt!==void 0?Nt:0],Kr=[a??1,h??1];ft!==void 0&&mt!==void 0&&kt!==void 0&&Rt!==void 0&&(Hn=[a??1,h??1,(en=_??e?.width)!==null&&en!==void 0?en:0,(an=lt??e?.height)!==null&&an!==void 0?an:0],Kr=[ft,mt],yr=kt,Qr=Rt),a=Hn[0],h=Hn[1];const Ao=Hn[2],Wo=Hn[3],gs=It(Kr[0],Kr[1]),ms=It(Kr[0]+yr,Kr[1]),_s=It(Kr[0],Kr[1]+Qr),cs=It(Kr[0]+yr,Kr[1]+Qr),Xo=e.width||yr,qo=e.height||Qr,Fr=a/Xo,Vl=h/qo,Yl=(a+Ao-.01)/Xo,Xl=(h+Wo-.01)/qo,yu=Bn.getPosition(),Vp=yu.add(cs),Yp=yu.x/this._context.width,Xp=yu.y/this._context.height,qp=Vp.x/this._context.width,Qp=Vp.y/this._context.height;zn[Pn++]=gs.x,zn[Pn++]=gs.y,zn[Pn++]=Fr,zn[Pn++]=Vl,zn[Pn++]=Yp,zn[Pn++]=Xp,zn[Pn++]=_s.x,zn[Pn++]=_s.y,zn[Pn++]=Fr,zn[Pn++]=Xl,zn[Pn++]=Yp,zn[Pn++]=Qp,zn[Pn++]=ms.x,zn[Pn++]=ms.y,zn[Pn++]=Yl,zn[Pn++]=Vl,zn[Pn++]=qp,zn[Pn++]=Xp,zn[Pn++]=cs.x,zn[Pn++]=cs.y,zn[Pn++]=Yl,zn[Pn++]=Xl,zn[Pn++]=qp,zn[Pn++]=Qp;const Dm=this._addImageAsTexture(e);wn.use(),this._layout.shader=pn,this._layout.use(!0),pn.trySetUniformFloat("u_time_ms",performance.now()),pn.trySetUniformFloat("u_opacity",fn),pn.trySetUniformFloatVector("u_resolution",It(this._context.width,this._context.height)),pn.trySetUniformFloatVector("u_graphic_resolution",It(Xo,qo)),pn.trySetUniformFloatVector("u_size",It(Ao,Wo)),pn.trySetUniformMatrix("u_matrix",this._context.ortho),pn.trySetUniformMatrix("u_transform",Bn.to4x4()),un.activeTexture(un.TEXTURE0+0),un.bindTexture(un.TEXTURE_2D,Dm),pn.trySetUniformInt("u_graphic",0),un.activeTexture(un.TEXTURE0+1),un.bindTexture(un.TEXTURE_2D,this._context.materialScreenTexture),pn.trySetUniformInt("u_screen_texture",1),wn.uploadAndBind(un),this._quads.bind(),un.drawElements(un.TRIANGLES,6,this._quads.bufferGlType,0),gn.DrawnImagesCount++,gn.DrawCallCount++}_addImageAsTexture(e){const a=e.getAttribute(sr.Filtering),h=a?cr(a):null,_=ur(e.getAttribute(sr.WrappingX)),lt=ur(e.getAttribute(sr.WrappingY)),ft=e.getAttribute("forceUpload")==="true",mt=this._context.textureLoader.load(e,{filtering:h,wrapping:{x:_,y:lt}},ft);return e.removeAttribute("forceUpload"),this._textures.indexOf(mt)===-1&&this._textures.push(mt),mt}hasPendingDraws(){return!1}flush(){}}const Qn=1e-4;class kr{constructor(e){this._webglCtx=e,this._debugText=new Kn}drawRect(e,a,h,_,lt={color:Gt.Black}){this.drawLine(It(e,a),It(e+h,a),{...lt}),this.drawLine(It(e+h,a),It(e+h,a+_),{...lt}),this.drawLine(It(e+h,a+_),It(e,a+_),{...lt}),this.drawLine(It(e,a+_),It(e,a),{...lt})}drawLine(e,a,h={color:Gt.Black}){this._webglCtx.draw("ex.line",e,a,h.color)}drawPoint(e,a={color:Gt.Black,size:5}){this._webglCtx.draw("ex.point",e,a.color,a.size)}drawText(e,a){this._debugText.write(this._webglCtx,e,a)}}class ar{get z(){return this._state.current.z}set z(e){this._state.current.z=e}get opacity(){return this._state.current.opacity}set opacity(e){this._state.current.opacity=e}get tint(){return this._state.current.tint}set tint(e){this._state.current.tint=e}get width(){return this.__gl.canvas.width}get height(){return this.__gl.canvas.height}get ortho(){return this._ortho}checkIfResolutionSupported(e){let a=!0;return(e.width>4096||e.height>4096)&&(a=!1),a}constructor(e){this._logger=Vt.getInstance(),this._renderers=new Map,this._isDrawLifecycle=!1,this.useDrawSorting=!0,this._drawCallPool=new Tn(()=>new qt,wn=>(wn.priority=0,wn.z=0,wn.renderer=void 0,wn.args=void 0,wn),4e3),this._drawCallIndex=0,this._drawCalls=new Array(4e3).fill(null),this._postProcessTargets=[],this._postprocessors=[],this._transform=new Ln,this._state=new qn,this.snapToPixel=!1,this.smoothing=!1,this.pixelArtSampler=!1,this.uvPadding=.01,this.backgroundColor=Gt.ExcaliburBlue,this.multiSampleAntialiasing=!0,this.transparency=!0,this._isContextLost=!1,this._disposed=!1,this._imageToWidth=new Map,this._imageToHeight=new Map,this.debug=new kr(this),this._totalPostProcessorTime=0;const{canvasElement:a,context:h,enableTransparency:_,antialiasing:lt,uvPadding:ft,multiSampleAntialiasing:mt,pixelArtSampler:kt,powerPreference:Rt,snapToPixel:Mt,backgroundColor:Nt,useDrawSorting:en,handleContextLost:an,handleContextRestored:un}=e;if(this.__gl=h??a.getContext("webgl2",{antialias:lt??this.smoothing,premultipliedAlpha:!1,alpha:_??this.transparency,depth:!1,powerPreference:Rt??"high-performance"}),!this.__gl)throw Error("Failed to retrieve webgl context from browser");an&&this.__gl.canvas.addEventListener("webglcontextlost",an,!1),un&&this.__gl.canvas.addEventListener("webglcontextrestored",un,!1),this.__gl.canvas.addEventListener("webglcontextlost",()=>{this._isContextLost=!0}),this.__gl.canvas.addEventListener("webglcontextrestored",()=>{this._isContextLost=!1}),this.textureLoader=new hn(this.__gl),this.snapToPixel=Mt??this.snapToPixel,this.smoothing=lt??this.smoothing,this.transparency=_??this.transparency,this.pixelArtSampler=kt??this.pixelArtSampler,this.uvPadding=ft??this.uvPadding,this.multiSampleAntialiasing=typeof mt=="boolean"?mt:this.multiSampleAntialiasing,this.samples=typeof mt=="object"?mt.samples:void 0,this.backgroundColor=Nt??this.backgroundColor,this.useDrawSorting=en??this.useDrawSorting,this._drawCallPool.disableWarnings=!0,this._drawCallPool.preallocate(),this._init()}dispose(){if(!this._disposed){this._disposed=!0,this.textureLoader.dispose();for(const e of this._renderers.values())e.dispose();this._renderers.clear(),this._drawCallPool.dispose(),this._drawCalls.length=0,this.__gl=null}}_init(){const e=this.__gl;this._ortho=vn.ortho(0,e.canvas.width,e.canvas.height,0,400,-400),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clearColor(this.backgroundColor.r/255,this.backgroundColor.g/255,this.backgroundColor.b/255,this.backgroundColor.a),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA),this.register(new $o({uvPadding:this.uvPadding,pixelArtSampler:this.pixelArtSampler})),this.register(new Yr),this.register(new jr),this.register(new er),this.register(new zr),this.register(new Xn),this.materialScreenTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.materialScreenTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.bindTexture(e.TEXTURE_2D,null),this._screenRenderer=new eo(e),this._renderTarget=new Rr({gl:e,transparency:this.transparency,width:e.canvas.width,height:e.canvas.height}),this._postProcessTargets=[new Rr({gl:e,transparency:this.transparency,width:e.canvas.width,height:e.canvas.height}),new Rr({gl:e,transparency:this.transparency,width:e.canvas.width,height:e.canvas.height})],this._msaaTarget=new Rr({gl:e,transparency:this.transparency,width:e.canvas.width,height:e.canvas.height,antialias:this.multiSampleAntialiasing,samples:this.samples})}register(e){this._renderers.set(e.type,e),e.initialize(this.__gl,this)}get(e){return this._renderers.get(e)}_isCurrentRenderer(e){return!this._currentRenderer||this._currentRenderer===e}beginDrawLifecycle(){this._isDrawLifecycle=!0}endDrawLifecycle(){this._isDrawLifecycle=!1}draw(e,...a){if(this._isDrawLifecycle||this._logger.warnOnce(`Attempting to draw outside the the drawing lifecycle (preDraw/postDraw) is not supported and is a source of bugs/errors.
If you want to do custom drawing, use Actor.graphics, or any onPreDraw or onPostDraw handler.`),this._isContextLost){this._logger.errorOnce(`Unable to draw ${e}, the webgl context is lost`);return}const h=this._renderers.get(e);if(h)if(this.useDrawSorting){const _=this._drawCallPool.get();_.z=this._state.current.z,_.priority=h.priority,_.renderer=e,this.getTransform().clone(_.transform),_.state.z=this._state.current.z,_.state.opacity=this._state.current.opacity,_.state.tint=this._state.current.tint,_.state.material=this._state.current.material,_.args=a,this._drawCalls[this._drawCallIndex++]=_}else this._currentRenderer||(this._currentRenderer=h),this._isCurrentRenderer(h)||this._currentRenderer.flush(),h.draw(...a),this._currentRenderer=h;else throw Error(`No renderer with name ${e} has been registered`)}resetTransform(){this._transform.current=yn.identity()}updateViewport(e){const a=this.__gl;this._ortho=this._ortho=vn.ortho(0,e.width,e.height,0,400,-400),this._renderTarget.setResolution(a.canvas.width,a.canvas.height),this._msaaTarget.setResolution(a.canvas.width,a.canvas.height),this._postProcessTargets[0].setResolution(a.canvas.width,a.canvas.height),this._postProcessTargets[1].setResolution(a.canvas.width,a.canvas.height)}_getImageWidth(e){let a=this._imageToWidth.get(e);return a===void 0&&(a=e.width,this._imageToWidth.set(e,a)),a}_getImageHeight(e){let a=this._imageToHeight.get(e);return a===void 0&&(a=e.height,this._imageToHeight.set(e,a)),a}drawImage(e,a,h,_,lt,ft,mt,kt,Rt){if(!(_===0||lt===0)){{if(kt===0||Rt===0)return;if(this._getImageWidth(e)===0||this._getImageHeight(e)===0)return}if(!e){Vt.getInstance().warn("Cannot draw a null or undefined image"),console.trace&&console.trace();return}this._state.current.material?this.draw("ex.material",e,a,h,_,lt,ft,mt,kt,Rt):this.draw("ex.image",e,a,h,_,lt,ft,mt,kt,Rt)}}drawLine(e,a,h,_=1){this.draw("ex.rectangle",e,a,h,_)}drawRectangle(e,a,h,_,lt,ft){this.draw("ex.rectangle",e,a,h,_,lt,ft)}drawCircle(e,a,h,_,lt){this.draw("ex.circle",e,a,h,_,lt)}save(){this._transform.save(),this._state.save()}restore(){this._transform.restore(),this._state.restore()}translate(e,a){this._transform.translate(this.snapToPixel?~~(e+Qn):e,this.snapToPixel?~~(a+Qn):a)}rotate(e){this._transform.rotate(e)}scale(e,a){this._transform.scale(e,a)}transform(e){this._transform.current=e}getTransform(){return this._transform.current}multiply(e){this._transform.current.multiply(e,this._transform.current)}addPostProcessor(e){this._postprocessors.push(e),e.initialize(this.__gl)}removePostProcessor(e){const a=this._postprocessors.indexOf(e);a!==-1&&this._postprocessors.splice(a,1)}clearPostProcessors(){this._postprocessors.length=0}updatePostProcessors(e){for(const a of this._postprocessors){const h=a.getShader();h.use();const _=h.getUniforms();this._totalPostProcessorTime+=e,_.find(lt=>lt.name==="u_time_ms")&&h.setUniformFloat("u_time_ms",this._totalPostProcessorTime),_.find(lt=>lt.name==="u_elapsed_ms")&&h.setUniformFloat("u_elapsed_ms",e),_.find(lt=>lt.name==="u_resolution")&&h.setUniformFloatVector("u_resolution",It(this.width,this.height)),a.onUpdate&&a.onUpdate(e)}}set material(e){this._state.current.material=e}get material(){return this._state.current.material}createMaterial(e){return new qr({...e,graphicsContext:this})}createShader(e){const a=this.__gl,{vertexSource:h,fragmentSource:_}=e,lt=new tr({gl:a,vertexSource:h,fragmentSource:_});return lt.compile(),lt}clear(){const e=this.__gl;(this.multiSampleAntialiasing?this._msaaTarget:this._renderTarget).use(),e.clearColor(this.backgroundColor.r/255,this.backgroundColor.g/255,this.backgroundColor.b/255,this.backgroundColor.a),e.clear(e.COLOR_BUFFER_BIT)}flush(){if(this._isContextLost){this._logger.errorOnce("Unable to flush the webgl context is lost");return}let e=this.multiSampleAntialiasing?this._msaaTarget:this._renderTarget;if(e.use(),this.useDrawSorting){for(let lt=this._drawCallIndex;lt<this._drawCalls.length;lt++)this._drawCalls[lt]=null;const a=new Map;for(const[lt]of this._renderers){let ft=0;for(ft=0;ft<this._drawCallIndex&&this._drawCalls[ft].renderer!==lt;ft++);a.set(lt,ft)}this._drawCalls.sort((lt,ft)=>{if(lt===null||ft===null)return 0;const mt=lt.z-ft.z,kt=a.get(lt.renderer)-a.get(ft.renderer),Rt=lt.priority-ft.priority;return mt===0?Rt===0?kt:Rt:mt});const h=this._transform.current,_=this._state.current;if(this._drawCalls.length&&this._drawCallIndex){let lt=this._drawCalls[0].renderer,ft=this._renderers.get(lt);for(let mt=0;mt<this._drawCallIndex;mt++)this._transform.current=this._drawCalls[mt].transform,this._state.current=this._drawCalls[mt].state,this._drawCalls[mt].renderer!==lt&&(ft.flush(),lt=this._drawCalls[mt].renderer,ft=this._renderers.get(lt)),ft instanceof Yr&&this.material.isUsingScreenTexture&&(e.copyToTexture(this.materialScreenTexture),e.use()),ft.draw(...this._drawCalls[mt].args);ft.hasPendingDraws()&&ft.flush()}this._transform.current=h,this._state.current=_,this._drawCallPool.done(),this._drawCallIndex=0,this._imageToHeight.clear(),this._imageToWidth.clear()}else for(const a of this._renderers.values())a.hasPendingDraws()&&a.flush();e.disable(),this._postprocessors.length>0&&e.toRenderSource().use();for(let a=0;a<this._postprocessors.length;a++)e=this._postProcessTargets[a%2],this._postProcessTargets[a%2].use(),this._screenRenderer.renderWithPostProcessor(this._postprocessors[a]),this._postProcessTargets[a%2].toRenderSource().use();e.blitToScreen()}}const Cn=1e-4;class $n{constructor(e){this._ex=e,this._debugText=new Kn}drawRect(e,a,h,_){this._ex.__ctx.save(),this._ex.__ctx.strokeStyle="red",this._ex.__ctx.strokeRect(this._ex.snapToPixel?~~(e+Cn):e,this._ex.snapToPixel?~~(a+Cn):a,this._ex.snapToPixel?~~(h+Cn):h,this._ex.snapToPixel?~~(_+Cn):_),this._ex.__ctx.restore()}drawLine(e,a,h={color:Gt.Black}){this._ex.__ctx.save(),this._ex.__ctx.beginPath(),this._ex.__ctx.strokeStyle=h.color.toString(),this._ex.__ctx.moveTo(this._ex.snapToPixel?~~(e.x+Cn):e.x,this._ex.snapToPixel?~~(e.y+Cn):e.y),this._ex.__ctx.lineTo(this._ex.snapToPixel?~~(a.x+Cn):a.x,this._ex.snapToPixel?~~(a.y+Cn):a.y),this._ex.__ctx.lineWidth=2,this._ex.__ctx.stroke(),this._ex.__ctx.closePath(),this._ex.__ctx.restore()}drawPoint(e,a={color:Gt.Black,size:5}){this._ex.__ctx.save(),this._ex.__ctx.beginPath(),this._ex.__ctx.fillStyle=a.color.toString(),this._ex.__ctx.arc(this._ex.snapToPixel?~~(e.x+Cn):e.x,this._ex.snapToPixel?~~(e.y+Cn):e.y,a.size,0,Math.PI*2),this._ex.__ctx.fill(),this._ex.__ctx.closePath(),this._ex.__ctx.restore()}drawText(e,a){this._debugText.write(this._ex,e,a)}}class rr{get width(){return this.__ctx.canvas.width}get height(){return this.__ctx.canvas.height}get opacity(){return this._state.current.opacity}set opacity(e){this._state.current.opacity=e}get tint(){return this._state.current.tint}set tint(e){this._state.current.tint=e}get smoothing(){return this.__ctx.imageSmoothingEnabled}set smoothing(e){this.__ctx.imageSmoothingEnabled=e}constructor(e){this.useDrawSorting=!1,this.z=0,this.backgroundColor=Gt.ExcaliburBlue,this._state=new qn,this.snapToPixel=!1,this.debug=new $n(this);const{canvasElement:a,context:h,enableTransparency:_,snapToPixel:lt,antialiasing:ft,backgroundColor:mt}=e;if(this.__ctx=h??a.getContext("2d",{alpha:_??!0}),!this.__ctx)throw new Error("Cannot build new ExcaliburGraphicsContext2D for some reason!");this.backgroundColor=mt??this.backgroundColor,this.snapToPixel=lt??this.snapToPixel,this.smoothing=ft??this.smoothing}resetTransform(){this.__ctx.resetTransform()}updateViewport(e){}drawImage(e,a,h,_,lt,ft,mt,kt,Rt){if(_===0||lt===0)return;if(kt===0||Rt===0)return;if(e.width===0||e.height===0)return;this.__ctx.globalAlpha=this.opacity;const Mt=[e,a,h,_,lt,ft,mt,kt,Rt].filter(Nt=>Nt!==void 0).map(Nt=>typeof Nt=="number"&&this.snapToPixel?~~Nt:Nt);this.__ctx.drawImage.apply(this.__ctx,Mt),gn.DrawCallCount++,gn.DrawnImagesCount=1}drawLine(e,a,h,_=1){this.__ctx.save(),this.__ctx.beginPath(),this.__ctx.strokeStyle=h.toString(),this.__ctx.moveTo(this.snapToPixel?~~(e.x+Cn):e.x,this.snapToPixel?~~(e.y+Cn):e.y),this.__ctx.lineTo(this.snapToPixel?~~(a.x+Cn):a.x,this.snapToPixel?~~(a.y+Cn):a.y),this.__ctx.lineWidth=_,this.__ctx.stroke(),this.__ctx.closePath(),this.__ctx.restore()}drawRectangle(e,a,h,_){this.__ctx.save(),this.__ctx.fillStyle=_.toString(),this.__ctx.fillRect(this.snapToPixel?~~(e.x+Cn):e.x,this.snapToPixel?~~(e.y+Cn):e.y,this.snapToPixel?~~(a+Cn):a,this.snapToPixel?~~(h+Cn):h),this.__ctx.restore()}drawCircle(e,a,h,_,lt){this.__ctx.save(),this.__ctx.beginPath(),_&&(this.__ctx.strokeStyle=_.toString()),lt&&(this.__ctx.lineWidth=lt),this.__ctx.fillStyle=h.toString(),this.__ctx.arc(this.snapToPixel?~~(e.x+Cn):e.x,this.snapToPixel?~~(e.y+Cn):e.y,a,0,Math.PI*2),this.__ctx.fill(),_&&this.__ctx.stroke(),this.__ctx.closePath(),this.__ctx.restore()}save(){this.__ctx.save(),this._state.save()}restore(){this.__ctx.restore(),this._state.restore()}translate(e,a){this.__ctx.translate(this.snapToPixel?~~(e+Cn):e,this.snapToPixel?~~(a+Cn):a)}rotate(e){this.__ctx.rotate(e)}scale(e,a){this.__ctx.scale(e,a)}getTransform(){throw new Error("Not implemented")}multiply(e){this.__ctx.setTransform(this.__ctx.getTransform().multiply(e.toDOMMatrix()))}addPostProcessor(e){}removePostProcessor(e){}clearPostProcessors(){}updatePostProcessors(e){}beginDrawLifecycle(){}endDrawLifecycle(){}set material(e){this._state.current.material=e}get material(){return this._state.current.material}createMaterial(e){return null}clear(){this.__ctx.clearRect(0,0,this.width,this.height),this.__ctx.fillStyle=this.backgroundColor.toString(),this.__ctx.fillRect(0,0,this.width,this.height),gn.clear()}flush(){}dispose(){this.__ctx=null}}var xr;(function(ut){ut.Fixed="Fixed",ut.FitContainerAndFill="FitContainerAndFill",ut.FitScreenAndFill="FitScreenAndFill",ut.FitContainerAndZoom="FitContainerAndZoom",ut.FitScreenAndZoom="FitScreenAndZoom",ut.FitScreen="FitScreen",ut.FillScreen="FillScreen",ut.FitContainer="FitContainer",ut.FillContainer="FillContainer"})(xr||(xr={}));class Dr{static get SVGA(){return{width:800,height:600}}static get Standard(){return{width:1920,height:1080}}static get Atari2600(){return{width:160,height:192}}static get GameBoy(){return{width:160,height:144}}static get GameBoyAdvance(){return{width:240,height:160}}static get NintendoDS(){return{width:256,height:192}}static get NES(){return{width:256,height:224}}static get SNES(){return{width:256,height:244}}}const Pr={ScreenResize:"resize",PixelRatioChange:"pixelratio",FullScreenChange:"fullscreen"};class Ar{constructor(e){var a,h,_,lt;this.events=new dt,this._antialiasing=!0,this._canvasImageRendering="auto",this._resolutionStack=[],this._viewportStack=[],this._pixelRatioOverride=null,this._isFullScreen=!1,this._isDisposed=!1,this._logger=Vt.getInstance(),this._fullscreenChangeHandler=()=>{this._isDisposed||(this._isFullScreen=!this._isFullScreen,this._logger.debug("Fullscreen Change",this._isFullScreen),this.events.emit("fullscreen",{fullscreen:this.isFullScreen}))},this._pixelRatioChangeHandler=()=>{this._isDisposed||(this._logger.debug("Pixel Ratio Change",window.devicePixelRatio),this._listenForPixelRatio(),this._devicePixelRatio=this._calculateDevicePixelRatio(),this.applyResolutionAndViewport(),this.events.emit("pixelratio",{pixelRatio:this.pixelRatio}))},this._resizeHandler=()=>{if(this._isDisposed)return;const ft=this.parent;this._logger.debug("View port resized"),this._setResolutionAndViewportByDisplayMode(ft),this.applyResolutionAndViewport(),this.events.emit("resize",{resolution:this.resolution,viewport:this.viewport})},this._devicePixelRatio=this._calculateDevicePixelRatio(),this._contentArea=new Wt,this._unsafeArea=new Wt,this.viewport=e.viewport,this.resolution=(a=e.resolution)!==null&&a!==void 0?a:{...this.viewport},this._contentResolution=this.resolution,this._displayMode=(h=e.displayMode)!==null&&h!==void 0?h:xr.Fixed,this._canvas=e.canvas,this.graphicsContext=e.context,this._antialiasing=(_=e.antialiasing)!==null&&_!==void 0?_:this._antialiasing,this._canvasImageRendering=(lt=e.canvasImageRendering)!==null&&lt!==void 0?lt:this._canvasImageRendering,this._browser=e.browser,this._pixelRatioOverride=e.pixelRatio,this._applyDisplayMode(),this._listenForPixelRatio(),this._canvas.addEventListener("fullscreenchange",this._fullscreenChangeHandler),this.applyResolutionAndViewport()}_listenForPixelRatio(){this._mediaQueryList&&!this._mediaQueryList.addEventListener&&this._mediaQueryList.removeListener(this._pixelRatioChangeHandler),this._mediaQueryList=this._browser.window.nativeComponent.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener?this._mediaQueryList.addEventListener("change",this._pixelRatioChangeHandler,{once:!0}):this._mediaQueryList.addListener(this._pixelRatioChangeHandler)}dispose(){this._isDisposed||(this._isDisposed=!0,this.events.clear(),this._browser.window.off("resize",this._resizeHandler),this._browser.window.clear(),this._resizeObserver&&this._resizeObserver.disconnect(),this.parent.removeEventListener("resize",this._resizeHandler),this._mediaQueryList.removeEventListener?this._mediaQueryList.removeEventListener("change",this._pixelRatioChangeHandler):this._mediaQueryList.removeListener(this._pixelRatioChangeHandler),this._canvas.removeEventListener("fullscreenchange",this._fullscreenChangeHandler),this._canvas=null)}_calculateDevicePixelRatio(){return window.devicePixelRatio<1?1:window.devicePixelRatio||1}get pixelRatio(){return this._pixelRatioOverride?this._pixelRatioOverride:this._devicePixelRatio}get pixelRatioOverride(){return this._pixelRatioOverride}set pixelRatioOverride(e){this._pixelRatioOverride=e}get isHiDpi(){return this.pixelRatio!==1}get displayMode(){return this._displayMode}get canvas(){return this._canvas}get parent(){switch(this.displayMode){case xr.FillContainer:case xr.FitContainer:case xr.FitContainerAndFill:case xr.FitContainerAndZoom:return this.canvas.parentElement||document.body;default:return window}}get resolution(){return this._resolution}set resolution(e){this._resolution=e}get viewport(){return this._viewport?this._viewport:this._resolution}set viewport(e){this._viewport=e}get aspectRatio(){return this._resolution.width/this._resolution.height}get scaledWidth(){return this._resolution.width*this.pixelRatio}get scaledHeight(){return this._resolution.height*this.pixelRatio}setCurrentCamera(e){this._camera=e}pushResolutionAndViewport(){this._resolutionStack.push(this.resolution),this._viewportStack.push(this.viewport),this.resolution={...this.resolution},this.viewport={...this.viewport}}peekViewport(){return this._viewportStack[this._viewportStack.length-1]}peekResolution(){return this._resolutionStack[this._resolutionStack.length-1]}popResolutionAndViewport(){this._resolutionStack.length&&this._viewportStack.length&&(this.resolution=this._resolutionStack.pop(),this.viewport=this._viewportStack.pop())}applyResolutionAndViewport(){if(this.graphicsContext instanceof ar&&!this.graphicsContext.checkIfResolutionSupported({width:this.scaledWidth,height:this.scaledHeight})&&(this._logger.warnOnce(`The currently configured resolution (${this.resolution.width}x${this.resolution.height}) and pixel ratio (${this.pixelRatio}) are too large for the platform WebGL implementation, this may work but cause WebGL rendering to behave oddly. Try reducing the resolution or disabling Hi DPI scaling to avoid this (read more here https://excaliburjs.com/docs/screens#understanding-viewport--resolution).`),!this.pixelRatioOverride)){let _=Math.max(1,this.pixelRatio-.5),lt=!1;for(;_>1&&!lt;){_=Math.max(1,_-.5);const ft=this._resolution.width*_,mt=this._resolution.height*_;lt=this.graphicsContext.checkIfResolutionSupported({width:ft,height:mt})}this.pixelRatioOverride=_,this._logger.warnOnce(`Scaled resolution too big attempted recovery! Pixel ratio was automatically reduced to (${this.pixelRatio}) to avoid 4k texture limit. Setting \`ex.Engine({pixelRatio: ...}) will override any automatic recalculation, do so at your own risk.\`  (read more here https://excaliburjs.com/docs/screens#understanding-viewport--resolution).`)}this._canvas.width=this.scaledWidth,this._canvas.height=this.scaledHeight,this._canvasImageRendering==="auto"?this._canvas.style.imageRendering="auto":(this._canvas.style.imageRendering="pixelated",this._canvas.style.imageRendering===""&&(this._canvas.style.imageRendering="crisp-edges"));const e=this.viewport.widthUnit==="percent"?"%":"px",a=this.viewport.heightUnit==="percent"?"%":"px";this._canvas.style.width=this.viewport.width+e,this._canvas.style.height=this.viewport.height+a,this.graphicsContext.updateViewport(this.resolution),this.graphicsContext.resetTransform(),this.graphicsContext.smoothing=this._antialiasing,this.graphicsContext instanceof rr&&this.graphicsContext.scale(this.pixelRatio,this.pixelRatio)}get antialiasing(){return this._antialiasing}set antialiasing(e){this._antialiasing=e,this.graphicsContext.smoothing=this._antialiasing}get isFullScreen(){return this._isFullScreen}goFullScreen(e){if(e){const a=document.getElementById(e);if(a)return a.getAttribute("ex-fullscreen-listener")||(a.setAttribute("ex-fullscreen-listener","true"),a.addEventListener("fullscreenchange",this._fullscreenChangeHandler)),a.requestFullscreen()}return this._canvas.requestFullscreen()}exitFullScreen(){return document.exitFullscreen()}_viewportToPixels(e){return{width:e.widthUnit==="percent"?this.canvas.offsetWidth:e.width,height:e.heightUnit==="percent"?this.canvas.offsetHeight:e.height}}pageToScreenCoordinates(e){let a=e.x,h=e.y;this._isFullScreen||(a-=ln(this._canvas).x,h-=ln(this._canvas).y);const _=this._viewportToPixels(this.viewport);if(this._isFullScreen)if(window.innerWidth/this.aspectRatio<window.innerHeight){const lt=window.innerWidth/this.aspectRatio,ft=(window.innerHeight-lt)/2;h=(h-ft)/lt*_.height,a=a/window.innerWidth*_.width}else{const lt=window.innerHeight*this.aspectRatio,ft=(window.innerWidth-lt)/2;a=(a-ft)/lt*_.width,h=h/window.innerHeight*_.height}return a=a/_.width*this.resolution.width,h=h/_.height*this.resolution.height,a=a-this.contentArea.left,h=h-this.contentArea.top,new At(a,h)}screenToPageCoordinates(e){let a=e.x,h=e.y;const _=this._viewportToPixels(this.viewport);if(a=a/this.resolution.width*_.width,h=h/this.resolution.height*_.height,this._isFullScreen)if(window.innerWidth/this.aspectRatio<window.innerHeight){const lt=window.innerWidth/this.aspectRatio,ft=(window.innerHeight-lt)/2;h=h/_.height*lt+ft,a=a/_.width*window.innerWidth}else{const lt=window.innerHeight*this.aspectRatio,ft=(window.innerWidth-lt)/2;a=a/_.width*lt+ft,h=h/_.height*window.innerHeight}return this._isFullScreen||(a+=ln(this._canvas).x,h+=ln(this._canvas).y),new At(a,h)}screenToWorldCoordinates(e){return e=e.add(It(this.contentArea.left,this.contentArea.top)),this._camera?this._camera.inverse.multiply(e):e.sub(It(this.resolution.width/2,this.resolution.height/2))}worldToScreenCoordinates(e){return this._camera?this._camera.transform.multiply(e):e.add(It(this.resolution.width/2,this.resolution.height/2))}pageToWorldCoordinates(e){const a=this.pageToScreenCoordinates(e);return this.screenToWorldCoordinates(a)}worldToPageCoordinates(e){const a=this.worldToScreenCoordinates(e);return this.screenToPageCoordinates(a)}getWorldBounds(){return Wt.fromDimension(this.resolution.width,this.resolution.height,At.Half).scale(It(1/this._camera.zoom,1/this._camera.zoom)).rotate(this._camera.rotation).translate(this._camera.drawPos)}getScreenBounds(){return Wt.fromDimension(this.resolution.width,this.resolution.height,At.Zero,At.Zero)}get canvasWidth(){return this.canvas.width}get halfCanvasWidth(){return this.canvas.width/2}get canvasHeight(){return this.canvas.height}get halfCanvasHeight(){return this.canvas.height/2}get drawWidth(){return this._camera?this.resolution.width/this._camera.zoom:this.resolution.width}get halfDrawWidth(){return this.drawWidth/2}get drawHeight(){return this._camera?this.resolution.height/this._camera.zoom:this.resolution.height}get halfDrawHeight(){return this.drawHeight/2}get center(){return It(this.halfDrawWidth,this.halfDrawHeight)}get contentArea(){return this._contentArea}get unsafeArea(){return this._unsafeArea}_computeFit(){document.body.style.margin="0px",document.body.style.overflow="hidden";const e=this.aspectRatio;let a=0,h=0;window.innerWidth/e<window.innerHeight?(a=window.innerWidth,h=window.innerWidth/e):(a=window.innerHeight*e,h=window.innerHeight),this.viewport={width:a,height:h},this._contentArea=Wt.fromDimension(this.resolution.width,this.resolution.height,At.Zero),this._unsafeArea=Wt.fromDimension(this.resolution.width,this.resolution.height,At.Zero),this.events.emit("resize",{resolution:this.resolution,viewport:this.viewport})}_computeFitScreenAndFill(){document.body.style.margin="0px",document.body.style.overflow="hidden";const e=window.innerWidth,a=window.innerHeight;this._computeFitAndFill(e,a),this.events.emit("resize",{resolution:this.resolution,viewport:this.viewport})}_computeFitContainerAndFill(){this.canvas.style.width="100%",this.canvas.style.height="100%",this._computeFitAndFill(this.canvas.offsetWidth,this.canvas.offsetHeight,{width:100,widthUnit:"percent",height:100,heightUnit:"percent"}),this.events.emit("resize",{resolution:this.resolution,viewport:this.viewport})}_computeFitAndFill(e,a,h){if(this.viewport=h??{width:e,height:a},e/a<=this._contentResolution.width/this._contentResolution.height){this.resolution={width:e*this._contentResolution.width/e,height:e*this._contentResolution.width/e*a/e};const _=(this.resolution.height-this._contentResolution.height)/2;this._contentArea=new Wt({top:_,left:0,right:this._contentResolution.width,bottom:this.resolution.height-_}),this._unsafeArea=new Wt({top:-_,left:0,right:this._contentResolution.width,bottom:this.resolution.height+_})}else{this.resolution={width:a*this._contentResolution.height/a*e/a,height:a*this._contentResolution.height/a};const _=(this.resolution.width-this._contentResolution.width)/2;this._contentArea=new Wt({top:0,left:_,right:this.resolution.width-_,bottom:this._contentResolution.height}),this._unsafeArea=new Wt({top:0,left:-_,right:this.resolution.width+_,bottom:this._contentResolution.height})}}_computeFitScreenAndZoom(){document.body.style.margin="0px",document.body.style.overflow="hidden",this.canvas.style.position="absolute";const e=window.innerWidth,a=window.innerHeight;this._computeFitAndZoom(e,a),this.events.emit("resize",{resolution:this.resolution,viewport:this.viewport})}_computeFitContainerAndZoom(){this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="relative";const e=this.canvas.parentElement;e.style.overflow="hidden";const{offsetWidth:a,offsetHeight:h}=this.canvas;this._computeFitAndZoom(a,h),this.events.emit("resize",{resolution:this.resolution,viewport:this.viewport})}_computeFitAndZoom(e,a){const h=this.aspectRatio;let _=0,lt=0;e/h<a?(_=e,lt=e/h):(_=a*h,lt=a);const ft=e/_,mt=a/lt,kt=Math.max(ft,mt),Rt=_*kt,Mt=lt*kt;Rt>e?this.canvas.style.left=-(Rt-e)/2+"px":this.canvas.style.left="",Mt>a?this.canvas.style.top=-(Mt-a)/2+"px":this.canvas.style.top="",this.viewport={width:Rt,height:Mt};const Nt=Wt.fromDimension(this.viewport.width,this.viewport.height,At.Zero);if(this.viewport.width>e){const en=(this.viewport.width-e)/this.viewport.width*this.resolution.width;Nt.top=0,Nt.left=en/2,Nt.right=this.resolution.width-en/2,Nt.bottom=this.resolution.height}if(this.viewport.height>a){const en=(this.viewport.height-a)/this.viewport.height*this.resolution.height;Nt.top=en/2,Nt.left=0,Nt.bottom=this.resolution.height-en/2,Nt.right=this.resolution.width}this._contentArea=Nt}_computeFitContainer(){const e=this.aspectRatio;let a=0,h=0,_="pixel",lt="pixel";const ft=this.canvas.parentElement;ft.clientWidth/e<ft.clientHeight?(this.canvas.style.width="100%",a=100,_="percent",h=this.canvas.offsetWidth/e):(this.canvas.style.height="100%",h=100,lt="percent",a=this.canvas.offsetHeight*e),this.viewport={width:a,widthUnit:_,height:h,heightUnit:lt},this._contentArea=Wt.fromDimension(this.resolution.width,this.resolution.height,At.Zero),this.events.emit("resize",{resolution:this.resolution,viewport:this.viewport})}_applyDisplayMode(){this._setResolutionAndViewportByDisplayMode(this.parent),this.parent instanceof Window?this._browser.window.on("resize",this._resizeHandler):(this._resizeObserver=new ResizeObserver(()=>{this._resizeHandler()}),this._resizeObserver.observe(this.parent)),this.parent.addEventListener("resize",this._resizeHandler)}_setResolutionAndViewportByDisplayMode(e){this.displayMode===xr.FillContainer&&(this.canvas.style.width="100%",this.canvas.style.height="100%",this.viewport={width:100,widthUnit:"percent",height:100,heightUnit:"percent"},this.resolution={width:this.canvas.offsetWidth,height:this.canvas.offsetHeight}),this.displayMode===xr.FillScreen&&(document.body.style.margin="0px",document.body.style.overflow="hidden",this.resolution={width:e.innerWidth,height:e.innerHeight},this.viewport=this.resolution),this._contentArea=Wt.fromDimension(this.resolution.width,this.resolution.height,At.Zero),this.displayMode===xr.FitScreen&&this._computeFit(),this.displayMode===xr.FitContainer&&this._computeFitContainer(),this.displayMode===xr.FitScreenAndFill&&this._computeFitScreenAndFill(),this.displayMode===xr.FitContainerAndFill&&this._computeFitContainerAndFill(),this.displayMode===xr.FitScreenAndZoom&&this._computeFitScreenAndZoom(),this.displayMode===xr.FitContainerAndZoom&&this._computeFitContainerAndZoom()}}class Lr{static create(){return this._INSTANCE||(window.AudioContext||window.webkitAudioContext)&&(this._INSTANCE=new AudioContext),this._INSTANCE}}Lr._INSTANCE=null;function Br(ut){return!!ut.playbackState}class Hr{static unlock(){return new Promise((a,h)=>{if(Hr._UNLOCKED||!Lr.create())return a(!0);const _=setTimeout(()=>{Vt.getInstance().warn("Excalibur was unable to unlock the audio context, audio probably will not play in this browser."),a(!1)},200),lt=Lr.create();lt.resume().then(()=>{const ft=lt.createBuffer(1,1,22050),mt=lt.createBufferSource();let kt=!1;mt.buffer=ft,mt.connect(lt.destination),mt.onended=()=>kt=!0,mt.start(0),setTimeout(()=>{Br(mt)?(mt.playbackState===mt.PLAYING_STATE||mt.playbackState===mt.FINISHED_STATE)&&(Hr._UNLOCKED=!0):(lt.currentTime>0||kt)&&(Hr._UNLOCKED=!0)},0),clearTimeout(_),a(!0)},()=>{h()})})}static isUnlocked(){return this._UNLOCKED}}Hr._UNLOCKED=!1;class no extends cn{constructor(e){var a,h,_,lt,ft,mt,kt,Rt,Mt,Nt;super(Zn(e,["width","height"])),this.filtering=null,this.lineCap="butt",this.quality=1,this._dirty=!0,this._smoothing=!1,this._color=dr(Gt.Black,()=>this.flagDirty()),this._lineWidth=1,this._lineDash=[],this._padding=0,e&&(this.quality=(a=e.quality)!==null&&a!==void 0?a:this.quality,this.color=(h=e.color)!==null&&h!==void 0?h:Gt.Black,this.strokeColor=e?.strokeColor,this.smoothing=(_=e.smoothing)!==null&&_!==void 0?_:this.smoothing,this.lineWidth=(lt=e.lineWidth)!==null&&lt!==void 0?lt:this.lineWidth,this.lineDash=(ft=e.lineDash)!==null&&ft!==void 0?ft:this.lineDash,this.lineCap=(mt=e.lineCap)!==null&&mt!==void 0?mt:this.lineCap,this.padding=(kt=e.padding)!==null&&kt!==void 0?kt:this.padding,this.filtering=(Rt=e.filtering)!==null&&Rt!==void 0?Rt:this.filtering),this._bitmap=document.createElement("canvas");const en=(Mt=e?.width)!==null&&Mt!==void 0?Mt:this._bitmap.width,an=(Nt=e?.height)!==null&&Nt!==void 0?Nt:this._bitmap.height;this.width=en,this.height=an;const un=this._bitmap.getContext("2d");if(un)this._ctx=un;else throw new Error("Browser does not support 2d canvas drawing, cannot create Raster graphic")}cloneRasterOptions(){return{color:this.color?this.color.clone():null,strokeColor:this.strokeColor?this.strokeColor.clone():null,smoothing:this.smoothing,lineWidth:this.lineWidth,lineDash:this.lineDash,lineCap:this.lineCap,quality:this.quality,padding:this.padding}}get dirty(){return this._dirty}flagDirty(){this._dirty=!0}get width(){return Math.abs(this._getTotalWidth()*this.scale.x)}set width(e){e/=Math.abs(this.scale.x),this._bitmap.width=e,this._originalWidth=e,this.flagDirty()}get height(){return Math.abs(this._getTotalHeight()*this.scale.y)}set height(e){e/=Math.abs(this.scale.y),this._bitmap.height=e,this._originalHeight=e,this.flagDirty()}_getTotalWidth(){var e;return(((e=this._originalWidth)!==null&&e!==void 0?e:this._bitmap.width)+this.padding*2)*1}_getTotalHeight(){var e;return(((e=this._originalHeight)!==null&&e!==void 0?e:this._bitmap.height)+this.padding*2)*1}get localBounds(){return Wt.fromDimension(this._getTotalWidth()*this.scale.x,this._getTotalHeight()*this.scale.y,At.Zero)}get smoothing(){return this._smoothing}set smoothing(e){this._smoothing=e,this.flagDirty()}get color(){return this._color}set color(e){this.flagDirty(),this._color=dr(e,()=>this.flagDirty())}get strokeColor(){return this._strokeColor}set strokeColor(e){this.flagDirty(),this._strokeColor=dr(e,()=>this.flagDirty())}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=e,this.flagDirty()}get lineDash(){return this._lineDash}set lineDash(e){this._lineDash=e,this.flagDirty()}get padding(){return this._padding}set padding(e){this._padding=e,this.flagDirty()}rasterize(){this._dirty=!1,this._ctx.clearRect(0,0,this._getTotalWidth(),this._getTotalHeight()),this._ctx.save(),this._applyRasterProperties(this._ctx),this.execute(this._ctx),this._ctx.restore()}_applyRasterProperties(e){var a,h,_;this._bitmap.width=this._getTotalWidth()*this.quality,this._bitmap.height=this._getTotalHeight()*this.quality,this._bitmap.setAttribute("filtering",this.filtering),this._bitmap.setAttribute("forceUpload","true"),e.scale(this.quality,this.quality),e.translate(this.padding,this.padding),e.imageSmoothingEnabled=this.smoothing,e.lineWidth=this.lineWidth,e.setLineDash((a=this.lineDash)!==null&&a!==void 0?a:e.getLineDash()),e.lineCap=this.lineCap,e.strokeStyle=(h=this.strokeColor)===null||h===void 0?void 0:h.toString(),e.fillStyle=(_=this.color)===null||_===void 0?void 0:_.toString()}_drawImage(e,a,h){this._dirty&&this.rasterize(),e.scale(1/this.quality,1/this.quality),e.drawImage(this._bitmap,a,h)}}class fo extends no{get ctx(){return this._ctx}constructor(e){super(e),this._options=e}clone(){return new fo({...this._options,...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(e){var a,h;!((a=this._options)===null||a===void 0)&&a.draw&&((h=this._options)===null||h===void 0||h.draw(e)),this._options.cache||this.flagDirty()}}class _o{}_o.type={any:"",blob:"blob",json:"json",text:"text",document:"document",arraybuffer:"arraybuffer"};class wo{constructor(){this.states=new Map}get currentState(){return this._currentState}set currentState(e){this._currentState=e}static create(e,a){const h=new wo;h.data=a;for(const _ in e.states)h.states.set(_,{name:_,...e.states[_]});for(const _ of h.states.values())for(const lt of _.transitions)if(lt!=="*"&&!h.states.has(lt))throw Error(`Invalid state machine, state [${_.name}] has a transition to another state that doesn't exist [${lt}]`);return h.currentState=h.startState=h.states.get(e.start),h}in(e){return this.currentState.name===e}go(e,a){var h,_;if(this.currentState.transitions.includes(e)||this.currentState.transitions.includes("*")){const lt=this.states.get(e);return this.currentState.onExit&&((h=this.currentState)===null||h===void 0?void 0:h.onExit({to:lt.name,data:this.data}))===!1||lt?.onEnter&&lt?.onEnter({from:this.currentState.name,eventData:a,data:this.data})===!1?!1:(this.currentState=lt,!((_=this.currentState)===null||_===void 0)&&_.onState&&this.currentState.onState(),!0)}return!1}update(e){this.currentState.onUpdate&&this.currentState.onUpdate(this.data,e)}save(e){localStorage.setItem(e,JSON.stringify({currentState:this.currentState.name,data:this.data}))}restore(e){const a=JSON.parse(localStorage.getItem(e));this.currentState=this.states.get(a.currentState),this.data=a.data}}class Zo{_createNewBufferSource(){this._instance=this._audioContext.createBufferSource(),this._instance.buffer=this._src,this._instance.loop=this.loop,this._instance.playbackRate.value=this._playbackRate,this._instance.connect(this._volumeNode),this._volumeNode.connect(this._audioContext.destination)}_handleEnd(){this.loop||(this._instance.onended=()=>{this._playingFuture.resolve(!0)})}set loop(e){this._loop=e,this._instance&&(this._instance.loop=e,this.loop||(this._instance.onended=()=>{this._playingFuture.resolve(!0)}))}get loop(){return this._loop}set volume(e){e=Pt(e,0,1),this._volume=e,this._stateMachine.in("PLAYING")&&this._volumeNode.gain.setTargetAtTime?this._volumeNode.gain.setTargetAtTime(e,this._audioContext.currentTime,.1):this._volumeNode.gain.value=e}get volume(){return this._volume}get duration(){var e;return(e=this._duration)!==null&&e!==void 0?e:this.getTotalPlaybackDuration()}set duration(e){this._duration=e}constructor(e){this._src=e,this._audioContext=Lr.create(),this._volumeNode=this._audioContext.createGain(),this._playingFuture=new pt,this._stateMachine=wo.create({start:"STOPPED",states:{PLAYING:{onEnter:({data:a})=>{this._createNewBufferSource(),this._handleEnd(),this.loop?this._instance.start(0,a.pausedAt*this._playbackRate):this._instance.start(0,a.pausedAt*this._playbackRate,this.duration),a.startedAt=this._audioContext.currentTime-a.pausedAt,a.pausedAt=0},onState:()=>this._playStarted(),onExit:({to:a})=>{a==="STOPPED"&&this._playingFuture.resolve(!0),this._instance.onended=null,this._instance.disconnect(),this._instance.stop(0),this._instance=null},transitions:["STOPPED","PAUSED","SEEK"]},SEEK:{onEnter:({eventData:a,data:h})=>{h.pausedAt=(a??0)/this._playbackRate,h.startedAt=0},transitions:["*"]},STOPPED:{onEnter:({data:a})=>{a.pausedAt=0,a.startedAt=0,this._playingFuture.resolve(!0)},transitions:["PLAYING","PAUSED","SEEK"]},PAUSED:{onEnter:({data:a})=>{a.pausedAt=this._audioContext.currentTime-a.startedAt},transitions:["PLAYING","STOPPED","SEEK"]}}},{startedAt:0,pausedAt:0}),this._volume=1,this._loop=!1,this._playStarted=()=>{},this._playbackRate=1,this._createNewBufferSource()}isPlaying(){return this._stateMachine.in("PLAYING")}isPaused(){return this._stateMachine.in("PAUSED")||this._stateMachine.in("SEEK")}isStopped(){return this._stateMachine.in("STOPPED")}play(e=()=>{}){return this._playStarted=e,this._stateMachine.go("PLAYING"),this._playingFuture.promise}pause(){this._stateMachine.go("PAUSED")}stop(){this._stateMachine.go("STOPPED")}seek(e){this._stateMachine.go("PAUSED"),this._stateMachine.go("SEEK",e)}getTotalPlaybackDuration(){return this._src.duration}getPlaybackPosition(){const{pausedAt:e,startedAt:a}=this._stateMachine.data;return e?e*this._playbackRate:a?(this._audioContext.currentTime-a)*this._playbackRate:0}set playbackRate(e){this._instance.playbackRate.value=this._playbackRate=e}get playbackRate(){return this._instance.playbackRate.value}}var Eo;(function(ut){ut.Kill="kill",ut.PreKill="prekill",ut.PostKill="postkill",ut.PreDraw="predraw",ut.PostDraw="postdraw",ut.PreDebugDraw="predebugdraw",ut.PostDebugDraw="postdebugdraw",ut.PreUpdate="preupdate",ut.PostUpdate="postupdate",ut.PreFrame="preframe",ut.PostFrame="postframe",ut.PreCollision="precollision",ut.CollisionStart="collisionstart",ut.CollisionEnd="collisionend",ut.PostCollision="postcollision",ut.Initialize="initialize",ut.Activate="activate",ut.Deactivate="deactivate",ut.ExitViewport="exitviewport",ut.EnterViewport="enterviewport",ut.ExitTrigger="exit",ut.EnterTrigger="enter",ut.Connect="connect",ut.Disconnect="disconnect",ut.Button="button",ut.Axis="axis",ut.Visible="visible",ut.Hidden="hidden",ut.Start="start",ut.Stop="stop",ut.PointerUp="pointerup",ut.PointerDown="pointerdown",ut.PointerMove="pointermove",ut.PointerEnter="pointerenter",ut.PointerLeave="pointerleave",ut.PointerCancel="pointercancel",ut.PointerWheel="pointerwheel",ut.Up="up",ut.Down="down",ut.Move="move",ut.Enter="enter",ut.Leave="leave",ut.Cancel="cancel",ut.Wheel="wheel",ut.Press="press",ut.Release="release",ut.Hold="hold",ut.PointerDragStart="pointerdragstart",ut.PointerDragEnd="pointerdragend",ut.PointerDragEnter="pointerdragenter",ut.PointerDragLeave="pointerdragleave",ut.PointerDragMove="pointerdragmove",ut.ActionStart="actionstart",ut.ActionComplete="actioncomplete"})(Eo||(Eo={}));class Or{constructor(){this._bubbles=!0}get bubbles(){return this._bubbles}set bubbles(e){this._bubbles=e}stopPropagation(){this.bubbles=!1}}class Bo extends Or{constructor(e){super(),this.target=e}}class Co extends Or{constructor(e){super(),this.target=e}}class ns extends Or{constructor(e){super(),this.target=e}}class Io extends Or{constructor(e){super(),this.target=e}}class Ts extends Or{constructor(e){super(),this.target=e}}class ko extends Or{constructor(e,a,h){super(),this.ctx=e,this.delta=a,this.target=h}}class Oo extends Or{constructor(e,a,h){super(),this.ctx=e,this.delta=a,this.target=h}}class us extends Or{constructor(e,a,h){super(),this.ctx=e,this.delta=a,this.target=h}}class zs extends Or{constructor(e,a,h){super(),this.ctx=e,this.delta=a,this.target=h}}class Zs extends Or{constructor(e,a){super(),this.ctx=e,this.target=a}}class is extends Or{constructor(e,a){super(),this.ctx=e,this.target=a}}class ys extends Or{constructor(e,a,h){super(),this.engine=e,this.delta=a,this.target=h}}class As extends Or{constructor(e,a,h){super(),this.engine=e,this.delta=a,this.target=h}}class xl extends Or{constructor(e,a){super(),this.engine=e,this.prevStats=a,this.target=e}}class Gs extends Or{constructor(e,a){super(),this.engine=e,this.stats=a,this.target=e}}class Al extends Or{constructor(e,a){super(),this.index=e,this.gamepad=a,this.target=a}}class Ls extends Or{constructor(e,a){super(),this.index=e,this.gamepad=a,this.target=a}}class Cl extends Or{constructor(e,a,h){super(),this.button=e,this.value=a,this.target=h}}class na extends Or{constructor(e,a,h){super(),this.axis=e,this.value=a,this.target=h}}class Sl extends Or{constructor(e){super(),this.target=e}}class Rs extends Or{constructor(e){super(),this.target=e}}class Ds extends Or{constructor(e,a,h,_,lt){super(),this.other=a,this.side=h,this.intersection=_,this.contact=lt,this.target=e}}class Cs extends Or{constructor(e,a,h,_,lt){super(),this.other=a,this.side=h,this.intersection=_,this.contact=lt,this.target=e}get actor(){return this.target}set actor(e){this.target=e}}class ga{constructor(e,a,h,_){this.target=e,this.other=a,this.side=h,this.contact=_}}class Is{constructor(e,a,h,_){this.target=e,this.other=a,this.side=h,this.lastContact=_}}class _a{constructor(e,a,h,_,lt){this.target=e,this.other=a,this.side=h,this.intersection=_,this.contact=lt}}class ba{constructor(e,a,h,_,lt){this.target=e,this.other=a,this.side=h,this.intersection=_,this.contact=lt}}class Vs extends Or{constructor(e,a,h,_){super(),this.other=a,this.side=h,this.contact=_,this.target=e}get actor(){return this.target}set actor(e){this.target=e}}class Mo extends Or{constructor(e,a,h,_){super(),this.other=a,this.side=h,this.lastContact=_,this.target=e}get actor(){return this.target}set actor(e){this.target=e}}class Ns extends Or{constructor(e,a){super(),this.engine=e,this.target=a}}class ro extends Or{constructor(e,a){super(),this.context=e,this.target=a}}class El extends Or{constructor(e,a){super(),this.context=e,this.target=a}}class ws extends Or{constructor(e){super(),this.target=e}}class Tl extends Or{constructor(e){super(),this.target=e}}class Pl extends Or{constructor(e,a){super(),this.target=e,this.actor=a}}class Rl extends Or{constructor(e,a){super(),this.target=e,this.actor=a}}class Ms extends Or{constructor(e,a){super(),this.action=e,this.target=a}}class Dl extends Or{constructor(e,a){super(),this.action=e,this.target=a}}class Il extends Or{set bubbles(e){}get bubbles(){return!1}get _path(){return null}set _path(e){}constructor(e,a="MediaEvent"){super(),this.target=e,this._name=a}stopPropagation(){}action(){}propagate(){}layPath(e){}}class ks extends Il{constructor(e,a){super(e,"NativeSoundEvent"),this.track=a}}class Ql extends Il{constructor(e,a){super(e,"NativeSoundProcessedEvent"),this._processedData=a,this.data=this._processedData}}function Kl(ut){try{const e=new Audio,a=/.*\.([A-Za-z0-9]+)(?:(?:\?|\#).*)*$/,h=ut.match(a)[1];return!!e.canPlayType("audio/"+h)}catch(e){return Vt.getInstance().warn("Cannot determine audio support, assuming no support for the Audio Tag",e),!1}}const wu={VolumeChange:"volumechange",Processed:"processed",Pause:"pause",Stop:"stop",PlaybackEnd:"playbackend",Resume:"resume",PlaybackStart:"playbackstart"};class Jl{set loop(e){this._loop=e;for(const a of this._tracks)a.loop=this._loop;this.logger.debug("Set loop for all instances of sound",this.path,"to",this._loop)}get loop(){return this._loop}set volume(e){this._volume=e;for(const a of this._tracks)a.volume=this._volume;this.events.emit("volumechange",new ks(this)),this.logger.debug("Set loop for all instances of sound",this.path,"to",this._volume)}get volume(){return this._volume}get duration(){return this._duration}set duration(e){this._duration=e}get instances(){return this._tracks}get path(){return this._resource.path}set path(e){this._resource.path=e}get bustCache(){return this._resource.bustCache}set bustCache(e){this._resource.bustCache=e}constructor(...e){this.events=new dt,this.logger=Vt.getInstance(),this._loop=!1,this._volume=1,this._isStopped=!1,this._tracks=[],this._wasPlayingOnHidden=!1,this._playbackRate=1,this._audioContext=Lr.create(),this._resource=new Jn("",_o.type.arraybuffer);for(const a of e)if(Kl(a)){this.path=a;break}this.path||(this.logger.warn("This browser does not support any of the audio files specified:",e.join(", ")),this.logger.warn("Attempting to use",e[0]),this.path=e[0])}isLoaded(){return!!this.data}async load(){var e,a;if(this.data)return this.data;const h=await this._resource.load(),_=await this.decodeAudio(h.slice(0));return this._duration=(a=(e=this._duration)!==null&&e!==void 0?e:_?.duration)!==null&&a!==void 0?a:void 0,this.events.emit("processed",new Ql(this,_)),this.data=_}async decodeAudio(e){try{return await this._audioContext.decodeAudioData(e.slice(0))}catch{return this.logger.error("Unable to decode  this browser may not fully support this format, or the file may be corrupt, if this is an mp3 try removing id3 tags and album art from the file."),await Promise.reject()}}wireEngine(e){e&&(this._engine=e,this._engine.on("hidden",()=>{e.pauseAudioWhenHidden&&this.isPlaying()&&(this._wasPlayingOnHidden=!0,this.pause())}),this._engine.on("visible",()=>{e.pauseAudioWhenHidden&&this._wasPlayingOnHidden&&(this.play(),this._wasPlayingOnHidden=!1)}),this._engine.on("start",()=>{this._isStopped=!1}),this._engine.on("stop",()=>{this.stop(),this._isStopped=!0}))}instanceCount(){return this._tracks.length}isPlaying(){return this._tracks.some(e=>e.isPlaying())}isPaused(){return this._tracks.some(e=>e.isPaused())}isStopped(){return this._tracks.some(e=>e.isStopped())}play(e){return this.isLoaded()?this._isStopped?(this.logger.warn("Cannot start playing. Engine is in a stopped state."),Promise.resolve(!1)):(this.volume=e||this.volume,this.isPaused()?this._resumePlayback():this._startPlayback()):(this.logger.warn("Cannot start playing. Resource",this.path,"is not loaded yet"),Promise.resolve(!0))}pause(){if(this.isPlaying()){for(const e of this._tracks)e.pause();this.events.emit("pause",new ks(this)),this.logger.debug("Paused all instances of sound",this.path)}}stop(){for(const e of this._tracks)e.stop();this.events.emit("stop",new ks(this)),this._tracks.length=0,this.logger.debug("Stopped all instances of sound",this.path)}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._tracks.forEach(a=>{a.playbackRate=this._playbackRate})}seek(e,a=0){this._tracks.length===0&&this._getTrackInstance(this.data),this._tracks[a].seek(e)}getTotalPlaybackDuration(){return this.isLoaded()?this.data.duration:(this.logger.warnOnce(`Sound from ${this.path} is not loaded, cannot return total playback duration.Did you forget to add Sound to a loader? https://excaliburjs.com/docs/loaders/`),0)}getPlaybackPosition(e=0){return this._tracks.length?this._tracks[e].getPlaybackPosition():0}getTrackId(e){return this._tracks.indexOf(e)}async _resumePlayback(){if(this.isPaused){const e=[];for(const a of this._tracks)e.push(a.play().then(()=>(this._tracks.splice(this.getTrackId(a),1),!0)));this.events.emit("resume",new ks(this)),this.logger.debug("Resuming paused instances for sound",this.path,this._tracks),await Promise.all(e)}return!0}async _startPlayback(){const e=this._getTrackInstance(this.data),a=await e.play(()=>{this.events.emit("playbackstart",new ks(this,e)),this.logger.debug("Playing new instance for sound",this.path)});this.events.emit("playbackend",new ks(this,e));const h=this.getTrackId(e);return h!==-1&&this._tracks.splice(h,1),a}_getTrackInstance(e){const a=new Zo(e);return a.loop=this.loop,a.volume=this.volume,a.duration=this.duration,a.playbackRate=this._playbackRate,this._tracks.push(a),a}emit(e,a){this.events.emit(e,a)}on(e,a){return this.events.on(e,a)}once(e,a){return this.events.once(e,a)}off(e,a){this.events.off(e,a)}}const _c={BeforeLoad:"beforeload",AfterLoad:"afterload",UserAction:"useraction",LoadResourceStart:"loadresourcestart",LoadResourceEnd:"loadresourceend"};function Ml(ut){var e,a;return!!ut?.prototype&&!!(!((a=(e=ut?.prototype)===null||e===void 0?void 0:e.constructor)===null||a===void 0)&&a.name)}class Fs{get resources(){return this._resources}constructor(e){var a;this.events=new dt,this.canvas=new fo({filtering:En.Blended,smoothing:!0,cache:!1,draw:this.onDraw.bind(this)}),this._resources=[],this._numLoaded=0,this._totalTimeMs=0,this._loadingFuture=new pt,e&&(!((a=e.loadables)===null||a===void 0)&&a.length)&&this.addResources(e.loadables)}onInitialize(e){this.engine=e,this.canvas.width=this.engine.screen.resolution.width,this.canvas.height=this.engine.screen.resolution.height}async onUserAction(){return await Promise.resolve()}async onBeforeLoad(){}async onAfterLoad(){await bn(500,this.engine.clock)}addResource(e){this._resources.push(e)}addResources(e){let a=0;const h=e.length;for(a;a<h;a++)this.addResource(e[a])}markResourceComplete(){this._numLoaded++}get progress(){const e=this._resources.length;return e>0?Pt(this._numLoaded,0,e)/e:1}isLoaded(){return this._numLoaded===this._resources.length}onUpdate(e,a){this._totalTimeMs+=a}onDraw(e){const a=this._totalTimeMs/1e3;e.fillStyle=Gt.Black.toRGBA(),e.fillRect(0,0,this.engine.screen.resolution.width,this.engine.screen.resolution.height),e.save(),e.translate(this.engine.screen.resolution.width/2,this.engine.screen.resolution.height/2);const h=a*10;e.strokeStyle="white",e.lineWidth=10,e.lineCap="round",e.arc(0,0,40,h,h+Math.PI*3/2),e.stroke(),e.fillStyle="white",e.font="16px sans-serif";const _=(this.progress*100).toFixed(0)+"%",lt=e.measureText(_),ft=Math.abs(lt.actualBoundingBoxLeft)+Math.abs(lt.actualBoundingBoxRight),mt=Math.abs(lt.actualBoundingBoxAscent)+Math.abs(lt.actualBoundingBoxDescent);e.fillText(_,-ft/2,mt/2),e.restore()}areResourcesLoaded(){return this._loadingFuture.promise}async load(){await this.onBeforeLoad(),this.events.emit("beforeload"),this.canvas.flagDirty(),await Promise.all(this._resources.map(async e=>{this.events.emit("loadresourcestart",e),await e.load().finally(()=>{this._numLoaded++,this.canvas.flagDirty(),this.events.emit("loadresourceend",e)})}));for(const e of this._resources)e instanceof Jl&&e.wireEngine(this.engine);return this._loadingFuture.resolve(),this.canvas.flagDirty(),await this.onUserAction(),this.events.emit("useraction"),await Hr.unlock(),await this.onAfterLoad(),this.events.emit("afterload"),this.data=this._resources}emit(e,a){this.events.emit(e,a)}on(e,a){return this.events.on(e,a)}once(e,a){return this.events.once(e,a)}off(e,a){this.events.off(e,a)}}function Cr(ut,e=Gt.Red,a,h,_,lt,ft=1,mt="butt"){ut.save(),ut.beginPath(),ut.lineWidth=ft,ut.lineCap=mt,ut.strokeStyle=e.toString(),ut.moveTo(a,h),ut.lineTo(_,lt),ut.closePath(),ut.stroke(),ut.restore()}function Xr(ut,e=Gt.Red,a){ut.beginPath(),ut.strokeStyle=e.toString(),ut.arc(a.x,a.y,5,0,Math.PI*2),ut.closePath(),ut.stroke()}function wr(ut,e,a,h,_=1){const lt=e?e.toString():"blue",ft=h.scale(_);ut.beginPath(),ut.strokeStyle=lt,ut.moveTo(a.x,a.y),ut.lineTo(a.x+ft.x,a.y+ft.y),ut.closePath(),ut.stroke()}function $t(ut,e,a,h,_,lt=5,ft=Gt.White,mt=null){let kt;if(typeof lt=="number")kt={tl:lt,tr:lt,br:lt,bl:lt};else{const Rt={tl:0,tr:0,br:0,bl:0};for(const Mt in Rt)if(Rt.hasOwnProperty(Mt)){const Nt=Mt;kt[Nt]=lt[Nt]||Rt[Nt]}}ut.beginPath(),ut.moveTo(e+kt.tl,a),ut.lineTo(e+h-kt.tr,a),ut.quadraticCurveTo(e+h,a,e+h,a+kt.tr),ut.lineTo(e+h,a+_-kt.br),ut.quadraticCurveTo(e+h,a+_,e+h-kt.br,a+_),ut.lineTo(e+kt.bl,a+_),ut.quadraticCurveTo(e,a+_,e,a+_-kt.bl),ut.lineTo(e,a+kt.tl),ut.quadraticCurveTo(e,a,e+kt.tl,a),ut.closePath(),mt&&(ut.fillStyle=mt.toString(),ut.fill()),ft&&(ut.strokeStyle=ft.toString(),ut.stroke())}function zt(ut,e,a,h,_=Gt.White,lt=null){ut.beginPath(),ut.arc(e,a,h,0,Math.PI*2),ut.closePath(),lt&&(ut.fillStyle=lt.toString(),ut.fill()),_&&(ut.strokeStyle=_.toString(),ut.stroke())}const rn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdQAAAB2CAYAAABxhGI9AAAACXBIWXMAAAsSAAALEgHS3X78AAAKnUlEQVR42u3dP2wjSx0H8N8hJIonIRmJjsq0SBR+BQ1dcqKhe0lD77SvSwpKkJKGPulpktfRIMUdEqKIqV57rpAokM4dbSiyq7ONPTP7x39ifz7SFbnEnp3xer47O7uzH15fXwMA6OYHmgAABCoACFQAEKgAgEAFAIEKAAIVAAQqACBQAUCgAoBABQCBCgAIVAAQqAAgUAFAoAIAAhUABCoACFQAEKgAgECFLbmOiNeFf2PbAyz68Pr6qhUgbRwR92v+/zwiJrYHMEKFMmcN///UtgcQqFBk1PD/97U9Qx8VCFSgu4EmAIEKAAIVAAQqACBQ4Z25jojP8eX+0WtNAgIVaOY+Im5j+eKh24h41jQgUIEyZ7F5NaPU7wCBCiwYd/w9cOB+qAlgJ3KLLow0EV198803RWvJfvfddx+0lhEqHKu5JgAjVCBvlhmFzjQRXUekHz9+TP79y8uLRjNChXfvoePvAYEKxNtj1e42/O5JoIJABcrdRMRVLM+X3kTEpaaB988cKuzWg9EobTWdMx0Oly8uN4dqhAoARqgnaN3arHfqu7OyH8ItKLVB/P+CEfMTHyGPY3npx1m8zWGDEeoBfUk/xdti57dr/r1Wv2+6EPow3tZ5rRdS72s1neuF97xvWd+XTH0/V+UMttDWqbI/r2nrxfp+jv2uSjSO7S+OXy/A/3lN+9xX5T5HxEUPZZ0tfB71+w57eJ/HFu+z+jkv1u92YX9fbI/HhX3JA9rp5MPr66tWaG9UfUGbrHIzi7cLUyYFf/tpTady03EEeL8mUJ6i7MKYNvWNqr4Pe2jradXO60LrvPAz2PQ5RPX684ah8dxD+2zantnCgVipSVV+m/tgB9W2DDq2Sx/vM95wcHhZhWVJm8yrv58cSgfTdc70+++/X/r522+/tUKSEepBqo+om4ZLPerMjUwuNnQCtx1GWJtee1FwdD5uWd86xLs8UaVt2aNEO1/saZ/Z5rYMW4zq6v34rGV9Bg3q2eZ9SkeNm9qwyUh30OPIHYFKx5FG03C7znSOqYBq+qW/zpQ3anH037TNHluG6f0WPsPhHvab4QFty7ogOeuxDYcNy2/zu2214WNYWxmBurNO8bGn97pNBOO8xy/9uCorZZ4I2r4C7aJgO7ZV9iE49Dm6NvOWx+pWE9CUq3zbdTp9doz38TbXtzqH9RT5CyWe422OaZoZGeZCabrhPQY9HjwsjpTvCg4YtlE2+Ta/j2bzn8fqrDqgm+6yUHOmAvWUjAtGhbNYvsBknDnqH1Qhc7VmxHgeb/NbudA5j/UXlYwif2p6luhAc9teu1npiHKnDs8if6tCm7JLX3NKpgttXe9ruc9mHMd7a83iwdxF5vt8tutARaCeklRnNK9C8WnNF7geJQ4T4XG3JhSnVdilQrG+yOnrlVHfsEGYzhNBn7Lu6tS7+HJafJQ4EMiNlNqWXZ9WPvVgnVYHG5M1ByDXkT6leX2EgTqJtyt45yv7S2qO3sEZjZhDLXeR+YKdJ0Zdk8QocvH9N732KrNtq+FZ/zzIHABcJrYpd+Xv14lOd5ap76SgrduW/VTQ1qcQpqnbgu4ifZvUMNpd9XuoZmvCtPaQ2Y/BCHVLgbrJTeRPDdVf6pfMKDU2fOkHmVFFfXr3MsouLsnNvV5kRoe5+s431PeuoKPqWnaurY/ZPBEeqwceN4l96iwO6H7Mjq4y7VGPVNe10VaZMzVCPVWpI/Z6FZbcv5fMqGCU+dLfFGzj58jP8+bCdJCo7yzKTwdOF0bu9Ug7V4c+yz7FJfYeGoysUss0HssIdVZwYLDujMqlESoCdTtGsZtbHnJBeNdDSJSs0jTKdMJN1HNX54Wv7bvsU9NkVJVa13dX+/wuArV0X/l5RHyo/lnfF4G6p6DrS0kHdtXhy35TGErDPYZUn2WfWqDOo/lVqdMD2O/hKJhD7S/odukymq9s02QN4EEPR/zbaOumZc+r15zK1Zqznl9jsfiemTM1QmV3HUuTkedlg9HIQzRbUD93dfC+2tpj2fIHEH2+RqCCQH13gZq7hWXTNpVu19OB1fc9nQ0AKOKUb5lU0P1kDyOneoWk0lOZ9cIP0x7qu8+2BhCoR2wYu1+e7DmaXzBSsu5vaX1ne2zrpmUPTmxf7PM1Dm4y/vC7ny7Nif7+z/9ZmtM0Z3panPLtPmra9f16bcK0Dpbnwk43Vd/RHtu6zfNQTy1QBy3aqG2g9nVmxml+BOoJyT3NpWmn9xhfFnu4bvDa+44BXhqqfdf3uUF9+yz77AT31Yue2mjecYQ62NLfgkA9ghHqLNEhNem4H1c6vdyDxhf/bpz5m4coW/c39wi6VH2bPtHlcaV9cvXts+zxCe6rTeqc2ndL7uGd93QwM9bFcAzMoZZ7SgTBbWx+asui61h/iq1+RmjqdbnQXQ3T1DNQ63V/U9ucqm/pMzPb1rePsk/1iTOjgvatR4W3Lc8ULB78pELyrnAfeTcj1NU509/86mfJ33/8+Mf00a05UyPUEw7UVCeWG/WNEiExyHRMt5ltW30izUPk18ytt7lNfc8i//DvtvXto+ySA5BjljsLUF8lPkqMPEtW1JomDsiGBZ9Byb4NAvUITSN9GuwsIj6t6UTOqk7jJREkmzqli8xIs96udSO20sX0H1vW92IL9e1a9rgqVyf91gbPsTy9UD9n9lOkT8k+RfkFR5PMNqxOcdSf32PBvg3vilO+zdxE+okx9Wm0ph36XYsRZCpMF993GOk5qvqB3Dct6jvssb67KvuUNJ3frw92bhr8/STSF0JdRPMLpUCgnsgo9S76PZ246ZFk1wWvK5m3vVoYvW1Sz7nN91jfXbQ1ZQc7TW6HeaoOalypG/8/p/rP1aNAc6ZHzSnfdqPUPhdy2PQw6Nz9gSVhuhiqueUHR3uu7y7K3rdDX4u46ZrPbUa0IFBZ0seKQ3XQTRt2vm3W/a2DbNKys++rvm3ep6+y1x2UdP3bWU9lzra47U1GmlctX/sQ23t+aOlByLTh/4NAPaCRxtcdO5HLSJ/6vNtCwGx67VPmPbvWd1q9frKHtp4kAqRJ2HR9j762JfX3bZ//elPtj13PPDx1+D5tqk/Xi6NO8SHz7MmH19dXrdBNfVFP6T2PT1UHNit87/t4m5+aRH+nQBdvqyhZDKJLfZs8h7XPsqdV2ZOV+tanKB8aln0dyxdAXbV4j4gvt4oMOrbP6vbU73NW7TMlbdTnPrWpfqXfh9HKZ9vke7KuTeZRNtXRSe6+1FV//ce/ln5eXfsXgcqXzr6+9261M3moOoa7E6nvTZTfy7iNsmfb7kjfgXGsvxe0vihsEts9HTquPpt1q1vtahu2TqAiUAEEKj0zhwoARqgAu/OnX/442WH+9xc/Wvr58re/Tr7f41/+ZsRqhAoACFQAEKgAcHjMoQJskJsz/eqrr5Z+vvr7v5fmQFevAl5lztQIFQAQqAAgUAHgIJlDBdhgdQ41N2eKESoAIFABQKACwFEwhwoARqgAIFABQKACAAIVAAQqAAhUABCoAIBABQCBCgACFQAEKgAgUAFAoAKAQAUAgQoACFQAEKgAIFABQKACAAIVAAQqAAhUABCoAIBABQCBCgACFQAQqAAgUAFAoAKAQAUAlvwPcFDns1DsH4sAAAAASUVORK5CYII=";var _n=__webpack_require__(8851);class nr extends Fs{get _image(){return this._imageElement||(this._imageElement=new Image,this._imageElement.onload=()=>this._imageLoaded.resolve(),this._imageElement.src=this.logo),this._imageElement}get playButtonRootElement(){return this._playButtonRootElement}get playButtonElement(){return this._playButtonElement}get _playButton(){const e=document.getElementById("excalibur-play-root");return e&&(this._playButtonRootElement=e),this._playButtonRootElement||(this._playButtonRootElement=document.createElement("div"),this._playButtonRootElement.id="excalibur-play-root",this._playButtonRootElement.style.position="absolute",document.body.appendChild(this._playButtonRootElement)),this._styleBlock||(this._styleBlock=document.createElement("style"),this._styleBlock.textContent=this._playButtonStyles,document.head.appendChild(this._styleBlock)),this._playButtonElement||(this._playButtonElement=this.startButtonFactory(),this._playButtonRootElement.appendChild(this._playButtonElement)),this._playButtonElement}constructor(e){const a=Array.isArray(e)?{loadables:e}:e;super(a),this._logger=Vt.getInstance(),this._originalOptions={loadables:[]},this.events=new dt,this._playButtonShown=!1,this.logo=rn,this.logoWidth=468,this.logoHeight=118,this.loadingBarColor=Gt.White,this.backgroundColor="#176BAA",this._imageLoaded=new pt,this.suppressPlayButton=!1,this._playButtonStyles=_n.A.toString(),this.playButtonText="Play game",this.startButtonFactory=()=>{let h=document.getElementById("excalibur-play");return h||(h=document.createElement("button")),h.id="excalibur-play",h.textContent=this.playButtonText,h.style.display="none",h},this._configuredPixelRatio=null,this._originalOptions={...nr._DEFAULT_LOADER_OPTIONS,...a}}onInitialize(e){this.engine=e,this.screen=e.screen,this.canvas.width=this.engine.canvas.width,this.canvas.height=this.engine.canvas.height,this.screen.events.on("resize",()=>{this.canvas.width=this.engine.canvas.width,this.canvas.height=this.engine.canvas.height})}async showPlayButton(){var e,a;if(this.suppressPlayButton)this.hidePlayButton(),await bn(500,(e=this.engine)===null||e===void 0?void 0:e.clock);else{const h=()=>{try{this._positionPlayButton()}catch{}};return!((a=this.engine)===null||a===void 0)&&a.browser&&this.engine.browser.window.on("resize",h),this._playButtonShown=!0,this._playButton.style.display="block",document.body.addEventListener("keyup",lt=>{lt.key==="Enter"&&this._playButton.click()}),this._positionPlayButton(),await new Promise(lt=>{const ft=mt=>{var kt;if(mt.stopPropagation(),this.hidePlayButton(),!((kt=this.engine)===null||kt===void 0)&&kt.browser&&this.engine.browser.window.off("resize",h),this._originalOptions.fullscreenAfterLoad)try{this._logger.info("requesting fullscreen"),this._originalOptions.fullscreenContainer instanceof HTMLElement?this._originalOptions.fullscreenContainer.requestFullscreen():this.engine.screen.goFullScreen(this._originalOptions.fullscreenContainer)}catch(Rt){this._logger.error("could not go fullscreen",Rt)}lt()};this._playButton.addEventListener("click",ft),this._playButton.addEventListener("touchend",ft),this._playButton.addEventListener("pointerup",ft)})}}hidePlayButton(){this._playButtonShown=!1,this._playButton.style.display="none"}dispose(){this._playButtonRootElement.parentElement&&(this._playButtonRootElement.removeChild(this._playButtonElement),document.body.removeChild(this._playButtonRootElement),document.head.removeChild(this._styleBlock),this._playButtonRootElement=null,this._playButtonElement=null,this._styleBlock=null)}async onUserAction(){var e;await bn(200,(e=this.engine)===null||e===void 0?void 0:e.clock),this.canvas.flagDirty(),await this.showPlayButton()}async onBeforeLoad(){const e=this._image;await this._imageLoaded.promise,await e?.decode()}async onAfterLoad(){this.screen.pixelRatioOverride=this._configuredPixelRatio,this.screen.popResolutionAndViewport(),this.screen.applyResolutionAndViewport(),this.dispose()}_positionPlayButton(){if(this.engine){const{x:e,y:a,width:h,height:_}=this.engine.canvas.getBoundingClientRect();if(this._playButtonRootElement){const lt=this._playButton.clientWidth,ft=this._playButton.clientHeight;this.playButtonPosition?(this._playButtonRootElement.style.left=`${this.playButtonPosition.x}px`,this._playButtonRootElement.style.top=`${this.playButtonPosition.y}px`):(this._playButtonRootElement.style.left=`${e+h/2-lt/2}px`,this._playButtonRootElement.style.top=`${a+_/2-ft/2+100}px`)}}}onDraw(e){const a=this.engine.canvasHeight/this.engine.pixelRatio,h=this.engine.canvasWidth/this.engine.pixelRatio;this._positionPlayButton(),e.fillStyle=this.backgroundColor,e.fillRect(0,0,h,a);let _=a/2;const lt=Math.min(this.logoWidth,h*.75);let ft=h/2-lt/2;this.logoPosition&&(ft=this.logoPosition.x,_=this.logoPosition.y);const mt=Math.floor(lt*(this.logoHeight/this.logoWidth)),kt=this.engine.getAntialiasing();if(this.engine.setAntialiasing(!0),this.logoPosition?e.drawImage(this._image,0,0,this.logoWidth,this.logoHeight,ft,_,lt,mt):e.drawImage(this._image,0,0,this.logoWidth,this.logoHeight,ft,_-mt-20,lt,mt),!this.suppressPlayButton&&this._playButtonShown){this.engine.setAntialiasing(kt);return}let Rt=ft,Mt=_;this.loadingBarPosition&&(Rt=this.loadingBarPosition.x,Mt=this.loadingBarPosition.y),e.lineWidth=2,$t(e,Rt,Mt,lt,20,10,this.loadingBarColor);const Nt=lt*this.progress,en=5,an=Nt-en*2,un=20-en*2;$t(e,Rt+en,Mt+en,an>10?an:10,un,5,null,this.loadingBarColor),this.engine.setAntialiasing(kt)}}nr._DEFAULT_LOADER_OPTIONS={loadables:[],fullscreenAfterLoad:!1,fullscreenContainer:void 0};const jn={webgl:"WebGL",webaudio:"WebAudio",gamepadapi:"Gamepad API"};class mr{constructor(){this._features=null,this.failedTests=[],this._criticalTests={canvasSupport:function(){const e=document.createElement("canvas");return!!(e.getContext&&e.getContext("2d"))},arrayBufferSupport:function(){const e=new XMLHttpRequest;e.open("GET","/");try{e.responseType="arraybuffer"}catch{return!1}return e.responseType==="arraybuffer"},dataUrlSupport:function(){return document.createElement("canvas").toDataURL("image/png").indexOf("data:image/png")===0},objectUrlSupport:function(){return"URL"in window&&"revokeObjectURL"in URL&&"createObjectURL"in URL},rgbaSupport:function(){const e=document.createElement("a").style;return e.cssText="background-color:rgba(150,255,150,.5)",(""+e.backgroundColor).indexOf("rgba")>-1}},this._warningTest={webAudioSupport:function(){return!!(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext||window.oAudioContext)},webglSupport:function(){const e=document.createElement("canvas");return!!(e.getContext&&e.getContext("webgl"))}},this._features=this._loadBrowserFeatures()}getBrowserFeatures(){return this._features===null&&(this._features=this._loadBrowserFeatures()),this._features}logBrowserFeatures(){let e=`%cSUPPORTED BROWSER FEATURES
==========================%c
`;const a=["font-weight: bold; color: navy","font-weight: normal; color: inherit"],h=this.getBrowserFeatures();for(const _ of Object.keys(jn))h[_]?(e+="(%c✓%c)",a.push("font-weight: bold; color: green"),a.push("font-weight: normal; color: inherit")):(e+="(%c✗%c)",a.push("font-weight: bold; color: red"),a.push("font-weight: normal; color: inherit")),e+=" "+jn[_]+`
`;a.unshift(e),console.log.apply(console,a)}_loadBrowserFeatures(){return{canvas:this._criticalTests.canvasSupport(),arraybuffer:this._criticalTests.arrayBufferSupport(),dataurl:this._criticalTests.dataUrlSupport(),objecturl:this._criticalTests.objectUrlSupport(),rgba:this._criticalTests.rgbaSupport(),webaudio:this._warningTest.webAudioSupport(),webgl:this._warningTest.webglSupport(),gamepadapi:!!navigator.getGamepads}}test(){let e=!1;for(const a in this._criticalTests)this._criticalTests[a].call(this)||(this.failedTests.push(a),Vt.getInstance().error("Critical browser feature missing, Excalibur requires:",a),e=!0);if(e)return!1;for(const a in this._warningTest)this._warningTest[a]()||Vt.getInstance().warn("Warning browser feature missing, Excalibur will have reduced performance:",a);return!0}}var On;(function(ut){ut.PreventCollision="PreventCollision",ut.Passive="Passive",ut.Active="Active",ut.Fixed="Fixed"})(On||(On={}));var vr;(function(ut){ut.World="world",ut.Screen="screen"})(vr||(vr={}));class Jr extends At{constructor(e){super(0,0),this._getX=e.getX,this._getY=e.getY,this._setX=e.setX,this._setY=e.setY}get x(){return this._x=this._getX()}set x(e){this._setX(e),this._x=e}get y(){return this._y=this._getY()}set y(e){this._setY(e),this._y=e}}class io extends At{constructor(e,a){super(e.x,e.y),this.original=e,this.change=a}get x(){return this._x=this.original.x}set x(e){this.change(e,this._y),this._x=this.original.x=e}get y(){return this._y=this.original.y}set y(e){this.change(this._x,e),this._y=this.original.y=e}}class so{constructor(){this._parent=null,this._children=[],this._pos=It(0,0),this._rotation=0,this._scale=It(1,1),this._isDirty=!1,this._isInverseDirty=!1,this._matrix=yn.identity(),this._inverse=yn.identity()}get parent(){return this._parent}set parent(e){if(this._parent){const a=this._parent._children.indexOf(this);a>-1&&this._parent._children.splice(a,1)}this._parent=e,this._parent&&this._parent._children.push(this),this.flagDirty()}get children(){return this._children}set pos(e){e.equals(this._pos)||(this._pos.x=e.x,this._pos.y=e.y,this.flagDirty())}get pos(){return new io(this._pos,(e,a)=>{(e!==this._pos.x||a!==this._pos.y)&&this.flagDirty()})}set globalPos(e){let a=e.clone();this.parent&&(a=this.parent.inverse.multiply(e)),a.equals(this._pos)||(this._pos=a,this.flagDirty())}get globalPos(){return new Jr({getX:()=>this.matrix.data[4],getY:()=>this.matrix.data[5],setX:e=>{if(this.parent){const{x:a}=this.parent.inverse.multiply(It(e,this.pos.y));this.pos.x=a}else this.pos.x=e;e!==this.matrix.data[4]&&this.flagDirty()},setY:e=>{if(this.parent){const{y:a}=this.parent.inverse.multiply(It(this.pos.x,e));this.pos.y=a}else this.pos.y=e;e!==this.matrix.data[5]&&this.flagDirty()}})}set rotation(e){const a=_t(e);a!==this._rotation&&this.flagDirty(),this._rotation=a}get rotation(){return this._rotation}set globalRotation(e){let a=0;this.parent&&(a=this.parent.globalRotation);const h=_t(e+a);h!==this._rotation&&this.flagDirty(),this._rotation=h}get globalRotation(){return this.parent?this.matrix.getRotation():this.rotation}set scale(e){(e.x!==this._scale.x||e.y!==this._scale.y)&&(this._scale.x=e.x,this._scale.y=e.y,this.flagDirty())}get scale(){return new io(this._scale,(e,a)=>{(e!==this._scale.x||a!==this._scale.y)&&this.flagDirty()})}set globalScale(e){let a=It(1,1);this.parent&&(a=this.parent.globalScale),this.scale=e.scale(It(1/a.x,1/a.y))}get globalScale(){return new Jr({getX:()=>this.parent?this.matrix.getScaleX():this.scale.x,getY:()=>this.parent?this.matrix.getScaleY():this.scale.y,setX:e=>{if(this.parent){const a=this.parent.globalScale.x;this.scale.x=e/a}else this.scale.x=e},setY:e=>{if(this.parent){const a=this.parent.globalScale.y;this.scale.y=e/a}else this.scale.y=e}})}get matrix(){return this._isDirty&&(this.parent===null?this._matrix=this._calculateMatrix():this._matrix=this.parent.matrix.multiply(this._calculateMatrix()),this._isDirty=!1),this._matrix}get inverse(){return this._isInverseDirty&&(this._inverse=this.matrix.inverse(),this._isInverseDirty=!1),this._inverse}_calculateMatrix(){return yn.identity().translate(this.pos.x,this.pos.y).rotate(this.rotation).scale(this.scale.x,this.scale.y)}flagDirty(){this._isDirty=!0,this._isInverseDirty=!0;for(let e=0;e<this._children.length;e++)this._children[e].flagDirty()}apply(e){return this.matrix.multiply(e)}applyInverse(e){return this.inverse.multiply(e)}setTransform(e,a,h){this._pos.x=e.x,this._pos.y=e.y,this._rotation=_t(a),this._scale.x=h.x,this._scale.y=h.y,this.flagDirty()}clone(e){const a=e??new so;return this._pos.clone(a._pos),a._rotation=this._rotation,this._scale.clone(a._scale),a.flagDirty(),a}}function To(ut){return!!ut&&!!ut.prototype&&!!ut.prototype.constructor}function to(ut){return!!ut?.clone}class oo{constructor(){this.owner=void 0}clone(){const e=new this.constructor;for(const a in this)if(this.hasOwnProperty(a)){const h=this[a];to(h)&&a!=="owner"&&a!=="clone"?e[a]=h.clone():e[a]=h}return e}}class lo{constructor(){this.observers=[],this.subscriptions=[]}register(e){this.observers.push(e)}subscribe(e){this.subscriptions.push(e)}unregister(e){const a=this.observers.indexOf(e);a!==-1&&this.observers.splice(a,1)}unsubscribe(e){const a=this.subscriptions.indexOf(e);a!==-1&&this.subscriptions.splice(a,1)}notifyAll(e){const a=this.observers.length;for(let _=0;_<a;_++)this.observers[_].notify(e);const h=this.subscriptions.length;for(let _=0;_<h;_++)this.subscriptions[_](e)}clear(){this.observers.length=0,this.subscriptions.length=0}}class hr extends oo{constructor(){super(...arguments),this._logger=Vt.getInstance(),this._parentComponent=null,this._transform=new so,this._addChildTransform=e=>{const a=e.get(hr);a&&(a._transform.parent=this._transform,a._parentComponent=this)},this.zIndexChanged$=new lo,this._z=0,this._coordPlane=vr.World}get(){return this._transform}onAdd(e){for(const a of e.children)this._addChildTransform(a);e.childrenAdded$.subscribe(a=>this._addChildTransform(a)),e.childrenRemoved$.subscribe(a=>{const h=a.get(hr);h&&(h._transform.parent=null,h._parentComponent=null)})}onRemove(e){this._transform.parent=null,this._parentComponent=null}get z(){return this._z}set z(e){const a=this._z;this._z=e,a!==e&&this.zIndexChanged$.notifyAll(e)}get coordPlane(){return this._parentComponent?this._parentComponent.coordPlane:this._coordPlane}set coordPlane(e){var a;this._parentComponent?this._logger.warn(`Cannot set coordinate plane on child entity ${(a=this.owner)===null||a===void 0?void 0:a.name}, children inherit their coordinate plane from their parents.`):this._coordPlane=e}get pos(){return this._transform.pos}set pos(e){this._transform.pos=e}get globalPos(){return this._transform.globalPos}set globalPos(e){this._transform.globalPos=e}get rotation(){return this._transform.rotation}set rotation(e){this._transform.rotation=e}get globalRotation(){return this._transform.globalRotation}set globalRotation(e){this._transform.globalRotation=e}get scale(){return this._transform.scale}set scale(e){this._transform.scale=e}get globalScale(){return this._transform.globalScale}set globalScale(e){this._transform.globalScale=e}applyInverse(e){return this._transform.applyInverse(e)}apply(e){return this._transform.apply(e)}clone(){const e=new hr;return e._transform=this._transform.clone(),e._z=this._z,e}}class uo extends oo{constructor(){super(...arguments),this.vel=At.Zero,this.acc=At.Zero,this.scaleFactor=At.Zero,this.angularVelocity=0,this.torque=0,this.inertia=1}}class Go{static create(e,a){if(this._CURRENT_GROUP>this._MAX_GROUPS)throw new Error(`Cannot have more than ${this._MAX_GROUPS} collision groups`);if(this._GROUPS.get(e)){const _=this._GROUPS.get(e);if(_.mask===a)return _;throw new Error(`Collision group ${e} already exists with a different mask!`)}const h=new hs(e,this._CURRENT_BIT,a!==void 0?a:~this._CURRENT_BIT);return this._CURRENT_BIT=this._CURRENT_BIT<<1|0,this._CURRENT_GROUP++,this._GROUPS.set(e,h),h}static get groups(){return Array.from(this._GROUPS.values())}static groupByName(e){return this._GROUPS.get(e)}static reset(){this._GROUPS=new Map,this._CURRENT_BIT=this._STARTING_BIT,this._CURRENT_GROUP=1}}Go._STARTING_BIT=1,Go._MAX_GROUPS=32,Go._CURRENT_GROUP=1,Go._CURRENT_BIT=Go._STARTING_BIT,Go._GROUPS=new Map;class hs{constructor(e,a,h){this._name=e,this._category=a,this._mask=h}get name(){return this._name}get category(){return this._category}get mask(){return this._mask}canCollide(e){const a=this.category&e.mask,h=this.mask&e.category;return a!==0&&h!==0}invert(){const e=Go.create("~("+this.name+")",~this.mask|0);return e._category=~this.category,e}static combine(e){const a=e.map(lt=>lt.name).join("+"),_=~e.reduce((lt,ft)=>ft.category|lt,0);return Go.create(a,_)}static collidesWith(e){const a=`collidesWith(${e.map(_=>_.name).join("+")})`,h=e.reduce((_,lt)=>lt.category|_,0);return Go.create(a,h)}toString(){return`
category: ${this.category.toString(2).padStart(32,"0")}
mask:     ${(this.mask>>>0).toString(2).padStart(32,"0")}
    `}}hs.All=new hs("Collide with all groups",-1,-1);class bo{constructor(e,a){this.colliderA=e,this.colliderB=a,this.id=null,this.id=bo.calculatePairHash(e.id,a.id)}static canCollide(e,a){var h,_;const lt=(h=e?.owner)===null||h===void 0?void 0:h.get(Ur),ft=(_=a?.owner)===null||_===void 0?void 0:_.get(Ur);return!(e.id===a.id||e.owner&&a.owner&&e.owner.id===a.owner.id||e.localBounds.hasZeroDimensions()||a.localBounds.hasZeroDimensions()||!lt||!ft||!lt.group.canCollide(ft.group)||lt.collisionType===On.Fixed&&ft.collisionType===On.Fixed||ft.collisionType===On.PreventCollision||lt.collisionType===On.PreventCollision||!lt.active||!ft.active)}get canCollide(){const e=this.colliderA,a=this.colliderB;return bo.canCollide(e,a)}collide(){return this.colliderA.collide(this.colliderB)}hasCollider(e){return e===this.colliderA||e===this.colliderB}static calculatePairHash(e,a){return e.value<a.value?`#${e.value}+${a.value}`:`#${a.value}+${e.value}`}}class zo{constructor(e,a){this.min=e,this.max=a}overlaps(e){return this.max>e.min&&e.max>this.min}getOverlap(e){return this.overlaps(e)?this.max>e.max?e.max-this.min:this.max-e.min:0}}class Vo{constructor(e){this.parent=e,this.parent=e||null,this.data=null,this.bounds=new Wt,this.left=null,this.right=null,this.height=0}isLeaf(){return!this.left&&!this.right}}class ds{constructor(e,a=new Wt(-Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)){this._config=e,this.worldBounds=a,this.root=null,this.nodes={}}_insert(e){if(this.root===null){this.root=e,this.root.parent=null;return}const a=e.bounds;let h=this.root;for(;!h.isLeaf();){const mt=h.left,kt=h.right,Rt=h.bounds.getPerimeter(),Nt=h.bounds.combine(a).getPerimeter(),en=2*Nt,an=2*(Nt-Rt);let un=0;const wn=a.combine(mt.bounds);let Bn,fn;mt.isLeaf()?un=wn.getPerimeter()+an:(fn=mt.bounds.getPerimeter(),Bn=wn.getPerimeter(),un=Bn-fn+an);let pn=0;const zn=a.combine(kt.bounds);if(kt.isLeaf()?pn=zn.getPerimeter()+an:(fn=kt.bounds.getPerimeter(),Bn=zn.getPerimeter(),pn=Bn-fn+an),en<un&&en<pn)break;un<pn?h=mt:h=kt}const _=h.parent,lt=new Vo(_);lt.bounds=a.combine(h.bounds),lt.height=h.height+1,_!==null?(_.left===h?_.left=lt:_.right=lt,lt.left=h,lt.right=e,h.parent=lt,e.parent=lt):(lt.left=h,lt.right=e,h.parent=lt,e.parent=lt,this.root=lt);let ft=e.parent;for(;ft;){if(ft=this._balance(ft),!ft.left)throw new Error("Parent of current leaf cannot have a null left child"+ft);if(!ft.right)throw new Error("Parent of current leaf cannot have a null right child"+ft);ft.height=1+Math.max(ft.left.height,ft.right.height),ft.bounds=ft.left.bounds.combine(ft.right.bounds),ft=ft.parent}}_remove(e){if(e===this.root){this.root=null;return}const a=e.parent,h=a.parent;let _;if(a.left===e?_=a.right:_=a.left,h){h.left===a?h.left=_:h.right=_,_.parent=h;let lt=h;for(;lt;)lt=this._balance(lt),lt.bounds=lt.left.bounds.combine(lt.right.bounds),lt.height=1+Math.max(lt.left.height,lt.right.height),lt=lt.parent}else this.root=_,_.parent=null}trackCollider(e){const a=new Vo;a.data=e,a.bounds=e.bounds,a.bounds.left-=2,a.bounds.top-=2,a.bounds.right+=2,a.bounds.bottom+=2,this.nodes[e.id.value]=a,this._insert(a)}updateCollider(e){var a;const h=this.nodes[e.id.value];if(!h)return!1;const _=e.bounds;if(!this.worldBounds.contains(_))return Vt.getInstance().warn("Collider with id "+e.id.value+" is outside the world bounds and will no longer be tracked for physics"),this.untrackCollider(e),!1;if(h.bounds.contains(_))return!1;if(this._remove(h),_.left-=this._config.boundsPadding,_.top-=this._config.boundsPadding,_.right+=this._config.boundsPadding,_.bottom+=this._config.boundsPadding,e.owner){const lt=(a=e.owner)===null||a===void 0?void 0:a.get(Ur);if(lt){const ft=lt.vel.x*32/1e3*this._config.velocityMultiplier,mt=lt.vel.y*32/1e3*this._config.velocityMultiplier;ft<0?_.left+=ft:_.right+=ft,mt<0?_.top+=mt:_.bottom+=mt}}return h.bounds=_,this._insert(h),!0}untrackCollider(e){const a=this.nodes[e.id.value];a&&(this._remove(a),this.nodes[e.id.value]=null,delete this.nodes[e.id.value])}_balance(e){if(e===null)throw new Error("Cannot balance at null node");if(e.isLeaf()||e.height<2)return e;const a=e.left,h=e.right,_=e,lt=a,ft=h,mt=a.left,kt=a.right,Rt=h.left,Mt=h.right,Nt=ft.height-lt.height;if(Nt>1)return ft.left=_,ft.parent=_.parent,_.parent=ft,ft.parent?ft.parent.left===_?ft.parent.left=ft:ft.parent.right=ft:this.root=ft,Rt.height>Mt.height?(ft.right=Rt,_.right=Mt,Mt.parent=_,_.bounds=lt.bounds.combine(Mt.bounds),ft.bounds=_.bounds.combine(Rt.bounds),_.height=1+Math.max(lt.height,Mt.height),ft.height=1+Math.max(_.height,Rt.height)):(ft.right=Mt,_.right=Rt,Rt.parent=_,_.bounds=lt.bounds.combine(Rt.bounds),ft.bounds=_.bounds.combine(Mt.bounds),_.height=1+Math.max(lt.height,Rt.height),ft.height=1+Math.max(_.height,Mt.height)),ft;if(Nt<-1){if(lt.left=_,lt.parent=_.parent,_.parent=lt,lt.parent)if(lt.parent.left===_)lt.parent.left=lt;else{if(lt.parent.right!==_)throw"Error rotating Dynamic Tree";lt.parent.right=lt}else this.root=lt;return mt.height>kt.height?(lt.right=mt,_.left=kt,kt.parent=_,_.bounds=ft.bounds.combine(kt.bounds),lt.bounds=_.bounds.combine(mt.bounds),_.height=1+Math.max(ft.height,kt.height),lt.height=1+Math.max(_.height,mt.height)):(lt.right=kt,_.left=mt,mt.parent=_,_.bounds=ft.bounds.combine(mt.bounds),lt.bounds=_.bounds.combine(kt.bounds),_.height=1+Math.max(ft.height,mt.height),lt.height=1+Math.max(_.height,kt.height)),lt}return e}getHeight(){return this.root===null?0:this.root.height}query(e,a){const h=e.bounds,_=lt=>{if(lt&&lt.bounds.overlaps(h))if(lt.isLeaf()&&lt.data!==e){if(a.call(e,lt.data))return!0}else return _(lt.left)||_(lt.right);return!1};_(this.root)}rayCastQuery(e,a=1/0,h){const _=lt=>{if(lt&&lt.bounds.rayCast(e,a))if(lt.isLeaf()){if(h.call(e,lt.data))return!0}else return _(lt.left)||_(lt.right);return!1};_(this.root)}getNodes(){const e=a=>a?[a].concat(e(a.left),e(a.right)):[];return e(this.root)}debug(e){const a=h=>{h&&(h.isLeaf()?h.bounds.draw(e,Gt.Green):h.bounds.draw(e,Gt.White),h.left&&a(h.left),h.right&&a(h.right))};a(this.root)}}class Ho{constructor(e,a){this.pos=e,this.dir=a.normalize()}intersect(e){const a=e.begin.sub(this.pos);if(this.dir.cross(e.getSlope())===0&&a.cross(this.dir)!==0)return-1;const h=this.dir.cross(e.getSlope());if(h===0)return-1;const _=a.cross(e.getSlope())/h;if(_>=0){const lt=a.cross(this.dir)/h/e.getLength();if(lt>=0&&lt<=1)return _}return-1}intersectPoint(e){const a=this.intersect(e);return a<0?null:this.getPoint(a)}getPoint(e){return this.pos.add(this.dir.scale(e))}}class Bs{constructor(e){this._config=e,this._pairs=new Set,this._collisionPairCache=[],this._colliders=[],this._dynamicCollisionTree=new ds(e.dynamicTree)}getColliders(){return this._colliders}rayCast(e,a){var h,_,lt;const ft=[],mt=(h=a?.maxDistance)!==null&&h!==void 0?h:1/0,kt=a?.collisionGroup,Rt=kt?kt.category:(_=a?.collisionMask)!==null&&_!==void 0?_:hs.All.category,Mt=(lt=a?.searchAllColliders)!==null&&lt!==void 0?lt:!1;return this._dynamicCollisionTree.rayCastQuery(e,mt,Nt=>{const an=Nt.owner.get(Ur);if(a?.ignoreCollisionGroupAll&&an.group===hs.All)return!1;const un=(Rt&an.group.category)!==0;if(an?.group&&!un)return!1;const wn=Nt.rayCast(e,mt);if(wn){if(a?.filter){if(a.filter(wn)&&(ft.push(wn),!Mt))return!0}else if(ft.push(wn),!Mt)return!0}return!1}),ft}track(e){if(!e){Vt.getInstance().warn("Cannot track null collider");return}if(e instanceof So){const a=e.getColliders();for(const h of a)h.owner=e.owner,this._colliders.push(h),this._dynamicCollisionTree.trackCollider(h)}else this._colliders.push(e),this._dynamicCollisionTree.trackCollider(e)}untrack(e){if(!e){Vt.getInstance().warn("Cannot untrack a null collider");return}if(e instanceof So){const a=e.getColliders();for(const h of a){const _=this._colliders.indexOf(h);_!==-1&&this._colliders.splice(_,1),this._dynamicCollisionTree.untrackCollider(h)}}else{const a=this._colliders.indexOf(e);a!==-1&&this._colliders.splice(a,1),this._dynamicCollisionTree.untrackCollider(e)}}_pairExists(e,a){const h=bo.calculatePairHash(e.id,a.id);return this._pairs.has(h)}broadphase(e,a,h){const _=a/1e3,lt=e.filter(mt=>{var kt,Rt;const Mt=(kt=mt.owner)===null||kt===void 0?void 0:kt.get(Ur);return((Rt=mt.owner)===null||Rt===void 0?void 0:Rt.active)&&Mt.collisionType!==On.PreventCollision});this._collisionPairCache=[],this._pairs.clear();let ft;for(let mt=0,kt=lt.length;mt<kt;mt++)ft=lt[mt],this._dynamicCollisionTree.query(ft,Rt=>{if(!this._pairExists(ft,Rt)&&bo.canCollide(ft,Rt)){const Mt=new bo(ft,Rt);this._pairs.add(Mt.id),this._collisionPairCache.push(Mt)}return!1});if(h&&(h.physics.pairs=this._collisionPairCache.length),this._config.continuous.checkForFastBodies)for(const mt of lt){const kt=mt.owner.get(Ur);if(kt.collisionType!==On.Active)continue;const Rt=kt.vel.size*_+kt.acc.size*.5*_*_,Mt=Math.min(mt.bounds.height,mt.bounds.width);if(this._config.continuous.disableMinimumSpeedForFastBody||Rt>Mt/2){h&&h.physics.fastBodies++;const Nt=kt.globalPos.sub(kt.oldPos),en=mt.center,an=mt.getFurthestPoint(kt.vel),un=an.sub(Nt),wn=new Ho(un,kt.vel);wn.pos=wn.pos.add(wn.dir.scale(-2*this._config.continuous.surfaceEpsilon));let Bn,fn=new At(1/0,1/0);if(this._dynamicCollisionTree.rayCastQuery(wn,Rt+this._config.continuous.surfaceEpsilon*2,pn=>{if(!this._pairExists(mt,pn)&&bo.canCollide(mt,pn)){const zn=pn.rayCast(wn,Rt+this._config.continuous.surfaceEpsilon*10);if(zn){const Pn=zn.point.sub(un);Pn.size<fn.size&&(fn=Pn,Bn=pn)}}return!1}),Bn&&At.isValid(fn)){const pn=new bo(mt,Bn);this._pairs.has(pn.id)||(this._pairs.add(pn.id),this._collisionPairCache.push(pn));const zn=en.sub(an);kt.globalPos=un.add(zn).add(fn).add(wn.dir.scale(10*this._config.continuous.surfaceEpsilon)),mt.update(kt.transform.get()),h&&h.physics.fastBodyCollisions++}}}return this._collisionPairCache}narrowphase(e,a){let h=[];for(let _=0;_<e.length;_++){const lt=e[_].collide();if(h=h.concat(lt),a&&lt.length>0)for(const ft of lt)a.physics.contacts.set(ft.id,ft)}return a&&(a.physics.collisions+=h.length),h}update(e){let a=0;const h=e.length;for(let _=0;_<h;_++)this._dynamicCollisionTree.updateCollider(e[_])&&a++;return a}debug(e){this._dynamicCollisionTree.debug(e)}}class rs{constructor(){this.id=ht("collider",rs._ID++),this.composite=null,this.events=new dt,this.offset=At.Zero}touching(e){return!!this.collide(e)}}rs._ID=0;var Qo;(function(ut){ut.Arcade="arcade",ut.Realistic="realistic"})(Qo||(Qo={}));var Os;(function(ut){ut[ut.DynamicAABBTree=0]="DynamicAABBTree"})(Os||(Os={}));var js;(function(ut){ut[ut.Euler=0]="Euler"})(js||(js={}));class Nr{static get gravity(){return Nr.acc}static set gravity(e){Nr.acc=e}static useArcadePhysics(){Nr.collisionResolutionStrategy=Qo.Arcade}static useRealisticPhysics(){Nr.collisionResolutionStrategy=Qo.Realistic}}Nr.acc=new At(0,0),Nr.enabled=!0,Nr.broadphaseStrategy=Os.DynamicAABBTree,Nr.collisionResolutionStrategy=Qo.Arcade,Nr.defaultMass=10,Nr.integrator=js.Euler,Nr.dynamicTreeVelocityMultiplier=2,Nr.boundsPadding=5,Nr.positionIterations=3,Nr.velocityIterations=8,Nr.slop=1,Nr.steeringFactor=.2,Nr.warmStart=!0,Nr.bodiesCanSleepByDefault=!1,Nr.surfaceEpsilon=.1,Nr.sleepEpsilon=.07,Nr.wakeThreshold=Nr.sleepEpsilon*3,Nr.sleepBias=.9,Nr.checkForFastBodies=!0,Nr.disableMinimumSpeedForFastBody=!1;var fs;(function(ut){ut.None="none",ut.VerticalFirst="vertical-first",ut.HorizontalFirst="horizontal-first"})(fs||(fs={}));const xa={vertical:1,horizontal:2},Fl={horizontal:1,vertical:2},Ys={horizontal:0,vertical:0},ao={enabled:!0,gravity:It(0,0),solver:Qo.Arcade,colliders:{compositeStrategy:"together"},continuous:{checkForFastBodies:!0,disableMinimumSpeedForFastBody:!1,surfaceEpsilon:.1},bodies:{canSleepByDefault:!1,sleepEpsilon:.07,wakeThreshold:.07*3,sleepBias:.9,defaultMass:10},dynamicTree:{boundsPadding:5,velocityMultiplier:2},arcade:{contactSolveBias:fs.None},realistic:{positionIterations:3,velocityIterations:8,slop:1,steeringFactor:.2,warmStart:!0}};function $s(){return{enabled:Nr.enabled,gravity:Nr.gravity,solver:Nr.collisionResolutionStrategy,continuous:{checkForFastBodies:Nr.checkForFastBodies,disableMinimumSpeedForFastBody:Nr.disableMinimumSpeedForFastBody,surfaceEpsilon:Nr.surfaceEpsilon},colliders:{compositeStrategy:"together"},bodies:{canSleepByDefault:Nr.bodiesCanSleepByDefault,sleepEpsilon:Nr.sleepEpsilon,wakeThreshold:Nr.wakeThreshold,sleepBias:Nr.sleepBias,defaultMass:Nr.defaultMass},dynamicTree:{boundsPadding:Nr.boundsPadding,velocityMultiplier:Nr.dynamicTreeVelocityMultiplier},arcade:{contactSolveBias:fs.None},realistic:{positionIterations:Nr.positionIterations,velocityIterations:Nr.velocityIterations,slop:Nr.slop,steeringFactor:Nr.steeringFactor,warmStart:Nr.warmStart}}}class So extends rs{set compositeStrategy(e){this._compositeStrategy=e}get compositeStrategy(){return this._compositeStrategy}constructor(e){super(),this._collisionProcessor=new Bs(ao),this._dynamicAABBTree=new ds(ao.dynamicTree),this._colliders=[];for(const a of e)this.addCollider(a)}clearColliders(){this._colliders=[]}addCollider(e){let a;e instanceof So?(a=e.getColliders(),a.forEach(h=>h.offset.addEqual(e.offset))):a=[e];for(const h of a)h.events.pipe(this.events),h.composite=this,this._colliders.push(h),this._collisionProcessor.track(h),this._dynamicAABBTree.trackCollider(h)}removeCollider(e){e.events.pipe(this.events),e.composite=null,Xt(e,this._colliders),this._collisionProcessor.untrack(e),this._dynamicAABBTree.untrackCollider(e)}getColliders(){return this._colliders}get worldPos(){var e,a;return((a=(e=this._transform)===null||e===void 0?void 0:e.pos)!==null&&a!==void 0?a:At.Zero).add(this.offset)}get center(){var e,a;return((a=(e=this._transform)===null||e===void 0?void 0:e.pos)!==null&&a!==void 0?a:At.Zero).add(this.offset)}get bounds(){var e,a;const h=this.getColliders();return h.reduce((lt,ft)=>lt.combine(ft.bounds),(a=(e=h[0])===null||e===void 0?void 0:e.bounds)!==null&&a!==void 0?a:new Wt().translate(this.worldPos)).translate(this.offset)}get localBounds(){var e,a;const h=this.getColliders();return h.reduce((lt,ft)=>lt.combine(ft.localBounds),(a=(e=h[0])===null||e===void 0?void 0:e.localBounds)!==null&&a!==void 0?a:new Wt)}get axes(){const e=this.getColliders();let a=[];for(const h of e)a=a.concat(h.axes);return a}getFurthestPoint(e){const a=this.getColliders(),h=[];for(const ft of a)h.push(ft.getFurthestPoint(e));let _=h[0],lt=-Number.MAX_VALUE;for(const ft of h){const mt=ft.dot(e);mt>lt&&(_=ft,lt=mt)}return _}getInertia(e){const a=this.getColliders();let h=0;for(const _ of a)h+=_.getInertia(e);return h}collide(e){let a=[e];e instanceof So&&(a=e.getColliders());const h=[];for(const lt of a)this._dynamicAABBTree.query(lt,ft=>(h.push(new bo(lt,ft)),!1));let _=[];for(const lt of h)_=_.concat(lt.collide());return _}getClosestLineBetween(e){const a=this.getColliders(),h=[];if(e instanceof So){const _=e.getColliders();for(const lt of a)for(const ft of _){const mt=lt.getClosestLineBetween(ft);mt&&h.push(mt)}}else for(const _ of a){const lt=e.getClosestLineBetween(_);lt&&h.push(lt)}if(h.length){let _=h[0].getLength(),lt=h[0];for(const ft of h){const mt=ft.getLength();mt<_&&(_=mt,lt=ft)}return lt}return null}contains(e){const a=this.getColliders();for(const h of a)if(h.contains(e))return!0;return!1}rayCast(e,a){const h=this.getColliders(),_=[];for(const lt of h){const ft=lt.rayCast(e,a);ft&&_.push(ft)}if(_.length){let lt=_[0],ft=lt.point.dot(e.dir);for(const mt of _){const kt=e.dir.dot(mt.point);kt<ft&&(lt=mt,ft=kt)}return lt}return null}project(e){const a=this.getColliders(),h=[];for(const _ of a){const lt=_.project(e);lt&&h.push(lt)}if(h.length){const _=new zo(h[0].min,h[0].max);for(const lt of h)_.min=Math.min(lt.min,_.min),_.max=Math.max(lt.max,_.max);return _}return null}update(e){if(e){const a=this.getColliders();for(const h of a)h.owner=this.owner,h.update(e)}}debug(e,a,h){const _=this.getColliders();e.save(),e.translate(this.offset.x,this.offset.y);for(const lt of _)lt.debug(e,a,h);e.restore()}clone(){const e=new So(this._colliders.map(a=>a.clone()));return e.offset=this.offset.clone(),e}}class Lo{constructor(e,a){this.begin=e,this.end=a}get slope(){return(this.end.y-this.begin.y)/(this.end.x-this.begin.x)}get intercept(){return this.begin.y-this.slope*this.begin.x}normal(){return this._normal?this._normal:this._normal=this.end.sub(this.begin).normal()}dir(){return this._dir?this._dir:this._dir=this.end.sub(this.begin)}getPoints(){return[this.begin,this.end]}getSlope(){if(this._slope)return this._slope;const e=this.begin,a=this.end,h=e.distance(a);return this._slope=a.sub(e).scale(1/h)}getEdge(){const e=this.begin;return this.end.sub(e)}getLength(){if(this._length)return this._length;const e=this.begin,a=this.end,h=e.distance(a);return this._length=h}get midpoint(){return this.begin.add(this.end).scale(.5)}flip(){return new Lo(this.end,this.begin)}below(e){return(this.end.x-this.begin.x)*(e.y-this.begin.y)-(this.end.y-this.begin.y)*(e.x-this.begin.x)>=0}clip(e,a){let h=e;h=h.normalize();const _=h.dot(this.begin)-a,lt=h.dot(this.end)-a,ft=[];if(_<=0&&ft.push(this.begin),lt<=0&&ft.push(this.end),_*lt<0){const mt=_/(_-lt);ft.push(this.begin.add(this.end.sub(this.begin).scale(mt)))}return ft.length!==2?null:new Lo(ft[0],ft[1])}distanceToPoint(e,a=!1){const h=e.x,_=e.y,lt=this.getLength(),ft=this.end.y-this.begin.y,mt=this.end.x-this.begin.x,kt=(ft*h-mt*_+this.end.x*this.begin.y-this.end.y*this.begin.x)/lt;return a?kt:Math.abs(kt)}findVectorToPoint(e){const a=this.begin.sub(e),h=this.getSlope();return a.sub(h.scale(a.dot(h)))}findPoint(e=null,a=null){const h=this.slope,_=this.intercept;if(e!==null)return new At(e,h*e+_);if(a!==null)return new At((a-_)/h,a);throw new Error("You must provide an X or a Y value")}hasPoint(){let e,a=0;if(typeof arguments[0]=="number"&&typeof arguments[1]=="number")e=new At(arguments[0],arguments[1]),a=arguments[2]||0;else if(arguments[0]instanceof At)e=arguments[0],a=arguments[1]||0;else throw"Could not determine the arguments for Vector.hasPoint";const h=e.x-this.begin.x,_=e.y-this.begin.y,lt=this.end.x-this.begin.x,ft=this.end.y-this.begin.y,mt=h*ft-_*lt;return Math.abs(mt)>a?!1:Math.abs(lt)>=Math.abs(ft)?lt>0?this.begin.x<=e.x&&e.x<=this.end.x:this.end.x<=e.x&&e.x<=this.begin.x:ft>0?this.begin.y<=e.y&&e.y<=this.end.y:this.end.y<=e.y&&e.y<=this.begin.y}}function Bl(ut,e,a,h){const _=ut.sub(a),lt=e.dot(e),ft=e.dot(h),mt=h.dot(h),kt=e.dot(_),Rt=h.dot(_),Mt=lt*mt-ft*ft;let Nt=Mt,en=Mt;if(Mt===0||Mt<=.01){const wn=kt/ft;return new Lo(ut,a.add(h.scale(wn)))}let an=ft*Rt-mt*kt,un=lt*Rt-ft*kt;return an<0?(an=0,un=Rt,en=mt):an>Nt&&(an=Nt,un=Rt+ft,en=mt),un<0?(un=0,-kt<0?an=0:-kt>lt?an=Nt:(an=-kt,Nt=lt)):un>en&&(un=en,-kt+ft<0?an=0:-kt+ft>lt?an=Nt:(an=-kt+ft,Nt=lt)),an=Math.abs(an)<.001?0:an/Nt,un=Math.abs(un)<.001?0:un/en,new Lo(ut.add(e.scale(an)),a.add(h.scale(un)))}const Ss={PolygonPolygonClosestLine(ut,e){const a=e.worldPos,h=a.sub(ut.worldPos),_=h.negate(),lt=new Ho(ut.worldPos,h),ft=new Ho(a,_),mt=ut.rayCast(lt).point.add(lt.dir.scale(.1)),kt=e.rayCast(ft).point.add(ft.dir.scale(.1)),Rt=ut.getClosestFace(mt),Mt=e.getClosestFace(kt),Nt=Rt.face.begin,en=Rt.face.getEdge(),an=Mt.face.begin,un=Mt.face.getEdge();return Bl(Nt,en,an,un)},PolygonEdgeClosestLine(ut,e){const h=e.worldPos.sub(ut.worldPos),_=new Ho(ut.worldPos,h),lt=ut.rayCast(_).point.add(_.dir.scale(.1)),ft=ut.getClosestFace(lt),mt=ft.face.begin,kt=ft.face.getEdge(),Rt=e.asLine(),Mt=Rt.begin,Nt=Rt.getEdge();return Bl(mt,kt,Mt,Nt)},PolygonCircleClosestLine(ut,e){const a=e.worldPos,h=a.sub(ut.worldPos),_=new Ho(ut.worldPos,h.normalize()),lt=ut.rayCast(_).point.add(_.dir.scale(.1)),ft=ut.getClosestFace(lt),mt=ft.face.begin,kt=ft.face.getEdge();let Rt=(kt.x*(a.x-mt.x)+kt.y*(a.y-mt.y))/(kt.x*kt.x+kt.y*kt.y);Rt>1?Rt=1:Rt<0&&(Rt=0);const Mt=Math.sqrt(Math.pow(mt.x+kt.x*Rt-a.x,2)+Math.pow(mt.y+kt.y*Rt-a.y,2))-e.radius,Nt=(mt.x+kt.x*Rt-a.x)*e.radius/(e.radius+Mt),en=(mt.y+kt.y*Rt-a.y)*e.radius/(e.radius+Mt);return new Lo(kt.scale(Rt).add(mt),new At(a.x+Nt,a.y+en))},CircleCircleClosestLine(ut,e){const h=e.worldPos.sub(ut.worldPos),lt=ut.worldPos.sub(e.worldPos),ft=new Ho(ut.worldPos,h),mt=new Ho(e.worldPos,lt),kt=ut.rayCast(ft),Rt=e.rayCast(mt);return new Lo(kt.point,Rt.point)},CircleEdgeClosestLine(ut,e){const a=ut.worldPos,h=e.asLine(),_=h.begin,lt=h.getEdge(),ft=_,mt=lt;let kt=(mt.x*(a.x-ft.x)+mt.y*(a.y-ft.y))/(mt.x*mt.x+mt.y*mt.y);kt>1?kt=1:kt<0&&(kt=0);const Rt=Math.sqrt(Math.pow(ft.x+mt.x*kt-a.x,2)+Math.pow(ft.y+mt.y*kt-a.y,2))-ut.radius,Mt=(ft.x+mt.x*kt-a.x)*ut.radius/(ut.radius+Rt),Nt=(ft.y+mt.y*kt-a.y)*ut.radius/(ut.radius+Rt);return new Lo(mt.scale(kt).add(ft),new At(a.x+Mt,a.y+Nt))},EdgeEdgeClosestLine(ut,e){const a=ut.asLine(),h=a.begin,_=a.getEdge(),lt=h,ft=_,mt=e.asLine(),kt=mt.begin,Rt=mt.getEdge();return Bl(lt,ft,kt,Rt)}};class Fo extends rs{get worldPos(){return this._globalMatrix.getPosition()}get radius(){var e;const a=this._transform,h=(e=a?.globalScale)!==null&&e!==void 0?e:At.One;return this._naturalRadius*Math.min(h.x,h.y)}set radius(e){var a;const h=this._transform,_=(a=h?.globalScale)!==null&&a!==void 0?a:At.One;this._naturalRadius=e/Math.min(_.x,_.y)}constructor(e){super(),this.offset=At.Zero,this._globalMatrix=yn.identity(),this.offset=e.offset||At.Zero,this.radius=e.radius||0,this._globalMatrix.translate(this.offset.x,this.offset.y)}clone(){return new Fo({offset:this.offset.clone(),radius:this.radius})}get center(){return this._globalMatrix.getPosition()}contains(e){var a,h;return((h=(a=this._transform)===null||a===void 0?void 0:a.pos)!==null&&h!==void 0?h:this.offset).distance(e)<=this.radius}rayCast(e,a=1/0){var h,_;const lt=this.center,ft=e.dir,mt=e.pos,kt=Math.sqrt(Math.pow(ft.dot(mt.sub(lt)),2)-Math.pow(mt.sub(lt).distance(),2)+Math.pow(this.radius,2));if(kt<0)return null;{let Rt=0;if(kt===0){if(Rt=-ft.dot(mt.sub(lt)),Rt>0&&Rt<a){const Mt=e.getPoint(Rt);return{point:Mt,normal:Mt.sub(lt).normalize(),collider:this,body:(h=this.owner)===null||h===void 0?void 0:h.get(Ur),distance:Rt}}return null}else{const Mt=-ft.dot(mt.sub(lt))+kt,Nt=-ft.dot(mt.sub(lt))-kt,en=[];Mt>=0&&en.push(Mt),Nt>=0&&en.push(Nt);const an=Math.min(...en);if(an<=a){const un=e.getPoint(an);return{point:un,normal:un.sub(lt).normalize(),collider:this,body:(_=this.owner)===null||_===void 0?void 0:_.get(Ur),distance:an}}return null}}}getClosestLineBetween(e){if(e instanceof Fo)return Ss.CircleCircleClosestLine(this,e);if(e instanceof Ro)return Ss.PolygonCircleClosestLine(e,this).flip();if(e instanceof Ko)return Ss.CircleEdgeClosestLine(this,e).flip();throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof e}`)}collide(e){if(e instanceof Fo)return bs.CollideCircleCircle(this,e);if(e instanceof Ro)return bs.CollideCirclePolygon(this,e);if(e instanceof Ko)return bs.CollideCircleEdge(this,e);throw new Error(`Circle could not collide with unknown CollisionShape ${typeof e}`)}getFurthestPoint(e){return this.center.add(e.normalize().scale(this.radius))}getFurthestLocalPoint(e){return e.normalize().scale(this.radius)}get bounds(){var e,a,h;const _=this._transform,lt=(e=_?.globalScale)!==null&&e!==void 0?e:At.One,ft=(a=_?.globalRotation)!==null&&a!==void 0?a:0,mt=(h=_?.globalPos)!==null&&h!==void 0?h:At.Zero;return new Wt(this.offset.x-this._naturalRadius,this.offset.y-this._naturalRadius,this.offset.x+this._naturalRadius,this.offset.y+this._naturalRadius).rotate(ft).scale(lt).translate(mt)}get localBounds(){return new Wt(this.offset.x-this._naturalRadius,this.offset.y-this._naturalRadius,this.offset.x+this._naturalRadius,this.offset.y+this._naturalRadius)}get axes(){return[]}getInertia(e){return e*this.radius*this.radius/2}update(e){var a;this._transform=e,((a=e.matrix)!==null&&a!==void 0?a:this._globalMatrix).clone(this._globalMatrix),this._globalMatrix.translate(this.offset.x,this.offset.y)}project(e){const a=[],_=this.center.dot(e);return a.push(_),a.push(_+this.radius),a.push(_-this.radius),new zo(Math.min.apply(Math,a),Math.max.apply(Math,a))}debug(e,a,h){var _,lt,ft,mt;const{lineWidth:kt}={lineWidth:1,...h},Rt=this._transform,Mt=(_=Rt?.globalScale)!==null&&_!==void 0?_:At.One,Nt=(lt=Rt?.globalRotation)!==null&&lt!==void 0?lt:0,en=(ft=Rt?.globalPos)!==null&&ft!==void 0?ft:At.Zero;e.save(),e.translate(en.x,en.y),e.rotate(Nt),e.scale(Mt.x,Mt.y),e.drawCircle((mt=this.offset)!==null&&mt!==void 0?mt:At.Zero,this._naturalRadius,Gt.Transparent,a,kt),e.restore()}}class Xs{constructor(e,a,h,_,lt,ft,mt,kt){var Rt,Mt,Nt,en,an,un;if(this._canceled=!1,this.colliderA=e,this.colliderB=a,this.mtv=h,this.normal=_,this.tangent=lt,this.points=ft,this.localPoints=mt,this.info=kt,this.id=bo.calculatePairHash(e.id,a.id),e.composite||a.composite){const wn=((Rt=e.composite)===null||Rt===void 0?void 0:Rt.compositeStrategy)==="separate"?e.id:(Nt=(Mt=e.composite)===null||Mt===void 0?void 0:Mt.id)!==null&&Nt!==void 0?Nt:e.id,Bn=((en=a.composite)===null||en===void 0?void 0:en.compositeStrategy)==="separate"?a.id:(un=(an=a.composite)===null||an===void 0?void 0:an.id)!==null&&un!==void 0?un:a.id;this.id+="|"+bo.calculatePairHash(wn,Bn)}}matchAwake(){const e=this.colliderA.owner.get(Ur),a=this.colliderB.owner.get(Ur);e&&a&&e.sleeping!==a.sleeping&&(e.sleeping&&e.collisionType!==On.Fixed&&a.sleepMotion>=e.wakeThreshold&&e.setSleeping(!1),a.sleeping&&a.collisionType!==On.Fixed&&e.sleepMotion>=a.wakeThreshold&&a.setSleeping(!1))}isCanceled(){return this._canceled}cancel(){this._canceled=!0}}class tu{static findPolygonPolygonSeparation(e,a){let h=-Number.MAX_VALUE,_=null,lt=null,ft=-1,mt=null;const kt=e.getSides(),Rt=e.getLocalSides();for(let Mt=0;Mt<kt.length;Mt++){const Nt=kt[Mt],en=Nt.normal(),an=a.getFurthestPoint(en.negate()),un=Nt.distanceToPoint(an,!0);un>h&&(h=un,_=Nt,lt=en,ft=Mt,mt=an)}return{collider:e,separation:lt?h:99,axis:lt,side:_,localSide:Rt[ft],sideId:ft,point:mt,localPoint:lt?a.getFurthestLocalPoint(lt.negate()):null}}static findCirclePolygonSeparation(e,a){const h=a.axes,lt=a.center.sub(e.worldPos),ft=a.getFurthestPoint(lt.negate());h.push(ft.sub(e.worldPos).normalize());let mt=Number.MAX_VALUE,kt=null,Rt=-1;for(let Mt=0;Mt<h.length;Mt++){const Nt=a.project(h[Mt]),en=e.project(h[Mt]),an=Nt.getOverlap(en);if(an<=0)return null;an<mt&&(mt=an,kt=h[Mt],Rt=Mt)}return Rt<0?null:kt.normalize().scale(mt)}}const bs={CollideCircleCircle(ut,e){const a=ut.worldPos,h=e.worldPos,_=ut.radius+e.radius,lt=a.distance(h);if(lt>_)return[];const ft=_-lt,mt=h.sub(a).normalize(),kt=mt.perpendicular(),Rt=mt.scale(ft),Mt=ut.getFurthestPoint(mt),Nt=ut.getFurthestLocalPoint(mt),en={collider:ut,separation:ft,axis:mt,point:Mt};return[new Xs(ut,e,Rt,mt,kt,[Mt],[Nt],en)]},CollideCirclePolygon(ut,e){var a,h;let _=tu.findCirclePolygonSeparation(ut,e);if(!_)return[];_=_.dot(e.center.sub(ut.center))<0?_.negate():_;const ft=ut.getFurthestPoint(_),kt=((h=(a=ut.owner)===null||a===void 0?void 0:a.get(hr))!==null&&h!==void 0?h:new hr).applyInverse(ft),Rt=_.normalize(),Mt={collider:ut,separation:-_.size,axis:Rt,point:ft,localPoint:kt,side:e.findSide(Rt.negate()),localSide:e.findLocalSide(Rt.negate())};return[new Xs(ut,e,_,Rt,Rt.perpendicular(),[ft],[kt],Mt)]},CollideCircleEdge(ut,e){const a=ut.center,h=e.asLine(),_=h.end.sub(h.begin),lt=_.dot(h.end.sub(a)),ft=_.dot(a.sub(h.begin)),mt=e.asLine(),kt=e.asLocalLine();if(ft<=0){const fn=h.begin.sub(a),pn=fn.dot(fn);if(pn>ut.radius*ut.radius)return[];const zn=fn.normalize(),Pn=ut.radius-Math.sqrt(pn),yr={collider:ut,separation:Pn,axis:zn,point:mt.begin,side:mt,localSide:kt};return[new Xs(ut,e,zn.scale(Pn),zn,zn.perpendicular(),[mt.begin],[kt.begin],yr)]}if(lt<=0){const fn=h.end.sub(a),pn=fn.dot(fn);if(pn>ut.radius*ut.radius)return[];const zn=fn.normalize(),Pn=ut.radius-Math.sqrt(pn),yr={collider:ut,separation:Pn,axis:zn,point:mt.end,side:mt,localSide:kt};return[new Xs(ut,e,zn.scale(Pn),zn,zn.perpendicular(),[mt.end],[kt.end],yr)]}const Rt=_.dot(_),Mt=h.begin.scale(lt).add(h.end.scale(ft)).scale(1/Rt),Nt=a.sub(Mt),en=Nt.dot(Nt);if(en>ut.radius*ut.radius)return[];let an=_.perpendicular();an.dot(a.sub(h.begin))<0&&(an.x=-an.x,an.y=-an.y),an=an.normalize();const un=ut.radius-Math.sqrt(en),wn=an.scale(un),Bn={collider:ut,separation:un,axis:an,point:Mt,side:mt,localSide:kt};return[new Xs(ut,e,wn,an.negate(),an.negate().perpendicular(),[Mt],[Mt.sub(e.worldPos)],Bn)]},CollideEdgeEdge(){return[]},CollidePolygonEdge(ut,e){var a;const h=ut.center,lt=e.center.sub(h).normalize(),ft=new Ro({points:[e.begin,e.end,e.end.add(lt.scale(100)),e.begin.add(lt.scale(100))],offset:e.offset});ft.owner=e.owner,((a=e.owner)===null||a===void 0?void 0:a.get(hr))&&ft.update(e.owner.get(hr).get());const kt=this.CollidePolygonPolygon(ut,ft);return kt.length&&(kt[0].colliderB=e,kt[0].id=bo.calculatePairHash(ut.id,e.id)),kt},CollidePolygonPolygon(ut,e){var a,h,_,lt;const ft=tu.findPolygonPolygonSeparation(ut,e);if(ft.separation>0)return[];const mt=tu.findPolygonPolygonSeparation(e,ut);if(mt.separation>0)return[];const kt=ft.separation>mt.separation?ft:mt,Mt=(kt.collider===ut?e:ut).findSide(kt.axis.negate()),Nt=kt.side,en=Nt.dir().normalize(),an=Mt.clip(en.negate(),-en.dot(Nt.begin));let un=null;if(an&&(un=an.clip(en,en.dot(Nt.end))),un){const wn=un.getPoints().filter(zn=>Nt.below(zn));let Bn=kt.axis,fn=Bn.perpendicular();e.center.sub(ut.center).dot(Bn)<0&&(Bn=Bn.negate(),fn=Bn.perpendicular());let pn=[];if(kt.collider===ut){const zn=(h=(a=e.owner)===null||a===void 0?void 0:a.get(hr))!==null&&h!==void 0?h:new hr;pn=wn.map(Pn=>zn.applyInverse(Pn))}else{const zn=(lt=(_=ut.owner)===null||_===void 0?void 0:_.get(hr))!==null&&lt!==void 0?lt:new hr;pn=wn.map(Pn=>zn.applyInverse(Pn))}return[new Xs(ut,e,Bn.scale(-kt.separation),Bn,fn,wn,pn,kt)]}return[]},FindContactSeparation(ut,e){var a,h,_,lt;const ft=ut.colliderA,mt=(h=(a=ut.colliderA.owner)===null||a===void 0?void 0:a.get(hr))!==null&&h!==void 0?h:new hr,kt=ut.colliderB,Rt=(lt=(_=ut.colliderB.owner)===null||_===void 0?void 0:_.get(hr))!==null&&lt!==void 0?lt:new hr;if(ft instanceof Fo&&kt instanceof Fo){const Mt=ft.radius+kt.radius,Nt=mt.pos.distance(Rt.pos);return-(Mt-Nt)}if(ft instanceof Ro&&kt instanceof Ro&&ut.info.localSide){let Mt,Nt;return ut.info.collider===ft?(Mt=new Lo(mt.apply(ut.info.localSide.begin),mt.apply(ut.info.localSide.end)),Nt=Rt.apply(e)):(Mt=new Lo(Rt.apply(ut.info.localSide.begin),Rt.apply(ut.info.localSide.end)),Nt=mt.apply(e)),Mt.distanceToPoint(Nt,!0)}if(ft instanceof Ro&&kt instanceof Fo||kt instanceof Ro&&ft instanceof Fo){const Mt=mt.apply(e);if(ut.info.side)return ut.info.side.distanceToPoint(Mt,!0)}if(ft instanceof Ko&&kt instanceof Ro||kt instanceof Ko&&ft instanceof Ro){let Mt;if(ut.info.collider===ft?Mt=Rt.apply(e):Mt=mt.apply(e),ut.info.side)return ut.info.side.distanceToPoint(Mt,!0)}if(ft instanceof Fo&&kt instanceof Ko||kt instanceof Fo&&ft instanceof Ko){const Mt=Rt.apply(e);let Nt;ft instanceof Fo&&(Nt=ft.getFurthestPoint(ut.normal));const en=Mt.distance(Nt);if(ut.info.side)return en>0?-en:0}return 0}};class Ko extends rs{constructor(e){var a;super(),this._globalMatrix=yn.identity(),this.begin=e.begin||At.Zero,this.end=e.end||At.Zero,this.offset=(a=e.offset)!==null&&a!==void 0?a:At.Zero}clone(){return new Ko({begin:this.begin.clone(),end:this.end.clone()})}get worldPos(){var e;const a=this._transform;return(e=a?.globalPos.add(this.offset))!==null&&e!==void 0?e:this.offset}get center(){const e=this._getTransformedBegin(),a=this._getTransformedEnd();return e.average(a)}_getTransformedBegin(){return this._globalMatrix.multiply(this.begin)}_getTransformedEnd(){return this._globalMatrix.multiply(this.end)}getSlope(){const e=this._getTransformedBegin(),a=this._getTransformedEnd(),h=e.distance(a);return a.sub(e).scale(1/h)}getLength(){const e=this._getTransformedBegin(),a=this._getTransformedEnd();return e.distance(a)}contains(){return!1}rayCast(e,a=1/0){var h;const _=this._getTransformedBegin().sub(e.pos);if(e.dir.cross(this.getSlope())===0&&_.cross(e.dir)!==0)return null;const lt=e.dir.cross(this.getSlope());if(lt===0)return null;const ft=_.cross(this.getSlope())/lt;if(ft>=0&&ft<=a){const mt=_.cross(e.dir)/lt/this.getLength();if(mt>=0&&mt<=1)return{distance:ft,normal:this.asLine().normal(),collider:this,body:(h=this.owner)===null||h===void 0?void 0:h.get(Ur),point:e.getPoint(ft)}}return null}getClosestLineBetween(e){if(e instanceof Fo)return Ss.CircleEdgeClosestLine(e,this);if(e instanceof Ro)return Ss.PolygonEdgeClosestLine(e,this).flip();if(e instanceof Ko)return Ss.EdgeEdgeClosestLine(this,e);throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof e}`)}collide(e){if(e instanceof Fo)return bs.CollideCircleEdge(e,this);if(e instanceof Ro)return bs.CollidePolygonEdge(e,this);if(e instanceof Ko)return bs.CollideEdgeEdge();throw new Error(`Edge could not collide with unknown CollisionShape ${typeof e}`)}getFurthestPoint(e){const a=this._getTransformedBegin(),h=this._getTransformedEnd();return e.dot(a)>0?a:h}_boundsFromBeginEnd(e,a,h=10){return new Wt(Math.min(e.x,a.x)-h,Math.min(e.y,a.y)-h,Math.max(e.x,a.x)+h,Math.max(e.y,a.y)+h)}get bounds(){const e=this._getTransformedBegin(),a=this._getTransformedEnd();return this._boundsFromBeginEnd(e,a)}get localBounds(){return this._boundsFromBeginEnd(this.begin,this.end)}asLine(){return new Lo(this._getTransformedBegin(),this._getTransformedEnd())}asLocalLine(){return new Lo(this.begin,this.end)}get axes(){const a=this._getTransformedEnd().sub(this._getTransformedBegin()).normal(),h=[];return h.push(a),h.push(a.negate()),h.push(a.normal()),h.push(a.normal().negate()),h}getInertia(e){const a=this.end.sub(this.begin).distance()/2;return e*a*a}update(e){var a;this._transform=e,((a=e.matrix)!==null&&a!==void 0?a:this._globalMatrix).clone(this._globalMatrix),this._globalMatrix.translate(this.offset.x,this.offset.y)}project(e){const a=[],h=[this._getTransformedBegin(),this._getTransformedEnd()],_=h.length;for(let lt=0;lt<_;lt++)a.push(h[lt].dot(e));return new zo(Math.min.apply(Math,a),Math.max.apply(Math,a))}debug(e,a){const h=this._getTransformedBegin(),_=this._getTransformedEnd();e.drawLine(h,_,a,2),e.drawCircle(h,2,a),e.drawCircle(_,2,a)}}class Po{static registerGraphicsContext(e){Po._ctx=e}static draw(e){this._drawCalls.push(e)}static drawPoint(e,a){Po.draw(h=>{h.debug.drawPoint(e,a)})}static drawLine(e,a,h){Po.draw(_=>{_.debug.drawLine(e,a,h)})}static drawLines(e,a){e.length>1&&Po.draw(h=>{for(let _=0;_<e.length-1;_++)h.debug.drawLine(e[_],e[_+1],a)})}static drawText(e,a){Po.draw(h=>{h.debug.drawText(e,a)})}static drawPolygon(e,a){e.length>1&&Po.draw(h=>{const _=e[0],lt=[...e,_];for(let ft=0;ft<lt.length-1;ft++)h.debug.drawLine(lt[ft],lt[ft+1],a)})}static drawCircle(e,a,h){const{color:_,strokeColor:lt,width:ft}={color:Gt.Black,strokeColor:void 0,width:void 0,...h};Po.draw(mt=>{mt.drawCircle(e,a,_,lt,ft)})}static drawBounds(e,a){Po.draw(h=>{h.debug.drawRect(e.left,e.top,e.width,e.height,a)})}static drawRay(e,a){const{distance:h,color:_}={color:Gt.Blue,distance:10,...a};Po.draw(lt=>{const ft=e.pos,mt=e.pos.add(e.dir.scale(h));lt.debug.drawLine(ft,mt,{color:_})})}static flush(e){e.save(),e.z=Po.z;for(const a of Po._drawCalls)a(e);e.restore(),Po.clear()}static clear(){Po._drawCalls.length=0}}Po._drawCalls=[],Po.z=1/0;class Ro extends rs{flagDirty(){this._localBoundsDirty=!0,this._localSidesDirty=!0,this._transformedPointsDirty=!0,this._sidesDirty=!0}set points(e){this._points=e,this.flagDirty()}get points(){return this._points}constructor(e){var a,h;super(),this._logger=Vt.getInstance(),this._transformedPoints=[],this._sides=[],this._localSides=[],this._globalMatrix=yn.identity(),this._transformedPointsDirty=!0,this._sidesDirty=!0,this._localSidesDirty=!0,this._localBoundsDirty=!0,this.offset=(a=e.offset)!==null&&a!==void 0?a:At.Zero,this._globalMatrix.translate(this.offset.x,this.offset.y),this.points=(h=e.points)!==null&&h!==void 0?h:[],this._isCounterClockwiseWinding(this.points)||this.points.reverse(),this.isConvex()||e.suppressConvexWarning||this._logger.warn("Excalibur only supports convex polygon colliders and will not behave properly.Call PolygonCollider.triangulate() to build a new collider composed of smaller convex triangles"),this._calculateTransformation()}_isCounterClockwiseWinding(e){let a=0;for(let h=0;h<e.length;h++)a+=(e[(h+1)%e.length].x-e[h].x)*(e[(h+1)%e.length].y+e[h].y);return a<0}isConvex(){if(this.points.length<3)return!1;let e=this.points[this.points.length-2],a=this.points[this.points.length-1],h=Math.atan2(a.y-e.y,a.x-e.x),_=0,lt=0,ft=0;for(const[mt,kt]of this.points.entries()){if(e=a,_=h,a=kt,h=Math.atan2(a.y-e.y,a.x-e.x),e.equals(a))return!1;let Rt=h-_;if(Rt<=-Math.PI?Rt+=Math.PI*2:Rt>Math.PI&&(Rt-=Math.PI*2),mt===0){if(Rt===0)return!1;lt=Rt>0?1:-1}else if(lt*Rt<=0)return!1;ft+=Rt}return Math.abs(Math.round(ft/(Math.PI*2)))===1}tessellate(){const e=[];for(let a=1;a<this.points.length-2;a++)e.push([this.points[0],this.points[a+1],this.points[a+2]]);return e.push([this.points[0],this.points[1],this.points[2]]),new So(e.map(a=>No.Polygon(a)))}triangulate(){if(this.points.length<3)throw Error("Invalid polygon");const e=[],a=[...this.points].reverse();let h=a.length;function _(Nt){return Nt===0?h-1:Nt-1}function lt(Nt){return Nt===h-1?0:Nt+1}function ft(Nt){const en=_(Nt),an=lt(Nt),un=a[en],wn=a[Nt],Bn=a[an],fn=un.sub(wn),pn=Bn.sub(wn);return!(fn.cross(pn)<0)}const mt=a.map((Nt,en)=>ft(en));function kt(Nt,en,an,un){const wn=an.sub(en),Bn=un.sub(an),fn=en.sub(un),pn=Nt.sub(en),zn=Nt.sub(an),Pn=Nt.sub(un),yr=wn.cross(pn),Qr=Bn.cross(zn),Hn=fn.cross(Pn);return!(yr>0||Qr>0||Hn>0)}function Rt(){for(let Nt=0;Nt<h;Nt++)if(mt[Nt]){const en=_(Nt),an=lt(Nt),un=a[en],wn=a[Nt],Bn=a[an];let fn=!0;for(let pn=0;pn<h;pn++){if(pn===Nt||pn===en||pn===an)continue;const zn=a[pn];if(kt(zn,un,wn,Bn)){fn=!1;break}}if(fn)return Nt}for(let Nt=0;Nt<h;Nt++)if(mt[Nt])return Nt;return 0}function Mt(Nt){const en=_(Nt),an=lt(Nt),un=a[en],wn=a[Nt],Bn=a[an];e.push([un,wn,Bn]),a.splice(Nt,1),mt.splice(Nt,1),h--}for(;h>3;){const Nt=Rt();Mt(Nt);for(let en=0;en<h;en++)mt[en]=ft(en)}return e.push([a[0],a[1],a[2]]),new So(e.map(Nt=>No.Polygon(Nt,At.Zero,!0)))}clone(){return new Ro({offset:this.offset.clone(),points:this.points.map(e=>e.clone())})}get worldPos(){return this._transform?this._transform.pos.add(this.offset):this.offset}get center(){return this.bounds.center}_calculateTransformation(){const e=this.points,a=e.length;this._transformedPoints.length=0;for(let h=0;h<a;h++)this._transformedPoints[h]=this._globalMatrix.multiply(e[h].clone())}getTransformedPoints(){return this._transformedPointsDirty&&(this._calculateTransformation(),this._transformedPointsDirty=!1),this._transformedPoints}getSides(){if(this._sidesDirty){const e=[],a=this.getTransformedPoints(),h=a.length;for(let _=0;_<h;_++)e.push(new Lo(a[_],a[(_+1)%h]));this._sides=e,this._sidesDirty=!1}return this._sides}getLocalSides(){if(this._localSidesDirty){const e=[],a=this.points,h=a.length;for(let _=0;_<h;_++)e.push(new Lo(a[_],a[(_+1)%h]));this._localSides=e,this._localSidesDirty=!1}return this._localSides}findSide(e){const a=this.getSides();let h=a[0],_=-Number.MAX_VALUE;for(let lt=0;lt<a.length;lt++){const ft=a[lt],kt=ft.normal().dot(e);kt>_&&(h=ft,_=kt)}return h}findLocalSide(e){const a=this.getLocalSides();let h=a[0],_=-Number.MAX_VALUE;for(let lt=0;lt<a.length;lt++){const ft=a[lt],kt=ft.normal().dot(e);kt>_&&(h=ft,_=kt)}return h}get axes(){const e=[],a=this.getSides();for(let h=0;h<a.length;h++)e.push(a[h].normal());return e}update(e){var a;e&&(this._transform=e,this._transformedPointsDirty=!0,this._sidesDirty=!0,((a=e.matrix)!==null&&a!==void 0?a:this._globalMatrix).clone(this._globalMatrix),this._globalMatrix.translate(this.offset.x,this.offset.y))}contains(e){const a=new Ho(e,new At(1,0));return this.getSides().reduce(function(_,lt){return a.intersect(lt)>=0?_+1:_},0)%2!==0}getClosestLineBetween(e){if(e instanceof Fo)return Ss.PolygonCircleClosestLine(this,e);if(e instanceof Ro)return Ss.PolygonPolygonClosestLine(this,e);if(e instanceof Ko)return Ss.PolygonEdgeClosestLine(this,e);throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof e}`)}collide(e){if(e instanceof Fo)return bs.CollideCirclePolygon(e,this);if(e instanceof Ro)return bs.CollidePolygonPolygon(this,e);if(e instanceof Ko)return bs.CollidePolygonEdge(this,e);throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof e}`)}getFurthestPoint(e){const a=this.getTransformedPoints();let h=null,_=-Number.MAX_VALUE;for(let lt=0;lt<a.length;lt++){const ft=e.dot(a[lt]);ft>_&&(_=ft,h=a[lt])}return h}getFurthestLocalPoint(e){const a=this.points;let h=a[0],_=-Number.MAX_VALUE;for(let lt=0;lt<a.length;lt++){const ft=e.dot(a[lt]);ft>_&&(_=ft,h=a[lt])}return h}getClosestFace(e){const a=this.getSides();let h=Number.POSITIVE_INFINITY,_=-1,lt=-1;for(let ft=0;ft<a.length;ft++){const mt=a[ft].distanceToPoint(e);mt<h&&(h=mt,_=ft,lt=mt)}return _!==-1?{distance:a[_].normal().scale(lt),face:a[_]}:null}get bounds(){return this.localBounds.transform(this._globalMatrix)}get localBounds(){return this._localBoundsDirty&&(this._localBounds=Wt.fromPoints(this.points),this._localBoundsDirty=!1),this._localBounds}getInertia(e){if(this._cachedMass===e&&this._cachedInertia)return this._cachedInertia;let a=0,h=0;const _=this.points;for(let lt=0;lt<_.length;lt++){const ft=(lt+1)%_.length,mt=_[ft].cross(_[lt]);a+=mt*(_[lt].dot(_[lt])+_[lt].dot(_[ft])+_[ft].dot(_[ft])),h+=mt}return this._cachedMass=e,this._cachedInertia=e/6*(a/h)}rayCast(e,a=1/0){var h;const _=this.getSides(),lt=_.length;let ft=Number.MAX_VALUE,mt,kt=-1;for(let Rt=0;Rt<lt;Rt++){const Mt=e.intersect(_[Rt]);Mt>=0&&Mt<ft&&Mt<=a&&(ft=Mt,mt=_[Rt],kt=Rt)}return kt>=0?{collider:this,distance:ft,body:(h=this.owner)===null||h===void 0?void 0:h.get(Ur),point:e.getPoint(ft),normal:mt.normal()}:null}project(e){const a=this.getTransformedPoints(),h=a.length;let _=Number.MAX_VALUE,lt=-Number.MAX_VALUE;for(let ft=0;ft<h;ft++){const mt=a[ft].dot(e);_=Math.min(_,mt),lt=Math.max(lt,mt)}return new zo(_,lt)}debug(e,a,h){const _=this.getTransformedPoints();Po.drawPolygon(_,{color:a})}}class No{static Box(e,a,h=At.Half,_=At.Zero){return new Ro({points:new Wt(-e*h.x,-a*h.y,e-e*h.x,a-a*h.y).getPoints(),offset:_})}static Polygon(e,a=At.Zero,h=!1){return new Ro({points:e,offset:a,suppressConvexWarning:h})}static Circle(e,a=At.Zero){return new Fo({radius:e,offset:a})}static Edge(e,a){return new Ko({begin:e,end:a})}static Capsule(e,a,h=At.Zero){const _=Vt.getInstance();return e===a&&_.warn("A capsule collider with equal width and height is a circle, consider using a ex.Shape.Circle or ex.CircleCollider"),a>=e?new So([No.Circle(e/2,It(0,-a/2+e/2).add(h)),No.Box(e,a-e,At.Half,h),No.Circle(e/2,It(0,a/2-e/2).add(h))]):new So([No.Circle(a/2,It(-e/2+a/2,0).add(h)),No.Box(e-a,a,At.Half,h),No.Circle(a/2,It(e/2-a/2,0).add(h))])}}class xo extends oo{constructor(e){super(),this.events=new dt,this.$colliderAdded=new lo,this.$colliderRemoved=new lo,this._collidersToRemove=[],this.set(e)}get(){return this._collider}set(e){return this.clear(),e&&(this._collider=e,this._collider.owner=this.owner,e.events.pipe(this.events),this.$colliderAdded.notifyAll(e),this.update()),e}clear(){this._collider&&(this._collidersToRemove.push(this._collider),this._collider=null)}processColliderRemoval(){for(const e of this._collidersToRemove)e.events.unpipe(this.events),this.$colliderRemoved.notifyAll(e),e.owner=null}clone(){return new xo(this._collider.clone())}get bounds(){var e,a;return(a=(e=this._collider)===null||e===void 0?void 0:e.bounds)!==null&&a!==void 0?a:new Wt}get localBounds(){var e,a;return(a=(e=this._collider)===null||e===void 0?void 0:e.localBounds)!==null&&a!==void 0?a:new Wt}update(){var e;const a=(e=this.owner)===null||e===void 0?void 0:e.get(hr);this._collider&&(this._collider.owner=this.owner,a&&this._collider.update(a.get()))}collide(e){let a=this._collider,h=e._collider;if(!a||!h)return[];let _=!1;if(h instanceof So&&(a=h,h=this._collider,_=!0),this._collider){const lt=a.collide(h);return lt?(_&&lt.forEach(ft=>{ft.mtv=ft.mtv.negate(),ft.normal=ft.normal.negate(),ft.tangent=ft.normal.perpendicular(),ft.colliderA=this._collider,ft.colliderB=e._collider}),lt):[]}return[]}onAdd(e){this._collider&&this.update(),this.events.on("precollision",a=>{const h=a;e.events.emit("precollision",new Ds(h.target.owner,h.other.owner,h.side,h.intersection,h.contact)),e instanceof Yo&&e.onPreCollisionResolve(h.target,h.other,h.side,h.contact)}),this.events.on("postcollision",a=>{const h=a;e.events.emit("postcollision",new Cs(h.target.owner,h.other.owner,h.side,h.intersection,h.contact)),e instanceof Yo&&e.onPostCollisionResolve(h.target,h.other,h.side,h.contact)}),this.events.on("collisionstart",a=>{const h=a;e.events.emit("collisionstart",new Vs(h.target.owner,h.other.owner,h.side,h.contact)),e instanceof Yo&&e.onCollisionStart(h.target,h.other,h.side,h.contact)}),this.events.on("collisionend",a=>{const h=a;e.events.emit("collisionend",new Mo(h.target.owner,h.other.owner,h.side,h.lastContact)),e instanceof Yo&&e.onCollisionEnd(h.target,h.other,h.side,h.lastContact)})}onRemove(){this.events.clear(),this.$colliderRemoved.notifyAll(this._collider)}useBoxCollider(e,a,h=At.Half,_=At.Zero){const lt=No.Box(e,a,h,_);return this.set(lt)}usePolygonCollider(e,a=At.Zero){const h=No.Polygon(e,a);return this.set(h)}useCircleCollider(e,a=At.Zero){const h=No.Circle(e,a);return this.set(h)}useEdgeCollider(e,a){const h=No.Edge(e,a);return this.set(h)}useCompositeCollider(e){return this.set(new So(e))}}var Uo;(function(ut){ut.Rotation="rotation",ut.X="x",ut.Y="y"})(Uo||(Uo={}));class Ur extends oo{constructor(e){var a,h,_;super(),this.dependencies=[hr,uo],this.id=ht("body",Ur._ID++),this.events=new dt,this.oldTransform=new so,this.__oldTransformCaptured=!1,this.enableFixedUpdateInterpolate=!0,this.collisionType=On.PreventCollision,this.group=hs.All,this._sleeping=!1,this.bounciness=.2,this.friction=.99,this.useGravity=!0,this.limitDegreeOfFreedom=[],this.oldVel=new At(0,0),this.oldAcc=At.Zero,e?(this.collisionType=(a=e.type)!==null&&a!==void 0?a:this.collisionType,this.group=(h=e.group)!==null&&h!==void 0?h:this.group,this.useGravity=(_=e.useGravity)!==null&&_!==void 0?_:this.useGravity,this._bodyConfig={...ao.bodies,...e.config}):this._bodyConfig={...ao.bodies},this.updatePhysicsConfig(this._bodyConfig),this._mass=Ur._DEFAULT_CONFIG.defaultMass}get matrix(){return this.transform.get().matrix}updatePhysicsConfig(e){this._bodyConfig={...ao.bodies,...e},this.canSleep=this._bodyConfig.canSleepByDefault,this.sleepMotion=this._bodyConfig.sleepEpsilon*5,this.wakeThreshold=this._bodyConfig.wakeThreshold}static updateDefaultPhysicsConfig(e){Ur._DEFAULT_CONFIG=e}get mass(){return this._mass}set mass(e){this._mass=e,this._cachedInertia=void 0,this._cachedInverseInertia=void 0}get inverseMass(){return this.collisionType===On.Fixed?0:1/this.mass}get sleeping(){return this._sleeping}setSleeping(e){this._sleeping=e,e?(this.vel=At.Zero,this.acc=At.Zero,this.angularVelocity=0,this.sleepMotion=0):this.sleepMotion=this._bodyConfig.sleepEpsilon*5}updateMotion(){this._sleeping&&this.setSleeping(!0);const e=this.vel.size*this.vel.size+Math.abs(this.angularVelocity*this.angularVelocity),a=this._bodyConfig.sleepBias;this.sleepMotion=a*this.sleepMotion+(1-a)*e,this.sleepMotion=Pt(this.sleepMotion,0,10*this._bodyConfig.sleepEpsilon),this.canSleep&&this.sleepMotion<this._bodyConfig.sleepEpsilon&&this.setSleeping(!0)}get inertia(){if(this._cachedInertia)return this._cachedInertia;const e=this.owner.get(xo);if(e){e.$colliderAdded.subscribe(()=>{this._cachedInertia=null}),e.$colliderRemoved.subscribe(()=>{this._cachedInertia=null});const a=e.get();if(a)return this._cachedInertia=a.getInertia(this.mass)}return 0}get inverseInertia(){return this._cachedInverseInertia?this._cachedInverseInertia:this._cachedInverseInertia=this.collisionType===On.Fixed?0:1/this.inertia}get active(){var e;return!!(!((e=this.owner)===null||e===void 0)&&e.active)}get center(){return this.globalPos}get transform(){var e;return(e=this.owner)===null||e===void 0?void 0:e.get(hr)}get motion(){var e;return(e=this.owner)===null||e===void 0?void 0:e.get(uo)}get pos(){return this.transform.pos}set pos(e){this.transform.pos=e}get globalPos(){return this.transform.globalPos}set globalPos(e){this.transform.globalPos=e}get oldPos(){return this.oldTransform.pos}get vel(){return this.motion.vel}set vel(e){this.motion.vel=e}get acc(){return this.motion.acc}set acc(e){this.motion.acc=e}get torque(){return this.motion.torque}set torque(e){this.motion.torque=e}get oldRotation(){return this.oldTransform.rotation}get rotation(){return this.transform.globalRotation}set rotation(e){this.transform.globalRotation=e}get scale(){return this.transform.globalScale}set scale(e){this.transform.globalScale=e}get oldScale(){return this.oldTransform.scale}get scaleFactor(){return this.motion.scaleFactor}set scaleFactor(e){this.motion.scaleFactor=e}get angularVelocity(){return this.motion.angularVelocity}set angularVelocity(e){this.motion.angularVelocity=e}applyImpulse(e,a){if(this.collisionType!==On.Active)return;const h=a.scale(this.inverseMass);if(this.limitDegreeOfFreedom.includes(Uo.X)&&(h.x=0),this.limitDegreeOfFreedom.includes(Uo.Y)&&(h.y=0),this.vel.addEqual(h),!this.limitDegreeOfFreedom.includes(Uo.Rotation)){const _=e.sub(this.globalPos);this.angularVelocity+=this.inverseInertia*_.cross(a)}}applyLinearImpulse(e){if(this.collisionType!==On.Active)return;const a=e.scale(this.inverseMass);this.limitDegreeOfFreedom.includes(Uo.X)&&(a.x=0),this.limitDegreeOfFreedom.includes(Uo.Y)&&(a.y=0),this.vel=this.vel.add(a)}applyAngularImpulse(e,a){if(this.collisionType===On.Active&&!this.limitDegreeOfFreedom.includes(Uo.Rotation)){const h=e.sub(this.globalPos);this.angularVelocity+=this.inverseInertia*h.cross(a)}}captureOldTransform(){this.__oldTransformCaptured=!0;const e=this.transform.get();e.clone(this.oldTransform),this.oldTransform.parent=e.parent,this.oldVel.setTo(this.vel.x,this.vel.y),this.oldAcc.setTo(this.acc.x,this.acc.y)}clone(){return super.clone()}}Ur._ID=0,Ur._DEFAULT_CONFIG={...ao.bodies};class Ju{constructor(e){this.data=e,this.type="Component Added"}}function _h(ut){return!!ut&&ut.type==="Component Added"}class Mu{constructor(e){this.data=e,this.type="Component Removed"}}function _d(ut){return!!ut&&ut.type==="Component Removed"}const _f={Initialize:"initialize",PreUpdate:"preupdate",PostUpdate:"postupdate",Kill:"kill"};class jo{constructor(e,a){this.id=jo._ID++,this.name=`Entity#${this.id}`,this.events=new dt,this._tags=new Set,this.componentAdded$=new lo,this.componentRemoved$=new lo,this.tagAdded$=new lo,this.tagRemoved$=new lo,this.components=new Map,this._componentsToRemove=[],this._instanceOfComponentCacheDirty=!0,this._instanceOfComponentCache=new Map,this.scene=null,this.active=!0,this._parent=null,this.childrenAdded$=new lo,this.childrenRemoved$=new lo,this._children=[],this._isInitialized=!1;let h,_;if(Array.isArray(e))h=e,_=a;else if(e&&typeof e=="object"){const{components:lt,name:ft}=e;h=lt??[],_=ft}if(_&&(this.name=_),h)for(const lt of h)this.addComponent(lt)}kill(){this.active&&(this.active=!1,this.unparent()),this.emit("kill",new Bo(this))}isKilled(){return!this.active}get tags(){return this._tags}hasTag(e){return this._tags.has(e)}addTag(e){return this._tags.add(e),this.tagAdded$.notifyAll(e),this}removeTag(e){return this._tags.delete(e),this.tagRemoved$.notifyAll(e),this}get types(){return Array.from(this.components.keys())}getComponents(){return Array.from(this.components.values())}hasAll(e){for(let a=0;a<e.length;a++)if(!this.components.has(e[a]))return!1;return!0}hasAllTags(e){for(let a=0;a<e.length;a++)if(!this.tags.has(e[a]))return!1;return!0}_getCachedInstanceOfType(e){if(this._instanceOfComponentCacheDirty&&(this._instanceOfComponentCacheDirty=!1,this._instanceOfComponentCache.clear()),this._instanceOfComponentCache.has(e))return this._instanceOfComponentCache.get(e);for(const a of this.components.values())if(a instanceof e)return this._instanceOfComponentCache.set(e,a),a}get(e){const a=this._getCachedInstanceOfType(e);return a??this.components.get(e)}get parent(){return this._parent}get children(){return this._children}unparent(){this._parent&&(this._parent.removeChild(this),this._parent=null)}addChild(e){if(e.parent===null){if(this.getAncestors().includes(e))throw new Error("Cycle detected, cannot add entity");this._children.push(e),e._parent=this,this.childrenAdded$.notifyAll(e)}else throw new Error("Entity already has a parent, cannot add without unparenting");return this}removeChild(e){return e.parent===this&&(Xt(e,this._children),e._parent=null,this.childrenRemoved$.notifyAll(e)),this}removeAllChildren(){for(let e=this.children.length-1;e>=0;e--)this.removeChild(this.children[e]);return this}getAncestors(){const e=[this];let a=this.parent;for(;a;)e.push(a),a=a.parent;return e.reverse()}getDescendants(){let e=[this],a=[this];for(;a.length>0;){const h=a.pop();h&&(a=a.concat(h.children),e=e.concat(h.children))}return e}clone(){const e=new jo;for(const a of this.types){const h=this.get(a);h&&e.addComponent(h.clone())}for(const a of this.children)e.addChild(a.clone());return e}addTemplate(e,a=!1){for(const h of e.getComponents())this.addComponent(h.clone(),a);for(const h of e.children)this.addChild(h.clone().addTemplate(h));return this}addComponent(e,a=!1){if(this._instanceOfComponentCacheDirty=!0,this.has(e.constructor))if(a)this.removeComponent(e.constructor,!0);else return this;if(e.dependencies&&e.dependencies.length)for(const h of e.dependencies)this.addComponent(new h);return e.owner=this,this.components.set(e.constructor,e),e.onAdd&&e.onAdd(this),this.componentAdded$.notifyAll(e),this}removeComponent(e,a=!1){let h;if(To(e)?h=e:h=e.constructor,a){const _=this.components.get(h);_&&(this.componentRemoved$.notifyAll(_),_.owner=void 0,_.onRemove&&_.onRemove(this)),this.components.delete(h),this._instanceOfComponentCacheDirty=!0}else this._componentsToRemove.push(h);return this}clearComponents(){const e=this.types;for(const a of e)this.removeComponent(a)}processComponentRemoval(){for(const e of this._componentsToRemove)this.removeComponent(e,!0);this._componentsToRemove.length=0}has(e){return this.components.has(e)}get isInitialized(){return this._isInitialized}_initialize(e){this.isInitialized||(this.onInitialize(e),this.events.emit("initialize",new Ns(e,this)),this._isInitialized=!0)}_preupdate(e,a){this.events.emit("preupdate",new ys(e,a,this)),this.onPreUpdate(e,a)}_postupdate(e,a){this.events.emit("postupdate",new As(e,a,this)),this.onPostUpdate(e,a)}onInitialize(e){}onPreUpdate(e,a){}onPostUpdate(e,a){}update(e,a){this._initialize(e),this._preupdate(e,a);for(const h of this.children)h.update(e,a);this._postupdate(e,a)}emit(e,a){this.events.emit(e,a)}on(e,a){return this.events.on(e,a)}once(e,a){return this.events.once(e,a)}off(e,a){a?this.events.off(e,a):this.events.off(e)}}jo._ID=0;var Ol;(function(ut){ut.Forward="forward",ut.Backward="backward"})(Ol||(Ol={}));var Jo;(function(ut){ut.End="end",ut.Loop="loop",ut.PingPong="pingpong",ut.Freeze="freeze"})(Jo||(Jo={}));const tp={Frame:"frame",Loop:"loop",End:"end"};class ps extends cn{constructor(e){var a,h,_;super(e),this.events=new dt,this.frames=[],this.strategy=Jo.Loop,this.frameDuration=100,this._idempotencyToken=-1,this._firstTick=!0,this._currentFrame=0,this._timeLeftInFrame=0,this._pingPongDirection=1,this._done=!1,this._playing=!0,this._speed=1,this._reversed=!1,this.frames=e.frames,this.speed=(a=e.speed)!==null&&a!==void 0?a:this.speed,this.strategy=(h=e.strategy)!==null&&h!==void 0?h:this.strategy,this.frameDuration=e.totalDuration?e.totalDuration/this.frames.length:(_=e.frameDuration)!==null&&_!==void 0?_:this.frameDuration,e.reverse&&this.reverse(),this.goToFrame(0)}clone(){return new ps({frames:this.frames.map(e=>({...e})),frameDuration:this.frameDuration,speed:this.speed,reverse:this._reversed,strategy:this.strategy,...this.cloneGraphicOptions()})}get width(){const e=this.currentFrame;return e?Math.abs(e.graphic.width*this.scale.x):0}get height(){const e=this.currentFrame;return e?Math.abs(e.graphic.height*this.scale.y):0}static fromSpriteSheet(e,a,h,_=Jo.Loop){const lt=e.sprites.length-1,ft=a.filter(mt=>mt<0||mt>lt);return ft.length&&ps._LOGGER.warn(`Indices into SpriteSheet were provided that don't exist: ${ft.join(",")} no frame will be shown`),new ps({frames:e.sprites.filter((mt,kt)=>a.indexOf(kt)>-1).map(mt=>({graphic:mt,duration:h})),strategy:_})}static fromSpriteSheetCoordinates(e){const{spriteSheet:a,frameCoordinates:h,durationPerFrameMs:_,speed:lt,strategy:ft,reverse:mt}=e,kt=_??100,Rt=[];for(const Mt of h){const{x:Nt,y:en,duration:an,options:un}=Mt,wn=a.getSprite(Nt,en,un);wn?Rt.push({graphic:wn,duration:an??kt}):ps._LOGGER.warn(`Skipping frame! SpriteSheet does not have coordinate (${Nt}, ${en}), please check your SpriteSheet to confirm that sprite exists`)}return new ps({frames:Rt,strategy:ft,speed:lt,reverse:mt})}get speed(){return this._speed}set speed(e){this._speed=Pt(Math.abs(e),0,1/0)}get currentFrame(){return this._currentFrame>=0&&this._currentFrame<this.frames.length?this.frames[this._currentFrame]:null}get currentFrameIndex(){return this._currentFrame}get currentFrameTimeLeft(){return this._timeLeftInFrame}get isPlaying(){return this._playing}reverse(){this.frames=this.frames.slice().reverse(),this._reversed=!this._reversed}get direction(){return!!(this._reversed&&this._pingPongDirection===1)?Ol.Backward:Ol.Forward}play(){this._playing=!0}pause(){this._playing=!1,this._firstTick=!0}reset(){this._done=!1,this._firstTick=!0,this._currentFrame=0,this._timeLeftInFrame=this.frameDuration;const e=this.frames[this._currentFrame];e&&(this._timeLeftInFrame=e?.duration||this.frameDuration)}get canFinish(){switch(this.strategy){case Jo.End:case Jo.Freeze:return!0;default:return!1}}get done(){return this._done}goToFrame(e,a){this._currentFrame=e,this._timeLeftInFrame=a??this.frameDuration;const h=this.frames[this._currentFrame];h&&!this._done&&(this._timeLeftInFrame=a??(h?.duration||this.frameDuration),this.events.emit("frame",{...h,frameIndex:this.currentFrameIndex}))}_nextFrame(){const e=this._currentFrame;if(this._done)return e;let a=-1;switch(this.strategy){case Jo.Loop:{a=(e+1)%this.frames.length,a===0&&this.events.emit("loop",this);break}case Jo.End:{a=e+1,a>=this.frames.length&&(this._done=!0,this._currentFrame=this.frames.length,this.events.emit("end",this));break}case Jo.Freeze:{a=Pt(e+1,0,this.frames.length-1),a>=this.frames.length-1&&(this._done=!0,this.events.emit("end",this));break}case Jo.PingPong:{e+this._pingPongDirection>=this.frames.length&&(this._pingPongDirection=-1,this.events.emit("loop",this)),e+this._pingPongDirection<0&&(this._pingPongDirection=1,this.events.emit("loop",this)),a=e+this._pingPongDirection%this.frames.length;break}}return a}tick(e,a=0){this._idempotencyToken!==a&&(this._idempotencyToken=a,this._playing&&(this._firstTick&&(this._firstTick=!1,this.events.emit("frame",{...this.currentFrame,frameIndex:this.currentFrameIndex})),this._timeLeftInFrame-=e*this._speed,this._timeLeftInFrame<=0&&this.goToFrame(this._nextFrame())))}_drawImage(e,a,h){this.currentFrame&&this.currentFrame.graphic.draw(e,a,h)}}ps._LOGGER=Vt.getInstance();class os extends cn{constructor(e){var a;super(e),this._logger=Vt.getInstance(),this.useAnchor=!0,this.members=[],this.members=e.members,this.useAnchor=(a=e.useAnchor)!==null&&a!==void 0?a:this.useAnchor,this._updateDimensions()}clone(){return new os({members:[...this.members],...this.cloneGraphicOptions()})}_updateDimensions(){const e=this.localBounds;return this.width=e.width,this.height=e.height,e}get localBounds(){let e=new Wt;for(const a of this.members)if(a instanceof cn)e=a.localBounds.combine(e);else{const{graphic:h,offset:_,useBounds:lt}=a;h?(lt===void 0?!0:lt)&&(e=h.localBounds.translate(_).combine(e)):this._logger.warnOnce(`Graphics group member has an null or undefined graphic, member definition: ${JSON.stringify(a)}.`)}return e}_isAnimationOrGroup(e){return e instanceof ps||e instanceof os}tick(e,a){for(const h of this.members){let _;h instanceof cn?_=h:_=h.graphic,this._isAnimationOrGroup(_)&&_.tick(e,a)}}reset(){for(const e of this.members){let a;e instanceof cn?a=e:a=e.graphic,this._isAnimationOrGroup(a)&&a.reset()}}_preDraw(e,a,h){this._updateDimensions(),super._preDraw(e,this.useAnchor?a:0,this.useAnchor?h:0)}_drawImage(e,a,h){const _=At.Zero;for(const lt of this.members){let ft;lt instanceof cn?ft=lt:(ft=lt.graphic,lt.offset.clone(_)),ft&&(e.save(),e.translate(a,h),ft.draw(e,_.x,_.y),this.showDebug&&e.debug.drawRect(0,0,this.width,this.height),e.restore())}}}function bu(ut){return!!ut.tick}class Do extends oo{get offset(){return new io(this._offset,()=>{this.recalculateBounds()})}set offset(e){this._offset=e,this.recalculateBounds()}get anchor(){return new io(this._anchor,()=>{this.recalculateBounds()})}set anchor(e){this._anchor=e,this.recalculateBounds()}constructor(e){super(),this._logger=Vt.getInstance(),this._current="default",this._graphics={},this._options={},this.material=null,this.visible=!0,this.opacity=1,this._offset=At.Zero,this._anchor=At.Half,this.flipHorizontal=!1,this.flipVertical=!1,this.copyGraphics=!1,this._localBounds=null,e={visible:this.visible,graphics:{},...e};const{current:a,anchor:h,opacity:_,visible:lt,graphics:ft,offset:mt,copyGraphics:kt,onPreDraw:Rt,onPostDraw:Mt,onPreTransformDraw:Nt,onPostTransformDraw:en}=e;for(const[an,un]of Object.entries(ft))un instanceof cn?this._graphics[an]=un:(this._graphics[an]=un.graphic,this._options[an]=un.options);this.offset=mt??this.offset,this.opacity=_??this.opacity,this.anchor=h??this.anchor,this.copyGraphics=kt??this.copyGraphics,this.onPreDraw=Rt??this.onPreDraw,this.onPostDraw=Mt??this.onPostDraw,this.onPreDraw=Nt??this.onPreTransformDraw,this.onPostTransformDraw=en??this.onPostTransformDraw,this.visible=!!lt,this._current=a??this._current,a&&this._graphics[a]&&this.use(a)}getGraphic(e){return this._graphics[e]}getOptions(e){return this._options[e]}getNames(){return Object.keys(this._graphics)}get current(){return this._graphics[this._current]}get currentOptions(){return this._options[this._current]}get graphics(){return this._graphics}get options(){return this._options}add(e,a,h){let _="default",lt=null,ft;return typeof e=="string"&&a instanceof cn&&(_=e,lt=a,ft=h),e instanceof cn&&!(a instanceof cn)&&(lt=e,ft=a),this._graphics[_]=this.copyGraphics?lt.clone():lt,this._options[_]=this.copyGraphics?{...ft}:ft,_==="default"&&this.use("default"),lt}remove(e){delete this._graphics[e],delete this._options[e],this._current===e&&(this._current="default",this.recalculateBounds())}show(e,a){return this.use(e,a)}use(e,a){var h;if(e instanceof cn){let _=e;this.copyGraphics&&(_=e.clone()),this._current="default",this._graphics[this._current]=_,this._options[this._current]=a}else this._current=e,this._options[this._current]=a,this._current in this._graphics||this._logger.warn(`Graphic ${this._current} is not registered with the graphics component owned by ${(h=this.owner)===null||h===void 0?void 0:h.name}. Nothing will be drawn.`);return this.recalculateBounds(),this.current}hide(){this._current="ex.none"}set localBounds(e){this._localBounds=e}recalculateBounds(){let e=new Wt;const a=this._graphics[this._current],h=this._options[this._current];if(!a){this._localBounds=e;return}let _=this.anchor,lt=this.offset;h?.anchor&&(_=h.anchor),h?.offset&&(lt=h.offset);const ft=a.localBounds,mt=-ft.width*_.x+lt.x,kt=-ft.height*_.y+lt.y;a instanceof os&&!a.useAnchor?e=a?.localBounds.combine(e):e=a?.localBounds.translate(It(mt,kt)).combine(e),this._localBounds=e}get localBounds(){return(!this._localBounds||this._localBounds.hasZeroDimensions())&&this.recalculateBounds(),this._localBounds}get bounds(){let e=this.localBounds;if(this.owner){const a=this.owner.get(hr);a&&(e=e.transform(a.get().matrix))}return e}update(e,a=0){const h=this.current;h&&bu(h)&&h.tick(e,a)}clone(){const e=new Do;return e._graphics={...this._graphics},e._options={...this._options},e.offset=this.offset.clone(),e.opacity=this.opacity,e.anchor=this.anchor.clone(),e.copyGraphics=this.copyGraphics,e.onPreDraw=this.onPreDraw,e.onPostDraw=this.onPostDraw,e.visible=this.visible,e}}class zl extends no{constructor(e){super(e),this.width=e.width,this.height=e.height,this.rasterize()}clone(){return new zl({width:this.width,height:this.height,...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(e){this.color&&e.fillRect(0,0,this.width,this.height),this.strokeColor&&e.strokeRect(0,0,this.width,this.height)}}class eu extends no{get radius(){return this._radius}set radius(e){this._radius=e,this.width=this._radius*2,this.height=this._radius*2,this.flagDirty()}constructor(e){var a,h,_;super(e),this._radius=0;const lt=(a=e.lineWidth)!==null&&a!==void 0?a:e.strokeColor?1:0;this.padding=(h=e.padding)!==null&&h!==void 0?h:2+lt/2,this.radius=e.radius,this.filtering=(_=e.filtering)!==null&&_!==void 0?_:En.Blended,this.rasterize()}clone(){return new eu({radius:this.radius,...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(e){this.radius>0&&(e.beginPath(),e.arc(this.radius,this.radius,this.radius,0,Math.PI*2),this.color&&e.fill(),this.strokeColor&&e.stroke())}}class Es extends oo{constructor(e){var a,h;super(),this.useColliderShape=!0,this.useGraphicsBounds=!0,this.useColliderShape=(a=e?.useColliderShape)!==null&&a!==void 0?a:this.useColliderShape,this.useGraphicsBounds=(h=e?.useGraphicsBounds)!==null&&h!==void 0?h:this.useGraphicsBounds,this.localBounds=e?.localBounds}}class vo{static CreateReversibleEasingFunction(e){return(a,h,_,lt)=>_<h?h-(e(a,_,h,lt)-_):e(a,h,_,lt)}static CreateVectorEasingFunction(e){return(a,h,_,lt)=>new At(e(a,h.x,_.x,lt),e(a,h.y,_.y,lt))}}vo.Linear=vo.CreateReversibleEasingFunction((ut,e,a,h)=>(a=a-e,a*ut/h+e)),vo.EaseInQuad=vo.CreateReversibleEasingFunction((ut,e,a,h)=>(a=a-e,ut/=h,a*ut*ut+e)),vo.EaseOutQuad=vo.CreateReversibleEasingFunction((ut,e,a,h)=>(a=a-e,ut/=h,-a*ut*(ut-2)+e)),vo.EaseInOutQuad=vo.CreateReversibleEasingFunction((ut,e,a,h)=>(a=a-e,ut/=h/2,ut<1?a/2*ut*ut+e:(ut--,-a/2*(ut*(ut-2)-1)+e))),vo.EaseInCubic=vo.CreateReversibleEasingFunction((ut,e,a,h)=>(a=a-e,ut/=h,a*ut*ut*ut+e)),vo.EaseOutCubic=vo.CreateReversibleEasingFunction((ut,e,a,h)=>(a=a-e,ut/=h,ut--,a*(ut*ut*ut+1)+e)),vo.EaseInOutCubic=vo.CreateReversibleEasingFunction((ut,e,a,h)=>(a=a-e,ut/=h/2,ut<1?a/2*ut*ut*ut+e:(ut-=2,a/2*(ut*ut*ut+2)+e)));class Fu{constructor(e){this._actions=[],this._currentAction=null,this._completedActions=[],this._entity=e}add(e){this._actions.push(e)}remove(e){const a=this._actions.indexOf(e);this._actions.splice(a,1)}clearActions(){this._actions.length=0,this._completedActions.length=0,this._currentAction&&this._currentAction.stop()}getActions(){return this._actions.concat(this._completedActions)}hasNext(){return this._actions.length>0}isComplete(){return this._actions.length===0}reset(){this._actions=this.getActions();const e=this._actions.length;for(let a=0;a<e;a++)this._actions[a].reset();this._completedActions=[]}update(e){if(this._actions.length>0&&(this._currentAction!==this._actions[0]&&(this._currentAction=this._actions[0],this._entity.emit("actionstart",new Ms(this._currentAction,this._entity))),this._currentAction.update(e),this._currentAction.isComplete(this._entity))){this._entity.emit("actioncomplete",new Dl(this._currentAction,this._entity));const a=this._actions.shift();a&&this._completedActions.push(a)}}}class Bu{constructor(e,a,h){this._stopped=!1,this._repeatBuilder=a,this._repeatContext=new $a(e),this._actionQueue=this._repeatContext.getQueue(),this._repeat=h,this._originalRepeat=h,this._repeatBuilder(this._repeatContext),this._repeat--}update(e){this._actionQueue.isComplete()&&(this._actionQueue.clearActions(),this._repeatBuilder(this._repeatContext),this._repeat--),this._actionQueue.update(e)}isComplete(){return this._stopped||this._repeat<=0&&this._actionQueue.isComplete()}stop(){this._stopped=!0}reset(){this._repeat=this._originalRepeat}}class xu{constructor(e,a){this._stopped=!1,this._repeatBuilder=a,this._repeatContext=new $a(e),this._actionQueue=this._repeatContext.getQueue(),this._repeatBuilder(this._repeatContext)}update(e){this._stopped||(this._actionQueue.isComplete()&&(this._actionQueue.clearActions(),this._repeatBuilder(this._repeatContext)),this._actionQueue.update(e))}isComplete(){return this._stopped}stop(){this._stopped=!0,this._actionQueue.clearActions()}reset(){}}class Ou{constructor(e,a,h,_){if(this._started=!1,this._stopped=!1,this._entity=e,this._tx=e.get(hr),this._motion=e.get(uo),this._speed=_,this._offset=new At(a,h),_<=0)throw Vt.getInstance().error("Attempted to moveBy with speed less than or equal to zero : "+_),new Error("Speed must be greater than 0 pixels per second")}update(e){this._started||(this._started=!0,this._start=new At(this._tx.pos.x,this._tx.pos.y),this._end=this._start.add(this._offset),this._distance=this._offset.size,this._dir=this._end.sub(this._start).normalize()),this.isComplete(this._entity)?(this._tx.pos=It(this._end.x,this._end.y),this._motion.vel=It(0,0)):this._motion.vel=this._dir.scale(this._speed)}isComplete(e){const a=e.get(hr);return this._stopped||a.pos.distance(this._start)>=this._distance}stop(){this._motion.vel=It(0,0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class nu{constructor(e,a,h,_){this.entity=e,this._started=!1,this._stopped=!1,this._tx=e.get(hr),this._motion=e.get(uo),this._end=new At(a,h),this._speed=_}update(e){this._started||(this._started=!0,this._start=new At(this._tx.pos.x,this._tx.pos.y),this._distance=this._start.distance(this._end),this._dir=this._end.sub(this._start).normalize());const a=this._dir.scale(this._speed);this._motion.vel=It(a.x,a.y),this.isComplete(this.entity)&&(this._tx.pos=It(this._end.x,this._end.y),this._motion.vel=It(0,0))}isComplete(e){const a=e.get(hr);return this._stopped||new At(a.pos.x,a.pos.y).distance(this._start)>=this._distance}stop(){this._motion.vel=It(0,0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}var ss;(function(ut){ut[ut.ShortestPath=0]="ShortestPath",ut[ut.LongestPath=1]="LongestPath",ut[ut.Clockwise=2]="Clockwise",ut[ut.CounterClockwise=3]="CounterClockwise"})(ss||(ss={}));class zu{constructor(e,a,h,_){this._started=!1,this._stopped=!1,this._tx=e.get(hr),this._motion=e.get(uo),this._end=a,this._speed=h,this._rotationType=_||ss.ShortestPath}update(e){if(!this._started){this._started=!0,this._start=this._tx.rotation,this._currentNonCannonAngle=this._tx.rotation;const a=Math.abs(this._end-this._start),h=St-a;switch(a>h?(this._shortDistance=h,this._longDistance=a):(this._shortDistance=a,this._longDistance=h),this._shortestPathIsPositive=(this._start-this._end+St)%St>=Math.PI,this._rotationType){case ss.ShortestPath:this._distance=this._shortDistance,this._shortestPathIsPositive?this._direction=1:this._direction=-1;break;case ss.LongestPath:this._distance=this._longDistance,this._shortestPathIsPositive?this._direction=-1:this._direction=1;break;case ss.Clockwise:this._direction=1,this._shortestPathIsPositive?this._distance=this._shortDistance:this._distance=this._longDistance;break;case ss.CounterClockwise:this._direction=-1,this._shortestPathIsPositive?this._distance=this._longDistance:this._distance=this._shortDistance;break}}this._motion.angularVelocity=this._direction*this._speed,this._currentNonCannonAngle+=this._direction*this._speed*(e/1e3),this.isComplete()&&(this._tx.rotation=this._end,this._motion.angularVelocity=0,this._stopped=!0)}isComplete(){const e=Math.abs(this._currentNonCannonAngle-this._start);return this._stopped||e>=Math.abs(this._distance)}stop(){this._motion.angularVelocity=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class Au{constructor(e,a,h,_){this._started=!1,this._stopped=!1,this._tx=e.get(hr),this._motion=e.get(uo),this._speed=h,this._offset=a,this._rotationType=_||ss.ShortestPath}update(e){if(!this._started){this._started=!0,this._start=this._tx.rotation,this._currentNonCannonAngle=this._tx.rotation,this._end=this._start+this._offset;const a=Math.abs(this._end-this._start),h=St-a;switch(a>h?(this._shortDistance=h,this._longDistance=a):(this._shortDistance=a,this._longDistance=h),this._shortestPathIsPositive=(this._start-this._end+St)%St>=Math.PI,this._rotationType){case ss.ShortestPath:this._distance=this._shortDistance,this._shortestPathIsPositive?this._direction=1:this._direction=-1;break;case ss.LongestPath:this._distance=this._longDistance,this._shortestPathIsPositive?this._direction=-1:this._direction=1;break;case ss.Clockwise:this._direction=1,this._shortDistance>=0?this._distance=this._shortDistance:this._distance=this._longDistance;break;case ss.CounterClockwise:this._direction=-1,this._shortDistance<=0?this._distance=this._shortDistance:this._distance=this._longDistance;break}}this._motion.angularVelocity=this._direction*this._speed,this._currentNonCannonAngle+=this._direction*this._speed*(e/1e3),this.isComplete()&&(this._tx.rotation=this._end,this._motion.angularVelocity=0,this._stopped=!0)}isComplete(){const e=Math.abs(this._currentNonCannonAngle-this._start);return this._stopped||e>=Math.abs(this._distance)}stop(){this._motion.angularVelocity=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1,this._start=void 0,this._currentNonCannonAngle=void 0,this._distance=void 0}}class Ll{constructor(e,a,h,_,lt){this._started=!1,this._stopped=!1,this._tx=e.get(hr),this._motion=e.get(uo),this._endX=a,this._endY=h,this._speedX=_,this._speedY=lt}update(e){if(this._started||(this._started=!0,this._startX=this._tx.scale.x,this._startY=this._tx.scale.y,this._distanceX=Math.abs(this._endX-this._startX),this._distanceY=Math.abs(this._endY-this._startY)),Math.abs(this._tx.scale.x-this._startX)>=this._distanceX)this._motion.scaleFactor.x=0;else{const a=this._endY<this._startY?-1:1;this._motion.scaleFactor.x=this._speedX*a}if(Math.abs(this._tx.scale.y-this._startY)>=this._distanceY)this._motion.scaleFactor.y=0;else{const a=this._endY<this._startY?-1:1;this._motion.scaleFactor.y=this._speedY*a}this.isComplete()&&(this._tx.scale=It(this._endX,this._endY),this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0)}isComplete(){return this._stopped||Math.abs(this._tx.scale.x-this._startX)>=this._distanceX-.01&&Math.abs(this._tx.scale.y-this._startY)>=this._distanceY-.01}stop(){this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class Nl{constructor(e,a,h,_){this._started=!1,this._stopped=!1,this._tx=e.get(hr),this._motion=e.get(uo),this._offset=new At(a,h),this._speedX=this._speedY=_}update(e){this._started||(this._started=!0,this._startScale=this._tx.scale.clone(),this._endScale=this._startScale.add(this._offset),this._distanceX=Math.abs(this._endScale.x-this._startScale.x),this._distanceY=Math.abs(this._endScale.y-this._startScale.y),this._directionX=this._endScale.x<this._startScale.x?-1:1,this._directionY=this._endScale.y<this._startScale.y?-1:1),this._motion.scaleFactor.x=this._speedX*this._directionX,this._motion.scaleFactor.y=this._speedY*this._directionY,this.isComplete()&&(this._tx.scale=this._endScale,this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0)}isComplete(){return this._stopped||Math.abs(this._tx.scale.x-this._startScale.x)>=this._distanceX-.01&&Math.abs(this._tx.scale.y-this._startScale.y)>=this._distanceY-.01}stop(){this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class Lu{constructor(e){this._method=null,this._hasBeenCalled=!1,this._method=e}update(e){this._method(),this._hasBeenCalled=!0}isComplete(){return this._hasBeenCalled}reset(){this._hasBeenCalled=!1}stop(){this._hasBeenCalled=!0}}class Nu{constructor(e,a,h,_,lt){this.easingFcn=lt,this._currentLerpTime=0,this._lerpDuration=1*1e3,this._lerpStart=new At(0,0),this._lerpEnd=new At(0,0),this._initialized=!1,this._stopped=!1,this._tx=e.get(hr),this._motion=e.get(uo),this._lerpDuration=_,this._lerpEnd=new At(a,h)}_initialize(){this._lerpStart=new At(this._tx.pos.x,this._tx.pos.y),this._currentLerpTime=0}update(e){this._initialized||(this._initialize(),this._initialized=!0),this._currentLerpTime+=e;let a=this._tx.pos.x,h=this._tx.pos.y;this._currentLerpTime<this._lerpDuration?(this._lerpEnd.x<this._lerpStart.x?a=this._lerpStart.x-(this.easingFcn(this._currentLerpTime,this._lerpEnd.x,this._lerpStart.x,this._lerpDuration)-this._lerpEnd.x):a=this.easingFcn(this._currentLerpTime,this._lerpStart.x,this._lerpEnd.x,this._lerpDuration),this._lerpEnd.y<this._lerpStart.y?h=this._lerpStart.y-(this.easingFcn(this._currentLerpTime,this._lerpEnd.y,this._lerpStart.y,this._lerpDuration)-this._lerpEnd.y):h=this.easingFcn(this._currentLerpTime,this._lerpStart.y,this._lerpEnd.y,this._lerpDuration),this._motion.vel=It((a-this._tx.pos.x)/(e/1e3),(h-this._tx.pos.y)/(e/1e3))):(this._tx.pos=It(this._lerpEnd.x,this._lerpEnd.y),this._motion.vel=At.Zero)}isComplete(){return this._stopped||this._currentLerpTime>=this._lerpDuration}reset(){this._initialized=!1,this._stopped=!1,this._currentLerpTime=0}stop(){this._motion.vel=It(0,0),this._stopped=!0}}class Cu{constructor(e,a,h,_,lt){this.easingFcn=lt,this._currentLerpTime=0,this._lerpDuration=1*1e3,this._lerpStart=new At(0,0),this._lerpEnd=new At(0,0),this._initialized=!1,this._stopped=!1,this._tx=e.get(hr),this._motion=e.get(uo),this._lerpDuration=_,this._offset=new At(a,h)}_initialize(){this._lerpStart=new At(this._tx.pos.x,this._tx.pos.y),this._currentLerpTime=0,this._lerpEnd=this._lerpStart.add(this._offset)}update(e){this._initialized||(this._initialize(),this._initialized=!0),this._currentLerpTime+=e;let a=this._tx.pos.x,h=this._tx.pos.y;this._currentLerpTime<this._lerpDuration?(this._lerpEnd.x<this._lerpStart.x?a=this._lerpStart.x-(this.easingFcn(this._currentLerpTime,this._lerpEnd.x,this._lerpStart.x,this._lerpDuration)-this._lerpEnd.x):a=this.easingFcn(this._currentLerpTime,this._lerpStart.x,this._lerpEnd.x,this._lerpDuration),this._lerpEnd.y<this._lerpStart.y?h=this._lerpStart.y-(this.easingFcn(this._currentLerpTime,this._lerpEnd.y,this._lerpStart.y,this._lerpDuration)-this._lerpEnd.y):h=this.easingFcn(this._currentLerpTime,this._lerpStart.y,this._lerpEnd.y,this._lerpDuration),this._motion.vel=It((a-this._tx.pos.x)/(e/1e3),(h-this._tx.pos.y)/(e/1e3))):(this._tx.pos=It(this._lerpEnd.x,this._lerpEnd.y),this._motion.vel=At.Zero)}isComplete(){return this._stopped||this._currentLerpTime>=this._lerpDuration}reset(){this._initialized=!1,this._stopped=!1,this._currentLerpTime=0}stop(){this._motion.vel=It(0,0),this._stopped=!0}}class ju{constructor(e,a,h,_=1){this._timeVisible=0,this._timeNotVisible=0,this._elapsedTime=0,this._totalTime=0,this._stopped=!1,this._started=!1,this._graphics=e.get(Do),this._timeVisible=a,this._timeNotVisible=h,this._duration=(a+h)*_}update(e){this._started||(this._started=!0,this._elapsedTime=0,this._totalTime=0),this._graphics&&(this._elapsedTime+=e,this._totalTime+=e,this._graphics.visible&&this._elapsedTime>=this._timeVisible&&(this._graphics.visible=!1,this._elapsedTime=0),!this._graphics.visible&&this._elapsedTime>=this._timeNotVisible&&(this._graphics.visible=!0,this._elapsedTime=0),this.isComplete()&&(this._graphics.visible=!0))}isComplete(){return this._stopped||this._totalTime>=this._duration}stop(){this._graphics&&(this._graphics.visible=!0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1,this._elapsedTime=0,this._totalTime=0}}class $u{constructor(e,a,h){this._multiplier=1,this._started=!1,this._stopped=!1,this._graphics=e.get(Do),this._endOpacity=a,this._speed=this._ogspeed=h}update(e){this._graphics&&(this._started||(this._started=!0,this._speed=this._ogspeed,this._endOpacity<this._graphics.opacity?this._multiplier=-1:this._multiplier=1),this._speed>0&&(this._graphics.opacity+=this._multiplier*(Math.abs(this._graphics.opacity-this._endOpacity)*e)/this._speed),this._speed-=e,this.isComplete()&&(this._graphics.opacity=this._endOpacity),Vt.getInstance().debug("[Action fade] Actor opacity:",this._graphics.opacity))}isComplete(){return this._stopped||Math.abs(this._graphics.opacity-this._endOpacity)<.05}stop(){this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class Hu{constructor(e){this._elapsedTime=0,this._started=!1,this._stopped=!1,this._delay=e}update(e){this._started||(this._started=!0),this._elapsedTime+=e}isComplete(){return this._stopped||this._elapsedTime>=this._delay}stop(){this._stopped=!0}reset(){this._elapsedTime=0,this._started=!1,this._stopped=!1}}class Uu{constructor(e){this._stopped=!1,this._entity=e}update(e){this._entity.get(_l).clearActions(),this._entity.kill(),this._stopped=!0}isComplete(){return this._stopped}stop(){}reset(){}}class ku{constructor(e,a,h){this._started=!1,this._stopped=!1,this._tx=e.get(hr),this._motion=e.get(uo),this._followTx=a.get(hr),this._followMotion=a.get(uo),this._current=new At(this._tx.pos.x,this._tx.pos.y),this._end=new At(this._followTx.pos.x,this._followTx.pos.y),this._maximumDistance=h!==void 0?h:this._current.distance(this._end),this._speed=0}update(e){this._started||(this._started=!0,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize());const a=Math.sqrt(Math.pow(this._followMotion.vel.x,2)+Math.pow(this._followMotion.vel.y,2));if(a!==0&&(this._speed=a),this._current=It(this._tx.pos.x,this._tx.pos.y),this._end=It(this._followTx.pos.x,this._followTx.pos.y),this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize(),this._distanceBetween>=this._maximumDistance){const h=this._dir.scale(this._speed);this._motion.vel=It(h.x,h.y)}else this._motion.vel=It(0,0);this.isComplete()&&(this._tx.pos=It(this._end.x,this._end.y),this._motion.vel=It(0,0))}stop(){this._motion.vel=It(0,0),this._stopped=!0}isComplete(){return this._stopped}reset(){this._started=!1,this._stopped=!1}}class iu{constructor(e,a,h){this._started=!1,this._stopped=!1,this._speedWasSpecified=!1,this._tx=e.get(hr),this._motion=e.get(uo),this._meetTx=a.get(hr),this._meetMotion=a.get(uo),this._current=new At(this._tx.pos.x,this._tx.pos.y),this._end=new At(this._meetTx.pos.x,this._meetTx.pos.y),this._speed=h||0,h!==void 0&&(this._speedWasSpecified=!0)}update(e){this._started||(this._started=!0,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize());const a=Math.sqrt(Math.pow(this._meetMotion.vel.x,2)+Math.pow(this._meetMotion.vel.y,2));a!==0&&!this._speedWasSpecified&&(this._speed=a),this._current=It(this._tx.pos.x,this._tx.pos.y),this._end=It(this._meetTx.pos.x,this._meetTx.pos.y),this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize();const h=this._dir.scale(this._speed);this._motion.vel=It(h.x,h.y),this.isComplete()&&(this._tx.pos=It(this._end.x,this._end.y),this._motion.vel=It(0,0))}isComplete(){return this._stopped||this._distanceBetween<=1}stop(){this._motion.vel=It(0,0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1,this._distanceBetween=void 0}}class $a{constructor(e){this._entity=e,this._queue=new Fu(e)}getQueue(){return this._queue}update(e){this._queue.update(e)}clearActions(){this._queue.clearActions()}runAction(e){return e.reset(),this._queue.add(e),this}easeTo(...e){var a,h;let _=0,lt=0,ft=0,mt=vo.Linear;return e[0]instanceof At?(_=e[0].x,lt=e[0].y,ft=e[1],mt=(a=e[2])!==null&&a!==void 0?a:mt):(_=e[0],lt=e[1],ft=e[2],mt=(h=e[3])!==null&&h!==void 0?h:mt),this._queue.add(new Nu(this._entity,_,lt,ft,mt)),this}easeBy(...e){var a,h;let _=0,lt=0,ft=0,mt=vo.Linear;return e[0]instanceof At?(_=e[0].x,lt=e[0].y,ft=e[1],mt=(a=e[2])!==null&&a!==void 0?a:mt):(_=e[0],lt=e[1],ft=e[2],mt=(h=e[3])!==null&&h!==void 0?h:mt),this._queue.add(new Cu(this._entity,_,lt,ft,mt)),this}moveTo(e,a,h){let _=0,lt=0,ft=0;return e instanceof At?(_=e.x,lt=e.y,ft=a):(_=e,lt=a,ft=h),this._queue.add(new nu(this._entity,_,lt,ft)),this}moveBy(e,a,h){let _=0,lt=0,ft=0;return e instanceof At?(_=e.x,lt=e.y,ft=a):(_=e,lt=a,ft=h),this._queue.add(new Ou(this._entity,_,lt,ft)),this}rotateTo(e,a,h){return this._queue.add(new zu(this._entity,e,a,h)),this}rotateBy(e,a,h){return this._queue.add(new Au(this._entity,e,a,h)),this}scaleTo(e,a,h,_){let lt=1,ft=1,mt=0,kt=0;return e instanceof At&&a instanceof At&&(lt=e.x,ft=e.y,mt=a.x,kt=a.y),typeof e=="number"&&typeof a=="number"&&(lt=e,ft=a,mt=h,kt=_),this._queue.add(new Ll(this._entity,lt,ft,mt,kt)),this}scaleBy(e,a,h){let _=1,lt=1;return e instanceof At&&(_=e.x,lt=e.y,h=a),typeof e=="number"&&typeof a=="number"&&(_=e,lt=a),this._queue.add(new Nl(this._entity,_,lt,h)),this}blink(e,a,h=1){return this._queue.add(new ju(this._entity,e,a,h)),this}fade(e,a){return this._queue.add(new $u(this._entity,e,a)),this}delay(e){return this._queue.add(new Hu(e)),this}die(){return this._queue.add(new Uu(this._entity)),this}callMethod(e){return this._queue.add(new Lu(e)),this}repeat(e,a){return a?(this._queue.add(new Bu(this._entity,e,a)),this):(this.repeatForever(e),this)}repeatForever(e){return this._queue.add(new xu(this._entity,e)),this}follow(e,a){return a===void 0?this._queue.add(new ku(this._entity,e)):this._queue.add(new ku(this._entity,e,a)),this}meet(e,a){return a===void 0?this._queue.add(new iu(this._entity,e)):this._queue.add(new iu(this._entity,e,a)),this}toPromise(){return new Promise(a=>{this._queue.add(new Lu(()=>{a()}))})}}class _l extends oo{constructor(){super(...arguments),this.dependencies=[hr,uo],this._ctx=null}onAdd(e){this._ctx=new $a(e)}onRemove(){this._ctx=null}_getCtx(){if(!this._ctx)throw new Error("Actions component not attached to an entity, no context available");return this._ctx}getQueue(){if(!this._ctx)throw new Error("Actions component not attached to an entity, no queue available");return this._ctx.getQueue()}runAction(e){if(!this._ctx)throw new Error("Actions component not attached to an entity, cannot run action");return this._ctx.runAction(e)}update(e){var a;return(a=this._ctx)===null||a===void 0?void 0:a.update(e)}clearActions(){var e;(e=this._ctx)===null||e===void 0||e.clearActions()}easeTo(...e){return this._getCtx().easeTo.apply(this._ctx,e)}easeBy(...e){return this._getCtx().easeBy.apply(this._ctx,e)}moveTo(e,a,h){return this._getCtx().moveTo.apply(this._ctx,[e,a,h])}moveBy(e,a,h){return this._getCtx().moveBy.apply(this._ctx,[e,a,h])}rotateTo(e,a,h){return this._getCtx().rotateTo(e,a,h)}rotateBy(e,a,h){return this._getCtx().rotateBy(e,a,h)}scaleTo(e,a,h,_){return this._getCtx().scaleTo.apply(this._ctx,[e,a,h,_])}scaleBy(e,a,h){return this._getCtx().scaleBy.apply(this._ctx,[e,a,h])}blink(e,a,h){return this._getCtx().blink(e,a,h)}fade(e,a){return this._getCtx().fade(e,a)}delay(e){return this._getCtx().delay(e)}die(){return this._getCtx().die()}callMethod(e){return this._getCtx().callMethod(e)}repeat(e,a){return this._getCtx().repeat(e,a)}repeatForever(e){return this._getCtx().repeatForever(e)}follow(e,a){return this._getCtx().follow(e,a)}meet(e,a){return this._getCtx().meet(e,a)}toPromise(){return this._getCtx().toPromise()}}var ru;(function(ut){ut.Em="em",ut.Rem="rem",ut.Px="px",ut.Pt="pt",ut.Percent="%"})(ru||(ru={}));var ou;(function(ut){ut.Left="left",ut.Right="right",ut.Center="center",ut.Start="start",ut.End="end"})(ou||(ou={}));var su;(function(ut){ut.Top="top",ut.Hanging="hanging",ut.Middle="middle",ut.Alphabetic="alphabetic",ut.Ideographic="ideographic",ut.Bottom="bottom"})(su||(su={}));var au;(function(ut){ut.Normal="normal",ut.Italic="italic",ut.Oblique="oblique"})(au||(au={}));var lu;(function(ut){ut.LeftToRight="ltr",ut.RightToLeft="rtl"})(lu||(lu={}));class yl{constructor(e,a,h,_){this.font=e,this.text=a,this.color=h,this.maxWidth=_,this._textFragments=[],this.disposed=!1,this._dirty=!0,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.dimensions=this.measureText(a),this._setDimension(this.dimensions,this.ctx),this._lastHashCode=this.getHashCode()}measureText(e,a){if(this.disposed)throw Error("Accessing disposed text instance! "+this.text);let h=null;a!=null?h=this._getLinesFromText(e,a):h=e.split(`
`);const _=h.reduce((en,an)=>en.length>an.length?en:an);this._applyFont(this.ctx);const lt=this.ctx.measureText(_);let ft=Math.abs(lt.actualBoundingBoxAscent)+Math.abs(lt.actualBoundingBoxDescent);const mt=ft*h.length;ft=mt;const kt=mt-Math.abs(lt.actualBoundingBoxAscent),Rt=0,Mt=0;return new Wt({left:Rt-Math.abs(lt.actualBoundingBoxLeft)-this.font.padding,top:Mt-Math.abs(lt.actualBoundingBoxAscent)-this.font.padding,bottom:Mt+kt+this.font.padding,right:Rt+Math.abs(lt.actualBoundingBoxRight)+this.font.padding})}_setDimension(e,a){let h=1;this.font.lineHeight&&(h=this.font.lineHeight/this.font.size),a.canvas.width=(e.width+this.font.padding*2)*2*this.font.quality,a.canvas.height=(e.height+this.font.padding*2)*2*this.font.quality*h}static getHashCode(e,a,h){var _;return a+"__hashcode__"+e.fontString+e.showDebug+e.textAlign+e.baseAlign+e.direction+e.lineHeight+JSON.stringify(e.shadow)+(e.padding.toString()+e.smoothing.toString()+e.lineWidth.toString()+e.lineDash.toString()+((_=e.strokeColor)===null||_===void 0?void 0:_.toString())+(h?h.toString():e.color.toString()))}getHashCode(e=!0){return yl.getHashCode(this.font,this.text,e?this.color:void 0)}_applyRasterProperties(e){var a,h;e.translate(this.font.padding,this.font.padding),e.imageSmoothingEnabled=this.font.smoothing,e.lineWidth=this.font.lineWidth,e.setLineDash((a=this.font.lineDash)!==null&&a!==void 0?a:e.getLineDash()),e.strokeStyle=(h=this.font.strokeColor)===null||h===void 0?void 0:h.toString(),e.fillStyle=this.color.toString()}_applyFont(e){e.resetTransform(),e.translate(this.font.padding+e.canvas.width/2,this.font.padding+e.canvas.height/2),e.scale(this.font.quality,this.font.quality),e.textAlign=this.font.textAlign,e.textBaseline=this.font.baseAlign,e.font=this.font.fontString,e.direction=this.font.direction,this.font.shadow&&(e.shadowColor=this.font.shadow.color.toString(),e.shadowBlur=this.font.shadow.blur,e.shadowOffsetX=this.font.shadow.offset.x,e.shadowOffsetY=this.font.shadow.offset.y)}_drawText(e,a,h){this._applyRasterProperties(e),this._applyFont(e);for(let _=0;_<a.length;_++){const lt=a[_];this.color&&e.fillText(lt,0,_*h),this.font.strokeColor&&e.strokeText(lt,0,_*h)}this.font.showDebug&&(Cr(e,Gt.Green,-e.canvas.width/2,0,e.canvas.width/2,0,2),Cr(e,Gt.Red,0,-e.canvas.height/2,0,e.canvas.height/2,2))}_splitTextBitmap(e){const a=[];let h=0,_=0;const lt=Math.min(4096,e.canvas.width),ft=Math.min(4096,e.canvas.height);for(;h<e.canvas.width;){for(;_<e.canvas.height;){const mt=document.createElement("canvas");mt.width=lt,mt.height=ft,mt.getContext("2d").drawImage(e.canvas,h,_,lt,ft,0,0,lt,ft),a.push({x:h,y:_,canvas:mt}),_+=ft}h+=lt,_=0}return a}flagDirty(){this._dirty=!0}render(e,a,h,_){var lt;if(this.disposed)throw Error("Accessing disposed text instance! "+this.text);this._ex=e;const ft=this.getHashCode();if(this._lastHashCode!==ft&&(this._dirty=!0),this._dirty){this.dimensions=this.measureText(this.text,_),this._setDimension(this.dimensions,this.ctx);const mt=this._getLinesFromText(this.text,_),kt=(lt=this.font.lineHeight)!==null&&lt!==void 0?lt:this.dimensions.height/mt.length;if(this._drawText(this.ctx,mt,kt),e instanceof ar)for(const Rt of this._textFragments)e.textureLoader.delete(Rt.canvas);if(this._textFragments=this._splitTextBitmap(this.ctx),e instanceof ar)for(const Rt of this._textFragments)e.textureLoader.load(Rt.canvas,{filtering:this.font.filtering},!0);this._lastHashCode=ft,this._dirty=!1}for(const mt of this._textFragments)e.drawImage(mt.canvas,0,0,mt.canvas.width,mt.canvas.height,mt.x/this.font.quality+a-this.ctx.canvas.width/this.font.quality/2,mt.y/this.font.quality+h-this.ctx.canvas.height/this.font.quality/2,mt.canvas.width/this.font.quality,mt.canvas.height/this.font.quality)}dispose(){if(this.disposed=!0,this.dimensions=void 0,this.canvas=void 0,this.ctx=void 0,this._ex instanceof ar)for(const e of this._textFragments)this._ex.textureLoader.delete(e.canvas);this._textFragments.length=0}_getLinesFromText(e,a){if(this._cachedText===e&&this._cachedRenderWidth===a)return this._cachedLines;const h=e.split(`
`);if(a==null)return h;for(let _=0;_<h.length;_++){let lt=h[_],ft="";if(this.measureText(lt).width>a){for(;this.measureText(lt).width>a;)ft=lt[lt.length-1]+ft,lt=lt.slice(0,-1);h[_]=lt,h[_+1]=ft}}return this._cachedText=e,this._cachedLines=h,this._cachedRenderWidth=a,h}}class ho{static measureText(e,a,h){const _=yl.getHashCode(a,e);if(ho._MEASURE_CACHE.has(_))return ho._MEASURE_CACHE.get(_);ho._LOGGER.debug("Font text measurement cache miss");const lt=a.measureTextWithoutCache(e,h);return ho._MEASURE_CACHE.set(_,lt),lt}static getTextInstance(e,a,h){const _=yl.getHashCode(a,e,h);let lt=ho._TEXT_CACHE.get(_);return lt||(lt=new yl(a,e,h),ho._TEXT_CACHE.set(_,lt),ho._LOGGER.debug("Font text instance cache miss")),ho._TEXT_USAGE.set(lt,performance.now()),lt}static checkAndClearCache(){const e=[],a=new Set;for(const[_,lt]of ho._TEXT_USAGE.entries())if(lt+ho.FONT_TIMEOUT<performance.now())ho._LOGGER.debug(`Text cache entry timed out ${_.text}`),e.push(_),_.dispose();else{const ft=_.getHashCode(!1);a.add(ft)}e.forEach(_=>{ho._TEXT_USAGE.delete(_)}),this._TEXT_CACHE.clear();for(const[_]of this._TEXT_USAGE.entries())this._TEXT_CACHE.set(_.getHashCode(),_);const h=new Map;for(const _ of a)ho._MEASURE_CACHE.has(_)&&h.set(_,ho._MEASURE_CACHE.get(_));this._MEASURE_CACHE.clear(),this._MEASURE_CACHE=h}static get cacheSize(){return ho._TEXT_USAGE.size}static clearCache(){for(const[e]of ho._TEXT_USAGE.entries())e.dispose();ho._TEXT_USAGE.clear(),ho._TEXT_CACHE.clear(),ho._MEASURE_CACHE.clear()}}ho.FONT_TIMEOUT=500,ho._LOGGER=Vt.getInstance(),ho._TEXT_USAGE=new Map,ho._TEXT_CACHE=new Map,ho._MEASURE_CACHE=new Map;class qs extends cn{constructor(e={}){var a,h,_,lt,ft,mt,kt,Rt,Mt,Nt,en,an,un,wn,Bn,fn,pn,zn,Pn,yr;super(e),this.filtering=En.Blended,this.quality=2,this.padding=2,this.smoothing=!1,this.lineWidth=1,this.lineDash=[],this.color=Gt.Black,this.family="sans-serif",this.style=au.Normal,this.bold=!1,this.unit=ru.Px,this.textAlign=ou.Left,this.baseAlign=su.Top,this.direction=lu.LeftToRight,this.lineHeight=void 0,this.size=10,this.shadow=null,this._textBounds=new Wt,this._textMeasurement=new yl(this,"",Gt.Black),this.smoothing=(a=e?.smoothing)!==null&&a!==void 0?a:this.smoothing,this.padding=(h=e?.padding)!==null&&h!==void 0?h:this.padding,this.color=(_=e?.color)!==null&&_!==void 0?_:this.color,this.strokeColor=(lt=e?.strokeColor)!==null&&lt!==void 0?lt:this.strokeColor,this.lineDash=(ft=e?.lineDash)!==null&&ft!==void 0?ft:this.lineDash,this.lineWidth=(mt=e?.lineWidth)!==null&&mt!==void 0?mt:this.lineWidth,this.filtering=(kt=e?.filtering)!==null&&kt!==void 0?kt:this.filtering,this.family=(Rt=e?.family)!==null&&Rt!==void 0?Rt:this.family,this.style=(Mt=e?.style)!==null&&Mt!==void 0?Mt:this.style,this.bold=(Nt=e?.bold)!==null&&Nt!==void 0?Nt:this.bold,this.size=(en=e?.size)!==null&&en!==void 0?en:this.size,this.unit=(an=e?.unit)!==null&&an!==void 0?an:this.unit,this.textAlign=(un=e?.textAlign)!==null&&un!==void 0?un:this.textAlign,this.baseAlign=(wn=e?.baseAlign)!==null&&wn!==void 0?wn:this.baseAlign,this.direction=(Bn=e?.direction)!==null&&Bn!==void 0?Bn:this.direction,this.lineHeight=(fn=e?.lineHeight)!==null&&fn!==void 0?fn:this.lineHeight,this.quality=(pn=e?.quality)!==null&&pn!==void 0?pn:this.quality,e?.shadow&&(this.shadow={},this.shadow.blur=(zn=e.shadow.blur)!==null&&zn!==void 0?zn:this.shadow.blur,this.shadow.offset=(Pn=e.shadow.offset)!==null&&Pn!==void 0?Pn:this.shadow.offset,this.shadow.color=(yr=e.shadow.color)!==null&&yr!==void 0?yr:this.shadow.color)}clone(){return new qs({...this.cloneGraphicOptions(),size:this.size,unit:this.unit,family:this.family,style:this.style,bold:this.bold,textAlign:this.textAlign,baseAlign:this.baseAlign,direction:this.direction,shadow:this.shadow?{blur:this.shadow.blur,offset:this.shadow.offset,color:this.shadow.color}:null})}get fontString(){return`${this.style} ${this.bold?"bold":""} ${this.size}${this.unit} ${this.family}`}get localBounds(){return this._textBounds}_drawImage(e,a,h){}_rotate(e){var a;const h=(a=this.origin)!==null&&a!==void 0?a:this._textBounds.center;e.translate(h.x,h.y),e.rotate(this.rotation),e.translate(-h.x,-h.y)}_flip(e){this.flipHorizontal&&(e.translate(this._textBounds.width/this.scale.x,0),e.scale(-1,1)),this.flipVertical&&(e.translate(0,-this._textBounds.height/2/this.scale.y),e.scale(1,-1))}measureTextWithoutCache(e,a){return this._textMeasurement.measureText(e,a)}measureText(e,a){return ho.measureText(e,this,a)}_postDraw(e){e.restore()}render(e,a,h,_,lt,ft){const mt=ho.getTextInstance(a,this,h);this._textBounds=mt.dimensions,this._preDraw(e,_,lt),mt.render(e,_,lt,ft),this._postDraw(e)}}class $l extends cn{constructor(e){var a,h;super(e),this._text="",this._textWidth=0,this._textHeight=0,this.font=(a=e.font)!==null&&a!==void 0?a:new qs,this.color=(h=e.color)!==null&&h!==void 0?h:this.color,this.text=e.text,this.maxWidth=e.maxWidth}clone(){var e,a;return new $l({text:this.text.slice(),color:(a=(e=this.color)===null||e===void 0?void 0:e.clone())!==null&&a!==void 0?a:Gt.Black,font:this.font.clone(),maxWidth:this.maxWidth})}get text(){return this._text}set text(e){this._text=e,this._calculateDimension()}get font(){return this._font}set font(e){this._font=e}get width(){return this._textWidth===0&&this._calculateDimension(),this._textWidth*this.scale.x}get height(){return this._textHeight===0&&this._calculateDimension(),this._textHeight*this.scale.y}_calculateDimension(){const{width:e,height:a}=this.font.measureText(this._text,this.maxWidth);this._textWidth=e,this._textHeight=a}get localBounds(){return this.font.measureText(this._text,this.maxWidth).scale(this.scale)}_rotate(e){}_flip(e){}_preDraw(e,a,h){(this.isStale()||this.font.isStale())&&(this.font.flipHorizontal=this.flipHorizontal,this.font.flipVertical=this.flipVertical,this.font.rotation=this.rotation,this.font.origin=this.origin,this.font.opacity=this.opacity),this.font.tint=this.tint,super._preDraw(e,a,h)}_drawImage(e,a,h){var _;let lt=Gt.Black;this.font instanceof qs&&(lt=(_=this.color)!==null&&_!==void 0?_:this.font.color);const{width:ft,height:mt}=this.font.measureText(this._text,this.maxWidth);this._textWidth=ft,this._textHeight=mt,this.font.render(e,this._text,lt,a,h,this.maxWidth),this.font.showDebug&&(e.debug.drawRect(a-ft,h-mt,ft*2,mt*2),this.maxWidth!=null&&e.debug.drawRect(a,h,this.maxWidth,this.height,{color:Gt.Yellow}))}}class Yo extends jo{get pos(){return this.transform.pos}set pos(e){this.transform.pos=e.clone()}get oldPos(){return this.body.oldPos}set oldPos(e){this.body.oldPos.setTo(e.x,e.y)}get vel(){return this.motion.vel}set vel(e){this.motion.vel=e.clone()}get oldVel(){return this.body.oldVel}set oldVel(e){this.body.oldVel.setTo(e.x,e.y)}get acc(){return this.motion.acc}set acc(e){this.motion.acc=e.clone()}set oldAcc(e){this.body.oldAcc.setTo(e.x,e.y)}get oldAcc(){return this.body.oldAcc}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angularVelocity(){return this.motion.angularVelocity}set angularVelocity(e){this.motion.angularVelocity=e}get scale(){return this.get(hr).scale}set scale(e){this.get(hr).scale=e}get anchor(){return this._anchor}set anchor(e){this._anchor=dr(e,a=>this._handleAnchorChange(a)),this._handleAnchorChange(e)}_handleAnchorChange(e){this.graphics&&(this.graphics.anchor=e)}get offset(){return this._offset}set offset(e){this._offset=dr(e,a=>this._handleOffsetChange(a)),this._handleOffsetChange(e)}_handleOffsetChange(e){this.graphics&&(this.graphics.offset=e)}get isOffScreen(){return this.hasTag("ex.offscreen")}get draggable(){return this._draggable}set draggable(e){e&&(e&&!this._draggable?(this.events.on("pointerdragstart",this._pointerDragStartHandler),this.events.on("pointerdragend",this._pointerDragEndHandler),this.events.on("pointerdragmove",this._pointerDragMoveHandler),this.events.on("pointerdragleave",this._pointerDragLeaveHandler)):!e&&this._draggable&&(this.events.off("pointerdragstart",this._pointerDragStartHandler),this.events.off("pointerdragend",this._pointerDragEndHandler),this.events.off("pointerdragmove",this._pointerDragMoveHandler),this.events.off("pointerdragleave",this._pointerDragLeaveHandler)),this._draggable=e)}get color(){return this._color}set color(e){this._color=e.clone();const a=this.graphics.current;(a instanceof no||a instanceof $l)&&(a.color=this._color)}constructor(e){super(),this.events=new dt,this._anchor=dr(At.Half,Kr=>this._handleAnchorChange(Kr)),this._offset=dr(At.Zero,Kr=>this._handleOffsetChange(Kr)),this.logger=Vt.getInstance(),this._draggable=!1,this._dragging=!1,this._pointerDragStartHandler=()=>{this._dragging=!0},this._pointerDragEndHandler=()=>{this._dragging=!1},this._pointerDragMoveHandler=Kr=>{this._dragging&&(this.pos=Kr.worldPos)},this._pointerDragLeaveHandler=Kr=>{this._dragging&&(this.pos=Kr.worldPos)};const{name:a,x:h,y:_,pos:lt,coordPlane:ft,scale:mt,width:kt,height:Rt,radius:Mt,collider:Nt,vel:en,acc:an,rotation:un,angularVelocity:wn,z:Bn,color:fn,visible:pn,opacity:zn,anchor:Pn,offset:yr,collisionType:Qr,collisionGroup:Hn}={...e};this.name=a??this.name,this.anchor=Pn??Yo.defaults.anchor.clone(),this.offset=yr??At.Zero,this.transform=new hr,this.addComponent(this.transform),this.pos=lt??It(h??0,_??0),this.rotation=un??0,this.scale=mt??It(1,1),this.z=Bn??0,this.transform.coordPlane=ft??vr.World,this.pointer=new Es,this.addComponent(this.pointer),this.graphics=new Do({anchor:this.anchor,offset:this.offset,opacity:zn}),this.addComponent(this.graphics),this.motion=new uo,this.addComponent(this.motion),this.vel=en??At.Zero,this.acc=an??At.Zero,this.angularVelocity=wn??0,this.actions=new _l,this.addComponent(this.actions),this.body=new Ur,this.addComponent(this.body),this.body.collisionType=Qr??On.Passive,Hn&&(this.body.group=Hn),Nt?(this.collider=new xo(Nt),this.addComponent(this.collider)):Mt?(this.collider=new xo(No.Circle(Mt)),this.addComponent(this.collider)):kt>0&&Rt>0?(this.collider=new xo(No.Box(kt,Rt,this.anchor)),this.addComponent(this.collider)):(this.collider=new xo,this.addComponent(this.collider)),this.graphics.visible=pn??!0,fn&&(this.color=fn,kt&&Rt?this.graphics.add(new zl({color:fn,width:kt,height:Rt})):Mt&&this.graphics.add(new eu({color:fn,radius:Mt})))}clone(){const e=new Yo({color:this.color.clone(),anchor:this.anchor.clone(),offset:this.offset.clone()});e.clearComponents(),e.processComponentRemoval(),e.addComponent(e.transform=this.transform.clone(),!0),e.addComponent(e.pointer=this.pointer.clone(),!0),e.addComponent(e.graphics=this.graphics.clone(),!0),e.addComponent(e.motion=this.motion.clone(),!0),e.addComponent(e.actions=this.actions.clone(),!0),e.addComponent(e.body=this.body.clone(),!0),e.addComponent(e.collider=this.collider.clone(),!0);const a=[this.transform,this.pointer,this.graphics,this.motion,this.actions,this.body,this.collider],h=this.getComponents();for(const _ of h)a.includes(_)||e.addComponent(_.clone(),!0);return e}onInitialize(e){}_initialize(e){super._initialize(e);for(const a of this.children)a._initialize(e)}emit(e,a){this.events.emit(e,a)}on(e,a){return this.events.on(e,a)}once(e,a){return this.events.once(e,a)}off(e,a){this.events.off(e,a)}_prekill(e){this.events.emit("prekill",new Co(this)),this.onPreKill(e)}onPreKill(e){}_postkill(e){this.events.emit("postkill",new ns(this)),this.onPostKill(e)}onPostKill(e){}kill(){this.scene?(this._prekill(this.scene),this.events.emit("kill",new Bo(this)),super.kill(),this._postkill(this.scene)):this.logger.warn(`Cannot kill actor named "${this.name}", it was never added to the Scene`)}unkill(){this.active=!0}isKilled(){return!this.active}get z(){return this.get(hr).z}set z(e){this.get(hr).z=e}get center(){const e=this.getGlobalPos();return new At(e.x+this.width/2-this.anchor.x*this.width,e.y+this.height/2-this.anchor.y*this.height)}get localCenter(){return new At(this.pos.x+this.width/2-this.anchor.x*this.width,this.pos.y+this.height/2-this.anchor.y*this.height)}get width(){return this.collider.localBounds.width*this.getGlobalScale().x}get height(){return this.collider.localBounds.height*this.getGlobalScale().y}getGlobalRotation(){return this.get(hr).globalRotation}getGlobalPos(){return this.get(hr).globalPos}getGlobalScale(){return this.get(hr).globalScale}contains(e,a,h=!1){const _=It(e,a),lt=this.get(xo);lt.update();const ft=lt.get();if(!ft)return!1;const mt=ft.contains(_);return h?mt||this.children.some(kt=>kt.contains(e,a,!0)):mt}within(e,a){const h=this.get(xo),_=e.get(xo),lt=h.get(),ft=_.get();return lt&&ft?lt.getClosestLineBetween(ft).getLength()<=a:!1}update(e,a){this._initialize(e),this._preupdate(e,a),this._postupdate(e,a)}onPreUpdate(e,a){}onPostUpdate(e,a){}onPreCollisionResolve(e,a,h,_){}onPostCollisionResolve(e,a,h,_){}onCollisionStart(e,a,h,_){}onCollisionEnd(e,a,h,_){}_preupdate(e,a){this.events.emit("preupdate",new ys(e,a,this)),this.onPreUpdate(e,a)}_postupdate(e,a){this.events.emit("postupdate",new As(e,a,this)),this.onPostUpdate(e,a)}}Yo.defaults={anchor:At.Half};function Wu(ut){return ut instanceof Su}class Su extends Yo{constructor(e){var a,h;super({...e}),this.get(hr).coordPlane=vr.Screen,this.anchor=(a=e?.anchor)!==null&&a!==void 0?a:It(0,0),this.body.collisionType=(h=e?.collisionType)!==null&&h!==void 0?h:On.PreventCollision,this.pointer.useGraphicsBounds=!0,this.pointer.useColliderShape=!1,!e?.collider&&e?.width>0&&e?.height>0&&this.collider.useBoxCollider(this.width,this.height,this.anchor)}_initialize(e){this._engine=e,super._initialize(e)}contains(e,a,h=!0){if(h)return super.contains(e,a);const _=this._engine.worldToScreenCoordinates(new At(e,a));return super.contains(_.x,_.y)}}class Qs{get complete(){return this._complete}constructor(e,a,h,_,lt,ft){if(this._logger=Vt.getInstance(),this.id=0,this._elapsedTime=0,this._totalTimeAlive=0,this._running=!1,this._numberOfTicks=0,this.interval=10,this.repeats=!1,this.maxNumberOfRepeats=-1,this.randomRange=[0,0],this._baseInterval=10,this._generateRandomInterval=()=>this._baseInterval+this.random.integer(this.randomRange[0],this.randomRange[1]),this._complete=!1,this.scene=null,typeof e!="function"){const mt=e;e=mt.fcn,a=mt.interval,h=mt.repeats,_=mt.numberOfRepeats,lt=mt.randomRange,ft=mt.random}if(_&&_>=0&&(this.maxNumberOfRepeats=_,!h))throw new Error("repeats must be set to true if numberOfRepeats is set");if(this.id=Qs._MAX_ID++,this._callbacks=[],this._baseInterval=this.interval=a,lt){if(lt[0]>lt[1])throw new Error("min value must be lower than max value for range");this.random=ft??new bt,this.randomRange=lt,this.interval=this._generateRandomInterval(),this.on(()=>{this.interval=this._generateRandomInterval()})}this.repeats=h||this.repeats,e&&this.on(e)}on(e){this._callbacks.push(e)}off(e){const a=this._callbacks.indexOf(e);this._callbacks.splice(a,1)}update(e){this._running&&(this._totalTimeAlive+=e,this._elapsedTime+=e,this.maxNumberOfRepeats>-1&&this._numberOfTicks>=this.maxNumberOfRepeats&&(this._complete=!0,this._running=!1,this._elapsedTime=0),!this.complete&&this._elapsedTime>=this.interval&&(this._callbacks.forEach(a=>{a.call(this)}),this._numberOfTicks++,this.repeats?this._elapsedTime=0:(this._complete=!0,this._running=!1,this._elapsedTime=0)))}reset(e,a){if(e&&e>=0&&(this._baseInterval=this.interval=e),this.maxNumberOfRepeats&&this.maxNumberOfRepeats>=0&&(this.maxNumberOfRepeats=a,!this.repeats))throw new Error("repeats must be set to true if numberOfRepeats is set");this._complete=!1,this._elapsedTime=0,this._numberOfTicks=0}get timesRepeated(){return this._numberOfTicks}getTimeRunning(){return this._totalTimeAlive}get timeToNextAction(){return this.complete?0:this.interval-this._elapsedTime}get timeElapsedTowardNextAction(){return this._elapsedTime}get isRunning(){return this._running}pause(){return this._running=!1,this}resume(){return this._running=!0,this}start(){return this.scene||this._logger.warn("Cannot start a timer not part of a scene, timer wont start until added"),this._running=!0,this.complete&&(this._complete=!1,this._elapsedTime=0,this._numberOfTicks=0),this}stop(){return this._running=!1,this._elapsedTime=0,this._numberOfTicks=0,this}cancel(){this.pause(),this.scene&&this.scene.cancelTimer(this)}}Qs._MAX_ID=0;class Hl extends oo{constructor(e){super(),this.parallaxFactor=It(1,1),this.parallaxFactor=e??this.parallaxFactor}}class Ks extends oo{constructor(e,a=!0){super(),this.draw=e,this.useTransform=a}}const ep={PreUpdate:"preupdate",PostUpdate:"postupdate",PreDraw:"predraw",PostDraw:"postdraw",PointerUp:"pointerup",PointerDown:"pointerdown",PointerMove:"pointermove",PointerCancel:"pointercancel"};class Zu extends jo{flagCollidersDirty(){this._collidersDirty=!0}flagTilesDirty(){for(let e=0;e<this.tiles.length;e++)this.tiles[e]&&this.tiles[e].flagDirty()}get x(){var e;return(e=this.transform.pos.x)!==null&&e!==void 0?e:0}set x(e){var a;!((a=this.transform)===null||a===void 0)&&a.pos&&(this.get(hr).pos=It(e,this.y))}get y(){var e,a;return(a=(e=this.transform)===null||e===void 0?void 0:e.pos.y)!==null&&a!==void 0?a:0}set y(e){var a;!((a=this.transform)===null||a===void 0)&&a.pos&&(this.transform.pos=It(this.x,e))}get z(){var e;return(e=this.transform.z)!==null&&e!==void 0?e:0}set z(e){this.transform&&(this.transform.z=e)}get rotation(){var e,a;return(a=(e=this.transform)===null||e===void 0?void 0:e.rotation)!==null&&a!==void 0?a:0}set rotation(e){this.transform&&(this.transform.rotation=e)}get scale(){var e,a;return(a=(e=this.transform)===null||e===void 0?void 0:e.scale)!==null&&a!==void 0?a:At.One}set scale(e){var a;!((a=this.transform)===null||a===void 0)&&a.scale&&(this.transform.scale=e)}get pos(){return this.transform.pos}set pos(e){this.transform.pos=e}get vel(){return this._motion.vel}set vel(e){this._motion.vel=e}emit(e,a){this.events.emit(e,a)}on(e,a){return this.events.on(e,a)}once(e,a){return this.events.once(e,a)}off(e,a){this.events.off(e,a)}constructor(e){var a,h,_;super([],e.name),this.events=new dt,this._token=0,this.logger=Vt.getInstance(),this.tiles=[],this._rows=[],this._cols=[],this.renderFromTopOfGraphic=!1,this.meshingLookBehind=10,this._collidersDirty=!0,this._forwardPointerEventToTile=ft=>mt=>{const kt=this.getTileByPoint(mt.worldPos);kt&&kt.events.emit(ft,mt)},this._originalOffsets=new WeakMap,this.meshingLookBehind=(a=e.meshingLookBehind)!==null&&a!==void 0?a:this.meshingLookBehind,this.addComponent(new hr),this.addComponent(new uo),this.addComponent(new Ur({type:On.Fixed})),this.addComponent(new Do({onPostDraw:(ft,mt)=>this.draw(ft,mt)})),this.addComponent(new Ks((ft,mt)=>this.debug(ft,mt),!1)),this.addComponent(new xo),this.addComponent(new Es),this.pointer=this.get(Es),this._graphics=this.get(Do),this.transform=this.get(hr),this._motion=this.get(uo),this.collider=this.get(xo),this._composite=this.collider.useCompositeCollider([]),this.transform.pos=(h=e.pos)!==null&&h!==void 0?h:At.Zero,this._oldPos=this.transform.pos.clone(),this._oldScale=this.transform.scale.clone(),this.renderFromTopOfGraphic=(_=e.renderFromTopOfGraphic)!==null&&_!==void 0?_:this.renderFromTopOfGraphic,this.tileWidth=e.tileWidth,this.tileHeight=e.tileHeight,this.rows=e.rows,this.columns=e.columns,this.tiles=new Array(this.rows*this.columns),this._rows=new Array(this.rows),this._cols=new Array(this.columns);let lt=[];for(let ft=0;ft<this.columns;ft++){for(let mt=0;mt<this.rows;mt++){const kt=new Gu({x:ft,y:mt,map:this});kt.map=this,this.tiles[ft+mt*this.columns]=kt,lt.push(kt),this._rows[mt]||(this._rows[mt]=[]),this._rows[mt].push(kt)}this._cols[ft]=lt,lt=[]}this._setupPointerToTile(),this._graphics.localBounds=new Wt({left:0,top:0,right:this.columns*this.tileWidth*this.scale.x,bottom:this.rows*this.tileHeight*this.scale.y})}_initialize(e){super._initialize(e),this._engine=e}_setupPointerToTile(){this.events.on("pointerup",this._forwardPointerEventToTile("pointerup")),this.events.on("pointerdown",this._forwardPointerEventToTile("pointerdown")),this.events.on("pointermove",this._forwardPointerEventToTile("pointermove")),this.events.on("pointercancel",this._forwardPointerEventToTile("pointercancel"))}_getOrSetColliderOriginalOffset(e){if(this._originalOffsets.has(e))return this._originalOffsets.get(e);{const a=e.offset;return this._originalOffsets.set(e,a),a}}_updateColliders(){this.collider.$colliderRemoved.notifyAll(this._composite),this._composite.clearColliders();const e=[];this._composite=this.collider.useCompositeCollider([]);let a;const h=(lt,ft)=>lt&&ft?lt.top===ft.top&&lt.bottom===ft.bottom&&lt.right===ft.left:!1,_=(lt,ft,mt=this.meshingLookBehind)=>{if(!lt)return!1;for(let kt=ft.length-1;kt>=0;kt--){if(mt--<0)return!1;const Rt=ft[kt];if(h(Rt,lt))return ft[kt]=Rt.combine(lt),!0}return!1};for(let lt=0;lt<this.columns;lt++){for(let ft=0;ft<this.rows;ft++){const mt=this.tiles[lt+ft*this.columns];if(mt.solid)if(mt.getColliders().length>0){for(const kt of mt.getColliders()){const Rt=this._getOrSetColliderOriginalOffset(kt);kt.offset=It(mt.x*this.tileWidth*this.scale.x,mt.y*this.tileHeight*this.scale.y).add(Rt),kt.owner=this,this._composite.addCollider(kt)}a&&!_(a,e)&&e.push(a),a=null}else a?a=a.combine(mt.defaultGeometry):a=mt.defaultGeometry;else a&&!_(a,e)&&e.push(a),a=null}a&&!_(a,e)&&e.push(a),a=null}for(const lt of e){const ft=No.Box(lt.width,lt.height,At.Zero,It(lt.left-this.pos.x,lt.top-this.pos.y));ft.owner=this,this._composite.addCollider(ft)}this.collider.update(),this.collider.$colliderAdded.notifyAll(this._composite)}getTileByIndex(e){return this.tiles[e]}getTile(e,a){return e<0||a<0||e>=this.columns||a>=this.rows?null:this.tiles[e+a*this.columns]}getTileByPoint(e){const{x:a,y:h}=this._getTileCoordinates(e),_=this.getTile(a,h);return a>=0&&h>=0&&a<this.columns&&h<this.rows&&_?_:null}_getTileCoordinates(e){e=this.transform.applyInverse(e);const a=Math.floor(e.x/this.tileWidth),h=Math.floor(e.y/this.tileHeight);return{x:a,y:h}}getRows(){return this._rows}getColumns(){return this._cols}getOnScreenTiles(){let e=this._engine.screen.getWorldBounds();const a=this.get(Hl);if(a&&this.isInitialized){let an=this.pos;const un=At.One.sub(a.parallaxFactor),wn=this._engine.currentScene.camera.pos.scale(un);an=an.sub(wn),e=e.translate(an)}const h=this.transform.coordPlane===vr.Screen?this._engine.screen.getScreenBounds():e,_=this._getTileCoordinates(h.topLeft),lt=this._getTileCoordinates(h.topRight),ft=this._getTileCoordinates(h.bottomRight),mt=this._getTileCoordinates(h.bottomLeft),kt=Math.min(Pt(_.x,0,this.columns-1),Pt(lt.x,0,this.columns-1)),Rt=Math.min(Pt(_.y,0,this.rows-1),Pt(lt.y,0,this.rows-1)),Mt=Math.max(Pt(ft.x,0,this.columns-1),Pt(mt.x,0,this.columns-1)),Nt=Math.max(Pt(ft.y,0,this.rows-1),Pt(mt.y,0,this.rows-1)),en=[];for(let an=kt;an<=Mt;an++)for(let un=Rt;un<=Nt;un++)en.push(this.getTile(an,un));return en}update(e,a){this._initialize(e),this.onPreUpdate(e,a),this.emit("preupdate",new ys(e,a,this)),(!this._oldPos.equals(this.pos)||this._oldRotation!==this.rotation||!this._oldScale.equals(this.scale))&&(this.flagCollidersDirty(),this.flagTilesDirty()),this._collidersDirty&&(this._collidersDirty=!1,this._updateColliders()),this._token++,this.pos.clone(this._oldPos),this._oldRotation=this.rotation,this.scale.clone(this._oldScale),this.transform.pos=this.pos,this.onPostUpdate(e,a),this.emit("postupdate",new As(e,a,this))}draw(e,a){if(!this.isInitialized)return;this.emit("predraw",new ko(e,a,this));let h,_,lt;const ft=this.getOnScreenTiles();for(let mt=0;mt<ft.length;mt++){const kt=ft[mt],Rt=kt.getGraphicsOffsets();for(h=kt.getGraphics(),_=0,lt=h.length;_<lt;_++){const Mt=h[_],Nt=Rt[_];if(Mt){bu(Mt)&&Mt?.tick(a,this._token);const en=this.renderFromTopOfGraphic?0:Mt.height-this.tileHeight;Mt.draw(e,kt.x*this.tileWidth+Nt.x,kt.y*this.tileHeight-en+Nt.y)}}}this.emit("postdraw",new Oo(e,a,this))}debug(e,a){const{showAll:h,showGrid:_,gridColor:lt,gridWidth:ft,showSolidBounds:mt,solidBoundsColor:kt,showColliderGeometry:Rt}=a.tilemap,{geometryColor:Mt,geometryLineWidth:Nt,geometryPointSize:en}=a.collider,an=this.tileWidth*this.columns*this.scale.x,un=this.tileHeight*this.rows*this.scale.y,wn=this.pos;if(_||h){for(let Bn=0;Bn<this.rows+1;Bn++){const fn=It(0,Bn*this.tileHeight*this.scale.y);e.drawLine(wn.add(fn),wn.add(It(an,fn.y)),lt,ft)}for(let Bn=0;Bn<this.columns+1;Bn++){const fn=It(Bn*this.tileWidth*this.scale.x,0);e.drawLine(wn.add(fn),wn.add(It(fn.x,un)),lt,ft)}}if(h||mt||Rt){const Bn=this._composite.getColliders();e.save(),e.translate(this.pos.x,this.pos.y),e.scale(this.scale.x,this.scale.y);for(const fn of Bn){const pn=fn.localBounds,zn=fn.worldPos.sub(this.pos);mt&&e.drawRectangle(zn,pn.width,pn.height,kt)}if(e.restore(),Rt)for(const fn of Bn)fn.debug(e,Mt,{lineWidth:Nt,pointSize:en})}if(h||mt){if(e.save(),e.z=999,mt)for(let Bn=0;Bn<this.tiles.length;Bn++)this.tiles[Bn].bounds.draw(e);e.restore()}}}class Gu{get pos(){return this._posDirty&&(this._recalculate(),this._posDirty=!1),this._pos}get width(){return this._width}get height(){return this._height}get solid(){return this._solid}set solid(e){var a;(a=this.map)===null||a===void 0||a.flagCollidersDirty(),this._solid=e}getGraphics(){return this._graphics}getGraphicsOffsets(){return this._offsets}addGraphic(e,a){this._graphics.push(e),a?.offset?this._offsets.push(a.offset):this._offsets.push(At.Zero)}removeGraphic(e){const a=this._graphics.indexOf(e);a>-1&&(this._graphics.splice(a,1),this._offsets.splice(a,1))}clearGraphics(){this._graphics.length=0,this._offsets.length=0}getColliders(){return this._colliders}addCollider(e){this._colliders.push(e),this.map.flagCollidersDirty()}removeCollider(e){const a=this._colliders.indexOf(e);a>-1&&this._colliders.splice(a,1),this.map.flagCollidersDirty()}clearColliders(){this._colliders.length=0,this.map.flagCollidersDirty()}constructor(e){var a,h;this._posDirty=!1,this.events=new dt,this._solid=!1,this._graphics=[],this._offsets=[],this._colliders=[],this.data=new Map,this.x=e.x,this.y=e.y,this.map=e.map,this._width=e.map.tileWidth*this.map.scale.x,this._height=e.map.tileHeight*this.map.scale.y,this.solid=(a=e.solid)!==null&&a!==void 0?a:this.solid,this._graphics=(h=e.graphics)!==null&&h!==void 0?h:[],this._recalculate()}flagDirty(){return this._posDirty=!0}_recalculate(){const e=this.map.pos.add(It(this.x*this.map.tileWidth,this.y*this.map.tileHeight));this._geometry=new Wt(e.x,e.y,e.x+this.map.tileWidth,e.y+this.map.tileHeight),this._width=this.map.tileWidth*this.map.scale.x,this._height=this.map.tileHeight*this.map.scale.y,this._pos=this.map.pos.add(It(this.x*this._width,this.y*this._height)),this._bounds=new Wt(this._pos.x,this._pos.y,this._pos.x+this._width,this._pos.y+this._height),this.map.rotation&&(this._bounds=this._bounds.rotate(this.map.rotation,this.map.pos)),this._posDirty=!1}get bounds(){return this._posDirty&&this._recalculate(),this._bounds}get defaultGeometry(){return this._geometry}get center(){return this._posDirty&&this._recalculate(),new At(this._pos.x+this._width/2,this._pos.y+this._height/2)}emit(e,a){this.events.emit(e,a)}on(e,a){return this.events.on(e,a)}once(e,a){return this.events.once(e,a)}off(e,a){a?this.events.off(e,a):this.events.off(e)}}class Vu{constructor(e){this.camera=e}lockToActor(e){this.camera.addStrategy(new Yt(e))}lockToActorAxis(e,a){this.camera.addStrategy(new Zt(e,a))}elasticToActor(e,a,h){this.camera.addStrategy(new Lt(e,a,h))}radiusAroundActor(e,a){this.camera.addStrategy(new vt(e,a))}limitCameraBounds(e){this.camera.addStrategy(new Tt(e))}}var cu;(function(ut){ut[ut.X=0]="X",ut[ut.Y=1]="Y"})(cu||(cu={}));class Yt{constructor(e){this.target=e,this.action=(a,h,_,lt)=>a.center}}class Zt{constructor(e,a){this.target=e,this.axis=a,this.action=(h,_,lt,ft)=>{const mt=h.center,kt=_.getFocus();return this.axis===cu.X?new At(mt.x,kt.y):new At(kt.x,mt.y)}}}class Lt{constructor(e,a,h){this.target=e,this.cameraElasticity=a,this.cameraFriction=h,this.action=(_,lt,ft,mt)=>{const kt=_.center;let Rt=lt.getFocus(),Mt=lt.vel.clone();const Nt=kt.sub(Rt).scale(this.cameraElasticity);Mt=Mt.add(Nt);const en=Mt.scale(-1).scale(this.cameraFriction);return Mt=Mt.add(en),Rt=Rt.add(Mt),Rt}}}class vt{constructor(e,a){this.target=e,this.radius=a,this.action=(h,_,lt,ft)=>{const mt=h.center,kt=_.getFocus(),Rt=mt.sub(kt),Mt=Rt.size;if(Mt>=this.radius){const Nt=Mt-this.radius;return kt.add(Rt.normalize().scale(Nt))}return kt}}}class Tt{constructor(e){this.target=e,this.boundSizeChecked=!1,this.action=(a,h,_,lt)=>{const ft=h.getFocus();this.boundSizeChecked||((a.bottom-a.top<_.drawHeight||a.right-a.left<_.drawWidth)&&Vt.getInstance().warn("Camera bounds should not be smaller than the engine viewport"),this.boundSizeChecked=!0);let mt=ft.x,kt=ft.y;return ft.x<a.left+_.halfDrawWidth?mt=a.left+_.halfDrawWidth:ft.x>a.right-_.halfDrawWidth&&(mt=a.right-_.halfDrawWidth),ft.y<a.top+_.halfDrawHeight?kt=a.top+_.halfDrawHeight:ft.y>a.bottom-_.halfDrawHeight&&(kt=a.bottom-_.halfDrawHeight),It(mt,kt)}}}const Ft={Initialize:"initialize",PreUpdate:"preupdate",PostUpdate:"postupdate"};class tn{constructor(){this.events=new dt,this.transform=yn.identity(),this.inverse=yn.identity(),this._cameraStrategies=[],this.strategy=new Vu(this),this._z=1,this.dz=0,this.az=0,this.rotation=0,this._angularVelocity=0,this._posChanged=!1,this._pos=xn(At.Zero,()=>this._posChanged=!0),this.drawPos=this.pos.clone(),this._oldPos=this.pos.clone(),this.vel=At.Zero,this.acc=At.Zero,this._cameraMoving=!1,this._currentLerpTime=0,this._lerpDuration=1e3,this._lerpStart=null,this._lerpEnd=null,this._isShaking=!1,this._shakeMagnitudeX=0,this._shakeMagnitudeY=0,this._shakeDuration=0,this._elapsedShakeTime=0,this._xShake=0,this._yShake=0,this._isZooming=!1,this._zoomStart=1,this._zoomEnd=1,this._currentZoomTime=0,this._zoomDuration=0,this._zoomEasing=vo.EaseInOutCubic,this._easing=vo.EaseInOutCubic,this._halfWidth=0,this._halfHeight=0,this._viewport=null,this._isInitialized=!1,this._snapPos=It(0,0)}get zoom(){return this._z}set zoom(e){this._z=e,this._engine&&(this._halfWidth=this._engine.halfDrawWidth,this._halfHeight=this._engine.halfDrawHeight)}get angularVelocity(){return this._angularVelocity}set angularVelocity(e){this._angularVelocity=e}get pos(){return this._pos}set pos(e){this._pos=xn(e,()=>this._posChanged=!0),this._posChanged=!0}get x(){return this.pos.x}set x(e){!this._follow&&!this._cameraMoving&&(this.pos=It(e,this.pos.y))}get y(){return this.pos.y}set y(e){!this._follow&&!this._cameraMoving&&(this.pos=It(this.pos.x,e))}get dx(){return this.vel.x}set dx(e){this.vel=It(e,this.vel.y)}get dy(){return this.vel.y}set dy(e){this.vel=It(this.vel.x,e)}get ax(){return this.acc.x}set ax(e){this.acc=It(e,this.acc.y)}get ay(){return this.acc.y}set ay(e){this.acc=It(this.acc.x,e)}getFocus(){return this.pos}move(e,a,h=vo.EaseInOutCubic){if(typeof h!="function")throw"Please specify an EasingFunction";return this._follow?Promise.reject(e):(this._lerpPromise&&this._lerpResolve&&this._lerpResolve(e),this._lerpPromise=new Promise(_=>{this._lerpResolve=_}),this._lerpStart=this.getFocus().clone(),this._lerpDuration=a,this._lerpEnd=e,this._currentLerpTime=0,this._cameraMoving=!0,this._easing=h,this._lerpPromise)}shake(e,a,h){this._isShaking=!0,this._shakeMagnitudeX=e,this._shakeMagnitudeY=a,this._shakeDuration=h}zoomOverTime(e,a=0,h=vo.EaseInOutCubic){if(this._zoomPromise=new Promise(_=>{this._zoomResolve=_}),a)this._isZooming=!0,this._zoomEasing=h,this._currentZoomTime=0,this._zoomDuration=a,this._zoomStart=this.zoom,this._zoomEnd=e;else return this._isZooming=!1,this.zoom=e,Promise.resolve(!0);return this._zoomPromise}get viewport(){return this._viewport?this._viewport:new Wt(0,0,0,0)}addStrategy(e){this._cameraStrategies.push(e)}removeStrategy(e){Xt(e,this._cameraStrategies)}clearAllStrategies(){this._cameraStrategies.length=0}_preupdate(e,a){this.events.emit("preupdate",new ys(e,a,this)),this.onPreUpdate(e,a)}onPreUpdate(e,a){}_postupdate(e,a){this.events.emit("postupdate",new As(e,a,this)),this.onPostUpdate(e,a)}onPostUpdate(e,a){}get isInitialized(){return this._isInitialized}_initialize(e){if(!this.isInitialized){this._engine=e,this._screen=e.screen;const a=this._screen.contentArea;let h=It(a.width/2,a.height/2);if(!this._engine.loadingComplete){const _=this._screen.peekResolution();_&&(h=It(_.width/2,_.height/2))}this._halfWidth=h.x,this._halfHeight=h.y,this._posChanged||(this.pos=h),this.pos.clone(this.drawPos),this.updateTransform(this.pos),this.runStrategies(e,e.clock.elapsed()),this.updateViewport(),this.updateTransform(this.pos),this.pos.clone(this._oldPos),this.onInitialize(e),this.events.emit("initialize",new Ns(e,this)),this._isInitialized=!0}}onInitialize(e){}emit(e,a){this.events.emit(e,a)}on(e,a){return this.events.on(e,a)}once(e,a){return this.events.once(e,a)}off(e,a){this.events.off(e,a)}runStrategies(e,a){for(const h of this._cameraStrategies)this.pos=h.action.call(h,h.target,this,e,a)}updateViewport(){this._viewport=new Wt(this.x-this._halfWidth,this.y-this._halfHeight,this.x+this._halfWidth,this.y+this._halfHeight)}update(e,a){if(this._initialize(e),this._preupdate(e,a),this.pos.clone(this._oldPos),this.pos=this.pos.add(this.vel.scale(a/1e3)),this.zoom+=this.dz*a/1e3,this.vel=this.vel.add(this.acc.scale(a/1e3)),this.dz+=this.az*a/1e3,this.rotation+=this.angularVelocity*a/1e3,this._isZooming)if(this._currentZoomTime<this._zoomDuration){const h=this._zoomEasing,_=h(this._currentZoomTime,this._zoomStart,this._zoomEnd,this._zoomDuration);this.zoom=_,this._currentZoomTime+=a}else this._isZooming=!1,this.zoom=this._zoomEnd,this._currentZoomTime=0,this._zoomResolve(!0);if(this._cameraMoving)if(this._currentLerpTime<this._lerpDuration){const _=vo.CreateVectorEasingFunction(this._easing)(this._currentLerpTime,this._lerpStart,this._lerpEnd,this._lerpDuration);this.pos=_,this._currentLerpTime+=a}else{this.pos=this._lerpEnd;const h=this._lerpEnd.clone();this._lerpStart=null,this._lerpEnd=null,this._currentLerpTime=0,this._cameraMoving=!1,this._lerpResolve(h)}this._isDoneShaking()?(this._isShaking=!1,this._elapsedShakeTime=0,this._shakeMagnitudeX=0,this._shakeMagnitudeY=0,this._shakeDuration=0,this._xShake=0,this._yShake=0):(this._elapsedShakeTime+=a,this._xShake=(Math.random()*this._shakeMagnitudeX|0)+1,this._yShake=(Math.random()*this._shakeMagnitudeY|0)+1),this.runStrategies(e,a),this.updateViewport(),this.updateTransform(this.pos),this._postupdate(e,a)}draw(e){if(this.pos.clone(this.drawPos),this._engine.fixedUpdateFps){const a=this._engine.currentFrameLagMs/(1e3/this._engine.fixedUpdateFps),h=this.pos.scale(a).add(this._oldPos.scale(1-a));h.clone(this.drawPos),this.updateTransform(h)}if(e.snapToPixel){const a=this.drawPos.clone(this._snapPos);a.x=~~(a.x+Qn*Et(a.x)),a.y=~~(a.y+Qn*Et(a.y)),a.clone(this.drawPos),this.updateTransform(a)}e.multiply(this.transform)}updateTransform(e){const a=this._screen.resolution.width/this.zoom,h=this._screen.resolution.height/this.zoom,_=It(-e.x+a/2+this._xShake,-e.y+h/2+this._yShake);this.transform.reset(),this.transform.scale(this.zoom,this.zoom),this.transform.translate(a/2,h/2),this.transform.rotate(this.rotation),this.transform.translate(-a/2,-h/2),this.transform.translate(_.x,_.y),this.transform.inverse(this.inverse)}_isDoneShaking(){return!this._isShaking||this._elapsedShakeTime>=this._shakeDuration}}const dn={ExitTrigger:"exit",EnterTrigger:"enter"},Sn={pos:At.Zero,width:10,height:10,visible:!1,action:()=>{},filter:()=>!0,repeat:-1};class Yn extends Yo{constructor(e){super({x:e.pos.x,y:e.pos.y,width:e.width,height:e.height}),this.events=new dt,this.action=()=>{},this.filter=()=>!0,this.repeat=-1,e={...Sn,...e},this.filter=e.filter||this.filter,this.repeat=e.repeat||this.repeat,this.action=e.action||this.action,e.target&&(this.target=e.target),this.graphics.visible=e.visible,this.body.collisionType=On.Passive,this.events.on("collisionstart",a=>{this.filter(a.other)&&(this.events.emit("enter",new Pl(this,a.other)),this._dispatchAction(),this.repeat===0&&this.kill())}),this.events.on("collisionend",a=>{this.filter(a.other)&&this.events.emit("exit",new Rl(this,a.other))})}set target(e){this._target=e,this.filter=a=>a===e}get target(){return this._target}_initialize(e){super._initialize(e)}_dispatchAction(){this.repeat!==0&&(this.action.call(this),this.repeat--)}}const or={Highest:-1/0,Higher:-5,Average:0,Lower:5,Lowest:1/0};var Sr;(function(ut){ut.Update="update",ut.Draw="draw"})(Sr||(Sr={}));class Gr{constructor(){this.priority=or.Average}}class co{constructor(e){this._world=e,this.entities=[],this._entityIndex={},this._entitiesToRemove=[]}updateEntities(e,a){for(const h of this.entities)h.update(e.engine,a),h.active||this.removeEntity(h)}findEntitiesForRemoval(){for(const e of this.entities)e.active||this.removeEntity(e)}addEntity(e){e.active=!0,e.scene=this._world.scene,e&&!this._entityIndex[e.id]&&(this._entityIndex[e.id]=e,this.entities.push(e),this._world.queryManager.addEntity(e),e.children.forEach(a=>{a.scene=e.scene,this.addEntity(a)}),e.childrenAdded$.register({notify:a=>{this.addEntity(a)}}),e.childrenRemoved$.register({notify:a=>{this.removeEntity(a,!1)}}))}removeEntity(e,a=!0){var h,_;let lt=0;e instanceof jo?lt=e.id:lt=e;const ft=this._entityIndex[lt];if(ft&&ft.active&&(ft.active=!1),ft&&a){this._entitiesToRemove.push(ft);return}delete this._entityIndex[lt],ft&&(ft.scene=null,Xt(ft,this.entities),this._world.queryManager.removeEntity(ft),ft.children.forEach(mt=>{mt.scene=null,this.removeEntity(mt,a)}),ft.childrenAdded$.clear(),ft.childrenRemoved$.clear(),!((_=(h=this._world)===null||h===void 0?void 0:h.scene)===null||_===void 0)&&_.engine&&this._world.scene.engine.stats.currFrame.actors.killed++)}processEntityRemovals(){for(const e of this._entitiesToRemove)e.active||this.removeEntity(e,!1);this._entitiesToRemove.length=0}processComponentRemovals(){for(const e of this.entities)e.processComponentRemoval()}getById(e){return this._entityIndex[e]}getByName(e){return this.entities.filter(a=>a.name===e)}clear(){for(let e=this.entities.length-1;e>=0;e--)this.removeEntity(this.entities[e])}}class po{constructor(e){if(this.requiredComponents=e,this.components=new Set,this.entities=[],this.entityAdded$=new lo,this.entityRemoved$=new lo,e.length===0)throw new Error("Cannot create query without components");for(const a of e)this.components.add(a);this.id=po.createId(e)}static createId(e){return e.slice().map(a=>a.name).sort().join("-")}checkAndAdd(e){return!this.entities.includes(e)&&e.hasAll(Array.from(this.components))?(this.entities.push(e),this.entityAdded$.notifyAll(e),!0):!1}removeEntity(e){const a=this.entities.indexOf(e);a>-1&&(this.entities.splice(a,1),this.entityRemoved$.notifyAll(e))}getEntities(e){return e&&this.entities.sort(e),this.entities}}class yo{constructor(e){if(this.requiredTags=e,this.tags=new Set,this.entities=[],this.entityAdded$=new lo,this.entityRemoved$=new lo,e.length===0)throw new Error("Cannot create tag query without tags");for(const a of e)this.tags.add(a);this.id=yo.createId(e)}static createId(e){return e.slice().sort().join("-")}checkAndAdd(e){return!this.entities.includes(e)&&e.hasAllTags(Array.from(this.tags))?(this.entities.push(e),this.entityAdded$.notifyAll(e),!0):!1}removeEntity(e){const a=this.entities.indexOf(e);a>-1&&(this.entities.splice(a,1),this.entityRemoved$.notifyAll(e))}getEntities(e){return e&&this.entities.sort(e),this.entities}}class ts{constructor(e){this._world=e,this._queries=new Map,this._addComponentHandlers=new Map,this._removeComponentHandlers=new Map,this._componentToQueriesIndex=new Map,this._tagQueries=new Map,this._addTagHandlers=new Map,this._removeTagHandlers=new Map,this._tagToQueriesIndex=new Map,this._createAddComponentHandler=a=>h=>{this.addComponent(a,h)},this._createRemoveComponentHandler=a=>h=>{this.removeComponent(a,h)},this._createAddTagHandler=a=>h=>{this.addTag(a,h)},this._createRemoveTagHandler=a=>h=>{this.removeTag(a,h)}}createQuery(e){const a=po.createId(e);if(this._queries.has(a))return this._queries.get(a);const h=new po(e);this._queries.set(h.id,h);for(const _ of e){const lt=this._componentToQueriesIndex.get(_);lt?lt.push(h):this._componentToQueriesIndex.set(_,[h])}for(const _ of this._world.entities)this.addEntity(_);return h}createTagQuery(e){const a=yo.createId(e);if(this._tagQueries.has(a))return this._tagQueries.get(a);const h=new yo(e);this._tagQueries.set(h.id,h);for(const _ of e){const lt=this._tagToQueriesIndex.get(_);lt?lt.push(h):this._tagToQueriesIndex.set(_,[h])}for(const _ of this._world.entities)this.addEntity(_);return h}addEntity(e){const a=this._addComponentHandlers.get(e),h=this._removeComponentHandlers.get(e),_=a??this._createAddComponentHandler(e),lt=h??this._createRemoveComponentHandler(e);this._addComponentHandlers.set(e,_),this._removeComponentHandlers.set(e,lt);const ft=this._addTagHandlers.get(e),mt=this._removeTagHandlers.get(e),kt=ft??this._createAddTagHandler(e),Rt=mt??this._createRemoveTagHandler(e);this._addTagHandlers.set(e,kt),this._removeTagHandlers.set(e,Rt);for(const Mt of this._queries.values())Mt.checkAndAdd(e);for(const Mt of this._tagQueries.values())Mt.checkAndAdd(e);e.componentAdded$.subscribe(_),e.componentRemoved$.subscribe(lt),e.tagAdded$.subscribe(kt),e.tagRemoved$.subscribe(Rt)}removeEntity(e){const a=this._addComponentHandlers.get(e),h=this._removeComponentHandlers.get(e);for(const ft of this._queries.values())ft.removeEntity(e);a&&e.componentAdded$.unsubscribe(a),h&&e.componentRemoved$.unsubscribe(h);const _=this._addTagHandlers.get(e),lt=this._removeTagHandlers.get(e);for(const ft of this._tagQueries.values())ft.removeEntity(e);_&&e.tagAdded$.unsubscribe(_),lt&&e.tagRemoved$.unsubscribe(lt)}addComponent(e,a){var h;const _=(h=this._componentToQueriesIndex.get(a.constructor))!==null&&h!==void 0?h:[];for(const lt of _)lt.checkAndAdd(e)}removeComponent(e,a){var h;const _=(h=this._componentToQueriesIndex.get(a.constructor))!==null&&h!==void 0?h:[];for(const lt of _)lt.removeEntity(e)}addTag(e,a){var h;const _=(h=this._tagToQueriesIndex.get(a))!==null&&h!==void 0?h:[];for(const lt of _)lt.checkAndAdd(e)}removeTag(e,a){var h;const _=(h=this._tagToQueriesIndex.get(a))!==null&&h!==void 0?h:[];for(const lt of _)lt.removeEntity(e)}}function es(ut){var e,a;return!!ut?.prototype&&!!(!((a=(e=ut?.prototype)===null||e===void 0?void 0:e.constructor)===null||a===void 0)&&a.name)}class Ul{constructor(e){this._world=e,this.systems=[],this.initialized=!1}get(e){return this.systems.find(a=>a instanceof e)}addSystem(e){let a;e instanceof Gr?a=e:a=new e(this._world),this.systems.push(a),this.systems.sort((h,_)=>h.priority-_.priority),this.initialized&&a.initialize&&a.initialize(this._world,this._world.scene)}removeSystem(e){Xt(e,this.systems)}initialize(){if(!this.initialized){this.initialized=!0;for(const e of this.systems)e.initialize&&e.initialize(this._world,this._world.scene)}}updateSystems(e,a,h){const _=this.systems.filter(lt=>lt.systemType===e);for(const lt of _)lt.preupdate&&lt.preupdate(a,h);for(const lt of _)lt.update(h);for(const lt of _)lt.postupdate&&lt.postupdate(a,h)}clear(){for(let e=this.systems.length-1;e>=0;e--)this.removeSystem(this.systems[e])}}class Wl{constructor(e){this.scene=e,this.queryManager=new ts(this),this.entityManager=new co(this),this.systemManager=new Ul(this)}query(e){return this.queryManager.createQuery(e)}queryTags(e){return this.queryManager.createTagQuery(e)}update(e,a){e===Sr.Update&&this.entityManager.updateEntities(this.scene,a),this.systemManager.updateSystems(e,this.scene,a),this.entityManager.findEntitiesForRemoval(),this.entityManager.processComponentRemovals(),this.entityManager.processEntityRemovals()}add(e){e instanceof jo&&this.entityManager.addEntity(e),(e instanceof Gr||es(e))&&this.systemManager.addSystem(e)}get(e){return this.systemManager.get(e)}remove(e,a=!0){e instanceof jo&&this.entityManager.removeEntity(e,a),e instanceof Gr&&this.systemManager.removeSystem(e)}get entities(){return this.entityManager.entities}clearEntities(){this.entityManager.clear()}clearSystems(){this.systemManager.clear()}}class as{static integrate(e,a,h,_){const lt=_/1e3;a.vel.addEqual(h.scale(lt,as._ACC)),e.pos.add(a.vel.scale(lt,as._VEL),as._POS).addEqual(h.scale(.5*lt*lt,as._VEL_ACC)),a.angularVelocity+=a.torque*(1/a.inertia)*lt;const ft=e.rotation+a.angularVelocity*lt;e.scale.add(a.scaleFactor.scale(lt,this._SCALE_FACTOR),as._SCALE),e.get().setTransform(as._POS,ft,as._SCALE)}}as._POS=new At(0,0),as._SCALE=new At(1,1),as._ACC=new At(0,0),as._VEL=new At(0,0),as._VEL_ACC=new At(0,0),as._SCALE_FACTOR=new At(0,0);class vp extends Gr{constructor(e,a){super(),this.world=e,this.physics=a,this.systemType=Sr.Update,this.priority=or.Higher,this._physicsConfigDirty=!1,a.$configUpdate.subscribe(()=>this._physicsConfigDirty=!0),this.query=this.world.query([hr,uo])}update(e){let a,h;const _=this.query.entities;for(let lt=0;lt<_.length;lt++){a=_[lt].get(hr),h=_[lt].get(uo);const ft=_[lt].get(Ur);if(this._physicsConfigDirty&&ft&&ft.updatePhysicsConfig(this.physics.config.bodies),ft?.sleeping)continue;const mt=h.acc.clone();ft?.collisionType===On.Active&&ft?.useGravity&&mt.addEqual(this.physics.config.gravity),ft?.captureOldTransform(),as.integrate(a,h,mt,e)}this._physicsConfigDirty=!1}}class np{constructor(e){this.config=e,this.directionMap=new Map,this.distanceMap=new Map}solve(e){this.preSolve(e),e=e.filter(h=>!h.isCanceled());let a;switch(this.config.contactSolveBias){case fs.HorizontalFirst:{a=Fl;break}case fs.VerticalFirst:{a=xa;break}default:a=Ys}e.sort((h,_)=>{const lt=this.directionMap.get(h.id),ft=this.directionMap.get(_.id),mt=this.distanceMap.get(h.id),kt=this.distanceMap.get(_.id);return a[lt]-a[ft]||mt-kt});for(const h of e)this.solvePosition(h),this.solveVelocity(h);return this.postSolve(e),e}preSolve(e){for(const h of e){if(Math.abs(h.mtv.x)<1e-4&&Math.abs(h.mtv.y)<1e-4){h.cancel();continue}const _=jt.fromDirection(h.mtv),lt=h.mtv.negate(),ft=h.colliderA.worldPos.squareDistance(h.colliderB.worldPos);this.distanceMap.set(h.id,ft),this.directionMap.set(h.id,_===jt.Left||_===jt.Right?"horizontal":"vertical"),h.colliderA.events.emit("precollision",new Ds(h.colliderA,h.colliderB,_,lt,h)),h.colliderB.events.emit("precollision",new Ds(h.colliderB,h.colliderA,jt.getOpposite(_),lt.negate(),h))}}postSolve(e){var a,h;for(const _ of e){if(_.isCanceled())continue;const lt=_.colliderA,ft=_.colliderB,mt=(a=lt.owner)===null||a===void 0?void 0:a.get(Ur),kt=(h=ft.owner)===null||h===void 0?void 0:h.get(Ur);if(mt&&kt&&(mt.collisionType===On.Passive||kt.collisionType===On.Passive))continue;const Rt=jt.fromDirection(_.mtv),Mt=_.mtv.negate();_.colliderA.events.emit("postcollision",new Cs(_.colliderA,_.colliderB,Rt,Mt,_)),_.colliderB.events.emit("postcollision",new Cs(_.colliderB,_.colliderA,jt.getOpposite(Rt),Mt.negate(),_))}}solvePosition(e){var a,h;if(!e.colliderA.bounds.overlaps(e.colliderB.bounds,1e-4)){e.cancel();return}if(Math.abs(e.mtv.x)<1e-4&&Math.abs(e.mtv.y)<1e-4){e.cancel();return}let lt=e.mtv;const ft=e.colliderA,mt=e.colliderB,kt=(a=ft.owner)===null||a===void 0?void 0:a.get(Ur),Rt=(h=mt.owner)===null||h===void 0?void 0:h.get(Ur);if(kt&&Rt){if(kt.collisionType===On.Passive||Rt.collisionType===On.Passive)return;kt.collisionType===On.Active&&Rt.collisionType===On.Active&&(lt=lt.scale(.5)),kt.collisionType===On.Active&&(kt.globalPos.x-=lt.x,kt.globalPos.y-=lt.y,ft.update(kt.transform.get())),Rt.collisionType===On.Active&&(Rt.globalPos.x+=lt.x,Rt.globalPos.y+=lt.y,mt.update(Rt.transform.get()))}}solveVelocity(e){var a,h;if(e.isCanceled())return;const _=e.colliderA,lt=e.colliderB,ft=(a=_.owner)===null||a===void 0?void 0:a.get(Ur),mt=(h=lt.owner)===null||h===void 0?void 0:h.get(Ur);if(ft&&mt){if(ft.collisionType===On.Passive||mt.collisionType===On.Passive)return;const kt=e.normal,Rt=kt.negate();if(ft.collisionType===On.Active&&ft.vel.normalize().dot(Rt)<0){const Mt=kt.scale(kt.dot(ft.vel.negate()));ft.vel=ft.vel.add(Mt)}if(mt.collisionType===On.Active&&mt.vel.normalize().dot(kt)<0){const Mt=Rt.scale(Rt.dot(mt.vel.negate()));mt.vel=mt.vel.add(Mt)}}}}class yp{constructor(e,a,h){this.point=e,this.local=a,this.contact=h,this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.aToContact=new At(0,0),this.bToContact=new At(0,0),this.originalVelocityAndRestitution=0,this.update()}update(){var e,a;const h=(e=this.contact.colliderA.owner)===null||e===void 0?void 0:e.get(Ur),_=(a=this.contact.colliderB.owner)===null||a===void 0?void 0:a.get(Ur);if(h&&_){const lt=this.contact.normal,ft=this.contact.tangent;this.aToContact=this.point.sub(h.globalPos),this.bToContact=this.point.sub(_.globalPos);const mt=this.aToContact.cross(lt),kt=this.bToContact.cross(lt);this.normalMass=h.inverseMass+_.inverseMass+h.inverseInertia*mt*mt+_.inverseInertia*kt*kt;const Rt=this.aToContact.cross(ft),Mt=this.bToContact.cross(ft);this.tangentMass=h.inverseMass+_.inverseMass+h.inverseInertia*Rt*Rt+_.inverseInertia*Mt*Mt}return this}getRelativeVelocity(){var e,a;const h=(e=this.contact.colliderA.owner)===null||e===void 0?void 0:e.get(Ur),_=(a=this.contact.colliderB.owner)===null||a===void 0?void 0:a.get(Ur);if(h&&_){const lt=h.vel.add(At.cross(h.angularVelocity,this.aToContact));return _.vel.add(At.cross(_.angularVelocity,this.bToContact)).sub(lt)}return At.Zero}}class ip{constructor(e){this.config=e,this.lastFrameContacts=new Map,this.idToContactConstraint=new Map}getContactConstraints(e){var a;return(a=this.idToContactConstraint.get(e))!==null&&a!==void 0?a:[]}solve(e){return this.preSolve(e),e=e.filter(a=>!a.isCanceled()),this.solveVelocity(e),this.solvePosition(e),this.postSolve(e),e}preSolve(e){var a,h,_;for(const mt of e){if(Math.abs(mt.mtv.x)<1e-4&&Math.abs(mt.mtv.y)<1e-4){mt.cancel();continue}const kt=jt.fromDirection(mt.mtv);mt.colliderA.events.emit("precollision",new Ds(mt.colliderA,mt.colliderB,kt,mt.mtv,mt)),mt.colliderA.events.emit("beforecollisionresolve",new _a(mt.colliderA,mt.colliderB,kt,mt.mtv,mt)),mt.colliderB.events.emit("precollision",new Ds(mt.colliderB,mt.colliderA,jt.getOpposite(kt),mt.mtv.negate(),mt)),mt.colliderB.events.emit("beforecollisionresolve",new _a(mt.colliderB,mt.colliderA,jt.getOpposite(kt),mt.mtv.negate(),mt)),mt.matchAwake()}const ft=Array.from(this.idToContactConstraint.keys());for(const mt of e){const kt=ft.indexOf(mt.id);kt>-1&&ft.splice(kt,1);const Rt=(a=this.idToContactConstraint.get(mt.id))!==null&&a!==void 0?a:[];let Mt=0;const Nt=mt.colliderA.owner.get(Ur),en=mt.colliderB.owner.get(Ur);if(Nt&&en)for(const an of mt.points){const un=mt.normal,wn=mt.tangent,Bn=an.sub(Nt.globalPos),fn=an.sub(en.globalPos),pn=Bn.cross(un),zn=fn.cross(un),Pn=Nt.inverseMass+en.inverseMass+Nt.inverseInertia*pn*pn+en.inverseInertia*zn*zn,yr=Bn.cross(wn),Qr=fn.cross(wn),Hn=Nt.inverseMass+en.inverseMass+Nt.inverseInertia*yr*yr+en.inverseInertia*Qr*Qr;Rt[Mt]&&((_=(h=Rt[Mt])===null||h===void 0?void 0:h.point)===null||_===void 0?void 0:_.squareDistance(an))<4?(Rt[Mt].point=an,Rt[Mt].local=mt.localPoints[Mt]):Rt[Mt]=new yp(an,mt.localPoints[Mt],mt),Rt[Mt].aToContact=Bn,Rt[Mt].bToContact=fn,Rt[Mt].normalMass=1/Pn,Rt[Mt].tangentMass=1/Hn;const Kr=Nt.bounciness>en.bounciness?Nt.bounciness:en.bounciness,Ao=mt.normal.dot(Rt[Mt].getRelativeVelocity());Rt[Mt].originalVelocityAndRestitution=0,Ao<-.1&&(Rt[Mt].originalVelocityAndRestitution=-Kr*Ao),Mt++}this.idToContactConstraint.set(mt.id,Rt)}for(const mt of ft)this.idToContactConstraint.delete(mt);if(this.config.warmStart)this.warmStart(e);else for(const mt of e){const kt=this.getContactConstraints(mt.id);for(const Rt of kt)Rt.normalImpulse=0,Rt.tangentImpulse=0}}postSolve(e){for(const a of e){const h=a.colliderA.owner.get(Ur),_=a.colliderB.owner.get(Ur);if(h&&_){if(h.collisionType===On.Passive||_.collisionType===On.Passive)continue;h.updateMotion(),_.updateMotion()}const lt=jt.fromDirection(a.mtv);a.colliderA.events.emit("postcollision",new Cs(a.colliderA,a.colliderB,lt,a.mtv,a)),a.colliderA.events.emit("aftercollisionresolve",new ba(a.colliderA,a.colliderB,lt,a.mtv,a)),a.colliderB.events.emit("postcollision",new Cs(a.colliderB,a.colliderA,jt.getOpposite(lt),a.mtv.negate(),a)),a.colliderB.events.emit("aftercollisionresolve",new ba(a.colliderB,a.colliderA,jt.getOpposite(lt),a.mtv.negate(),a))}this.lastFrameContacts.clear();for(const a of e)this.lastFrameContacts.set(a.id,a)}warmStart(e){var a,h,_;for(const lt of e){const ft=(a=lt.colliderA.owner)===null||a===void 0?void 0:a.get(Ur),mt=(h=lt.colliderB.owner)===null||h===void 0?void 0:h.get(Ur);if(ft&&mt){const kt=(_=this.idToContactConstraint.get(lt.id))!==null&&_!==void 0?_:[];for(const Rt of kt)if(this.config.warmStart){const Mt=lt.normal.scale(Rt.normalImpulse),Nt=lt.tangent.scale(Rt.tangentImpulse),en=Mt.add(Nt);ft.applyImpulse(Rt.point,en.negate()),mt.applyImpulse(Rt.point,en)}else Rt.normalImpulse=0,Rt.tangentImpulse=0}}}solvePosition(e){var a,h,_;for(let lt=0;lt<this.config.positionIterations;lt++)for(const ft of e){const mt=(a=ft.colliderA.owner)===null||a===void 0?void 0:a.get(Ur),kt=(h=ft.colliderB.owner)===null||h===void 0?void 0:h.get(Ur);if(mt&&kt){if(mt.collisionType===On.Passive||kt.collisionType===On.Passive)continue;const Rt=(_=this.idToContactConstraint.get(ft.id))!==null&&_!==void 0?_:[];for(const Mt of Rt){const Nt=ft.normal,en=bs.FindContactSeparation(ft,Mt.local),an=this.config.steeringFactor,un=-5,wn=this.config.slop,Bn=Pt(an*(en+wn),un,0),fn=Nt.scale(-Bn*Mt.normalMass);if(mt.collisionType===On.Active){const pn=fn.negate().scale(mt.inverseMass);mt.limitDegreeOfFreedom.includes(Uo.X)&&(pn.x=0),mt.limitDegreeOfFreedom.includes(Uo.Y)&&(pn.y=0),mt.globalPos=mt.globalPos.add(pn),mt.limitDegreeOfFreedom.includes(Uo.Rotation)||(mt.rotation-=Mt.aToContact.cross(fn)*mt.inverseInertia)}if(kt.collisionType===On.Active){const pn=fn.scale(kt.inverseMass);kt.limitDegreeOfFreedom.includes(Uo.X)&&(pn.x=0),kt.limitDegreeOfFreedom.includes(Uo.Y)&&(pn.y=0),kt.globalPos=kt.globalPos.add(pn),kt.limitDegreeOfFreedom.includes(Uo.Rotation)||(kt.rotation+=Mt.bToContact.cross(fn)*kt.inverseInertia)}}}}}solveVelocity(e){var a,h,_;for(let lt=0;lt<this.config.velocityIterations;lt++)for(const ft of e){const mt=(a=ft.colliderA.owner)===null||a===void 0?void 0:a.get(Ur),kt=(h=ft.colliderB.owner)===null||h===void 0?void 0:h.get(Ur);if(mt&&kt){if(mt.collisionType===On.Passive||kt.collisionType===On.Passive)continue;const Rt=Math.min(mt.friction,kt.friction),Mt=(_=this.idToContactConstraint.get(ft.id))!==null&&_!==void 0?_:[];for(const Nt of Mt){let un=-Nt.getRelativeVelocity().dot(ft.tangent)*Nt.tangentMass;const wn=Rt*Nt.normalImpulse,Bn=Pt(Nt.tangentImpulse+un,-wn,wn);un=Bn-Nt.tangentImpulse,Nt.tangentImpulse=Bn;const fn=ft.tangent.scale(un);mt.applyImpulse(Nt.point,fn.negate()),kt.applyImpulse(Nt.point,fn)}for(const Nt of Mt){const an=Nt.getRelativeVelocity().dot(ft.normal);let un=-Nt.normalMass*(an-Nt.originalVelocityAndRestitution);const wn=Math.max(Nt.normalImpulse+un,0);un=wn-Nt.normalImpulse,Nt.normalImpulse=wn;const Bn=ft.normal.scale(un);mt.applyImpulse(Nt.point,Bn.negate()),kt.applyImpulse(Nt.point,Bn)}}}}}class rp extends Gr{get _processor(){return this._physics.collisionProcessor}constructor(e,a){super(),this._physics=a,this.systemType=Sr.Update,this.priority=or.Higher,this._configDirty=!1,this._lastFrameContacts=new Map,this._currentFrameContacts=new Map,this._arcadeSolver=new np(a.config.arcade),this._realisticSolver=new ip(a.config.realistic),this._physics.$configUpdate.subscribe(()=>this._configDirty=!0),this._trackCollider=h=>this._processor.track(h),this._untrackCollider=h=>this._processor.untrack(h),this.query=e.query([hr,uo,xo]),this.query.entityAdded$.subscribe(h=>{const _=h.get(xo);_.$colliderAdded.subscribe(this._trackCollider),_.$colliderRemoved.subscribe(this._untrackCollider);const lt=_.get();lt&&this._processor.track(lt)}),this.query.entityRemoved$.subscribe(h=>{const _=h.get(xo),lt=_.get();_&&lt&&this._processor.untrack(lt)})}initialize(e,a){this._engine=a.engine}update(e){var a,h,_,lt;if(!this._physics.config.enabled)return;let ft=[];for(const Mt of this.query.entities){const Nt=Mt.get(xo),en=Nt?.get();if(Nt&&(!((a=Nt.owner)===null||a===void 0)&&a.active)&&en)if(Nt.update(),en instanceof So){const an=en.getColliders();en.compositeStrategy||(en.compositeStrategy=this._physics.config.colliders.compositeStrategy),ft=ft.concat(an)}else ft.push(en)}this._processor.update(ft);const mt=this._processor.broadphase(ft,e);this._currentFrameContacts.clear();let kt=this._processor.narrowphase(mt,(lt=(_=(h=this._engine)===null||h===void 0?void 0:h.debug)===null||_===void 0?void 0:_.stats)===null||lt===void 0?void 0:lt.currFrame);kt=this.getSolver().solve(kt);for(const Mt of kt){if(Mt.isCanceled())continue;const Nt=Mt.id.indexOf("|");if(Nt>0){const en=Mt.id.substring(Nt+1);this._currentFrameContacts.set(en,Mt)}else this._currentFrameContacts.set(Mt.id,Mt)}this.runContactStartEnd(),this._lastFrameContacts.clear(),this._lastFrameContacts=new Map(this._currentFrameContacts);for(const Mt of this.query.entities){const Nt=Mt.get(xo);Nt&&Nt.processColliderRemoval()}}getSolver(){return this._configDirty&&(this._configDirty=!1,this._arcadeSolver=new np(this._physics.config.arcade),this._realisticSolver=new ip(this._physics.config.realistic)),this._physics.config.solver===Qo.Realistic?this._realisticSolver:this._arcadeSolver}debug(e){this._processor.debug(e)}runContactStartEnd(){for(const[e,a]of this._currentFrameContacts)if(!this._lastFrameContacts.has(e)){const h=a.colliderA,_=a.colliderB,lt=jt.fromDirection(a.mtv),ft=jt.getOpposite(lt);h.events.emit("collisionstart",new Vs(h,_,lt,a)),h.events.emit("contactstart",new ga(h,_,lt,a)),_.events.emit("collisionstart",new Vs(_,h,ft,a)),_.events.emit("contactstart",new ga(_,h,ft,a))}for(const[e,a]of this._lastFrameContacts)if(!this._currentFrameContacts.has(e)){const h=a.colliderA,_=a.colliderB,lt=jt.fromDirection(a.mtv),ft=jt.getOpposite(lt);h.events.emit("collisionend",new Mo(h,_,lt,a)),h.events.emit("contactend",new Is(h,_,lt,a)),_.events.emit("collisionend",new Mo(_,h,ft,a)),_.events.emit("contactend",new Is(_,h,ft,a))}}}function wp(ut){return class extends ut{assign(e){for(const a in e)typeof this[a]!="function"&&(this[a]=e[a])}constructor(...e){super(...e),e.filter(function(h){return h!==void 0}).length===1&&e[0]&&typeof e[0]=="object"&&!(e[0]instanceof Array)&&this.assign(e[0])}}}var uu;(function(ut){ut[ut.Circle=0]="Circle",ut[ut.Rectangle=1]="Rectangle"})(uu||(uu={}));class Kp extends jo{constructor(e,a,h,_,lt,ft,mt,kt,Rt,Mt,Nt){super(),this.position=new At(0,0),this.velocity=new At(0,0),this.acceleration=new At(0,0),this.particleRotationalVelocity=0,this.currentRotation=0,this.focus=null,this.focusAccel=0,this.opacity=1,this.beginColor=Gt.White,this.endColor=Gt.White,this.life=300,this.fadeFlag=!1,this._rRate=1,this._gRate=1,this._bRate=1,this._aRate=0,this._currentColor=Gt.White,this.emitter=null,this.particleSize=5,this.particleSprite=null,this.sizeRate=0,this.elapsedMultiplier=0,this.visible=!0,this.isOffscreen=!1;let en=e;if(en&&!(e instanceof bp)){const an=e;en=an.emitter,a=an.life,h=an.opacity,lt=an.endColor,_=an.beginColor,ft=an.position,mt=an.velocity,kt=an.acceleration,Rt=an.startSize,Mt=an.endSize,Nt=an.particleSprite}if(this.emitter=en,this.life=a||this.life,this.opacity=h||this.opacity,this.endColor=lt||this.endColor.clone(),this.beginColor=_||this.beginColor.clone(),this._currentColor=this.beginColor.clone(),this.particleSprite=Nt,this.emitter.particleTransform===hu.Global){const an=this.emitter.transform.globalPos;this.position=(ft||this.position).add(an),this.velocity=(mt||this.velocity).rotate(this.emitter.transform.globalRotation)}else this.velocity=mt||this.velocity,this.position=ft||this.position;this.acceleration=kt||this.acceleration,this._rRate=(this.endColor.r-this.beginColor.r)/this.life,this._gRate=(this.endColor.g-this.beginColor.g)/this.life,this._bRate=(this.endColor.b-this.beginColor.b)/this.life,this._aRate=this.opacity/this.life,this.startSize=Rt||0,this.endSize=Mt||0,this.endSize>0&&this.startSize>0&&(this.sizeRate=(this.endSize-this.startSize)/this.life,this.particleSize=this.startSize),this.addComponent(this.transform=new hr),this.addComponent(this.graphics=new Do),this.transform.pos=this.position,this.transform.rotation=this.currentRotation,this.transform.scale=It(1,1),this.transform.z=this.emitter.z,this.particleSprite?(this.graphics.opacity=this.opacity,this.graphics.use(this.particleSprite)):(this.graphics.localBounds=Wt.fromDimension(this.particleSize,this.particleSize,At.Half),this.graphics.onPostDraw=an=>{an.save(),this.graphics.opacity=this.opacity;const un=this._currentColor.clone();un.a=1,an.debug.drawPoint(It(0,0),{color:un,size:this.particleSize}),an.restore()})}kill(){this.emitter.removeParticle(this)}update(e,a){if(this.life=this.life-a,this.elapsedMultiplier=this.elapsedMultiplier+a,this.life<0&&this.kill(),this.fadeFlag&&(this.opacity=Pt(this._aRate*this.life,1e-4,1)),this.startSize>0&&this.endSize>0&&(this.particleSize=Pt(this.sizeRate*a+this.particleSize,Math.min(this.startSize,this.endSize),Math.max(this.startSize,this.endSize))),this._currentColor.r=Pt(this._currentColor.r+this._rRate*a,0,255),this._currentColor.g=Pt(this._currentColor.g+this._gRate*a,0,255),this._currentColor.b=Pt(this._currentColor.b+this._bRate*a,0,255),this._currentColor.a=Pt(this.opacity,1e-4,1),this.focus){const h=this.focus.sub(this.position).normalize().scale(this.focusAccel).scale(a/1e3);this.velocity=this.velocity.add(h)}else this.velocity=this.velocity.add(this.acceleration.scale(a/1e3));this.position=this.position.add(this.velocity.scale(a/1e3)),this.particleRotationalVelocity&&(this.currentRotation=(this.currentRotation+this.particleRotationalVelocity*a/1e3)%(2*Math.PI)),this.transform.pos=this.position,this.transform.rotation=this.currentRotation,this.transform.scale=It(1,1),this.graphics.opacity=this.opacity}}class Yu extends wp(Kp){constructor(e,a,h,_,lt,ft,mt,kt,Rt,Mt,Nt){super(e,a,h,_,lt,ft,mt,kt,Rt,Mt,Nt)}}var hu;(function(ut){ut.Global="global",ut.Local="local"})(hu||(hu={}));class bp extends Yo{get opacity(){return this.graphics.opacity}set opacity(e){this.graphics.opacity=e}get particleSprite(){return this._sprite}set particleSprite(e){e&&(this._sprite=e)}constructor(e){var a,h;super({width:(a=e.width)!==null&&a!==void 0?a:0,height:(h=e.height)!==null&&h!==void 0?h:0}),this._particlesToEmit=0,this.numParticles=0,this.isEmitting=!0,this.particles=[],this.deadParticles=[],this.minVel=0,this.maxVel=0,this.acceleration=new At(0,0),this.minAngle=0,this.maxAngle=0,this.emitRate=1,this.particleLife=2e3,this.fadeFlag=!1,this.focus=null,this.focusAccel=null,this.startSize=null,this.endSize=null,this.minSize=5,this.maxSize=5,this.beginColor=Gt.White,this.endColor=Gt.White,this._sprite=null,this.emitterType=uu.Rectangle,this.radius=0,this.particleRotationalVelocity=0,this.randomRotation=!1,this.particleTransform=hu.Global;const{x:_,y:lt,z:ft,pos:mt,isEmitting:kt,minVel:Rt,maxVel:Mt,acceleration:Nt,minAngle:en,maxAngle:an,emitRate:un,particleLife:wn,opacity:Bn,fadeFlag:fn,focus:pn,focusAccel:zn,startSize:Pn,endSize:yr,minSize:Qr,maxSize:Hn,beginColor:Kr,endColor:Ao,particleSprite:Wo,emitterType:gs,radius:ms,particleRotationalVelocity:_s,particleTransform:cs,randomRotation:Xo,random:qo}={...e};this.pos=mt??It(_??0,lt??0),this.z=ft??0,this.isEmitting=kt??this.isEmitting,this.minVel=Rt??this.minVel,this.maxVel=Mt??this.maxVel,this.acceleration=Nt??this.acceleration,this.minAngle=en??this.minAngle,this.maxAngle=an??this.maxAngle,this.emitRate=un??this.emitRate,this.particleLife=wn??this.particleLife,this.opacity=Bn??this.opacity,this.fadeFlag=fn??this.fadeFlag,this.focus=pn??this.focus,this.focusAccel=zn??this.focusAccel,this.startSize=Pn??this.startSize,this.endSize=yr??this.endSize,this.minSize=Qr??this.minSize,this.maxSize=Hn??this.maxSize,this.beginColor=Kr??this.beginColor,this.endColor=Ao??this.endColor,this.particleSprite=Wo??this.particleSprite,this.emitterType=gs??this.emitterType,this.radius=ms??this.radius,this.particleRotationalVelocity=_s??this.particleRotationalVelocity,this.randomRotation=Xo??this.randomRotation,this.particleTransform=cs??this.particleTransform,this.body.collisionType=On.PreventCollision,this.random=qo??new bt}removeParticle(e){this.deadParticles.push(e)}emitParticles(e){var a;for(let h=0;h<e;h++){const _=this._createParticle();this.particles.push(_),!((a=this===null||this===void 0?void 0:this.scene)===null||a===void 0)&&a.world&&(this.particleTransform===hu.Global?this.scene.world.add(_):this.addChild(_))}}clearParticles(){this.particles.length=0}_createParticle(){let e=0,a=0;const h=Ot(this.minAngle,this.maxAngle,this.random),_=Ot(this.minVel,this.maxVel,this.random),lt=this.startSize||Ot(this.minSize,this.maxSize,this.random),ft=_*Math.cos(h),mt=_*Math.sin(h);if(this.emitterType===uu.Rectangle)e=Ot(0,this.width,this.random),a=Ot(0,this.height,this.random);else if(this.emitterType===uu.Circle){const Rt=Ot(0,this.radius,this.random);e=Rt*Math.cos(h),a=Rt*Math.sin(h)}const kt=new Yu(this,this.particleLife,this.opacity,this.beginColor,this.endColor,new At(e,a),new At(ft,mt),this.acceleration,this.startSize,this.endSize,this.particleSprite);return kt.fadeFlag=this.fadeFlag,kt.particleSize=lt,kt.particleRotationalVelocity=this.particleRotationalVelocity,this.randomRotation&&(kt.currentRotation=Ot(0,Math.PI*2,this.random)),this.focus&&(kt.focus=this.focus.add(new At(this.pos.x,this.pos.y)),kt.focusAccel=this.focusAccel),kt}update(e,a){var h;super.update(e,a),this.isEmitting&&(this._particlesToEmit+=this.emitRate*(a/1e3),this._particlesToEmit>1&&(this.emitParticles(Math.floor(this._particlesToEmit)),this._particlesToEmit=this._particlesToEmit-Math.floor(this._particlesToEmit)));for(let _=0;_<this.deadParticles.length;_++)Xt(this.deadParticles[_],this.particles),!((h=this===null||this===void 0?void 0:this.scene)===null||h===void 0)&&h.world&&this.scene.world.remove(this.deadParticles[_],!1);this.deadParticles.length=0}}function Jp(ut,e,a,h){if(ut.parent!==e.parent){const Mt=ut.clone(),Nt=ut.globalPos.clone(),en=ut.globalScale.clone(),an=ut.globalRotation;Mt.parent=e.parent,Mt.globalPos=Nt,Mt.globalScale=en,Mt.globalRotation=an,ut=Mt}let _=e.pos,lt=e.scale,ft=e.rotation;_=e.pos.scale(a).add(ut.pos.scale(1-a)),lt=e.scale.scale(a).add(ut.scale.scale(1-a));const mt=(1-a)*Math.cos(ut.rotation)+a*Math.cos(e.rotation),kt=(1-a)*Math.sin(ut.rotation)+a*Math.sin(e.rotation);ft=Math.atan2(kt,mt);const Rt=h??new so;return Rt.setTransform(_,ft,lt),Rt}class xp extends Gr{get sortedTransforms(){return this._sortedTransforms}constructor(e){super(),this.world=e,this.systemType=Sr.Draw,this.priority=or.Average,this._token=0,this._sortedTransforms=[],this._zHasChanged=!1,this._zIndexUpdate=()=>{this._zHasChanged=!0},this._targetInterpolationTransform=new so,this.query=this.world.query([hr,Do]),this.query.entityAdded$.subscribe(a=>{const h=a.get(hr);this._sortedTransforms.push(h),h.zIndexChanged$.subscribe(this._zIndexUpdate),this._zHasChanged=!0}),this.query.entityRemoved$.subscribe(a=>{const h=a.get(hr);h.zIndexChanged$.unsubscribe(this._zIndexUpdate);const _=this._sortedTransforms.indexOf(h);_>-1&&this._sortedTransforms.splice(_,1)})}initialize(e,a){this._camera=a.camera,this._engine=a.engine}preupdate(){this._graphicsContext=this._engine.graphicsContext,this._zHasChanged&&(this._sortedTransforms.sort((e,a)=>e.z-a.z),this._zHasChanged=!1)}update(e){this._token++;let a;ho.checkAndClearCache(),this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext);for(const h of this._sortedTransforms){const _=h.owner;if(_.hasTag("ex.offscreen")||(a=_.get(Do),!a.visible))continue;a.onPreTransformDraw&&a.onPreTransformDraw(this._graphicsContext,e),_.events.emit("pretransformdraw",new us(this._graphicsContext,e,_)),h.coordPlane===vr.Screen&&this._graphicsContext.restore(),this._graphicsContext.save(),h.coordPlane===vr.Screen&&this._graphicsContext.translate(this._engine.screen.contentArea.left,this._engine.screen.contentArea.top),a.update(e,this._token);const lt=_.get(Hl);if(lt){const mt=At.One.sub(lt.parallaxFactor),kt=this._camera.drawPos.scale(mt);this._graphicsContext.translate(kt.x,kt.y)}this._applyTransform(_),a.material&&(this._graphicsContext.material=a.material),a.onPreDraw&&a.onPreDraw(this._graphicsContext,e),_.events.emit("predraw",new ko(this._graphicsContext,e,_));const ft=_ instanceof Yu?_.opacity:1;this._graphicsContext.opacity*=a.opacity*ft,this._drawGraphicsComponent(a,h),a.onPostDraw&&a.onPostDraw(this._graphicsContext,e),_.events.emit("postdraw",new Oo(this._graphicsContext,e,_)),this._graphicsContext.restore(),h.coordPlane===vr.Screen&&(this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext)),a.onPostTransformDraw&&a.onPostTransformDraw(this._graphicsContext,e),_.events.emit("posttransformdraw",new zs(this._graphicsContext,e,_))}this._graphicsContext.restore()}_drawGraphicsComponent(e,a){var h,_;if(e.visible){const lt=e.flipHorizontal,ft=e.flipVertical,mt=e.current,kt=(h=e.currentOptions)!==null&&h!==void 0?h:{};if(mt){let Rt=e.anchor,Mt=e.offset,Nt=1,en=1;kt?.anchor&&(Rt=kt.anchor),kt?.offset&&(Mt=kt.offset);const an=a.globalScale;Nt*=mt.scale.x*an.x,en*=mt.scale.y*an.y;const un=-mt.width*Rt.x+Mt.x*Nt,wn=-mt.height*Rt.y+Mt.y*en,Bn=mt.flipHorizontal,fn=mt.flipVertical;if((lt||ft)&&(mt.flipHorizontal=lt?!Bn:Bn,mt.flipVertical=ft?!fn:fn),mt?.draw(this._graphicsContext,un,wn),(lt||ft)&&(mt.flipHorizontal=Bn,mt.flipVertical=fn),!((_=this._engine)===null||_===void 0)&&_.isDebug&&this._engine.debug.graphics.showBounds){const pn=It(un,wn);if(mt instanceof os)for(const zn of mt.members){let Pn,yr=At.Zero;zn instanceof cn?Pn=zn:(Pn=zn.graphic,yr=zn.offset),mt.useAnchor?Pn?.localBounds.translate(pn.add(yr)).draw(this._graphicsContext,this._engine.debug.graphics.boundsColor):Pn?.localBounds.translate(yr).draw(this._graphicsContext,this._engine.debug.graphics.boundsColor)}else mt?.localBounds.translate(pn).draw(this._graphicsContext,this._engine.debug.graphics.boundsColor)}}}}_applyTransform(e){const a=e.getAncestors();for(const h of a){const _=h?.get(hr),lt=h?.get(Ur);let ft=_.get();if(lt&&this._engine.fixedUpdateFps&&lt.__oldTransformCaptured&&lt.enableFixedUpdateInterpolate){const mt=this._engine.currentFrameLagMs/(1e3/this._engine.fixedUpdateFps);ft=Jp(lt.oldTransform,_.get(),mt,this._targetInterpolationTransform)}_&&(this._graphicsContext.z=_.z,this._graphicsContext.translate(ft.pos.x,ft.pos.y),this._graphicsContext.scale(ft.scale.x,ft.scale.y),this._graphicsContext.rotate(ft.rotation))}}}class Ap extends Gr{constructor(e){super(),this.world=e,this.systemType=Sr.Draw,this.priority=or.Lowest,this.query=this.world.query([hr])}initialize(e,a){this._graphicsContext=a.engine.graphicsContext,this._camera=a.camera,this._engine=a.engine,this._collisionSystem=e.systemManager.get(rp)}update(){var e;if(!this._engine.isDebug)return;const a=this._engine.debug.filter;let h,_;const lt=this._engine.debug.entity;let ft;const mt=this._engine.debug.transform;let kt;const Rt=this._engine.debug.motion;let Mt;const Nt=this._engine.debug.collider,en=this._engine.debug.physics;let an;const un=this._engine.debug.graphics;let wn,Bn;const fn=this._engine.debug.body,pn=this._engine.debug.camera;for(const zn of this.query.entities){if(zn.hasTag("offscreen")||zn instanceof Yu||a.useFilter&&(!(a.ids.length===0||a.ids.includes(zn.id))||!(a.nameQuery===""||zn.name.includes(a.nameQuery))))continue;let Pn=At.Zero;const yr=It(0,16);if(h=zn.id,_=zn.name,ft=zn.get(hr),this._pushCameraTransform(ft),this._graphicsContext.save(),ft.coordPlane===vr.Screen&&this._graphicsContext.translate(this._engine.screen.contentArea.left,this._engine.screen.contentArea.top),this._graphicsContext.z=mt.debugZIndex,this._applyTransform(zn),ft&&((mt.showAll||mt.showPosition)&&this._graphicsContext.debug.drawPoint(At.Zero,{size:4,color:mt.positionColor}),(mt.showAll||mt.showPositionLabel)&&(this._graphicsContext.debug.drawText(`pos${ft.pos.toString(2)}`,Pn),Pn=Pn.add(yr)),(mt.showAll||mt.showZIndex)&&(this._graphicsContext.debug.drawText(`z(${ft.z.toFixed(1)})`,Pn),Pn=Pn.add(yr)),(lt.showAll||lt.showId)&&(this._graphicsContext.debug.drawText(`id(${h}) ${zn.parent?"child of id("+((e=zn.parent)===null||e===void 0?void 0:e.id)+")":""}`,Pn),Pn=Pn.add(yr)),(lt.showAll||lt.showName)&&(this._graphicsContext.debug.drawText(`name(${_})`,Pn),Pn=Pn.add(yr)),(mt.showAll||mt.showRotation)&&(this._graphicsContext.drawLine(At.Zero,At.fromAngle(ft.rotation).scale(50).add(At.Zero),mt.rotationColor,2),this._graphicsContext.debug.drawText(`rot deg(${yt(ft.rotation).toFixed(2)})`,Pn),Pn=Pn.add(yr)),(mt.showAll||mt.showScale)&&this._graphicsContext.drawLine(At.Zero,ft.scale.add(At.Zero),mt.scaleColor,2)),an=zn.get(Do),an&&(un.showAll||un.showBounds)&&an.localBounds.draw(this._graphicsContext,un.boundsColor),wn=zn.get(Ks),wn&&(wn.useTransform||this._graphicsContext.restore(),wn.draw(this._graphicsContext,this._engine.debug),wn.useTransform||(this._graphicsContext.save(),this._applyTransform(zn))),Bn=zn.get(Ur),Bn&&((fn.showAll||fn.showCollisionGroup)&&(this._graphicsContext.debug.drawText(`collision group(${Bn.group.name})`,Pn),Pn=Pn.add(yr)),(fn.showAll||fn.showCollisionType)&&(this._graphicsContext.debug.drawText(`collision type(${Bn.collisionType})`,Pn),Pn=Pn.add(yr)),(fn.showAll||fn.showMass)&&(this._graphicsContext.debug.drawText(`mass(${Bn.mass})`,Pn),Pn=Pn.add(yr)),(fn.showAll||fn.showMotion)&&(this._graphicsContext.debug.drawText(`motion(${Bn.sleepMotion})`,Pn),Pn=Pn.add(yr)),(fn.showAll||fn.showSleeping)&&(this._graphicsContext.debug.drawText(`sleeping(${Bn.canSleep?Bn.sleeping:"cant sleep"})`,Pn),Pn=Pn.add(yr))),this._graphicsContext.restore(),this._graphicsContext.save(),ft.coordPlane===vr.Screen&&this._graphicsContext.translate(this._engine.screen.contentArea.left,this._engine.screen.contentArea.top),this._graphicsContext.z=mt.debugZIndex,kt=zn.get(uo),kt&&((Rt.showAll||Rt.showVelocity)&&(this._graphicsContext.debug.drawText(`vel${kt.vel.toString(2)}`,Pn.add(ft.globalPos)),this._graphicsContext.drawLine(ft.globalPos,ft.globalPos.add(kt.vel),Rt.velocityColor,2),Pn=Pn.add(yr)),(Rt.showAll||Rt.showAcceleration)&&this._graphicsContext.drawLine(ft.globalPos,ft.globalPos.add(kt.acc),Rt.accelerationColor,2)),Mt=zn.get(xo),Mt){const Qr=Mt.get();if((Nt.showAll||Nt.showGeometry)&&Qr&&Qr.debug(this._graphicsContext,Nt.geometryColor,{lineWidth:Nt.geometryLineWidth,pointSize:Nt.geometryPointSize}),Nt.showAll||Nt.showBounds){if(Qr instanceof So){const Hn=Qr.getColliders();for(const Kr of Hn){const Ao=Kr.bounds,Wo=It(Ao.left,Ao.top);this._graphicsContext.debug.drawRect(Wo.x,Wo.y,Ao.width,Ao.height,{color:Nt.boundsColor}),(Nt.showAll||Nt.showOwner)&&this._graphicsContext.debug.drawText(`owner id(${Kr.owner.id})`,Wo)}Mt.bounds.draw(this._graphicsContext,Nt.boundsColor)}else if(Qr){const Hn=Mt.bounds,Kr=It(Hn.left,Hn.top);this._graphicsContext.debug.drawRect(Kr.x,Kr.y,Hn.width,Hn.height,{color:Nt.boundsColor}),(Nt.showAll||Nt.showOwner)&&this._graphicsContext.debug.drawText(`owner id(${Mt.owner.id})`,Kr)}}}this._graphicsContext.restore(),this._popCameraTransform(ft)}if(this._graphicsContext.save(),this._camera.draw(this._graphicsContext),(en.showAll||en.showBroadphaseSpacePartitionDebug)&&this._collisionSystem.debug(this._graphicsContext),en.showAll||en.showCollisionContacts||en.showCollisionNormals)for(const[zn,Pn]of this._engine.debug.stats.currFrame.physics.contacts){if(en.showAll||en.showCollisionContacts)for(const yr of Pn.points)this._graphicsContext.debug.drawPoint(yr,{size:en.contactSize,color:en.collisionContactColor});if(en.showAll||en.showCollisionNormals)for(const yr of Pn.points)this._graphicsContext.debug.drawLine(yr,Pn.normal.scale(30).add(yr),{color:en.collisionNormalColor})}this._graphicsContext.restore(),pn&&(this._graphicsContext.save(),this._camera.draw(this._graphicsContext),(pn.showAll||pn.showFocus)&&this._graphicsContext.drawCircle(this._camera.pos,4,pn.focusColor),(pn.showAll||pn.showZoom)&&this._graphicsContext.debug.drawText(`zoom(${this._camera.zoom})`,this._camera.pos),this._graphicsContext.restore()),this._graphicsContext.flush()}postupdate(e,a){this._engine.isDebug&&(this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext),Po.flush(this._graphicsContext),this._graphicsContext.restore())}_applyTransform(e){const a=e.getAncestors();for(const h of a){const _=h?.get(hr);_&&(this._graphicsContext.translate(_.pos.x,_.pos.y),this._graphicsContext.scale(_.scale.x,_.scale.y),this._graphicsContext.rotate(_.rotation))}}_pushCameraTransform(e){e.coordPlane===vr.World&&(this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext))}_popCameraTransform(e){e.coordPlane===vr.World&&this._graphicsContext.restore()}}class Xu extends Gr{constructor(e){super(),this.world=e,this.systemType=Sr.Update,this.priority=or.Higher,this.overrideUseColliderShape=!1,this.overrideUseGraphicsBounds=!1,this.lastFrameEntityToPointers=new Map,this.currentFrameEntityToPointers=new Map,this._sortedTransforms=[],this._sortedEntities=[],this._zHasChanged=!1,this._zIndexUpdate=()=>{this._zHasChanged=!0},this.query=this.world.query([hr,Es]),this.query.entityAdded$.subscribe(a=>{const h=a.get(hr);this._sortedTransforms.push(h),this._sortedEntities.push(h.owner),h.zIndexChanged$.subscribe(this._zIndexUpdate),this._zHasChanged=!0}),this.query.entityRemoved$.subscribe(a=>{const h=a.get(hr);h.zIndexChanged$.unsubscribe(this._zIndexUpdate);const _=this._sortedTransforms.indexOf(h);_>-1&&(this._sortedTransforms.splice(_,1),this._sortedEntities.splice(_,1))})}initialize(e,a){this._engine=a.engine,this._scene=a}preupdate(){this._receivers=[this._engine.input.pointers,this._scene.input.pointers],this._engineReceiver=this._engine.input.pointers,this._zHasChanged&&(this._sortedTransforms.sort((e,a)=>a.z-e.z),this._sortedEntities=this._sortedTransforms.map(e=>e.owner),this._zHasChanged=!1)}entityCurrentlyUnderPointer(e,a){return this.currentFrameEntityToPointers.has(e.id)&&this.currentFrameEntityToPointers.get(e.id).includes(a)}entityWasUnderPointer(e,a){return this.lastFrameEntityToPointers.has(e.id)&&this.lastFrameEntityToPointers.get(e.id).includes(a)}entered(e,a){return this.entityCurrentlyUnderPointer(e,a)&&!this.lastFrameEntityToPointers.has(e.id)}left(e,a){return!this.currentFrameEntityToPointers.has(e.id)&&this.entityWasUnderPointer(e,a)}addPointerToEntity(e,a){if(!this.currentFrameEntityToPointers.has(e.id)){this.currentFrameEntityToPointers.set(e.id,[a]);return}const h=this.currentFrameEntityToPointers.get(e.id);this.currentFrameEntityToPointers.set(e.id,h.concat(a))}update(){this._processPointerToEntity(this._sortedEntities),this._dispatchEvents(this._sortedEntities),this._receivers.forEach(e=>e.update()),this.lastFrameEntityToPointers.clear(),this.lastFrameEntityToPointers=new Map(this.currentFrameEntityToPointers),this.currentFrameEntityToPointers.clear(),this._receivers.forEach(e=>e.clear())}_processPointerToEntity(e){var a;let h,_,lt,ft;const mt=this._engineReceiver;for(const kt of e){if(h=kt.get(hr),ft=(a=kt.get(Es))!==null&&a!==void 0?a:new Es,ft.localBounds){const Rt=ft.localBounds.transform(h.get().matrix);for(const[Mt,Nt]of mt.currentFramePointerCoords.entries())Rt.contains(h.coordPlane===vr.World?Nt.worldPos:Nt.screenPos)&&this.addPointerToEntity(kt,Mt)}if(_=kt.get(xo),_&&(ft.useColliderShape||this.overrideUseColliderShape)){_.update();const Rt=_.get();if(Rt)for(const[Mt,Nt]of mt.currentFramePointerCoords.entries())Rt.contains(h.coordPlane===vr.World?Nt.worldPos:Nt.screenPos)&&this.addPointerToEntity(kt,Mt)}if(lt=kt.get(Do),lt&&(ft.useGraphicsBounds||this.overrideUseGraphicsBounds)){const Rt=lt.localBounds.transform(h.get().matrix);for(const[Mt,Nt]of mt.currentFramePointerCoords.entries())Rt.contains(h.coordPlane===vr.World?Nt.worldPos:Nt.screenPos)&&this.addPointerToEntity(kt,Mt)}}}_processDownAndEmit(e){const a=this._engineReceiver,h=new Map;for(const _ of a.currentFrameDown)_.active&&e.active&&this.entityCurrentlyUnderPointer(e,_.pointerId)&&(e.events.emit("pointerdown",_),a.isDragStart(_.pointerId)&&e.events.emit("pointerdragstart",_)),h.set(_.pointerId,_);return h}_processUpAndEmit(e){const a=this._engineReceiver,h=new Map;for(const _ of a.currentFrameUp)_.active&&e.active&&this.entityCurrentlyUnderPointer(e,_.pointerId)&&(e.events.emit("pointerup",_),a.isDragEnd(_.pointerId)&&e.events.emit("pointerdragend",_)),h.set(_.pointerId,_);return h}_processMoveAndEmit(e){const a=this._engineReceiver,h=new Map;for(const _ of a.currentFrameMove)_.active&&e.active&&this.entityCurrentlyUnderPointer(e,_.pointerId)&&(e.events.emit("pointermove",_),a.isDragging(_.pointerId)&&e.events.emit("pointerdragmove",_)),h.set(_.pointerId,_);return h}_processEnterLeaveAndEmit(e,a){const h=this._engineReceiver;for(const _ of a){if(_.active&&e.active&&this.entered(e,_.pointerId)){e.events.emit("pointerenter",_),h.isDragging(_.pointerId)&&e.events.emit("pointerdragenter",_);break}if(_.active&&e.active&&(this.left(e,_.pointerId)||this.entityCurrentlyUnderPointer(e,_.pointerId)&&_.type==="up")){e.events.emit("pointerleave",_),h.isDragging(_.pointerId)&&e.events.emit("pointerdragleave",_);break}}}_processCancelAndEmit(e){const a=this._engineReceiver;for(const h of a.currentFrameCancel)h.active&&e.active&&this.entityCurrentlyUnderPointer(e,h.pointerId)&&e.events.emit("pointercancel",h)}_processWheelAndEmit(e){const a=this._engineReceiver;for(const h of a.currentFrameWheel)h.active&&e.active&&this.entityCurrentlyUnderPointer(e,0)&&e.events.emit("pointerwheel",h)}_dispatchEvents(e){const a=new Set(this.lastFrameEntityToPointers.keys()),h=new Set(this.currentFrameEntityToPointers.keys()),_=e.filter(kt=>a.has(kt.id)||h.has(kt.id));let lt,ft,mt;for(const kt of _){mt=this._processDownAndEmit(kt),ft=this._processUpAndEmit(kt),lt=this._processMoveAndEmit(kt);const Rt=[...lt.values(),...mt.values(),...ft.values()];this._processEnterLeaveAndEmit(kt,Rt),this._processCancelAndEmit(kt),this._processWheelAndEmit(kt)}}}class Cp extends Gr{constructor(e){super(),this.world=e,this.systemType=Sr.Update,this.priority=or.Higher,this._actions=[],this.query=this.world.query([_l]),this.query.entityAdded$.subscribe(a=>this._actions.push(a.get(_l))),this.query.entityRemoved$.subscribe(a=>{const h=a.get(_l),_=this._actions.indexOf(h);_>-1&&this._actions.splice(_,1)})}update(e){for(const a of this._actions)a.update(e)}}class Eu extends oo{constructor(e){super(),this.elevation=0,this.columns=e.columns,this.rows=e.rows,this.tileWidth=e.tileWidth,this.tileHeight=e.tileHeight}}class kp extends Gr{constructor(e){super(),this.world=e,this.systemType=Sr.Update,this.priority=or.Lower,this.query=this.world.query([hr,Eu])}update(){let e,a;for(const h of this.query.entities){e=h.get(hr),a=h.get(Eu);const lt=Math.max(a.columns*a.tileWidth,a.rows*a.tileHeight)*a.elevation+e.pos.y;e.z=lt}}}class Sp extends Gr{constructor(e){super(),this.world=e,this.systemType=Sr.Draw,this.priority=or.Higher,this.query=this.world.query([hr,Do])}initialize(e,a){this._camera=a.camera,this._screen=a.engine.screen}update(){this._worldBounds=this._screen.getWorldBounds();let e,a,h;for(const _ of this.query.entities){a=_.get(Do),e=_.get(hr),h=_.get(Hl);let lt;if(h){const mt=At.One.sub(h.parallaxFactor);lt=this._camera.pos.scale(mt)}const ft=this._isOffscreen(e,a,lt);ft&&!_.hasTag("ex.offscreen")&&(_.events.emit("exitviewport",new ws(_)),_.addTag("ex.offscreen")),!ft&&_.hasTag("ex.offscreen")&&(_.events.emit("enterviewport",new Tl(_)),_.removeTag("ex.offscreen"))}}_isOffscreen(e,a,h){if(e.coordPlane===vr.World){let _=a.localBounds;h&&(_=_.translate(h));const lt=_.transform(e.get().matrix);return!this._worldBounds.overlaps(lt)}else return!1}}class Ep{get config(){return mn(this._config,e=>{this.$configUpdate.notifyAll(e)})}set config(e){this._config=e,this.$configUpdate.notifyAll(e)}get collisionProcessor(){if(this._configDirty){this._configDirty=!1;const e=this._collisionProcessor.getColliders();this._collisionProcessor=new Bs(this._config);for(const a of e)this._collisionProcessor.track(a)}return this._collisionProcessor}constructor(e){this.$configUpdate=new lo,this._configDirty=!1,this.config=e,this.$configUpdate.subscribe(a=>{this._configDirty=!0,Ur.updateDefaultPhysicsConfig(a.bodies)}),this._collisionProcessor=new Bs(this.config)}rayCast(e,a){return this.collisionProcessor.rayCast(e,a)}}class Tu{constructor(){this.events=new dt,this.enabled=!1,this.supported=!!navigator.getGamepads,this._gamePadTimeStamps=[0,0,0,0],this._oldPads=[],this._pads=[],this._initSuccess=!1,this._navigator=navigator,this._minimumConfiguration=null,this._enabled=!0}init(){this.supported&&(this._initSuccess||(this._oldPads=this._clonePads(this._navigator.getGamepads()),this._oldPads.length&&this._oldPads[0]&&(this._initSuccess=!0)))}toggleEnabled(e){this._enabled=e}setMinimumGamepadConfiguration(e){this._enableAndUpdate(),this._minimumConfiguration=e}_enableAndUpdate(){this.enabled||(this.enabled=!0,this.update())}_isGamepadValid(e){if(!this._minimumConfiguration)return!0;if(!e)return!1;const a=e.axes.filter(_=>typeof _!==void 0).length,h=e.buttons.filter(_=>typeof _!==void 0).length;return a>=this._minimumConfiguration.axis&&h>=this._minimumConfiguration.buttons&&e.connected}emit(e,a){this.events.emit(e,a)}on(e,a){return this._enableAndUpdate(),this.events.on(e,a)}once(e,a){return this.events.once(e,a)}off(e,a){this._enableAndUpdate(),this.events.off(e,a)}update(){if(!this.enabled||!this.supported||!this._enabled)return;this.init();const e=this._navigator.getGamepads();for(let a=0;a<e.length;a++){if(e[a])!this.at(a).connected&&this._isGamepadValid(e[a])&&this.events.emit("connect",new Al(a,this.at(a))),this.at(a).connected=!0;else{const kt=this.at(a);kt.connected&&this.events.emit("disconnect",new Ls(a,kt)),kt.connected=!1;continue}if(this.at(a).update(),e[a].timestamp&&e[a].timestamp===this._gamePadTimeStamps[a])continue;this._gamePadTimeStamps[a]=e[a].timestamp,this.at(a).navigatorGamepad=e[a];let h,_,lt,ft,mt;for(h in du)_=du[h],typeof _=="number"&&e[a].buttons[_]&&(mt=e[a].buttons[_].value,mt!==this._oldPads[a].getButton(_)&&(e[a].buttons[_].pressed?(this.at(a).updateButton(_,mt),this.at(a).events.emit("button",new Cl(_,mt,this.at(a)))):this.at(a).updateButton(_,0)));for(lt in fu)ft=fu[lt],typeof ft=="number"&&(mt=e[a].axes[ft],mt!==this._oldPads[a].getAxes(ft)&&(this.at(a).updateAxes(ft,mt),this.at(a).events.emit("axis",new na(ft,mt,this.at(a)))));this._oldPads[a]=this._clonePad(e[a])}}at(e){if(this._enableAndUpdate(),e>=this._pads.length)for(let a=this._pads.length-1,h=e;a<h;a++)this._pads.push(new Pu),this._oldPads.push(new Pu);return this._pads[e]}getValidGamepads(){this._enableAndUpdate();const e=[];for(let a=0;a<this._pads.length;a++)this._isGamepadValid(this.at(a).navigatorGamepad)&&this.at(a).connected&&e.push(this.at(a));return e}count(){return this._pads.filter(e=>e.connected).length}_clonePads(e){const a=[];for(let h=0,_=e.length;h<_;h++)a.push(this._clonePad(e[h]));return a}_clonePad(e){let a,h;const _=new Pu;if(!e)return _;for(a=0,h=e.buttons.length;a<h;a++)e.buttons[a]&&_.updateButton(a,e.buttons[a].value);for(a=0,h=e.axes.length;a<h;a++)_.updateAxes(a,e.axes[a]);return _}}Tu.MinAxisMoveThreshold=.05;class Pu{constructor(){this.events=new dt,this.connected=!1,this._axes=new Array(4),this._buttons=new Array(16),this._buttonsUp=new Array(16),this._buttonsDown=new Array(16);for(let e=0;e<this._buttons.length;e++)this._buttons[e]=0;for(let e=0;e<this._axes.length;e++)this._axes[e]=0}update(){this._buttonsDown=new Array(16),this._buttonsUp=new Array(16)}isButtonPressed(e,a=1){return this._buttons[e]>=a}isButtonHeld(e,a=1){return this._buttons[e]>=a}wasButtonPressed(e,a=1){return this._buttonsDown[e]>=a}wasButtonReleased(e){return!!this._buttonsUp[e]}getButton(e){return this._buttons[e]}getAxes(e){const a=this._axes[e];return Math.abs(a)<Tu.MinAxisMoveThreshold?0:a}updateButton(e,a){a===0&&this._buttons[e]?this._buttonsUp[e]=1:this._buttonsDown[e]=a,this._buttons[e]=a}updateAxes(e,a){this._axes[e]=a}emit(e,a){this.events.emit(e,a)}on(e,a){return this.events.on(e,a)}once(e,a){return this.events.once(e,a)}off(e,a){this.events.off(e,a)}}var du;(function(ut){ut[ut.Face1=0]="Face1",ut[ut.Face2=1]="Face2",ut[ut.Face3=2]="Face3",ut[ut.Face4=3]="Face4",ut[ut.LeftBumper=4]="LeftBumper",ut[ut.RightBumper=5]="RightBumper",ut[ut.LeftTrigger=6]="LeftTrigger",ut[ut.RightTrigger=7]="RightTrigger",ut[ut.Select=8]="Select",ut[ut.Start=9]="Start",ut[ut.LeftStick=10]="LeftStick",ut[ut.RightStick=11]="RightStick",ut[ut.DpadUp=12]="DpadUp",ut[ut.DpadDown=13]="DpadDown",ut[ut.DpadLeft=14]="DpadLeft",ut[ut.DpadRight=15]="DpadRight"})(du||(du={}));var fu;(function(ut){ut[ut.LeftStickX=0]="LeftStickX",ut[ut.LeftStickY=1]="LeftStickY",ut[ut.RightStickX=2]="RightStickX",ut[ut.RightStickY=3]="RightStickY"})(fu||(fu={}));class Tp{constructor(e){this.inputs=e,this._handlers=new Map}execute(){for(const[e,a]of this._handlers.entries()){const h=e(this.inputs);h&&a(h)}}on(e,a){this._handlers.set(e,a)}}function Pp(){try{const ut=()=>{};window.top.addEventListener("blur",ut),window.top.removeEventListener("blur",ut)}catch{return!0}return!1}var pu;(function(ut){ut.Num0="Numpad0",ut.Num1="Numpad1",ut.Num2="Numpad2",ut.Num3="Numpad3",ut.Num4="Numpad4",ut.Num5="Numpad5",ut.Num6="Numpad6",ut.Num7="Numpad7",ut.Num8="Numpad8",ut.Num9="Numpad9",ut.NumAdd="NumpadAdd",ut.NumSubtract="NumpadSubtract",ut.NumMultiply="NumpadMultiply",ut.NumDivide="NumpadDivide",ut.NumDecimal="NumpadDecimal",ut.Numpad0="Numpad0",ut.Numpad1="Numpad1",ut.Numpad2="Numpad2",ut.Numpad3="Numpad3",ut.Numpad4="Numpad4",ut.Numpad5="Numpad5",ut.Numpad6="Numpad6",ut.Numpad7="Numpad7",ut.Numpad8="Numpad8",ut.Numpad9="Numpad9",ut.NumpadAdd="NumpadAdd",ut.NumpadSubtract="NumpadSubtract",ut.NumpadMultiply="NumpadMultiply",ut.NumpadDivide="NumpadDivide",ut.NumpadDecimal="NumpadDecimal",ut.NumLock="NumLock",ut.ShiftLeft="ShiftLeft",ut.ShiftRight="ShiftRight",ut.AltLeft="AltLeft",ut.AltRight="AltRight",ut.ControlLeft="ControlLeft",ut.ControlRight="ControlRight",ut.MetaLeft="MetaLeft",ut.MetaRight="MetaRight",ut.Key0="Digit0",ut.Key1="Digit1",ut.Key2="Digit2",ut.Key3="Digit3",ut.Key4="Digit4",ut.Key5="Digit5",ut.Key6="Digit6",ut.Key7="Digit7",ut.Key8="Digit8",ut.Key9="Digit9",ut.Digit0="Digit0",ut.Digit1="Digit1",ut.Digit2="Digit2",ut.Digit3="Digit3",ut.Digit4="Digit4",ut.Digit5="Digit5",ut.Digit6="Digit6",ut.Digit7="Digit7",ut.Digit8="Digit8",ut.Digit9="Digit9",ut.F1="F1",ut.F2="F2",ut.F3="F3",ut.F4="F4",ut.F5="F5",ut.F6="F6",ut.F7="F7",ut.F8="F8",ut.F9="F9",ut.F10="F10",ut.F11="F11",ut.F12="F12",ut.A="KeyA",ut.B="KeyB",ut.C="KeyC",ut.D="KeyD",ut.E="KeyE",ut.F="KeyF",ut.G="KeyG",ut.H="KeyH",ut.I="KeyI",ut.J="KeyJ",ut.K="KeyK",ut.L="KeyL",ut.M="KeyM",ut.N="KeyN",ut.O="KeyO",ut.P="KeyP",ut.Q="KeyQ",ut.R="KeyR",ut.S="KeyS",ut.T="KeyT",ut.U="KeyU",ut.V="KeyV",ut.W="KeyW",ut.X="KeyX",ut.Y="KeyY",ut.Z="KeyZ",ut.KeyA="KeyA",ut.KeyB="KeyB",ut.KeyC="KeyC",ut.KeyD="KeyD",ut.KeyE="KeyE",ut.KeyF="KeyF",ut.KeyG="KeyG",ut.KeyH="KeyH",ut.KeyI="KeyI",ut.KeyJ="KeyJ",ut.KeyK="KeyK",ut.KeyL="KeyL",ut.KeyM="KeyM",ut.KeyN="KeyN",ut.KeyO="KeyO",ut.KeyP="KeyP",ut.KeyQ="KeyQ",ut.KeyR="KeyR",ut.KeyS="KeyS",ut.KeyT="KeyT",ut.KeyU="KeyU",ut.KeyV="KeyV",ut.KeyW="KeyW",ut.KeyX="KeyX",ut.KeyY="KeyY",ut.KeyZ="KeyZ",ut.Semicolon="Semicolon",ut.Quote="Quote",ut.Comma="Comma",ut.Minus="Minus",ut.Period="Period",ut.Slash="Slash",ut.Equal="Equal",ut.BracketLeft="BracketLeft",ut.Backslash="Backslash",ut.BracketRight="BracketRight",ut.Backquote="Backquote",ut.Up="ArrowUp",ut.Down="ArrowDown",ut.Left="ArrowLeft",ut.Right="ArrowRight",ut.ArrowUp="ArrowUp",ut.ArrowDown="ArrowDown",ut.ArrowLeft="ArrowLeft",ut.ArrowRight="ArrowRight",ut.Space="Space",ut.Backspace="Backspace",ut.Delete="Delete",ut.Esc="Escape",ut.Escape="Escape",ut.Enter="Enter",ut.NumpadEnter="NumpadEnter",ut.ContextMenu="ContextMenu"})(pu||(pu={}));class gu extends Or{constructor(e,a,h){super(),this.key=e,this.value=a,this.originalEvent=h}}class op{constructor(){this.events=new dt,this._enabled=!0,this._keys=[],this._keysUp=[],this._keysDown=[],this._releaseAllKeys=e=>{for(const a of this._keys){const h=new gu(a,e.key,e);this.events.emit("up",h),this.events.emit("release",h)}this._keysUp=Array.from(new Set(this._keys.concat(this._keysUp))),this._keys.length=0},this._handleKeyDown=e=>{if(!this._enabled)return;!e.metaKey&&(this._keys.includes(pu.MetaLeft)||this._keys.includes(pu.MetaRight))&&this._releaseAllKeys(e);const a=e.code;if(this._keys.indexOf(a)===-1){this._keys.push(a),this._keysDown.push(a);const h=new gu(a,e.key,e);this.events.emit("down",h),this.events.emit("press",h)}},this._handleKeyUp=e=>{if(!this._enabled)return;const a=e.code,h=this._keys.indexOf(a);this._keys.splice(h,1),this._keysUp.push(a);const _=new gu(a,e.key,e);this.events.emit("up",_),this.events.emit("release",_),e.key==="Meta"&&this._releaseAllKeys(e)}}emit(e,a){this.events.emit(e,a)}on(e,a){return this.events.on(e,a)}once(e,a){return this.events.once(e,a)}off(e,a){this.events.off(e,a)}init(e){let{global:a}=e;const{grabWindowFocus:h}=e;a||(Pp()?(a=window,h&&window.focus(),Vt.getInstance().warn("Excalibur might be in a cross-origin iframe, in order to receive keyboard events it must be in focus")):a=window.top),a.addEventListener("blur",()=>{this._keys.length=0}),a.addEventListener("keyup",this._handleKeyUp),a.addEventListener("keydown",this._handleKeyDown)}toggleEnabled(e){this._enabled=e}update(){this._keysDown.length=0,this._keysUp.length=0;for(let e=0;e<this._keys.length;e++)this.events.emit("hold",new gu(this._keys[e]))}getKeys(){return this._keys}wasPressed(e){return this._keysDown.indexOf(e)>-1}isHeld(e){return this._keys.indexOf(e)>-1}wasReleased(e){return this._keysUp.indexOf(e)>-1}triggerEvent(e,a,h){e==="down"&&this._handleKeyDown(new KeyboardEvent("keydown",{code:a,key:h??null})),e==="up"&&this._handleKeyUp(new KeyboardEvent("keyup",{code:a,key:h??null}))}}class Ru{static fromPagePosition(e,a,h){let _,lt,ft,mt;arguments.length===3?(_=e,lt=a,ft=new At(_,lt),mt=h):(ft=e,_=ft.x,lt=ft.y,mt=a);const kt=mt.screen.pageToScreenCoordinates(ft),Rt=mt.screen.screenToWorldCoordinates(kt);return new Ru(Rt,ft,kt)}constructor(e,a,h){this.worldPos=e,this.pagePos=a,this.screenPos=h}}class mu{cancel(){this.active=!1}get pagePos(){return this.coordinates.pagePos}get screenPos(){return this.coordinates.screenPos}get worldPos(){return this.coordinates.worldPos}constructor(e,a,h,_,lt,ft){this.type=e,this.pointerId=a,this.button=h,this.pointerType=_,this.coordinates=lt,this.nativeEvent=ft,this.active=!0}}class sp{cancel(){this.active=!1}constructor(e,a,h,_,lt,ft,mt,kt,Rt,Mt,Nt,en){this.x=e,this.y=a,this.pageX=h,this.pageY=_,this.screenX=lt,this.screenY=ft,this.index=mt,this.deltaX=kt,this.deltaY=Rt,this.deltaZ=Mt,this.deltaMode=Nt,this.ev=en,this.active=!0}}class ap{constructor(){this.events=new dt,this.lastPagePos=At.Zero,this.lastScreenPos=At.Zero,this.lastWorldPos=At.Zero,this._onPointerMove=e=>{this.lastPagePos=new At(e.pagePos.x,e.pagePos.y),this.lastScreenPos=new At(e.screenPos.x,e.screenPos.y),this.lastWorldPos=new At(e.worldPos.x,e.worldPos.y)},this._onPointerDown=e=>{this.lastPagePos=new At(e.pagePos.x,e.pagePos.y),this.lastScreenPos=new At(e.screenPos.x,e.screenPos.y),this.lastWorldPos=new At(e.worldPos.x,e.worldPos.y)},this.on("move",this._onPointerMove),this.on("down",this._onPointerDown)}emit(e,a){this.events.emit(e,a)}on(e,a){return this.events.on(e,a)}once(e,a){return this.events.once(e,a)}off(e,a){this.events.off(e,a)}}var Zl;(function(ut){ut.Pixel="Pixel",ut.Line="Line",ut.Page="Page"})(Zl||(Zl={}));var Js;(function(ut){ut[ut.NoButton=-1]="NoButton",ut[ut.Left=0]="Left",ut[ut.Middle=1]="Middle",ut[ut.Right=2]="Right",ut[ut.Unknown=3]="Unknown"})(Js||(Js={}));var Hs;(function(ut){ut.Left="Left",ut.Middle="Middle",ut.Right="Right",ut.Unknown="Unknown",ut.NoButton="NoButton"})(Hs||(Hs={}));var Us;(function(ut){ut.Touch="Touch",ut.Mouse="Mouse",ut.Pen="Pen",ut.Unknown="Unknown"})(Us||(Us={}));function _g(ut){return globalThis.TouchEvent&&ut instanceof globalThis.TouchEvent}function tm(ut){return globalThis.PointerEvent&&ut instanceof globalThis.PointerEvent}class Du{constructor(e,a){this.target=e,this.engine=a,this.events=new dt,this.primary=new ap,this._activeNativePointerIdsToNormalized=new Map,this.lastFramePointerCoords=new Map,this.currentFramePointerCoords=new Map,this.currentFramePointerDown=new Map,this.lastFramePointerDown=new Map,this.currentFrameDown=[],this.currentFrameUp=[],this.currentFrameMove=[],this.currentFrameCancel=[],this.currentFrameWheel=[],this._enabled=!0,this._pointers=[this.primary],this._boundHandle=this._handle.bind(this),this._boundWheel=this._handleWheel.bind(this)}toggleEnabled(e){this._enabled=e}recreate(e,a){const h=new Du(e,a);return h.primary=this.primary,h._pointers=this._pointers,h}at(e){if(e>=this._pointers.length)for(let a=this._pointers.length-1,h=e;a<h;a++)this._pointers.push(new ap);return this._pointers[e]}count(){return this._pointers.length}isDown(e){var a;return(a=this.currentFramePointerDown.get(e))!==null&&a!==void 0?a:!1}wasDown(e){var a;return(a=this.lastFramePointerDown.get(e))!==null&&a!==void 0?a:!1}isDragging(e){return this.isDown(e)}isDragStart(e){return this.isDown(e)&&!this.wasDown(e)}isDragEnd(e){return!this.isDown(e)&&this.wasDown(e)}emit(e,a){this.events.emit(e,a)}on(e,a){return this.events.on(e,a)}once(e,a){return this.events.once(e,a)}off(e,a){this.events.off(e,a)}update(){this.lastFramePointerDown=new Map(this.currentFramePointerDown),this.lastFramePointerCoords=new Map(this.currentFramePointerCoords);for(const e of this.currentFrameDown)this.emit("down",e),this.at(e.pointerId).emit("down",e),this.primary.emit("pointerdown",e);for(const e of this.currentFrameUp)this.emit("up",e),this.at(e.pointerId).emit("up",e);for(const e of this.currentFrameMove)this.emit("move",e),this.at(e.pointerId).emit("move",e);for(const e of this.currentFrameCancel)this.emit("cancel",e),this.at(e.pointerId).emit("cancel",e);for(const e of this.currentFrameWheel)this.emit("wheel",e),this.primary.emit("pointerwheel",e),this.primary.emit("wheel",e)}clear(){for(const e of this.currentFrameUp){this.currentFramePointerCoords.delete(e.pointerId);const a=this._activeNativePointerIdsToNormalized.entries();for(const[h,_]of a)_===e.pointerId&&this._activeNativePointerIdsToNormalized.delete(h)}this.currentFrameDown.length=0,this.currentFrameUp.length=0,this.currentFrameMove.length=0,this.currentFrameCancel.length=0,this.currentFrameWheel.length=0}init(e){var a;if(this.engine.isDisposed())return;this.target===this.engine.canvas?this.engine.canvas.style.touchAction="none":document.body.style.touchAction="none",window.PointerEvent?(this.target.addEventListener("pointerdown",this._boundHandle),this.target.addEventListener("pointerup",this._boundHandle),this.target.addEventListener("pointermove",this._boundHandle),this.target.addEventListener("pointercancel",this._boundHandle)):(this.target.addEventListener("touchstart",this._boundHandle),this.target.addEventListener("touchend",this._boundHandle),this.target.addEventListener("touchmove",this._boundHandle),this.target.addEventListener("touchcancel",this._boundHandle),this.target.addEventListener("mousedown",this._boundHandle),this.target.addEventListener("mouseup",this._boundHandle),this.target.addEventListener("mousemove",this._boundHandle));const h={passive:!(this.engine.pageScrollPreventionMode===wl.All||this.engine.pageScrollPreventionMode===wl.Canvas)};if("onwheel"in document.createElement("div")?this.target.addEventListener("wheel",this._boundWheel,h):document.onmousewheel!==void 0?this.target.addEventListener("mousewheel",this._boundWheel,h):this.target.addEventListener("MozMousePixelScroll",this._boundWheel,h),((a=e?.grabWindowFocus)!==null&&a!==void 0?a:!0)&&Pp()){const lt=()=>{window.focus()};window.PointerEvent?this.target.addEventListener("pointerdown",lt):(this.target.addEventListener("touchstart",lt),this.target.addEventListener("mousedown",lt))}}detach(){window.PointerEvent?(this.target.removeEventListener("pointerdown",this._boundHandle),this.target.removeEventListener("pointerup",this._boundHandle),this.target.removeEventListener("pointermove",this._boundHandle),this.target.removeEventListener("pointercancel",this._boundHandle)):(this.target.removeEventListener("touchstart",this._boundHandle),this.target.removeEventListener("touchend",this._boundHandle),this.target.removeEventListener("touchmove",this._boundHandle),this.target.removeEventListener("touchcancel",this._boundHandle),this.target.removeEventListener("mousedown",this._boundHandle),this.target.removeEventListener("mouseup",this._boundHandle),this.target.removeEventListener("mousemove",this._boundHandle)),"onwheel"in document.createElement("div")?this.target.removeEventListener("wheel",this._boundWheel):document.onmousewheel!==void 0?this.target.addEventListener("mousewheel",this._boundWheel):this.target.addEventListener("MozMousePixelScroll",this._boundWheel)}_normalizePointerId(e){this._activeNativePointerIdsToNormalized.set(e,-1);const h=Array.from(this._activeNativePointerIdsToNormalized.keys()).sort((_,lt)=>_-lt).findIndex(_=>_===e);return this._activeNativePointerIdsToNormalized.set(e,h),h}_handle(e){if(!this._enabled)return;e.preventDefault();const a=new Map;let h,_;if(_g(e)){h=Hs.Unknown,_=Us.Touch;for(let lt=0;lt<e.changedTouches.length;lt++){const ft=e.changedTouches[lt],mt=Ru.fromPagePosition(ft.pageX,ft.pageY,this.engine),kt=lt+1,Rt=this._normalizePointerId(kt);this.currentFramePointerCoords.set(Rt,mt),a.set(Rt,mt)}}else{h=this._nativeButtonToPointerButton(e.button),_=Us.Mouse;const lt=Ru.fromPagePosition(e.pageX,e.pageY,this.engine);let ft=1;tm(e)&&(ft=e.pointerId,_=this._stringToPointerType(e.pointerType));const mt=this._normalizePointerId(ft);this.currentFramePointerCoords.set(mt,lt),a.set(mt,lt)}for(const[lt,ft]of a.entries())switch(e.type){case"mousedown":case"pointerdown":case"touchstart":this.currentFrameDown.push(new mu("down",lt,h,_,ft,e)),this.currentFramePointerDown.set(lt,!0);break;case"mouseup":case"pointerup":case"touchend":this.currentFrameUp.push(new mu("up",lt,h,_,ft,e)),this.currentFramePointerDown.set(lt,!1);break;case"mousemove":case"pointermove":case"touchmove":this.currentFrameMove.push(new mu("move",lt,h,_,ft,e));break;case"touchcancel":case"pointercancel":this.currentFrameCancel.push(new mu("cancel",lt,h,_,ft,e));break}}_handleWheel(e){if(!this._enabled)return;(this.engine.pageScrollPreventionMode===wl.All||this.engine.pageScrollPreventionMode===wl.Canvas&&e.target===this.engine.canvas)&&e.preventDefault();const a=this.engine.screen.pageToScreenCoordinates(It(e.pageX,e.pageY)),h=this.engine.screen.screenToWorldCoordinates(a),_=-1/40,lt=e.deltaX||e.wheelDeltaX*_||0,ft=e.deltaY||e.wheelDeltaY*_||e.wheelDelta*_||e.detail||0,mt=e.deltaZ||0;let kt=Zl.Pixel;e.deltaMode&&(e.deltaMode===1?kt=Zl.Line:e.deltaMode===2&&(kt=Zl.Page));const Rt=new sp(h.x,h.y,e.pageX,e.pageY,a.x,a.y,0,lt,ft,mt,kt,e);this.currentFrameWheel.push(Rt)}triggerEvent(e,a){const h=this.engine.screen.worldToPageCoordinates(a);window.PointerEvent?this._handle(new window.PointerEvent("pointer"+e,{pointerId:0,clientX:h.x,clientY:h.y})):this._handle(new window.MouseEvent("mouse"+e,{clientX:h.x,clientY:h.y}));const _=this.engine.currentScene.world.get(Xu);_.preupdate(this.engine.currentScene,1),_.update(1)}_nativeButtonToPointerButton(e){switch(e){case Js.NoButton:return Hs.NoButton;case Js.Left:return Hs.Left;case Js.Middle:return Hs.Middle;case Js.Right:return Hs.Right;case Js.Unknown:return Hs.Unknown;default:return sn(e)}}_stringToPointerType(e){switch(e){case"touch":return Us.Touch;case"mouse":return Us.Mouse;case"pen":return Us.Pen;default:return Us.Unknown}}}class lp{constructor(e){this._enabled=!0;const{pointerTarget:a,grabWindowFocus:h,engine:_}=e;this.keyboard=new op,this.pointers=new Du(a,_),this.gamepads=new Tu,this.keyboard.init({grabWindowFocus:h}),this.pointers.init({grabWindowFocus:h}),this.gamepads.init(),this.inputMapper=new Tp({keyboard:this.keyboard,pointers:this.pointers,gamepads:this.gamepads})}get enabled(){return this._enabled}toggleEnabled(e){this._enabled=e,this.keyboard.toggleEnabled(this._enabled),this.pointers.toggleEnabled(this._enabled),this.gamepads.toggleEnabled(this._enabled)}update(){this._enabled&&(this.inputMapper.execute(),this.keyboard.update(),this.gamepads.update())}}class em{}const nm={Initialize:"initialize",Activate:"activate",Deactivate:"deactivate",PreUpdate:"preupdate",PostUpdate:"postupdate",PreDraw:"predraw",PostDraw:"postdraw",PreDebugDraw:"predebugdraw",PostDebugDraw:"postdebugdraw",PreLoad:"preload"};function Ws(ut){var e,a;return!!ut?.prototype&&!!(!((a=(e=ut?.prototype)===null||e===void 0?void 0:e.constructor)===null||a===void 0)&&a.name)}class xs{get actors(){return this.world.entityManager.entities.filter(e=>e instanceof Yo)}get entities(){return this.world.entityManager.entities}get triggers(){return this.world.entityManager.entities.filter(e=>e instanceof Yn)}get tileMaps(){return this.world.entityManager.entities.filter(e=>e instanceof Zu)}get timers(){return this._timers}constructor(){this._logger=Vt.getInstance(),this.events=new dt,this.camera=new tn,this.world=new Wl(this),this.physics=new Ep(ao),this._isInitialized=!1,this._timers=[],this._cancelQueue=[],this.world.add(Cp),this.world.add(new vp(this.world,this.physics)),this.world.add(new rp(this.world,this.physics)),this.world.add(Xu),this.world.add(kp),this.world.add(Sp),this.world.add(xp),this.world.add(Ap)}emit(e,a){this.events.emit(e,a)}on(e,a){return this.events.on(e,a)}once(e,a){return this.events.once(e,a)}off(e,a){this.events.off(e,a)}onPreLoad(e){}onTransition(e){}onInitialize(e){}onActivate(e){}onDeactivate(e){}onPreUpdate(e,a){}onPostUpdate(e,a){}onPreDraw(e,a){}onPostDraw(e,a){}_initializeChildren(){for(const e of this.entities)e._initialize(this.engine)}get isInitialized(){return this._isInitialized}async _initialize(e){var a;if(!this.isInitialized){try{this.engine=e,this.physics.config=this.engine.physics,this.input=new lp({pointerTarget:e.pointerScope===gt.Canvas?e.canvas:document,grabWindowFocus:e.grabWindowFocus,engine:e}),this.camera._initialize(e),this.world.systemManager.initialize(),await this.onInitialize(e),this._initializeChildren(),this._logger.debug("Scene.onInitialize",this,e),this.events.emit("initialize",new Ns(e,this))}catch(h){throw this._logger.error(`Error during scene initialization for scene ${(a=e.director)===null||a===void 0?void 0:a.getSceneName(this)}!`),h}this._isInitialized=!0}}async _activate(e){var a,h;try{this._logger.debug("Scene.onActivate",this),this.input.toggleEnabled(!0),await this.onActivate(e)}catch(_){throw this._logger.error(`Error during scene activation for scene ${(h=(a=this.engine)===null||a===void 0?void 0:a.director)===null||h===void 0?void 0:h.getSceneName(this)}!`),_}}async _deactivate(e){this._logger.debug("Scene.onDeactivate",this),this.input.toggleEnabled(!1),await this.onDeactivate(e)}_preupdate(e,a){this.emit("preupdate",new ys(e,a,this)),this.onPreUpdate(e,a)}_postupdate(e,a){this.emit("postupdate",new As(e,a,this)),this.onPostUpdate(e,a)}_predraw(e,a){this.emit("predraw",new ko(e,a,this)),this.onPreDraw(e,a)}_postdraw(e,a){this.emit("postdraw",new Oo(e,a,this)),this.onPostDraw(e,a)}update(e,a){var h;if(!this.isInitialized){this._logger.warnOnce(`Scene update called before initialize for scene ${(h=e.director)===null||h===void 0?void 0:h.getSceneName(this)}!`);return}this._preupdate(e,a);let _,lt;for(_=0,lt=this._cancelQueue.length;_<lt;_++)this.removeTimer(this._cancelQueue[_]);this._cancelQueue.length=0;for(const ft of this._timers)ft.update(a);this.world.update(Sr.Update,a),this.camera&&this.camera.update(e,a),this._collectActorStats(e),this._postupdate(e,a),this.input.update()}draw(e,a){var h;if(!this.isInitialized){this._logger.warnOnce("Scene draw called before initialize!");return}this._predraw(e,a),this.world.update(Sr.Draw,a),!((h=this.engine)===null||h===void 0)&&h.isDebug&&this.debugDraw(e),this._postdraw(e,a)}debugDraw(e){this.emit("predebugdraw",new Zs(e,this)),this.emit("postdebugdraw",new is(e,this))}contains(e){return this.actors.indexOf(e)>-1}add(e){if(this.emit("entityadded",{target:e}),this.world.add(e),e.scene=this,e instanceof Qs){on(this._timers,e)||this.addTimer(e);return}}transfer(e){let a;e instanceof jo&&e.scene&&e.scene!==this&&(a=e.scene,e.scene.world.remove(e,!1)),e instanceof Qs&&e.scene&&(a=e.scene,e.scene.removeTimer(e)),a?.emit("entityremoved",{target:e}),this.add(e)}remove(e){e instanceof jo&&(this.emit("entityremoved",{target:e}),e.active&&e.kill(),this.world.remove(e)),e instanceof Qs&&this.removeTimer(e)}clear(e=!0){for(let a=this.entities.length-1;a>=0;a--)this.world.remove(this.entities[a],e);for(let a=this.timers.length-1;a>=0;a--)this.removeTimer(this.timers[a])}addTimer(e){return this._timers.push(e),e.scene=this,e}removeTimer(e){const a=this._timers.indexOf(e);return a!==-1&&this._timers.splice(a,1),e}cancelTimer(e){return this._cancelQueue.push(e),e}isTimerActive(e){return this._timers.indexOf(e)>-1&&!e.complete}isCurrentScene(){return this.engine?this.engine.currentScene===this:!1}_collectActorStats(e){const a=this.actors.filter(h=>h instanceof Su);for(const h of a)e.stats.currFrame.actors.ui++;for(const h of this.actors){e.stats.currFrame.actors.alive++;for(const _ of h.children)Wu(_)?e.stats.currFrame.actors.ui++:e.stats.currFrame.actors.alive++}}}var Gl;(function(ut){ut.Protanope="Protanope",ut.Deuteranope="Deuteranope",ut.Tritanope="Tritanope"})(Gl||(Gl={}));const im=`#version 300 es\r
precision mediump float;\r
// our texture\r
uniform sampler2D u_image;\r
// the texCoords passed in from the vertex shader.\r
in vec2 v_texcoord;\r
\r
// color blind type\r
uniform int u_type;\r
\r
// simulation?\r
uniform bool u_simulate;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  vec4 o =  texture(u_image, v_texcoord);\r
  // RGB to LMS matrix conversion\r
  float L = (17.8824 * o.r) + (43.5161 * o.g) + (4.11935 * o.b);\r
  float M = (3.45565 * o.r) + (27.1554 * o.g) + (3.86714 * o.b);\r
  float S = (0.0299566 * o.r) + (0.184309 * o.g) + (1.46709 * o.b);\r
  // Simulate color blindness\r
  float l;\r
  float m;\r
  float s;\r
  //MODE CODE//\r
  if (u_type == 0) {\r
    // Protanope\r
    l = 0.0 * L + 2.02344 * M + -2.52581 * S;\r
    m = 0.0 * L + 1.0 * M + 0.0 * S;\r
    s = 0.0 * L + 0.0 * M + 1.0 * S;;\r
  } else if (u_type == 1) {\r
    // Deuteranope\r
    l = 1.0 * L + 0.0 * M + 0.0 * S;\r
    m = 0.494207 * L + 0.0 * M + 1.24827 * S;\r
    s = 0.0 * L + 0.0 * M + 1.0 * S;\r
  } else if (u_type == 2) {\r
    // Tritanope\r
    l = 1.0 * L + 0.0 * M + 0.0 * S;\r
    m = 0.0 * L + 1.0 * M + 0.0 * S;\r
    s = -0.395913 * L + 0.801109 * M + 0.0 * S;\r
  }\r
\r
  // LMS to RGB matrix conversion\r
  vec4 error; // simulate the colors\r
  error.r = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s);\r
  error.g = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s);\r
  error.b = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);\r
  error.a = 1.0;\r
  vec4 diff = o - error;\r
  vec4 correction; // correct the colors\r
  correction.r = 0.0;\r
  correction.g =  (diff.r * 0.7) + (diff.g * 1.0);\r
  correction.b =  (diff.r * 0.7) + (diff.b * 1.0);\r
  correction = o + correction;\r
  correction.a = o.a;\r
  //SIMULATE//\r
\r
  // sim \r
  if (u_simulate) {\r
    fragColor = error.rgba;\r
  } else {\r
    fragColor = correction.rgba;\r
  }\r
}`;class Rp{constructor(e,a){this._shader=new tr({gl:e,vertexSource:`#version 300 es
      in vec2 a_position;
      in vec2 a_texcoord;
      out vec2 v_texcoord;

      void main() {
        gl_Position = vec4(a_position, 0.0, 1.0);
        // Pass the texcoord to the fragment shader.
        v_texcoord = a_texcoord;
      }`,fragmentSource:a}),this._shader.compile(),this._buffer=new ir({gl:e,type:"static",data:new Float32Array([-1,-1,0,0,-1,1,0,1,1,-1,1,0,1,-1,1,0,-1,1,0,1,1,1,1,1])}),this._layout=new Mn({gl:e,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_texcoord",2]]}),this._buffer.upload()}getShader(){return this._shader}getLayout(){return this._layout}}class Dp{constructor(e,a=!1){this._colorBlindnessMode=e,this._simulate=!1,this._simulate=a}initialize(e){this._shader=new Rp(e,im),this.simulate=this._simulate,this.colorBlindnessMode=this._colorBlindnessMode}getShader(){return this._shader.getShader()}getLayout(){return this._shader.getLayout()}set colorBlindnessMode(e){if(this._colorBlindnessMode=e,this._shader){const a=this._shader.getShader();a.use(),this._colorBlindnessMode===Gl.Protanope?a.setUniformInt("u_type",0):this._colorBlindnessMode===Gl.Deuteranope?a.setUniformInt("u_type",1):this._colorBlindnessMode===Gl.Tritanope&&a.setUniformInt("u_type",2)}}get colorBlindnessMode(){return this._colorBlindnessMode}set simulate(e){if(this._simulate=e,this._shader){const a=this._shader.getShader();a.use(),a.setUniformBoolean("u_simulate",e)}}get simulate(){return this._simulate}}class Ip{constructor(e){this._engine=e,this._colorBlindPostProcessor=new Dp(Gl.Protanope)}correct(e){this._engine.graphicsContext instanceof ar&&(this.clear(),this._colorBlindPostProcessor.colorBlindnessMode=e,this._colorBlindPostProcessor.simulate=!1,this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor))}simulate(e){this._engine.graphicsContext instanceof ar&&(this.clear(),this._colorBlindPostProcessor.colorBlindnessMode=e,this._colorBlindPostProcessor.simulate=!0,this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor))}clear(){this._engine.graphicsContext.removePostProcessor(this._colorBlindPostProcessor)}}class Mp{constructor(e){this.stats={currFrame:new Iu,prevFrame:new Iu},this.filter={useFilter:!1,nameQuery:"",ids:[]},this.entity={showAll:!1,showId:!1,showName:!1},this.transform={showAll:!1,debugZIndex:1e7,showPosition:!1,showPositionLabel:!1,positionColor:Gt.Yellow,showZIndex:!1,showScale:!1,scaleColor:Gt.Green,showRotation:!1,rotationColor:Gt.Blue},this.graphics={showAll:!1,showBounds:!1,boundsColor:Gt.Yellow},this.collider={showAll:!1,showBounds:!1,boundsColor:Gt.Blue,showOwner:!1,showGeometry:!0,geometryColor:Gt.Green,geometryLineWidth:1,geometryPointSize:.5},this.physics={showAll:!1,showBroadphaseSpacePartitionDebug:!1,showCollisionNormals:!1,collisionNormalColor:Gt.Cyan,showCollisionContacts:!0,contactSize:2,collisionContactColor:Gt.Red},this.motion={showAll:!1,showVelocity:!1,velocityColor:Gt.Yellow,showAcceleration:!1,accelerationColor:Gt.Red},this.body={showAll:!1,showCollisionGroup:!1,showCollisionType:!1,showSleeping:!1,showMotion:!1,showMass:!1},this.camera={showAll:!1,showFocus:!1,focusColor:Gt.Red,showZoom:!1},this.tilemap={showAll:!1,showGrid:!1,gridColor:Gt.Red,gridWidth:.5,showSolidBounds:!1,solidBoundsColor:Gt.fromHex("#8080807F"),showColliderGeometry:!0},this.isometric={showAll:!1,showPosition:!1,positionColor:Gt.Yellow,positionSize:1,showGrid:!1,gridColor:Gt.Red,gridWidth:1,showColliderGeometry:!0},this._engine=e,this.colorBlindMode=new Ip(this._engine)}useTestClock(){const e=this._engine.clock,a=e.isRunning();e.stop();const h=e.toTestClock();return a&&h.start(),this._engine.clock=h,h}useStandardClock(){const e=this._engine.clock,a=e.isRunning();e.stop();const h=e.toStandardClock();return a&&h.start(),this._engine.clock=h,h}}class Iu{constructor(){this._id=0,this._delta=0,this._fps=0,this._actorStats={alive:0,killed:0,ui:0,get remaining(){return this.alive-this.killed},get total(){return this.remaining+this.ui}},this._durationStats={update:0,draw:0,get total(){return this.update+this.draw}},this._physicsStats=new qu,this._graphicsStats={drawCalls:0,drawnImages:0}}reset(e){e?(this.id=e.id,this.delta=e.delta,this.fps=e.fps,this.actors.alive=e.actors.alive,this.actors.killed=e.actors.killed,this.actors.ui=e.actors.ui,this.duration.update=e.duration.update,this.duration.draw=e.duration.draw,this._physicsStats.reset(e.physics),this.graphics.drawCalls=e.graphics.drawCalls,this.graphics.drawnImages=e.graphics.drawnImages):(this.id=this.delta=this.fps=0,this.actors.alive=this.actors.killed=this.actors.ui=0,this.duration.update=this.duration.draw=0,this._physicsStats.reset(),this.graphics.drawnImages=this.graphics.drawCalls=0)}clone(){const e=new Iu;return e.reset(this),e}get id(){return this._id}set id(e){this._id=e}get delta(){return this._delta}set delta(e){this._delta=e}get fps(){return this._fps}set fps(e){this._fps=e}get actors(){return this._actorStats}get duration(){return this._durationStats}get physics(){return this._physicsStats}get graphics(){return this._graphicsStats}}class qu{constructor(){this._pairs=0,this._collisions=0,this._contacts=new Map,this._fastBodies=0,this._fastBodyCollisions=0,this._broadphase=0,this._narrowphase=0}reset(e){e?(this.pairs=e.pairs,this.collisions=e.collisions,this.contacts=e.contacts,this.fastBodies=e.fastBodies,this.fastBodyCollisions=e.fastBodyCollisions,this.broadphase=e.broadphase,this.narrowphase=e.narrowphase):(this.pairs=this.collisions=this.fastBodies=0,this.fastBodyCollisions=this.broadphase=this.narrowphase=0,this.contacts.clear())}clone(){const e=new qu;return e.reset(this),e}get pairs(){return this._pairs}set pairs(e){this._pairs=e}get collisions(){return this._collisions}set collisions(e){this._collisions=e}get contacts(){return this._contacts}set contacts(e){this._contacts=e}get fastBodies(){return this._fastBodies}set fastBodies(e){this._fastBodies=e}get fastBodyCollisions(){return this._fastBodyCollisions}set fastBodyCollisions(e){this._fastBodyCollisions=e}get broadphase(){return this._broadphase}set broadphase(e){this._broadphase=e}get narrowphase(){return this._narrowphase}set narrowphase(e){this._narrowphase=e}}class cp{on(e,a){this._nativeHandlers[e]&&this.off(e,this._nativeHandlers[e]),this._nativeHandlers[e]=this._decorate(a),this.nativeComponent.addEventListener(e,this._nativeHandlers[e])}off(e,a){a||(a=this._nativeHandlers[e]),this.nativeComponent.removeEventListener(e,a),this._nativeHandlers[e]=null}_decorate(e){return a=>{this._paused||e(a)}}pause(){this._paused=!0}resume(){this._paused=!1}clear(){for(const e in this._nativeHandlers)this.off(e)}constructor(e){this.nativeComponent=e,this._paused=!1,this._nativeHandlers={}}}class Fp{constructor(e,a){this._windowGlobal=e,this._documentGlobal=a,this._windowComponent=new cp(this._windowGlobal),this._documentComponent=new cp(this._documentGlobal)}get window(){return this._windowComponent}get document(){return this._documentComponent}pause(){this.window.pause(),this.document.pause()}resume(){this.window.resume(),this.document.resume()}clear(){this.window.clear(),this.document.clear()}}const Bp={pixelArtSampler:!1,nativeContextAntialiasing:!1,multiSampleAntialiasing:!0,filtering:En.Blended,canvasImageRendering:"auto"},Op={pixelArtSampler:!0,nativeContextAntialiasing:!1,multiSampleAntialiasing:!0,filtering:En.Blended,canvasImageRendering:"auto"};class zp{constructor(e){var a;this._samplePeriod=100,this._currentFrameTime=0,this._frames=0,this._previousSampleTime=0,this._beginFrameTime=0,this._fps=e.initialFps,this._samplePeriod=(a=e.samplePeriod)!==null&&a!==void 0?a:this._samplePeriod,this._currentFrameTime=1e3/e.initialFps,this._nowFn=e.nowFn,this._previousSampleTime=this._nowFn()}start(){this._beginFrameTime=this._nowFn()}end(){this._frames++;const e=this._nowFn();this._currentFrameTime=e-this._beginFrameTime,e>=this._previousSampleTime+this._samplePeriod&&(this._fps=this._frames*1e3/(e-this._previousSampleTime),this._previousSampleTime=e,this._frames=0)}get fps(){return this._fps}get instant(){return 1e3/this._currentFrameTime}}class up{constructor(e){var a,h,_;this._onFatalException=()=>{},this._maxFps=1/0,this._lastTime=0,this._elapsed=1,this._scheduledCbs=[],this._totalElapsed=0,this._options=e,this.tick=e.tick,this._lastTime=(a=this.now())!==null&&a!==void 0?a:0,this._maxFps=(h=e.maxFps)!==null&&h!==void 0?h:this._maxFps,this._onFatalException=(_=e.onFatalException)!==null&&_!==void 0?_:this._onFatalException,this.fpsSampler=new zp({initialFps:60,nowFn:()=>this.now()})}elapsed(){return this._elapsed}now(){return performance.now()}toTestClock(){return new Lp({...this._options,defaultUpdateMs:16.6})}toStandardClock(){return new hp({...this._options})}setFatalExceptionHandler(e){this._onFatalException=e}schedule(e,a=0,h="preframe"){const _=this._totalElapsed+a;this._scheduledCbs.push([e,_,h])}__runScheduledCbs(e="preframe"){for(let a=this._scheduledCbs.length-1;a>-1;a--)e===this._scheduledCbs[a][2]&&this._scheduledCbs[a][1]<=this._totalElapsed&&(this._scheduledCbs[a][0](this._elapsed),this._scheduledCbs.splice(a,1))}update(e){try{this.fpsSampler.start();const a=this.now();let h=a-this._lastTime||1;const _=1e3/this._maxFps;if(h>=_){let lt=0;_!==0&&(lt=h%_,h=h-lt),h>200&&(h=1),this._elapsed=e||h,this._totalElapsed+=this._elapsed,this.__runScheduledCbs("preframe"),this.tick(e||h),this.__runScheduledCbs("postframe"),_!==0?this._lastTime=a-lt:this._lastTime=a,this.fpsSampler.end()}}catch(a){this._onFatalException(a),this.stop()}}}class hp extends up{constructor(e){super(e),this._running=!1}isRunning(){return this._running}start(){if(this._running)return;this._running=!0;const e=()=>{if(this._running)try{this._requestId=window.requestAnimationFrame(e),this.update()}catch(a){throw window.cancelAnimationFrame(this._requestId),a}};e()}stop(){window.cancelAnimationFrame(this._requestId),this._running=!1}}class Lp extends up{constructor(e){super({...e}),this._logger=Vt.getInstance(),this._running=!1,this._currentTime=0,this._updateMs=e.defaultUpdateMs}now(){var e;return(e=this._currentTime)!==null&&e!==void 0?e:0}isRunning(){return this._running}start(){this._running=!0}stop(){this._running=!1}step(e){const a=e??this._updateMs;this._running?(this.update(a),this._currentTime+=a):this._logger.warn("The clock is not running, no step will be performed")}run(e,a){for(let h=0;h<e;h++)this.step(a??this._updateMs)}}var rm=__webpack_require__(4296);class Np{constructor(){this._toasterCss=rm.A.toString(),this._isInitialized=!1}_initialize(){this._isInitialized||(this._container=document.createElement("div"),this._container.id="ex-toast-container",document.body.appendChild(this._container),this._isInitialized=!0,this._styleBlock=document.createElement("style"),this._styleBlock.textContent=this._toasterCss,document.head.appendChild(this._styleBlock))}dispose(){this._container.parentElement.removeChild(this._container),this._styleBlock.parentElement.removeChild(this._styleBlock),this._isInitialized=!1}_createFragment(e){const a=document.createElement("span");return a.innerText=e,a}toast(e,a,h){this._initialize();const _=document.createElement("div");_.className="ex-toast-message";const lt=e.split("[LINK]").map(Mt=>this._createFragment(Mt));if(a){const Mt=document.createElement("a");Mt.href=a,h?Mt.innerText=h:Mt.innerText=a,lt.splice(1,0,Mt)}const ft=document.createElement("div");lt.forEach(Mt=>{ft.appendChild(Mt)}),_.appendChild(ft);const mt=document.createElement("button");mt.innerText="x",mt.addEventListener("click",()=>{this._container.removeChild(_)}),_.appendChild(mt);const kt=Mt=>{if(Mt.key==="Escape")try{this._container.removeChild(_)}catch{}document.removeEventListener("keydown",kt)};document.addEventListener("keydown",kt);const Rt=this._container.firstChild;this._container.insertBefore(_,Rt)}}const om={NavigationStart:"navigationstart",Navigation:"navigation",NavigationEnd:"navigationend"};class jp{get isTransitioning(){return this._isTransitioning}constructor(e,a){this._engine=e,this.events=new dt,this._logger=Vt.getInstance(),this._initialized=!1,this.scenes={},this._sceneToInstance=new Map,this._sceneToLoader=new Map,this._sceneToTransition=new Map,this._loadedScenes=new Set,this._isTransitioning=!1,this.rootScene=this.currentScene=new xs,this.add("root",this.rootScene),this.currentScene=this.rootScene,this.currentSceneName="root";for(const h in a){const _=a[h];this.add(h,_),h==="root"&&(this.rootScene=this.getSceneInstance("root"),this.currentScene=this.rootScene)}}async onInitialize(){if(!this._initialized)if(this._initialized=!0,this._deferredGoto){const e=this._deferredGoto,a=this._deferredTransition;this._deferredGoto=null,this._deferredTransition=null,await this.swapScene(e),a&&await this.playTransition(a)}else await this.swapScene("root")}get isInitialized(){return this._initialized}configureStart(e,a){const h=a?.loader;h instanceof Fs?this.mainLoader=h:Ml(h)?this.mainLoader=new h:this.mainLoader=new nr;let _;if(a){const{inTransition:lt}=a;_=lt}this.startScene=e,_?this.swapScene(this.startScene).then(()=>{this.playTransition(_)}):this.swapScene(this.startScene),this.currentSceneName=this.startScene}_getLoader(e){return this._sceneToLoader.get(e)}_getInTransition(e){var a;const h=this.scenes[e];return h instanceof xs||Ws(h)?null:(a=h?.transitions)===null||a===void 0?void 0:a.in}_getOutTransition(e){var a;const h=this.scenes[e];return h instanceof xs||Ws(h)?null:(a=h?.transitions)===null||a===void 0?void 0:a.out}getDeferredScene(){const e=this.getSceneDefinition(this._deferredGoto);return this._deferredGoto&&e?e:null}getSceneDefinition(e){const a=this.scenes[e];if(a instanceof xs||Ws(a))return a;if(a)return a.scene}getSceneName(e){for(const[a,h]of Object.entries(this.scenes))if(h instanceof xs){if(e===h)return a}else if(!Ws(h)&&e===h.scene)return a;for(const[a,h]of Object.entries(this.scenes))if(Ws(h)){if(e.constructor===h)return a}else if(!(h instanceof xs)&&e.constructor===h.scene)return a;return null}assertAdded(e){return this}assertRemoved(e){return this}add(e,a){if(!(a instanceof xs)&&!Ws(a)){const{loader:h,transitions:_}=a,{in:lt,out:ft}=_??{};this._sceneToTransition.set(e,{in:lt,out:ft}),Ml(h)?this._sceneToLoader.set(e,new h):this._sceneToLoader.set(e,h)}return this.scenes[e]&&this._logger.warn("Scene",e,"already exists overwriting"),this.scenes[e]=a,this.assertAdded(e)}remove(e){if(e instanceof xs||Ws(e)){const a=e;for(const h in this.scenes)if(this.scenes.hasOwnProperty(h)){const _=this.scenes[h];let lt;if(_ instanceof xs||Ws(_)?lt=_:lt=_.scene,lt===a){if(h===this.currentSceneName)throw new Error(`Cannot remove a currently active scene: ${h}`);this._sceneToInstance.delete(h),this._sceneToTransition.delete(h),this._sceneToLoader.delete(h),delete this.scenes[h]}}}if(typeof e=="string"){if(e===this.currentSceneName)throw new Error(`Cannot remove a currently active scene: ${e}`);this._sceneToInstance.delete(e),this._sceneToTransition.delete(e),this._sceneToLoader.delete(e),delete this.scenes[e]}}async goto(e,a){var h,_,lt,ft,mt,kt;const Rt=this.getSceneInstance(e);if(!Rt){this._logger.warn(`Scene ${e} does not exist! Check the name, are you sure you added it?`);return}const Mt=this.currentSceneName,Nt=(_=(h=this._engine.input)===null||h===void 0?void 0:h.enabled)!==null&&_!==void 0?_:!0;this._isTransitioning=!0;const en=(lt=this.getSceneInstance(Mt))===null||lt===void 0?void 0:lt.onTransition("out"),an=Rt?.onTransition("in");a={sourceOut:(ft=this._getOutTransition(this.currentSceneName))!==null&&ft!==void 0?ft:en,destinationIn:(mt=this._getInTransition(e))!==null&&mt!==void 0?mt:an,...a};const{sourceOut:un,destinationIn:wn,sceneActivationData:Bn}=a,fn=un??this._getOutTransition(this.currentSceneName),pn=wn??this._getInTransition(e),zn=fn?.hideLoader||pn?.hideLoader;zn&&this.maybeLoadScene(e,zn),this._emitEvent("navigationstart",Mt,e),await this.playTransition(fn),await this.maybeLoadScene(e,zn),await pn?.onPreviousSceneDeactivate(this.currentScene),await this.swapScene(e,Bn),this._emitEvent("navigation",Mt,e),await this.playTransition(pn),this._emitEvent("navigationend",Mt,e),(kt=this._engine.input)===null||kt===void 0||kt.toggleEnabled(Nt),this._isTransitioning=!1}getSceneInstance(e){const a=this.getSceneDefinition(e);if(!a)return;if(this._sceneToInstance.has(e))return this._sceneToInstance.get(e);if(a instanceof xs)return this._sceneToInstance.set(e,a),a;const h=new a;return this._sceneToInstance.set(e,h),h}async maybeLoadScene(e,a=!1){var h;const _=(h=this._getLoader(e))!==null&&h!==void 0?h:new Fs,lt=this.getSceneDefinition(e),ft=this.getSceneInstance(e);lt&&ft&&!this._loadedScenes.has(ft)&&(ft.onPreLoad(_),ft.events.emit("preload",{loader:_}),a?this._engine.load(_,a):await this._engine.load(_),this._loadedScenes.add(ft))}async playTransition(e){var a,h,_,lt,ft,mt,kt;if(!this.isInitialized){this._deferredTransition=e;return}if(e){this.currentTransition=e;const Rt=this._engine.currentScene,Mt=(h=(a=Rt.input)===null||a===void 0?void 0:a.enabled)!==null&&h!==void 0?h:!0;(_=Rt.input)===null||_===void 0||_.toggleEnabled(!e.blockInput),(lt=this._engine.input)===null||lt===void 0||lt.toggleEnabled(!e.blockInput),await this.currentTransition.play(this._engine),(ft=Rt.input)===null||ft===void 0||ft.toggleEnabled(Mt)}(mt=this.currentTransition)===null||mt===void 0||mt.kill(),(kt=this.currentTransition)===null||kt===void 0||kt.reset(),this.currentTransition=null}async swapScene(e,a){const h=this._engine;if(!this.isInitialized){this._deferredGoto=e;return}const _=this.getSceneInstance(e);if(_){const lt=this.currentScene,ft=_;if(this._logger.debug("Going to scene:",e),this.currentScene.isInitialized){const Rt={engine:h,previousScene:lt,nextScene:ft};await this.currentScene._deactivate(Rt),this.currentScene.events.emit("deactivate",new El(Rt,this.currentScene))}const mt=this._sceneToLoader.get(e);await mt?.areResourcesLoaded(),this.currentScene=ft,this.currentSceneName=e,h.screen.setCurrentCamera(ft.camera),await this.currentScene._initialize(h);const kt={engine:h,previousScene:lt,nextScene:ft,data:a};await this.currentScene._activate(kt),this.currentScene.events.emit("activate",new ro(kt,this.currentScene))}else this._logger.error("Scene",e,"does not exist!")}_emitEvent(e,a,h){const _=this.getSceneDefinition(a),lt=this.getSceneDefinition(h);this.events.emit(e,{sourceScene:_,sourceName:a,destinationScene:lt,destinationName:h})}}function sm(){const ut={scope:(e,a)=>(ut.value=e,a()),value:void 0};return ut}function am(ut){return ut.value}$();const lm={FallbackGraphicsContext:"fallbackgraphicscontext",Initialize:"initialize",Visible:"visible",Hidden:"hidden",Start:"start",Stop:"stop",PreUpdate:"preupdate",PostUpdate:"postupdate",PreFrame:"preframe",PostFrame:"postframe",PreDraw:"predraw",PostDraw:"postdraw"};var wl;(function(ut){ut[ut.None=0]="None",ut[ut.Canvas=1]="Canvas",ut[ut.All=2]="All"})(wl||(wl={}));class ls{static useEngine(){const e=am(ls.Context);if(!e)throw new Error("Cannot inject engine with `useEngine()`, `useEngine()` was called outside of Engine lifecycle scope.");return e}get canvasWidth(){return this.screen.canvasWidth}get halfCanvasWidth(){return this.screen.halfCanvasWidth}get canvasHeight(){return this.screen.canvasHeight}get halfCanvasHeight(){return this.screen.halfCanvasHeight}get drawWidth(){return this.screen.drawWidth}get halfDrawWidth(){return this.screen.halfDrawWidth}get drawHeight(){return this.screen.drawHeight}get halfDrawHeight(){return this.screen.halfDrawHeight}get isHiDpi(){return this.screen.isHiDpi}get stats(){return this.debug.stats}get currentScene(){return this.director.currentScene}get currentSceneName(){return this.director.currentSceneName}get rootScene(){return this.director.rootScene}get scenes(){return this.director.scenes}get isFullscreen(){return this.screen.isFullScreen}get displayMode(){return this.screen.displayMode}get pixelRatio(){return this.screen.pixelRatio}get isDebug(){return this._isDebug}get snapToPixel(){return this.graphicsContext.snapToPixel}set snapToPixel(e){this.graphicsContext.snapToPixel=e}emit(e,a){this.events.emit(e,a)}on(e,a){return this.events.on(e,a)}once(e,a){return this.events.once(e,a)}off(e,a){this.events.off(e,a)}constructor(e){var a,h,_,lt,ft,mt,kt,Rt;this.scope=zn=>ls.Context.scope(this,zn),this.version=_p,this.events=new dt,this.maxFps=Number.POSITIVE_INFINITY,this._inputEnabled=!0,this._suppressPlayButton=!1,this.pauseAudioWhenHidden=!0,this._isDebug=!1,this.enableCanvasTransparency=!0,this.onFatalException=zn=>{Vt.getInstance().fatal(zn,zn.stack)},this._toaster=new Np,this._timescale=1,this._isInitialized=!1,this._originalOptions={},this._handleWebGLContextLost=zn=>{var Pn;zn.preventDefault(),this.clock.stop(),this._logger.fatalOnce("WebGL Graphics Lost",zn);const yr=document.createElement("div");yr.id="ex-webgl-graphics-context-lost",yr.style.position="absolute",yr.style.zIndex="99",yr.style.left="50%",yr.style.top="50%",yr.style.display="flex",yr.style.flexDirection="column",yr.style.transform="translate(-50%, -50%)",yr.style.backgroundColor="white",yr.style.padding="10px",yr.style.borderStyle="solid 1px";const Qr=document.createElement("div");if(Qr.innerHTML=`
      <h1>There was an issue rendering, please refresh the page.</h1>
      <div>
        <p>WebGL Graphics Context Lost</p>

        <button id="ex-webgl-graphics-reload">Refresh Page</button>

        <p>There are a few reasons this might happen:</p>
        <ul>
          <li>Two or more pages are placing a high demand on the GPU</li>
          <li>Another page or operation has stalled the GPU and the browser has decided to reset the GPU</li>
          <li>The computer has multiple GPUs and the user has switched between them</li>
          <li>Graphics driver has crashed or restarted</li>
          <li>Graphics driver was updated</li>
        </ul>
      </div>
    `,yr.appendChild(Qr),!((Pn=this.canvas)===null||Pn===void 0)&&Pn.parentElement){this.canvas.parentElement.appendChild(yr);const Hn=Qr.querySelector("#ex-webgl-graphics-reload");Hn?.addEventListener("click",()=>location.reload())}},this._performanceThresholdTriggered=!1,this._fpsSamples=[],this._disposed=!1,this._isLoading=!1,this._hideLoader=!1,this._isReadyFuture=new pt,this.currentFrameElapsedMs=0,this.currentFrameLagMs=0,this._lagMs=0,this._screenShotRequests=[],e={...ls._DEFAULT_ENGINE_OPTIONS,...e},this._originalOptions=e,ot.freeze(),this.browser=new Fp(window,document);const Mt=new mr;if(!e.suppressMinimumBrowserFeatureDetection&&!(this._compatible=Mt.test())){const zn=document.createElement("div");if(zn.innerText="Sorry, your browser does not support all the features needed for Excalibur",document.body.appendChild(zn),Mt.failedTests.forEach(function(Pn){const yr=document.createElement("div");yr.innerText="Browser feature missing "+Pn,document.body.appendChild(yr)}),e.canvasElementId){const Pn=document.getElementById(e.canvasElementId);Pn&&Pn.parentElement.removeChild(Pn)}return}else this._compatible=!0;if(console.log&&!e.suppressConsoleBootMessage&&(console.log(`%cPowered by Excalibur.js (v${_p})`,"background: #176BAA; color: white; border-radius: 5px; padding: 15px; font-size: 1.5em; line-height: 80px;"),console.log(`
      /| ________________
O|===|* >________________>
      \\|`),console.log("Visit","http://excaliburjs.com","for more information")),e.suppressPlayButton&&(this._suppressPlayButton=!0),this._logger=Vt.getInstance(),this._logger.defaultLevel===nn.Debug&&Mt.logBrowserFeatures(),this._logger.debug("Building engine..."),this.canvasElementId=e.canvasElementId,e.canvasElementId){if(this._logger.debug("Using Canvas element specified: "+e.canvasElementId),document.getElementById(e.canvasElementId)===null)throw new Error("Cannot find existing element in the DOM, please ensure element is created prior to engine creation.");this.canvas=document.getElementById(e.canvasElementId)}else e.canvasElement?(this._logger.debug("Using Canvas element specified:",e.canvasElement),this.canvas=e.canvasElement):(this._logger.debug("Using generated canvas element"),this.canvas=document.createElement("canvas"));let Nt=(a=e.displayMode)!==null&&a!==void 0?a:xr.Fixed;e.width&&e.height||e.viewport?(e.displayMode===void 0&&(Nt=xr.Fixed),this._logger.debug("Engine viewport is size "+e.width+" x "+e.height)):e.displayMode||(this._logger.debug("Engine viewport is fit"),Nt=xr.FitScreen),this._originalDisplayMode=Nt;let en,an,un,wn,Bn,fn;typeof e.antialiasing=="object"?{pixelArtSampler:en,nativeContextAntialiasing:un,multiSampleAntialiasing:fn,filtering:Bn,canvasImageRendering:wn}={...e.pixelArt?Op:Bp,...e.antialiasing}:(en=!!e.pixelArt,un=!1,fn=e.antialiasing,wn=e.antialiasing?"auto":"pixelated",Bn=e.antialiasing?En.Blended:En.Pixel),un&&fn&&this._logger.warnOnce("Cannot use antialias setting nativeContextAntialiasing and multiSampleAntialiasing at the same time, they are incompatible settings. If you aren't sure use multiSampleAntialiasing"),e.pixelArt&&(an=.25),(!e.antialiasing||Bn===En.Pixel)&&(an=0),an=(_=(h=e.uvPadding)!==null&&h!==void 0?h:an)!==null&&_!==void 0?_:.01;let pn=ot.isEnabled("use-canvas-context");if(!pn)try{this.graphicsContext=new ar({canvasElement:this.canvas,enableTransparency:this.enableCanvasTransparency,pixelArtSampler:en,antialiasing:un,multiSampleAntialiasing:fn,uvPadding:an,powerPreference:e.powerPreference,backgroundColor:e.backgroundColor,snapToPixel:e.snapToPixel,useDrawSorting:e.useDrawSorting,handleContextLost:(lt=e.handleContextLost)!==null&&lt!==void 0?lt:this._handleWebGLContextLost,handleContextRestored:e.handleContextRestored})}catch(zn){this._logger.warn(`Excalibur could not load webgl for some reason (${zn.message}) and loaded a Canvas 2D fallback. Some features of Excalibur will not work in this mode. 

Read more about this issue at https://excaliburjs.com/docs/performance`),pn=!0}pn&&(this.graphicsContext=new rr({canvasElement:this.canvas,enableTransparency:this.enableCanvasTransparency,antialiasing:un,backgroundColor:e.backgroundColor,snapToPixel:e.snapToPixel,useDrawSorting:e.useDrawSorting})),this.screen=new Ar({canvas:this.canvas,context:this.graphicsContext,antialiasing:un,canvasImageRendering:wn,browser:this.browser,viewport:(ft=e.viewport)!==null&&ft!==void 0?ft:e.width&&e.height?{width:e.width,height:e.height}:Dr.SVGA,resolution:e.resolution,displayMode:Nt,pixelRatio:e.suppressHiDPIScaling?1:(mt=e.pixelRatio)!==null&&mt!==void 0?mt:null}),hn.filtering=Bn,e.backgroundColor&&(this.backgroundColor=e.backgroundColor.clone()),this.grabWindowFocus=e.grabWindowFocus,this.pointerScope=e.pointerScope,this.maxFps=(kt=e.maxFps)!==null&&kt!==void 0?kt:this.maxFps,this.fixedUpdateFps=(Rt=e.fixedUpdateFps)!==null&&Rt!==void 0?Rt:this.fixedUpdateFps,this.clock=new hp({maxFps:this.maxFps,tick:this._mainloop.bind(this),onFatalException:zn=>this.onFatalException(zn)}),this.enableCanvasTransparency=e.enableCanvasTransparency,typeof e.physics=="boolean"?this.physics={...ao,...$s(),enabled:e.physics}:this.physics={...ao,...$s(),...e.physics},this.debug=new Mp(this),this.director=new jp(this,e.scenes),this._initialize(e),window.___EXCALIBUR_DEVTOOL=this,ls.InstanceCount++}_monitorPerformanceThresholdAndTriggerFallback(){const{allow:e}=this._originalOptions.configurePerformanceCanvas2DFallback;let{threshold:a,showPlayerMessage:h}=this._originalOptions.configurePerformanceCanvas2DFallback;if(a===void 0&&(a=ls._DEFAULT_ENGINE_OPTIONS.configurePerformanceCanvas2DFallback.threshold),h===void 0&&(h=ls._DEFAULT_ENGINE_OPTIONS.configurePerformanceCanvas2DFallback.showPlayerMessage),!ot.isEnabled("use-canvas-context")&&e&&this.ready&&!this._performanceThresholdTriggered){this._fpsSamples.length===a.numberOfFrames&&this._fpsSamples.splice(0,1),this._fpsSamples.push(this.clock.fpsSampler.fps);let _=0;for(let ft=0;ft<this._fpsSamples.length;ft++)_+=this._fpsSamples[ft];const lt=_/this._fpsSamples.length;this._fpsSamples.length===a.numberOfFrames&&lt<=a.fps&&(this._performanceThresholdTriggered=!0,this._logger.warn(`Switching to browser 2D Canvas fallback due to performance. Some features of Excalibur will not work in this mode.
this might mean your browser doesn't have webgl enabled or hardware acceleration is unavailable.

If in Chrome:
  * Visit Settings > Advanced > System, and ensure "Use Hardware Acceleration" is checked.
  * Visit chrome://flags/#ignore-gpu-blocklist and ensure "Override software rendering list" is "enabled"
If in Firefox, visit about:config
  * Ensure webgl.disabled = false
  * Ensure webgl.force-enabled = true
  * Ensure layers.acceleration.force-enabled = true

Read more about this issue at https://excaliburjs.com/docs/performance`),h&&this._toaster.toast("Excalibur is encountering performance issues. It's possible that your browser doesn't have hardware acceleration enabled. Visit [LINK] for more information and potential solutions.","https://excaliburjs.com/docs/performance"),this.useCanvas2DFallback(),this.emit("fallbackgraphicscontext",this.graphicsContext))}}useCanvas2DFallback(){var e,a,h;const _=this.canvas.cloneNode(!1);this.canvas.parentNode.replaceChild(_,this.canvas),this.canvas=_;const lt={...this._originalOptions,antialiasing:this.getAntialiasing()},ft=this._originalDisplayMode;this.graphicsContext=new rr({canvasElement:this.canvas,enableTransparency:this.enableCanvasTransparency,antialiasing:lt.antialiasing,backgroundColor:lt.backgroundColor,snapToPixel:lt.snapToPixel,useDrawSorting:lt.useDrawSorting}),this.screen&&this.screen.dispose(),this.screen=new Ar({canvas:this.canvas,context:this.graphicsContext,antialiasing:(e=lt.antialiasing)!==null&&e!==void 0?e:!0,browser:this.browser,viewport:(a=lt.viewport)!==null&&a!==void 0?a:lt.width&&lt.height?{width:lt.width,height:lt.height}:Dr.SVGA,resolution:lt.resolution,displayMode:ft,pixelRatio:lt.suppressHiDPIScaling?1:(h=lt.pixelRatio)!==null&&h!==void 0?h:null}),this.screen.setCurrentCamera(this.currentScene.camera),this.input.pointers.detach();const mt=lt&&lt.pointerScope===gt.Document?document:this.canvas;this.input.pointers=this.input.pointers.recreate(mt,this),this.input.pointers.init()}dispose(){this._disposed||(this._disposed=!0,this.stop(),this.input.toggleEnabled(!1),this.canvas.parentNode.removeChild(this.canvas),this.canvas=null,this.screen.dispose(),this.graphicsContext.dispose(),this.graphicsContext=null,ls.InstanceCount--)}isDisposed(){return this._disposed}getWorldBounds(){return this.screen.getWorldBounds()}get timescale(){return this._timescale}set timescale(e){if(e<=0){Vt.getInstance().error("Cannot set engine.timescale to a value of 0 or less than 0.");return}this._timescale=e}addTimer(e){return this.currentScene.addTimer(e)}removeTimer(e){return this.currentScene.removeTimer(e)}addScene(e,a){return this.director.add(e,a),this}removeScene(e){this.director.remove(e)}add(e){if(arguments.length===2){this.director.add(arguments[0],arguments[1]);return}const a=this.director.getDeferredScene();a instanceof xs?a.add(e):this.currentScene.add(e)}remove(e){e instanceof jo&&this.currentScene.remove(e),(e instanceof xs||Ws(e))&&this.removeScene(e),typeof e=="string"&&this.removeScene(e)}async goto(e,a){await this.scope(async()=>{await this.director.goto(e,a)})}async goToScene(e,a){await this.scope(async()=>{await this.director.goto(e,a)})}screenToWorldCoordinates(e){return this.screen.screenToWorldCoordinates(e)}worldToScreenCoordinates(e){return this.screen.worldToScreenCoordinates(e)}_initialize(e){var a,h;this.pageScrollPreventionMode=e.scrollPreventionMode;const _=e&&e.pointerScope===gt.Document?document:this.canvas,lt=(h=(a=this._originalOptions)===null||a===void 0?void 0:a.grabWindowFocus)!==null&&h!==void 0?h:!0;this.input=new lp({pointerTarget:_,grabWindowFocus:lt,engine:this}),this.inputMapper=this.input.inputMapper,this.browser.document.on("visibilitychange",()=>{document.visibilityState==="hidden"?(this.events.emit("hidden",new Rs(this)),this._logger.debug("Window hidden")):document.visibilityState==="visible"&&(this.events.emit("visible",new Sl(this)),this._logger.debug("Window visible"))}),!this.canvasElementId&&!e.canvasElement&&document.body.appendChild(this.canvas)}toggleInputEnabled(e){this._inputEnabled=e,this.input.toggleEnabled(this._inputEnabled)}onInitialize(e){}setAntialiasing(e){this.screen.antialiasing=e}getAntialiasing(){return this.screen.antialiasing}get isInitialized(){return this._isInitialized}async _overrideInitialize(e){this.isInitialized||(await this.director.onInitialize(),await this.onInitialize(e),this.events.emit("initialize",new Ns(e,this)),this._isInitialized=!0)}_update(e){var a;if(this._isLoading){(a=this._loader)===null||a===void 0||a.onUpdate(this,e),this.input.update();return}this.clock.__runScheduledCbs("preupdate"),this._preupdate(e),this.currentScene.update(this,e),this.graphicsContext.updatePostProcessors(e),this.clock.__runScheduledCbs("postupdate"),this._postupdate(e),this.input.update()}_preupdate(e){this.emit("preupdate",new ys(this,e,this)),this.onPreUpdate(this,e)}onPreUpdate(e,a){}_postupdate(e){this.emit("postupdate",new As(this,e,this)),this.onPostUpdate(this,e)}onPostUpdate(e,a){}_draw(e){var a,h;if(this.graphicsContext.beginDrawLifecycle(),this.graphicsContext.clear(),this.clock.__runScheduledCbs("predraw"),this._predraw(this.graphicsContext,e),this._isLoading){this._hideLoader||((a=this._loader)===null||a===void 0||a.canvas.draw(this.graphicsContext,0,0),this.clock.__runScheduledCbs("postdraw"),this.graphicsContext.flush(),this.graphicsContext.endDrawLifecycle());return}this.graphicsContext.backgroundColor=(h=this.currentScene.backgroundColor)!==null&&h!==void 0?h:this.backgroundColor,this.currentScene.draw(this.graphicsContext,e),this.clock.__runScheduledCbs("postdraw"),this._postdraw(this.graphicsContext,e),this.graphicsContext.flush(),this.graphicsContext.endDrawLifecycle(),this._checkForScreenShots()}_predraw(e,a){this.emit("predraw",new ko(e,a,this)),this.onPreDraw(e,a)}onPreDraw(e,a){}_postdraw(e,a){this.emit("postdraw",new Oo(e,a,this)),this.onPostDraw(e,a)}onPostDraw(e,a){}showDebug(e){this._isDebug=e}toggleDebug(){return this._isDebug=!this._isDebug,this._isDebug}get loadingComplete(){return!this._isLoading}get ready(){return this._isReadyFuture.isCompleted}isReady(){return this._isReadyFuture.promise}async start(e,a){await this.scope(async()=>{if(!this._compatible)throw new Error("Excalibur is incompatible with your browser");this._isLoading=!0;let h;return e instanceof Fs?h=e:typeof e=="string"&&(this.director.configureStart(e,a),h=this.director.mainLoader),this._logger.debug("Starting game clock..."),this.browser.resume(),this.clock.start(),this._logger.debug("Game clock started"),await this.load(h??new nr),await this._overrideInitialize(this),this._isReadyFuture.resolve(),this.emit("start",new Io(this)),this._isReadyFuture.promise})}_mainloop(e){this.scope(()=>{this.emit("preframe",new xl(this,this.stats.prevFrame));const a=e*this.timescale;this.currentFrameElapsedMs=a;const h=this.stats.prevFrame.id+1;this.stats.currFrame.reset(),this.stats.currFrame.id=h,this.stats.currFrame.delta=a,this.stats.currFrame.fps=this.clock.fpsSampler.fps,gn.clear();const _=this.clock.now(),lt=1e3/this.fixedUpdateFps;if(this.fixedUpdateFps)for(this._lagMs+=a;this._lagMs>=lt;)this._update(lt),this._lagMs-=lt;else this._update(a);const ft=this.clock.now();this.currentFrameLagMs=this._lagMs,this._draw(a);const mt=this.clock.now();this.stats.currFrame.duration.update=ft-_,this.stats.currFrame.duration.draw=mt-ft,this.stats.currFrame.graphics.drawnImages=gn.DrawnImagesCount,this.stats.currFrame.graphics.drawCalls=gn.DrawCallCount,this.emit("postframe",new Gs(this,this.stats.currFrame)),this.stats.prevFrame.reset(this.stats.currFrame),this._monitorPerformanceThresholdAndTriggerFallback()})}stop(){this.clock.isRunning()&&(this.emit("stop",new Ts(this)),this.browser.pause(),this.clock.stop(),this._logger.debug("Game stopped"))}isRunning(){return this.clock.isRunning()}screenshot(e=!1){return new Promise(h=>{this._screenShotRequests.push({preserveHiDPIResolution:e,resolve:h})})}_checkForScreenShots(){for(const e of this._screenShotRequests){const a=e.preserveHiDPIResolution?this.canvas.width:this.screen.resolution.width,h=e.preserveHiDPIResolution?this.canvas.height:this.screen.resolution.height,_=document.createElement("canvas");_.width=a,_.height=h;const lt=_.getContext("2d");lt.imageSmoothingEnabled=this.screen.antialiasing,lt.drawImage(this.canvas,0,0,a,h);const ft=new Image,mt=_.toDataURL("image/png");ft.src=mt,e.resolve(ft)}this._screenShotRequests.length=0}async load(e,a=!1){await this.scope(async()=>{try{if(e.isLoaded())return;this._loader=e,this._isLoading=!0,this._hideLoader=a,e instanceof nr&&(e.suppressPlayButton=e.suppressPlayButton||this._suppressPlayButton),this._loader.onInitialize(this),await e.load()}catch(h){this._logger.error("Error loading resources, things may not behave properly",h),await Promise.resolve()}finally{this._isLoading=!1,this._hideLoader=!1,this._loader=null}})}}ls.Context=sm(),ls.InstanceCount=0,ls._DEFAULT_ENGINE_OPTIONS={width:0,height:0,enableCanvasTransparency:!0,useDrawSorting:!0,configurePerformanceCanvas2DFallback:{allow:!1,showPlayerMessage:!1,threshold:{fps:20,numberOfFrames:100}},canvasElementId:"",canvasElement:void 0,snapToPixel:!1,antialiasing:!0,pixelArt:!1,powerPreference:"high-performance",pointerScope:gt.Canvas,suppressConsoleBootMessage:null,suppressMinimumBrowserFeatureDetection:null,suppressHiDPIScaling:null,suppressPlayButton:null,grabWindowFocus:!0,scrollPreventionMode:wl.Canvas,backgroundColor:Gt.fromHex("#2185d0")};class cm{constructor(){this._handlers={},this._wiredEventDispatchers=[],this._deferedHandlerRemovals=[]}clear(){this._handlers={},this._wiredEventDispatchers=[]}_processDeferredHandlerRemovals(){for(const e of this._deferedHandlerRemovals)this._removeHandler(e.name,e.handler);this._deferedHandlerRemovals.length=0}emit(e,a){if(this._processDeferredHandlerRemovals(),!e)return;e=e.toLowerCase(),(typeof a>"u"||a===null)&&(a=new Or);let h,_;if(this._handlers[e])for(h=0,_=this._handlers[e].length,h;h<_;h++)this._handlers[e][h](a);for(h=0,_=this._wiredEventDispatchers.length,h;h<_;h++)this._wiredEventDispatchers[h].emit(e,a)}on(e,a){this._processDeferredHandlerRemovals(),e=e.toLowerCase(),this._handlers[e]||(this._handlers[e]=[]),this._handlers[e].push(a)}off(e,a){this._deferedHandlerRemovals.push({name:e,handler:a})}_removeHandler(e,a){e=e.toLowerCase();const h=this._handlers[e];if(h)if(!a)this._handlers[e].length=0;else{const _=h.indexOf(a);_>-1&&this._handlers[e].splice(_,1)}}once(e,a){this._processDeferredHandlerRemovals();const h=_=>{const lt=_||new Or;this.off(e,h),a(lt)};this.on(e,h)}wire(e){e._wiredEventDispatchers.push(this)}unwire(e){const a=e._wiredEventDispatchers.indexOf(this);a>-1&&e._wiredEventDispatchers.splice(a,1)}}class um extends Yo{get font(){return this._font}set font(e){this._font=e,this._text.font=e}get text(){return this._text.text}set text(e){this._text.text=e}get color(){return this._text.color}set color(e){this._text&&(this._text.color=e)}get opacity(){return this._text.opacity}set opacity(e){this._text.opacity=e}get spriteFont(){return this._spriteFont}set spriteFont(e){e&&(this._spriteFont=e,this._text.font=this._spriteFont)}constructor(e){super(e),this._font=new qs,this._text=new $l({text:"",font:this._font});const{text:a,pos:h,x:_,y:lt,spriteFont:ft,font:mt,color:kt}={text:"",...e};this.pos=h??(_&&lt?It(_,lt):this.pos),this.text=a??this.text,this.font=mt??this.font,this.spriteFont=ft??this.spriteFont,this._text.color=kt??this.color;const Rt=this.get(Do);Rt.anchor=At.Zero,Rt.use(this._text)}_initialize(e){super._initialize(e)}getTextWidth(){return this._text.width}}class $p extends jo{getGraphics(){return this._graphics}addGraphic(e,a){this._graphics.push(e),this._gfx.visible=this.map.visible,this._gfx.opacity=this.map.opacity,a?.offset&&(this._gfx.offset=a.offset),this._gfx.localBounds=this._recalculateBounds()}_recalculateBounds(){let e=this._tileBounds.clone();for(const a of this._graphics){const h=It(this.map.graphicsOffset.x-this.map.tileWidth/2,this.map.graphicsOffset.y-(this.map.renderFromTopOfGraphic?0:a.height-this.map.tileHeight));e=e.combine(a.localBounds.translate(h))}return e}removeGraphic(e){const a=this._graphics.indexOf(e);a>-1&&this._graphics.splice(a,1),this._gfx.localBounds=this._recalculateBounds()}clearGraphics(){this._graphics.length=0,this._gfx.visible=!1,this._gfx.localBounds=this._recalculateBounds()}getColliders(){return this._colliders}addCollider(e){this._colliders.push(e),this.map.flagCollidersDirty()}removeCollider(e){const a=this._colliders.indexOf(e);a>-1&&this._colliders.splice(a,1),this.map.flagCollidersDirty()}clearColliders(){this._colliders.length=0,this.map.flagCollidersDirty()}get pos(){return this.map.tileToWorld(It(this.x,this.y))}get center(){return this.pos.add(It(0,this.map.tileHeight/2))}constructor(e,a,h,_){super([new hr,new Do({offset:h??At.Zero,onPostDraw:(en,an)=>this.draw(en,an)}),new Eu(_)]),this.solid=!1,this.events=new dt,this._tileBounds=new Wt,this._graphics=[],this._colliders=[],this.data=new Map,this.x=e,this.y=a,this.map=_,this._transform=this.get(hr),this._isometricEntityComponent=this.get(Eu);const lt=this.map.tileWidth/2,ft=this.map.tileHeight/2,mt=(this.x-this.y)*lt,kt=(this.x+this.y)*ft;this._transform.pos=It(mt,kt),this._isometricEntityComponent.elevation=_.elevation,this._gfx=this.get(Do),this._gfx.visible=!1;const Rt=this.map.tileWidth,Mt=this.map.tileHeight,Nt=It(0,this.map.renderFromTopOfGraphic?Mt:0);this._gfx.localBounds=this._tileBounds=new Wt({left:-Rt/2,top:-Mt,right:Rt/2,bottom:Mt}).translate(Nt)}draw(e,a){const h=this.map.tileWidth/2;e.save(),e.translate(-h,0);for(const _ of this._graphics)_.draw(e,this.map.graphicsOffset.x,this.map.graphicsOffset.y-(this.map.renderFromTopOfGraphic?0:_.height-this.map.tileHeight));e.restore()}}class hm extends jo{constructor(e){super([new hr,new Ur({type:On.Fixed}),new xo,new Es,new Ks((Mt,Nt)=>this.debug(Mt,Nt),!1)],e.name),this.elevation=0,this.visible=!0,this.opacity=1,this.renderFromTopOfGraphic=!1,this.graphicsOffset=It(0,0),this._forwardPointerEventToTile=Mt=>Nt=>{const en=this.getTileByPoint(Nt.worldPos);en&&en.events.emit(Mt,Nt)},this._collidersDirty=!1,this._originalOffsets=new WeakMap;const{pos:a,tileWidth:h,tileHeight:_,columns:lt,rows:ft,renderFromTopOfGraphic:mt,graphicsOffset:kt,elevation:Rt}=e;this.transform=this.get(hr),a&&(this.transform.pos=a),this.collider=this.get(xo),this.collider&&this.collider.set(this._composite=new So([])),this.pointer=this.get(Es),this.renderFromTopOfGraphic=mt??this.renderFromTopOfGraphic,this.graphicsOffset=kt??this.graphicsOffset,this.elevation=Rt??this.elevation,this.tileWidth=h,this.tileHeight=_,this.columns=lt,this.rows=ft,this.tiles=new Array(lt*ft);for(let Mt=0;Mt<ft;Mt++)for(let Nt=0;Nt<lt;Nt++){const en=new $p(Nt,Mt,this.graphicsOffset,this);this.tiles[Nt+Mt*lt]=en,this.addChild(en)}this.pointer.localBounds=Wt.fromDimension(h*lt*this.transform.scale.x,_*ft*this.transform.scale.y,It(.5,0)),this._setupPointerToTile()}_setupPointerToTile(){this.events.on("pointerup",this._forwardPointerEventToTile("pointerup")),this.events.on("pointerdown",this._forwardPointerEventToTile("pointerdown")),this.events.on("pointermove",this._forwardPointerEventToTile("pointermove")),this.events.on("pointercancel",this._forwardPointerEventToTile("pointercancel"))}update(){this._collidersDirty&&(this.updateColliders(),this._collidersDirty=!1)}flagCollidersDirty(){this._collidersDirty=!0}_getOrSetColliderOriginalOffset(e){if(this._originalOffsets.has(e))return this._originalOffsets.get(e);{const a=e.offset;return this._originalOffsets.set(e,a),a}}updateColliders(){this._composite.clearColliders();const e=this.get(hr).pos;for(const a of this.tiles)if(a.solid)for(const h of a.getColliders()){const _=this._getOrSetColliderOriginalOffset(h);h.offset=this.tileToWorld(It(a.x,a.y)).sub(e).add(_).sub(It(this.tileWidth/2,this.tileHeight)),h.owner=this,this._composite.addCollider(h)}this.collider.update()}worldToTile(e){e=e.sub(this.transform.globalPos);const a=this.tileWidth/2,h=this.tileHeight/2;return It(~~((e.x/a+e.y/h)/2),~~((e.y/h-e.x/a)/2))}tileToWorld(e){const a=this.tileWidth/2,h=this.tileHeight/2,_=(e.x-e.y)*a,lt=(e.x+e.y)*h;return It(_,lt).add(this.transform.pos)}getTile(e,a){return e<0||a<0||e>=this.columns||a>=this.rows?null:this.tiles[e+a*this.columns]}getTileByPoint(e){const a=this.worldToTile(e);return this.getTile(a.x,a.y)}_getMaxZIndex(){let e=Number.NEGATIVE_INFINITY;for(const a of this.tiles){const h=a.get(hr).z;h>e&&(e=h)}return e}debug(e,a){const{showAll:h,showPosition:_,positionColor:lt,positionSize:ft,showGrid:mt,gridColor:kt,gridWidth:Rt,showColliderGeometry:Mt}=a.isometric,{geometryColor:Nt,geometryLineWidth:en,geometryPointSize:an}=a.collider;if(e.save(),e.z=this._getMaxZIndex()+.5,h||mt){for(let un=0;un<this.rows+1;un++){const wn=this.tileToWorld(It(0,un)),Bn=this.tileToWorld(It(this.columns,un));e.drawLine(wn,Bn,kt,Rt)}for(let un=0;un<this.columns+1;un++){const wn=this.tileToWorld(It(un,0)),Bn=this.tileToWorld(It(un,this.rows));e.drawLine(wn,Bn,kt,Rt)}}if(h||_)for(const un of this.tiles)e.drawCircle(this.tileToWorld(It(un.x,un.y)),ft,lt);if(h||Mt){for(const un of this.tiles)if(un.solid)for(const wn of un.getColliders())wn.debug(e,Nt,{lineWidth:en,pointSize:an})}e.restore()}}class dp{constructor(e,a){this._stopped=!1,this._sequenceBuilder=a,this._sequenceContext=new $a(e),this._actionQueue=this._sequenceContext.getQueue(),this._sequenceBuilder(this._sequenceContext)}update(e){this._actionQueue.update(e)}isComplete(){return this._stopped||this._actionQueue.isComplete()}stop(){this._stopped=!0}reset(){this._stopped=!1,this._actionQueue.reset()}clone(e){return new dp(e,this._sequenceBuilder)}}class dm{constructor(e){this._actions=e}update(e){for(let a=0;a<this._actions.length;a++)this._actions[a].update(e)}isComplete(e){return this._actions.every(a=>a.isComplete(e))}reset(){this._actions.forEach(e=>e.reset())}stop(){this._actions.forEach(e=>e.stop())}}class _u{constructor(e,a){this.bounds=e,this.options=a,this._defaultOptions={maxDepth:10,capacity:10,level:0},this.items=[],this._isDivided=!1,this.topLeft=null,this.topRight=null,this.bottomLeft=null,this.bottomRight=null,this.options={...this._defaultOptions,...a},this.halfWidth=e.width/2,this.halfHeight=e.height/2}_split(){this._isDivided=!0;const e={maxDepth:this.options.maxDepth,capacity:this.options.capacity,level:this.options.level+1};this.topLeft=new _u(new Wt({left:this.bounds.left,top:this.bounds.top,right:this.bounds.left+this.halfWidth,bottom:this.bounds.top+this.halfHeight}),e),this.topRight=new _u(new Wt({left:this.bounds.left+this.halfWidth,top:this.bounds.top,right:this.bounds.right,bottom:this.bounds.top+this.halfHeight}),e),this.bottomLeft=new _u(new Wt({left:this.bounds.left,top:this.bounds.top+this.halfHeight,right:this.bounds.left+this.halfWidth,bottom:this.bounds.bottom}),e),this.bottomRight=new _u(new Wt({left:this.bounds.left+this.halfWidth,top:this.bounds.top+this.halfHeight,right:this.bounds.right,bottom:this.bounds.bottom}),e)}_insertIntoSubNodes(e){var a,h,_,lt;!((a=this.topLeft)===null||a===void 0)&&a.bounds.overlaps(e.bounds)&&this.topLeft.insert(e),!((h=this.topRight)===null||h===void 0)&&h.bounds.overlaps(e.bounds)&&this.topRight.insert(e),!((_=this.bottomLeft)===null||_===void 0)&&_.bounds.overlaps(e.bounds)&&this.bottomLeft.insert(e),!((lt=this.bottomRight)===null||lt===void 0)&&lt.bounds.overlaps(e.bounds)&&this.bottomRight.insert(e)}insert(e){if(this._isDivided){this._insertIntoSubNodes(e);return}if(this.items.push(e),this.items.length>this.options.capacity&&this.options.level<this.options.maxDepth){this._isDivided||this._split();for(const a of this.items)this._insertIntoSubNodes(a);this.items.length=0}}remove(e){var a,h,_,lt;if(this.bounds.overlaps(e.bounds)){if(!this._isDivided){const ft=this.items.indexOf(e);ft>-1&&this.items.splice(ft,1);return}!((a=this.topLeft)===null||a===void 0)&&a.bounds.overlaps(e.bounds)&&this.topLeft.remove(e),!((h=this.topRight)===null||h===void 0)&&h.bounds.overlaps(e.bounds)&&this.topRight.remove(e),!((_=this.bottomLeft)===null||_===void 0)&&_.bounds.overlaps(e.bounds)&&this.bottomLeft.remove(e),!((lt=this.bottomRight)===null||lt===void 0)&&lt.bounds.overlaps(e.bounds)&&this.bottomRight.remove(e)}}query(e){let a=this.items;return this._isDivided&&(this.topLeft.bounds.overlaps(e)&&(a=a.concat(this.topLeft.query(e))),this.topRight.bounds.overlaps(e)&&(a=a.concat(this.topRight.query(e))),this.bottomLeft.bounds.overlaps(e)&&(a=a.concat(this.bottomLeft.query(e))),this.bottomRight.bounds.overlaps(e)&&(a=a.concat(this.bottomRight.query(e)))),a=a.filter((h,_)=>a.indexOf(h)>=_),a}clear(){this.items=[],this._isDivided=!1,this.topLeft=null,this.topRight=null,this.bottomLeft=null,this.bottomRight=null}getAllItems(){let e=this.items;return this._isDivided&&(e=e.concat(this.topLeft.getAllItems()),e=e.concat(this.topRight.getAllItems()),e=e.concat(this.bottomLeft.getAllItems()),e=e.concat(this.bottomRight.getAllItems())),e=e.filter((a,h)=>e.indexOf(a)>=h),e}getTreeDepth(){return this._isDivided?1+Math.max(this.topLeft.getTreeDepth(),this.topRight.getTreeDepth(),this.bottomLeft.getTreeDepth(),this.bottomRight.getTreeDepth()):0}debug(e){this.bounds.draw(e,Gt.Yellow),this._isDivided&&(this.topLeft.bounds.draw(e,Gt.Yellow),this.topRight.bounds.draw(e,Gt.Yellow),this.bottomLeft.bounds.draw(e,Gt.Yellow),this.bottomRight.bounds.draw(e,Gt.Yellow))}}function fm(ut){return!!ut._initialize}function pm(ut){return!!ut.onInitialize}function gm(ut){return!!ut._preupdate}function mm(ut){return!!ut.onPreUpdate}function _m(ut){return!!ut.onPostUpdate}function vm(ut){return!!ut.onPostUpdate}function ym(ut){return!!ut.onPreDraw}function wm(ut){return!!ut.onPostDraw}class bm{constructor(e,a=Gt.Magenta,h=!1){this.path=e,this.color=a,this._stream=null,this._gif=null,this._textures=[],this._animation=null,this._transparentColor=null,this._resource=new Jn(e,"arraybuffer",h),this._transparentColor=a}get bustCache(){return this._resource.bustCache}set bustCache(e){this._resource.bustCache=e}async load(){const e=await this._resource.load();this._stream=new Hp(e),this._gif=new Up(this._stream,this._transparentColor);const a=this._gif.images.map(h=>new An(h.src,!1));return await Promise.all(a.map(h=>h.load())),this.data=this._textures=a}isLoaded(){return!!this.data}toSprite(e=0){return this._textures[e].toSprite()}toSpriteSheet(){const e=this._textures.map(a=>a.toSprite());return new Wn({sprites:e})}toAnimation(e){const a=this.toSpriteSheet(),h=a.sprites.length;return this._animation=ps.fromSpriteSheet(a,Dt(0,h),e),this._animation}get readCheckBytes(){return this._gif.checkBytes}}const Qu=ut=>ut.reduce(function(e,a){return e*2+a},0),fp=ut=>{const e=[];for(let a=7;a>=0;a--)e.push(!!(ut&1<<a));return e};class Hp{constructor(e){if(this.data=null,this.len=0,this.position=0,this.readByte=()=>{if(this.position>=this.data.byteLength)throw new Error("Attempted to read past end of stream.");return this.data[this.position++]},this.readBytes=a=>{const h=[];for(let _=0;_<a;_++)h.push(this.readByte());return h},this.read=a=>{let h="";for(let _=0;_<a;_++)h+=String.fromCharCode(this.readByte());return h},this.readUnsigned=()=>{const a=this.readBytes(2);return(a[1]<<8)+a[0]},this.data=new Uint8Array(e),this.len=this.data.byteLength,this.len===0)throw new Error("No data loaded from file")}}const xm=function(ut,e){let a=0;const h=function(en){let an=0;for(let un=0;un<en;un++)e.charCodeAt(a>>3)&1<<(a&7)&&(an|=1<<un),a++;return an},_=[],lt=1<<ut,ft=lt+1;let mt=ut+1,kt=[];const Rt=function(){kt=[],mt=ut+1;for(let en=0;en<lt;en++)kt[en]=[en];kt[lt]=[],kt[ft]=null};let Mt,Nt;for(;;){if(Nt=Mt,Mt=h(mt),Mt===lt){Rt();continue}if(Mt===ft)break;if(Mt<kt.length)Nt!==lt&&kt.push(kt[Nt].concat(kt[Mt][0]));else{if(Mt!==kt.length)throw new Error("Invalid LZW code.");kt.push(kt[Nt].concat(kt[Nt][0]))}_.push.apply(_,kt[Mt]),kt.length===1<<mt&&mt<12&&mt++}return _};class Up{constructor(e,a=Gt.Magenta){this._st=null,this._handler={},this._transparentColor=null,this.frames=[],this.images=[],this.globalColorTable=[],this.checkBytes=[],this.parseColorTable=h=>{const _=[];for(let lt=0;lt<h;lt++){const mt="#"+this._st.readBytes(3).map(kt=>{const Rt=kt.toString(16);return Rt.length===1?"0"+Rt:Rt}).join("");_.push(mt)}return _},this.readSubBlocks=()=>{let h,_;_="";do h=this._st.readByte(),_+=this._st.read(h);while(h!==0);return _},this.parseHeader=()=>{const h={sig:null,ver:null,width:null,height:null,colorRes:null,globalColorTableSize:null,gctFlag:null,sorted:null,globalColorTable:[],bgColor:null,pixelAspectRatio:null};if(h.sig=this._st.read(3),h.ver=this._st.read(3),h.sig!=="GIF")throw new Error("Not a GIF file.");h.width=this._st.readUnsigned(),h.height=this._st.readUnsigned();const _=fp(this._st.readByte());h.gctFlag=_.shift(),h.colorRes=Qu(_.splice(0,3)),h.sorted=_.shift(),h.globalColorTableSize=Qu(_.splice(0,3)),h.bgColor=this._st.readByte(),h.pixelAspectRatio=this._st.readByte(),h.gctFlag&&(h.globalColorTable=this.parseColorTable(1<<h.globalColorTableSize+1),this.globalColorTable=h.globalColorTable),this._handler.hdr&&this._handler.hdr(h)&&this.checkBytes.push(this._handler.hdr)},this.parseExt=h=>{const _=Rt=>{this.checkBytes.push(this._st.readByte());const Mt=fp(this._st.readByte());Rt.reserved=Mt.splice(0,3),Rt.disposalMethod=Qu(Mt.splice(0,3)),Rt.userInput=Mt.shift(),Rt.transparencyGiven=Mt.shift(),Rt.delayTime=this._st.readUnsigned(),Rt.transparencyIndex=this._st.readByte(),Rt.terminator=this._st.readByte(),this._handler.gce&&this._handler.gce(Rt)&&this.checkBytes.push(this._handler.gce)},lt=Rt=>{Rt.comment=this.readSubBlocks(),this._handler.com&&this._handler.com(Rt)&&this.checkBytes.push(this._handler.com)},ft=Rt=>{this.checkBytes.push(this._st.readByte()),Rt.ptHeader=this._st.readBytes(12),Rt.ptData=this.readSubBlocks(),this._handler.pte&&this._handler.pte(Rt)&&this.checkBytes.push(this._handler.pte)},mt=Rt=>{const Mt=en=>{this.checkBytes.push(this._st.readByte()),en.unknown=this._st.readByte(),en.iterations=this._st.readUnsigned(),en.terminator=this._st.readByte(),this._handler.app&&this._handler.app.NETSCAPE&&this._handler.app.NETSCAPE(en)&&this.checkBytes.push(this._handler.app)},Nt=en=>{en.appData=this.readSubBlocks(),this._handler.app&&this._handler.app[en.identifier]&&this._handler.app[en.identifier](en)&&this.checkBytes.push(this._handler.app[en.identifier])};switch(this.checkBytes.push(this._st.readByte()),Rt.identifier=this._st.read(8),Rt.authCode=this._st.read(3),Rt.identifier){case"NETSCAPE":Mt(Rt);break;default:Nt(Rt);break}},kt=Rt=>{Rt.data=this.readSubBlocks(),this._handler.unknown&&this._handler.unknown(Rt)&&this.checkBytes.push(this._handler.unknown)};switch(h.label=this._st.readByte(),h.label){case 249:h.extType="gce",_(h);break;case 254:h.extType="com",lt(h);break;case 1:h.extType="pte",ft(h);break;case 255:h.extType="app",mt(h);break;default:h.extType="unknown",kt(h);break}},this.parseImg=h=>{const _=(mt,kt)=>{const Rt=new Array(mt.length),Mt=mt.length/kt,Nt=(wn,Bn)=>{const fn=mt.slice(Bn*kt,(Bn+1)*kt);Rt.splice.apply(Rt,[wn*kt,kt].concat(fn))},en=[0,4,2,1],an=[8,8,4,2];let un=0;for(let wn=0;wn<4;wn++)for(let Bn=en[wn];Bn<Mt;Bn+=an[wn])Nt(Bn,un),un++;return Rt};h.leftPos=this._st.readUnsigned(),h.topPos=this._st.readUnsigned(),h.width=this._st.readUnsigned(),h.height=this._st.readUnsigned();const lt=fp(this._st.readByte());h.lctFlag=lt.shift(),h.interlaced=lt.shift(),h.sorted=lt.shift(),h.reserved=lt.splice(0,2),h.lctSize=Qu(lt.splice(0,3)),h.lctFlag&&(h.lct=this.parseColorTable(1<<h.lctSize+1)),h.lzwMinCodeSize=this._st.readByte();const ft=this.readSubBlocks();h.pixels=xm(h.lzwMinCodeSize,ft),h.interlaced&&(h.pixels=_(h.pixels,h.width)),this.frames.push(h),this.arrayToImage(h),this._handler.img&&this._handler.img(h)&&this.checkBytes.push(this._handler)},this.parseBlock=()=>{const h={sentinel:this._st.readByte(),type:""};switch(String.fromCharCode(h.sentinel)){case"!":h.type="ext",this.parseExt(h);break;case",":h.type="img",this.parseImg(h);break;case";":h.type="eof",this._handler.eof&&this._handler.eof(h)&&this.checkBytes.push(this._handler.eof);break;default:throw new Error("Unknown block: 0x"+h.sentinel.toString(16))}h.type!=="eof"&&this.parseBlock()},this.arrayToImage=h=>{let _=0;const lt=document.createElement("canvas");lt.id=_.toString(),lt.width=h.width,lt.height=h.height,_++;const ft=lt.getContext("2d"),mt=1;let kt=0,Rt=0;for(let Nt=0;Nt<h.pixels.length;Nt++)Rt%h.width===0&&(kt++,Rt=0),this.globalColorTable[h.pixels[Nt]]===this._transparentColor.toHex()?ft.fillStyle="rgba(0, 0, 0, 0)":ft.fillStyle=this.globalColorTable[h.pixels[Nt]],ft.fillRect(Rt,kt,mt,mt),Rt++;const Mt=new Image;Mt.src=lt.toDataURL(),this.images.push(Mt)},this._st=e,this._handler={},this._transparentColor=a,this.parseHeader(),this.parseBlock()}}class Am{constructor(e,a,{bustCache:h,..._}={}){this.path=e,this.family=a,this._isLoaded=!1,this._resource=new Jn(e,"blob",h),this._options=_}async load(){if(this.isLoaded())return this.data;try{const e=await this._resource.load(),a=URL.createObjectURL(e);this.data||(this.data=new FontFace(this.family,`url(${a})`),document.fonts.add(this.data)),await this.data.load(),this._isLoaded=!0}catch(e){throw`Error loading FontSource from path '${this.path}' with error [${e.message}]`}return this.data}isLoaded(){return this._isLoaded}toFont(e){return new qs({family:this.family,...this._options,...e})}}const Cm=/^\s*(?:function)?\*/;function Wp(ut){return typeof ut!="function"?!1:Cm.test(Function.prototype.toString.call(ut))?!0:Object.getPrototypeOf?Object.getPrototypeOf(ut)===Object.getPrototypeOf(new Function("return function * () {}")()):!1}function Zp(...ut){let e,a,h,_;Wp(ut[0])&&(a=globalThis,e=ut[0],h=ut[1]),Wp(ut[1])&&(a=ut[0],e=ut[1],h=ut[2]),ut[1]instanceof ls&&(a=ut[0],_=ut[1],e=ut[2],h=ut[3]),ut[0]instanceof ls&&(a=globalThis,_=ut[0],e=ut[1],h=ut[2]);const lt=h?.timing;let ft;try{ft=_??ls.useEngine()}catch{throw Error(`Cannot run coroutine without engine parameter outside of an excalibur lifecycle method.
Pass an engine parameter to ex.coroutine(engine, function * {...})`)}const mt=e.bind(a);return new Promise((kt,Rt)=>{const Mt=mt(),Nt=en=>{try{const{done:an,value:un}=Mt.next(en);an&&kt(),un instanceof Promise?un.then(()=>{ft.clock.schedule(Nt,0,lt)}):un===void 0||un===void 0?ft.clock.schedule(Nt,0,lt):ft.clock.schedule(Nt,un||0,lt)}catch(an){Rt(an)}};Nt(ft.clock.elapsed())})}class pp extends jo{get progress(){return this._currentProgress}get complete(){return this.direction==="out"?this.progress>=1:this.progress<=0}constructor(e){var a,h,_,lt;super(),this._logger=Vt.getInstance(),this.transform=new hr,this.graphics=new Do,this._completeFuture=new pt,this.started=!1,this._currentDistance=0,this._currentProgress=0,this.done=this._completeFuture.promise,this.name=`Transition#${this.id}`,this.duration=e.duration,this.easing=(a=e.easing)!==null&&a!==void 0?a:vo.Linear,this.direction=(h=e.direction)!==null&&h!==void 0?h:"out",this.hideLoader=(_=e.hideLoader)!==null&&_!==void 0?_:!1,this.blockInput=(lt=e.blockInput)!==null&&lt!==void 0?lt:!1,this.transform.coordPlane=vr.Screen,this.transform.pos=At.Zero,this.transform.z=1/0,this.graphics.anchor=At.Zero,this.addComponent(this.transform),this.addComponent(this.graphics),this.direction==="out"?this._currentProgress=0:this._currentProgress=1}updateTransition(e,a){this.complete||(this._currentDistance+=Pt(a/this.duration,0,1),this._currentDistance>=1&&(this._currentDistance=1),this.direction==="out"?this._currentProgress=Pt(this.easing(this._currentDistance,0,1,1),0,1):this._currentProgress=Pt(this.easing(this._currentDistance,1,0,1),0,1))}async onPreviousSceneDeactivate(e){}onStart(e){}onUpdate(e){}onEnd(e){}onReset(){}reset(){this.started=!1,this._completeFuture=new pt,this.done=this._completeFuture.promise,this._currentDistance=0,this.direction==="out"?this._currentProgress=0:this._currentProgress=1,this.onReset()}play(e,a){this.started&&(this.reset(),this._logger.warn(`Attempted to play a transition ${this.name} that is already playing, reset transition.`)),(a??e.currentScene).add(this);const _=this;return Zp(e,function*(){for(;!_.complete;){const lt=yield;_.updateTransition(e,lt),_.execute()}})}execute(){this.isInitialized&&(this.started||(this.started=!0,this.onStart(this.progress)),this.onUpdate(this.progress),this.complete&&!this._completeFuture.isCompleted&&(this.onEnd(this.progress),this._completeFuture.resolve()))}}class km extends pp{constructor(e){var a,h;super({...e,duration:(a=e.duration)!==null&&a!==void 0?a:2e3}),this.name=`FadeInOut#${this.id}`,this.color=(h=e.color)!==null&&h!==void 0?h:Gt.Black}onInitialize(e){this.transform.pos=e.screen.unsafeArea.topLeft,this.screenCover=new zl({width:e.screen.resolution.width,height:e.screen.resolution.height,color:this.color}),this.graphics.add(this.screenCover),this.graphics.opacity=this.progress}onReset(){this.graphics.opacity=this.progress}onStart(e){this.graphics.opacity=e}onEnd(e){this.graphics.opacity=e}onUpdate(e){this.graphics.opacity=e}}class Sm extends pp{constructor(e){super({direction:"in",...e}),this.name=`CrossFade#${this.id}`}async onPreviousSceneDeactivate(e){this.image=await e.engine.screenshot(!0),await this.image.decode()}onInitialize(e){this.engine=e,this.transform.pos=e.screen.unsafeArea.topLeft,this.screenCover=An.fromHtmlImageElement(this.image).toSprite(),this.graphics.add(this.screenCover),this.transform.scale=It(1/e.screen.pixelRatio,1/e.screen.pixelRatio),this.graphics.opacity=this.progress}onStart(e){this.graphics.opacity=this.progress}onReset(){this.graphics.opacity=this.progress}onEnd(e){this.graphics.opacity=e}onUpdate(e){this.graphics.opacity=e}}class gp extends cn{constructor(e){super(),this.color=Gt.Black,this.thickness=1;const{start:a,end:h,color:_,thickness:lt}=e;this.start=a,this.end=h,this.color=_??this.color,this.thickness=lt??this.thickness,this._localBounds=this._calculateBounds();const{width:ft,height:mt}=this._localBounds;this.width=ft,this.height=mt}get localBounds(){return this._localBounds}_calculateBounds(){const e=this.end.sub(this.start).normal(),a=this.thickness/2,h=[this.start.add(e.scale(a)),this.end.add(e.scale(a)),this.end.add(e.scale(-a)),this.start.add(e.scale(-a))];return Wt.fromPoints(h)}_drawImage(e,a,h){e.drawLine(this.start,this.end,this.color,this.thickness)}clone(){return new gp({start:this.start,end:this.end,color:this.color,thickness:this.thickness})}}class mp extends no{get points(){return this._points}set points(e){this._points=e;const a=this.minPoint;this.width=this._points.reduce((h,_)=>Math.max(_.x,h),0)-a.x,this.height=this._points.reduce((h,_)=>Math.max(_.y,h),0)-a.y,this.flagDirty()}get minPoint(){const e=this._points.reduce((h,_)=>Math.min(_.x,h),1/0),a=this._points.reduce((h,_)=>Math.min(_.y,h),1/0);return It(e,a)}constructor(e){super(e),this.points=e.points,this.filtering=En.Blended,this.rasterize()}clone(){return new mp({points:this.points.map(e=>e.clone()),...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(e){if(this.points&&this.points.length){e.beginPath();const a=this.minPoint.negate(),h=this.points[0].add(a);e.moveTo(h.x,h.y),this.points.forEach(_=>{e.lineTo(_.x+a.x,_.y+a.y)}),e.lineTo(h.x,h.y),e.closePath(),this.color&&e.fill(),this.strokeColor&&e.stroke()}}}const Gp=5,vu={},Em=()=>{for(const ut in vu)vu[ut]=0},Ku=(ut,e)=>{const a=ot.isEnabled("suppress-obsolete-message");vu[ut]<Gp&&!a&&(Vt.getInstance().warn(ut),console.trace&&e.showStackTrace&&console.trace()),vu[ut]++};function Tm(ut){return ut={message:"This feature will be removed in future versions of Excalibur.",alternateMethod:null,showStackTrace:!1,...ut},function(e,a,h){if(h&&!(typeof h.value=="function"||typeof h.get=="function"||typeof h.set=="function"))throw new SyntaxError("Only classes/functions/getters/setters can be marked as obsolete");const lt=`${`${e.name||""}${e.name&&a?".":""}${a||""}`} is marked obsolete: ${ut.message}`+(ut.alternateMethod?` Use ${ut.alternateMethod} instead`:"");vu[lt]||(vu[lt]=0);const ft=h?{...h}:e;if(!h){class mt extends ft{constructor(...Rt){Ku(lt,ut),super(...Rt)}}return mt}return h&&h.value?(ft.value=function(){return Ku(lt,ut),h.value.apply(this,arguments)},ft):(h&&h.get&&(ft.get=function(){return Ku(lt,ut),h.get.apply(this,arguments)}),h&&h.set&&(ft.set=function(){return Ku(lt,ut),h.set.apply(this,arguments)}),ft)}}class Pm{constructor(){this._queue=[]}get length(){return this._queue.length}enqueue(){const e=new pt;return this._queue.push(e),e.promise}dequeue(e){this._queue.shift().resolve(e)}}class Rm{constructor(e){this._count=e,this._waitQueue=new Pm}get count(){return this._count}get waiting(){return this._waitQueue.length}async enter(){return this._count!==0?(this._count--,Promise.resolve()):this._waitQueue.enqueue()}exit(e=1){if(e!==0){for(;e!==0&&this._waitQueue.length!==0;)this._waitQueue.dequeue(null),e--;this._count+=e}}}const _p="0.29.3";$()})();__webpack_exports__.eKr;__webpack_exports__.yVm;__webpack_exports__.a7j;__webpack_exports__.U_w;__webpack_exports__.JF2;__webpack_exports__.htg;__webpack_exports__.HXL;__webpack_exports__.mcg;var __webpack_exports__Actor=__webpack_exports__.Agj;__webpack_exports__.u6S;__webpack_exports__.x7M;__webpack_exports__.X55;__webpack_exports__.m3M;__webpack_exports__.aE5;__webpack_exports__.YJU;__webpack_exports__.eZi;__webpack_exports__.GNv;__webpack_exports__.Y56;__webpack_exports__._0v;__webpack_exports__.vhs;__webpack_exports__.Z8b;__webpack_exports__.Yfw;var __webpack_exports__BoundingBox=__webpack_exports__.IcQ;__webpack_exports__.Rl2;__webpack_exports__.kgJ;__webpack_exports__.GTT;__webpack_exports__.ypY;__webpack_exports__.i7d;__webpack_exports__.fQ3;__webpack_exports__.HlI;__webpack_exports__.jlt;__webpack_exports__.VQc;__webpack_exports__.zD7;__webpack_exports__.I0I;__webpack_exports__.AUF;__webpack_exports__.JoF;__webpack_exports__.MlA;__webpack_exports__.PZh;__webpack_exports__.qA;__webpack_exports__.CrD;__webpack_exports__.dQK;__webpack_exports__.D3r;__webpack_exports__.Qpo;__webpack_exports__.D9n;__webpack_exports__.b6v;__webpack_exports__.mvh;__webpack_exports__.Bpo;var __webpack_exports__Color=__webpack_exports__.Q1f;__webpack_exports__.IKv;__webpack_exports__.fcV;__webpack_exports__.Glf;__webpack_exports__.uAl;__webpack_exports__.ElT;__webpack_exports__.MPu;__webpack_exports__.Z8r;__webpack_exports__.QSL;__webpack_exports__.sPV;__webpack_exports__.nAn;__webpack_exports__.zCU;__webpack_exports__.QrV;__webpack_exports__.fF9;__webpack_exports__.xI8;__webpack_exports__.yar;__webpack_exports__.SP7;__webpack_exports__.oRy;__webpack_exports__.f5X;__webpack_exports__.V1c;__webpack_exports__.Mlx;var __webpack_exports__DefaultLoader=__webpack_exports__.ZCo;__webpack_exports__.Vy3;__webpack_exports__.J5p;__webpack_exports__.mL_;__webpack_exports__.Guw;__webpack_exports__.VKx;__webpack_exports__.N5j;__webpack_exports__.pgY;__webpack_exports__.OP3;__webpack_exports__.rl5;__webpack_exports__.eod;var __webpack_exports__DisplayMode=__webpack_exports__.q5Z;__webpack_exports__.YUC;__webpack_exports__.saR;__webpack_exports__.hvr;__webpack_exports__.Qol;__webpack_exports__.Wf4;__webpack_exports__.JCs;__webpack_exports__.gJV;__webpack_exports__.fWD;__webpack_exports__.Va_;var __webpack_exports__Engine=__webpack_exports__.N$8;__webpack_exports__._jQ;__webpack_exports__.rxj;__webpack_exports__.rhv;__webpack_exports__.wCu;__webpack_exports__.HAp;__webpack_exports__.Zy1;__webpack_exports__.Qev;__webpack_exports__.bkB;__webpack_exports__.wfL;__webpack_exports__.sVA;__webpack_exports__.$Gs;__webpack_exports__.CJ0;__webpack_exports__.NWh;__webpack_exports__.tWi;__webpack_exports__.xAj;__webpack_exports__.zWh;__webpack_exports__.i_4;__webpack_exports__.iIx;__webpack_exports__.c9e;__webpack_exports__.KQV;__webpack_exports__.weH;__webpack_exports__.jXp;__webpack_exports__.zzY;__webpack_exports__.yRQ;__webpack_exports__.MtE;__webpack_exports__.rPj;__webpack_exports__.KLc;__webpack_exports__.Fir;__webpack_exports__.V5f;__webpack_exports__.Xj7;__webpack_exports__.Wud;__webpack_exports__.FVg;__webpack_exports__.g5Y;__webpack_exports__.YQB;__webpack_exports__.KPb;__webpack_exports__.nHK;__webpack_exports__.TX_;__webpack_exports__.r3n;__webpack_exports__.vYh;__webpack_exports__.hnk;__webpack_exports__.D2R;__webpack_exports__.n1o;__webpack_exports__.RLG;__webpack_exports__.fBU;__webpack_exports__.Adb;var __webpack_exports__ImageSource=__webpack_exports__.bEs;__webpack_exports__.wCy;__webpack_exports__.CbD;__webpack_exports__.x_C;__webpack_exports__.pde;__webpack_exports__.pGf;__webpack_exports__.ibQ;__webpack_exports__.QlN;__webpack_exports__.shR;__webpack_exports__.Yjk;__webpack_exports__._u1;__webpack_exports__.OBI;__webpack_exports__.klh;__webpack_exports__.s3S;__webpack_exports__.D$R;__webpack_exports__.xth;__webpack_exports__.JU7;__webpack_exports__.h9x;__webpack_exports__.N1A;__webpack_exports__.e_k;__webpack_exports__.aHM;__webpack_exports__.tlv;__webpack_exports__.Vi9;__webpack_exports__.ieR;__webpack_exports__.$bb;__webpack_exports__.VyI;__webpack_exports__.imn;__webpack_exports__.uqu;__webpack_exports__.QnL;__webpack_exports__.vnc;__webpack_exports__.wk_;__webpack_exports__.GH0;__webpack_exports__._1r;__webpack_exports__.l0X;__webpack_exports__.HHX;__webpack_exports__.tjk;__webpack_exports__.rWe;__webpack_exports__.j9l;__webpack_exports__.NVp;__webpack_exports__.cPK;__webpack_exports__.XoL;__webpack_exports__.RmF;__webpack_exports__.DXI;__webpack_exports__.tCD;__webpack_exports__.oGn;__webpack_exports__.J3D;__webpack_exports__.vCJ;__webpack_exports__.f9l;__webpack_exports__.AQx;__webpack_exports__.v9m;__webpack_exports__.yRJ;__webpack_exports__.EU6;__webpack_exports__.m3O;__webpack_exports__.Ryz;__webpack_exports__.OxP;__webpack_exports__.LEs;var __webpack_exports__PointerScope=__webpack_exports__.Ec;__webpack_exports__.Pi5;__webpack_exports__.gmH;__webpack_exports__.tS;__webpack_exports__.XxX;__webpack_exports__.bCz;__webpack_exports__.nYS;__webpack_exports__.yiT;__webpack_exports__.NHl;__webpack_exports__.mO8;__webpack_exports__.PXI;__webpack_exports__.bn5;__webpack_exports__.Ywr;__webpack_exports__.cMd;__webpack_exports__.Bs6;__webpack_exports__.G0k;__webpack_exports__.pyn;__webpack_exports__.QeM;__webpack_exports__.aPX;__webpack_exports__.ITP;__webpack_exports__.BY0;__webpack_exports__.MFw;__webpack_exports__.sBn;__webpack_exports__.S3L;__webpack_exports__.XKQ;__webpack_exports__.ESI;__webpack_exports__.uxz;__webpack_exports__.o8N;__webpack_exports__.u_r;__webpack_exports__.RlV;__webpack_exports__.gVA;__webpack_exports__.M_G;__webpack_exports__.GRB;__webpack_exports__.kM6;__webpack_exports__.dO8;__webpack_exports__.jgM;__webpack_exports__.FWq;__webpack_exports__.s3j;__webpack_exports__.hlw;__webpack_exports__.B7e;__webpack_exports__.H_X;__webpack_exports__.S_d;__webpack_exports__.U7E;__webpack_exports__.Z58;__webpack_exports__.yh2;__webpack_exports__.ff$;__webpack_exports__.cWi;__webpack_exports__.NBt;__webpack_exports__.oNz;__webpack_exports__.QlU;__webpack_exports__.Xey;__webpack_exports__.jft;__webpack_exports__.Mtr;__webpack_exports__.ypk;__webpack_exports__.mnM;__webpack_exports__.bAZ;__webpack_exports__.ABN;__webpack_exports__.VK6;__webpack_exports__.kxk;__webpack_exports__.DT1;__webpack_exports__.FLG;__webpack_exports__.qN_;__webpack_exports__.Z37;__webpack_exports__.FtL;__webpack_exports__.Z6X;__webpack_exports__.iQT;__webpack_exports__.ziO;__webpack_exports__.OEF;__webpack_exports__.uuE;__webpack_exports__.tiv;__webpack_exports__.T$Y;__webpack_exports__.EYj;__webpack_exports__.nOB;__webpack_exports__.Tap;__webpack_exports__.FAs;__webpack_exports__.B_P;__webpack_exports__.aA5;__webpack_exports__.M4G;__webpack_exports__.l$l;__webpack_exports__.dLy;__webpack_exports__.WZP;__webpack_exports__.eB6;__webpack_exports__.nFK;__webpack_exports__.l9z;__webpack_exports__.YOF;__webpack_exports__.yhB;__webpack_exports__.J0N;var __webpack_exports__Vector=__webpack_exports__.Miz;__webpack_exports__.Bj4;__webpack_exports__.Rcs;__webpack_exports__.vJ4;__webpack_exports__.TqC;__webpack_exports__.nM0;__webpack_exports__.X1u;__webpack_exports__.SpZ;__webpack_exports__.DX8;__webpack_exports__.Yx$;__webpack_exports__.HK4;__webpack_exports__.SE$;__webpack_exports__.qE8;__webpack_exports__.Pz7;__webpack_exports__.sX_;__webpack_exports__.JuI;__webpack_exports__.Nl$;__webpack_exports__.OwT;__webpack_exports__.P$G;__webpack_exports__.mHV;__webpack_exports__.Fx_;__webpack_exports__.WFC;__webpack_exports__.aDq;__webpack_exports__.jIg;__webpack_exports__.UH3;__webpack_exports__.K6X;__webpack_exports__.C1Y;__webpack_exports__.Aw1;__webpack_exports__.A8$;__webpack_exports__.hsx;__webpack_exports__.l9E;__webpack_exports__.aSf;__webpack_exports__.Zex;__webpack_exports__.mXP;__webpack_exports__.vt$;__webpack_exports__.hCA;__webpack_exports__.pjR;__webpack_exports__.U43;__webpack_exports__.pSZ;__webpack_exports__.y17;__webpack_exports__.jVr;__webpack_exports__._SZ;__webpack_exports__.xWn;__webpack_exports__.ehJ;var __webpack_exports__vec=__webpack_exports__.t6s;__webpack_exports__.Eyn;const vikingsMap="/tma_research/assets/vikings_map-bJEEirLb.png",palace$1="/tma_research/assets/Palace-Yimqvl4a.png";class MyLoader extends __webpack_exports__DefaultLoader{}const Resources={MapSprite:new __webpack_exports__ImageSource(vikingsMap,!1),Palace:new __webpack_exports__ImageSource(palace$1,!1)},loader=new MyLoader;for(const i of Object.values(Resources))loader.addResource(i);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function s(Qt,Xt){var on=Qt.length;Qt.push(Xt);t:for(;0<on;){var sn=on-1>>>1,bn=Qt[sn];if(0<j(bn,Xt))Qt[sn]=Xt,Qt[on]=bn,on=sn;else break t}}function o(Qt){return Qt.length===0?null:Qt[0]}function d(Qt){if(Qt.length===0)return null;var Xt=Qt[0],on=Qt.pop();if(on!==Xt){Qt[0]=on;t:for(var sn=0,bn=Qt.length,Zn=bn>>>1;sn<Zn;){var Rn=2*(sn+1)-1,vn=Qt[Rn],yn=Rn+1,Ln=Qt[yn];if(0>j(vn,on))yn<bn&&0>j(Ln,vn)?(Qt[sn]=Ln,Qt[yn]=on,sn=yn):(Qt[sn]=vn,Qt[Rn]=on,sn=Rn);else if(yn<bn&&0>j(Ln,on))Qt[sn]=Ln,Qt[yn]=on,sn=yn;else break t}}return Xt}function j(Qt,Xt){var on=Qt.sortIndex-Xt.sortIndex;return on!==0?on:Qt.id-Xt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var $=performance;i.unstable_now=function(){return $.now()}}else{var ot=Date,ht=ot.now();i.unstable_now=function(){return ot.now()-ht}}var pt=[],dt=[],gt=1,wt=null,bt=3,St=!1,Ct=!1,Et=!1,Pt=typeof setTimeout=="function"?setTimeout:null,_t=typeof clearTimeout=="function"?clearTimeout:null,yt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function xt(Qt){for(var Xt=o(dt);Xt!==null;){if(Xt.callback===null)d(dt);else if(Xt.startTime<=Qt)d(dt),Xt.sortIndex=Xt.expirationTime,s(pt,Xt);else break;Xt=o(dt)}}function Dt(Qt){if(Et=!1,xt(Qt),!Ct)if(o(pt)!==null)Ct=!0,Wt(Ot);else{var Xt=o(dt);Xt!==null&&ln(Dt,Xt.startTime-Qt)}}function Ot(Qt,Xt){Ct=!1,Et&&(Et=!1,_t(It),It=-1),St=!0;var on=bt;try{for(xt(Xt),wt=o(pt);wt!==null&&(!(wt.expirationTime>Xt)||Qt&&!nn());){var sn=wt.callback;if(typeof sn=="function"){wt.callback=null,bt=wt.priorityLevel;var bn=sn(wt.expirationTime<=Xt);Xt=i.unstable_now(),typeof bn=="function"?wt.callback=bn:wt===o(pt)&&d(pt),xt(Xt)}else d(pt);wt=o(pt)}if(wt!==null)var Zn=!0;else{var Rn=o(dt);Rn!==null&&ln(Dt,Rn.startTime-Xt),Zn=!1}return Zn}finally{wt=null,bt=on,St=!1}}var Bt=!1,At=null,It=-1,Gt=5,Jt=-1;function nn(){return!(i.unstable_now()-Jt<Gt)}function Vt(){if(At!==null){var Qt=i.unstable_now();Jt=Qt;var Xt=!0;try{Xt=At(!0,Qt)}finally{Xt?Ut():(Bt=!1,At=null)}}else Bt=!1}var Ut;if(typeof yt=="function")Ut=function(){yt(Vt)};else if(typeof MessageChannel<"u"){var Ht=new MessageChannel,jt=Ht.port2;Ht.port1.onmessage=Vt,Ut=function(){jt.postMessage(null)}}else Ut=function(){Pt(Vt,0)};function Wt(Qt){At=Qt,Bt||(Bt=!0,Ut())}function ln(Qt,Xt){It=Pt(function(){Qt(i.unstable_now())},Xt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Qt){Qt.callback=null},i.unstable_continueExecution=function(){Ct||St||(Ct=!0,Wt(Ot))},i.unstable_forceFrameRate=function(Qt){0>Qt||125<Qt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Gt=0<Qt?Math.floor(1e3/Qt):5},i.unstable_getCurrentPriorityLevel=function(){return bt},i.unstable_getFirstCallbackNode=function(){return o(pt)},i.unstable_next=function(Qt){switch(bt){case 1:case 2:case 3:var Xt=3;break;default:Xt=bt}var on=bt;bt=Xt;try{return Qt()}finally{bt=on}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Qt,Xt){switch(Qt){case 1:case 2:case 3:case 4:case 5:break;default:Qt=3}var on=bt;bt=Qt;try{return Xt()}finally{bt=on}},i.unstable_scheduleCallback=function(Qt,Xt,on){var sn=i.unstable_now();switch(typeof on=="object"&&on!==null?(on=on.delay,on=typeof on=="number"&&0<on?sn+on:sn):on=sn,Qt){case 1:var bn=-1;break;case 2:bn=250;break;case 5:bn=1073741823;break;case 4:bn=1e4;break;default:bn=5e3}return bn=on+bn,Qt={id:gt++,callback:Xt,priorityLevel:Qt,startTime:on,expirationTime:bn,sortIndex:-1},on>sn?(Qt.sortIndex=on,s(dt,Qt),o(pt)===null&&Qt===o(dt)&&(Et?(_t(It),It=-1):Et=!0,ln(Dt,on-sn))):(Qt.sortIndex=bn,s(pt,Qt),Ct||St||(Ct=!0,Wt(Ot))),Qt},i.unstable_shouldYield=nn,i.unstable_wrapCallback=function(Qt){var Xt=bt;return function(){var on=bt;bt=Xt;try{return Qt.apply(this,arguments)}finally{bt=on}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(i){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+i,o=1;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(i,s){ha(i,s),ha(i+"Capture",s)}function ha(i,s){for(ea[i]=s,i=0;i<s.length;i++)da.add(s[i])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(i){return ja.call(ma,i)?!0:ja.call(la,i)?!1:ka.test(i)?ma[i]=!0:(la[i]=!0,!1)}function pa(i,s,o,d){if(o!==null&&o.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:o!==null?!o.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function qa(i,s,o,d){if(s===null||typeof s>"u"||pa(i,s,o,d))return!0;if(d)return!1;if(o!==null)switch(o.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function v(i,s,o,d,j,$,ot){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=j,this.mustUseProperty=o,this.propertyName=i,this.type=s,this.sanitizeURL=$,this.removeEmptyString=ot}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){z$1[i]=new v(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var s=i[0];z$1[s]=new v(s,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){z$1[i]=new v(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){z$1[i]=new v(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){z$1[i]=new v(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){z$1[i]=new v(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){z$1[i]=new v(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){z$1[i]=new v(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){z$1[i]=new v(i,5,!1,i.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var s=i.replace(ra,sa);z$1[s]=new v(s,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var s=i.replace(ra,sa);z$1[s]=new v(s,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var s=i.replace(ra,sa);z$1[s]=new v(s,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){z$1[i]=new v(i,1,!1,i.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){z$1[i]=new v(i,1,!1,i.toLowerCase(),null,!0,!0)});function ta(i,s,o,d){var j=z$1.hasOwnProperty(s)?z$1[s]:null;(j!==null?j.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(qa(s,o,j,d)&&(o=null),d||j===null?oa(s)&&(o===null?i.removeAttribute(s):i.setAttribute(s,""+o)):j.mustUseProperty?i[j.propertyName]=o===null?j.type===3?!1:"":o:(s=j.attributeName,d=j.attributeNamespace,o===null?i.removeAttribute(s):(j=j.type,o=j===3||j===4&&o===!0?"":""+o,d?i.setAttributeNS(d,s,o):i.setAttribute(s,o))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(i){return i===null||typeof i!="object"?null:(i=Ja&&i[Ja]||i["@@iterator"],typeof i=="function"?i:null)}var A$1=Object.assign,La;function Ma(i){if(La===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);La=s&&s[1]||""}return`
`+La+i}var Na=!1;function Oa(i,s){if(!i||Na)return"";Na=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(dt){var d=dt}Reflect.construct(i,[],s)}else{try{s.call()}catch(dt){d=dt}i.call(s.prototype)}else{try{throw Error()}catch(dt){d=dt}i()}}catch(dt){if(dt&&d&&typeof dt.stack=="string"){for(var j=dt.stack.split(`
`),$=d.stack.split(`
`),ot=j.length-1,ht=$.length-1;1<=ot&&0<=ht&&j[ot]!==$[ht];)ht--;for(;1<=ot&&0<=ht;ot--,ht--)if(j[ot]!==$[ht]){if(ot!==1||ht!==1)do if(ot--,ht--,0>ht||j[ot]!==$[ht]){var pt=`
`+j[ot].replace(" at new "," at ");return i.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",i.displayName)),pt}while(1<=ot&&0<=ht);break}}}finally{Na=!1,Error.prepareStackTrace=o}return(i=i?i.displayName||i.name:"")?Ma(i):""}function Pa(i){switch(i.tag){case 5:return Ma(i.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return i=Oa(i.type,!1),i;case 11:return i=Oa(i.type.render,!1),i;case 1:return i=Oa(i.type,!0),i;default:return""}}function Qa(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Ca:return(i.displayName||"Context")+".Consumer";case Ba:return(i._context.displayName||"Context")+".Provider";case Da:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ga:return s=i.displayName||null,s!==null?s:Qa(i.type)||"Memo";case Ha:s=i._payload,i=i._init;try{return Qa(i(s))}catch{}}return null}function Ra(i){var s=i.type;switch(i.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=s.render,i=i.displayName||i.name||"",s.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(s);case 8:return s===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Sa(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ta(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ua(i){var s=Ta(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),d=""+i[s];if(!i.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var j=o.get,$=o.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return j.call(this)},set:function(ot){d=""+ot,$.call(this,ot)}}),Object.defineProperty(i,s,{enumerable:o.enumerable}),{getValue:function(){return d},setValue:function(ot){d=""+ot},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Va(i){i._valueTracker||(i._valueTracker=Ua(i))}function Wa(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),d="";return i&&(d=Ta(i)?i.checked?"true":"false":i.value),i=d,i!==o?(s.setValue(i),!0):!1}function Xa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ya(i,s){var o=s.checked;return A$1({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??i._wrapperState.initialChecked})}function Za(i,s){var o=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;o=Sa(s.value!=null?s.value:o),i._wrapperState={initialChecked:d,initialValue:o,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ab(i,s){s=s.checked,s!=null&&ta(i,"checked",s,!1)}function bb(i,s){ab(i,s);var o=Sa(s.value),d=s.type;if(o!=null)d==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+o):i.value!==""+o&&(i.value=""+o);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}s.hasOwnProperty("value")?cb(i,s.type,o):s.hasOwnProperty("defaultValue")&&cb(i,s.type,Sa(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(i.defaultChecked=!!s.defaultChecked)}function db(i,s,o){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+i._wrapperState.initialValue,o||s===i.value||(i.value=s),i.defaultValue=s}o=i.name,o!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,o!==""&&(i.name=o)}function cb(i,s,o){(s!=="number"||Xa(i.ownerDocument)!==i)&&(o==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+o&&(i.defaultValue=""+o))}var eb=Array.isArray;function fb(i,s,o,d){if(i=i.options,s){s={};for(var j=0;j<o.length;j++)s["$"+o[j]]=!0;for(o=0;o<i.length;o++)j=s.hasOwnProperty("$"+i[o].value),i[o].selected!==j&&(i[o].selected=j),j&&d&&(i[o].defaultSelected=!0)}else{for(o=""+Sa(o),s=null,j=0;j<i.length;j++){if(i[j].value===o){i[j].selected=!0,d&&(i[j].defaultSelected=!0);return}s!==null||i[j].disabled||(s=i[j])}s!==null&&(s.selected=!0)}}function gb(i,s){if(s.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},s,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function hb(i,s){var o=s.value;if(o==null){if(o=s.children,s=s.defaultValue,o!=null){if(s!=null)throw Error(p$1(92));if(eb(o)){if(1<o.length)throw Error(p$1(93));o=o[0]}s=o}s==null&&(s=""),o=s}i._wrapperState={initialValue:Sa(o)}}function ib(i,s){var o=Sa(s.value),d=Sa(s.defaultValue);o!=null&&(o=""+o,o!==i.value&&(i.value=o),s.defaultValue==null&&i.defaultValue!==o&&(i.defaultValue=o)),d!=null&&(i.defaultValue=""+d)}function jb(i){var s=i.textContent;s===i._wrapperState.initialValue&&s!==""&&s!==null&&(i.value=s)}function kb(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(i,s){return i==null||i==="http://www.w3.org/1999/xhtml"?kb(s):i==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var mb,nb=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,o,d,j){MSApp.execUnsafeLocalFunction(function(){return i(s,o,d,j)})}:i}(function(i,s){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=s;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=mb.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;s.firstChild;)i.appendChild(s.firstChild)}});function ob(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(i){qb.forEach(function(s){s=s+i.charAt(0).toUpperCase()+i.substring(1),pb[s]=pb[i]})});function rb(i,s,o){return s==null||typeof s=="boolean"||s===""?"":o||typeof s!="number"||s===0||pb.hasOwnProperty(i)&&pb[i]?(""+s).trim():s+"px"}function sb(i,s){i=i.style;for(var o in s)if(s.hasOwnProperty(o)){var d=o.indexOf("--")===0,j=rb(o,s[o],d);o==="float"&&(o="cssFloat"),d?i.setProperty(o,j):i[o]=j}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(i,s){if(s){if(tb[i]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(p$1(137,i));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(p$1(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(p$1(61))}if(s.style!=null&&typeof s.style!="object")throw Error(p$1(62))}}function vb(i,s){if(i.indexOf("-")===-1)return typeof s.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yb=null,zb=null,Ab=null;function Bb(i){if(i=Cb(i)){if(typeof yb!="function")throw Error(p$1(280));var s=i.stateNode;s&&(s=Db(s),yb(i.stateNode,i.type,s))}}function Eb(i){zb?Ab?Ab.push(i):Ab=[i]:zb=i}function Fb(){if(zb){var i=zb,s=Ab;if(Ab=zb=null,Bb(i),s)for(i=0;i<s.length;i++)Bb(s[i])}}function Gb(i,s){return i(s)}function Hb(){}var Ib=!1;function Jb(i,s,o){if(Ib)return i(s,o);Ib=!0;try{return Gb(i,s,o)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(i,s){var o=i.stateNode;if(o===null)return null;var d=Db(o);if(d===null)return null;o=d[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(p$1(231,s,typeof o));return o}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(i,s,o,d,j,$,ot,ht,pt){var dt=Array.prototype.slice.call(arguments,3);try{s.apply(o,dt)}catch(gt){this.onError(gt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(i){Ob=!0,Pb=i}};function Tb(i,s,o,d,j,$,ot,ht,pt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(i,s,o,d,j,$,ot,ht,pt){if(Tb.apply(this,arguments),Ob){if(Ob){var dt=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=dt)}}function Vb(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,s.flags&4098&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function Wb(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function Xb(i){if(Vb(i)!==i)throw Error(p$1(188))}function Yb(i){var s=i.alternate;if(!s){if(s=Vb(i),s===null)throw Error(p$1(188));return s!==i?null:i}for(var o=i,d=s;;){var j=o.return;if(j===null)break;var $=j.alternate;if($===null){if(d=j.return,d!==null){o=d;continue}break}if(j.child===$.child){for($=j.child;$;){if($===o)return Xb(j),i;if($===d)return Xb(j),s;$=$.sibling}throw Error(p$1(188))}if(o.return!==d.return)o=j,d=$;else{for(var ot=!1,ht=j.child;ht;){if(ht===o){ot=!0,o=j,d=$;break}if(ht===d){ot=!0,d=j,o=$;break}ht=ht.sibling}if(!ot){for(ht=$.child;ht;){if(ht===o){ot=!0,o=$,d=j;break}if(ht===d){ot=!0,d=$,o=j;break}ht=ht.sibling}if(!ot)throw Error(p$1(189))}}if(o.alternate!==d)throw Error(p$1(190))}if(o.tag!==3)throw Error(p$1(188));return o.stateNode.current===o?i:s}function Zb(i){return i=Yb(i),i!==null?$b(i):null}function $b(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var s=$b(i);if(s!==null)return s;i=i.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(i){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,i,void 0,(i.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(i){return i>>>=0,i===0?32:31-(pc(i)/qc|0)|0}var rc=64,sc=4194304;function tc(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function uc(i,s){var o=i.pendingLanes;if(o===0)return 0;var d=0,j=i.suspendedLanes,$=i.pingedLanes,ot=o&268435455;if(ot!==0){var ht=ot&~j;ht!==0?d=tc(ht):($&=ot,$!==0&&(d=tc($)))}else ot=o&~j,ot!==0?d=tc(ot):$!==0&&(d=tc($));if(d===0)return 0;if(s!==0&&s!==d&&!(s&j)&&(j=d&-d,$=s&-s,j>=$||j===16&&($&4194240)!==0))return s;if(d&4&&(d|=o&16),s=i.entangledLanes,s!==0)for(i=i.entanglements,s&=d;0<s;)o=31-oc(s),j=1<<o,d|=i[o],s&=~j;return d}function vc(i,s){switch(i){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(i,s){for(var o=i.suspendedLanes,d=i.pingedLanes,j=i.expirationTimes,$=i.pendingLanes;0<$;){var ot=31-oc($),ht=1<<ot,pt=j[ot];pt===-1?(!(ht&o)||ht&d)&&(j[ot]=vc(ht,s)):pt<=s&&(i.expiredLanes|=ht),$&=~ht}}function xc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function yc(){var i=rc;return rc<<=1,!(rc&4194240)&&(rc=64),i}function zc(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function Ac(i,s,o){i.pendingLanes|=s,s!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,s=31-oc(s),i[s]=o}function Bc(i,s){var o=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s,s=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<o;){var j=31-oc(o),$=1<<j;s[j]=0,d[j]=-1,i[j]=-1,o&=~$}}function Cc(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var d=31-oc(o),j=1<<d;j&s|i[d]&s&&(i[d]|=s),o&=~j}}var C=0;function Dc(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(i,s){switch(i){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(s.pointerId)}}function Tc(i,s,o,d,j,$){return i===null||i.nativeEvent!==$?(i={blockedOn:s,domEventName:o,eventSystemFlags:d,nativeEvent:$,targetContainers:[j]},s!==null&&(s=Cb(s),s!==null&&Fc(s)),i):(i.eventSystemFlags|=d,s=i.targetContainers,j!==null&&s.indexOf(j)===-1&&s.push(j),i)}function Uc(i,s,o,d,j){switch(s){case"focusin":return Lc=Tc(Lc,i,s,o,d,j),!0;case"dragenter":return Mc=Tc(Mc,i,s,o,d,j),!0;case"mouseover":return Nc=Tc(Nc,i,s,o,d,j),!0;case"pointerover":var $=j.pointerId;return Oc.set($,Tc(Oc.get($)||null,i,s,o,d,j)),!0;case"gotpointercapture":return $=j.pointerId,Pc.set($,Tc(Pc.get($)||null,i,s,o,d,j)),!0}return!1}function Vc(i){var s=Wc(i.target);if(s!==null){var o=Vb(s);if(o!==null){if(s=o.tag,s===13){if(s=Wb(o),s!==null){i.blockedOn=s,Ic(i.priority,function(){Gc(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xc(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=Yc(i.domEventName,i.eventSystemFlags,s[0],i.nativeEvent);if(o===null){o=i.nativeEvent;var d=new o.constructor(o.type,o);wb=d,o.target.dispatchEvent(d),wb=null}else return s=Cb(o),s!==null&&Fc(s),i.blockedOn=o,!1;s.shift()}return!0}function Zc(i,s,o){Xc(i)&&o.delete(s)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(i,s){i.blockedOn===s&&(i.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(i){function s(j){return ad(j,i)}if(0<Kc.length){ad(Kc[0],i);for(var o=1;o<Kc.length;o++){var d=Kc[o];d.blockedOn===i&&(d.blockedOn=null)}}for(Lc!==null&&ad(Lc,i),Mc!==null&&ad(Mc,i),Nc!==null&&ad(Nc,i),Oc.forEach(s),Pc.forEach(s),o=0;o<Qc.length;o++)d=Qc[o],d.blockedOn===i&&(d.blockedOn=null);for(;0<Qc.length&&(o=Qc[0],o.blockedOn===null);)Vc(o),o.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(i,s,o,d){var j=C,$=cd.transition;cd.transition=null;try{C=1,fd(i,s,o,d)}finally{C=j,cd.transition=$}}function gd(i,s,o,d){var j=C,$=cd.transition;cd.transition=null;try{C=4,fd(i,s,o,d)}finally{C=j,cd.transition=$}}function fd(i,s,o,d){if(dd){var j=Yc(i,s,o,d);if(j===null)hd(i,s,d,id,o),Sc(i,d);else if(Uc(j,i,s,o,d))d.stopPropagation();else if(Sc(i,d),s&4&&-1<Rc.indexOf(i)){for(;j!==null;){var $=Cb(j);if($!==null&&Ec($),$=Yc(i,s,o,d),$===null&&hd(i,s,d,id,o),$===j)break;j=$}j!==null&&d.stopPropagation()}else hd(i,s,d,null,o)}}var id=null;function Yc(i,s,o,d){if(id=null,i=xb(d),i=Wc(i),i!==null)if(s=Vb(i),s===null)i=null;else if(o=s.tag,o===13){if(i=Wb(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null);return id=i,null}function jd(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var i,s=ld,o=s.length,d,j="value"in kd?kd.value:kd.textContent,$=j.length;for(i=0;i<o&&s[i]===j[i];i++);var ot=o-i;for(d=1;d<=ot&&s[o-d]===j[$-d];d++);return md=j.slice(i,1<d?1-d:void 0)}function od(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function pd(){return!0}function qd(){return!1}function rd(i){function s(o,d,j,$,ot){this._reactName=o,this._targetInst=j,this.type=d,this.nativeEvent=$,this.target=ot,this.currentTarget=null;for(var ht in i)i.hasOwnProperty(ht)&&(o=i[ht],this[ht]=o?o($):$[ht]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),s}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yd&&(yd&&i.type==="mousemove"?(wd=i.screenX-yd.screenX,xd=i.screenY-yd.screenY):xd=wd=0,yd=i),wd)},movementY:function(i){return"movementY"in i?i.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Od[i])?!!s[i]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(i){if(i.key){var s=Md[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=od(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Nd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(i){return i.type==="keypress"?od(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?od(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be,de$1=ia&&(!ae$1||be&&8<be&&11>=be),ee=" ",fe$1=!1;function ge(i,s){switch(i){case"keyup":return $d.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ie=!1;function je(i,s){switch(i){case"compositionend":return he$1(s);case"keypress":return s.which!==32?null:(fe$1=!0,ee);case"textInput":return i=s.data,i===ee&&fe$1?null:i;default:return null}}function ke(i,s){if(ie)return i==="compositionend"||!ae$1&&ge(i,s)?(i=nd(),md=ld=kd=null,ie=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return de$1&&s.locale!=="ko"?null:s.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!le$1[i.type]:s==="textarea"}function ne(i,s,o,d){Eb(d),s=oe$1(s,"onChange"),0<s.length&&(o=new td("onChange","change",null,o,d),i.push({event:o,listeners:s}))}var pe$1=null,qe=null;function re(i){se$1(i,0)}function te(i){var s=ue$1(i);if(Wa(s))return i}function ve(i,s){if(i==="change")return s}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe=pe$1=null)}function Be(i){if(i.propertyName==="value"&&te(qe)){var s=[];ne(s,qe,i,xb(i)),Jb(re,s)}}function Ce(i,s,o){i==="focusin"?(Ae(),pe$1=s,qe=o,pe$1.attachEvent("onpropertychange",Be)):i==="focusout"&&Ae()}function De(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return te(qe)}function Ee(i,s){if(i==="click")return te(s)}function Fe$1(i,s){if(i==="input"||i==="change")return te(s)}function Ge$1(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var He$1=typeof Object.is=="function"?Object.is:Ge$1;function Ie(i,s){if(He$1(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),d=Object.keys(s);if(o.length!==d.length)return!1;for(d=0;d<o.length;d++){var j=o[d];if(!ja.call(s,j)||!He$1(i[j],s[j]))return!1}return!0}function Je(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ke(i,s){var o=Je(i);i=0;for(var d;o;){if(o.nodeType===3){if(d=i+o.textContent.length,i<=s&&d>=s)return{node:o,offset:s-i};i=d}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Je(o)}}function Le(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Le(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Me(){for(var i=window,s=Xa();s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=Xa(i.document)}return s}function Ne(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function Oe$1(i){var s=Me(),o=i.focusedElem,d=i.selectionRange;if(s!==o&&o&&o.ownerDocument&&Le(o.ownerDocument.documentElement,o)){if(d!==null&&Ne(o)){if(s=d.start,i=d.end,i===void 0&&(i=s),"selectionStart"in o)o.selectionStart=s,o.selectionEnd=Math.min(i,o.value.length);else if(i=(s=o.ownerDocument||document)&&s.defaultView||window,i.getSelection){i=i.getSelection();var j=o.textContent.length,$=Math.min(d.start,j);d=d.end===void 0?$:Math.min(d.end,j),!i.extend&&$>d&&(j=d,d=$,$=j),j=Ke(o,$);var ot=Ke(o,d);j&&ot&&(i.rangeCount!==1||i.anchorNode!==j.node||i.anchorOffset!==j.offset||i.focusNode!==ot.node||i.focusOffset!==ot.offset)&&(s=s.createRange(),s.setStart(j.node,j.offset),i.removeAllRanges(),$>d?(i.addRange(s),i.extend(ot.node,ot.offset)):(s.setEnd(ot.node,ot.offset),i.addRange(s)))}}for(s=[],i=o;i=i.parentNode;)i.nodeType===1&&s.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<s.length;o++)i=s[o],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue$1(i,s,o){var d=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Te||Qe==null||Qe!==Xa(d)||(d=Qe,"selectionStart"in d&&Ne(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Ie(Se,d)||(Se=d,d=oe$1(Re,"onSelect"),0<d.length&&(s=new td("onSelect","select",null,s,o),i.push({event:s,listeners:d}),s.target=Qe)))}function Ve(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var We$1={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye$1={};ia&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze(i){if(Xe[i])return Xe[i];if(!We$1[i])return i;var s=We$1[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in Ye$1)return Xe[i]=s[o];return i}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(i,s){df.set(i,s),fa(s,[i])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(i,s,o){var d=i.type||"unknown-event";i.currentTarget=o,Ub(d,s,void 0,i),i.currentTarget=null}function se$1(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var d=i[o],j=d.event;d=d.listeners;t:{var $=void 0;if(s)for(var ot=d.length-1;0<=ot;ot--){var ht=d[ot],pt=ht.instance,dt=ht.currentTarget;if(ht=ht.listener,pt!==$&&j.isPropagationStopped())break t;nf(j,ht,dt),$=pt}else for(ot=0;ot<d.length;ot++){if(ht=d[ot],pt=ht.instance,dt=ht.currentTarget,ht=ht.listener,pt!==$&&j.isPropagationStopped())break t;nf(j,ht,dt),$=pt}}}if(Qb)throw i=Rb,Qb=!1,Rb=null,i}function D$1(i,s){var o=s[of];o===void 0&&(o=s[of]=new Set);var d=i+"__bubble";o.has(d)||(pf(s,i,2,!1),o.add(d))}function qf(i,s,o){var d=0;s&&(d|=4),pf(o,i,d,s)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(i){if(!i[rf]){i[rf]=!0,da.forEach(function(o){o!=="selectionchange"&&(mf.has(o)||qf(o,!1,i),qf(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[rf]||(s[rf]=!0,qf("selectionchange",!1,s))}}function pf(i,s,o,d){switch(jd(s)){case 1:var j=ed;break;case 4:j=gd;break;default:j=fd}o=j.bind(null,s,o,i),j=void 0,!Lb||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(j=!0),d?j!==void 0?i.addEventListener(s,o,{capture:!0,passive:j}):i.addEventListener(s,o,!0):j!==void 0?i.addEventListener(s,o,{passive:j}):i.addEventListener(s,o,!1)}function hd(i,s,o,d,j){var $=d;if(!(s&1)&&!(s&2)&&d!==null)t:for(;;){if(d===null)return;var ot=d.tag;if(ot===3||ot===4){var ht=d.stateNode.containerInfo;if(ht===j||ht.nodeType===8&&ht.parentNode===j)break;if(ot===4)for(ot=d.return;ot!==null;){var pt=ot.tag;if((pt===3||pt===4)&&(pt=ot.stateNode.containerInfo,pt===j||pt.nodeType===8&&pt.parentNode===j))return;ot=ot.return}for(;ht!==null;){if(ot=Wc(ht),ot===null)return;if(pt=ot.tag,pt===5||pt===6){d=$=ot;continue t}ht=ht.parentNode}}d=d.return}Jb(function(){var dt=$,gt=xb(o),wt=[];t:{var bt=df.get(i);if(bt!==void 0){var St=td,Ct=i;switch(i){case"keypress":if(od(o)===0)break t;case"keydown":case"keyup":St=Rd;break;case"focusin":Ct="focus",St=Fd;break;case"focusout":Ct="blur",St=Fd;break;case"beforeblur":case"afterblur":St=Fd;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":St=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":St=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":St=Vd;break;case $e:case af:case bf:St=Hd;break;case cf:St=Xd;break;case"scroll":St=vd;break;case"wheel":St=Zd;break;case"copy":case"cut":case"paste":St=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":St=Td}var Et=(s&4)!==0,Pt=!Et&&i==="scroll",_t=Et?bt!==null?bt+"Capture":null:bt;Et=[];for(var yt=dt,xt;yt!==null;){xt=yt;var Dt=xt.stateNode;if(xt.tag===5&&Dt!==null&&(xt=Dt,_t!==null&&(Dt=Kb(yt,_t),Dt!=null&&Et.push(tf(yt,Dt,xt)))),Pt)break;yt=yt.return}0<Et.length&&(bt=new St(bt,Ct,null,o,gt),wt.push({event:bt,listeners:Et}))}}if(!(s&7)){t:{if(bt=i==="mouseover"||i==="pointerover",St=i==="mouseout"||i==="pointerout",bt&&o!==wb&&(Ct=o.relatedTarget||o.fromElement)&&(Wc(Ct)||Ct[uf]))break t;if((St||bt)&&(bt=gt.window===gt?gt:(bt=gt.ownerDocument)?bt.defaultView||bt.parentWindow:window,St?(Ct=o.relatedTarget||o.toElement,St=dt,Ct=Ct?Wc(Ct):null,Ct!==null&&(Pt=Vb(Ct),Ct!==Pt||Ct.tag!==5&&Ct.tag!==6)&&(Ct=null)):(St=null,Ct=dt),St!==Ct)){if(Et=Bd,Dt="onMouseLeave",_t="onMouseEnter",yt="mouse",(i==="pointerout"||i==="pointerover")&&(Et=Td,Dt="onPointerLeave",_t="onPointerEnter",yt="pointer"),Pt=St==null?bt:ue$1(St),xt=Ct==null?bt:ue$1(Ct),bt=new Et(Dt,yt+"leave",St,o,gt),bt.target=Pt,bt.relatedTarget=xt,Dt=null,Wc(gt)===dt&&(Et=new Et(_t,yt+"enter",Ct,o,gt),Et.target=xt,Et.relatedTarget=Pt,Dt=Et),Pt=Dt,St&&Ct)e:{for(Et=St,_t=Ct,yt=0,xt=Et;xt;xt=vf(xt))yt++;for(xt=0,Dt=_t;Dt;Dt=vf(Dt))xt++;for(;0<yt-xt;)Et=vf(Et),yt--;for(;0<xt-yt;)_t=vf(_t),xt--;for(;yt--;){if(Et===_t||_t!==null&&Et===_t.alternate)break e;Et=vf(Et),_t=vf(_t)}Et=null}else Et=null;St!==null&&wf(wt,bt,St,Et,!1),Ct!==null&&Pt!==null&&wf(wt,Pt,Ct,Et,!0)}}t:{if(bt=dt?ue$1(dt):window,St=bt.nodeName&&bt.nodeName.toLowerCase(),St==="select"||St==="input"&&bt.type==="file")var Ot=ve;else if(me(bt))if(we)Ot=Fe$1;else{Ot=De;var Bt=Ce}else(St=bt.nodeName)&&St.toLowerCase()==="input"&&(bt.type==="checkbox"||bt.type==="radio")&&(Ot=Ee);if(Ot&&(Ot=Ot(i,dt))){ne(wt,Ot,o,gt);break t}Bt&&Bt(i,bt,dt),i==="focusout"&&(Bt=bt._wrapperState)&&Bt.controlled&&bt.type==="number"&&cb(bt,"number",bt.value)}switch(Bt=dt?ue$1(dt):window,i){case"focusin":(me(Bt)||Bt.contentEditable==="true")&&(Qe=Bt,Re=dt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue$1(wt,o,gt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue$1(wt,o,gt)}var At;if(ae$1)t:{switch(i){case"compositionstart":var It="onCompositionStart";break t;case"compositionend":It="onCompositionEnd";break t;case"compositionupdate":It="onCompositionUpdate";break t}It=void 0}else ie?ge(i,o)&&(It="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(It="onCompositionStart");It&&(de$1&&o.locale!=="ko"&&(ie||It!=="onCompositionStart"?It==="onCompositionEnd"&&ie&&(At=nd()):(kd=gt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Bt=oe$1(dt,It),0<Bt.length&&(It=new Ld(It,i,null,o,gt),wt.push({event:It,listeners:Bt}),At?It.data=At:(At=he$1(o),At!==null&&(It.data=At)))),(At=ce$1?je(i,o):ke(i,o))&&(dt=oe$1(dt,"onBeforeInput"),0<dt.length&&(gt=new Ld("onBeforeInput","beforeinput",null,o,gt),wt.push({event:gt,listeners:dt}),gt.data=At))}se$1(wt,s)})}function tf(i,s,o){return{instance:i,listener:s,currentTarget:o}}function oe$1(i,s){for(var o=s+"Capture",d=[];i!==null;){var j=i,$=j.stateNode;j.tag===5&&$!==null&&(j=$,$=Kb(i,o),$!=null&&d.unshift(tf(i,$,j)),$=Kb(i,s),$!=null&&d.push(tf(i,$,j))),i=i.return}return d}function vf(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function wf(i,s,o,d,j){for(var $=s._reactName,ot=[];o!==null&&o!==d;){var ht=o,pt=ht.alternate,dt=ht.stateNode;if(pt!==null&&pt===d)break;ht.tag===5&&dt!==null&&(ht=dt,j?(pt=Kb(o,$),pt!=null&&ot.unshift(tf(o,pt,ht))):j||(pt=Kb(o,$),pt!=null&&ot.push(tf(o,pt,ht)))),o=o.return}ot.length!==0&&i.push({event:s,listeners:ot})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(i){return(typeof i=="string"?i:""+i).replace(xf,`
`).replace(yf,"")}function Af(i,s,o){if(s=zf(s),zf(i)!==s&&o)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(i){return Hf.resolve(null).then(i).catch(If)}:Ff;function If(i){setTimeout(function(){throw i})}function Kf(i,s){var o=s,d=0;do{var j=o.nextSibling;if(i.removeChild(o),j&&j.nodeType===8)if(o=j.data,o==="/$"){if(d===0){i.removeChild(j),bd(s);return}d--}else o!=="$"&&o!=="$?"&&o!=="$!"||d++;o=j}while(o);bd(s)}function Lf(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return i}function Mf(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return i;s--}else o==="/$"&&s++}i=i.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(i){var s=i[Of];if(s)return s;for(var o=i.parentNode;o;){if(s=o[uf]||o[Of]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=Mf(i);i!==null;){if(o=i[Of])return o;i=Mf(i)}return s}i=o,o=i.parentNode}return null}function Cb(i){return i=i[Of]||i[uf],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ue$1(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(p$1(33))}function Db(i){return i[Pf]||null}var Sf=[],Tf=-1;function Uf(i){return{current:i}}function E$1(i){0>Tf||(i.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(i,s){Tf++,Sf[Tf]=i.current,i.current=s}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(i,s){var o=i.type.contextTypes;if(!o)return Vf;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var j={},$;for($ in o)j[$]=s[$];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=j),j}function Zf(i){return i=i.childContextTypes,i!=null}function $f(){E$1(Wf),E$1(H)}function ag(i,s,o){if(H.current!==Vf)throw Error(p$1(168));G$1(H,s),G$1(Wf,o)}function bg(i,s,o){var d=i.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return o;d=d.getChildContext();for(var j in d)if(!(j in s))throw Error(p$1(108,Ra(i)||"Unknown",j));return A$1({},o,d)}function cg(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G$1(H,i),G$1(Wf,Wf.current),!0}function dg(i,s,o){var d=i.stateNode;if(!d)throw Error(p$1(169));o?(i=bg(i,s,Xf),d.__reactInternalMemoizedMergedChildContext=i,E$1(Wf),E$1(H),G$1(H,i)):E$1(Wf),G$1(Wf,o)}var eg=null,fg=!1,gg=!1;function hg(i){eg===null?eg=[i]:eg.push(i)}function ig(i){fg=!0,hg(i)}function jg(){if(!gg&&eg!==null){gg=!0;var i=0,s=C;try{var o=eg;for(C=1;i<o.length;i++){var d=o[i];do d=d(!0);while(d!==null)}eg=null,fg=!1}catch(j){throw eg!==null&&(eg=eg.slice(i+1)),ac(fc,jg),j}finally{C=s,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(i,s){kg[lg++]=ng,kg[lg++]=mg,mg=i,ng=s}function ug(i,s,o){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=i;var d=rg;i=sg;var j=32-oc(d)-1;d&=~(1<<j),o+=1;var $=32-oc(s)+j;if(30<$){var ot=j-j%5;$=(d&(1<<ot)-1).toString(32),d>>=ot,j-=ot,rg=1<<32-oc(s)+j|o<<j|d,sg=$+i}else rg=1<<$|o<<j|d,sg=i}function vg(i){i.return!==null&&(tg(i,1),ug(i,1,0))}function wg(i){for(;i===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;i===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(i,s){var o=Bg(5,null,null,0);o.elementType="DELETED",o.stateNode=s,o.return=i,s=i.deletions,s===null?(i.deletions=[o],i.flags|=16):s.push(o)}function Cg(i,s){switch(i.tag){case 5:var o=i.type;return s=s.nodeType!==1||o.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(i.stateNode=s,xg=i,yg=Lf(s.firstChild),!0):!1;case 6:return s=i.pendingProps===""||s.nodeType!==3?null:s,s!==null?(i.stateNode=s,xg=i,yg=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(o=qg!==null?{id:rg,overflow:sg}:null,i.memoizedState={dehydrated:s,treeContext:o,retryLane:1073741824},o=Bg(18,null,null,0),o.stateNode=s,o.return=i,i.child=o,xg=i,yg=null,!0):!1;default:return!1}}function Dg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Eg(i){if(I){var s=yg;if(s){var o=s;if(!Cg(i,s)){if(Dg(i))throw Error(p$1(418));s=Lf(o.nextSibling);var d=xg;s&&Cg(i,s)?Ag(d,o):(i.flags=i.flags&-4097|2,I=!1,xg=i)}}else{if(Dg(i))throw Error(p$1(418));i.flags=i.flags&-4097|2,I=!1,xg=i}}}function Fg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xg=i}function Gg(i){if(i!==xg)return!1;if(!I)return Fg(i),I=!0,!1;var s;if((s=i.tag!==3)&&!(s=i.tag!==5)&&(s=i.type,s=s!=="head"&&s!=="body"&&!Ef(i.type,i.memoizedProps)),s&&(s=yg)){if(Dg(i))throw Hg(),Error(p$1(418));for(;s;)Ag(i,s),s=Lf(s.nextSibling)}if(Fg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(p$1(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"){if(s===0){yg=Lf(i.nextSibling);break t}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++}i=i.nextSibling}yg=null}}else yg=xg?Lf(i.stateNode.nextSibling):null;return!0}function Hg(){for(var i=yg;i;)i=Lf(i.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(i){zg===null?zg=[i]:zg.push(i)}var Kg=ua.ReactCurrentBatchConfig;function Lg(i,s,o){if(i=o.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(p$1(309));var d=o.stateNode}if(!d)throw Error(p$1(147,i));var j=d,$=""+i;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===$?s.ref:(s=function(ot){var ht=j.refs;ot===null?delete ht[$]:ht[$]=ot},s._stringRef=$,s)}if(typeof i!="string")throw Error(p$1(284));if(!o._owner)throw Error(p$1(290,i))}return i}function Mg(i,s){throw i=Object.prototype.toString.call(s),Error(p$1(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i))}function Ng(i){var s=i._init;return s(i._payload)}function Og(i){function s(_t,yt){if(i){var xt=_t.deletions;xt===null?(_t.deletions=[yt],_t.flags|=16):xt.push(yt)}}function o(_t,yt){if(!i)return null;for(;yt!==null;)s(_t,yt),yt=yt.sibling;return null}function d(_t,yt){for(_t=new Map;yt!==null;)yt.key!==null?_t.set(yt.key,yt):_t.set(yt.index,yt),yt=yt.sibling;return _t}function j(_t,yt){return _t=Pg(_t,yt),_t.index=0,_t.sibling=null,_t}function $(_t,yt,xt){return _t.index=xt,i?(xt=_t.alternate,xt!==null?(xt=xt.index,xt<yt?(_t.flags|=2,yt):xt):(_t.flags|=2,yt)):(_t.flags|=1048576,yt)}function ot(_t){return i&&_t.alternate===null&&(_t.flags|=2),_t}function ht(_t,yt,xt,Dt){return yt===null||yt.tag!==6?(yt=Qg(xt,_t.mode,Dt),yt.return=_t,yt):(yt=j(yt,xt),yt.return=_t,yt)}function pt(_t,yt,xt,Dt){var Ot=xt.type;return Ot===ya?gt(_t,yt,xt.props.children,Dt,xt.key):yt!==null&&(yt.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===Ha&&Ng(Ot)===yt.type)?(Dt=j(yt,xt.props),Dt.ref=Lg(_t,yt,xt),Dt.return=_t,Dt):(Dt=Rg(xt.type,xt.key,xt.props,null,_t.mode,Dt),Dt.ref=Lg(_t,yt,xt),Dt.return=_t,Dt)}function dt(_t,yt,xt,Dt){return yt===null||yt.tag!==4||yt.stateNode.containerInfo!==xt.containerInfo||yt.stateNode.implementation!==xt.implementation?(yt=Sg(xt,_t.mode,Dt),yt.return=_t,yt):(yt=j(yt,xt.children||[]),yt.return=_t,yt)}function gt(_t,yt,xt,Dt,Ot){return yt===null||yt.tag!==7?(yt=Tg(xt,_t.mode,Dt,Ot),yt.return=_t,yt):(yt=j(yt,xt),yt.return=_t,yt)}function wt(_t,yt,xt){if(typeof yt=="string"&&yt!==""||typeof yt=="number")return yt=Qg(""+yt,_t.mode,xt),yt.return=_t,yt;if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case va:return xt=Rg(yt.type,yt.key,yt.props,null,_t.mode,xt),xt.ref=Lg(_t,null,yt),xt.return=_t,xt;case wa:return yt=Sg(yt,_t.mode,xt),yt.return=_t,yt;case Ha:var Dt=yt._init;return wt(_t,Dt(yt._payload),xt)}if(eb(yt)||Ka(yt))return yt=Tg(yt,_t.mode,xt,null),yt.return=_t,yt;Mg(_t,yt)}return null}function bt(_t,yt,xt,Dt){var Ot=yt!==null?yt.key:null;if(typeof xt=="string"&&xt!==""||typeof xt=="number")return Ot!==null?null:ht(_t,yt,""+xt,Dt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case va:return xt.key===Ot?pt(_t,yt,xt,Dt):null;case wa:return xt.key===Ot?dt(_t,yt,xt,Dt):null;case Ha:return Ot=xt._init,bt(_t,yt,Ot(xt._payload),Dt)}if(eb(xt)||Ka(xt))return Ot!==null?null:gt(_t,yt,xt,Dt,null);Mg(_t,xt)}return null}function St(_t,yt,xt,Dt,Ot){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number")return _t=_t.get(xt)||null,ht(yt,_t,""+Dt,Ot);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case va:return _t=_t.get(Dt.key===null?xt:Dt.key)||null,pt(yt,_t,Dt,Ot);case wa:return _t=_t.get(Dt.key===null?xt:Dt.key)||null,dt(yt,_t,Dt,Ot);case Ha:var Bt=Dt._init;return St(_t,yt,xt,Bt(Dt._payload),Ot)}if(eb(Dt)||Ka(Dt))return _t=_t.get(xt)||null,gt(yt,_t,Dt,Ot,null);Mg(yt,Dt)}return null}function Ct(_t,yt,xt,Dt){for(var Ot=null,Bt=null,At=yt,It=yt=0,Gt=null;At!==null&&It<xt.length;It++){At.index>It?(Gt=At,At=null):Gt=At.sibling;var Jt=bt(_t,At,xt[It],Dt);if(Jt===null){At===null&&(At=Gt);break}i&&At&&Jt.alternate===null&&s(_t,At),yt=$(Jt,yt,It),Bt===null?Ot=Jt:Bt.sibling=Jt,Bt=Jt,At=Gt}if(It===xt.length)return o(_t,At),I&&tg(_t,It),Ot;if(At===null){for(;It<xt.length;It++)At=wt(_t,xt[It],Dt),At!==null&&(yt=$(At,yt,It),Bt===null?Ot=At:Bt.sibling=At,Bt=At);return I&&tg(_t,It),Ot}for(At=d(_t,At);It<xt.length;It++)Gt=St(At,_t,It,xt[It],Dt),Gt!==null&&(i&&Gt.alternate!==null&&At.delete(Gt.key===null?It:Gt.key),yt=$(Gt,yt,It),Bt===null?Ot=Gt:Bt.sibling=Gt,Bt=Gt);return i&&At.forEach(function(nn){return s(_t,nn)}),I&&tg(_t,It),Ot}function Et(_t,yt,xt,Dt){var Ot=Ka(xt);if(typeof Ot!="function")throw Error(p$1(150));if(xt=Ot.call(xt),xt==null)throw Error(p$1(151));for(var Bt=Ot=null,At=yt,It=yt=0,Gt=null,Jt=xt.next();At!==null&&!Jt.done;It++,Jt=xt.next()){At.index>It?(Gt=At,At=null):Gt=At.sibling;var nn=bt(_t,At,Jt.value,Dt);if(nn===null){At===null&&(At=Gt);break}i&&At&&nn.alternate===null&&s(_t,At),yt=$(nn,yt,It),Bt===null?Ot=nn:Bt.sibling=nn,Bt=nn,At=Gt}if(Jt.done)return o(_t,At),I&&tg(_t,It),Ot;if(At===null){for(;!Jt.done;It++,Jt=xt.next())Jt=wt(_t,Jt.value,Dt),Jt!==null&&(yt=$(Jt,yt,It),Bt===null?Ot=Jt:Bt.sibling=Jt,Bt=Jt);return I&&tg(_t,It),Ot}for(At=d(_t,At);!Jt.done;It++,Jt=xt.next())Jt=St(At,_t,It,Jt.value,Dt),Jt!==null&&(i&&Jt.alternate!==null&&At.delete(Jt.key===null?It:Jt.key),yt=$(Jt,yt,It),Bt===null?Ot=Jt:Bt.sibling=Jt,Bt=Jt);return i&&At.forEach(function(Vt){return s(_t,Vt)}),I&&tg(_t,It),Ot}function Pt(_t,yt,xt,Dt){if(typeof xt=="object"&&xt!==null&&xt.type===ya&&xt.key===null&&(xt=xt.props.children),typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case va:t:{for(var Ot=xt.key,Bt=yt;Bt!==null;){if(Bt.key===Ot){if(Ot=xt.type,Ot===ya){if(Bt.tag===7){o(_t,Bt.sibling),yt=j(Bt,xt.props.children),yt.return=_t,_t=yt;break t}}else if(Bt.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===Ha&&Ng(Ot)===Bt.type){o(_t,Bt.sibling),yt=j(Bt,xt.props),yt.ref=Lg(_t,Bt,xt),yt.return=_t,_t=yt;break t}o(_t,Bt);break}else s(_t,Bt);Bt=Bt.sibling}xt.type===ya?(yt=Tg(xt.props.children,_t.mode,Dt,xt.key),yt.return=_t,_t=yt):(Dt=Rg(xt.type,xt.key,xt.props,null,_t.mode,Dt),Dt.ref=Lg(_t,yt,xt),Dt.return=_t,_t=Dt)}return ot(_t);case wa:t:{for(Bt=xt.key;yt!==null;){if(yt.key===Bt)if(yt.tag===4&&yt.stateNode.containerInfo===xt.containerInfo&&yt.stateNode.implementation===xt.implementation){o(_t,yt.sibling),yt=j(yt,xt.children||[]),yt.return=_t,_t=yt;break t}else{o(_t,yt);break}else s(_t,yt);yt=yt.sibling}yt=Sg(xt,_t.mode,Dt),yt.return=_t,_t=yt}return ot(_t);case Ha:return Bt=xt._init,Pt(_t,yt,Bt(xt._payload),Dt)}if(eb(xt))return Ct(_t,yt,xt,Dt);if(Ka(xt))return Et(_t,yt,xt,Dt);Mg(_t,xt)}return typeof xt=="string"&&xt!==""||typeof xt=="number"?(xt=""+xt,yt!==null&&yt.tag===6?(o(_t,yt.sibling),yt=j(yt,xt),yt.return=_t,_t=yt):(o(_t,yt),yt=Qg(xt,_t.mode,Dt),yt.return=_t,_t=yt),ot(_t)):o(_t,yt)}return Pt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(i){var s=Wg.current;E$1(Wg),i._currentValue=s}function bh(i,s,o){for(;i!==null;){var d=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),i===o)break;i=i.return}}function ch(i,s){Xg=i,Zg=Yg=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&s&&(dh=!0),i.firstContext=null)}function eh(i){var s=i._currentValue;if(Zg!==i)if(i={context:i,memoizedValue:s,next:null},Yg===null){if(Xg===null)throw Error(p$1(308));Yg=i,Xg.dependencies={lanes:0,firstContext:i}}else Yg=Yg.next=i;return s}var fh=null;function gh(i){fh===null?fh=[i]:fh.push(i)}function hh(i,s,o,d){var j=s.interleaved;return j===null?(o.next=o,gh(s)):(o.next=j.next,j.next=o),s.interleaved=o,ih(i,d)}function ih(i,s){i.lanes|=s;var o=i.alternate;for(o!==null&&(o.lanes|=s),o=i,i=i.return;i!==null;)i.childLanes|=s,o=i.alternate,o!==null&&(o.childLanes|=s),o=i,i=i.return;return o.tag===3?o.stateNode:null}var jh=!1;function kh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function mh(i,s){return{eventTime:i,lane:s,tag:0,payload:null,callback:null,next:null}}function nh(i,s,o){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,K&2){var j=d.pending;return j===null?s.next=s:(s.next=j.next,j.next=s),d.pending=s,ih(i,o)}return j=d.interleaved,j===null?(s.next=s,gh(d)):(s.next=j.next,j.next=s),d.interleaved=s,ih(i,o)}function oh(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194240)!==0)){var d=s.lanes;d&=i.pendingLanes,o|=d,s.lanes=o,Cc(i,o)}}function ph(i,s){var o=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,o===d)){var j=null,$=null;if(o=o.firstBaseUpdate,o!==null){do{var ot={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};$===null?j=$=ot:$=$.next=ot,o=o.next}while(o!==null);$===null?j=$=s:$=$.next=s}else j=$=s;o={baseState:d.baseState,firstBaseUpdate:j,lastBaseUpdate:$,shared:d.shared,effects:d.effects},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}function qh(i,s,o,d){var j=i.updateQueue;jh=!1;var $=j.firstBaseUpdate,ot=j.lastBaseUpdate,ht=j.shared.pending;if(ht!==null){j.shared.pending=null;var pt=ht,dt=pt.next;pt.next=null,ot===null?$=dt:ot.next=dt,ot=pt;var gt=i.alternate;gt!==null&&(gt=gt.updateQueue,ht=gt.lastBaseUpdate,ht!==ot&&(ht===null?gt.firstBaseUpdate=dt:ht.next=dt,gt.lastBaseUpdate=pt))}if($!==null){var wt=j.baseState;ot=0,gt=dt=pt=null,ht=$;do{var bt=ht.lane,St=ht.eventTime;if((d&bt)===bt){gt!==null&&(gt=gt.next={eventTime:St,lane:0,tag:ht.tag,payload:ht.payload,callback:ht.callback,next:null});t:{var Ct=i,Et=ht;switch(bt=s,St=o,Et.tag){case 1:if(Ct=Et.payload,typeof Ct=="function"){wt=Ct.call(St,wt,bt);break t}wt=Ct;break t;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Et.payload,bt=typeof Ct=="function"?Ct.call(St,wt,bt):Ct,bt==null)break t;wt=A$1({},wt,bt);break t;case 2:jh=!0}}ht.callback!==null&&ht.lane!==0&&(i.flags|=64,bt=j.effects,bt===null?j.effects=[ht]:bt.push(ht))}else St={eventTime:St,lane:bt,tag:ht.tag,payload:ht.payload,callback:ht.callback,next:null},gt===null?(dt=gt=St,pt=wt):gt=gt.next=St,ot|=bt;if(ht=ht.next,ht===null){if(ht=j.shared.pending,ht===null)break;bt=ht,ht=bt.next,bt.next=null,j.lastBaseUpdate=bt,j.shared.pending=null}}while(!0);if(gt===null&&(pt=wt),j.baseState=pt,j.firstBaseUpdate=dt,j.lastBaseUpdate=gt,s=j.shared.interleaved,s!==null){j=s;do ot|=j.lane,j=j.next;while(j!==s)}else $===null&&(j.shared.lanes=0);rh|=ot,i.lanes=ot,i.memoizedState=wt}}function sh(i,s,o){if(i=s.effects,s.effects=null,i!==null)for(s=0;s<i.length;s++){var d=i[s],j=d.callback;if(j!==null){if(d.callback=null,d=o,typeof j!="function")throw Error(p$1(191,j));j.call(d)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(i){if(i===th)throw Error(p$1(174));return i}function yh(i,s){switch(G$1(wh,s),G$1(vh,i),G$1(uh,th),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:lb(null,"");break;default:i=i===8?s.parentNode:s,s=i.namespaceURI||null,i=i.tagName,s=lb(s,i)}E$1(uh),G$1(uh,s)}function zh(){E$1(uh),E$1(vh),E$1(wh)}function Ah(i){xh(wh.current);var s=xh(uh.current),o=lb(s,i.type);s!==o&&(G$1(vh,i),G$1(uh,o))}function Bh(i){vh.current===i&&(E$1(uh),E$1(vh))}var L=Uf(0);function Ch(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Dh=[];function Eh(){for(var i=0;i<Dh.length;i++)Dh[i]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$1=null,N=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p$1(321))}function Mh(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!He$1(i[o],s[o]))return!1;return!0}function Nh(i,s,o,d,j,$){if(Hh=$,M$1=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Fh.current=i===null||i.memoizedState===null?Oh:Ph,i=o(d,j),Jh){$=0;do{if(Jh=!1,Kh=0,25<=$)throw Error(p$1(301));$+=1,O$1=N=null,s.updateQueue=null,Fh.current=Qh,i=o(d,j)}while(Jh)}if(Fh.current=Rh,s=N!==null&&N.next!==null,Hh=0,O$1=N=M$1=null,Ih=!1,s)throw Error(p$1(300));return i}function Sh(){var i=Kh!==0;return Kh=0,i}function Th(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=i:O$1=O$1.next=i,O$1}function Uh(){if(N===null){var i=M$1.alternate;i=i!==null?i.memoizedState:null}else i=N.next;var s=O$1===null?M$1.memoizedState:O$1.next;if(s!==null)O$1=s,N=i;else{if(i===null)throw Error(p$1(310));N=i,i={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O$1===null?M$1.memoizedState=O$1=i:O$1=O$1.next=i}return O$1}function Vh(i,s){return typeof s=="function"?s(i):s}function Wh(i){var s=Uh(),o=s.queue;if(o===null)throw Error(p$1(311));o.lastRenderedReducer=i;var d=N,j=d.baseQueue,$=o.pending;if($!==null){if(j!==null){var ot=j.next;j.next=$.next,$.next=ot}d.baseQueue=j=$,o.pending=null}if(j!==null){$=j.next,d=d.baseState;var ht=ot=null,pt=null,dt=$;do{var gt=dt.lane;if((Hh&gt)===gt)pt!==null&&(pt=pt.next={lane:0,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),d=dt.hasEagerState?dt.eagerState:i(d,dt.action);else{var wt={lane:gt,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null};pt===null?(ht=pt=wt,ot=d):pt=pt.next=wt,M$1.lanes|=gt,rh|=gt}dt=dt.next}while(dt!==null&&dt!==$);pt===null?ot=d:pt.next=ht,He$1(d,s.memoizedState)||(dh=!0),s.memoizedState=d,s.baseState=ot,s.baseQueue=pt,o.lastRenderedState=d}if(i=o.interleaved,i!==null){j=i;do $=j.lane,M$1.lanes|=$,rh|=$,j=j.next;while(j!==i)}else j===null&&(o.lanes=0);return[s.memoizedState,o.dispatch]}function Xh(i){var s=Uh(),o=s.queue;if(o===null)throw Error(p$1(311));o.lastRenderedReducer=i;var d=o.dispatch,j=o.pending,$=s.memoizedState;if(j!==null){o.pending=null;var ot=j=j.next;do $=i($,ot.action),ot=ot.next;while(ot!==j);He$1($,s.memoizedState)||(dh=!0),s.memoizedState=$,s.baseQueue===null&&(s.baseState=$),o.lastRenderedState=$}return[$,d]}function Yh(){}function Zh(i,s){var o=M$1,d=Uh(),j=s(),$=!He$1(d.memoizedState,j);if($&&(d.memoizedState=j,dh=!0),d=d.queue,$h(ai.bind(null,o,d,i),[i]),d.getSnapshot!==s||$||O$1!==null&&O$1.memoizedState.tag&1){if(o.flags|=2048,bi(9,ci.bind(null,o,d,j,s),void 0,null),Q===null)throw Error(p$1(349));Hh&30||di(o,s,j)}return j}function di(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=M$1.updateQueue,s===null?(s={lastEffect:null,stores:null},M$1.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function ci(i,s,o,d){s.value=o,s.getSnapshot=d,ei(s)&&fi(i)}function ai(i,s,o){return o(function(){ei(s)&&fi(i)})}function ei(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!He$1(i,o)}catch{return!0}}function fi(i){var s=ih(i,1);s!==null&&gi(s,i,1,-1)}function hi(i){var s=Th();return typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:i},s.queue=i,i=i.dispatch=ii.bind(null,M$1,i),[s.memoizedState,i]}function bi(i,s,o,d){return i={tag:i,create:s,destroy:o,deps:d,next:null},s=M$1.updateQueue,s===null?(s={lastEffect:null,stores:null},M$1.updateQueue=s,s.lastEffect=i.next=i):(o=s.lastEffect,o===null?s.lastEffect=i.next=i:(d=o.next,o.next=i,i.next=d,s.lastEffect=i)),i}function ji(){return Uh().memoizedState}function ki(i,s,o,d){var j=Th();M$1.flags|=i,j.memoizedState=bi(1|s,o,void 0,d===void 0?null:d)}function li(i,s,o,d){var j=Uh();d=d===void 0?null:d;var $=void 0;if(N!==null){var ot=N.memoizedState;if($=ot.destroy,d!==null&&Mh(d,ot.deps)){j.memoizedState=bi(s,o,$,d);return}}M$1.flags|=i,j.memoizedState=bi(1|s,o,$,d)}function mi(i,s){return ki(8390656,8,i,s)}function $h(i,s){return li(2048,8,i,s)}function ni(i,s){return li(4,2,i,s)}function oi(i,s){return li(4,4,i,s)}function pi(i,s){if(typeof s=="function")return i=i(),s(i),function(){s(null)};if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function qi(i,s,o){return o=o!=null?o.concat([i]):null,li(4,4,pi.bind(null,s,i),o)}function ri(){}function si(i,s){var o=Uh();s=s===void 0?null:s;var d=o.memoizedState;return d!==null&&s!==null&&Mh(s,d[1])?d[0]:(o.memoizedState=[i,s],i)}function ti(i,s){var o=Uh();s=s===void 0?null:s;var d=o.memoizedState;return d!==null&&s!==null&&Mh(s,d[1])?d[0]:(i=i(),o.memoizedState=[i,s],i)}function ui(i,s,o){return Hh&21?(He$1(o,s)||(o=yc(),M$1.lanes|=o,rh|=o,i.baseState=!0),s):(i.baseState&&(i.baseState=!1,dh=!0),i.memoizedState=o)}function vi(i,s){var o=C;C=o!==0&&4>o?o:4,i(!0);var d=Gh.transition;Gh.transition={};try{i(!1),s()}finally{C=o,Gh.transition=d}}function wi(){return Uh().memoizedState}function xi(i,s,o){var d=yi(i);if(o={lane:d,action:o,hasEagerState:!1,eagerState:null,next:null},zi(i))Ai(s,o);else if(o=hh(i,s,o,d),o!==null){var j=R$1();gi(o,i,d,j),Bi(o,s,d)}}function ii(i,s,o){var d=yi(i),j={lane:d,action:o,hasEagerState:!1,eagerState:null,next:null};if(zi(i))Ai(s,j);else{var $=i.alternate;if(i.lanes===0&&($===null||$.lanes===0)&&($=s.lastRenderedReducer,$!==null))try{var ot=s.lastRenderedState,ht=$(ot,o);if(j.hasEagerState=!0,j.eagerState=ht,He$1(ht,ot)){var pt=s.interleaved;pt===null?(j.next=j,gh(s)):(j.next=pt.next,pt.next=j),s.interleaved=j;return}}catch{}finally{}o=hh(i,s,j,d),o!==null&&(j=R$1(),gi(o,i,d,j),Bi(o,s,d))}}function zi(i){var s=i.alternate;return i===M$1||s!==null&&s===M$1}function Ai(i,s){Jh=Ih=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function Bi(i,s,o){if(o&4194240){var d=s.lanes;d&=i.pendingLanes,o|=d,s.lanes=o,Cc(i,o)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(i,s){return Th().memoizedState=[i,s===void 0?null:s],i},useContext:eh,useEffect:mi,useImperativeHandle:function(i,s,o){return o=o!=null?o.concat([i]):null,ki(4194308,4,pi.bind(null,s,i),o)},useLayoutEffect:function(i,s){return ki(4194308,4,i,s)},useInsertionEffect:function(i,s){return ki(4,2,i,s)},useMemo:function(i,s){var o=Th();return s=s===void 0?null:s,i=i(),o.memoizedState=[i,s],i},useReducer:function(i,s,o){var d=Th();return s=o!==void 0?o(s):s,d.memoizedState=d.baseState=s,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},d.queue=i,i=i.dispatch=xi.bind(null,M$1,i),[d.memoizedState,i]},useRef:function(i){var s=Th();return i={current:i},s.memoizedState=i},useState:hi,useDebugValue:ri,useDeferredValue:function(i){return Th().memoizedState=i},useTransition:function(){var i=hi(!1),s=i[0];return i=vi.bind(null,i[1]),Th().memoizedState=i,[s,i]},useMutableSource:function(){},useSyncExternalStore:function(i,s,o){var d=M$1,j=Th();if(I){if(o===void 0)throw Error(p$1(407));o=o()}else{if(o=s(),Q===null)throw Error(p$1(349));Hh&30||di(d,s,o)}j.memoizedState=o;var $={value:o,getSnapshot:s};return j.queue=$,mi(ai.bind(null,d,$,i),[i]),d.flags|=2048,bi(9,ci.bind(null,d,$,o,s),void 0,null),o},useId:function(){var i=Th(),s=Q.identifierPrefix;if(I){var o=sg,d=rg;o=(d&~(1<<32-oc(d)-1)).toString(32)+o,s=":"+s+"R"+o,o=Kh++,0<o&&(s+="H"+o.toString(32)),s+=":"}else o=Lh++,s=":"+s+"r"+o.toString(32)+":";return i.memoizedState=s},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(i){var s=Uh();return ui(s,N.memoizedState,i)},useTransition:function(){var i=Wh(Vh)[0],s=Uh().memoizedState;return[i,s]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(i){var s=Uh();return N===null?s.memoizedState=i:ui(s,N.memoizedState,i)},useTransition:function(){var i=Xh(Vh)[0],s=Uh().memoizedState;return[i,s]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(i,s){if(i&&i.defaultProps){s=A$1({},s),i=i.defaultProps;for(var o in i)s[o]===void 0&&(s[o]=i[o]);return s}return s}function Di(i,s,o,d){s=i.memoizedState,o=o(d,s),o=o==null?s:A$1({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Ei={isMounted:function(i){return(i=i._reactInternals)?Vb(i)===i:!1},enqueueSetState:function(i,s,o){i=i._reactInternals;var d=R$1(),j=yi(i),$=mh(d,j);$.payload=s,o!=null&&($.callback=o),s=nh(i,$,j),s!==null&&(gi(s,i,j,d),oh(s,i,j))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var d=R$1(),j=yi(i),$=mh(d,j);$.tag=1,$.payload=s,o!=null&&($.callback=o),s=nh(i,$,j),s!==null&&(gi(s,i,j,d),oh(s,i,j))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=R$1(),d=yi(i),j=mh(o,d);j.tag=2,s!=null&&(j.callback=s),s=nh(i,j,d),s!==null&&(gi(s,i,d,o),oh(s,i,d))}};function Fi(i,s,o,d,j,$,ot){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,$,ot):s.prototype&&s.prototype.isPureReactComponent?!Ie(o,d)||!Ie(j,$):!0}function Gi(i,s,o){var d=!1,j=Vf,$=s.contextType;return typeof $=="object"&&$!==null?$=eh($):(j=Zf(s)?Xf:H.current,d=s.contextTypes,$=(d=d!=null)?Yf(i,j):Vf),s=new s(o,$),i.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ei,i.stateNode=s,s._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=j,i.__reactInternalMemoizedMaskedChildContext=$),s}function Hi(i,s,o,d){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,d),s.state!==i&&Ei.enqueueReplaceState(s,s.state,null)}function Ii(i,s,o,d){var j=i.stateNode;j.props=o,j.state=i.memoizedState,j.refs={},kh(i);var $=s.contextType;typeof $=="object"&&$!==null?j.context=eh($):($=Zf(s)?Xf:H.current,j.context=Yf(i,$)),j.state=i.memoizedState,$=s.getDerivedStateFromProps,typeof $=="function"&&(Di(i,s,$,o),j.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(s=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),s!==j.state&&Ei.enqueueReplaceState(j,j.state,null),qh(i,o,j,d),j.state=i.memoizedState),typeof j.componentDidMount=="function"&&(i.flags|=4194308)}function Ji(i,s){try{var o="",d=s;do o+=Pa(d),d=d.return;while(d);var j=o}catch($){j=`
Error generating stack: `+$.message+`
`+$.stack}return{value:i,source:s,stack:j,digest:null}}function Ki(i,s,o){return{value:i,source:null,stack:o??null,digest:s??null}}function Li(i,s){try{console.error(s.value)}catch(o){setTimeout(function(){throw o})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(i,s,o){o=mh(-1,o),o.tag=3,o.payload={element:null};var d=s.value;return o.callback=function(){Oi||(Oi=!0,Pi=d),Li(i,s)},o}function Qi(i,s,o){o=mh(-1,o),o.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var j=s.value;o.payload=function(){return d(j)},o.callback=function(){Li(i,s)}}var $=i.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(o.callback=function(){Li(i,s),typeof d!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var ot=s.stack;this.componentDidCatch(s.value,{componentStack:ot!==null?ot:""})}),o}function Si(i,s,o){var d=i.pingCache;if(d===null){d=i.pingCache=new Mi;var j=new Set;d.set(s,j)}else j=d.get(s),j===void 0&&(j=new Set,d.set(s,j));j.has(o)||(j.add(o),i=Ti.bind(null,i,s,o),s.then(i,i))}function Ui(i){do{var s;if((s=i.tag===13)&&(s=i.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return i;i=i.return}while(i!==null);return null}function Vi(i,s,o,d,j){return i.mode&1?(i.flags|=65536,i.lanes=j,i):(i===s?i.flags|=65536:(i.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(s=mh(-1,1),s.tag=2,nh(o,s,1))),o.lanes|=1),i)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(i,s,o,d){s.child=i===null?Vg(s,null,o,d):Ug(s,i.child,o,d)}function Yi(i,s,o,d,j){o=o.render;var $=s.ref;return ch(s,j),d=Nh(i,s,o,d,$,j),o=Sh(),i!==null&&!dh?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~j,Zi(i,s,j)):(I&&o&&vg(s),s.flags|=1,Xi(i,s,d,j),s.child)}function $i(i,s,o,d,j){if(i===null){var $=o.type;return typeof $=="function"&&!aj($)&&$.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(s.tag=15,s.type=$,bj(i,s,$,d,j)):(i=Rg(o.type,null,d,s,s.mode,j),i.ref=s.ref,i.return=s,s.child=i)}if($=i.child,!(i.lanes&j)){var ot=$.memoizedProps;if(o=o.compare,o=o!==null?o:Ie,o(ot,d)&&i.ref===s.ref)return Zi(i,s,j)}return s.flags|=1,i=Pg($,d),i.ref=s.ref,i.return=s,s.child=i}function bj(i,s,o,d,j){if(i!==null){var $=i.memoizedProps;if(Ie($,d)&&i.ref===s.ref)if(dh=!1,s.pendingProps=d=$,(i.lanes&j)!==0)i.flags&131072&&(dh=!0);else return s.lanes=i.lanes,Zi(i,s,j)}return cj(i,s,o,d,j)}function dj(i,s,o){var d=s.pendingProps,j=d.children,$=i!==null?i.memoizedState:null;if(d.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=o;else{if(!(o&1073741824))return i=$!==null?$.baseLanes|o:o,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:i,cachePool:null,transitions:null},s.updateQueue=null,G$1(ej,fj),fj|=i,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=$!==null?$.baseLanes:o,G$1(ej,fj),fj|=d}else $!==null?(d=$.baseLanes|o,s.memoizedState=null):d=o,G$1(ej,fj),fj|=d;return Xi(i,s,j,o),s.child}function gj(i,s){var o=s.ref;(i===null&&o!==null||i!==null&&i.ref!==o)&&(s.flags|=512,s.flags|=2097152)}function cj(i,s,o,d,j){var $=Zf(o)?Xf:H.current;return $=Yf(s,$),ch(s,j),o=Nh(i,s,o,d,$,j),d=Sh(),i!==null&&!dh?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~j,Zi(i,s,j)):(I&&d&&vg(s),s.flags|=1,Xi(i,s,o,j),s.child)}function hj(i,s,o,d,j){if(Zf(o)){var $=!0;cg(s)}else $=!1;if(ch(s,j),s.stateNode===null)ij(i,s),Gi(s,o,d),Ii(s,o,d,j),d=!0;else if(i===null){var ot=s.stateNode,ht=s.memoizedProps;ot.props=ht;var pt=ot.context,dt=o.contextType;typeof dt=="object"&&dt!==null?dt=eh(dt):(dt=Zf(o)?Xf:H.current,dt=Yf(s,dt));var gt=o.getDerivedStateFromProps,wt=typeof gt=="function"||typeof ot.getSnapshotBeforeUpdate=="function";wt||typeof ot.UNSAFE_componentWillReceiveProps!="function"&&typeof ot.componentWillReceiveProps!="function"||(ht!==d||pt!==dt)&&Hi(s,ot,d,dt),jh=!1;var bt=s.memoizedState;ot.state=bt,qh(s,d,ot,j),pt=s.memoizedState,ht!==d||bt!==pt||Wf.current||jh?(typeof gt=="function"&&(Di(s,o,gt,d),pt=s.memoizedState),(ht=jh||Fi(s,o,ht,d,bt,pt,dt))?(wt||typeof ot.UNSAFE_componentWillMount!="function"&&typeof ot.componentWillMount!="function"||(typeof ot.componentWillMount=="function"&&ot.componentWillMount(),typeof ot.UNSAFE_componentWillMount=="function"&&ot.UNSAFE_componentWillMount()),typeof ot.componentDidMount=="function"&&(s.flags|=4194308)):(typeof ot.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=pt),ot.props=d,ot.state=pt,ot.context=dt,d=ht):(typeof ot.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{ot=s.stateNode,lh(i,s),ht=s.memoizedProps,dt=s.type===s.elementType?ht:Ci(s.type,ht),ot.props=dt,wt=s.pendingProps,bt=ot.context,pt=o.contextType,typeof pt=="object"&&pt!==null?pt=eh(pt):(pt=Zf(o)?Xf:H.current,pt=Yf(s,pt));var St=o.getDerivedStateFromProps;(gt=typeof St=="function"||typeof ot.getSnapshotBeforeUpdate=="function")||typeof ot.UNSAFE_componentWillReceiveProps!="function"&&typeof ot.componentWillReceiveProps!="function"||(ht!==wt||bt!==pt)&&Hi(s,ot,d,pt),jh=!1,bt=s.memoizedState,ot.state=bt,qh(s,d,ot,j);var Ct=s.memoizedState;ht!==wt||bt!==Ct||Wf.current||jh?(typeof St=="function"&&(Di(s,o,St,d),Ct=s.memoizedState),(dt=jh||Fi(s,o,dt,d,bt,Ct,pt)||!1)?(gt||typeof ot.UNSAFE_componentWillUpdate!="function"&&typeof ot.componentWillUpdate!="function"||(typeof ot.componentWillUpdate=="function"&&ot.componentWillUpdate(d,Ct,pt),typeof ot.UNSAFE_componentWillUpdate=="function"&&ot.UNSAFE_componentWillUpdate(d,Ct,pt)),typeof ot.componentDidUpdate=="function"&&(s.flags|=4),typeof ot.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof ot.componentDidUpdate!="function"||ht===i.memoizedProps&&bt===i.memoizedState||(s.flags|=4),typeof ot.getSnapshotBeforeUpdate!="function"||ht===i.memoizedProps&&bt===i.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=Ct),ot.props=d,ot.state=Ct,ot.context=pt,d=dt):(typeof ot.componentDidUpdate!="function"||ht===i.memoizedProps&&bt===i.memoizedState||(s.flags|=4),typeof ot.getSnapshotBeforeUpdate!="function"||ht===i.memoizedProps&&bt===i.memoizedState||(s.flags|=1024),d=!1)}return jj(i,s,o,d,$,j)}function jj(i,s,o,d,j,$){gj(i,s);var ot=(s.flags&128)!==0;if(!d&&!ot)return j&&dg(s,o,!1),Zi(i,s,$);d=s.stateNode,Wi.current=s;var ht=ot&&typeof o.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,i!==null&&ot?(s.child=Ug(s,i.child,null,$),s.child=Ug(s,null,ht,$)):Xi(i,s,ht,$),s.memoizedState=d.state,j&&dg(s,o,!0),s.child}function kj(i){var s=i.stateNode;s.pendingContext?ag(i,s.pendingContext,s.pendingContext!==s.context):s.context&&ag(i,s.context,!1),yh(i,s.containerInfo)}function lj(i,s,o,d,j){return Ig(),Jg(j),s.flags|=256,Xi(i,s,o,d),s.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(i){return{baseLanes:i,cachePool:null,transitions:null}}function oj(i,s,o){var d=s.pendingProps,j=L.current,$=!1,ot=(s.flags&128)!==0,ht;if((ht=ot)||(ht=i!==null&&i.memoizedState===null?!1:(j&2)!==0),ht?($=!0,s.flags&=-129):(i===null||i.memoizedState!==null)&&(j|=1),G$1(L,j&1),i===null)return Eg(s),i=s.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(s.mode&1?i.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(ot=d.children,i=d.fallback,$?(d=s.mode,$=s.child,ot={mode:"hidden",children:ot},!(d&1)&&$!==null?($.childLanes=0,$.pendingProps=ot):$=pj(ot,d,0,null),i=Tg(i,d,o,null),$.return=s,i.return=s,$.sibling=i,s.child=$,s.child.memoizedState=nj(o),s.memoizedState=mj,i):qj(s,ot));if(j=i.memoizedState,j!==null&&(ht=j.dehydrated,ht!==null))return rj(i,s,ot,d,ht,j,o);if($){$=d.fallback,ot=s.mode,j=i.child,ht=j.sibling;var pt={mode:"hidden",children:d.children};return!(ot&1)&&s.child!==j?(d=s.child,d.childLanes=0,d.pendingProps=pt,s.deletions=null):(d=Pg(j,pt),d.subtreeFlags=j.subtreeFlags&14680064),ht!==null?$=Pg(ht,$):($=Tg($,ot,o,null),$.flags|=2),$.return=s,d.return=s,d.sibling=$,s.child=d,d=$,$=s.child,ot=i.child.memoizedState,ot=ot===null?nj(o):{baseLanes:ot.baseLanes|o,cachePool:null,transitions:ot.transitions},$.memoizedState=ot,$.childLanes=i.childLanes&~o,s.memoizedState=mj,d}return $=i.child,i=$.sibling,d=Pg($,{mode:"visible",children:d.children}),!(s.mode&1)&&(d.lanes=o),d.return=s,d.sibling=null,i!==null&&(o=s.deletions,o===null?(s.deletions=[i],s.flags|=16):o.push(i)),s.child=d,s.memoizedState=null,d}function qj(i,s){return s=pj({mode:"visible",children:s},i.mode,0,null),s.return=i,i.child=s}function sj(i,s,o,d){return d!==null&&Jg(d),Ug(s,i.child,null,o),i=qj(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function rj(i,s,o,d,j,$,ot){if(o)return s.flags&256?(s.flags&=-257,d=Ki(Error(p$1(422))),sj(i,s,ot,d)):s.memoizedState!==null?(s.child=i.child,s.flags|=128,null):($=d.fallback,j=s.mode,d=pj({mode:"visible",children:d.children},j,0,null),$=Tg($,j,ot,null),$.flags|=2,d.return=s,$.return=s,d.sibling=$,s.child=d,s.mode&1&&Ug(s,i.child,null,ot),s.child.memoizedState=nj(ot),s.memoizedState=mj,$);if(!(s.mode&1))return sj(i,s,ot,null);if(j.data==="$!"){if(d=j.nextSibling&&j.nextSibling.dataset,d)var ht=d.dgst;return d=ht,$=Error(p$1(419)),d=Ki($,d,void 0),sj(i,s,ot,d)}if(ht=(ot&i.childLanes)!==0,dh||ht){if(d=Q,d!==null){switch(ot&-ot){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=j&(d.suspendedLanes|ot)?0:j,j!==0&&j!==$.retryLane&&($.retryLane=j,ih(i,j),gi(d,i,j,-1))}return tj(),d=Ki(Error(p$1(421))),sj(i,s,ot,d)}return j.data==="$?"?(s.flags|=128,s.child=i.child,s=uj.bind(null,i),j._reactRetry=s,null):(i=$.treeContext,yg=Lf(j.nextSibling),xg=s,I=!0,zg=null,i!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=i.id,sg=i.overflow,qg=s),s=qj(s,d.children),s.flags|=4096,s)}function vj(i,s,o){i.lanes|=s;var d=i.alternate;d!==null&&(d.lanes|=s),bh(i.return,s,o)}function wj(i,s,o,d,j){var $=i.memoizedState;$===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:o,tailMode:j}:($.isBackwards=s,$.rendering=null,$.renderingStartTime=0,$.last=d,$.tail=o,$.tailMode=j)}function xj(i,s,o){var d=s.pendingProps,j=d.revealOrder,$=d.tail;if(Xi(i,s,d.children,o),d=L.current,d&2)d=d&1|2,s.flags|=128;else{if(i!==null&&i.flags&128)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&vj(i,o,s);else if(i.tag===19)vj(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(G$1(L,d),!(s.mode&1))s.memoizedState=null;else switch(j){case"forwards":for(o=s.child,j=null;o!==null;)i=o.alternate,i!==null&&Ch(i)===null&&(j=o),o=o.sibling;o=j,o===null?(j=s.child,s.child=null):(j=o.sibling,o.sibling=null),wj(s,!1,j,o,$);break;case"backwards":for(o=null,j=s.child,s.child=null;j!==null;){if(i=j.alternate,i!==null&&Ch(i)===null){s.child=j;break}i=j.sibling,j.sibling=o,o=j,j=i}wj(s,!0,o,null,$);break;case"together":wj(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ij(i,s){!(s.mode&1)&&i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2)}function Zi(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),rh|=s.lanes,!(o&s.childLanes))return null;if(i!==null&&s.child!==i.child)throw Error(p$1(153));if(s.child!==null){for(i=s.child,o=Pg(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=Pg(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function yj(i,s,o){switch(s.tag){case 3:kj(s),Ig();break;case 5:Ah(s);break;case 1:Zf(s.type)&&cg(s);break;case 4:yh(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,j=s.memoizedProps.value;G$1(Wg,d._currentValue),d._currentValue=j;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(G$1(L,L.current&1),s.flags|=128,null):o&s.child.childLanes?oj(i,s,o):(G$1(L,L.current&1),i=Zi(i,s,o),i!==null?i.sibling:null);G$1(L,L.current&1);break;case 19:if(d=(o&s.childLanes)!==0,i.flags&128){if(d)return xj(i,s,o);s.flags|=128}if(j=s.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),G$1(L,L.current),d)break;return null;case 22:case 23:return s.lanes=0,dj(i,s,o)}return Zi(i,s,o)}var zj,Aj,Bj,Cj;zj=function(i,s){for(var o=s.child;o!==null;){if(o.tag===5||o.tag===6)i.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Aj=function(){};Bj=function(i,s,o,d){var j=i.memoizedProps;if(j!==d){i=s.stateNode,xh(uh.current);var $=null;switch(o){case"input":j=Ya(i,j),d=Ya(i,d),$=[];break;case"select":j=A$1({},j,{value:void 0}),d=A$1({},d,{value:void 0}),$=[];break;case"textarea":j=gb(i,j),d=gb(i,d),$=[];break;default:typeof j.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=Bf)}ub(o,d);var ot;o=null;for(dt in j)if(!d.hasOwnProperty(dt)&&j.hasOwnProperty(dt)&&j[dt]!=null)if(dt==="style"){var ht=j[dt];for(ot in ht)ht.hasOwnProperty(ot)&&(o||(o={}),o[ot]="")}else dt!=="dangerouslySetInnerHTML"&&dt!=="children"&&dt!=="suppressContentEditableWarning"&&dt!=="suppressHydrationWarning"&&dt!=="autoFocus"&&(ea.hasOwnProperty(dt)?$||($=[]):($=$||[]).push(dt,null));for(dt in d){var pt=d[dt];if(ht=j?.[dt],d.hasOwnProperty(dt)&&pt!==ht&&(pt!=null||ht!=null))if(dt==="style")if(ht){for(ot in ht)!ht.hasOwnProperty(ot)||pt&&pt.hasOwnProperty(ot)||(o||(o={}),o[ot]="");for(ot in pt)pt.hasOwnProperty(ot)&&ht[ot]!==pt[ot]&&(o||(o={}),o[ot]=pt[ot])}else o||($||($=[]),$.push(dt,o)),o=pt;else dt==="dangerouslySetInnerHTML"?(pt=pt?pt.__html:void 0,ht=ht?ht.__html:void 0,pt!=null&&ht!==pt&&($=$||[]).push(dt,pt)):dt==="children"?typeof pt!="string"&&typeof pt!="number"||($=$||[]).push(dt,""+pt):dt!=="suppressContentEditableWarning"&&dt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(dt)?(pt!=null&&dt==="onScroll"&&D$1("scroll",i),$||ht===pt||($=[])):($=$||[]).push(dt,pt))}o&&($=$||[]).push("style",o);var dt=$;(s.updateQueue=dt)&&(s.flags|=4)}};Cj=function(i,s,o,d){o!==d&&(s.flags|=4)};function Dj(i,s){if(!I)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function S$1(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,d=0;if(s)for(var j=i.child;j!==null;)o|=j.lanes|j.childLanes,d|=j.subtreeFlags&14680064,d|=j.flags&14680064,j.return=i,j=j.sibling;else for(j=i.child;j!==null;)o|=j.lanes|j.childLanes,d|=j.subtreeFlags,d|=j.flags,j.return=i,j=j.sibling;return i.subtreeFlags|=d,i.childLanes=o,s}function Ej(i,s,o){var d=s.pendingProps;switch(wg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(s),null;case 1:return Zf(s.type)&&$f(),S$1(s),null;case 3:return d=s.stateNode,zh(),E$1(Wf),E$1(H),Eh(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(Gg(s)?s.flags|=4:i===null||i.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(i,s),S$1(s),null;case 5:Bh(s);var j=xh(wh.current);if(o=s.type,i!==null&&s.stateNode!=null)Bj(i,s,o,d,j),i.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(p$1(166));return S$1(s),null}if(i=xh(uh.current),Gg(s)){d=s.stateNode,o=s.type;var $=s.memoizedProps;switch(d[Of]=s,d[Pf]=$,i=(s.mode&1)!==0,o){case"dialog":D$1("cancel",d),D$1("close",d);break;case"iframe":case"object":case"embed":D$1("load",d);break;case"video":case"audio":for(j=0;j<lf.length;j++)D$1(lf[j],d);break;case"source":D$1("error",d);break;case"img":case"image":case"link":D$1("error",d),D$1("load",d);break;case"details":D$1("toggle",d);break;case"input":Za(d,$),D$1("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!$.multiple},D$1("invalid",d);break;case"textarea":hb(d,$),D$1("invalid",d)}ub(o,$),j=null;for(var ot in $)if($.hasOwnProperty(ot)){var ht=$[ot];ot==="children"?typeof ht=="string"?d.textContent!==ht&&($.suppressHydrationWarning!==!0&&Af(d.textContent,ht,i),j=["children",ht]):typeof ht=="number"&&d.textContent!==""+ht&&($.suppressHydrationWarning!==!0&&Af(d.textContent,ht,i),j=["children",""+ht]):ea.hasOwnProperty(ot)&&ht!=null&&ot==="onScroll"&&D$1("scroll",d)}switch(o){case"input":Va(d),db(d,$,!0);break;case"textarea":Va(d),jb(d);break;case"select":case"option":break;default:typeof $.onClick=="function"&&(d.onclick=Bf)}d=j,s.updateQueue=d,d!==null&&(s.flags|=4)}else{ot=j.nodeType===9?j:j.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=kb(o)),i==="http://www.w3.org/1999/xhtml"?o==="script"?(i=ot.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=ot.createElement(o,{is:d.is}):(i=ot.createElement(o),o==="select"&&(ot=i,d.multiple?ot.multiple=!0:d.size&&(ot.size=d.size))):i=ot.createElementNS(i,o),i[Of]=s,i[Pf]=d,zj(i,s,!1,!1),s.stateNode=i;t:{switch(ot=vb(o,d),o){case"dialog":D$1("cancel",i),D$1("close",i),j=d;break;case"iframe":case"object":case"embed":D$1("load",i),j=d;break;case"video":case"audio":for(j=0;j<lf.length;j++)D$1(lf[j],i);j=d;break;case"source":D$1("error",i),j=d;break;case"img":case"image":case"link":D$1("error",i),D$1("load",i),j=d;break;case"details":D$1("toggle",i),j=d;break;case"input":Za(i,d),j=Ya(i,d),D$1("invalid",i);break;case"option":j=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},j=A$1({},d,{value:void 0}),D$1("invalid",i);break;case"textarea":hb(i,d),j=gb(i,d),D$1("invalid",i);break;default:j=d}ub(o,j),ht=j;for($ in ht)if(ht.hasOwnProperty($)){var pt=ht[$];$==="style"?sb(i,pt):$==="dangerouslySetInnerHTML"?(pt=pt?pt.__html:void 0,pt!=null&&nb(i,pt)):$==="children"?typeof pt=="string"?(o!=="textarea"||pt!=="")&&ob(i,pt):typeof pt=="number"&&ob(i,""+pt):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(ea.hasOwnProperty($)?pt!=null&&$==="onScroll"&&D$1("scroll",i):pt!=null&&ta(i,$,pt,ot))}switch(o){case"input":Va(i),db(i,d,!1);break;case"textarea":Va(i),jb(i);break;case"option":d.value!=null&&i.setAttribute("value",""+Sa(d.value));break;case"select":i.multiple=!!d.multiple,$=d.value,$!=null?fb(i,!!d.multiple,$,!1):d.defaultValue!=null&&fb(i,!!d.multiple,d.defaultValue,!0);break;default:typeof j.onClick=="function"&&(i.onclick=Bf)}switch(o){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return S$1(s),null;case 6:if(i&&s.stateNode!=null)Cj(i,s,i.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(p$1(166));if(o=xh(wh.current),xh(uh.current),Gg(s)){if(d=s.stateNode,o=s.memoizedProps,d[Of]=s,($=d.nodeValue!==o)&&(i=xg,i!==null))switch(i.tag){case 3:Af(d.nodeValue,o,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Af(d.nodeValue,o,(i.mode&1)!==0)}$&&(s.flags|=4)}else d=(o.nodeType===9?o:o.ownerDocument).createTextNode(d),d[Of]=s,s.stateNode=d}return S$1(s),null;case 13:if(E$1(L),d=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(I&&yg!==null&&s.mode&1&&!(s.flags&128))Hg(),Ig(),s.flags|=98560,$=!1;else if($=Gg(s),d!==null&&d.dehydrated!==null){if(i===null){if(!$)throw Error(p$1(318));if($=s.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(p$1(317));$[Of]=s}else Ig(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;S$1(s),$=!1}else zg!==null&&(Fj(zg),zg=null),$=!0;if(!$)return s.flags&65536?s:null}return s.flags&128?(s.lanes=o,s):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(s.child.flags|=8192,s.mode&1&&(i===null||L.current&1?T===0&&(T=3):tj())),s.updateQueue!==null&&(s.flags|=4),S$1(s),null);case 4:return zh(),Aj(i,s),i===null&&sf(s.stateNode.containerInfo),S$1(s),null;case 10:return ah(s.type._context),S$1(s),null;case 17:return Zf(s.type)&&$f(),S$1(s),null;case 19:if(E$1(L),$=s.memoizedState,$===null)return S$1(s),null;if(d=(s.flags&128)!==0,ot=$.rendering,ot===null)if(d)Dj($,!1);else{if(T!==0||i!==null&&i.flags&128)for(i=s.child;i!==null;){if(ot=Ch(i),ot!==null){for(s.flags|=128,Dj($,!1),d=ot.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=o,o=s.child;o!==null;)$=o,i=d,$.flags&=14680066,ot=$.alternate,ot===null?($.childLanes=0,$.lanes=i,$.child=null,$.subtreeFlags=0,$.memoizedProps=null,$.memoizedState=null,$.updateQueue=null,$.dependencies=null,$.stateNode=null):($.childLanes=ot.childLanes,$.lanes=ot.lanes,$.child=ot.child,$.subtreeFlags=0,$.deletions=null,$.memoizedProps=ot.memoizedProps,$.memoizedState=ot.memoizedState,$.updateQueue=ot.updateQueue,$.type=ot.type,i=ot.dependencies,$.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),o=o.sibling;return G$1(L,L.current&1|2),s.child}i=i.sibling}$.tail!==null&&B()>Gj&&(s.flags|=128,d=!0,Dj($,!1),s.lanes=4194304)}else{if(!d)if(i=Ch(ot),i!==null){if(s.flags|=128,d=!0,o=i.updateQueue,o!==null&&(s.updateQueue=o,s.flags|=4),Dj($,!0),$.tail===null&&$.tailMode==="hidden"&&!ot.alternate&&!I)return S$1(s),null}else 2*B()-$.renderingStartTime>Gj&&o!==1073741824&&(s.flags|=128,d=!0,Dj($,!1),s.lanes=4194304);$.isBackwards?(ot.sibling=s.child,s.child=ot):(o=$.last,o!==null?o.sibling=ot:s.child=ot,$.last=ot)}return $.tail!==null?(s=$.tail,$.rendering=s,$.tail=s.sibling,$.renderingStartTime=B(),s.sibling=null,o=L.current,G$1(L,d?o&1|2:o&1),s):(S$1(s),null);case 22:case 23:return Hj(),d=s.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(s.flags|=8192),d&&s.mode&1?fj&1073741824&&(S$1(s),s.subtreeFlags&6&&(s.flags|=8192)):S$1(s),null;case 24:return null;case 25:return null}throw Error(p$1(156,s.tag))}function Ij(i,s){switch(wg(s),s.tag){case 1:return Zf(s.type)&&$f(),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return zh(),E$1(Wf),E$1(H),Eh(),i=s.flags,i&65536&&!(i&128)?(s.flags=i&-65537|128,s):null;case 5:return Bh(s),null;case 13:if(E$1(L),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(p$1(340));Ig()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return E$1(L),null;case 4:return zh(),null;case 10:return ah(s.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(i,s){var o=i.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(d){W(i,s,d)}else o.current=null}function Mj(i,s,o){try{o()}catch(d){W(i,s,d)}}var Nj=!1;function Oj(i,s){if(Cf=dd,i=Me(),Ne(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var d=o.getSelection&&o.getSelection();if(d&&d.rangeCount!==0){o=d.anchorNode;var j=d.anchorOffset,$=d.focusNode;d=d.focusOffset;try{o.nodeType,$.nodeType}catch{o=null;break t}var ot=0,ht=-1,pt=-1,dt=0,gt=0,wt=i,bt=null;e:for(;;){for(var St;wt!==o||j!==0&&wt.nodeType!==3||(ht=ot+j),wt!==$||d!==0&&wt.nodeType!==3||(pt=ot+d),wt.nodeType===3&&(ot+=wt.nodeValue.length),(St=wt.firstChild)!==null;)bt=wt,wt=St;for(;;){if(wt===i)break e;if(bt===o&&++dt===j&&(ht=ot),bt===$&&++gt===d&&(pt=ot),(St=wt.nextSibling)!==null)break;wt=bt,bt=wt.parentNode}wt=St}o=ht===-1||pt===-1?null:{start:ht,end:pt}}else o=null}o=o||{start:0,end:0}}else o=null;for(Df={focusedElem:i,selectionRange:o},dd=!1,V$1=s;V$1!==null;)if(s=V$1,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,V$1=i;else for(;V$1!==null;){s=V$1;try{var Ct=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ct!==null){var Et=Ct.memoizedProps,Pt=Ct.memoizedState,_t=s.stateNode,yt=_t.getSnapshotBeforeUpdate(s.elementType===s.type?Et:Ci(s.type,Et),Pt);_t.__reactInternalSnapshotBeforeUpdate=yt}break;case 3:var xt=s.stateNode.containerInfo;xt.nodeType===1?xt.textContent="":xt.nodeType===9&&xt.documentElement&&xt.removeChild(xt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(Dt){W(s,s.return,Dt)}if(i=s.sibling,i!==null){i.return=s.return,V$1=i;break}V$1=s.return}return Ct=Nj,Nj=!1,Ct}function Pj(i,s,o){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var j=d=d.next;do{if((j.tag&i)===i){var $=j.destroy;j.destroy=void 0,$!==void 0&&Mj(s,o,$)}j=j.next}while(j!==d)}}function Qj(i,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&i)===i){var d=o.create;o.destroy=d()}o=o.next}while(o!==s)}}function Rj(i){var s=i.ref;if(s!==null){var o=i.stateNode;switch(i.tag){case 5:i=o;break;default:i=o}typeof s=="function"?s(i):s.current=i}}function Sj(i){var s=i.alternate;s!==null&&(i.alternate=null,Sj(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&(delete s[Of],delete s[Pf],delete s[of],delete s[Qf],delete s[Rf])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Tj(i){return i.tag===5||i.tag===3||i.tag===4}function Uj(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||Tj(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Vj(i,s,o){var d=i.tag;if(d===5||d===6)i=i.stateNode,s?o.nodeType===8?o.parentNode.insertBefore(i,s):o.insertBefore(i,s):(o.nodeType===8?(s=o.parentNode,s.insertBefore(i,o)):(s=o,s.appendChild(i)),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Bf));else if(d!==4&&(i=i.child,i!==null))for(Vj(i,s,o),i=i.sibling;i!==null;)Vj(i,s,o),i=i.sibling}function Wj(i,s,o){var d=i.tag;if(d===5||d===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(Wj(i,s,o),i=i.sibling;i!==null;)Wj(i,s,o),i=i.sibling}var X=null,Xj=!1;function Yj(i,s,o){for(o=o.child;o!==null;)Zj(i,s,o),o=o.sibling}function Zj(i,s,o){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,o)}catch{}switch(o.tag){case 5:U||Lj(o,s);case 6:var d=X,j=Xj;X=null,Yj(i,s,o),X=d,Xj=j,X!==null&&(Xj?(i=X,o=o.stateNode,i.nodeType===8?i.parentNode.removeChild(o):i.removeChild(o)):X.removeChild(o.stateNode));break;case 18:X!==null&&(Xj?(i=X,o=o.stateNode,i.nodeType===8?Kf(i.parentNode,o):i.nodeType===1&&Kf(i,o),bd(i)):Kf(X,o.stateNode));break;case 4:d=X,j=Xj,X=o.stateNode.containerInfo,Xj=!0,Yj(i,s,o),X=d,Xj=j;break;case 0:case 11:case 14:case 15:if(!U&&(d=o.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){j=d=d.next;do{var $=j,ot=$.destroy;$=$.tag,ot!==void 0&&($&2||$&4)&&Mj(o,s,ot),j=j.next}while(j!==d)}Yj(i,s,o);break;case 1:if(!U&&(Lj(o,s),d=o.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=o.memoizedProps,d.state=o.memoizedState,d.componentWillUnmount()}catch(ht){W(o,s,ht)}Yj(i,s,o);break;case 21:Yj(i,s,o);break;case 22:o.mode&1?(U=(d=U)||o.memoizedState!==null,Yj(i,s,o),U=d):Yj(i,s,o);break;default:Yj(i,s,o)}}function ak(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var o=i.stateNode;o===null&&(o=i.stateNode=new Kj),s.forEach(function(d){var j=bk.bind(null,i,d);o.has(d)||(o.add(d),d.then(j,j))})}}function ck(i,s){var o=s.deletions;if(o!==null)for(var d=0;d<o.length;d++){var j=o[d];try{var $=i,ot=s,ht=ot;t:for(;ht!==null;){switch(ht.tag){case 5:X=ht.stateNode,Xj=!1;break t;case 3:X=ht.stateNode.containerInfo,Xj=!0;break t;case 4:X=ht.stateNode.containerInfo,Xj=!0;break t}ht=ht.return}if(X===null)throw Error(p$1(160));Zj($,ot,j),X=null,Xj=!1;var pt=j.alternate;pt!==null&&(pt.return=null),j.return=null}catch(dt){W(j,s,dt)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)dk(s,i),s=s.sibling}function dk(i,s){var o=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ck(s,i),ek(i),d&4){try{Pj(3,i,i.return),Qj(3,i)}catch(Et){W(i,i.return,Et)}try{Pj(5,i,i.return)}catch(Et){W(i,i.return,Et)}}break;case 1:ck(s,i),ek(i),d&512&&o!==null&&Lj(o,o.return);break;case 5:if(ck(s,i),ek(i),d&512&&o!==null&&Lj(o,o.return),i.flags&32){var j=i.stateNode;try{ob(j,"")}catch(Et){W(i,i.return,Et)}}if(d&4&&(j=i.stateNode,j!=null)){var $=i.memoizedProps,ot=o!==null?o.memoizedProps:$,ht=i.type,pt=i.updateQueue;if(i.updateQueue=null,pt!==null)try{ht==="input"&&$.type==="radio"&&$.name!=null&&ab(j,$),vb(ht,ot);var dt=vb(ht,$);for(ot=0;ot<pt.length;ot+=2){var gt=pt[ot],wt=pt[ot+1];gt==="style"?sb(j,wt):gt==="dangerouslySetInnerHTML"?nb(j,wt):gt==="children"?ob(j,wt):ta(j,gt,wt,dt)}switch(ht){case"input":bb(j,$);break;case"textarea":ib(j,$);break;case"select":var bt=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!$.multiple;var St=$.value;St!=null?fb(j,!!$.multiple,St,!1):bt!==!!$.multiple&&($.defaultValue!=null?fb(j,!!$.multiple,$.defaultValue,!0):fb(j,!!$.multiple,$.multiple?[]:"",!1))}j[Pf]=$}catch(Et){W(i,i.return,Et)}}break;case 6:if(ck(s,i),ek(i),d&4){if(i.stateNode===null)throw Error(p$1(162));j=i.stateNode,$=i.memoizedProps;try{j.nodeValue=$}catch(Et){W(i,i.return,Et)}}break;case 3:if(ck(s,i),ek(i),d&4&&o!==null&&o.memoizedState.isDehydrated)try{bd(s.containerInfo)}catch(Et){W(i,i.return,Et)}break;case 4:ck(s,i),ek(i);break;case 13:ck(s,i),ek(i),j=i.child,j.flags&8192&&($=j.memoizedState!==null,j.stateNode.isHidden=$,!$||j.alternate!==null&&j.alternate.memoizedState!==null||(fk=B())),d&4&&ak(i);break;case 22:if(gt=o!==null&&o.memoizedState!==null,i.mode&1?(U=(dt=U)||gt,ck(s,i),U=dt):ck(s,i),ek(i),d&8192){if(dt=i.memoizedState!==null,(i.stateNode.isHidden=dt)&&!gt&&i.mode&1)for(V$1=i,gt=i.child;gt!==null;){for(wt=V$1=gt;V$1!==null;){switch(bt=V$1,St=bt.child,bt.tag){case 0:case 11:case 14:case 15:Pj(4,bt,bt.return);break;case 1:Lj(bt,bt.return);var Ct=bt.stateNode;if(typeof Ct.componentWillUnmount=="function"){d=bt,o=bt.return;try{s=d,Ct.props=s.memoizedProps,Ct.state=s.memoizedState,Ct.componentWillUnmount()}catch(Et){W(d,o,Et)}}break;case 5:Lj(bt,bt.return);break;case 22:if(bt.memoizedState!==null){gk(wt);continue}}St!==null?(St.return=bt,V$1=St):gk(wt)}gt=gt.sibling}t:for(gt=null,wt=i;;){if(wt.tag===5){if(gt===null){gt=wt;try{j=wt.stateNode,dt?($=j.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none"):(ht=wt.stateNode,pt=wt.memoizedProps.style,ot=pt!=null&&pt.hasOwnProperty("display")?pt.display:null,ht.style.display=rb("display",ot))}catch(Et){W(i,i.return,Et)}}}else if(wt.tag===6){if(gt===null)try{wt.stateNode.nodeValue=dt?"":wt.memoizedProps}catch(Et){W(i,i.return,Et)}}else if((wt.tag!==22&&wt.tag!==23||wt.memoizedState===null||wt===i)&&wt.child!==null){wt.child.return=wt,wt=wt.child;continue}if(wt===i)break t;for(;wt.sibling===null;){if(wt.return===null||wt.return===i)break t;gt===wt&&(gt=null),wt=wt.return}gt===wt&&(gt=null),wt.sibling.return=wt.return,wt=wt.sibling}}break;case 19:ck(s,i),ek(i),d&4&&ak(i);break;case 21:break;default:ck(s,i),ek(i)}}function ek(i){var s=i.flags;if(s&2){try{t:{for(var o=i.return;o!==null;){if(Tj(o)){var d=o;break t}o=o.return}throw Error(p$1(160))}switch(d.tag){case 5:var j=d.stateNode;d.flags&32&&(ob(j,""),d.flags&=-33);var $=Uj(i);Wj(i,$,j);break;case 3:case 4:var ot=d.stateNode.containerInfo,ht=Uj(i);Vj(i,ht,ot);break;default:throw Error(p$1(161))}}catch(pt){W(i,i.return,pt)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function hk(i,s,o){V$1=i,ik(i)}function ik(i,s,o){for(var d=(i.mode&1)!==0;V$1!==null;){var j=V$1,$=j.child;if(j.tag===22&&d){var ot=j.memoizedState!==null||Jj;if(!ot){var ht=j.alternate,pt=ht!==null&&ht.memoizedState!==null||U;ht=Jj;var dt=U;if(Jj=ot,(U=pt)&&!dt)for(V$1=j;V$1!==null;)ot=V$1,pt=ot.child,ot.tag===22&&ot.memoizedState!==null?jk(j):pt!==null?(pt.return=ot,V$1=pt):jk(j);for(;$!==null;)V$1=$,ik($),$=$.sibling;V$1=j,Jj=ht,U=dt}kk(i)}else j.subtreeFlags&8772&&$!==null?($.return=j,V$1=$):kk(i)}}function kk(i){for(;V$1!==null;){var s=V$1;if(s.flags&8772){var o=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:U||Qj(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!U)if(o===null)d.componentDidMount();else{var j=s.elementType===s.type?o.memoizedProps:Ci(s.type,o.memoizedProps);d.componentDidUpdate(j,o.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var $=s.updateQueue;$!==null&&sh(s,$,d);break;case 3:var ot=s.updateQueue;if(ot!==null){if(o=null,s.child!==null)switch(s.child.tag){case 5:o=s.child.stateNode;break;case 1:o=s.child.stateNode}sh(s,ot,o)}break;case 5:var ht=s.stateNode;if(o===null&&s.flags&4){o=ht;var pt=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":pt.autoFocus&&o.focus();break;case"img":pt.src&&(o.src=pt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var dt=s.alternate;if(dt!==null){var gt=dt.memoizedState;if(gt!==null){var wt=gt.dehydrated;wt!==null&&bd(wt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U||s.flags&512&&Rj(s)}catch(bt){W(s,s.return,bt)}}if(s===i){V$1=null;break}if(o=s.sibling,o!==null){o.return=s.return,V$1=o;break}V$1=s.return}}function gk(i){for(;V$1!==null;){var s=V$1;if(s===i){V$1=null;break}var o=s.sibling;if(o!==null){o.return=s.return,V$1=o;break}V$1=s.return}}function jk(i){for(;V$1!==null;){var s=V$1;try{switch(s.tag){case 0:case 11:case 15:var o=s.return;try{Qj(4,s)}catch(pt){W(s,o,pt)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var j=s.return;try{d.componentDidMount()}catch(pt){W(s,j,pt)}}var $=s.return;try{Rj(s)}catch(pt){W(s,$,pt)}break;case 5:var ot=s.return;try{Rj(s)}catch(pt){W(s,ot,pt)}}}catch(pt){W(s,s.return,pt)}if(s===i){V$1=null;break}var ht=s.sibling;if(ht!==null){ht.return=s.return,V$1=ht;break}V$1=s.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(i){return i.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(i=C,i!==0||(i=window.event,i=i===void 0?16:jd(i.type)),i):1}function gi(i,s,o,d){if(50<yk)throw yk=0,zk=null,Error(p$1(185));Ac(i,o,d),(!(K&2)||i!==Q)&&(i===Q&&(!(K&2)&&(qk|=o),T===4&&Ck(i,Z)),Dk(i,d),o===1&&K===0&&!(s.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(i,s){var o=i.callbackNode;wc(i,s);var d=uc(i,i===Q?Z:0);if(d===0)o!==null&&bc(o),i.callbackNode=null,i.callbackPriority=0;else if(s=d&-d,i.callbackPriority!==s){if(o!=null&&bc(o),s===1)i.tag===0?ig(Ek.bind(null,i)):hg(Ek.bind(null,i)),Jf(function(){!(K&6)&&jg()}),o=null;else{switch(Dc(d)){case 1:o=fc;break;case 4:o=gc;break;case 16:o=hc;break;case 536870912:o=jc;break;default:o=hc}o=Fk(o,Gk.bind(null,i))}i.callbackPriority=s,i.callbackNode=o}}function Gk(i,s){if(Ak=-1,Bk=0,K&6)throw Error(p$1(327));var o=i.callbackNode;if(Hk()&&i.callbackNode!==o)return null;var d=uc(i,i===Q?Z:0);if(d===0)return null;if(d&30||d&i.expiredLanes||s)s=Ik(i,d);else{s=d;var j=K;K|=2;var $=Jk();(Q!==i||Z!==s)&&(uk=null,Gj=B()+500,Kk(i,s));do try{Lk();break}catch(ht){Mk(i,ht)}while(!0);$g(),mk.current=$,K=j,Y!==null?s=0:(Q=null,Z=0,s=T)}if(s!==0){if(s===2&&(j=xc(i),j!==0&&(d=j,s=Nk(i,j))),s===1)throw o=pk,Kk(i,0),Ck(i,d),Dk(i,B()),o;if(s===6)Ck(i,d);else{if(j=i.current.alternate,!(d&30)&&!Ok(j)&&(s=Ik(i,d),s===2&&($=xc(i),$!==0&&(d=$,s=Nk(i,$))),s===1))throw o=pk,Kk(i,0),Ck(i,d),Dk(i,B()),o;switch(i.finishedWork=j,i.finishedLanes=d,s){case 0:case 1:throw Error(p$1(345));case 2:Pk(i,tk,uk);break;case 3:if(Ck(i,d),(d&130023424)===d&&(s=fk+500-B(),10<s)){if(uc(i,0)!==0)break;if(j=i.suspendedLanes,(j&d)!==d){R$1(),i.pingedLanes|=i.suspendedLanes&j;break}i.timeoutHandle=Ff(Pk.bind(null,i,tk,uk),s);break}Pk(i,tk,uk);break;case 4:if(Ck(i,d),(d&4194240)===d)break;for(s=i.eventTimes,j=-1;0<d;){var ot=31-oc(d);$=1<<ot,ot=s[ot],ot>j&&(j=ot),d&=~$}if(d=j,d=B()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*lk(d/1960))-d,10<d){i.timeoutHandle=Ff(Pk.bind(null,i,tk,uk),d);break}Pk(i,tk,uk);break;case 5:Pk(i,tk,uk);break;default:throw Error(p$1(329))}}}return Dk(i,B()),i.callbackNode===o?Gk.bind(null,i):null}function Nk(i,s){var o=sk;return i.current.memoizedState.isDehydrated&&(Kk(i,s).flags|=256),i=Ik(i,s),i!==2&&(s=tk,tk=o,s!==null&&Fj(s)),i}function Fj(i){tk===null?tk=i:tk.push.apply(tk,i)}function Ok(i){for(var s=i;;){if(s.flags&16384){var o=s.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var d=0;d<o.length;d++){var j=o[d],$=j.getSnapshot;j=j.value;try{if(!He$1($(),j))return!1}catch{return!1}}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ck(i,s){for(s&=~rk,s&=~qk,i.suspendedLanes|=s,i.pingedLanes&=~s,i=i.expirationTimes;0<s;){var o=31-oc(s),d=1<<o;i[o]=-1,s&=~d}}function Ek(i){if(K&6)throw Error(p$1(327));Hk();var s=uc(i,0);if(!(s&1))return Dk(i,B()),null;var o=Ik(i,s);if(i.tag!==0&&o===2){var d=xc(i);d!==0&&(s=d,o=Nk(i,d))}if(o===1)throw o=pk,Kk(i,0),Ck(i,s),Dk(i,B()),o;if(o===6)throw Error(p$1(345));return i.finishedWork=i.current.alternate,i.finishedLanes=s,Pk(i,tk,uk),Dk(i,B()),null}function Qk(i,s){var o=K;K|=1;try{return i(s)}finally{K=o,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(i){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var s=K;K|=1;var o=ok.transition,d=C;try{if(ok.transition=null,C=1,i)return i()}finally{C=d,ok.transition=o,K=s,!(K&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(i,s){i.finishedWork=null,i.finishedLanes=0;var o=i.timeoutHandle;if(o!==-1&&(i.timeoutHandle=-1,Gf(o)),Y!==null)for(o=Y.return;o!==null;){var d=o;switch(wg(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&$f();break;case 3:zh(),E$1(Wf),E$1(H),Eh();break;case 5:Bh(d);break;case 4:zh();break;case 13:E$1(L);break;case 19:E$1(L);break;case 10:ah(d.type._context);break;case 22:case 23:Hj()}o=o.return}if(Q=i,Y=i=Pg(i.current,null),Z=fj=s,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(s=0;s<fh.length;s++)if(o=fh[s],d=o.interleaved,d!==null){o.interleaved=null;var j=d.next,$=o.pending;if($!==null){var ot=$.next;$.next=j,d.next=ot}o.pending=d}fh=null}return i}function Mk(i,s){do{var o=Y;try{if($g(),Fh.current=Rh,Ih){for(var d=M$1.memoizedState;d!==null;){var j=d.queue;j!==null&&(j.pending=null),d=d.next}Ih=!1}if(Hh=0,O$1=N=M$1=null,Jh=!1,Kh=0,nk.current=null,o===null||o.return===null){T=1,pk=s,Y=null;break}t:{var $=i,ot=o.return,ht=o,pt=s;if(s=Z,ht.flags|=32768,pt!==null&&typeof pt=="object"&&typeof pt.then=="function"){var dt=pt,gt=ht,wt=gt.tag;if(!(gt.mode&1)&&(wt===0||wt===11||wt===15)){var bt=gt.alternate;bt?(gt.updateQueue=bt.updateQueue,gt.memoizedState=bt.memoizedState,gt.lanes=bt.lanes):(gt.updateQueue=null,gt.memoizedState=null)}var St=Ui(ot);if(St!==null){St.flags&=-257,Vi(St,ot,ht,$,s),St.mode&1&&Si($,dt,s),s=St,pt=dt;var Ct=s.updateQueue;if(Ct===null){var Et=new Set;Et.add(pt),s.updateQueue=Et}else Ct.add(pt);break t}else{if(!(s&1)){Si($,dt,s),tj();break t}pt=Error(p$1(426))}}else if(I&&ht.mode&1){var Pt=Ui(ot);if(Pt!==null){!(Pt.flags&65536)&&(Pt.flags|=256),Vi(Pt,ot,ht,$,s),Jg(Ji(pt,ht));break t}}$=pt=Ji(pt,ht),T!==4&&(T=2),sk===null?sk=[$]:sk.push($),$=ot;do{switch($.tag){case 3:$.flags|=65536,s&=-s,$.lanes|=s;var _t=Ni($,pt,s);ph($,_t);break t;case 1:ht=pt;var yt=$.type,xt=$.stateNode;if(!($.flags&128)&&(typeof yt.getDerivedStateFromError=="function"||xt!==null&&typeof xt.componentDidCatch=="function"&&(Ri===null||!Ri.has(xt)))){$.flags|=65536,s&=-s,$.lanes|=s;var Dt=Qi($,ht,s);ph($,Dt);break t}}$=$.return}while($!==null)}Sk(o)}catch(Ot){s=Ot,Y===o&&o!==null&&(Y=o=o.return);continue}break}while(!0)}function Jk(){var i=mk.current;return mk.current=Rh,i===null?Rh:i}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(i,s){var o=K;K|=2;var d=Jk();(Q!==i||Z!==s)&&(uk=null,Kk(i,s));do try{Tk();break}catch(j){Mk(i,j)}while(!0);if($g(),K=o,mk.current=d,Y!==null)throw Error(p$1(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(i){var s=Vk(i.alternate,i,fj);i.memoizedProps=i.pendingProps,s===null?Sk(i):Y=s,nk.current=null}function Sk(i){var s=i;do{var o=s.alternate;if(i=s.return,s.flags&32768){if(o=Ij(o,s),o!==null){o.flags&=32767,Y=o;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{T=6,Y=null;return}}else if(o=Ej(o,s,fj),o!==null){Y=o;return}if(s=s.sibling,s!==null){Y=s;return}Y=s=i}while(s!==null);T===0&&(T=5)}function Pk(i,s,o){var d=C,j=ok.transition;try{ok.transition=null,C=1,Wk(i,s,o,d)}finally{ok.transition=j,C=d}return null}function Wk(i,s,o,d){do Hk();while(wk!==null);if(K&6)throw Error(p$1(327));o=i.finishedWork;var j=i.finishedLanes;if(o===null)return null;if(i.finishedWork=null,i.finishedLanes=0,o===i.current)throw Error(p$1(177));i.callbackNode=null,i.callbackPriority=0;var $=o.lanes|o.childLanes;if(Bc(i,$),i===Q&&(Y=Q=null,Z=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),$=(o.flags&15990)!==0,o.subtreeFlags&15990||$){$=ok.transition,ok.transition=null;var ot=C;C=1;var ht=K;K|=4,nk.current=null,Oj(i,o),dk(o,i),Oe$1(Df),dd=!!Cf,Df=Cf=null,i.current=o,hk(o),dc(),K=ht,C=ot,ok.transition=$}else i.current=o;if(vk&&(vk=!1,wk=i,xk=j),$=i.pendingLanes,$===0&&(Ri=null),mc(o.stateNode),Dk(i,B()),s!==null)for(d=i.onRecoverableError,o=0;o<s.length;o++)j=s[o],d(j.value,{componentStack:j.stack,digest:j.digest});if(Oi)throw Oi=!1,i=Pi,Pi=null,i;return xk&1&&i.tag!==0&&Hk(),$=i.pendingLanes,$&1?i===zk?yk++:(yk=0,zk=i):yk=0,jg(),null}function Hk(){if(wk!==null){var i=Dc(xk),s=ok.transition,o=C;try{if(ok.transition=null,C=16>i?16:i,wk===null)var d=!1;else{if(i=wk,wk=null,xk=0,K&6)throw Error(p$1(331));var j=K;for(K|=4,V$1=i.current;V$1!==null;){var $=V$1,ot=$.child;if(V$1.flags&16){var ht=$.deletions;if(ht!==null){for(var pt=0;pt<ht.length;pt++){var dt=ht[pt];for(V$1=dt;V$1!==null;){var gt=V$1;switch(gt.tag){case 0:case 11:case 15:Pj(8,gt,$)}var wt=gt.child;if(wt!==null)wt.return=gt,V$1=wt;else for(;V$1!==null;){gt=V$1;var bt=gt.sibling,St=gt.return;if(Sj(gt),gt===dt){V$1=null;break}if(bt!==null){bt.return=St,V$1=bt;break}V$1=St}}}var Ct=$.alternate;if(Ct!==null){var Et=Ct.child;if(Et!==null){Ct.child=null;do{var Pt=Et.sibling;Et.sibling=null,Et=Pt}while(Et!==null)}}V$1=$}}if($.subtreeFlags&2064&&ot!==null)ot.return=$,V$1=ot;else t:for(;V$1!==null;){if($=V$1,$.flags&2048)switch($.tag){case 0:case 11:case 15:Pj(9,$,$.return)}var _t=$.sibling;if(_t!==null){_t.return=$.return,V$1=_t;break t}V$1=$.return}}var yt=i.current;for(V$1=yt;V$1!==null;){ot=V$1;var xt=ot.child;if(ot.subtreeFlags&2064&&xt!==null)xt.return=ot,V$1=xt;else t:for(ot=yt;V$1!==null;){if(ht=V$1,ht.flags&2048)try{switch(ht.tag){case 0:case 11:case 15:Qj(9,ht)}}catch(Ot){W(ht,ht.return,Ot)}if(ht===ot){V$1=null;break t}var Dt=ht.sibling;if(Dt!==null){Dt.return=ht.return,V$1=Dt;break t}V$1=ht.return}}if(K=j,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,i)}catch{}d=!0}return d}finally{C=o,ok.transition=s}}return!1}function Xk(i,s,o){s=Ji(o,s),s=Ni(i,s,1),i=nh(i,s,1),s=R$1(),i!==null&&(Ac(i,1,s),Dk(i,s))}function W(i,s,o){if(i.tag===3)Xk(i,i,o);else for(;s!==null;){if(s.tag===3){Xk(s,i,o);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ri===null||!Ri.has(d))){i=Ji(o,i),i=Qi(s,i,1),s=nh(s,i,1),i=R$1(),s!==null&&(Ac(s,1,i),Dk(s,i));break}}s=s.return}}function Ti(i,s,o){var d=i.pingCache;d!==null&&d.delete(s),s=R$1(),i.pingedLanes|=i.suspendedLanes&o,Q===i&&(Z&o)===o&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(i,0):rk|=o),Dk(i,s)}function Yk(i,s){s===0&&(i.mode&1?(s=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):s=1);var o=R$1();i=ih(i,s),i!==null&&(Ac(i,s,o),Dk(i,o))}function uj(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),Yk(i,o)}function bk(i,s){var o=0;switch(i.tag){case 13:var d=i.stateNode,j=i.memoizedState;j!==null&&(o=j.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(p$1(314))}d!==null&&d.delete(s),Yk(i,o)}var Vk;Vk=function(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps||Wf.current)dh=!0;else{if(!(i.lanes&o)&&!(s.flags&128))return dh=!1,yj(i,s,o);dh=!!(i.flags&131072)}else dh=!1,I&&s.flags&1048576&&ug(s,ng,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;ij(i,s),i=s.pendingProps;var j=Yf(s,H.current);ch(s,o),j=Nh(null,s,d,i,j,o);var $=Sh();return s.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zf(d)?($=!0,cg(s)):$=!1,s.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,kh(s),j.updater=Ei,s.stateNode=j,j._reactInternals=s,Ii(s,d,i,o),s=jj(null,s,d,!0,$,o)):(s.tag=0,I&&$&&vg(s),Xi(null,s,j,o),s=s.child),s;case 16:d=s.elementType;t:{switch(ij(i,s),i=s.pendingProps,j=d._init,d=j(d._payload),s.type=d,j=s.tag=Zk(d),i=Ci(d,i),j){case 0:s=cj(null,s,d,i,o);break t;case 1:s=hj(null,s,d,i,o);break t;case 11:s=Yi(null,s,d,i,o);break t;case 14:s=$i(null,s,d,Ci(d.type,i),o);break t}throw Error(p$1(306,d,""))}return s;case 0:return d=s.type,j=s.pendingProps,j=s.elementType===d?j:Ci(d,j),cj(i,s,d,j,o);case 1:return d=s.type,j=s.pendingProps,j=s.elementType===d?j:Ci(d,j),hj(i,s,d,j,o);case 3:t:{if(kj(s),i===null)throw Error(p$1(387));d=s.pendingProps,$=s.memoizedState,j=$.element,lh(i,s),qh(s,d,null,o);var ot=s.memoizedState;if(d=ot.element,$.isDehydrated)if($={element:d,isDehydrated:!1,cache:ot.cache,pendingSuspenseBoundaries:ot.pendingSuspenseBoundaries,transitions:ot.transitions},s.updateQueue.baseState=$,s.memoizedState=$,s.flags&256){j=Ji(Error(p$1(423)),s),s=lj(i,s,d,o,j);break t}else if(d!==j){j=Ji(Error(p$1(424)),s),s=lj(i,s,d,o,j);break t}else for(yg=Lf(s.stateNode.containerInfo.firstChild),xg=s,I=!0,zg=null,o=Vg(s,null,d,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ig(),d===j){s=Zi(i,s,o);break t}Xi(i,s,d,o)}s=s.child}return s;case 5:return Ah(s),i===null&&Eg(s),d=s.type,j=s.pendingProps,$=i!==null?i.memoizedProps:null,ot=j.children,Ef(d,j)?ot=null:$!==null&&Ef(d,$)&&(s.flags|=32),gj(i,s),Xi(i,s,ot,o),s.child;case 6:return i===null&&Eg(s),null;case 13:return oj(i,s,o);case 4:return yh(s,s.stateNode.containerInfo),d=s.pendingProps,i===null?s.child=Ug(s,null,d,o):Xi(i,s,d,o),s.child;case 11:return d=s.type,j=s.pendingProps,j=s.elementType===d?j:Ci(d,j),Yi(i,s,d,j,o);case 7:return Xi(i,s,s.pendingProps,o),s.child;case 8:return Xi(i,s,s.pendingProps.children,o),s.child;case 12:return Xi(i,s,s.pendingProps.children,o),s.child;case 10:t:{if(d=s.type._context,j=s.pendingProps,$=s.memoizedProps,ot=j.value,G$1(Wg,d._currentValue),d._currentValue=ot,$!==null)if(He$1($.value,ot)){if($.children===j.children&&!Wf.current){s=Zi(i,s,o);break t}}else for($=s.child,$!==null&&($.return=s);$!==null;){var ht=$.dependencies;if(ht!==null){ot=$.child;for(var pt=ht.firstContext;pt!==null;){if(pt.context===d){if($.tag===1){pt=mh(-1,o&-o),pt.tag=2;var dt=$.updateQueue;if(dt!==null){dt=dt.shared;var gt=dt.pending;gt===null?pt.next=pt:(pt.next=gt.next,gt.next=pt),dt.pending=pt}}$.lanes|=o,pt=$.alternate,pt!==null&&(pt.lanes|=o),bh($.return,o,s),ht.lanes|=o;break}pt=pt.next}}else if($.tag===10)ot=$.type===s.type?null:$.child;else if($.tag===18){if(ot=$.return,ot===null)throw Error(p$1(341));ot.lanes|=o,ht=ot.alternate,ht!==null&&(ht.lanes|=o),bh(ot,o,s),ot=$.sibling}else ot=$.child;if(ot!==null)ot.return=$;else for(ot=$;ot!==null;){if(ot===s){ot=null;break}if($=ot.sibling,$!==null){$.return=ot.return,ot=$;break}ot=ot.return}$=ot}Xi(i,s,j.children,o),s=s.child}return s;case 9:return j=s.type,d=s.pendingProps.children,ch(s,o),j=eh(j),d=d(j),s.flags|=1,Xi(i,s,d,o),s.child;case 14:return d=s.type,j=Ci(d,s.pendingProps),j=Ci(d.type,j),$i(i,s,d,j,o);case 15:return bj(i,s,s.type,s.pendingProps,o);case 17:return d=s.type,j=s.pendingProps,j=s.elementType===d?j:Ci(d,j),ij(i,s),s.tag=1,Zf(d)?(i=!0,cg(s)):i=!1,ch(s,o),Gi(s,d,j),Ii(s,d,j,o),jj(null,s,d,!0,i,o);case 19:return xj(i,s,o);case 22:return dj(i,s,o)}throw Error(p$1(156,s.tag))};function Fk(i,s){return ac(i,s)}function $k(i,s,o,d){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(i,s,o,d){return new $k(i,s,o,d)}function aj(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zk(i){if(typeof i=="function")return aj(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Da)return 11;if(i===Ga)return 14}return 2}function Pg(i,s){var o=i.alternate;return o===null?(o=Bg(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&14680064,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o}function Rg(i,s,o,d,j,$){var ot=2;if(d=i,typeof i=="function")aj(i)&&(ot=1);else if(typeof i=="string")ot=5;else t:switch(i){case ya:return Tg(o.children,j,$,s);case za:ot=8,j|=8;break;case Aa:return i=Bg(12,o,s,j|2),i.elementType=Aa,i.lanes=$,i;case Ea:return i=Bg(13,o,s,j),i.elementType=Ea,i.lanes=$,i;case Fa:return i=Bg(19,o,s,j),i.elementType=Fa,i.lanes=$,i;case Ia:return pj(o,j,$,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Ba:ot=10;break t;case Ca:ot=9;break t;case Da:ot=11;break t;case Ga:ot=14;break t;case Ha:ot=16,d=null;break t}throw Error(p$1(130,i==null?i:typeof i,""))}return s=Bg(ot,o,s,j),s.elementType=i,s.type=d,s.lanes=$,s}function Tg(i,s,o,d){return i=Bg(7,i,d,s),i.lanes=o,i}function pj(i,s,o,d){return i=Bg(22,i,d,s),i.elementType=Ia,i.lanes=o,i.stateNode={isHidden:!1},i}function Qg(i,s,o){return i=Bg(6,i,null,s),i.lanes=o,i}function Sg(i,s,o){return s=Bg(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function al(i,s,o,d,j){this.tag=s,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=d,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function bl(i,s,o,d,j,$,ot,ht,pt){return i=new al(i,s,o,ht,pt),s===1?(s=1,$===!0&&(s|=8)):s=0,$=Bg(3,null,null,s),i.current=$,$.stateNode=i,$.memoizedState={element:d,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh($),i}function cl(i,s,o){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:d==null?null:""+d,children:i,containerInfo:s,implementation:o}}function dl(i){if(!i)return Vf;i=i._reactInternals;t:{if(Vb(i)!==i||i.tag!==1)throw Error(p$1(170));var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Zf(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(s!==null);throw Error(p$1(171))}if(i.tag===1){var o=i.type;if(Zf(o))return bg(i,o,s)}return s}function el(i,s,o,d,j,$,ot,ht,pt){return i=bl(o,d,!0,i,j,$,ot,ht,pt),i.context=dl(null),o=i.current,d=R$1(),j=yi(o),$=mh(d,j),$.callback=s??null,nh(o,$,j),i.current.lanes=j,Ac(i,j,d),Dk(i,d),i}function fl(i,s,o,d){var j=s.current,$=R$1(),ot=yi(j);return o=dl(o),s.context===null?s.context=o:s.pendingContext=o,s=mh($,ot),s.payload={element:i},d=d===void 0?null:d,d!==null&&(s.callback=d),i=nh(j,s,ot),i!==null&&(gi(i,j,ot,$),oh(i,j,ot)),ot}function gl(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function hl(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function il(i,s){hl(i,s),(i=i.alternate)&&hl(i,s)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(i){console.error(i)};function ll(i){this._internalRoot=i}ml.prototype.render=ll.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(p$1(409));fl(i,s,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Rk(function(){fl(null,i,null,null)}),s[uf]=null}};function ml(i){this._internalRoot=i}ml.prototype.unstable_scheduleHydration=function(i){if(i){var s=Hc();i={blockedOn:null,target:i,priority:s};for(var o=0;o<Qc.length&&s!==0&&s<Qc[o].priority;o++);Qc.splice(o,0,i),o===0&&Vc(i)}};function nl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ol(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(i,s,o,d,j){if(j){if(typeof d=="function"){var $=d;d=function(){var dt=gl(ot);$.call(dt)}}var ot=el(s,d,i,0,null,!1,!1,"",pl);return i._reactRootContainer=ot,i[uf]=ot.current,sf(i.nodeType===8?i.parentNode:i),Rk(),ot}for(;j=i.lastChild;)i.removeChild(j);if(typeof d=="function"){var ht=d;d=function(){var dt=gl(pt);ht.call(dt)}}var pt=bl(i,0,!1,null,null,!1,!1,"",pl);return i._reactRootContainer=pt,i[uf]=pt.current,sf(i.nodeType===8?i.parentNode:i),Rk(function(){fl(s,pt,o,d)}),pt}function rl(i,s,o,d,j){var $=o._reactRootContainer;if($){var ot=$;if(typeof j=="function"){var ht=j;j=function(){var pt=gl(ot);ht.call(pt)}}fl(s,ot,i,j)}else ot=ql(o,s,i,j,d);return gl(ot)}Ec=function(i){switch(i.tag){case 3:var s=i.stateNode;if(s.current.memoizedState.isDehydrated){var o=tc(s.pendingLanes);o!==0&&(Cc(s,o|1),Dk(s,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var d=ih(i,1);if(d!==null){var j=R$1();gi(d,i,1,j)}}),il(i,1)}};Fc=function(i){if(i.tag===13){var s=ih(i,134217728);if(s!==null){var o=R$1();gi(s,i,134217728,o)}il(i,134217728)}};Gc=function(i){if(i.tag===13){var s=yi(i),o=ih(i,s);if(o!==null){var d=R$1();gi(o,i,s,d)}il(i,s)}};Hc=function(){return C};Ic=function(i,s){var o=C;try{return C=i,s()}finally{C=o}};yb=function(i,s,o){switch(s){case"input":if(bb(i,o),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<o.length;s++){var d=o[s];if(d!==i&&d.form===i.form){var j=Db(d);if(!j)throw Error(p$1(90));Wa(d),bb(d,j)}}}break;case"textarea":ib(i,o);break;case"select":s=o.value,s!=null&&fb(i,!!o.multiple,s,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zb(i),i===null?null:i.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(i,s){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(s))throw Error(p$1(200));return cl(i,s,null,o)};reactDom_production_min.createRoot=function(i,s){if(!nl(i))throw Error(p$1(299));var o=!1,d="",j=kl;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(j=s.onRecoverableError)),s=bl(i,1,!1,null,null,o,!1,d,j),i[uf]=s.current,sf(i.nodeType===8?i.parentNode:i),new ll(s)};reactDom_production_min.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(p$1(188)):(i=Object.keys(i).join(","),Error(p$1(268,i)));return i=Zb(s),i=i===null?null:i.stateNode,i};reactDom_production_min.flushSync=function(i){return Rk(i)};reactDom_production_min.hydrate=function(i,s,o){if(!ol(s))throw Error(p$1(200));return rl(null,i,s,!0,o)};reactDom_production_min.hydrateRoot=function(i,s,o){if(!nl(i))throw Error(p$1(405));var d=o!=null&&o.hydratedSources||null,j=!1,$="",ot=kl;if(o!=null&&(o.unstable_strictMode===!0&&(j=!0),o.identifierPrefix!==void 0&&($=o.identifierPrefix),o.onRecoverableError!==void 0&&(ot=o.onRecoverableError)),s=el(s,null,i,1,o??null,j,!1,$,ot),i[uf]=s.current,sf(i),d)for(i=0;i<d.length;i++)o=d[i],j=o._getVersion,j=j(o._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[o,j]:s.mutableSourceEagerHydrationData.push(o,j);return new ml(s)};reactDom_production_min.render=function(i,s,o){if(!ol(s))throw Error(p$1(200));return rl(null,i,s,!1,o)};reactDom_production_min.unmountComponentAtNode=function(i){if(!ol(i))throw Error(p$1(40));return i._reactRootContainer?(Rk(function(){rl(null,null,i,!1,function(){i._reactRootContainer=null,i[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(i,s,o,d){if(!ol(o))throw Error(p$1(200));if(i==null||i._reactInternals===void 0)throw Error(p$1(38));return rl(i,s,o,!1,d)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(i){console.error(i)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;var eruda$1={exports:{}};/*! eruda v3.0.1 https://eruda.liriliri.io/ */(function(module,exports){(function(i,s){module.exports=s()})(self,function(){return function(){var __webpack_modules__={422:function(i,s,o){o.d(s,{Z:function(){return qn}});var d=o(5671),j=o(3144),$=o(9340),ot=o(2963),ht=o(1120),pt=o(2461),dt=o.n(pt),gt=o(3990),wt=o.n(gt),bt=o(6768),St=o.n(bt),Ct=o(4331),Et=o.n(Ct),Pt=o(5610),_t=o.n(Pt),yt=o(7483),xt=o.n(yt),Dt=o(6341),Ot=o.n(Dt),Bt=o(3875),At=o.n(Bt),It=o(6954),Gt=o.n(It);o(9585);function Jt(Jn){var dr="luna-".concat(Jn,"-");function Un(mn){return dt()(Et()(mn).split(/\s+/),function(xn){return Ot()(xn,dr)?xn:xn.replace(/[\w-]+/,function(cn){return"".concat(dr).concat(cn)})}).join(" ")}return function(mn){if(/<[^>]*>/g.test(mn))try{var xn=xt().parse(mn);return nn(xn,function(cn){cn.attrs&&cn.attrs.class&&(cn.attrs.class=Un(cn.attrs.class))}),xt().stringify(xn)}catch{return Un(mn)}return Un(mn)}}function nn(Jn,dr){for(var Un=0,mn=Jn.length;Un<mn;Un++){var xn=Jn[Un];dr(xn),xn.content&&nn(xn.content,dr)}}_t();function Vt(){var Jn=Gt()();return Jn==="os x"?"mac":Jn}var Ut=o(1443),Ht=o.n(Ut),jt=o(1512),Wt=o.n(jt),ln=o(3783),Qt=o.n(ln),Xt=o(6329),on=o.n(Xt),sn=o(4193),bn=o.n(sn),Zn=o(5852),Rn=o.n(Zn);function vn(Jn){var dr=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Un,mn=(0,ht.Z)(Jn);if(dr){var xn=(0,ht.Z)(this).constructor;Un=Reflect.construct(mn,arguments,xn)}else Un=mn.apply(this,arguments);return(0,ot.Z)(this,Un)}}var yn=function(Jn){(0,$.Z)(Un,Jn);var dr=vn(Un);function Un(mn,xn){var cn,kn=xn.compName,En=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,cr=En===void 0?"light":En;return(0,d.Z)(this,Un),(cn=dr.call(this)).subComponents=[],cn.compName=kn,cn.c=Jt(kn),cn.options={},cn.container=mn,cn.$container=Wt()(mn),cn.$container.addClass(["luna-".concat(kn),cn.c("platform-".concat(Vt()))]),cn.on("optionChange",function(Gn,ur,hn){var sr=cn.c;Gn==="theme"&&(cn.$container.rmClass(sr("theme-".concat(hn))).addClass(sr("theme-".concat(ur))),Qt()(cn.subComponents,function(An){return An.setOption("theme",ur)}))}),cn.setOption("theme",cr),cn}return(0,j.Z)(Un,[{key:"destroy",value:function(){this.destroySubComponents();var mn=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(mn("platform-".concat(Vt()))).rmClass(mn("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(mn,xn){var cn=this,kn=this.options,En={};typeof mn=="string"?En[mn]=xn:En=mn,Qt()(En,function(cr,Gn){var ur=kn[Gn];kn[Gn]=cr,cn.emit("optionChange",Gn,cr,ur)})}},{key:"getOption",value:function(mn){return this.options[mn]}},{key:"addSubComponent",value:function(mn){mn.setOption("theme",this.options.theme),this.subComponents.push(mn)}},{key:"removeSubComponent",value:function(mn){Rn()(this.subComponents,function(xn){return xn===mn})}},{key:"destroySubComponents",value:function(){Qt()(this.subComponents,function(mn){return mn.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(mn){var xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};bn()(mn,xn),on()(this.options,mn)}},{key:"find",value:function(mn){return this.$container.find(this.c(mn))}}]),Un}(Ht());function Ln(Jn){var dr=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Un,mn=(0,ht.Z)(Jn);if(dr){var xn=(0,ht.Z)(this).constructor;Un=Reflect.construct(mn,arguments,xn)}else Un=mn.apply(this,arguments);return(0,ot.Z)(this,Un)}}i=o.hmd(i);var qn=function(Jn){(0,$.Z)(Un,Jn);var dr=Ln(Un);function Un(mn){var xn,cn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,d.Z)(this,Un),(xn=dr.call(this,mn,{compName:"box-model"})).initOptions(cn),xn.options.element&&xn.render(),xn.bindEvent(),xn}return(0,j.Z)(Un,[{key:"bindEvent",value:function(){var mn=this;this.on("optionChange",function(xn){xn==="element"&&mn.render()})}},{key:"render",value:function(){var mn=this.c,xn=this.getBoxModelData();this.$container.html(['<div class="'.concat(mn("box-model"),'">'),xn.position?'<div class="'.concat(mn("position"),'">'):"",xn.position?'<div class="'.concat(mn("label"),'">position</div><div class="').concat(mn("top"),'">').concat(xn.position.top,'</div><br><div class="').concat(mn("left"),'">').concat(xn.position.left,"</div>"):"",'<div class="'.concat(mn("margin"),'">'),'<div class="'.concat(mn("label"),'">margin</div><div class="').concat(mn("top"),'">').concat(xn.margin.top,'</div><br><div class="').concat(mn("left"),'">').concat(xn.margin.left,"</div>"),'<div class="'.concat(mn("border"),'">'),'<div class="'.concat(mn("label"),'">border</div><div class="').concat(mn("top"),'">').concat(xn.border.top,'</div><br><div class="').concat(mn("left"),'">').concat(xn.border.left,"</div>"),'<div class="'.concat(mn("padding"),'">'),'<div class="'.concat(mn("label"),'">padding</div><div class="').concat(mn("top"),'">').concat(xn.padding.top,'</div><br><div class="').concat(mn("left"),'">').concat(xn.padding.left,"</div>"),'<div class="'.concat(mn("content"),'">'),"<span>".concat(xn.content.width,"</span>&nbsp;×&nbsp;<span>").concat(xn.content.height,"</span>"),"</div>",'<div class="'.concat(mn("right"),'">').concat(xn.padding.right,'</div><br><div class="').concat(mn("bottom"),'">').concat(xn.padding.bottom,"</div>"),"</div>",'<div class="'.concat(mn("right"),'">').concat(xn.border.right,'</div><br><div class="').concat(mn("bottom"),'">').concat(xn.border.bottom,"</div>"),"</div>",'<div class="'.concat(mn("right"),'">').concat(xn.margin.right,'</div><br><div class="').concat(mn("bottom"),'">').concat(xn.margin.bottom,"</div>"),"</div>",xn.position?'<div class="'.concat(mn("right"),'">').concat(xn.position.right,'</div><br><div class="').concat(mn("bottom"),'">').concat(xn.position.bottom,"</div>"):"",xn.position?"</div>":"","</div>"].join(""))}},{key:"getBoxModelData",value:function(){var mn=this.options.element,xn=window.getComputedStyle(mn);function cn(En){var cr=["top","left","right","bottom"];return En!=="position"&&(cr=dt()(cr,function(Gn){return"".concat(En,"-").concat(Gn)})),En==="border"&&(cr=dt()(cr,function(Gn){return"".concat(Gn,"-width")})),{top:_r(xn[cr[0]],En),left:_r(xn[cr[1]],En),right:_r(xn[cr[2]],En),bottom:_r(xn[cr[3]],En)}}var kn={margin:cn("margin"),border:cn("border"),padding:cn("padding"),content:{width:_r(xn.width),height:_r(xn.height)}};return xn.position!=="static"&&(kn.position=cn("position")),kn}}]),Un}(yn);function _r(Jn,dr){if(wt()(Jn))return Jn;if(!St()(Jn))return"‒";var Un,mn=(Un=Jn,At()(Un.replace("px","")));return isNaN(mn)?Jn:dr==="position"?mn:mn===0?"‒":mn}(function(Jn,dr){try{Jn.exports=dr,Jn.exports.default=dr}catch{}})(i,qn)},8816:function(i,s,o){o.d(s,{Z:function(){return _c}});var d=o(168),j=o(181);function $(Cr,Xr){return function(wr){if(Array.isArray(wr))return wr}(Cr)||function(wr,$t){var zt=wr==null?null:typeof Symbol<"u"&&wr[Symbol.iterator]||wr["@@iterator"];if(zt!=null){var rn,_n,nr,jn,mr=[],On=!0,vr=!1;try{if(nr=(zt=zt.call(wr)).next,$t===0){if(Object(zt)!==zt)return;On=!1}else for(;!(On=(rn=nr.call(zt)).done)&&(mr.push(rn.value),mr.length!==$t);On=!0);}catch(Jr){vr=!0,_n=Jr}finally{try{if(!On&&zt.return!=null&&(jn=zt.return(),Object(jn)!==jn))return}finally{if(vr)throw _n}}return mr}}(Cr,Xr)||(0,j.Z)(Cr,Xr)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var ot=o(5671),ht=o(3144),pt=o(1752),dt=o(9340),gt=o(2963),wt=o(1120),bt=o(7326),St=o(8901),Ct=o.n(St),Et=o(3367),Pt=o.n(Et),_t=o(6341),yt=o.n(_t),xt=o(6930),Dt=o.n(xt),Ot=o(4187),Bt=o.n(Ot),At=o(3783),It=o.n(At),Gt=o(4858),Jt=o.n(Gt),nn=o(8887),Vt=o.n(nn),Ut=o(7756),Ht=o.n(Ut),jt=o(3023),Wt=o.n(jt);function ln(Cr){return Cr.constructor&&Cr.constructor.name?Cr.constructor.name:Wt()({}.toString.call(Cr).replace(/(\[object )|]/g,""))}var Qt=o(2461),Xt=o.n(Qt),on=o(4331),sn=o.n(on),bn=o(5610),Zn=o.n(bn),Rn=o(7483),vn=o.n(Rn),yn=o(3990),Ln=o.n(yn),qn=o(3875),_r=o.n(qn),Jn=o(6954),dr=o.n(Jn),Un=o(9585),mn=o.n(Un);function xn(Cr){var Xr="luna-".concat(Cr,"-");function wr($t){return Xt()(sn()($t).split(/\s+/),function(zt){return yt()(zt,Xr)?zt:zt.replace(/[\w-]+/,function(rn){return"".concat(Xr).concat(rn)})}).join(" ")}return function($t){if(/<[^>]*>/g.test($t))try{var zt=vn().parse($t);return cn(zt,function(rn){rn.attrs&&rn.attrs.class&&(rn.attrs.class=wr(rn.attrs.class))}),vn().stringify(zt)}catch{return wr($t)}return wr($t)}}function cn(Cr,Xr){for(var wr=0,$t=Cr.length;wr<$t;wr++){var zt=Cr[wr];Xr(zt),zt.content&&cn(zt.content,Xr)}}Zn();var kn=xn("console");function En(Cr){var Xr,wr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$t=wr.topObj,zt=wr.level,rn=zt===void 0?0:zt,_n=wr.getterVal,nr=_n!==void 0&&_n,jn=wr.unenumerable,mr=jn===void 0||jn,On="",vr="",Jr=[],io=[],so="";$t=$t||Cr;var To={getterVal:nr,unenumerable:mr,level:rn+1},to=rn===0,oo='<span class="'.concat(kn("key"),'">'),lo='<span class="'.concat(kn("number"),'">'),hr='<span class="'.concat(kn("null"),'">'),uo='<span class="'.concat(kn("string"),'">'),Go='<span class="'.concat(kn("boolean"),'">'),hs='<span class="'.concat(kn("special"),'">'),bo=function(ao){return Ct()(ao).replace(/\\n/g,"↵").replace(/\\f|\\r|\\t/g,"").replace(/\\/g,"")},zo="</span>";function Vo(ao){return ao=Pt()(ao),yt()(cr,ao)||Dt()(ao,"Array[")?hs+bo(ao)+zo:(ao.length>100&&(ao=Ht()(ao,100,{separator:" ",ellipsis:"…"})),uo+bo('"'.concat(ao,'"'))+zo)}function ds(ao){if(Xr>5)so=", …";else{var $s=function(Lo){return oo+bo(Lo)+zo}(ur(ao));if(!nr){var So=Object.getOwnPropertyDescriptor(Cr,ao);if(So&&So.get)return Jr.push("".concat($s,": ").concat(Vo("(...)"))),void Xr++}Jr.push("".concat($s,": ").concat(En($t[ao],To))),Xr++}}try{vr={}.toString.call(Cr)}catch{vr="[object Object]"}var Ho,Bs=vr=="[object Array]",rs=vr=="[object Object]",Qo=vr=="[object Number]",Os=vr=="[object RegExp]",js=vr=="[object Symbol]",Nr=vr=="[object Function]",fs=vr=="[object Boolean]";if(vr=="[object String]")On=Vo(ur(Cr));else if(Os)Ho=ur(Cr.toString()),On=uo+Ho+zo;else if(Nr)On=Vo("ƒ");else if(Bs)if(to){On="[";var xa=Cr.length,Fl="";xa>100&&(xa=100,Fl=", …");for(var Ys=0;Ys<xa;Ys++)Jr.push("".concat(En(Cr[Ys],To)));On+=Jr.join(", ")+Fl+"]"}else On="Array(".concat(Cr.length,")");else if(rs)Gn(Cr)&&(Cr=Object.getPrototypeOf(Cr)),io=mr?Object.getOwnPropertyNames(Cr):Object.keys(Cr),to?(Xr=1,On="{",It()(io,ds),On+=Jr.join(", ")+so+"}"):(On=ln(Cr))==="Object"&&(On="{…}");else if(Qo)On=Cr+"",On=Jt()(On,"Infinity")||On==="NaN"?'"'.concat(On,'"'):lo+On+zo;else if(fs)On=Go+(Cr?"true":"false")+zo;else if(Cr===null)On=function(ao){return hr+ao+zo}("null");else if(js)On=Vo("Symbol");else if(Cr===void 0)On=Vo("undefined");else try{Gn(Cr)&&(Cr=Object.getPrototypeOf(Cr)),to?(Xr=1,On="{",io=mr?Object.getOwnPropertyNames(Cr):Object.keys(Cr),It()(io,ds),On+=Jr.join(", ")+so+"}"):(On=ln(Cr))==="Object"&&(On="{…}")}catch{On=Vo(Cr)}return On}var cr=["(...)","undefined","Symbol","Object","ƒ"];function Gn(Cr){var Xr=Vt()(Object.getOwnPropertyNames(Cr)),wr=Object.getPrototypeOf(Cr);return Xr&&wr&&wr!==Object.prototype}function ur(Cr){return Bt()(Cr).replace(/\\'/g,"'").replace(/\t/g,"\\t")}var hn,sr=o(8299),An=o(5564),Nn=o(8209),Wn=o(242),Dn=o.n(Wn),Kn=o(5166),lr=o.n(Kn),Rr=o(6768),$r=o.n(Rr),br=o(2749),Tr=o.n(br),fr=o(6997),In=o.n(fr),_i=o(4193),pr=o.n(_i),tr=o(9833),ir=o.n(tr),Mn=o(9296),gn=o.n(Mn),Xn=o(8099),Vn=o.n(Xn),gr=o(6156),zr=o.n(gr),Ir=o(1286),Wr=o.n(Ir),eo=o(4777),Vr=o.n(eo),go=o(1352),mo=o.n(go),$o=o(6472),vs=o.n($o),Zr=o(42),jr=o.n(Zr),Er=o(4675),Fn=o.n(Er),er=o(3063),Tn=o.n(er),qt=o(2533),Mr=o.n(qt),qr=o(1512),Yr=o.n(qr),Qn=o(8613),kr=o.n(Qn),ar=o(1443),Cn=o.n(ar),$n=o(6049),rr=o.n($n),xr=o(4400),Dr=o.n(xr),Pr=o(2327),Ar=o.n(Pr),Lr=o(9963),Br=o.n(Lr),Hr=o(6837),no=o.n(Hr),fo=o(3988),_o=o.n(fo),wo=o(3651),Zo=o.n(wo),Eo=o(6053),Or=o.n(Eo),Bo=o(1907),Co=o.n(Bo),ns=o(4891),Io=o.n(ns),Ts=o(5229),ko=o.n(Ts),Oo=o(4696),us=o.n(Oo),zs=o(9804),Zs=o.n(zs),is=o(1754),ys=o.n(is);function As(Cr){var Xr=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var wr,$t=(0,wt.Z)(Cr);if(Xr){var zt=(0,wt.Z)(this).constructor;wr=Reflect.construct($t,arguments,zt)}else wr=$t.apply(this,arguments);return(0,gt.Z)(this,wr)}}var xl=/https?:\/\/([0-9.\-A-Za-z]+)(?::(\d+))?\/[A-Z.a-z0-9/]*\.js/g,Gs={comment:"",string:"",number:"",keyword:"",operator:""},Al=function(Cr){(0,dt.Z)(wr,Cr);var Xr=As(wr);function wr($t,zt){var rn,_n=zt.type,nr=_n===void 0?"log":_n,jn=zt.args,mr=jn===void 0?[]:jn,On=zt.id,vr=zt.group,Jr=zt.targetGroup,io=zt.header,so=zt.ignoreFilter,To=so!==void 0&&so,to=zt.accessGetter,oo=zt.unenumerable,lo=zt.lazyEvaluation;(0,ot.Z)(this,wr),(rn=Xr.call(this)).container=kr()("div"),rn.count=1,rn.width=0,rn.height=0,rn.isHidden=!1,rn.columns=[],rn.elements={},rn.objects={},rn.console=$t,rn.type=nr,rn.group=vr,rn.targetGroup=Jr,rn.args=mr,rn.id=On,rn.header=io,rn.ignoreFilter=To,rn.collapsed=!1,rn.container.log=(0,bt.Z)(rn),rn.height=0,rn.width=0,rn.$container=Yr()(rn.container),rn.accessGetter=to,rn.unenumerable=oo,rn.lazyEvaluation=lo;var hr="info";switch(nr){case"debug":hr="verbose";break;case"error":hr="error";break;case"warn":hr="warning"}return rn.level=hr,rn.resizeSensor=new(Dn())(rn.container),rn.onResize=rr()(function(){mn()(rn.container)?rn.isHidden=!0:(rn.isHidden||rn.updateSize(!1),rn.isHidden=!1)},16),rn.formatMsg(),rn.group&&rn.checkGroup(),rn.bindEvent(),rn}return(0,ht.Z)(wr,[{key:"checkGroup",value:function(){for(var $t=this.group,zt=!1;$t;){if($t.collapsed){zt=!0;break}$t=$t.parent}return zt!==this.collapsed&&(this.collapsed=zt,!0)}},{key:"updateIcon",value:function($t){var zt=this.console.c;return this.$container.find(zt(".icon-container")).find(zt(".icon")).rmAttr("class").addClass([zt("icon"),zt("icon-".concat($t))]),this}},{key:"addCount",value:function(){this.count++;var $t=this.$container,zt=this.count,rn=this.console.c,_n=$t.find(rn(".count-container")),nr=$t.find(rn(".icon-container")),jn=_n.find(rn(".count"));return zt===2&&_n.rmClass(rn("hidden")),jn.text(Pt()(zt)),nr.addClass(rn("hidden")),this}},{key:"groupEnd",value:function(){var $t=this.$container,zt=this.console.c;return $t.find(".".concat(zt("nesting-level"),":not(.").concat(zt("group-closed"),")")).last().addClass(zt("group-closed")),this}},{key:"updateTime",value:function($t){var zt=this.$container.find(this.console.c(".time-container"));return this.header&&(zt.find("span").eq(0).text($t),this.header.time=$t),this}},{key:"isAttached",value:function(){return!!this.container.parentNode}},{key:"isSimple",value:function(){return!Or()(this.args,function($t){return lr()($t)})}},{key:"updateSize",value:function(){var $t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],zt=this.container.getBoundingClientRect(),rn=zt.width,_n=zt.height-1;this.height!==_n&&(this.height=_n,$t||this.emit("updateHeight")),this.width!==rn&&(this.width=rn)}},{key:"html",value:function(){return this.container.outerHTML}},{key:"text",value:function(){return this.content.textContent||""}},{key:"select",value:function(){this.$container.addClass(this.console.c("selected"))}},{key:"deselect",value:function(){this.$container.rmClass(this.console.c("selected"))}},{key:"copy",value:function(){var $t=this.args,zt="";It()($t,function(rn,_n){_n!==0&&(zt+=" "),lr()(rn)?zt+=Dr()(rn):zt+=Pt()(rn)}),Ar()(zt)}},{key:"bindEvent",value:function(){var $t=this,zt=this.console.c,rn=this;this.resizeSensor.addListener(this.onResize),this.$container.on("click",zt(".dom-viewer"),function(_n){return _n.stopPropagation()}).on("click",zt(".preview"),function(_n){_n.stopPropagation();var nr=Yr()(this).find(zt(".preview-icon-container")).find(zt(".icon")),jn="caret-down";nr.hasClass(zt("icon-caret-down"))&&(jn="caret-right"),nr.rmAttr("class").addClass([zt("icon"),zt("icon-".concat(jn))]),rn.renderObjectViewer(this)}).on("click",function(){return $t.click()})}},{key:"renderEl",value:function(){var $t=this.elements,zt=this.console.c,rn=this;this.$container.find(zt(".dom-viewer")).each(function(){var _n=Yr()(this).data("id");new Nn.Z(this,{node:$t[_n],theme:rn.console.getOption("theme")})})}},{key:"renderObjectViewer",value:function($t){var zt=this.console,rn=this.unenumerable,_n=this.accessGetter,nr=this.lazyEvaluation,jn=zt.c,mr=Yr()($t),On=mr.data("id");if(On){var vr=this.objects[On],Jr=mr.find(jn(".json"));if(Jr.hasClass(jn("hidden"))){if(Jr.data("init")!=="true"){if(nr){var io=new sr.Z(Jr.get(0),{unenumerable:rn,accessGetter:_n});io.setOption("theme",zt.getOption("theme")),io.set(vr)}else{var so=new sr.q(Jr.get(0));so.setOption("theme",zt.getOption("theme")),so.set(vr)}Jr.data("init","true")}Jr.rmClass(jn("hidden"))}else Jr.addClass(jn("hidden"))}}},{key:"renderTable",value:function($t){var zt=this,rn="__LunaConsoleValue",_n=this.columns,nr=this.$container,jn=this.console,mr=jn.c,On=nr.find(mr(".data-grid")),vr=$t[0],Jr=new An.Z(On.get(0),{columns:Vn()([{id:"(index)",title:"(index)",sortable:!0}],Xt()(_n,function(io){return{id:io,title:io===rn?"Value":io,sortable:!0}})),theme:jn.getOption("theme")});It()(vr,function(io,so){var To={"(index)":Pt()(so)};_n.forEach(function(to){lr()(io)?To[to]=to===rn?"":zt.formatTableVal(io[to]):In()(io)&&(To[to]=to===rn?zt.formatTableVal(io):"")}),Jr.append(To)})}},{key:"extractObj",value:function($t){var zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},rn=arguments.length>2?arguments[2]:void 0,_n=this.accessGetter,nr=this.unenumerable;pr()(zt,{accessGetter:_n,unenumerable:nr,symbol:nr,timeout:1e3}),function(jn,mr,On){var vr=Br()(jn,mr);no()(function(){return On(vr)})}($t,zt,function(jn){return rn(JSON.parse(jn))})}},{key:"click",value:function(){var $t=this.type,zt=this.$container,rn=this.console,_n=rn.c;switch($t){case"log":case"warn":case"info":case"debug":case"output":case"table":case"dir":break;case"group":case"groupCollapsed":rn.toggleGroup(this);break;case"error":zt.find(_n(".stack")).toggleClass(_n("hidden"))}}},{key:"formatMsg",value:function(){var $t=this.args,zt=this.type,rn=this.id,_n=this.header,nr=this.group,jn=this.console.c;$t=Fn()($t);var mr,On,vr="";switch(zt!=="group"&&zt!=="groupCollapsed"||$t.length===0&&($t=["console.group"]),zt){case"log":case"info":case"debug":vr=this.formatCommon($t);break;case"dir":vr=this.formatDir($t);break;case"warn":mr="warn",vr=this.formatCommon($t);break;case"error":$r()($t[0])&&$t.length!==1&&($t=this.substituteStr($t)),On=$t[0],mr="error",On=Tr()(On)?On:new Error(this.formatCommon($t)),vr=this.formatErr(On);break;case"table":vr=this.formatTable($t);break;case"html":vr=$t[0];break;case"input":vr=this.formatJs($t[0]),mr="input";break;case"output":vr=this.formatCommon($t),mr="output";break;case"groupCollapsed":vr=this.formatCommon($t),mr="caret-right";break;case"group":vr=this.formatCommon($t),mr="caret-down"}yt()(["log","debug","warn"],zt)&&this.isSimple()&&(vr=_o()(vr,function(Jr){return'<a href="'.concat(Jr,'" target="_blank">').concat(Jr,"</a>")})),vr=this.render({msg:vr,type:zt,icon:mr,id:rn,header:_n,group:nr}),this.$container.addClass("".concat(jn("log-container"))).html(vr),zt==="table"&&(Vt()(this.columns)||this.renderTable($t)),Vt()(this.elements)||this.renderEl(),this.$content=this.$container.find(jn(".log-content")),this.content=this.$content.get(0)}},{key:"render",value:function($t){var zt=this.console.c,rn="",_n="";if($t.group)for(var nr=$t.group.indentLevel,jn=0;jn<nr;jn++)_n+='<div class="'.concat(zt("nesting-level"),'"></div>');$t.header&&(rn+=Co()(hn||(hn=(0,d.Z)([`
      <div class="`,`">
        `,`
        <div class="`,`">
          <span>`,"</span> <span>",`</span>
        </div>
      </div>`])),zt("header"),_n,zt("time-from-container"),$t.header.time,$t.header.from));var mr="";return $t.icon&&(mr='<div class="'.concat(zt("icon-container"),'"><span class="').concat(zt("icon icon-"+$t.icon),'"></span></div>')),rn+=`
    <div class="`.concat(zt($t.type+" log-item"),`">
      `).concat(_n,`
      `).concat(mr,`
      <div class="`).concat(zt("count-container hidden"),`">
        <div class="`).concat(zt("count"),`"></div>
      </div>    
      <div class="`).concat(zt("log-content-wrapper"),`">
        <div class="`).concat(zt("log-content"),'">').concat($t.msg,`</div>
      </div>
    </div>`)}},{key:"formatTable",value:function($t){var zt=$t[0],rn=$t[1],_n=[];return $r()(rn)&&(rn=mo()(rn)),vs()(rn)||(rn=null),lr()(zt)?(It()(zt,function(nr){In()(nr)?_n.push("__LunaConsoleValue"):lr()(nr)&&(_n=_n.concat(Mr()(nr)))}),(_n=jr()(_n)).sort(),rn&&(_n=_n.filter(function(nr){return yt()(rn,nr)})),_n.length>20&&(_n=_n.slice(0,20)),Vt()(_n)?this.formatCommon($t):(this.columns=_n,this.console.c('<div class="data-grid"></div>')+this.formatPreview(zt))):this.formatCommon($t)}},{key:"formatErr",value:function($t){var zt=$t.stack?$t.stack.split(`
`):[],rn="".concat($t.message||zt[0],"<br/>");return zt=zt.map(function(_n){return Ct()(_n)}),rn+'<div class="'.concat(this.console.c("stack hidden"),'">').concat(zt.slice(1).join("<br/>"),"</div>").replace(xl,function(_n){return'<a href="'.concat(_n,'" target="_blank">').concat(_n,"</a>")})}},{key:"formatCommon",value:function($t){var zt=this.console.c,rn=$r()($t[0])&&$t.length!==1;rn&&($t=this.substituteStr($t));for(var _n=0,nr=$t.length;_n<nr;_n++){var jn=$t[_n];ir()(jn)?$t[_n]=this.formatEl(jn):Vr()(jn)?$t[_n]=this.formatFn(jn):ys()(jn)?$t[_n]='<span class="'.concat(zt("regexp"),'">').concat(Ct()(Pt()(jn)),"</span>"):lr()(jn)?$t[_n]=this.formatPreview(jn):Wr()(jn)?$t[_n]='<span class="'.concat(zt("undefined"),'">undefined</span>'):zr()(jn)?$t[_n]='<span class="'.concat(zt("null"),'">null</span>'):Ln()(jn)?$t[_n]='<span class="'.concat(zt("number"),'">').concat(Pt()(jn),"</span>"):typeof jn=="bigint"?$t[_n]='<span class="'.concat(zt("number"),'">').concat(Pt()(jn),"n</span>"):us()(jn)?$t[_n]='<span class="'.concat(zt("boolean"),'">').concat(Pt()(jn),"</span>"):Zs()(jn)?$t[_n]='<span class="'.concat(zt("symbol"),'">').concat(Ct()(Pt()(jn)),"</span>"):(jn=Pt()(jn),_n===0&&rn||(jn=Ct()(jn)),jn.length>5e3&&(jn=Ht()(jn,5e3,{separator:" ",ellipsis:"…"})),$t[_n]=jn)}return $t.join(" ")}},{key:"formatDir",value:function($t){return lr()($t[0])?this.formatPreview($t[0]):this.formatCommon($t)}},{key:"formatTableVal",value:function($t){var zt=this.console.c;return lr()($t)?"{…}":In()($t)?Io()('<div class="'.concat(zt("preview"),'">').concat(En($t),"</div>")):Pt()($t)}},{key:"formatPreview",value:function($t){var zt=this,rn=this.console.c,_n=ko()();this.lazyEvaluation?this.objects[_n]=$t:this.extractObj($t,{},function(mr){zt.objects[_n]=mr});var nr=yt()(["dir","table"],this.type),jn=ln($t);return jn==="Array"&&$t.length>1?(jn="(".concat($t.length,")"),nr&&(jn="Array".concat(jn))):jn==="RegExp"?jn=Pt()($t):ir()($t)&&(jn=this.formatElName($t)),'<div class="'.concat(rn("preview"),'" data-id="').concat(_n,'">')+'<div class="'.concat(rn("preview-container"),'">')+'<div class="'.concat(rn("preview-icon-container"),'"><span class="').concat(rn("icon icon-caret-right"),'"></span></div>')+'<span class="'.concat(rn("preview-content-container"),'">')+'<span class="'.concat(rn("descriptor"),'">').concat(Ct()(jn),"</span> ")+'<span class="'.concat(rn("object-preview"),'">').concat(nr?"":En($t,{getterVal:this.accessGetter,unenumerable:!1}),"</span>")+"</span></div>"+'<div class="'.concat(rn("json hidden"),'"></div></div>')}},{key:"substituteStr",value:function($t){var zt=Ct()($t[0]),rn=!1,_n="";$t.shift();for(var nr=0,jn=zt.length;nr<jn;nr++){var mr=zt[nr];if(mr==="%"&&$t.length!==0){nr++;var On=$t.shift();switch(zt[nr]){case"i":case"d":_n+=gn()(On);break;case"f":_n+=_r()(On);break;case"s":_n+=Pt()(On);break;case"O":lr()(On)?_n+=this.formatPreview(On):_n+=Pt()(On);break;case"o":ir()(On)?_n+=this.formatEl(On):lr()(On)?_n+=this.formatPreview(On):_n+=Pt()(On);break;case"c":if(zt.length<=nr+1)break;rn&&(_n+="</span>"),rn=!0,_n+='<span style="'.concat(Ls(On),'">');break;default:nr--,$t.unshift(On),_n+=mr}}else _n+=mr}return rn&&(_n+="</span>"),$t.unshift(_n),$t}},{key:"formatJs",value:function($t){return'<pre class="'.concat(this.console.c("code"),'">').concat(this.console.c(Zo()($t,"js",Gs)),"</pre>")}},{key:"formatFn",value:function($t){return'<pre style="display:inline">'.concat(this.formatJs($t.toString()),"</pre>")}},{key:"formatElName",value:function($t){var zt=$t.id,rn=$t.className,_n=$t.tagName.toLowerCase();if(zt!==""&&(_n+="#".concat(zt)),$r()(rn)){var nr="";It()(rn.split(/\s+/g),function(jn){jn.trim()!==""&&(nr+=".".concat(jn))}),_n+=nr}return _n}},{key:"formatEl",value:function($t){var zt=ko()();return this.elements[zt]=$t,this.console.c('<div class="dom-viewer" data-id="'.concat(zt,'"></div>'))}}]),wr}(Cn());function Ls(Cr){var Xr=(Cr=Tn()(Cr)).split(";"),wr={};It()(Xr,function(zt){if(yt()(zt,":")){var rn=$(zt.split(":"),2),_n=rn[0],nr=rn[1];wr[sn()(_n)]=sn()(nr)}}),wr.display="inline-block",wr["max-width"]="100%",delete wr.width,delete wr.height;var $t="";return It()(wr,function(zt,rn){$t+="".concat(rn,":").concat(zt,";")}),$t}var Cl=o(1194),na=o.n(Cl),Sl=o(8847),Rs=o.n(Sl),Ds=o(6329),Cs=o.n(Ds),ga=o(9001),Is=o.n(ga),_a=o(9702),ba=o.n(_a),Vs=o(2439),Mo=o.n(Vs),Ns=o(8933),ro=o.n(Ns),El=o(4407),ws=o.n(El),Tl=o(5852),Pl=o.n(Tl);function Rl(Cr){var Xr=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var wr,$t=(0,wt.Z)(Cr);if(Xr){var zt=(0,wt.Z)(this).constructor;wr=Reflect.construct($t,arguments,zt)}else wr=$t.apply(this,arguments);return(0,gt.Z)(this,wr)}}var Ms,Dl=function(Cr){(0,dt.Z)(wr,Cr);var Xr=Rl(wr);function wr($t,zt){var rn,_n,nr=zt.compName,jn=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,mr=jn===void 0?"light":jn;return(0,ot.Z)(this,wr),(rn=Xr.call(this)).subComponents=[],rn.compName=nr,rn.c=xn(nr),rn.options={},rn.container=$t,rn.$container=Yr()($t),rn.$container.addClass(["luna-".concat(nr),rn.c("platform-".concat((_n=dr()(),_n==="os x"?"mac":_n)))]),rn.on("optionChange",function(On,vr,Jr){var io=rn.c;On==="theme"&&(rn.$container.rmClass(io("theme-".concat(Jr))).addClass(io("theme-".concat(vr))),It()(rn.subComponents,function(so){return so.setOption("theme",vr)}))}),rn.setOption("theme",mr),rn}return(0,ht.Z)(wr,[{key:"destroy",value:function(){var $t=this;this.destroySubComponents();var zt=this.$container,rn=zt.attr("class");It()(rn.split(/\s+/),function(_n){Dt()(_n,"luna-".concat($t.compName))&&zt.rmClass(_n)}),zt.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function($t,zt){var rn=this,_n=this.options,nr={};typeof $t=="string"?nr[$t]=zt:nr=$t,It()(nr,function(jn,mr){var On=_n[mr];_n[mr]=jn,rn.emit("optionChange",mr,jn,On)})}},{key:"getOption",value:function($t){return this.options[$t]}},{key:"addSubComponent",value:function($t){$t.setOption("theme",this.options.theme),this.subComponents.push($t)}},{key:"removeSubComponent",value:function($t){Pl()(this.subComponents,function(zt){return zt===$t})}},{key:"destroySubComponents",value:function(){It()(this.subComponents,function($t){return $t.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function($t){var zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};pr()($t,zt),Cs()(this.options,$t)}},{key:"find",value:function($t){return this.$container.find(this.c($t))}}]),wr}(Cn()),Il=o(1571),ks=o.n(Il);function Ql(Cr){var Xr=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var wr,$t=(0,wt.Z)(Cr);if(Xr){var zt=(0,wt.Z)(this).constructor;wr=Reflect.construct($t,arguments,zt)}else wr=$t.apply(this,arguments);return(0,gt.Z)(this,wr)}}i=o.hmd(i);var Kl=navigator.userAgent,wu=Kl.indexOf("Android")>-1||Kl.indexOf("Adr")>-1,Jl=0,_c=function(Cr){(0,dt.Z)(wr,Cr);var Xr=Ql(wr);function wr($t){var zt,rn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,ot.Z)(this,wr),(zt=Xr.call(this,$t,{compName:"console"},rn)).spaceHeight=0,zt.topSpaceHeight=0,zt.bottomSpaceHeight=0,zt.lastScrollTop=0,zt.lastTimestamp=0,zt.speedToleranceFactor=100,zt.maxSpeedTolerance=2e3,zt.minSpeedTolerance=100,zt.logs=[],zt.displayLogs=[],zt.timer={},zt.counter={},zt.asyncList=[],zt.asyncTimer=null,zt.isAtBottom=!0,zt.groupStack=new(Is()),zt.selectedLog=null,zt.onScroll=function(){var _n=zt.container,nr=_n.scrollHeight,jn=_n.offsetHeight,mr=_n.scrollTop;if(!(mr<=0||jn+mr>nr)){var On=!1;(nr===jn||mr===nr-jn)&&(On=!0),zt.isAtBottom=On;var vr=zt.lastScrollTop,Jr=zt.lastTimestamp,io=Rs()(),so=io-Jr,To=mr-vr,to=Math.abs(To/so)*zt.speedToleranceFactor;so>1e3&&(to=1e3),to>zt.maxSpeedTolerance&&(to=zt.maxSpeedTolerance),to<zt.minSpeedTolerance&&(to=zt.minSpeedTolerance),zt.lastScrollTop=mr,zt.lastTimestamp=io;var oo=0,lo=0;vr<mr?(oo=zt.minSpeedTolerance,lo=to):(oo=to,lo=zt.minSpeedTolerance),zt.topSpaceHeight<mr-oo&&zt.topSpaceHeight+zt.el.offsetHeight>mr+jn+lo||zt.renderViewport({topTolerance:2*oo,bottomTolerance:2*lo})}},zt.initTpl(),zt.initOptions(rn,{maxNum:0,asyncRender:!0,showHeader:!1,filter:"",level:["verbose","info","warning","error"],accessGetter:!1,unenumerable:!0,lazyEvaluation:!0}),zt.$el=zt.find(".logs"),zt.el=zt.$el.get(0),zt.$fakeEl=zt.find(".fake-logs"),zt.fakeEl=zt.$fakeEl.get(0),zt.$space=zt.find(".logs-space"),zt.space=zt.$space.get(0),wu&&(zt.speedToleranceFactor=800,zt.maxSpeedTolerance=3e3,zt.minSpeedTolerance=800),zt.resizeSensor=new(Dn())($t),zt.renderViewport=Mo()(function(_n){zt._renderViewport(_n)},16),zt.global={copy:function(_n){$r()(_n)||(_n=JSON.stringify(_n,null,2)),Ar()(_n)},$:function(_n){return document.querySelector(_n)},$$:function(_n){return mo()(document.querySelectorAll(_n))},$x:function(_n){return ro()(_n)},clear:function(){zt.clear()},dir:function(_n){zt.dir(_n)},table:function(_n,nr){zt.table(_n,nr)},keys:Mr()},zt.bindEvent(),zt}return(0,ht.Z)(wr,[{key:"setGlobal",value:function($t,zt){this.global[$t]=zt}},{key:"destroy",value:function(){this.$container.off("scroll",this.onScroll),this.resizeSensor.destroy(),(0,pt.Z)((0,wt.Z)(wr.prototype),"destroy",this).call(this)}},{key:"count",value:function(){var $t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default",zt=this.counter;Wr()(zt[$t])?zt[$t]=1:zt[$t]++,this.info("".concat($t,": ").concat(zt[$t]))}},{key:"countReset",value:function(){var $t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";this.counter[$t]=0}},{key:"assert",value:function(){for(var $t=arguments.length,zt=new Array($t),rn=0;rn<$t;rn++)zt[rn]=arguments[rn];Vt()(zt)||zt.shift()||(zt.length===0&&zt.unshift("console.assert"),zt.unshift("Assertion failed: "),this.insert("error",zt))}},{key:"log",value:function(){for(var $t=arguments.length,zt=new Array($t),rn=0;rn<$t;rn++)zt[rn]=arguments[rn];Vt()(zt)||this.insert("log",zt)}},{key:"debug",value:function(){for(var $t=arguments.length,zt=new Array($t),rn=0;rn<$t;rn++)zt[rn]=arguments[rn];Vt()(zt)||this.insert("debug",zt)}},{key:"dir",value:function($t){Wr()($t)||this.insert("dir",[$t])}},{key:"table",value:function(){for(var $t=arguments.length,zt=new Array($t),rn=0;rn<$t;rn++)zt[rn]=arguments[rn];Vt()(zt)||this.insert("table",zt)}},{key:"time",value:function(){var $t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";if(this.timer[$t])return this.insert("warn",["Timer '".concat($t,"' already exists")]);this.timer[$t]=na()()}},{key:"timeLog",value:function(){var $t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default",zt=this.timer[$t];if(!zt)return this.insert("warn",["Timer '".concat($t,"' does not exist")]);this.info("".concat($t,": ").concat(na()()-zt,"ms"))}},{key:"timeEnd",value:function(){var $t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";this.timeLog($t),delete this.timer[$t]}},{key:"clear",value:function(){var $t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.logs=[],this.displayLogs=[],this.selectLog(null),this.lastLog=void 0,this.counter={},this.timer={},this.groupStack=new(Is()),this.asyncList=[],this.asyncTimer&&(clearTimeout(this.asyncTimer),this.asyncTimer=null),$t?this.render():this.insert("log",["%cConsole was cleared","color:#808080;font-style:italic;"])}},{key:"info",value:function(){for(var $t=arguments.length,zt=new Array($t),rn=0;rn<$t;rn++)zt[rn]=arguments[rn];Vt()(zt)||this.insert("info",zt)}},{key:"error",value:function(){for(var $t=arguments.length,zt=new Array($t),rn=0;rn<$t;rn++)zt[rn]=arguments[rn];Vt()(zt)||this.insert("error",zt)}},{key:"warn",value:function(){for(var $t=arguments.length,zt=new Array($t),rn=0;rn<$t;rn++)zt[rn]=arguments[rn];Vt()(zt)||this.insert("warn",zt)}},{key:"group",value:function(){for(var $t=arguments.length,zt=new Array($t),rn=0;rn<$t;rn++)zt[rn]=arguments[rn];this.insert({type:"group",args:zt,ignoreFilter:!0})}},{key:"groupCollapsed",value:function(){for(var $t=arguments.length,zt=new Array($t),rn=0;rn<$t;rn++)zt[rn]=arguments[rn];this.insert({type:"groupCollapsed",args:zt,ignoreFilter:!0})}},{key:"groupEnd",value:function(){this.insert("groupEnd")}},{key:"evaluate",value:function($t){this.insert({type:"input",args:[$t],ignoreFilter:!0});try{this.output(this.evalJs($t))}catch(zt){this.insert({type:"error",ignoreFilter:!0,args:[zt]})}}},{key:"html",value:function(){for(var $t=arguments.length,zt=new Array($t),rn=0;rn<$t;rn++)zt[rn]=arguments[rn];this.insert("html",zt)}},{key:"toggleGroup",value:function($t){$t.targetGroup.collapsed?this.openGroup($t):this.collapseGroup($t)}},{key:"output",value:function($t){this.insert({type:"output",args:[$t],ignoreFilter:!0})}},{key:"render",value:function(){var $t=this.logs,zt=this.selectedLog;this.$el.html(""),this.isAtBottom=!0,this.updateBottomSpace(0),this.updateTopSpace(0),this.displayLogs=[];for(var rn=0,_n=$t.length;rn<_n;rn++)this.attachLog($t[rn]);zt&&(yt()(this.displayLogs,zt)||this.selectLog(null))}},{key:"insert",value:function($t,zt){var rn,_n=this.options,nr=_n.showHeader,jn=_n.asyncRender;if(nr&&(rn={time:Ml(),from:Fs()}),jn)return this.insertAsync($t,zt,rn);this.insertSync($t,zt,rn)}},{key:"insertAsync",value:function($t,zt,rn){this.asyncList.push([$t,zt,rn]),this.handleAsyncList()}},{key:"insertSync",value:function($t,zt,rn){var _n,nr=this,jn=this.logs,mr=this.groupStack,On=this.options,vr=On.maxNum,Jr=On.accessGetter,io=On.unenumerable,so=On.lazyEvaluation;if((_n=$r()($t)?{type:$t,args:zt,header:rn}:$t).type==="groupEnd")return this.lastLog.groupEnd(),void this.groupStack.pop();if(mr.size>0&&(_n.group=mr.peek()),Cs()(_n,{id:++Jl,accessGetter:Jr,unenumerable:io,lazyEvaluation:so}),_n.type==="group"||_n.type==="groupCollapsed"){var To={id:ko()("group"),collapsed:!1,parent:mr.peek(),indentLevel:mr.size+1};_n.type==="groupCollapsed"&&(To.collapsed=!0),_n.targetGroup=To,mr.push(To)}var to=new Al(this,_n);to.on("updateHeight",function(){nr.isAtBottom=!1,nr.renderViewport()});var oo=this.lastLog;if(oo&&!yt()(["html","group","groupCollapsed"],to.type)&&oo.type===to.type&&to.isSimple()&&oo.text()===to.text()?(oo.addCount(),to.header&&oo.updateTime(to.header.time),to=oo,this.detachLog(oo)):(jn.push(to),this.lastLog=to),vr!==0&&jn.length>vr){var lo=jn[0];this.detachLog(lo),jn.shift()}this.attachLog(to),this.emit("insert",to)}},{key:"updateTopSpace",value:function($t){this.topSpaceHeight=$t,this.el.style.top=$t+"px"}},{key:"updateBottomSpace",value:function($t){this.bottomSpaceHeight=$t}},{key:"updateSpace",value:function($t){this.spaceHeight!==$t&&(this.spaceHeight=$t,this.space.style.height=$t+"px")}},{key:"detachLog",value:function($t){var zt=this.displayLogs,rn=zt.indexOf($t);rn>-1&&(zt.splice(rn,1),this.renderViewport())}},{key:"attachLog",value:function($t){if(this.filterLog($t)&&!$t.collapsed){var zt=this.displayLogs;if(zt.length===0)return zt.push($t),void this.renderViewport();var rn=ba()(zt);if($t.id>rn.id)return zt.push($t),void this.renderViewport();for(var _n,nr=0,jn=zt.length-1,mr=0;nr<=jn;){if((_n=zt[mr=nr+Math.floor((jn-nr)/2)]).id===$t.id)return;_n.id<$t.id?nr=mr+1:jn=mr-1}_n.id<$t.id?zt.splice(mr+1,0,$t):zt.splice(mr,0,$t),this.renderViewport()}}},{key:"handleAsyncList",value:function(){var $t=this,zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,rn=this.asyncList;this.asyncTimer||(this.asyncTimer=setTimeout(function(){$t.asyncTimer=null;var _n,nr,jn=!1,mr=rn.length;mr<1e3?(nr=200,_n=400):mr<5e3?(nr=500,_n=800):mr<1e4?(nr=800,_n=1e3):mr<25e3?(nr=1e3,_n=1200):mr<5e4?(nr=1500,_n=1500):(nr=2e3,_n=2500),nr>mr&&(nr=mr,jn=!0);for(var On=0;On<nr;On++){var vr=$(rn.shift(),3),Jr=vr[0],io=vr[1],so=vr[2];$t.insertSync(Jr,io,so)}jn||ks()(function(){return $t.handleAsyncList(_n)})},zt))}},{key:"injectGlobal",value:function(){It()(this.global,function($t,zt){window[zt]||(window[zt]=$t)})}},{key:"clearGlobal",value:function(){It()(this.global,function($t,zt){window[zt]&&window[zt]===$t&&delete window[zt]})}},{key:"evalJs",value:function($t){var zt;this.injectGlobal();try{zt=eval.call(window,"(".concat($t,")"))}catch{zt=eval.call(window,$t)}return this.setGlobal("$_",zt),this.clearGlobal(),zt}},{key:"filterLog",value:function($t){var zt=this.options.level,rn=this.options.filter;if($t.ignoreFilter)return!0;if(!yt()(zt,$t.level))return!1;if(rn){if(Vr()(rn))return rn($t);if(ys()(rn))return rn.test(Tn()($t.text()));if($r()(rn)&&(rn=sn()(rn)))return yt()(Tn()($t.text()),Tn()(rn))}return!0}},{key:"collapseGroup",value:function($t){$t.targetGroup.collapsed=!0,$t.updateIcon("caret-right"),this.updateGroup($t)}},{key:"openGroup",value:function($t){$t.targetGroup.collapsed=!1,$t.updateIcon("caret-down"),this.updateGroup($t)}},{key:"updateGroup",value:function($t){for(var zt=$t.targetGroup,rn=this.logs,_n=rn.length,nr=rn.indexOf($t)+1;nr<_n;){var jn=rn[nr];if(!jn.checkGroup()&&jn.group===zt)break;jn.collapsed?this.detachLog(jn):this.attachLog(jn),nr++}}},{key:"selectLog",value:function($t){var zt;this.selectedLog&&(this.selectedLog.deselect(),this.selectedLog=null),zr()($t)?this.emit("deselect"):(this.selectedLog=$t,(zt=this.selectedLog)===null||zt===void 0||zt.select(),this.emit("select",$t))}},{key:"bindEvent",value:function(){var $t=this,zt=this.$el,rn=this.c;this.resizeSensor.addListener(this.renderViewport);var _n=this;zt.on("click",rn(".log-container"),function(){_n.selectLog(this.log)}),this.on("optionChange",function(nr,jn){var mr=$t.logs;switch(nr){case"maxNum":jn>0&&mr.length>jn&&($t.logs=mr.slice(mr.length-jn),$t.render());break;case"filter":$t.render();break;case"level":$t.options.level=mo()(jn),$t.render()}}),this.$container.on("scroll",this.onScroll)}},{key:"_renderViewport",value:function(){var $t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},zt=$t.topTolerance,rn=zt===void 0?500:zt,_n=$t.bottomTolerance,nr=_n===void 0?500:_n,jn=this.el,mr=this.container,On=this.space;if(!mn()(mr)){for(var vr=mr.scrollTop,Jr=mr.offsetHeight,io=On.getBoundingClientRect().width,so=vr-rn,To=vr+Jr+nr,to=this.displayLogs,oo=0,lo=0,hr=0,uo=to.length,Go=this.fakeEl,hs=document.createDocumentFragment(),bo=[],zo=0;zo<uo;zo++){var Vo=to[zo],ds=Vo.width;Vo.height!==0&&ds===io||(hs.appendChild(Vo.container),bo.push(Vo))}if(bo.length>0){Go.appendChild(hs);for(var Ho=0,Bs=bo.length;Ho<Bs;Ho++)bo[Ho].updateSize();Go.textContent=""}for(var rs=document.createDocumentFragment(),Qo=0;Qo<uo;Qo++){var Os=to[Qo],js=Os.container,Nr=Os.height;hr>To?lo+=Nr:hr+Nr>so?rs.appendChild(js):hr<so&&(oo+=Nr),hr+=Nr}for(this.updateSpace(hr),this.updateTopSpace(oo),this.updateBottomSpace(lo);jn.firstChild;)jn.lastChild&&jn.removeChild(jn.lastChild);jn.appendChild(rs);var fs=mr.scrollHeight;this.isAtBottom&&vr<=fs-Jr&&(mr.scrollTop=1e7)}}},{key:"initTpl",value:function(){this.$container.html(this.c(Co()(Ms||(Ms=(0,d.Z)([`
      <div class="logs-space">
        <div class="fake-logs"></div>
        <div class="logs"></div>
      </div>
    `])))))}}]),wr}(Dl),Ml=function(){return ws()("HH:MM:ss ")};function Fs(){for(var Cr=new Error,Xr="",wr=Cr.stack?Cr.stack.split(`
`):"",$t=0,zt=wr.length;$t<zt;$t++)if((Xr=wr[$t]).indexOf("winConsole")>-1&&$t<zt-1){Xr=wr[$t+1];break}return Xr}(function(Cr,Xr){try{Cr.exports=Xr,Cr.exports.default=Xr}catch{}})(i,_c)},5564:function(i,s,o){o.d(s,{Z:function(){return mo}});var d=o(168),j=o(5671),$=o(3144),ot=o(7326),ht=o(1752),pt=o(9340),dt=o(2963),gt=o(1120),wt=o(1512),bt=o.n(wt),St=o(1907),Ct=o.n(St),Et=o(1443),Pt=o.n(Et),_t=o(2461),yt=o.n(_t),xt=o(4331),Dt=o.n(xt),Ot=o(5610),Bt=o.n(Ot),At=o(7483),It=o.n(At),Gt=(o(3990),o(6341)),Jt=o.n(Gt),nn=o(3875),Vt=o.n(nn),Ut=o(6954),Ht=o.n(Ut);o(9585);function jt(Zr){var jr="luna-".concat(Zr,"-");function Er(Fn){return yt()(Dt()(Fn).split(/\s+/),function(er){return Jt()(er,jr)?er:er.replace(/[\w-]+/,function(Tn){return"".concat(jr).concat(Tn)})}).join(" ")}return function(Fn){if(/<[^>]*>/g.test(Fn))try{var er=It().parse(Fn);return Wt(er,function(Tn){Tn.attrs&&Tn.attrs.class&&(Tn.attrs.class=Er(Tn.attrs.class))}),It().stringify(er)}catch{return Er(Fn)}return Er(Fn)}}function Wt(Zr,jr){for(var Er=0,Fn=Zr.length;Er<Fn;Er++){var er=Zr[Er];jr(er),er.content&&Wt(er.content,jr)}}var ln="ontouchstart"in Bt(),Qt="PointerEvent"in Bt(),Xt={start:"touchstart",move:"touchmove",end:"touchend"},on={start:"mousedown",move:"mousemove",end:"mouseup"},sn={start:"pointerdown",move:"pointermove",end:"pointerup"};function bn(Zr){return Qt?sn[Zr]:ln?Xt[Zr]:on[Zr]}function Zn(Zr,jr){var Er="clientX";return jr[Er]?jr[Er]:jr.changedTouches?jr.changedTouches[0][Er]:0}function Rn(Zr){return Vt()(Zr.replace("px",""))}var vn=o(3783),yn=o.n(vn),Ln=o(6329),qn=o.n(Ln),_r=o(4193),Jn=o.n(_r),dr=o(5852),Un=o.n(dr),mn=o(6930),xn=o.n(mn);function cn(Zr){var jr=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Er,Fn=(0,gt.Z)(Zr);if(jr){var er=(0,gt.Z)(this).constructor;Er=Reflect.construct(Fn,arguments,er)}else Er=Fn.apply(this,arguments);return(0,dt.Z)(this,Er)}}var kn,En=function(Zr){(0,pt.Z)(Er,Zr);var jr=cn(Er);function Er(Fn,er){var Tn,qt,Mr=er.compName,qr=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Yr=qr===void 0?"light":qr;return(0,j.Z)(this,Er),(Tn=jr.call(this)).subComponents=[],Tn.compName=Mr,Tn.c=jt(Mr),Tn.options={},Tn.container=Fn,Tn.$container=bt()(Fn),Tn.$container.addClass(["luna-".concat(Mr),Tn.c("platform-".concat((qt=Ht()(),qt==="os x"?"mac":qt)))]),Tn.on("optionChange",function(Qn,kr,ar){var Cn=Tn.c;Qn==="theme"&&(Tn.$container.rmClass(Cn("theme-".concat(ar))).addClass(Cn("theme-".concat(kr))),yn()(Tn.subComponents,function($n){return $n.setOption("theme",kr)}))}),Tn.setOption("theme",Yr),Tn}return(0,$.Z)(Er,[{key:"destroy",value:function(){var Fn=this;this.destroySubComponents();var er=this.$container,Tn=er.attr("class");yn()(Tn.split(/\s+/),function(qt){xn()(qt,"luna-".concat(Fn.compName))&&er.rmClass(qt)}),er.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(Fn,er){var Tn=this,qt=this.options,Mr={};typeof Fn=="string"?Mr[Fn]=er:Mr=Fn,yn()(Mr,function(qr,Yr){var Qn=qt[Yr];qt[Yr]=qr,Tn.emit("optionChange",Yr,qr,Qn)})}},{key:"getOption",value:function(Fn){return this.options[Fn]}},{key:"addSubComponent",value:function(Fn){Fn.setOption("theme",this.options.theme),this.subComponents.push(Fn)}},{key:"removeSubComponent",value:function(Fn){Un()(this.subComponents,function(er){return er===Fn})}},{key:"destroySubComponents",value:function(){yn()(this.subComponents,function(Fn){return Fn.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Fn){var er=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Jn()(Fn,er),qn()(this.options,Fn)}},{key:"find",value:function(Fn){return this.$container.find(this.c(Fn))}}]),Er}(Pt()),cr=o(8901),Gn=o.n(cr),ur=o(8613),hn=o.n(ur),sr=o(3367),An=o.n(sr),Nn=o(9833),Wn=o.n(Nn),Dn=o(1286),Kn=o.n(Dn),lr=o(242),Rr=o.n(lr),$r=o(2439),br=o.n($r),Tr=o(6156),fr=o.n(Tr),In=o(4777),_i=o.n(In),pr=o(1754),tr=o.n(pr),ir=o(6768),Mn=o.n(ir),gn=o(3063),Xn=o.n(gn),Vn=o(9882),gr=o.n(Vn),zr=o(9853),Ir=o.n(zr),Wr=o(6435),eo=o.n(Wr);function Vr(Zr){var jr=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Er,Fn=(0,gt.Z)(Zr);if(jr){var er=(0,gt.Z)(this).constructor;Er=Reflect.construct(Fn,arguments,er)}else Er=Fn.apply(this,arguments);return(0,dt.Z)(this,Er)}}i=o.hmd(i);var go=bt()(document),mo=function(Zr){(0,pt.Z)(Er,Zr);var jr=Vr(Er);function Er(Fn,er){var Tn;(0,j.Z)(this,Er),(Tn=jr.call(this,Fn,{compName:"data-grid"},er)).resizeIdx=0,Tn.resizeStartX=0,Tn.resizeStartLeft=0,Tn.resizeDeltaX=0,Tn.nodes=[],Tn.colWidthsInitialized=!1,Tn.colMap={},Tn.selectedNode=null,Tn.isAscending=!0,Tn.colWidths=[],Tn.onResizeColMove=function(Qn){var kr=(0,ot.Z)(Tn),ar=kr.resizeIdx,Cn=kr.$resizers,$n=kr.colWidths,rr=kr.$colgroup,xr=Zn("x",Qn=Qn.origEvent)-Tn.resizeStartX,Dr=$n[ar],Pr=$n[ar+1],Ar=eo()(24-Dr,0),Lr=Ir()(Pr-24,0);xr=gr()(xr,Ar,Lr),rr.each(function(){var Hr=bt()(this).find("col");Hr.eq(ar).css("width",Dr+xr+"px"),Hr.eq(ar+1).css("width",Pr-xr+"px")}),Tn.resizeDeltaX=xr;var Br=Tn.resizeStartLeft+xr;Cn.eq(ar).css("left","".concat(Br,"px"))},Tn.onResizeColEnd=function(Qn){Tn.onResizeColMove(Qn);var kr=(0,ot.Z)(Tn),ar=kr.c,Cn=kr.colWidths,$n=kr.resizeIdx,rr=kr.resizeDeltaX,xr=Tn.options.columns,Dr=xr[$n],Pr=xr[$n+1],Ar=Cn[$n]+rr,Lr=Ar+(Cn[$n+1]-rr),Br=Dr.weight+Pr.weight,Hr=Br*(Ar/Lr),no=Br-Hr;Dr.weight=Hr,Pr.weight=no,Tn.applyColWeights(),bt()(document.body).rmClass(ar("resizing")),go.off(bn("move"),Tn.onResizeColMove),go.off(bn("end"),Tn.onResizeColEnd)},Tn.$container.attr("tabindex","0"),Tn.resizeSensor=new(Rr())(Fn),Tn.onResize=br()(function(){Tn.updateHeight(),Tn.updateWeights()},16),er.height&&(er.maxHeight=er.height,er.minHeight=er.height),Tn.initOptions(er,{minHeight:41,maxHeight:1/0,filter:""});var qt=Tn.options,Mr=qt.columns,qr=qt.minHeight,Yr=qt.maxHeight;return yn()(Mr,function(Qn){Jn()(Qn,{sortable:!1}),Tn.colMap[Qn.id]=Qn}),Yr<qr&&Tn.setOption("maxHeight",qr),Tn.initTpl(),Tn.$headerRow=Tn.find(".header").find("tr"),Tn.$fillerRow=Tn.find(".filler-row"),Tn.fillerRow=Tn.$fillerRow.get(0),Tn.$tableBody=Tn.find(".data").find("tbody"),Tn.tableBody=Tn.$tableBody.get(0),Tn.$colgroup=Tn.$container.find("colgroup"),Tn.$dataContainer=Tn.find(".data-container"),Tn.renderHeader(),Tn.renderResizers(),Tn.updateWeights(),Tn.updateHeight(),Tn.bindEvent(),Tn}return(0,$.Z)(Er,[{key:"destroy",value:function(){(0,ht.Z)((0,gt.Z)(Er.prototype),"destroy",this).call(this),this.resizeSensor.destroy(),this.$container.rmAttr("tabindex")}},{key:"remove",value:function(Fn){var er=this.nodes,Tn=er.indexOf(Fn);Tn>-1&&(Fn.detach(),er.splice(Tn,1),Fn===this.selectedNode&&this.selectNode(er[Tn]||er[Tn-1]||null),this.updateHeight())}},{key:"append",value:function(Fn,er){var Tn=new $o(this,Fn,er);return this.nodes.push(Tn),this.sortId?this.sortNodes(this.sortId,this.isAscending):this.filterNode(Tn)&&(this.tableBody.insertBefore(Tn.container,this.fillerRow),this.updateHeight()),Tn}},{key:"clear",value:function(){yn()(this.nodes,function(Fn){return Fn.detach()}),this.nodes=[],this.selectNode(null),this.updateHeight()}},{key:"updateHeight",value:function(){var Fn=this.$fillerRow,er=this.c,Tn=this.$container,qt=this.options,Mr=qt.maxHeight,qr=qt.minHeight;this.$dataContainer.css({height:"auto"});var Yr=this.$headerRow.offset().height+Rn(Tn.css("border-top-width"))+Rn(Tn.css("border-bottom-width"));(qr-=Yr)<0&&(qr=0),Mr-=Yr;var Qn=this.$dataContainer.find(er(".node")),kr=Qn.length,ar=0;kr>0&&(ar=Qn.offset().height*kr),ar>qr?Fn.hide():Fn.show(),ar<qr?ar=qr:ar>=Mr&&(ar=Mr),this.$dataContainer.css({height:ar})}},{key:"selectNode",value:function(Fn){var er;(fr()(Fn)||Fn!=null&&Fn.selectable)&&(this.selectedNode&&(this.selectedNode.deselect(),this.selectedNode=null),fr()(Fn)?this.emit("deselect"):(this.selectedNode=Fn,(er=this.selectedNode)===null||er===void 0||er.select(),this.emit("select",Fn)))}},{key:"onResizeColStart",value:function(Fn){var er=this.c,Tn=this.resizeIdx,qt=this.$resizers;Fn.stopPropagation(),Fn.preventDefault(),Fn=Fn.origEvent,this.resizeStartX=Zn("x",Fn),this.resizeStartLeft=Rn(qt.eq(Tn).css("left")),bt()(document.body).addClass(er("resizing")),go.on(bn("move"),this.onResizeColMove),go.on(bn("end"),this.onResizeColEnd)}},{key:"bindEvent",value:function(){var Fn=this,er=this.c,Tn=this.$headerRow,qt=this.$tableBody,Mr=this.$resizers;this.resizeSensor.addListener(this.onResize);var qr=this;qt.on("click",er(".node"),function(){qr.selectNode(this.dataGridNode)}),Tn.on("click",er(".sortable"),function(Yr){Yr.stopPropagation();var Qn=bt()(this),kr=Qn.data("id"),ar=Qn.data("order")!=="descending";Qn.data("order",ar?"descending":"ascending"),qr.sortNodes(kr,ar),Tn.find("th").each(function(){var Cn=bt()(this);Cn.data("id")!==kr&&Cn.rmAttr("data-order")})}),Mr.on(bn("start"),function(Yr){var Qn=bt()(this);qr.resizeIdx=Vt()(Qn.data("idx")),qr.onResizeColStart(Yr)}),this.on("optionChange",function(Yr){switch(Yr){case"minHeight":case"maxHeight":Fn.updateHeight();break;case"filter":Fn.renderData()}})}},{key:"sortNodes",value:function(Fn,er){var Tn=this.colMap[Fn].comparator||vs;this.nodes.sort(function(qt,Mr){var qr=qt.data[Fn],Yr=Mr.data[Fn];return Wn()(qr)&&(qr=qr.innerText),Wn()(Yr)&&(Yr=Yr.innerText),er?Tn(qr,Yr):Tn(Yr,qr)}),this.renderData(),this.sortId=Fn,this.isAscending=er}},{key:"updateWeights",value:function(){var Fn=this.container,er=this.$headerRow,Tn=this.options.columns,qt=Fn.offsetWidth;if(!this.colWidthsInitialized&&qt){for(var Mr=0,qr=Tn.length;Mr<qr;Mr++){var Yr=Tn[Mr];if(!Yr.weight){var Qn=er.find("th").get(Mr).offsetWidth;Yr.weight=100*Qn/qt}}this.colWidthsInitialized=!0}this.applyColWeights()}},{key:"applyColWeights",value:function(){var Fn=this.container,er=this.$colgroup,Tn=this.options.columns,qt=Fn.offsetWidth;if(!(qt<=0)){for(var Mr=0,qr=Tn.length,Yr=0;Yr<qr;Yr++)Mr+=Tn[Yr].weight;var Qn="",kr=0,ar=0;this.colWidths=[];for(var Cn=0;Cn<qr;Cn++){var $n=(kr+=Tn[Cn].weight)*qt/Mr|0,rr=Math.max($n-ar,14);ar=$n,Qn+='<col style="width:'.concat(rr,'px"></col>'),this.colWidths[Cn]=rr}er.html(Qn),this.positionResizers()}}},{key:"positionResizers",value:function(){for(var Fn=this.colWidths,er=[],Tn=Fn.length-1,qt=0;qt<Tn;qt++)er[qt]=(er[qt-1]||0)+Fn[qt];for(var Mr=0;Mr<Tn;Mr++)this.$resizers.eq(Mr).css("left",er[Mr]+"px")}},{key:"renderData",value:function(){var Fn=this,er=this.tableBody,Tn=this.nodes,qt=this.fillerRow;yn()(Tn,function(Mr){return Mr.detach()}),yn()(Tn,function(Mr){Fn.filterNode(Mr)&&er.insertBefore(Mr.container,qt)}),this.selectedNode&&!this.filterNode(this.selectedNode)&&this.selectNode(null),this.updateHeight()}},{key:"filterNode",value:function(Fn){var er=this.options.filter;if(er){if(_i()(er))return er(Fn);if(tr()(er))return er.test(Fn.text());if(Mn()(er)&&(er=Dt()(er)))return Jt()(Xn()(Fn.text()),Xn()(er))}return!0}},{key:"renderHeader",value:function(){var Fn=this.c,er="",Tn="";yn()(this.options.columns,function(qt){var Mr=Gn()(qt.title);qt.sortable?er+=Fn('<th class="sortable" data-id="'.concat(qt.id,'">').concat(Mr,"</th>")):er+="<th>".concat(Mr,"</th>"),Tn+="<td></td>"}),this.$headerRow.html(er),this.$fillerRow.html(Tn)}},{key:"renderResizers",value:function(){for(var Fn="",er=this.options.columns.length-1,Tn=0;Tn<er;Tn++)Fn+=this.c('<div class="resizer" data-idx="'.concat(Tn,'"></div>'));this.$container.append(Fn),this.$resizers=this.find(".resizer")}},{key:"initTpl",value:function(){this.$container.html(this.c(Ct()(kn||(kn=(0,d.Z)([`
        <div class="header-container">
          <table class="header">
            <colgroup></colgroup>
            <tbody>
              <tr></tr>
            </tbody>
          </table>
        </div>
        <div class="data-container">
          <table class="data">
            <colgroup></colgroup>
            <tbody>
              <tr class="filler-row"></tr>
            </tbody>
          </table>
        </div>
      `])))))}}]),Er}(En),$o=function(){function Zr(jr,Er){var Fn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{selectable:!1};(0,j.Z)(this,Zr),this.container=hn()("tr"),this.selectable=!1,this.container.dataGridNode=this,this.$container=bt()(this.container),this.$container.addClass(jr.c("node")),this.dataGrid=jr,this.data=Er,Fn.selectable&&(this.selectable=Fn.selectable),this.render()}return(0,$.Z)(Zr,[{key:"text",value:function(){return this.$container.text()}},{key:"detach",value:function(){this.$container.remove()}},{key:"select",value:function(){this.$container.addClass(this.dataGrid.c("selected"))}},{key:"deselect",value:function(){this.$container.rmClass(this.dataGrid.c("selected"))}},{key:"render",value:function(){var jr=this.data,Er=this.$container,Fn=this.container,er=this.dataGrid.getOption("columns");Er.html(""),yn()(er,function(Tn){var qt=hn()("td"),Mr=jr[Tn.id];Kn()(Mr)||(Wn()(Mr)?qt.appendChild(Mr):qt.innerText=An()(Mr)),Fn.appendChild(qt)})}}]),Zr}();function vs(Zr,jr){if(Zr=An()(Zr),jr=An()(jr),xn()(Zr,"_")&&!xn()(jr,"_"))return 1;if(xn()(jr,"_")&&!xn()(Zr,"_"))return-1;for(var Er,Fn,er,Tn,qt=/^\d+|^\D+/;;){if(!Zr)return jr?-1:0;if(!jr)return 1;if(Er=Zr.match(qt)[0],Fn=jr.match(qt)[0],er=!isNaN(Er),Tn=!isNaN(Fn),er&&!Tn)return-1;if(Tn&&!er)return 1;if(er&&Tn){var Mr=Er-Fn;if(Mr)return Mr;if(Er.length!==Fn.length)return+Er||+Fn?Fn.length-Er.length:Er.length-Fn.length}else if(Er!==Fn)return Er<Fn?-1:1;Zr=Zr.substring(Er.length),jr=jr.substring(Fn.length)}}(function(Zr,jr){try{Zr.exports=jr,Zr.exports.default=jr}catch{}})(i,mo)},8209:function(i,s,o){o.d(s,{Z:function(){return lr}});var d=o(168),j=o(4942),$=o(5671),ot=o(3144),ht=o(7326),pt=o(9340),dt=o(2963),gt=o(1120),wt=o(1443),bt=o.n(wt),St=o(1512),Ct=o.n(St),Et=o(2461),Pt=o.n(Et),_t=o(4331),yt=o.n(_t),xt=o(5610),Dt=o.n(xt),Ot=o(7483),Bt=o.n(Ot),At=(o(3990),o(6341)),It=o.n(At),Gt=(o(3875),o(6954)),Jt=o.n(Gt);o(9585);function nn(br){var Tr="luna-".concat(br,"-");function fr(In){return Pt()(yt()(In).split(/\s+/),function(_i){return It()(_i,Tr)?_i:_i.replace(/[\w-]+/,function(pr){return"".concat(Tr).concat(pr)})}).join(" ")}return function(In){if(/<[^>]*>/g.test(In))try{var _i=Bt().parse(In);return Vt(_i,function(pr){pr.attrs&&pr.attrs.class&&(pr.attrs.class=fr(pr.attrs.class))}),Bt().stringify(_i)}catch{return fr(In)}return fr(In)}}function Vt(br,Tr){for(var fr=0,In=br.length;fr<In;fr++){var _i=br[fr];Tr(_i),_i.content&&Vt(_i.content,Tr)}}var Ut="ontouchstart"in Dt();function Ht(){var br=Jt()();return br==="os x"?"mac":br}var jt=o(3783),Wt=o.n(jt),ln=o(6329),Qt=o.n(ln),Xt=o(4193),on=o.n(Xt),sn=o(5852),bn=o.n(sn);function Zn(br){var Tr=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var fr,In=(0,gt.Z)(br);if(Tr){var _i=(0,gt.Z)(this).constructor;fr=Reflect.construct(In,arguments,_i)}else fr=In.apply(this,arguments);return(0,dt.Z)(this,fr)}}var Rn,vn=function(br){(0,pt.Z)(fr,br);var Tr=Zn(fr);function fr(In,_i){var pr,tr=_i.compName,ir=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Mn=ir===void 0?"light":ir;return(0,$.Z)(this,fr),(pr=Tr.call(this)).subComponents=[],pr.compName=tr,pr.c=nn(tr),pr.options={},pr.container=In,pr.$container=Ct()(In),pr.$container.addClass(["luna-".concat(tr),pr.c("platform-".concat(Ht()))]),pr.on("optionChange",function(gn,Xn,Vn){var gr=pr.c;gn==="theme"&&(pr.$container.rmClass(gr("theme-".concat(Vn))).addClass(gr("theme-".concat(Xn))),Wt()(pr.subComponents,function(zr){return zr.setOption("theme",Xn)}))}),pr.setOption("theme",Mn),pr}return(0,ot.Z)(fr,[{key:"destroy",value:function(){this.destroySubComponents();var In=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(In("platform-".concat(Ht()))).rmClass(In("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(In,_i){var pr=this,tr=this.options,ir={};typeof In=="string"?ir[In]=_i:ir=In,Wt()(ir,function(Mn,gn){var Xn=tr[gn];tr[gn]=Mn,pr.emit("optionChange",gn,Mn,Xn)})}},{key:"getOption",value:function(In){return this.options[In]}},{key:"addSubComponent",value:function(In){In.setOption("theme",this.options.theme),this.subComponents.push(In)}},{key:"removeSubComponent",value:function(In){bn()(this.subComponents,function(_i){return _i===In})}},{key:"destroySubComponents",value:function(){Wt()(this.subComponents,function(In){return In.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(In){var _i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};on()(In,_i),Qt()(this.options,In)}},{key:"find",value:function(In){return this.$container.find(this.c(In))}}]),fr}(bt()),yn=o(8613),Ln=o.n(yn),qn=o(5972),_r=o.n(qn),Jn=o(1907),dr=o.n(Jn),Un=o(1352),mn=o.n(Un),xn=o(2289),cn=o.n(xn),kn=o(3651),En=o.n(kn),cr=o(7756),Gn=o.n(cr),ur=o(8901),hn=o.n(ur),sr=o(1672),An=o.n(sr);function Nn(br,Tr){var fr=Object.keys(br);if(Object.getOwnPropertySymbols){var In=Object.getOwnPropertySymbols(br);Tr&&(In=In.filter(function(_i){return Object.getOwnPropertyDescriptor(br,_i).enumerable})),fr.push.apply(fr,In)}return fr}function Wn(br){for(var Tr=1;Tr<arguments.length;Tr++){var fr=arguments[Tr]!=null?arguments[Tr]:{};Tr%2?Nn(Object(fr),!0).forEach(function(In){(0,j.Z)(br,In,fr[In])}):Object.getOwnPropertyDescriptors?Object.defineProperties(br,Object.getOwnPropertyDescriptors(fr)):Nn(Object(fr)).forEach(function(In){Object.defineProperty(br,In,Object.getOwnPropertyDescriptor(fr,In))})}return br}function Dn(br){var Tr=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var fr,In=(0,gt.Z)(br);if(Tr){var _i=(0,gt.Z)(this).constructor;fr=Reflect.construct(In,arguments,_i)}else fr=In.apply(this,arguments);return(0,dt.Z)(this,fr)}}i=o.hmd(i);var Kn={comment:"",string:"",number:"",keyword:"",operator:""},lr=function(br){(0,pt.Z)(fr,br);var Tr=Dn(fr);function fr(In){var _i,pr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,$.Z)(this,fr),(_i=Tr.call(this,In,{compName:"dom-viewer"},pr)).isExpanded=!1,_i.childNodes=[],_i.childNodeDomViewers=[],_i.toggle=function(){_i.isExpanded?_i.collapse():_i.expand()},_i.initOptions(pr,{node:document.documentElement,parent:null,isEndTag:!1,rootContainer:In,rootDomViewer:(0,ht.Z)(_i),ignore:function(){return!1}}),_i.initTpl(),_i.bindEvent(),_i.options.isEndTag||_i.initObserver(),_i}return(0,ot.Z)(fr,[{key:"select",value:function(In){var _i=this.c,pr=this.options;if(!In||In&&pr.node===In)return this.$tag.hasClass(_i("selected"))?void 0:(Ct()(this.options.rootContainer).find(_i(".selected")).rmClass(_i("selected")).rmAttr("tabindex"),this.$tag.attr("tabindex","0").get(0).focus(),this.$tag.addClass(_i("selected")),void pr.rootDomViewer.emit("select",pr.node));if(In.nodeType===Node.ELEMENT_NODE)for(var tr=In,ir=In.parentElement;ir;){if(ir===pr.node){this.expand(),this.childNodeDomViewers[this.childNodes.indexOf(tr)].select(In);break}tr=ir,ir=ir.parentElement}}},{key:"attach",value:function(){this.container.appendChild(this.$tag.get(0)),this.$children&&this.container.appendChild(this.$children.get(0))}},{key:"isAttached",value:function(){return!!this.$tag.get(0).parentNode}},{key:"detach",value:function(){this.$tag.remove(),this.$children&&this.$children.remove()}},{key:"expand",value:function(){this.isExpandable()&&!this.isExpanded&&(this.isExpanded=!0,this.renderExpandTag(),this.renderChildNodes())}},{key:"collapse",value:function(){this.isExpandable()&&this.isExpanded&&(this.isExpanded=!1,this.renderCollapseTag())}},{key:"destroy",value:function(){var In=this.c;this.$tag.hasClass(In("selected"))&&this.options.rootDomViewer.emit("deselect"),this.detach(),this.observer&&this.observer.disconnect(),this.destroySubComponents(),this.options.rootDomViewer===this&&this.$container.rmClass("luna-dom-viewer").rmClass(In("platform-".concat(Ht()))).rmClass(In("theme-".concat(this.options.theme))),this.emit("destroy"),this.removeAllListeners()}},{key:"renderExpandTag",value:function(){var In=this.$tag,_i=this.c,pr=this.options.node;In.html(this.renderHtmlTag(Wn(Wn({},Rr(pr)),{},{hasTail:!1,hasToggleButton:!0}))),In.addClass(_i("expanded")),this.$children.rmClass(_i("hidden"))}},{key:"renderCollapseTag",value:function(){var In=this.$tag,_i=this.c,pr=this.options.node;this.$children.addClass(_i("hidden")),this.$tag.html(this.renderHtmlTag(Wn(Wn({},Rr(pr)),{},{hasTail:!0,hasToggleButton:!0}))),In.rmClass(_i("expanded"))}},{key:"initObserver",value:function(){var In=this;this.observer=new(cn())(function(_i){Wt()(_i,function(pr){In.handleMutation(pr)})}),this.observer.observe(this.options.node,{attributes:!0,childList:!0,characterData:!0})}},{key:"handleMutation",value:function(In){var _i=this.$tag,pr=this.c,tr=this.options,ir=tr.node,Mn=tr.ignore;if(It()(["attributes","childList"],In.type)){if(In.type==="childList"){if(An()(In.addedNodes,Mn)&&An()(In.removedNodes,Mn))return;this.renderChildNodes()}this.isExpandable()?this.isExpanded?this.renderExpandTag():this.renderCollapseTag():(this.$children.addClass(pr("hidden")),_i.html(this.renderHtmlTag(Wn(Wn({},Rr(ir)),{},{hasTail:!1}))))}else In.type==="characterData"&&(ir.nodeType===Node.TEXT_NODE?_i.html(this.renderTextNode(ir)):ir.nodeType===Node.COMMENT_NODE&&_i.html(this.renderHtmlComment(ir.nodeValue)))}},{key:"bindEvent",value:function(){var In=this,_i=this.c,pr=this.$tag;this.options.node.nodeType===Node.ELEMENT_NODE&&pr.on("click",_i(".toggle"),function(tr){tr.stopPropagation(),In.toggle()}),Ut?pr.on("click",function(){return In.select()}):pr.on("mousedown",function(){return In.select()})}},{key:"isExpandable",value:function(){return this.options.node.nodeType===Node.ELEMENT_NODE&&this.getChildNodes().length>0}},{key:"getChildNodes",value:function(){var In=this.options,_i=In.rootContainer,pr=In.ignore,tr=this.options.node,ir=mn()(tr.childNodes);return ir=_r()(ir,function(Mn){if(Mn.nodeType===Node.TEXT_NODE||Mn.nodeType===Node.COMMENT_NODE){var gn=Mn.nodeValue;if(yt()(gn)==="")return!1}return Mn!==_i&&!pr(Mn)})}},{key:"initTpl",value:function(){var In=this.container,_i=this.c,pr=this.options,tr=pr.node,ir=pr.isEndTag,Mn=Ct()(Ln()("li"));if(Mn.addClass(_i("tree-item")),this.$tag=Mn,ir)Mn.html(_i('<span class="html-tag" style="margin-left: -15px;">&lt;<span class="tag-name">/'.concat(tr.tagName.toLocaleLowerCase(),'</span>&gt;</span><span class="selection"></span>')));else if(tr.nodeType===Node.ELEMENT_NODE){var gn=this.isExpandable(),Xn=Wn(Wn({},Rr(tr)),{},{hasTail:gn,hasToggleButton:gn});Mn.html(this.renderHtmlTag(Xn))}else if(tr.nodeType===Node.TEXT_NODE)Mn.html(this.renderTextNode(tr));else{if(tr.nodeType!==Node.COMMENT_NODE)return;var Vn=tr.nodeValue;if(Vn.trim()==="")return;Mn.html(this.renderHtmlComment(Vn))}if(In.appendChild(Mn.get(0)),tr.nodeType===tr.ELEMENT_NODE){var gr=Ct()(Ln()("ul"));gr.addClass([_i("children"),_i("hidden")]),In.appendChild(gr.get(0)),this.$children=gr}}},{key:"renderChildNodes",value:function(){var In=this,_i=this.options.node,pr=this.options,tr=pr.rootContainer,ir=pr.ignore,Mn=pr.rootDomViewer,gn=this.$children.get(0),Xn=this.childNodes,Vn=this.childNodeDomViewers;Wt()(Vn,function(Ir){Ir.detach(),In.removeSubComponent(Ir)}),this.endTagDomViewer&&this.endTagDomViewer.detach();var gr=this.getChildNodes();this.childNodes=gr;var zr=[];this.childNodeDomViewers=zr,Wt()(gr,function(Ir,Wr){var eo,Vr=Xn.indexOf(Ir);(eo=Vr>-1?Vn[Vr]:new fr(gn,{node:Ir,parent:In,rootContainer:tr,rootDomViewer:Mn,ignore:ir})).attach(),zr[Wr]=eo,In.addSubComponent(eo)}),Wt()(Vn,function(Ir){Ir.isAttached()||Ir.destroy()}),_i&&(this.endTagDomViewer?this.endTagDomViewer.attach():(this.endTagDomViewer=new fr(gn,{node:_i,parent:this,isEndTag:!0,rootContainer:tr,rootDomViewer:Mn,ignore:ir}),this.addSubComponent(this.endTagDomViewer)))}},{key:"renderHtmlTag",value:function(In){var _i=Pt()(In.attributes,function(ir){var Mn=ir.name,gn=ir.value,Xn=ir.isLink;return`<span class="attribute">
          <span class="attribute-name">`.concat(hn()(Mn),"</span>").concat(gn?'="<span class="attribute-value'.concat(Xn?" attribute-underline":"",'">').concat(hn()(gn),'</span>"'):"","</span>")}).join(""),pr="";In.hasTail?pr="".concat(In.hasTail?"…":"",'<span class="html-tag">&lt;<span class="tag-name">/').concat(In.tagName,"</span>&gt;</span>"):this.isExpandable()||(pr='<span class="html-tag">&lt;<span class="tag-name">/'.concat(In.tagName,"</span>&gt;</span>"));var tr="";return In.hasToggleButton&&(tr='<div class="toggle "><span class="icon icon-arrow-right"></span><span class="icon icon-arrow-down"></span></div>'),this.c(dr()(Rn||(Rn=(0,d.Z)([`
      `,`
      <span class="html-tag">&lt;<span class="tag-name">`,"</span>","&gt;</span>",`
      <span class="selection"></span>`])),tr,In.tagName,_i,pr))}},{key:"renderTextNode",value:function(In){var _i=this.c,pr=In.nodeValue,tr=In.parentElement,ir='<span class="text-node">',Mn='</span><span class="selection"></span>';if(tr&&pr.length<1e4){if(tr.tagName==="STYLE")return _i("".concat(ir).concat(En()(pr,"css",Kn)).concat(Mn));if(tr.tagName==="SCRIPT")return _i("".concat(ir).concat(En()(pr,"js",Kn)).concat(Mn))}return _i('"'.concat(ir).concat(hn()(Gn()(pr,1e4,{separator:" ",ellipsis:"…"}))).concat(Mn,'"'))}},{key:"renderHtmlComment",value:function(In){return this.c('<span class="html-comment">&lt;!-- '.concat(hn()(In),' --&gt;</span><span class="selection"></span>'))}}]),fr}(vn);function Rr(br){var Tr={tagName:"",attributes:[]};Tr.tagName=br.tagName.toLocaleLowerCase();var fr=[];return Wt()(br.attributes,function(In){var _i=In.name,pr=In.value;fr.push({name:_i,value:pr,isLink:$r(br,_i)})}),Tr.attributes=fr,Tr}function $r(br,Tr){var fr=br.tagName;return(fr==="SCRIPT"||fr==="IMAGE"||fr==="VIDEO"||fr==="AUDIO")&&Tr==="src"||fr==="LINK"&&Tr==="href"}(function(br,Tr){try{br.exports=Tr,br.exports.default=Tr}catch{}})(i,lr)},129:function(i,s,o){o.d(s,{Z:function(){return xn}});var d=o(907),j=o(181);function $(ur){return function(hn){if(Array.isArray(hn))return(0,d.Z)(hn)}(ur)||function(hn){if(typeof Symbol<"u"&&hn[Symbol.iterator]!=null||hn["@@iterator"]!=null)return Array.from(hn)}(ur)||(0,j.Z)(ur)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var ot=o(168),ht=o(5671),pt=o(3144),dt=o(7326),gt=o(1752),wt=o(9340),bt=o(2963),St=o(1120),Ct=o(1443),Et=o.n(Ct),Pt=o(1512),_t=o.n(Pt),yt=o(2461),xt=o.n(yt),Dt=o(4331),Ot=o.n(Dt),Bt=o(5610),At=o.n(Bt),It=o(7483),Gt=o.n(It),Jt=(o(3990),o(6341)),nn=o.n(Jt),Vt=(o(3875),o(6954)),Ut=o.n(Vt);o(9585);function Ht(ur){var hn="luna-".concat(ur,"-");function sr(An){return xt()(Ot()(An).split(/\s+/),function(Nn){return nn()(Nn,hn)?Nn:Nn.replace(/[\w-]+/,function(Wn){return"".concat(hn).concat(Wn)})}).join(" ")}return function(An){if(/<[^>]*>/g.test(An))try{var Nn=Gt().parse(An);return jt(Nn,function(Wn){Wn.attrs&&Wn.attrs.class&&(Wn.attrs.class=sr(Wn.attrs.class))}),Gt().stringify(Nn)}catch{return sr(An)}return sr(An)}}function jt(ur,hn){for(var sr=0,An=ur.length;sr<An;sr++){var Nn=ur[sr];hn(Nn),Nn.content&&jt(Nn.content,hn)}}At();var Wt=o(3783),ln=o.n(Wt),Qt=o(6329),Xt=o.n(Qt),on=o(4193),sn=o.n(on),bn=o(5852),Zn=o.n(bn),Rn=o(6930),vn=o.n(Rn);function yn(ur){var hn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var sr,An=(0,St.Z)(ur);if(hn){var Nn=(0,St.Z)(this).constructor;sr=Reflect.construct(An,arguments,Nn)}else sr=An.apply(this,arguments);return(0,bt.Z)(this,sr)}}var Ln,qn=function(ur){(0,wt.Z)(sr,ur);var hn=yn(sr);function sr(An,Nn){var Wn,Dn,Kn=Nn.compName,lr=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Rr=lr===void 0?"light":lr;return(0,ht.Z)(this,sr),(Wn=hn.call(this)).subComponents=[],Wn.compName=Kn,Wn.c=Ht(Kn),Wn.options={},Wn.container=An,Wn.$container=_t()(An),Wn.$container.addClass(["luna-".concat(Kn),Wn.c("platform-".concat((Dn=Ut()(),Dn==="os x"?"mac":Dn)))]),Wn.on("optionChange",function($r,br,Tr){var fr=Wn.c;$r==="theme"&&(Wn.$container.rmClass(fr("theme-".concat(Tr))).addClass(fr("theme-".concat(br))),ln()(Wn.subComponents,function(In){return In.setOption("theme",br)}))}),Wn.setOption("theme",Rr),Wn}return(0,pt.Z)(sr,[{key:"destroy",value:function(){var An=this;this.destroySubComponents();var Nn=this.$container,Wn=Nn.attr("class");ln()(Wn.split(/\s+/),function(Dn){vn()(Dn,"luna-".concat(An.compName))&&Nn.rmClass(Dn)}),Nn.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(An,Nn){var Wn=this,Dn=this.options,Kn={};typeof An=="string"?Kn[An]=Nn:Kn=An,ln()(Kn,function(lr,Rr){var $r=Dn[Rr];Dn[Rr]=lr,Wn.emit("optionChange",Rr,lr,$r)})}},{key:"getOption",value:function(An){return this.options[An]}},{key:"addSubComponent",value:function(An){An.setOption("theme",this.options.theme),this.subComponents.push(An)}},{key:"removeSubComponent",value:function(An){Zn()(this.subComponents,function(Nn){return Nn===An})}},{key:"destroySubComponents",value:function(){ln()(this.subComponents,function(An){return An.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(An){var Nn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};sn()(An,Nn),Xt()(this.options,An)}},{key:"find",value:function(An){return this.$container.find(this.c(An))}}]),sr}(Et()),_r=o(1907),Jn=o.n(_r),dr=o(8613),Un=o.n(dr);function mn(ur){var hn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var sr,An=(0,St.Z)(ur);if(hn){var Nn=(0,St.Z)(this).constructor;sr=Reflect.construct(An,arguments,Nn)}else sr=An.apply(this,arguments);return(0,bt.Z)(this,sr)}}i=o.hmd(i);var xn=function(ur){(0,wt.Z)(sr,ur);var hn=mn(sr);function sr(An){var Nn,Wn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,ht.Z)(this,sr),(Nn=hn.call(this,An,{compName:"modal"},Wn)).render=function(){var Dn=(0,dt.Z)(Nn),Kn=Dn.options,lr=Dn.c,Rr=Dn.$body;Kn.title?(Rr.rmClass(lr("no-title")),Nn.$title.text(Kn.title)):Rr.addClass(lr("no-title")),Kn.footer?(Rr.rmClass(lr("no-footer")),Nn.$footer.html("").append(Kn.footer)):Rr.addClass(lr("no-footer")),Kn.showClose?Nn.$close.show():Nn.$close.hide(),Nn.$body.css("width",Kn.width+"px"),Nn.$content.html("").append(Kn.content)},Nn.hide(),Nn.initOptions(Wn,{title:"",content:"",footer:"",showClose:!0,width:Gn()}),Nn.initTpl(),Nn.$title=Nn.find(".title"),Nn.$content=Nn.find(".content"),Nn.$body=Nn.find(".body"),Nn.$footer=Nn.find(".footer"),Nn.$close=Nn.find(".icon-close"),Nn.bindEvent(),Nn}return(0,pt.Z)(sr,[{key:"show",value:function(){this.render(),this.$container.rmClass(this.c("hidden"))}},{key:"hide",value:function(){this.$container.addClass(this.c("hidden"))}},{key:"destroy",value:function(){(0,gt.Z)((0,St.Z)(sr.prototype),"destroy",this).call(this),this.$container.rmClass(this.c("hidden"))}},{key:"bindEvent",value:function(){var An=this;this.$body.on("click",this.c(".icon-close"),function(){return An.hide()}),this.on("optionChange",this.render)}},{key:"initTpl",value:function(){this.$container.html(this.c(Jn()(Ln||(Ln=(0,ot.Z)([`
      <div class="body">
        <span class="icon icon-close"></span>
        <div class="title"></div>
        <div class="content"></div>
        <div class="footer"></div>
      </div>
      `])))))}}],[{key:"alert",value:function(An){var Nn=En(),Wn=Nn.c;Nn.setOption({title:"",content:An,width:Gn(),footer:cr({OK:{type:"primary",onclick:function(){Nn.hide()}}},Wn)}),Nn.show()}},{key:"confirm",value:function(An){return new Promise(function(Nn){var Wn=En(),Dn=Wn.c;Wn.setOption({title:"",content:An,width:Gn(),footer:cr({Cancel:{type:"secondary",onclick:function(){Wn.hide(),Nn(!1)}},OK:{type:"primary",onclick:function(){Wn.hide(),Nn(!0)}}},Dn)}),Wn.show()})}},{key:"prompt",value:function(){var An=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Nn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise(function(Wn){var Dn=En(),Kn=Dn.c,lr=Un()("input"+Kn(".input"),{value:Nn});function Rr(){Dn.hide(),Wn(lr.value)}_t()(lr).on("keypress",function(br){(br=br.origEvent).key==="Enter"&&Rr()}),Dn.setOption({title:An,content:lr,width:Gn(),footer:cr({Cancel:{type:"secondary",onclick:function(){Dn.hide(),Wn(null)}},OK:{type:"primary",onclick:Rr}},Kn)}),Dn.show();var $r=lr.value.length;lr.setSelectionRange($r,$r),lr.focus()})}},{key:"setContainer",value:function(An){kn=An}}]),sr}(qn),cn=null,kn=null;function En(){return kn||(kn=Un()("div"),document.body.append(kn)),cn||(cn=new xn(kn,{showClose:!1})),cn}function cr(ur,hn){var sr=xt()(ur,function(An,Nn){return Un()(hn(".button")+hn("."+An.type),{onclick:An.onclick},Nn)});return Un().apply(void 0,[hn(".button-group"),{}].concat($(sr)))}function Gn(){return window.innerWidth<500?window.innerWidth-32:500}(function(ur,hn){try{ur.exports=hn,ur.exports.default=hn}catch{}})(i,xn)},8299:function(i,s,o){o.d(s,{q:function(){return qt},Z:function(){return Yr}});var d=o(1002),j=o(5671),$=o(3144),ot=o(7326),ht=o(1752),pt=o(9340),dt=o(2963),gt=o(1120),wt=o(415),bt=o.n(wt),St=o(3990),Ct=o.n(St),Et=o(4696),Pt=o.n(Et),_t=o(3063),yt=o.n(_t),xt=o(5166),Dt=o.n(xt),Ot=o(6472),Bt=o.n(Ot),At=o(3023),It=o.n(At),Gt=o(2533),Jt=o.n(Gt),nn=o(3783),Vt=o.n(nn),Ut=o(300),Ht=o.n(Ut),jt=o(4321),Wt=o.n(jt),ln=o(3085),Qt=o.n(ln),Xt=o(1512),on=o.n(Xt),sn=o(801),bn=o.n(sn),Zn=o(7756),Rn=o.n(Zn),vn=o(6768),yn=o.n(vn),Ln=o(1116),qn=o.n(Ln),_r=o(5972),Jn=o.n(_r),dr=o(996),Un=o.n(dr),mn=o(3367),xn=o.n(mn),cn=o(1214),kn=o.n(cn),En=o(6339),cr=o.n(En),Gn=o(6329),ur=o.n(Gn),hn=function(){function Qn(){(0,j.Z)(this,Qn),this.id=0,this.visited=[]}return(0,$.Z)(Qn,[{key:"set",value:function(kr,ar){var Cn=this.visited,$n=this.id,rr={id:$n,val:kr};return ur()(rr,ar),Cn.push(rr),this.id++,$n}},{key:"get",value:function(kr){for(var ar=this.visited,Cn=0,$n=ar.length;Cn<$n;Cn++){var rr=ar[Cn];if(kr===rr.val)return rr}return!1}}]),Qn}(),sr=o(4331),An=o.n(sr),Nn=o(8901),Wn=o.n(Nn),Dn=function(Qn){return Wn()(xn()(Qn)).replace(/\n/g,"↵").replace(/\f|\r|\t/g,"")};function Kn(Qn){return Qn.length>500&&(Qn=Qn.slice(0,500)+"..."),"ƒ "+An()(function(kr){var ar=kr.match(lr);return ar?ar[0]:kr}(Qn).replace("function",""))}var lr=/function(.*?)\((.*?)\)/,Rr=o(6930),$r=o.n(Rr),br=o(5229),Tr=o.n(br),fr=o(3875),In=o.n(fr),_i=o(9433),pr=o.n(_i),tr=o(1443),ir=o.n(tr),Mn=o(2461),gn=o.n(Mn),Xn=o(5610),Vn=o.n(Xn),gr=o(7483),zr=o.n(gr),Ir=o(6341),Wr=o.n(Ir),eo=o(6954),Vr=o.n(eo);o(9585);function go(Qn){var kr="luna-".concat(Qn,"-");function ar(Cn){return gn()(An()(Cn).split(/\s+/),function($n){return Wr()($n,kr)?$n:$n.replace(/[\w-]+/,function(rr){return"".concat(kr).concat(rr)})}).join(" ")}return function(Cn){if(/<[^>]*>/g.test(Cn))try{var $n=zr().parse(Cn);return mo($n,function(rr){rr.attrs&&rr.attrs.class&&(rr.attrs.class=ar(rr.attrs.class))}),zr().stringify($n)}catch{return ar(Cn)}return ar(Cn)}}function mo(Qn,kr){for(var ar=0,Cn=Qn.length;ar<Cn;ar++){var $n=Qn[ar];kr($n),$n.content&&mo($n.content,kr)}}Vn();function $o(){var Qn=Vr()();return Qn==="os x"?"mac":Qn}var vs=o(4193),Zr=o.n(vs),jr=o(5852),Er=o.n(jr);function Fn(Qn){var kr=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ar,Cn=(0,gt.Z)(Qn);if(kr){var $n=(0,gt.Z)(this).constructor;ar=Reflect.construct(Cn,arguments,$n)}else ar=Cn.apply(this,arguments);return(0,dt.Z)(this,ar)}}var er=function(Qn){(0,pt.Z)(ar,Qn);var kr=Fn(ar);function ar(Cn,$n){var rr,xr=$n.compName,Dr=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Pr=Dr===void 0?"light":Dr;return(0,j.Z)(this,ar),(rr=kr.call(this)).subComponents=[],rr.compName=xr,rr.c=go(xr),rr.options={},rr.container=Cn,rr.$container=on()(Cn),rr.$container.addClass(["luna-".concat(xr),rr.c("platform-".concat($o()))]),rr.on("optionChange",function(Ar,Lr,Br){var Hr=rr.c;Ar==="theme"&&(rr.$container.rmClass(Hr("theme-".concat(Br))).addClass(Hr("theme-".concat(Lr))),Vt()(rr.subComponents,function(no){return no.setOption("theme",Lr)}))}),rr.setOption("theme",Pr),rr}return(0,$.Z)(ar,[{key:"destroy",value:function(){this.destroySubComponents();var Cn=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Cn("platform-".concat($o()))).rmClass(Cn("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(Cn,$n){var rr=this,xr=this.options,Dr={};typeof Cn=="string"?Dr[Cn]=$n:Dr=Cn,Vt()(Dr,function(Pr,Ar){var Lr=xr[Ar];xr[Ar]=Pr,rr.emit("optionChange",Ar,Pr,Lr)})}},{key:"getOption",value:function(Cn){return this.options[Cn]}},{key:"addSubComponent",value:function(Cn){Cn.setOption("theme",this.options.theme),this.subComponents.push(Cn)}},{key:"removeSubComponent",value:function(Cn){Er()(this.subComponents,function($n){return $n===Cn})}},{key:"destroySubComponents",value:function(){Vt()(this.subComponents,function(Cn){return Cn.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Cn){var $n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Zr()(Cn,$n),ur()(this.options,Cn)}},{key:"find",value:function(Cn){return this.$container.find(this.c(Cn))}}]),ar}(ir());function Tn(Qn){var kr=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ar,Cn=(0,gt.Z)(Qn);if(kr){var $n=(0,gt.Z)(this).constructor;ar=Reflect.construct(Cn,arguments,$n)}else ar=Cn.apply(this,arguments);return(0,dt.Z)(this,ar)}}var qt=function(Qn){(0,pt.Z)(ar,Qn);var kr=Tn(ar);function ar(Cn){var $n;return(0,j.Z)(this,ar),($n=kr.call(this,Cn,{compName:"object-viewer"})).onItemClick=function(rr){var xr=(0,ot.Z)($n),Dr=xr.map,Pr=xr.c,Ar=on()(rr.curTarget),Lr=Ar.data("object-id"),Br=Ar.find("span").eq(0);if(!Ar.data("first-level")&&(Lr&&(Ar.find("ul").html($n.objToHtml(Dr[Lr],!1)),Ar.rmAttr("data-object-id")),rr.stopImmediatePropagation(),Br.hasClass(Pr("expanded")))){var Hr=Ar.find("ul").eq(0);Br.hasClass(Pr("collapsed"))?(Br.rmClass(Pr("collapsed")),Hr.show()):(Br.addClass(Pr("collapsed")),Hr.hide()),$n.emit("change")}},$n.bindEvent(),$n}return(0,$.Z)(ar,[{key:"set",value:function(Cn){yn()(Cn)&&(Cn=JSON.parse(Cn)),this.data={id:Tr()("json"),enumerable:{0:Cn}},this.map={},Mr(this.map,this.data),this.render()}},{key:"destroy",value:function(){(0,ht.Z)((0,gt.Z)(ar.prototype),"destroy",this).call(this),this.$container.off("click","li",this.onItemClick)}},{key:"objToHtml",value:function(Cn,$n){var rr=this,xr="";return Vt()(["enumerable","unenumerable","symbol"],function(Dr){if(Cn[Dr]){var Pr=Jt()(Cn[Dr]);cr()(Pr);for(var Ar=0,Lr=Pr.length;Ar<Lr;Ar++){var Br=Pr[Ar];xr+=rr.createEl(Br,Cn[Dr][Br],Dr,$n)}}}),Cn.proto&&(xr===""?xr=this.objToHtml(Cn.proto):xr+=this.createEl("[[Prototype]]",Cn.proto,"proto")),xr}},{key:"createEl",value:function(Cn,$n,rr){var xr=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Dr=this.c,Pr=(0,d.Z)($n);if($n===null)return"<li>".concat(fo(Cn),'<span class="').concat(Dr("null"),'">null</span></li>');if(Ct()($n)||Pt()($n))return"<li>".concat(fo(Cn),'<span class="').concat(Dr(Pr),'">').concat(Dn($n),"</span></li>");if($n.type==="RegExp"&&(Pr="regexp"),$n.type==="Number"&&(Pr="number"),$n.type==="Number"||$n.type==="RegExp")return"<li>".concat(fo(Cn),'<span class="').concat(Dr(Pr),'">').concat(Dn($n.value),"</span></li>");if($n.type==="Undefined"||$n.type==="Symbol")return"<li>".concat(fo(Cn),'<span class="').concat(Dr("special"),'">').concat(yt()($n.type),"</span></li>");if($n==="(...)")return"<li>".concat(fo(Cn),'<span class="').concat(Dr("special"),'">').concat($n,"</span></li>");if(Dt()($n)){var Ar=$n.id,Lr=$n.reference,Br=function(_o){var wo=_o.type,Zo=_o.value;if(wo)return wo==="Function"?Kn(Zo):wo==="Array"&&_o.unenumerable?"Array(".concat(_o.unenumerable.length,")"):_o.type}($n)||It()(Pr),Hr=xr?"":'<span class="'.concat(Dr("expanded collapsed"),'"><span class="').concat(Dr("icon icon-caret-right"),'"></span><span class="').concat(Dr("icon icon-caret-down"),'"></span></span>'),no="<li ".concat(xr?'data-first-level="true"':""," ").concat('data-object-id="'+(Lr||Ar)+'"',">").concat(Hr).concat(fo(Cn),'<span class="').concat(Dr("open"),'">').concat(xr?"":Br,'</span><ul class="').concat(Dr(Pr),'" ').concat(xr?"":'style="display:none"',">");return xr&&(no+=this.objToHtml(this.map[Ar])),no+'</ul><span class="'.concat(Dr("close"),'"></span></li>')}function fo(_o){if(xr||Dt()($n)&&$n.jsonSplitArr)return"";var wo=Dr("key");return rr==="unenumerable"||rr==="symbol"?wo=Dr("key-lighter"):rr==="proto"&&(wo=Dr("key-special")),'<span class="'.concat(wo,'">').concat(Dn(_o),"</span>: ")}return yn()($n)&&$n.length>1e4&&($n=Rn()($n,50,{separator:" ",ellipsis:"…"})),"<li>".concat(fo(Cn),'<span class="').concat(Dr((0,d.Z)($n)),'">"').concat(Dn($n),'"</span></li>')}},{key:"render",value:function(){var Cn=this.map[this.data.id];this.$container.html(this.objToHtml(Cn,!0))}},{key:"bindEvent",value:function(){this.$container.on("click","li",this.onItemClick)}}]),ar}(er);function Mr(Qn,kr){var ar=kr.id;if(ar||ar===0){if(kr.type&&$r()(kr.type,"Array")&&kr.enumerable){var Cn=function(Pr,Ar,Lr){var Br=[],Hr={};return Vt()(Pr.enumerable,function(no,fo){var _o=In()(fo);pr()(_o)?Hr[fo]=no:Br[_o]=no}),Br.enumerable=Hr,Br.type=Lr,Br.id=Ar,Pr.unenumerable&&(Br.unenumerable=Pr.unenumerable),Pr.symbol&&(Br.symbol=Pr.symbol),Pr.proto&&(Br.proto=Pr.proto),Br}(kr,ar,kr.type);Cn.length>100&&(kr=function(Pr){var Ar=0,Lr={};Vt()(Un()(Pr,100),function(Hr){var no={},fo=Ar;no.type="["+fo,no.enumerable={},Vt()(Hr,function(wo){no.enumerable[Ar]=wo,Ar+=1});var _o=Ar-1;no.type+=(_o-fo>0?" … "+_o:"")+"]",no.id=Tr()("json"),no.jsonSplitArr=!0,Lr[Ar]=no});var Br={};return Br.enumerable=Lr,Br.id=Pr.id,Br.type=Pr.type,Pr.unenumerable&&(Br.unenumerable=Pr.unenumerable),Pr.symbol&&(Br.symbol=Pr.symbol),Pr.proto&&(Br.proto=Pr.proto),Br}(Cn))}Qn[ar]=kr;var $n=[];Vt()(["enumerable","unenumerable","symbol"],function(Pr){if(kr[Pr])for(var Ar in kr[Pr])$n.push(kr[Pr][Ar])}),kr.proto&&$n.push(kr.proto);for(var rr=0,xr=$n.length;rr<xr;rr++){var Dr=$n[rr];Dt()(Dr)&&Mr(Qn,Dr)}}}function qr(Qn){var kr=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ar,Cn=(0,gt.Z)(Qn);if(kr){var $n=(0,gt.Z)(this).constructor;ar=Reflect.construct(Cn,arguments,$n)}else ar=Cn.apply(this,arguments);return(0,dt.Z)(this,ar)}}i=o.hmd(i);var Yr=function(Qn){(0,pt.Z)(ar,Qn);var kr=qr(ar);function ar(Cn){var $n,rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,j.Z)(this,ar),($n=kr.call(this,Cn,{compName:"object-viewer"})).onItemClick=function(xr){var Dr=(0,ot.Z)($n),Pr=Dr.map,Ar=Dr.c,Lr=on()(xr.curTarget),Br=Lr.data("object-id"),Hr=Lr.find("span").eq(0);if(!Lr.data("first-level")&&(Br&&(Lr.find("ul").html($n.objToHtml(Pr[Br],!1)),Lr.rmAttr("data-object-id")),xr.stopImmediatePropagation(),Hr.hasClass(Ar("expanded")))){var no=Lr.find("ul").eq(0);Hr.hasClass(Ar("collapsed"))?(Hr.rmClass(Ar("collapsed")),no.show()):(Hr.addClass(Ar("collapsed")),no.hide()),$n.emit("change")}},$n.initOptions(rr,{unenumerable:!1,accessGetter:!1}),$n.bindEvent(),$n}return(0,$.Z)(ar,[{key:"set",value:function(Cn){this.data=[Cn],this.visitor=new hn,this.map={},this.render()}},{key:"destroy",value:function(){(0,ht.Z)((0,gt.Z)(ar.prototype),"destroy",this).call(this),this.$container.off("click","li",this.onItemClick)}},{key:"objToHtml",value:function(Cn,$n){var rr=this,xr=this.visitor,Dr=Cn,Pr=!1,Ar=xr.get(Cn);Ar&&Ar.self&&(Dr=Ar.self);var Lr="",Br=["enumerable"],Hr=Jt()(Cn),no=[],fo=[],_o=[],wo={};if(this.options.unenumerable&&!$n&&(Br.push("unenumerable"),Br.push("symbol"),no=bn()(qn()(Cn,{prototype:!1,unenumerable:!0}),Hr),fo=Jn()(qn()(Cn,{prototype:!1,symbol:!0}),function(Co){return(0,d.Z)(Co)==="symbol"})),Bt()(Cn)&&Cn.length>100){Br.unshift("virtual"),Pr=!0;var Zo=0,Eo={};Vt()(Un()(Cn,100),function(Co){var ns=Object.create(null),Io=Zo,Ts="["+Io;Vt()(Co,function(Oo){ns[Zo]=Oo,Eo[Zo]=!0,Zo++});var ko=Zo-1;wo[Ts+=(ko-Io>0?" … "+ko:"")+"]"]=ns}),_o=Jt()(wo),Hr=Jn()(Hr,function(Co){return!Eo[Co]})}Vt()(Br,function(Co){var ns=[];ns=Co==="symbol"?fo:Co==="unenumerable"?no:Co==="virtual"?_o:Hr,Pr||cr()(ns);for(var Io=0,Ts=ns.length;Io<Ts;Io++){var ko=xn()(ns[Io]),Oo="",us=Object.getOwnPropertyDescriptor(Cn,ko),zs=us&&us.get,Zs=us&&us.set;if(zs&&!rr.options.accessGetter)Oo="(...)";else try{Oo=Co==="virtual"?wo[ko]:Dr[ko],Wt()(Oo)&&Oo.catch(kn())}catch(is){Oo=is instanceof Error?is.message:xn()(is)}Lr+=rr.createEl(ko,Cn,Oo,Co,$n),zs&&(Lr+=rr.createEl("get ".concat(ko),Cn,us.get,Co,$n)),Zs&&(Lr+=rr.createEl("set ".concat(ko),Cn,us.set,Co,$n))}});var Or=bt()(Cn);if(!$n&&Or)if(Lr===""){var Bo=xr.set(Or,{self:Cn});this.map[Bo]=Or,Lr=this.objToHtml(Or)}else Lr+=this.createEl("[[Prototype]]",Dr||Cn,Or,"proto");return Lr}},{key:"createEl",value:function(Cn,$n,rr,xr){var Dr=arguments.length>4&&arguments[4]!==void 0&&arguments[4],Pr=this.visitor,Ar=this.c,Lr=(0,d.Z)(rr),Br=Qt()(rr,!1);if(xr==="virtual"&&(Br=Cn),rr===null)return"<li>".concat(Eo(Cn),'<span class="').concat(Ar("null"),'">null</span></li>');if(Ct()(rr)||Pt()(rr))return"<li>".concat(Eo(Cn),'<span class="').concat(Ar(Lr),'">').concat(Dn(rr),"</span></li>");if(Br==="RegExp"&&(Lr="regexp"),Br==="Number"&&(Lr="number"),Br==="Undefined"||Br==="Symbol")return"<li>".concat(Eo(Cn),'<span class="').concat(Ar("special"),'">').concat(yt()(Br),"</span></li>");if(rr==="(...)")return"<li>".concat(Eo(Cn),'<span class="').concat(Ar("special"),'">').concat(rr,"</span></li>");if(Dt()(rr)){var Hr,no=Pr.get(rr);if(no)Hr=no.id;else{var fo={};xr==="proto"&&(fo.self=$n),Hr=Pr.set(rr,fo),this.map[Hr]=rr}var _o="Object";_o=Lr==="regexp"?'<span class="'.concat(Ar(Lr),'">').concat(Dn(rr)):Dn(function(Or,Bo){if(Bo)return Bo==="Function"?Kn(Ht()(Or)):Bo==="Array"?"Array(".concat(Or.length,")"):Bo}(rr,Br)||It()(Lr));var wo=Dr?"":'<span class="'.concat(Ar("expanded collapsed"),'"><span class="').concat(Ar("icon icon-caret-right"),'"></span><span class="').concat(Ar("icon icon-caret-down"),'"></span></span>'),Zo="<li ".concat(Dr?'data-first-level="true"':""," ").concat('data-object-id="'+Hr+'"',">").concat(wo).concat(Eo(Cn),'<span class="').concat(Ar("open"),'">').concat(Dr?"":_o,'</span><ul class="').concat(Ar(Lr),'" ').concat(Dr?"":'style="display:none"',">");return Dr&&(Zo+=this.objToHtml(rr)),Zo+'</ul><span class="'.concat(Ar("close"),'"></span></li>')}function Eo(Or){if(Dr||Dt()(rr)&&xr==="virtual")return"";var Bo=Ar("key");return xr==="unenumerable"||xr==="symbol"?Bo=Ar("key-lighter"):xr==="proto"&&(Bo=Ar("key-special")),'<span class="'.concat(Bo,'">').concat(Dn(Or),"</span>: ")}return yn()(rr)&&rr.length>1e4&&(rr=Rn()(rr,50,{separator:" ",ellipsis:"…"})),"<li>".concat(Eo(Cn),'<span class="').concat(Ar((0,d.Z)(rr)),'">"').concat(Dn(rr),'"</span></li>')}},{key:"render",value:function(){this.$container.html(this.objToHtml(this.data,!0))}},{key:"bindEvent",value:function(){this.$container.on("click","li",this.onItemClick)}}]),ar}(er);Yr.Static=qt,function(Qn,kr){try{Qn.exports=kr,Qn.exports.default=kr}catch{}}(i,Yr)},8692:function(i,s,o){o.d(s,{Z:function(){return Kn}});var d=o(7326),j=o(5671),$=o(3144),ot=o(9340),ht=o(2963),pt=o(1120),dt=o(1512),gt=o.n(dt),wt=o(8613),bt=o.n(wt),St=o(8901),Ct=o.n(St),Et=o(5229),Pt=o.n(Et),_t=o(5166),yt=o.n(_t),xt=o(4193),Dt=o.n(xt),Ot=o(2461),Bt=o.n(Ot),At=o(3875),It=o.n(At),Gt=o(3367),Jt=o.n(Gt),nn=o(4777),Vt=o.n(nn),Ut=o(9702),Ht=o.n(Ut),jt=o(1754),Wt=o.n(jt),ln=o(6768),Qt=o.n(ln),Xt=o(4331),on=o.n(Xt),sn=o(6341),bn=o.n(sn),Zn=o(3063),Rn=o.n(Zn),vn=o(6156),yn=o.n(vn),Ln=o(3783),qn=o.n(Ln),_r=o(1443),Jn=o.n(_r),dr=o(5610),Un=o.n(dr),mn=o(7483),xn=o.n(mn),cn=(o(3990),o(6954)),kn=o.n(cn);o(9585);function En(tr){var ir="luna-".concat(tr,"-");function Mn(gn){return Bt()(on()(gn).split(/\s+/),function(Xn){return bn()(Xn,ir)?Xn:Xn.replace(/[\w-]+/,function(Vn){return"".concat(ir).concat(Vn)})}).join(" ")}return function(gn){if(/<[^>]*>/g.test(gn))try{var Xn=xn().parse(gn);return cr(Xn,function(Vn){Vn.attrs&&Vn.attrs.class&&(Vn.attrs.class=Mn(Vn.attrs.class))}),xn().stringify(Xn)}catch{return Mn(gn)}return Mn(gn)}}function cr(tr,ir){for(var Mn=0,gn=tr.length;Mn<gn;Mn++){var Xn=tr[Mn];ir(Xn),Xn.content&&cr(Xn.content,ir)}}Un();function Gn(){var tr=kn()();return tr==="os x"?"mac":tr}var ur=o(6329),hn=o.n(ur),sr=o(5852),An=o.n(sr);function Nn(tr){var ir=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Mn,gn=(0,pt.Z)(tr);if(ir){var Xn=(0,pt.Z)(this).constructor;Mn=Reflect.construct(gn,arguments,Xn)}else Mn=gn.apply(this,arguments);return(0,ht.Z)(this,Mn)}}var Wn=function(tr){(0,ot.Z)(Mn,tr);var ir=Nn(Mn);function Mn(gn,Xn){var Vn,gr=Xn.compName,zr=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Ir=zr===void 0?"light":zr;return(0,j.Z)(this,Mn),(Vn=ir.call(this)).subComponents=[],Vn.compName=gr,Vn.c=En(gr),Vn.options={},Vn.container=gn,Vn.$container=gt()(gn),Vn.$container.addClass(["luna-".concat(gr),Vn.c("platform-".concat(Gn()))]),Vn.on("optionChange",function(Wr,eo,Vr){var go=Vn.c;Wr==="theme"&&(Vn.$container.rmClass(go("theme-".concat(Vr))).addClass(go("theme-".concat(eo))),qn()(Vn.subComponents,function(mo){return mo.setOption("theme",eo)}))}),Vn.setOption("theme",Ir),Vn}return(0,$.Z)(Mn,[{key:"destroy",value:function(){this.destroySubComponents();var gn=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(gn("platform-".concat(Gn()))).rmClass(gn("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(gn,Xn){var Vn=this,gr=this.options,zr={};typeof gn=="string"?zr[gn]=Xn:zr=gn,qn()(zr,function(Ir,Wr){var eo=gr[Wr];gr[Wr]=Ir,Vn.emit("optionChange",Wr,Ir,eo)})}},{key:"getOption",value:function(gn){return this.options[gn]}},{key:"addSubComponent",value:function(gn){gn.setOption("theme",this.options.theme),this.subComponents.push(gn)}},{key:"removeSubComponent",value:function(gn){An()(this.subComponents,function(Xn){return Xn===gn})}},{key:"destroySubComponents",value:function(){qn()(this.subComponents,function(gn){return gn.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(gn){var Xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Dt()(gn,Xn),hn()(this.options,gn)}},{key:"find",value:function(gn){return this.$container.find(this.c(gn))}}]),Mn}(Jn());function Dn(tr){var ir=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Mn,gn=(0,pt.Z)(tr);if(ir){var Xn=(0,pt.Z)(this).constructor;Mn=Reflect.construct(gn,arguments,Xn)}else Mn=gn.apply(this,arguments);return(0,ht.Z)(this,Mn)}}i=o.hmd(i);var Kn=function(tr){(0,ot.Z)(Mn,tr);var ir=Dn(Mn);function Mn(gn){var Xn,Vn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,j.Z)(this,Mn),(Xn=ir.call(this,gn,{compName:"setting"},Vn)).items=[],Xn.selectedItem=null,Xn.initOptions(Vn,{separatorCollapse:!0,filter:""}),Xn.bindEvent(),Xn}return(0,$.Z)(Mn,[{key:"appendTitle",value:function(gn){var Xn=new Rr(this,gn);return this.append(Xn),Xn}},{key:"appendSeparator",value:function(){var gn=this.items,Xn=this.options.separatorCollapse,Vn=Ht()(gn);if(Xn&&Vn instanceof $r)return Vn;var gr=new $r(this);return this.append(gr),gr}},{key:"appendNumber",value:function(gn,Xn,Vn,gr,zr){yt()(gr)&&(zr=gr,gr="");var Ir=new Tr(this,gn,Xn,Vn,gr,zr);return this.append(Ir),Ir}},{key:"appendButton",value:function(gn,Xn,Vn){Vt()(Xn)&&(Vn=Xn,Xn="");var gr=new pr(this,gn,Xn,Vn);return this.append(gr),gr}},{key:"appendInput",value:function(gn,Xn,Vn){var gr=new br(this,gn,Xn,Vn,arguments.length>3&&arguments[3]!==void 0?arguments[3]:"");return this.append(gr),gr}},{key:"appendCheckbox",value:function(gn,Xn,Vn,gr){gr||(gr=Vn,Vn="");var zr=new In(this,gn,Xn,Vn,gr);return this.append(zr),zr}},{key:"appendSelect",value:function(gn,Xn,Vn,gr,zr){yt()(gr)&&(zr=gr,gr="");var Ir=new _i(this,gn,Xn,Vn,gr,zr);return this.append(Ir),Ir}},{key:"remove",value:function(gn){var Xn=this.items,Vn=Xn.indexOf(gn);Vn>-1&&(gn.detach(),Xn.splice(Vn,1),gn===this.selectedItem&&this.selectItem(null))}},{key:"clear",value:function(){qn()(this.items,function(gn){return gn.detach()}),this.items=[],this.selectItem(null)}},{key:"selectItem",value:function(gn){var Xn;this.selectedItem&&(this.selectedItem.deselect(),this.selectedItem=null),yn()(gn)||(this.selectedItem=gn,(Xn=this.selectedItem)===null||Xn===void 0||Xn.select())}},{key:"renderSettings",value:function(){var gn=this,Xn=this.items;qn()(Xn,function(Vn){return Vn.detach()}),qn()(Xn,function(Vn){gn.filterItem(Vn)&&gn.$container.append(Vn.container)})}},{key:"bindEvent",value:function(){var gn=this,Xn=this.c;this.on("optionChange",function(gr){gr==="filter"&&gn.renderSettings()});var Vn=this;this.$container.on("click",Xn(".item"),function(){Vn.selectItem(this.settingItem)})}},{key:"filterItem",value:function(gn){var Xn=this.options.filter;if(Xn){if(Vt()(Xn))return Xn(gn);if(Wt()(Xn))return Xn.test(gn.text());if(Qt()(Xn)&&(Xn=on()(Xn)))return bn()(Rn()(gn.text()),Rn()(Xn))}return!0}},{key:"append",value:function(gn){this.items.push(gn),this.filterItem(gn)&&this.$container.append(gn.container)}}]),Mn}(Wn),lr=function(){function tr(ir,Mn,gn,Xn){(0,j.Z)(this,tr),this.container=bt()("div",{tabindex:"0"}),this.setting=ir,this.container.settingItem=this,this.$container=gt()(this.container),this.$container.addClass(ir.c("item")).addClass(ir.c("item-".concat(Xn))),this.key=Mn,this.value=gn}return(0,$.Z)(tr,[{key:"select",value:function(){this.$container.addClass(this.setting.c("selected"))}},{key:"deselect",value:function(){this.$container.rmClass(this.setting.c("selected"))}},{key:"detach",value:function(){this.$container.remove()}},{key:"text",value:function(){return this.$container.text()}},{key:"onChange",value:function(ir){this.setting.emit("change",this.key,ir,this.value),this.value=ir}}]),tr}(),Rr=function(tr){(0,ot.Z)(Mn,tr);var ir=Dn(Mn);function Mn(gn,Xn){var Vn;return(0,j.Z)(this,Mn),(Vn=ir.call(this,gn,"","","title")).$container.text(Xn),Vn}return(0,$.Z)(Mn)}(lr),$r=function(tr){(0,ot.Z)(Mn,tr);var ir=Dn(Mn);function Mn(gn){return(0,j.Z)(this,Mn),ir.call(this,gn,"","","separator")}return(0,$.Z)(Mn)}(lr),br=function(tr){(0,ot.Z)(Mn,tr);var ir=Dn(Mn);function Mn(gn,Xn,Vn,gr,zr){var Ir;(0,j.Z)(this,Mn),Ir=ir.call(this,gn,Xn,Vn,"input");var Wr=gn.c;Ir.$container.html('<div class="'.concat(Wr("title"),'">').concat(Ct()(gr),`</div>
      <div class="`).concat(Wr("description"),'">').concat(zr,`</div>
      <div class="`).concat(Wr("control"),`">
        <input type="text"></input>
      </div>`));var eo=Ir.$container.find("input");return eo.val(Vn),eo.on("change",function(){return Ir.onChange(eo.val())}),Ir}return(0,$.Z)(Mn)}(lr),Tr=function(tr){(0,ot.Z)(Mn,tr);var ir=Dn(Mn);function Mn(gn,Xn,Vn,gr,zr){var Ir,Wr=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};(0,j.Z)(this,Mn),Ir=ir.call(this,gn,Xn,Vn,"number"),Dt()(Wr,{min:0,max:10,step:1});var eo=(0,d.Z)(Ir).$container,Vr=gn.c,go=!!Wr.range;delete Wr.range;var mo=Wr.min,$o=Wr.max,vs='<input type="'.concat(go?"range":"number",'"').concat(Bt()(Wr,function(Fn,er){return" ".concat(er,'="').concat(Fn,'"')}),"></input>");go&&(vs="".concat(mo,'<div class="').concat(Vr("range-container"),`">
        <div class="`).concat(Vr("range-track"),`">
          <div class="`).concat(Vr("range-track-bar"),`">
            <div class="`).concat(Vr("range-track-progress"),'" style="width: ').concat(fr(Vn,mo,$o),`%;"></div>
          </div>
        </div>
        `).concat(vs,`
      </div><span class="`).concat(Vr("value"),'">').concat(Vn,"</span>/").concat($o)),eo.html('<div class="'.concat(Vr("title"),'">').concat(Ct()(gr),`</div>
      <div class="`).concat(Vr("description"),'">').concat(zr,`</div>
      <div class="`).concat(Vr("control"),'">').concat(vs,"</div>"));var Zr=eo.find(Vr(".value")),jr=eo.find("input"),Er=eo.find(Vr(".range-track-progress"));return jr.val(Jt()(Vn)),jr.on("change",function(){var Fn=It()(jr.val());Ir.onChange(Fn)}),jr.on("input",function(){var Fn=It()(jr.val());Er.css("width",fr(Fn,mo,$o)+"%"),Zr.text(Jt()(Fn))}),Ir}return(0,$.Z)(Mn)}(lr),fr=function(tr,ir,Mn){return((tr-ir)/(Mn-ir)*100).toFixed(2)},In=function(tr){(0,ot.Z)(Mn,tr);var ir=Dn(Mn);function Mn(gn,Xn,Vn,gr,zr){var Ir;(0,j.Z)(this,Mn),Ir=ir.call(this,gn,Xn,Vn,"checkbox");var Wr=gn.c,eo=Pt()(gn.c("checkbox-"));Ir.$container.html('<div class="'.concat(Wr("title"),'">').concat(Ct()(gr),`</div>
      <div class="`).concat(Wr("control"),`">
        <input type="checkbox" id="`).concat(eo,`"></input>
        <label for="`).concat(eo,'">').concat(zr,`</label>
      </div>`));var Vr=Ir.$container.find("input"),go=Vr.get(0);return go.checked=Vn,Vr.on("change",function(){return Ir.onChange(go.checked)}),Ir}return(0,$.Z)(Mn)}(lr),_i=function(tr){(0,ot.Z)(Mn,tr);var ir=Dn(Mn);function Mn(gn,Xn,Vn,gr,zr,Ir){var Wr;(0,j.Z)(this,Mn),Wr=ir.call(this,gn,Xn,Vn,"select");var eo=gn.c;Wr.$container.html('<div class="'.concat(eo("title"),'">').concat(Ct()(gr),`</div>
      <div class="`).concat(eo("description"),'">').concat(zr,`</div>
      <div class="`).concat(eo("control"),`">
        <div class="`).concat(eo("select"),`">
          <select>
            `).concat(Bt()(Ir,function(go,mo){return'<option value="'.concat(Ct()(go),'"').concat(go===Vn?" selected":"",">").concat(Ct()(mo),"</option>")}).join(""),`
          </select>
        </div>
      </div>`));var Vr=Wr.$container.find("select");return Vr.on("change",function(){return Wr.onChange(Vr.val())}),Wr}return(0,$.Z)(Mn)}(lr),pr=function(tr){(0,ot.Z)(Mn,tr);var ir=Dn(Mn);function Mn(gn,Xn,Vn,gr){var zr;return(0,j.Z)(this,Mn),Vn||(Vn=Xn,Xn=""),(zr=ir.call(this,gn,"","","button")).$container.html(gn.c('<div class="title">'.concat(Ct()(Xn),`</div>
      <div class="control">
        <button>`).concat(Ct()(Vn),`</button>
      </div>`))),zr.$container.find("button").on("click",gr),zr}return(0,$.Z)(Mn)}(lr);(function(tr,ir){try{tr.exports=ir,tr.exports.default=ir}catch{}})(i,Kn)},7638:function(i,s,o){o.d(s,{Z:function(){return dr}});var d=o(168),j=o(5671),$=o(3144),ot=o(9340),ht=o(2963),pt=o(1120),dt=o(1443),gt=o.n(dt),wt=o(1512),bt=o.n(wt),St=o(2461),Ct=o.n(St),Et=o(4331),Pt=o.n(Et),_t=o(5610),yt=o.n(_t),xt=o(7483),Dt=o.n(xt),Ot=o(3990),Bt=o.n(Ot),At=o(6341),It=o.n(At),Gt=(o(3875),o(6954)),Jt=o.n(Gt);o(9585);function nn(Un){var mn="luna-".concat(Un,"-");function xn(cn){return Ct()(Pt()(cn).split(/\s+/),function(kn){return It()(kn,mn)?kn:kn.replace(/[\w-]+/,function(En){return"".concat(mn).concat(En)})}).join(" ")}return function(cn){if(/<[^>]*>/g.test(cn))try{var kn=Dt().parse(cn);return Vt(kn,function(En){En.attrs&&En.attrs.class&&(En.attrs.class=xn(En.attrs.class))}),Dt().stringify(kn)}catch{return xn(cn)}return xn(cn)}}function Vt(Un,mn){for(var xn=0,cn=Un.length;xn<cn;xn++){var kn=Un[xn];mn(kn),kn.content&&Vt(kn.content,mn)}}var Ut;yt();function Ht(){var Un=Jt()();return Un==="os x"?"mac":Un}var jt=o(3783),Wt=o.n(jt),ln=o(6329),Qt=o.n(ln),Xt=o(4193),on=o.n(Xt),sn=o(5852),bn=o.n(sn);function Zn(Un){var mn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var xn,cn=(0,pt.Z)(Un);if(mn){var kn=(0,pt.Z)(this).constructor;xn=Reflect.construct(cn,arguments,kn)}else xn=cn.apply(this,arguments);return(0,ht.Z)(this,xn)}}var Rn,vn=function(Un){(0,ot.Z)(xn,Un);var mn=Zn(xn);function xn(cn,kn){var En,cr=kn.compName,Gn=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,ur=Gn===void 0?"light":Gn;return(0,j.Z)(this,xn),(En=mn.call(this)).subComponents=[],En.compName=cr,En.c=nn(cr),En.options={},En.container=cn,En.$container=bt()(cn),En.$container.addClass(["luna-".concat(cr),En.c("platform-".concat(Ht()))]),En.on("optionChange",function(hn,sr,An){var Nn=En.c;hn==="theme"&&(En.$container.rmClass(Nn("theme-".concat(An))).addClass(Nn("theme-".concat(sr))),Wt()(En.subComponents,function(Wn){return Wn.setOption("theme",sr)}))}),En.setOption("theme",ur),En}return(0,$.Z)(xn,[{key:"destroy",value:function(){this.destroySubComponents();var cn=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(cn("platform-".concat(Ht()))).rmClass(cn("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(cn,kn){var En=this,cr=this.options,Gn={};typeof cn=="string"?Gn[cn]=kn:Gn=cn,Wt()(Gn,function(ur,hn){var sr=cr[hn];cr[hn]=ur,En.emit("optionChange",hn,ur,sr)})}},{key:"getOption",value:function(cn){return this.options[cn]}},{key:"addSubComponent",value:function(cn){cn.setOption("theme",this.options.theme),this.subComponents.push(cn)}},{key:"removeSubComponent",value:function(cn){bn()(this.subComponents,function(kn){return kn===cn})}},{key:"destroySubComponents",value:function(){Wt()(this.subComponents,function(cn){return cn.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(cn){var kn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};on()(cn,kn),Qt()(this.options,cn)}},{key:"find",value:function(cn){return this.$container.find(this.c(cn))}}]),xn}(gt()),yn=o(1907),Ln=o.n(yn),qn=o(8901),_r=o.n(qn);function Jn(Un){var mn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var xn,cn=(0,pt.Z)(Un);if(mn){var kn=(0,pt.Z)(this).constructor;xn=Reflect.construct(cn,arguments,kn)}else xn=cn.apply(this,arguments);return(0,ht.Z)(this,xn)}}i=o.hmd(i);var dr=function(Un){(0,ot.Z)(xn,Un);var mn=Jn(xn);function xn(cn){var kn,En=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,j.Z)(this,xn),(kn=mn.call(this,cn,{compName:"tab"},En)).initOptions(En,{height:30}),kn.initTpl(),kn.$tabs=kn.find(".tabs"),kn.tabs=kn.$tabs.get(0),kn.$slider=kn.find(".slider"),kn.bindEvent(),kn.updateHeight(),kn}return(0,$.Z)(xn,[{key:"length",get:function(){return this.$tabs.find(this.c(".item")).length}},{key:"insert",value:function(cn,kn){var En=this.c,cr=this.$tabs,Gn=this.options.height-1,ur=cr.find(En(".item")),hn=ur.length,sr='<div class="'.concat(this.c("item"),'" data-id="').concat(_r()(kn.id),'" style="height: ').concat(Gn,"px; line-height: ").concat(Gn,'px;">').concat(_r()(kn.title),"</div>");cn>hn-1?cr.append(sr):ur.eq(cn).before(sr),this.updateSlider()}},{key:"append",value:function(cn){this.insert(this.length,cn)}},{key:"remove",value:function(cn){var kn=this.c,En=this;this.$tabs.find(kn(".item")).each(function(){var cr=bt()(this);if(cr.data("id")===cn){if(cr.hasClass(kn("selected")))if(En.length>0){var Gn=En.$tabs.find(kn(".item")).eq(0).data("id");En.select(Gn)}else En.emit("deselect");cr.remove()}}),this.updateSlider()}},{key:"select",value:function(cn){var kn=this.c,En=this;this.$tabs.find(kn(".item")).each(function(){var cr=bt()(this);cr.data("id")===cn?(cr.addClass(kn("selected")),En.updateSlider(),En.scrollToSelected(),En.emit("select",cn)):cr.rmClass(kn("selected"))})}},{key:"scrollToSelected",value:function(){var cn,kn=this.$tabs,En=this.tabs,cr=this.c,Gn=kn.find(cr(".selected")).get(0),ur=Gn.offsetLeft,hn=Gn.offsetWidth,sr=En.offsetWidth,An=En.scrollLeft;ur<An?cn=ur:ur+hn>sr+An&&(cn=ur+hn-sr),Bt()(cn)&&(En.scrollLeft=cn)}},{key:"hideScrollbar",value:function(){var cn=this.$tabs;if(getComputedStyle(this.tabs,"::-webkit-scrollbar").display!=="none"){var kn=function(){if(Bt()(Ut))return Ut;if(!document)return 16;var En=document.createElement("div"),cr=document.createElement("div");En.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),cr.setAttribute("style","height: 200px"),En.appendChild(cr);var Gn=document.body||document.documentElement;return Gn.appendChild(En),Ut=En.offsetWidth-En.clientWidth,Gn.removeChild(En),Ut}();cn.css("height",this.options.height-1+kn+"px")}}},{key:"updateSlider",value:function(){var cn=this.$slider,kn=this.$tabs,En=this.c,cr=kn.find(En(".selected")).get(0);cr?cn.css({width:cr.offsetWidth,left:cr.offsetLeft-kn.get(0).scrollLeft}):cn.css({width:0})}},{key:"updateHeight",value:function(){var cn=this.options.height,kn=cn-1;this.find(".tabs-container").css("height",cn+"px"),this.find(".item").css({height:kn,lineHeight:kn}),this.hideScrollbar()}},{key:"bindEvent",value:function(){var cn=this,kn=this.tabs,En=this.c;this.on("optionChange",function(Gn){Gn==="height"&&cn.updateHeight()});var cr=this;this.$tabs.on("wheel",function(Gn){Gn.preventDefault(),kn.scrollLeft+=Gn.origEvent.deltaY}).on("click",En(".item"),function(){var Gn=bt()(this);cr.select(Gn.data("id"))}).on("scroll",function(){cn.updateSlider()})}},{key:"initTpl",value:function(){this.$container.html(this.c(Ln()(Rn||(Rn=(0,d.Z)([`
        <div class="tabs-container">
          <div class="tabs"></div>
        </div>
        <div class="slider"></div>
      `])))))}}]),xn}(vn);(function(Un,mn){try{Un.exports=mn,Un.exports.default=mn}catch{}})(i,dr)},7049:function(i,s,o){o.d(s,{Z:function(){return hn}});var d=o(5671),j=o(3144),$=o(7326),ot=o(1752),ht=o(9340),pt=o(2963),dt=o(1120),gt=o(1443),wt=o.n(gt),bt=o(1512),St=o.n(bt),Ct=o(2461),Et=o.n(Ct),Pt=o(4331),_t=o.n(Pt),yt=o(5610),xt=o.n(yt),Dt=o(7483),Ot=o.n(Dt),Bt=(o(3990),o(6341)),At=o.n(Bt),It=(o(3875),o(6954)),Gt=o.n(It);o(9585);function Jt(An){var Nn="luna-".concat(An,"-");function Wn(Dn){return Et()(_t()(Dn).split(/\s+/),function(Kn){return At()(Kn,Nn)?Kn:Kn.replace(/[\w-]+/,function(lr){return"".concat(Nn).concat(lr)})}).join(" ")}return function(Dn){if(/<[^>]*>/g.test(Dn))try{var Kn=Ot().parse(Dn);return nn(Kn,function(lr){lr.attrs&&lr.attrs.class&&(lr.attrs.class=Wn(lr.attrs.class))}),Ot().stringify(Kn)}catch{return Wn(Dn)}return Wn(Dn)}}function nn(An,Nn){for(var Wn=0,Dn=An.length;Wn<Dn;Wn++){var Kn=An[Wn];Nn(Kn),Kn.content&&nn(Kn.content,Nn)}}var Vt="ontouchstart"in xt();function Ut(){var An=Gt()();return An==="os x"?"mac":An}var Ht=o(3783),jt=o.n(Ht),Wt=o(6329),ln=o.n(Wt),Qt=o(4193),Xt=o.n(Qt),on=o(5852),sn=o.n(on);function bn(An){var Nn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Wn,Dn=(0,dt.Z)(An);if(Nn){var Kn=(0,dt.Z)(this).constructor;Wn=Reflect.construct(Dn,arguments,Kn)}else Wn=Dn.apply(this,arguments);return(0,pt.Z)(this,Wn)}}var Zn=function(An){(0,ht.Z)(Wn,An);var Nn=bn(Wn);function Wn(Dn,Kn){var lr,Rr=Kn.compName,$r=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,br=$r===void 0?"light":$r;return(0,d.Z)(this,Wn),(lr=Nn.call(this)).subComponents=[],lr.compName=Rr,lr.c=Jt(Rr),lr.options={},lr.container=Dn,lr.$container=St()(Dn),lr.$container.addClass(["luna-".concat(Rr),lr.c("platform-".concat(Ut()))]),lr.on("optionChange",function(Tr,fr,In){var _i=lr.c;Tr==="theme"&&(lr.$container.rmClass(_i("theme-".concat(In))).addClass(_i("theme-".concat(fr))),jt()(lr.subComponents,function(pr){return pr.setOption("theme",fr)}))}),lr.setOption("theme",br),lr}return(0,j.Z)(Wn,[{key:"destroy",value:function(){this.destroySubComponents();var Dn=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Dn("platform-".concat(Ut()))).rmClass(Dn("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(Dn,Kn){var lr=this,Rr=this.options,$r={};typeof Dn=="string"?$r[Dn]=Kn:$r=Dn,jt()($r,function(br,Tr){var fr=Rr[Tr];Rr[Tr]=br,lr.emit("optionChange",Tr,br,fr)})}},{key:"getOption",value:function(Dn){return this.options[Dn]}},{key:"addSubComponent",value:function(Dn){Dn.setOption("theme",this.options.theme),this.subComponents.push(Dn)}},{key:"removeSubComponent",value:function(Dn){sn()(this.subComponents,function(Kn){return Kn===Dn})}},{key:"destroySubComponents",value:function(){jt()(this.subComponents,function(Dn){return Dn.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Dn){var Kn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Xt()(Dn,Kn),ln()(this.options,Dn)}},{key:"find",value:function(Dn){return this.$container.find(this.c(Dn))}}]),Wn}(wt()),Rn=o(9702),vn=o.n(Rn),yn=o(8887),Ln=o.n(yn),qn=o(2439),_r=o.n(qn),Jn=o(6049),dr=o.n(Jn),Un=o(2327),mn=o.n(Un),xn=o(8901),cn=o.n(xn),kn=o(7387),En=o.n(kn),cr=o(6677),Gn=o.n(cr);function ur(An){var Nn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Wn,Dn=(0,dt.Z)(An);if(Nn){var Kn=(0,dt.Z)(this).constructor;Wn=Reflect.construct(Dn,arguments,Kn)}else Wn=Dn.apply(this,arguments);return(0,pt.Z)(this,Wn)}}i=o.hmd(i);var hn=function(An){(0,ht.Z)(Wn,An);var Nn=ur(Wn);function Wn(Dn){var Kn,lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,d.Z)(this,Wn),(Kn=Nn.call(this,Dn,{compName:"text-viewer"},lr)).lineNum=0,Kn.copy=function(){var Rr=(0,$.Z)(Kn).c,$r=Kn.options,br=$r.text,Tr=$r.escape;mn()(Tr?br:En()(Gn()(br)));var fr=Kn.$copy.find(Rr(".icon"));fr.addClass(Rr("icon-check")).rmClass(Rr("icon-copy")),setTimeout(function(){fr.rmClass(Rr("icon-check")).addClass(Rr("icon-copy"))},1e3)},Kn._updateCopyPos=function(){var Rr=(0,$.Z)(Kn).container;Kn.$copy.css({top:Rr.scrollTop+5,right:5-Rr.scrollLeft})},Kn.initOptions(lr,{text:"",escape:!0,showLineNumbers:!0,wrapLongLines:!0,maxHeight:1/0}),Kn.render=_r()(function(){return Kn._render()},16),Kn.updateCopyPos=dr()(function(){return Kn._updateCopyPos()},300),Kn.initTpl(),Kn.$text=Kn.find(".text"),Kn.$copy=Kn.find(".copy"),Vt&&Kn.$copy.css("opacity","1"),Kn.options.text&&Kn.render(),Kn.bindEvent(),Kn.updateHeight(),Kn}return(0,j.Z)(Wn,[{key:"append",value:function(Dn){var Kn=this,lr=this.options,Rr=this.$copy,$r=this.c,br=this.$text,Tr=lr.showLineNumbers;if(this.options.text+=Dn,!Tr)return this.$text.append(lr.escape?cn()(Dn):Dn);var fr=function(_i){return _i.length===0?[]:_i.split(sr)}(Dn);Ln()(fr)&&(fr=["&nbsp;"]),_t()(vn()(fr))||fr.pop();var In="";jt()(fr,function(_i,pr){Kn.lineNum+=1,In+='<div class="'.concat($r("table-row"),'"><div class="').concat($r("line-number"),'">').concat(Kn.lineNum,'</div><div class="').concat($r("line-text"),'">').concat(lr.escape?cn()(_i):_i||" ","</div></div>")}),br.find($r(".table")).append(In),Rr.hide(),br.offset().height>40&&Rr.show(),this.updateCopyPos()}},{key:"destroy",value:function(){this.$container.off("scroll",this.updateCopyPos),(0,ot.Z)((0,dt.Z)(Wn.prototype),"destroy",this).call(this)}},{key:"updateHeight",value:function(){var Dn=this.options.maxHeight;Dn>0&&Dn!==1/0?this.$text.css("max-height",Dn):this.$text.css("max-height","none")}},{key:"initTpl",value:function(){this.$container.html(this.c('<div class="text"></div><div class="copy"><span class="icon icon-copy"></span></div>'))}},{key:"bindEvent",value:function(){var Dn=this;this.on("optionChange",function(Kn){Kn==="maxHeight"?Dn.updateHeight():Dn.render()}),this.$container.on("scroll",this.updateCopyPos),this.$copy.on("click",this.copy)}},{key:"_render",value:function(){var Dn=this.c,Kn=this.$text,lr=this.options,Rr=lr.text,$r=lr.wrapLongLines,br=lr.showLineNumbers;$r?Kn.addClass(Dn("wrap-long-lines")):Kn.rmClass(Dn("wrap-long-lines")),br?Kn.addClass(Dn("line-numbers")):Kn.rmClass(Dn("line-numbers")),Kn.html('<div class="'.concat(Dn("table"),'"></div>')),this.lineNum=0,this.options.text="",this.append(Rr)}}]),Wn}(Zn),sr=/\r\n|\r|\n/g;(function(An,Nn){try{An.exports=Nn,An.exports.default=Nn}catch{}})(i,hn)},6672:function(i,s,o){o.d(s,{Z:function(){return cu}});var d={};o.r(d),o.d(d,{classPrefix:function(){return qt},drag:function(){return $n},escapeJsonStr:function(){return vs},evalCss:function(){return Tn},eventClient:function(){return rr},eventPage:function(){return xr},getFileName:function(){return jr},hasSafeArea:function(){return $o},isChobitsuEl:function(){return er},isErudaEl:function(){return Fn},pxToNum:function(){return Er},safeStorage:function(){return Zr}});var j=o(5671),$=o(3144),ot=o(7326),ht=o(9340),pt=o(2963),dt=o(1120),gt=o(4942),wt=o(1443),bt=o.n(wt),St=new(bt());St.ADD="ADD",St.SHOW="SHOW",St.SCALE="SCALE";var Ct=St,Et=o(1752),Pt=o(7496),_t=o.n(Pt)()({init:function(Yt){this._$el=Yt},show:function(){return this._$el.show(),this},hide:function(){return this._$el.hide(),this},destroy:function(){this._$el.remove()}}),yt=o(1512),xt=o.n(yt),Dt=o(125),Ot=o.n(Dt),Bt=o(5229),At=o.n(Bt),It=o(3783),Gt=o.n(It),Jt=o(5972),nn=o.n(Jt),Vt=o(6768),Ut=o.n(Vt),Ht=o(6341),jt=o.n(Ht),Wt=o(4675),ln=o.n(Wt),Qt=o(3367),Xt=o.n(Qt),on=o(2533),sn=o.n(on),bn=o(7622),Zn=o.n(bn),Rn=o(4193),vn=o.n(Rn),yn=o(6329),Ln=o.n(yn),qn=o(6472),_r=o.n(qn),Jn=["background","foreground","selectForeground","accent","highlight","border","primary","contrast","varColor","stringColor","keywordColor","numberColor","operatorColor","linkColor","textColor","tagNameColor","functionColor","attributeNameColor","commentColor"],dr=Jn.length;function Un(Yt){for(var Zt={},Lt=0;Lt<dr;Lt++)Zt[Jn[Lt]]=Yt[Lt];return Zt}function mn(Yt){return _r()(Yt)&&(Yt=Un(Yt)),Yt.darkerBackground||(Yt.darkerBackground=Yt.contrast),Ln()({consoleWarnBackground:"#332a00",consoleWarnForeground:"#ffcb6b",consoleWarnBorder:"#650",consoleErrorBackground:"#290000",consoleErrorForeground:"#ff8080",consoleErrorBorder:"#5c0000",light:"#ccc",dark:"#aaa"},Yt)}function xn(Yt){return _r()(Yt)&&(Yt=Un(Yt)),Yt.darkerBackground||(Yt.darkerBackground=Yt.contrast),Ln()({consoleWarnBackground:"#fffbe5",consoleWarnForeground:"#5c5c00",consoleWarnBorder:"#fff5c2",consoleErrorBackground:"#fff0f0",consoleErrorForeground:"#f00",consoleErrorBorder:"#ffd6d6",light:"#fff",dark:"#eee"},Yt)}var cn=["Dark","Material Oceanic","Material Darker","Material Palenight","Material Deep Ocean","Monokai Pro","Dracula","Arc Dark","Atom One Dark","Solarized Dark","Night Owl"],kn={Light:xn({darkerBackground:"#f3f3f3",background:"#fff",foreground:"#333",selectForeground:"#333",accent:"#1a73e8",highlight:"#eaeaea",border:"#ccc",primary:"#333",contrast:"#f2f7fd",varColor:"#c80000",stringColor:"#1a1aa6",keywordColor:"#881280",numberColor:"#1c00cf",operatorColor:"#808080",linkColor:"#1155cc",textColor:"#8097bd",tagNameColor:"#881280",functionColor:"#222",attributeNameColor:"#994500",commentColor:"#236e25",cssProperty:"#c80000"}),Dark:mn({darkerBackground:"#333",background:"#242424",foreground:"#a5a5a5",selectForeground:"#eaeaea",accent:"#555",highlight:"#000",border:"#3d3d3d",primary:"#ccc",contrast:"#0b2544",varColor:"#e36eec",stringColor:"#f29766",keywordColor:"#9980ff",numberColor:"#9980ff",operatorColor:"#7f7f7f",linkColor:"#ababab",textColor:"#42597f",tagNameColor:"#5db0d7",functionColor:"#d5d5d5",attributeNameColor:"#9bbbdc",commentColor:"#747474"}),"Material Oceanic":mn(["#263238","#B0BEC5","#FFFFFF","#009688","#425B67","#2A373E","#607D8B","#1E272C","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#546e7a"]),"Material Darker":mn(["#212121","#B0BEC5","#FFFFFF","#FF9800","#3F3F3F","#292929","#727272","#1A1A1A","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#616161"]),"Material Lighter":xn(["#FAFAFA","#546E7A","#546e7a","#00BCD4","#E7E7E8","#d3e1e8","#94A7B0","#F4F4F4","#272727","#91B859","#7C4DFF","#F76D47","#39ADB5","#39ADB5","#546E7A","#E53935","#6182B8","#F6A434","#AABFC9"]),"Material Palenight":mn(["#292D3E","#A6ACCD","#FFFFFF","#ab47bc","#444267","#2b2a3e","#676E95","#202331","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#A6ACCD","#f07178","#82aaff","#ffcb6b","#676E95"]),"Material Deep Ocean":mn(["#0F111A","#8F93A2","#FFFFFF","#84ffff","#1F2233","#41465b","#4B526D","#090B10","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#8F93A2","#f07178","#82aaff","#ffcb6b","#717CB4"]),"Monokai Pro":mn(["#2D2A2E","#fcfcfa","#FFFFFF","#ffd866","#5b595c","#423f43","#939293","#221F22","#FCFCFA","#FFD866","#FF6188","#AB9DF2","#FF6188","#78DCE8","#fcfcfa","#FF6188","#A9DC76","#78DCE8","#727072"]),Dracula:mn(["#282A36","#F8F8F2","#8BE9FD","#FF79C5","#6272A4","#21222C","#6272A4","#191A21","#F8F8F2","#F1FA8C","#FF79C6","#BD93F9","#FF79C6","#F1FA8C","#F8F8F2","#FF79C6","#50FA78","#50FA7B","#6272A4"]),"Arc Dark":mn(["#2f343f","#D3DAE3","#FFFFFF","#42A5F5","#3F3F46","#404552","#8b9eb5","#262b33","#CF6A4C","#8F9D6A","#9B859D","#CDA869","#A7A7A7","#7587A6","#D3DAE3","#CF6A4C","#7587A6","#F9EE98","#747C84"]),"Atom One Dark":mn(["#282C34","#979FAD","#FFFFFF","#2979ff","#383D48","#2e3239","#979FAD","#21252B","#D19A66","#98C379","#C679DD","#D19A66","#61AFEF","#56B6C2","#979FAD","#F07178","#61AEEF","#E5C17C","#59626F"]),"Atom One Light":xn(["#FAFAFA","#232324","#232324","#2979ff","#EAEAEB","#DBDBDC","#9D9D9F","#FFFFFF","#986801","#50A14E","#A626A4","#986801","#4078F2","#0184BC","#232324","#E4564A","#4078F2","#C18401","#A0A1A7"]),"Solarized Dark":mn(["#002B36","#839496","#FFFFFF","#d33682","#11353F","#0D3640","#586e75","#00252E","#268BD2","#2AA198","#859900","#D33682","#93A1A1","#268BD2","#839496","#268BD2","#B58900","#B58900","#657B83"]),"Solarized Light":xn(["#fdf6e3","#586e75","#002b36","#d33682","#F6F0DE","#f7f2e2","#93a1a1","#eee8d5","#268BD2","#2AA198","#859900","#D33682","#657B83","#268BD2","#586e75","#268BD2","#B58900","#657B83","#93A1A1"]),Github:xn(["#F7F8FA","#5B6168","#FFFFFF","#79CB60","#CCE5FF","#DFE1E4","#292D31","#FFFFFF","#24292E","#032F62","#D73A49","#005CC5","#D73A49","#005CC5","#5B6168","#22863A","#6F42C1","#6F42C1","#6A737D"]),"Night Owl":mn(["#011627","#b0bec5","#ffffff","#7e57c2","#152C3B","#2a373e","#607d8b","#001424","#addb67","#ecc48d","#c792ea","#f78c6c","#c792ea","#80CBC4","#b0bec5","#7fdbca","#82AAFF","#FAD430","#637777"]),"Light Owl":xn(["#FAFAFA","#546e7a","#403f53","#269386","#E0E7EA","#efefef","#403F53","#FAFAFA","#0C969B","#c96765","#994cc3","#aa0982","#7d818b","#994cc3","#546e7a","#994cc3","#4876d6","#4876d6","#637777"])},En=[],cr=1,Gn=kn.Light,ur=function Yt(Zt,Lt){Zt=Xt()(Zt);for(var vt=0,Tt=En.length;vt<Tt;vt++)if(En[vt].css===Zt)return;Lt=Lt||Yt.container||document.head;var Ft=document.createElement("style");Ft.type="text/css",Lt.appendChild(Ft);var tn={css:Zt,el:Ft,container:Lt};return sr(tn),En.push(tn),tn};function hn(){Gt()(En,function(Yt){return sr(Yt)})}function sr(Yt){var Zt=Yt.css,Lt=Yt.el;Zt=(Zt=Zt.replace(/(\d+)px/g,function(Tt,Ft){return+Ft*cr+"px"})).replace(/_/g,"eruda-");var vt=sn()(kn.Light);Gt()(vt,function(Tt){Zt=Zt.replace(new RegExp("var\\(--".concat(Zn()(Tt),"\\)"),"g"),Gn[Tt])}),Lt.innerText=Zt}ur.setScale=function(Yt){cr=Yt,hn()},ur.setTheme=function(Yt){Gn=Ut()(Yt)?kn[Yt]||kn.Light:vn()(Yt,kn.Light),hn()},ur.getCurTheme=function(){return Gn},ur.getThemes=function(){return kn},ur.clear=function(){Gt()(En,function(Yt){var Zt=Yt.container,Lt=Yt.el;return Zt.removeChild(Lt)}),En=[]},ur.remove=function(Yt){En=nn()(En,function(Zt){return Zt!==Yt}),Yt.container.removeChild(Yt.el)};var An=ur,Nn=o(8692);function Wn(Yt){var Zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Lt,vt=(0,dt.Z)(Yt);if(Zt){var Tt=(0,dt.Z)(this).constructor;Lt=Reflect.construct(vt,arguments,Tt)}else Lt=vt.apply(this,arguments);return(0,pt.Z)(this,Lt)}}var Dn=function(Yt){(0,ht.Z)(Lt,Yt);var Zt=Wn(Lt);function Lt(){var vt;return(0,j.Z)(this,Lt),(vt=Zt.call(this))._style=An(o(8011)),vt.name="settings",vt._settings=[],vt}return(0,$.Z)(Lt,[{key:"init",value:function(vt){(0,Et.Z)((0,dt.Z)(Lt.prototype),"init",this).call(this,vt),this._setting=new Nn.Z(vt.get(0)),this._bindEvent()}},{key:"remove",value:function(vt,Tt){var Ft=this;if(Ut()(vt)){var tn=this;this._$el.find(".luna-setting-item-title").each(function(){xt()(this).text()===vt&&tn._setting.remove(this.settingItem)})}else this._settings=nn()(this._settings,function(dn){return dn.config!==vt||dn.key!==Tt||(Ft._setting.remove(dn.item),!1)});return this._cleanSeparator(),this}},{key:"destroy",value:function(){this._setting.destroy(),(0,Et.Z)((0,dt.Z)(Lt.prototype),"destroy",this).call(this),An.remove(this._style)}},{key:"clear",value:function(){this._settings=[],this._setting.clear()}},{key:"switch",value:function(vt,Tt,Ft){var tn=this._genId(),dn=this._setting.appendCheckbox(tn,!!vt.get(Tt),Ft);return this._settings.push({config:vt,key:Tt,id:tn,item:dn}),this}},{key:"select",value:function(vt,Tt,Ft,tn){var dn=this._genId(),Sn={};Gt()(tn,function(or){return Sn[or]=or});var Yn=this._setting.appendSelect(dn,vt.get(Tt),"",Ft,Sn);return this._settings.push({config:vt,key:Tt,id:dn,item:Yn}),this}},{key:"range",value:function(vt,Tt,Ft,tn){var dn=tn.min,Sn=dn===void 0?0:dn,Yn=tn.max,or=Yn===void 0?1:Yn,Sr=tn.step,Gr=Sr===void 0?.1:Sr,co=this._genId(),po=this._setting.appendNumber(co,vt.get(Tt),Ft,{max:or,min:Sn,step:Gr,range:!0});return this._settings.push({config:vt,key:Tt,min:Sn,max:or,step:Gr,id:co,item:po}),this}},{key:"button",value:function(vt,Tt){return this._setting.appendButton(vt,Tt),this}},{key:"separator",value:function(){return this._setting.appendSeparator(),this}},{key:"text",value:function(vt){return this._setting.appendTitle(vt),this}},{key:"_cleanSeparator",value:function(){var vt=ln()(this._$el.get(0).children);function Tt(dn){return jt()(dn.getAttribute("class"),"luna-setting-item-separator")}for(var Ft=0,tn=vt.length;Ft<tn-1;Ft++)Tt(vt[Ft])&&Tt(vt[Ft+1])&&xt()(vt[Ft]).remove()}},{key:"_genId",value:function(){return At()("eruda-settings")}},{key:"_getSetting",value:function(vt){var Tt;return Gt()(this._settings,function(Ft){Ft.id===vt&&(Tt=Ft)}),Tt}},{key:"_bindEvent",value:function(){var vt=this;this._setting.on("change",function(Tt,Ft){var tn=vt._getSetting(Tt);tn.config.set(tn.key,Ft)})}}],[{key:"createCfg",value:function(vt,Tt){return new(Ot())("eruda-"+vt,Tt)}}]),Lt}(_t),Kn=o(6837),lr=o.n(Kn),Rr=o(442),$r=o.n(Rr),br=o(6334),Tr=o.n(br),fr=o(4187),In=o.n(fr),_i=o(1286),pr=o.n(_i),tr=o(9702),ir=o.n(tr),Mn=o(2461),gn=o.n(Mn),Xn=o(5026),Vn=o.n(Xn),gr=o(5610),zr=o.n(gr),Ir=o(3875),Wr=o.n(Ir),eo=o(4331),Vr=o.n(eo),go=o(7483),mo=o.n(go);function $o(){var Yt=!1,Zt=document.createElement("div");if(CSS.supports("padding-bottom: env(safe-area-inset-bottom)")?(Zt.style.paddingBottom="env(safe-area-inset-bottom)",Yt=!0):CSS.supports("padding-bottom: constant(safe-area-inset-bottom)")&&(Zt.style.paddingBottom="constant(safe-area-inset-bottom)",Yt=!0),Yt){document.body.appendChild(Zt);var Lt=parseInt(window.getComputedStyle(Zt).paddingBottom);if(document.body.removeChild(Zt),Lt>0)return!0}return!1}function vs(Yt){return In()(Yt).replace(/\\'/g,"'").replace(/\t/g,"\\t")}function Zr(Yt,Zt){var Lt;switch(pr()(Zt)&&(Zt=!0),Yt){case"local":Lt=window.localStorage;break;case"session":Lt=window.sessionStorage}try{var vt="test-localStorage-"+Date.now();Lt.setItem(vt,vt);var Tt=Lt.getItem(vt);if(Lt.removeItem(vt),Tt!==vt)throw new Error}catch{return Zt?Vn():void 0}return Lt}function jr(Yt){var Zt=ir()(Yt.split("/"));return Zt===""&&(Zt=(Yt=new(Tr())(Yt)).hostname),Zt}function Er(Yt){return Wr()(Yt.replace("px",""))}function Fn(Yt){for(;Yt;){if(Yt.id==="eruda")return!0;Yt=Yt.parentNode}return!1}function er(Yt){for(;Yt;){var Zt="";if(Yt.getAttribute&&(Zt=Yt.getAttribute("class")||""),jt()(Zt,"__chobitsu-hide__"))return!0;Yt=Yt.parentNode}return!1}var Tn=An;function qt(Yt){if(/<[^>]*>/g.test(Yt))try{var Zt=mo().parse(Yt);return Mr(Zt,function(Lt){Lt.attrs&&Lt.attrs.class&&(Lt.attrs.class=qr(Lt.attrs.class))}),mo().stringify(Zt)}catch{return qr(Yt)}return qr(Yt)}function Mr(Yt,Zt){for(var Lt=0,vt=Yt.length;Lt<vt;Lt++){var Tt=Yt[Lt];Zt(Tt),Tt.content&&Mr(Tt.content,Zt)}}function qr(Yt){var Zt="eruda-";return gn()(Vr()(Yt).split(/\s+/),function(Lt){return jt()(Lt,Zt)?Lt:Lt.replace(/[\w-]+/,function(vt){return"".concat(Zt).concat(vt)})}).join(" ")}var Yr="ontouchstart"in zr(),Qn="PointerEvent"in zr(),kr={start:"touchstart",move:"touchmove",end:"touchend"},ar={start:"mousedown",move:"mousemove",end:"mouseup"},Cn={start:"pointerdown",move:"pointermove",end:"pointerup"};function $n(Yt){return Qn?Cn[Yt]:Yr?kr[Yt]:ar[Yt]}function rr(Yt,Zt){var Lt=Yt==="x"?"clientX":"clientY";return Zt[Lt]?Zt[Lt]:Zt.changedTouches?Zt.changedTouches[0][Lt]:0}function xr(Yt,Zt){var Lt=Yt==="x"?"pageX":"pageY";return Zt[Lt]?Zt[Lt]:Zt.changedTouches?Zt.changedTouches[0][Lt]:0}function Dr(Yt){var Zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Lt,vt=(0,dt.Z)(Yt);if(Zt){var Tt=(0,dt.Z)(this).constructor;Lt=Reflect.construct(vt,arguments,Tt)}else Lt=vt.apply(this,arguments);return(0,pt.Z)(this,Lt)}}var Pr,Ar=xt()(document),Lr=function(Yt){(0,ht.Z)(Lt,Yt);var Zt=Dr(Lt);function Lt(vt){var Tt;return(0,j.Z)(this,Lt),Tt=Zt.call(this),(0,gt.Z)((0,ot.Z)(Tt),"_onDragStart",function(Ft){var tn=Tt._$el;tn.addClass(qt("active")),Tt._isClick=!0,Ft=Ft.origEvent,Tt._startX=rr("x",Ft),Tt._oldX=Er(tn.css("left")),Tt._oldY=Er(tn.css("top")),Tt._startY=rr("y",Ft),Ar.on($n("move"),Tt._onDragMove),Ar.on($n("end"),Tt._onDragEnd)}),(0,gt.Z)((0,ot.Z)(Tt),"_onDragMove",function(Ft){var tn=Tt._$el.get(0).offsetWidth,dn=Tt._$container.get(0).offsetWidth,Sn=Tt._$container.get(0).offsetHeight,Yn=rr("x",Ft=Ft.origEvent)-Tt._startX,or=rr("y",Ft)-Tt._startY;(Math.abs(Yn)>3||Math.abs(or)>3)&&(Tt._isClick=!1);var Sr=Tt._oldX+Yn,Gr=Tt._oldY+or;Sr<0?Sr=0:Sr>dn-tn&&(Sr=dn-tn),Gr<0?Gr=0:Gr>Sn-tn&&(Gr=Sn-tn),Tt._$el.css({left:Sr,top:Gr})}),(0,gt.Z)((0,ot.Z)(Tt),"_onDragEnd",function(Ft){var tn=Tt._$el;Tt._isClick&&Tt.emit("click"),Tt._onDragMove(Ft),Ar.off($n("move"),Tt._onDragMove),Ar.off($n("end"),Tt._onDragEnd);var dn=Tt.config;dn.get("rememberPos")&&dn.set("pos",{x:Er(tn.css("left")),y:Er(tn.css("top"))}),tn.rmClass("eruda-active")}),Tt._style=An(o(9195)),Tt._$container=vt,Tt._initTpl(),Tt._bindEvent(),Tt._registerListener(),Tt}return(0,$.Z)(Lt,[{key:"hide",value:function(){this._$el.hide()}},{key:"show",value:function(){this._$el.show()}},{key:"setPos",value:function(vt){this._isOutOfRange(vt)&&(vt=this._getDefPos()),this._$el.css({left:vt.x,top:vt.y}),this.config.set("pos",vt)}},{key:"getPos",value:function(){return this.config.get("pos")}},{key:"destroy",value:function(){An.remove(this._style),this._unregisterListener(),this._$el.remove()}},{key:"_isOutOfRange",value:function(vt){vt=vt||this.config.get("pos");var Tt=this._getDefPos();return vt.x>Tt.x+10||vt.x<0||vt.y<0||vt.y>Tt.y+10}},{key:"_registerListener",value:function(){var vt=this;this._scaleListener=function(){return lr()(function(){vt._isOutOfRange()&&vt._resetPos()})},Ct.on(Ct.SCALE,this._scaleListener)}},{key:"_unregisterListener",value:function(){Ct.off(Ct.SCALE,this._scaleListener)}},{key:"_initTpl",value:function(){var vt=this._$container;vt.append(qt('<div class="entry-btn"><span class="icon-tool"></span></div>')),this._$el=vt.find(".eruda-entry-btn")}},{key:"_resetPos",value:function(vt){var Tt=this.config,Ft=Tt.get("pos"),tn=this._getDefPos();Tt.get("rememberPos")&&!vt||(Ft=tn),this.setPos(Ft)}},{key:"_bindEvent",value:function(){var vt=this;this._$el.on($n("start"),this._onDragStart),$r().on("change",function(){return vt._resetPos(!0)}),window.addEventListener("resize",function(){return vt._resetPos()})}},{key:"initCfg",value:function(vt){var Tt=this.config=Dn.createCfg("entry-button",{rememberPos:!0,pos:this._getDefPos()});vt.switch(Tt,"rememberPos","Remember Entry Button Position"),this._resetPos()}},{key:"_getDefPos",value:function(){var vt=this._$el.get(0).offsetWidth+10;return{x:window.innerWidth-vt,y:window.innerHeight-vt}}}]),Lt}(bt()),Br=o(4989),Hr=Pr=new(o.n(Br)())("[Eruda]","warn");Pr.formatter=function(Yt,Zt){return Zt.unshift(this.name),Zt};var no=o(3990),fo=o.n(no),_o=o(2520),wo=o.n(_o),Zo=o(6930),Eo=o.n(Zo),Or=o(4270),Bo=o.n(Or),Co=o(6093),ns=o.n(Co),Io=o(129),Ts=o(7638);function ko(Yt){var Zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Lt,vt=(0,dt.Z)(Yt);if(Zt){var Tt=(0,dt.Z)(this).constructor;Lt=Reflect.construct(vt,arguments,Tt)}else Lt=vt.apply(this,arguments);return(0,pt.Z)(this,Lt)}}var Oo=function(Yt){(0,ht.Z)(Lt,Yt);var Zt=ko(Lt);function Lt(vt){var Tt,Ft=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).defaults,tn=Ft===void 0?{}:Ft;return(0,j.Z)(this,Lt),Tt=Zt.call(this),(0,gt.Z)((0,ot.Z)(Tt),"_checkSafeArea",function(){var dn=(0,ot.Z)(Tt).$container;$o()?dn.addClass(qt("safe-area")):dn.rmClass(qt("safe-area"))}),(0,gt.Z)((0,ot.Z)(Tt),"_updateTabHeight",function(dn){Tt._tab.setOption("height",40*dn),lr()(function(){Tt._tab.updateSlider()})}),Tt._defCfg=Ln()({transparency:1,displaySize:80,theme:wo()()?"Dark":"Light"},tn),Tt._style=An(o(13)),Tt.$container=vt,Tt._isShow=!1,Tt._opacity=1,Tt._tools={},Tt._isResizing=!1,Tt._resizeTimer=null,Tt._resizeStartY=0,Tt._resizeStartSize=0,Tt._initTpl(),Tt._initTab(),Tt._initNotification(),Tt._initModal(),Bo()(function(){return Tt._checkSafeArea()}),Tt._bindEvent(),Tt}return(0,$.Z)(Lt,[{key:"show",value:function(){var vt=this;return this._isShow=!0,this._$el.show(),this._tab.updateSlider(),setTimeout(function(){vt._$el.css("opacity",vt._opacity)},50),this.emit("show"),this}},{key:"hide",value:function(){var vt=this;return this._isShow=!1,this.emit("hide"),this._$el.css({opacity:0}),setTimeout(function(){return vt._$el.hide()},300),this}},{key:"toggle",value:function(){return this._isShow?this.hide():this.show()}},{key:"add",value:function(vt){var Tt=this._tab;if(!(vt instanceof _t)){var Ft=new _t,tn=Ft.init,dn=Ft.show,Sn=Ft.hide,Yn=Ft.destroy;vn()(vt,{init:tn,show:dn,hide:Sn,destroy:Yn})}var or=vt.name;return or?(or=or.toLowerCase(),this._tools[or]?Hr.warn("Tool ".concat(or," already exists")):(this._$tools.prepend('<div id="'.concat(qt(or),'" class="').concat(qt(or+" tool"),'"></div>')),vt.init(this._$tools.find(".".concat(qt(or),".").concat(qt("tool"))),this),vt.active=!1,this._tools[or]=vt,or==="settings"?Tt.append({id:or,title:or}):Tt.insert(Tt.length-1,{id:or,title:or}),this)):Hr.error("You must specify a name for a tool")}},{key:"remove",value:function(vt){var Tt=this._tools;if(!Tt[vt])return Hr.warn("Tool ".concat(vt," doesn't exist"));this._tab.remove(vt);var Ft=Tt[vt];if(delete Tt[vt],Ft.active){var tn=sn()(Tt);tn.length>0&&this.showTool(Tt[ir()(tn)].name)}return Ft.destroy(),this}},{key:"removeAll",value:function(){var vt=this;return Gt()(this._tools,function(Tt){return vt.remove(Tt.name)}),this}},{key:"get",value:function(vt){var Tt=this._tools[vt];if(Tt)return Tt}},{key:"showTool",value:function(vt){if(this._curTool===vt)return this;this._curTool=vt;var Tt=this._tools,Ft=Tt[vt];if(Ft){var tn={};return Gt()(Tt,function(dn){dn.active&&(tn=dn,dn.active=!1,dn.hide())}),Ft.active=!0,Ft.show(),this._tab.select(vt),this.emit("showTool",vt,tn),this}}},{key:"initCfg",value:function(vt){var Tt=this,Ft=this.config=Dn.createCfg("dev-tools",this._defCfg);this._setTransparency(Ft.get("transparency")),this._setDisplaySize(Ft.get("displaySize")),this._setTheme(Ft.get("theme")),Ft.on("change",function(tn,dn){switch(tn){case"transparency":return Tt._setTransparency(dn);case"displaySize":return Tt._setDisplaySize(dn);case"theme":return Tt._setTheme(dn)}}),vt.separator().select(Ft,"theme","Theme",sn()(An.getThemes())).range(Ft,"transparency","Transparency",{min:.2,max:1,step:.01}).range(Ft,"displaySize","Display Size",{min:40,max:100,step:1}).button("Restore defaults and reload",function(){var tn=Zr("local"),dn=JSON.parse(JSON.stringify(tn));Gt()(dn,function(Sn,Yn){Ut()(Sn)&&Eo()(Yn,"eruda")&&tn.removeItem(Yn)}),window.location.reload()}).separator()}},{key:"notify",value:function(vt,Tt){this._notification.notify(vt,Tt)}},{key:"destroy",value:function(){An.remove(this._style),this.removeAll(),this._tab.destroy(),this._$el.remove(),window.removeEventListener("resize",this._checkSafeArea),Ct.off(Ct.SCALE,this._updateTabHeight)}},{key:"_setTheme",value:function(vt){var Tt=this.$container;(function(Ft){return jt()(cn,Ft)})(vt)?Tt.addClass(qt("dark")):Tt.rmClass(qt("dark")),An.setTheme(vt)}},{key:"_setTransparency",value:function(vt){fo()(vt)&&(this._opacity=vt,this._isShow&&this._$el.css({opacity:vt}))}},{key:"_setDisplaySize",value:function(vt){fo()(vt)&&this._$el.css({height:vt+"%"})}},{key:"_initTpl",value:function(){var vt=this.$container;vt.append(qt(`
      <div class="dev-tools">
        <div class="resizer"></div>
        <div class="tab"></div>
        <div class="tools"></div>
        <div class="notification"></div>
        <div class="modal"></div>
      </div>
      `)),this._$el=vt.find(qt(".dev-tools")),this._$tools=this._$el.find(qt(".tools"))}},{key:"_initTab",value:function(){var vt=this;this._tab=new Ts.Z(this._$el.find(qt(".tab")).get(0),{height:40}),this._tab.on("select",function(Tt){return vt.showTool(Tt)})}},{key:"_initNotification",value:function(){this._notification=new(ns())(this._$el.find(qt(".notification")).get(0),{position:{x:"center",y:"top"}})}},{key:"_initModal",value:function(){Io.Z.setContainer(this._$el.find(qt(".modal")).get(0))}},{key:"_bindEvent",value:function(){var vt=this,Tt=this._$el.find(qt(".resizer")),Ft=this._$el.find(qt(".nav-bar")),tn=xt()(document),dn=function(Yn){if(vt._isResizing){Yn.preventDefault(),Yn.stopPropagation(),Yn=Yn.origEvent;var or=(vt._resizeStartY-rr("y",Yn))/window.innerHeight*100,Sr=vt._resizeStartSize+or;Sr<40?Sr=40:Sr>100&&(Sr=100),vt.config.set("displaySize",Wr()(Sr.toFixed(2)))}},Sn=function Yn(){clearTimeout(vt._resizeTimer),vt._isResizing=!1,Tt.css("height",10),tn.off($n("move"),dn),tn.off($n("end"),Yn)};Tt.css("height",10),Tt.on($n("start"),function(Yn){Yn.preventDefault(),Yn.stopPropagation(),Yn=Yn.origEvent,vt._isResizing=!0,vt._resizeStartSize=vt.config.get("displaySize"),vt._resizeStartY=rr("y",Yn),Tt.css("height","100%"),tn.on($n("move"),dn),tn.on($n("end"),Sn)}),Ft.on("contextmenu",function(Yn){return Yn.preventDefault()}),this.$container.on("click",function(Yn){return Yn.stopPropagation()}),window.addEventListener("resize",this._checkSafeArea),Ct.on(Ct.SCALE,this._updateTabHeight)}}]),Lt}(bt()),us=o(1214),zs=o.n(us),Zs=o(4777),is=o.n(Zs),ys=o(1754),As=o.n(ys),xl=o(5484),Gs=o.n(xl),Al=o(3023),Ls=o.n(Al),Cl=o(9585),na=o.n(Cl),Sl=o(6156),Rs=o.n(Sl),Ds=o(8816);function Cs(Yt){var Zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Lt,vt=(0,dt.Z)(Yt);if(Zt){var Tt=(0,dt.Z)(this).constructor;Lt=Reflect.construct(vt,arguments,Tt)}else Lt=vt.apply(this,arguments);return(0,pt.Z)(this,Lt)}}Gs().start();var ga=function(Yt){(0,ht.Z)(Lt,Yt);var Zt=Cs(Lt);function Lt(){var vt,Tt=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).name,Ft=Tt===void 0?"console":Tt;return(0,j.Z)(this,Lt),vt=Zt.call(this),(0,gt.Z)((0,ot.Z)(vt),"_handleShow",function(){na()(vt._$el.get(0))||vt._logger.renderViewport()}),(0,gt.Z)((0,ot.Z)(vt),"_handleErr",function(tn){vt._logger.error(tn)}),bt().mixin((0,ot.Z)(vt)),vt.name=Ft,vt._selectedLog=null,vt}return(0,$.Z)(Lt,[{key:"init",value:function(vt,Tt){(0,Et.Z)((0,dt.Z)(Lt.prototype),"init",this).call(this,vt),this._container=Tt,this._appendTpl(),this._initCfg(),this._initLogger(),this._exposeLogger(),this._bindEvent()}},{key:"show",value:function(){(0,Et.Z)((0,dt.Z)(Lt.prototype),"show",this).call(this),this._handleShow()}},{key:"overrideConsole",value:function(){var vt=this,Tt=this._origConsole={},Ft=window.console;return Is.forEach(function(tn){var dn=Tt[tn]=zs();Ft[tn]&&(dn=Tt[tn]=Ft[tn].bind(Ft)),Ft[tn]=function(){vt[tn].apply(vt,arguments),dn.apply(void 0,arguments)}}),this}},{key:"setGlobal",value:function(vt,Tt){this._logger.setGlobal(vt,Tt)}},{key:"restoreConsole",value:function(){var vt=this;return this._origConsole?(Is.forEach(function(Tt){return window.console[Tt]=vt._origConsole[Tt]}),delete this._origConsole,this):this}},{key:"catchGlobalErr",value:function(){return Gs().addListener(this._handleErr),this}},{key:"ignoreGlobalErr",value:function(){return Gs().rmListener(this._handleErr),this}},{key:"filter",value:function(vt){var Tt=this._$filterText,Ft=this._logger;Ut()(vt)?(Tt.text(vt),Ft.setOption("filter",Vr()(vt))):As()(vt)?(Tt.text(Xt()(vt)),Ft.setOption("filter",vt)):is()(vt)&&(Tt.text("ƒ"),Ft.setOption("filter",vt))}},{key:"destroy",value:function(){this._logger.destroy(),(0,Et.Z)((0,dt.Z)(Lt.prototype),"destroy",this).call(this),this._container.off("show",this._handleShow),this._style&&An.remove(this._style),this.ignoreGlobalErr(),this.restoreConsole(),this._rmCfg()}},{key:"_enableJsExecution",value:function(vt){var Tt=this._$el,Ft=Tt.find(qt(".js-input"));vt?(Ft.show(),Tt.rmClass(qt("js-input-hidden"))):(Ft.hide(),Tt.addClass(qt("js-input-hidden")))}},{key:"_appendTpl",value:function(){var vt=this._$el;this._style=An(o(3191)),vt.append(qt(`
      <div class="control">
        <span class="icon-clear clear-console"></span>
        <span class="level active" data-level="all">All</span>
        <span class="level" data-level="info">Info</span>
        <span class="level" data-level="warning">Warning</span>
        <span class="level" data-level="error">Error</span>
        <span class="filter-text"></span>
        <span class="icon-filter filter"></span>
        <span class="icon-copy icon-disabled copy"></span>
      </div>
      <div class="logs-container"></div>
      <div class="js-input">
        <div class="buttons">
          <div class="button cancel">Cancel</div>
          <div class="button execute">Execute</div>
        </div>
        <span class="icon-arrow-right"></span>
        <textarea></textarea>
      </div>
    `));var Tt=vt.find(qt(".js-input")),Ft=Tt.find("textarea"),tn=Tt.find(qt(".buttons"));Ln()(this,{_$control:vt.find(qt(".control")),_$logs:vt.find(qt(".logs-container")),_$inputContainer:Tt,_$input:Ft,_$inputBtns:tn,_$filterText:vt.find(qt(".filter-text"))})}},{key:"_initLogger",value:function(){var vt=this.config,Tt=vt.get("maxLogNum");Tt=Tt==="infinite"?0:+Tt;var Ft=this._$control.find(qt(".level")),tn=new Ds.Z(this._$logs.get(0),{asyncRender:vt.get("asyncRender"),maxNum:Tt,showHeader:vt.get("displayExtraInfo"),unenumerable:vt.get("displayUnenumerable"),accessGetter:vt.get("displayGetterVal"),lazyEvaluation:vt.get("lazyEvaluation")});tn.on("optionChange",function(dn,Sn){dn==="level"&&Ft.each(function(){var Yn=xt()(this),or=Yn.data("level");Yn[or===Sn||or==="all"&&_r()(Sn)?"addClass":"rmClass"](qt("active"))})}),vt.get("overrideConsole")&&this.overrideConsole(),this._logger=tn}},{key:"_exposeLogger",value:function(){var vt=this,Tt=this._logger;["html"].concat(Is).forEach(function(Ft){return vt[Ft]=function(){for(var tn=arguments.length,dn=new Array(tn),Sn=0;Sn<tn;Sn++)dn[Sn]=arguments[Sn];return Tt[Ft].apply(Tt,dn),vt.emit.apply(vt,[Ft].concat(dn)),vt}})}},{key:"_bindEvent",value:function(){var vt=this,Tt=this._container,Ft=this._$input,tn=this._$inputBtns,dn=this._$control,Sn=this._logger,Yn=this.config;dn.on("click",qt(".clear-console"),function(){return Sn.clear(!0)}).on("click",qt(".level"),function(){var or=xt()(this).data("level");or==="all"&&(or=["verbose","info","warning","error"]),Sn.setOption("level",or)}).on("click",qt(".filter"),function(){Io.Z.prompt("Filter").then(function(or){Rs()(or)||vt.filter(or)})}).on("click",qt(".copy"),function(){vt._selectedLog.copy(),Tt.notify("Copied")}),tn.on("click",qt(".cancel"),function(){return vt._hideInput()}).on("click",qt(".execute"),function(){var or=Ft.val().trim();or!==""&&(Sn.evaluate(or),Ft.val("").get(0).blur(),vt._hideInput())}),Ft.on("focusin",function(){return vt._showInput()}),Sn.on("insert",function(or){or.type==="error"&&Yn.get("displayIfErr")&&Tt.showTool("console").show()}),Sn.on("select",function(or){vt._selectedLog=or,dn.find(qt(".icon-copy")).rmClass(qt("icon-disabled"))}),Sn.on("deselect",function(){vt._selectedLog=null,dn.find(qt(".icon-copy")).addClass(qt("icon-disabled"))}),Tt.on("show",this._handleShow)}},{key:"_hideInput",value:function(){this._$inputContainer.rmClass(qt("active")),this._$inputBtns.css("display","none")}},{key:"_showInput",value:function(){this._$inputContainer.addClass(qt("active")),this._$inputBtns.css("display","flex")}},{key:"_rmCfg",value:function(){var vt=this.config,Tt=this._container.get("settings");Tt&&Tt.remove(vt,"asyncRender").remove(vt,"jsExecution").remove(vt,"catchGlobalErr").remove(vt,"overrideConsole").remove(vt,"displayExtraInfo").remove(vt,"displayUnenumerable").remove(vt,"displayGetterVal").remove(vt,"lazyEvaluation").remove(vt,"displayIfErr").remove(vt,"maxLogNum").remove(Ls()(this.name))}},{key:"_initCfg",value:function(){var vt=this,Tt=this._container,Ft=this.config=Dn.createCfg(this.name,{asyncRender:!0,catchGlobalErr:!0,jsExecution:!0,overrideConsole:!0,displayExtraInfo:!1,displayUnenumerable:!0,displayGetterVal:!0,lazyEvaluation:!0,displayIfErr:!1,maxLogNum:"infinite"});this._enableJsExecution(Ft.get("jsExecution")),Ft.get("catchGlobalErr")&&this.catchGlobalErr(),Ft.on("change",function(dn,Sn){var Yn=vt._logger;switch(dn){case"asyncRender":return Yn.setOption("asyncRender",Sn);case"jsExecution":return vt._enableJsExecution(Sn);case"catchGlobalErr":return Sn?vt.catchGlobalErr():vt.ignoreGlobalErr();case"overrideConsole":return Sn?vt.overrideConsole():vt.restoreConsole();case"maxLogNum":return Yn.setOption("maxNum",Sn==="infinite"?0:+Sn);case"displayExtraInfo":return Yn.setOption("showHeader",Sn);case"displayUnenumerable":return Yn.setOption("unenumerable",Sn);case"displayGetterVal":return Yn.setOption("accessGetter",Sn);case"lazyEvaluation":return Yn.setOption("lazyEvaluation",Sn)}});var tn=Tt.get("settings");tn&&tn.text(Ls()(this.name)).switch(Ft,"asyncRender","Asynchronous Rendering").switch(Ft,"jsExecution","Enable JavaScript Execution").switch(Ft,"catchGlobalErr","Catch Global Errors").switch(Ft,"overrideConsole","Override Console").switch(Ft,"displayIfErr","Auto Display If Error Occurs").switch(Ft,"displayExtraInfo","Display Extra Information").switch(Ft,"displayUnenumerable","Display Unenumerable Properties").switch(Ft,"displayGetterVal","Access Getter Value").switch(Ft,"lazyEvaluation","Lazy Evaluation").select(Ft,"maxLogNum","Max Log Number",["infinite","250","125","100","50","10"]).separator()}}]),Lt}(_t),Is=["log","error","info","warn","dir","time","timeLog","timeEnd","clear","table","assert","count","countReset","debug","group","groupCollapsed","groupEnd"],_a=o(4677),ba=o.n(_a),Vs=o(8887),Mo=o.n(Vs),Ns=o(8901),ro=o.n(Ns),El=o(2327),ws=o.n(El),Tl=o(4219),Pl=o.n(Tl),Rl=o(7756),Ms=o.n(Rl);function Dl(Yt){var Zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Lt,vt=(0,dt.Z)(Yt);if(Zt){var Tt=(0,dt.Z)(this).constructor;Lt=Reflect.construct(vt,arguments,Tt)}else Lt=vt.apply(this,arguments);return(0,pt.Z)(this,Lt)}}var Il=function(Yt){(0,ht.Z)(Lt,Yt);var Zt=Dl(Lt);function Lt(vt,Tt){var Ft;return(0,j.Z)(this,Lt),Ft=Zt.call(this),(0,gt.Z)((0,ot.Z)(Ft),"_copyRes",function(){var tn=Ft._detailData,dn="".concat(tn.method," ").concat(tn.url," ").concat(tn.status,`
`);Mo()(tn.data)||(dn+=`
Request Data

`,dn+="".concat(tn.data,`
`)),Mo()(tn.reqHeaders)||(dn+=`
Request Headers

`,Gt()(tn.reqHeaders,function(Sn,Yn){return dn+="".concat(Yn,": ").concat(Sn,`
`)})),Mo()(tn.resHeaders)||(dn+=`
Response Headers

`,Gt()(tn.resHeaders,function(Sn,Yn){return dn+="".concat(Yn,": ").concat(Sn,`
`)})),tn.resTxt&&(dn+=`
`.concat(tn.resTxt,`
`)),ws()(dn),Ft._devtools.notify("Copied")}),Ft._$container=vt,Ft._devtools=Tt,Ft._detailData={},Ft._bindEvent(),Ft}return(0,$.Z)(Lt,[{key:"show",value:function(vt){vt.resTxt&&Vr()(vt.resTxt)===""&&delete vt.resTxt,Mo()(vt.resHeaders)&&delete vt.resHeaders,Mo()(vt.reqHeaders)&&delete vt.reqHeaders;var Tt="";vt.data&&(Tt='<pre class="'.concat(qt("data"),'">').concat(ro()(vt.data),"</pre>"));var Ft="<tr><td>Empty</td></tr>";vt.reqHeaders&&(Ft=gn()(vt.reqHeaders,function(or,Sr){return`<tr>
          <td class="`.concat(qt("key"),'">').concat(ro()(Sr),`</td>
          <td>`).concat(ro()(or),`</td>
        </tr>`)}).join(""));var tn="<tr><td>Empty</td></tr>";vt.resHeaders&&(tn=gn()(vt.resHeaders,function(or,Sr){return`<tr>
          <td class="`.concat(qt("key"),'">').concat(ro()(Sr),`</td>
          <td>`).concat(ro()(or),`</td>
        </tr>`)}).join(""));var dn="";if(vt.resTxt){var Sn=vt.resTxt;Sn.length>ks&&(Sn=Ms()(Sn,ks)),dn='<pre class="'.concat(qt("response"),'">').concat(ro()(Sn),"</pre>")}var Yn='<div class="'.concat(qt("control"),`">
      <span class="`).concat(qt("icon-arrow-left back"),`"></span>
      <span class="`).concat(qt("icon-delete back"),`"></span>
      <span class="`).concat(qt("url"),'">').concat(ro()(vt.url),`</span>
      <span class="`).concat(qt("icon-copy copy-res"),`"></span>
    </div>
    <div class="`).concat(qt("http"),`">
      `).concat(Tt,`
      <div class="`).concat(qt("section"),`">
        <h2>Response Headers</h2>
        <table class="`).concat(qt("headers"),`">
          <tbody>
            `).concat(tn,`
          </tbody>
        </table>
      </div>
      <div class="`).concat(qt("section"),`">
        <h2>Request Headers</h2>
        <table class="`).concat(qt("headers"),`">
          <tbody>
            `).concat(Ft,`
          </tbody>
        </table>
      </div>
      `).concat(dn,`
    </div>`);this._$container.html(Yn).show(),this._detailData=vt}},{key:"hide",value:function(){this._$container.hide(),this.emit("hide")}},{key:"_bindEvent",value:function(){var vt=this,Tt=this._devtools;this._$container.on("click",qt(".back"),function(){return vt.hide()}).on("click",qt(".copy-res"),this._copyRes).on("click",qt(".http .response"),function(){var tn=vt._detailData,dn=tn.resTxt;if(Pl()(dn))return Ft("object",dn);switch(tn.subType){case"css":return Ft("css",dn);case"html":return Ft("html",dn);case"javascript":return Ft("js",dn);case"json":return Ft("object",dn)}return tn.type==="image"?Ft("img",tn.url):void 0});var Ft=function(tn,dn){var Sn=Tt.get("sources");Sn&&(Sn.set(tn,dn),Tt.showTool("sources"))}}}]),Lt}(bt()),ks=1e5,Ql=o(2439),Kl=o.n(Ql),wu=o(9143),Jl=o.n(wu),_c=o(2139),Ml=o(8689),Fs=o(7935),Cr=o(9119);function Xr(Yt,Zt){var Lt=Object.keys(Yt);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(Yt);Zt&&(vt=vt.filter(function(Tt){return Object.getOwnPropertyDescriptor(Yt,Tt).enumerable})),Lt.push.apply(Lt,vt)}return Lt}function wr(Yt){for(var Zt=1;Zt<arguments.length;Zt++){var Lt=arguments[Zt]!=null?arguments[Zt]:{};Zt%2?Xr(Object(Lt),!0).forEach(function(vt){(0,gt.Z)(Yt,vt,Lt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Yt,Object.getOwnPropertyDescriptors(Lt)):Xr(Object(Lt)).forEach(function(vt){Object.defineProperty(Yt,vt,Object.getOwnPropertyDescriptor(Lt,vt))})}return Yt}var $t=new(Jl());$t.register("Network",_c),$t.register("Overlay",Ml),$t.register("DOM",wr(wr({},Fs),{},{getNodeId:Fs.getDOMNodeId,getNode:Fs.getDOMNode})),$t.register("Storage",Cr);var zt=$t,rn=o(5564),_n=o(242),nr=o.n(_n),jn=o(2765),mr=o.n(jn),On=o(6954),vr=o.n(On),Jr=o(7913),io=o.n(Jr);function so(Yt){var Zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Lt,vt=(0,dt.Z)(Yt);if(Zt){var Tt=(0,dt.Z)(this).constructor;Lt=Reflect.construct(vt,arguments,Tt)}else Lt=vt.apply(this,arguments);return(0,pt.Z)(this,Lt)}}var To=function(Yt){(0,ht.Z)(Lt,Yt);var Zt=so(Lt);function Lt(){var vt;return(0,j.Z)(this,Lt),vt=Zt.call(this),(0,gt.Z)((0,ot.Z)(vt),"_reqWillBeSent",function(Tt){if(vt._isRecording){var Ft,tn={name:jr(Tt.request.url),url:Tt.request.url,status:"pending",type:"unknown",subType:"unknown",size:0,data:Tt.request.postData,method:Tt.request.method,startTime:1e3*Tt.timestamp,time:0,resTxt:"",done:!1,reqHeaders:Tt.request.headers||{},resHeaders:{}};tn.render=function(){var dn={name:tn.name,method:tn.method,status:tn.status,type:tn.subType,size:tn.size,time:tn.displayTime};Ft?(Ft.data=dn,Ft.render()):(Ft=vt._requestDataGrid.append(dn,{selectable:!0}),xt()(Ft.container).data("id",Tt.requestId)),tn.hasErr&&xt()(Ft.container).addClass(qt("request-error"))},tn.render(),vt._requests[Tt.requestId]=tn}}),(0,gt.Z)((0,ot.Z)(vt),"_resReceivedExtraInfo",function(Tt){var Ft=vt._requests[Tt.requestId];vt._isRecording&&Ft&&(Ft.resHeaders=Tt.headers,vt._updateType(Ft),Ft.render())}),(0,gt.Z)((0,ot.Z)(vt),"_resReceived",function(Tt){var Ft=vt._requests[Tt.requestId];if(vt._isRecording&&Ft){var tn=Tt.response,dn=tn.status,Sn=tn.headers;Ft.status=dn,(dn<200||dn>=300)&&(Ft.hasErr=!0),Sn&&(Ft.resHeaders=Sn,vt._updateType(Ft)),Ft.render()}}),(0,gt.Z)((0,ot.Z)(vt),"_loadingFinished",function(Tt){var Ft=vt._requests[Tt.requestId];if(vt._isRecording&&Ft){var tn=1e3*Tt.timestamp;Ft.time=tn-Ft.startTime,Ft.displayTime=ba()(Ft.time),Ft.size=Tt.encodedDataLength,Ft.done=!0,Ft.resTxt=zt.domain("Network").getResponseBody({requestId:Tt.requestId}).body,Ft.render()}}),(0,gt.Z)((0,ot.Z)(vt),"_copyCurl",function(){var Tt=vt._selectedRequest;ws()(function(Ft){var tn=vr()();tn==="windows"&&(tn="win");var dn=[],Sn=io()(["accept-encoding","host","method","path","scheme","version"]),Yn=tn==="win"?function(es){var Ul=/[\r\n]/.test(es)?'^"':'"';return Ul+es.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/[^a-zA-Z0-9\s_\-:=+~'\/.',?;()*`&]/g,"^$&").replace(/%(?=[a-zA-Z0-9_])/g,"%^").replace(/\r?\n/g,`^

`)+Ul}:function(es){return/[\0-\x1F\x7F-\x9F!]|\'/.test(es)?"$'"+es.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\0-\x1F\x7F-\x9F!]/g,function(Ul){for(var Wl=Ul.charCodeAt(0).toString(16);Wl.length<4;)Wl="0"+Wl;return"\\u"+Wl})+"'":"'"+es+"'"};dn.push(Yn(Ft.url()).replace(/[[{}\]]/g,"\\$&"));var or="GET",Sr=[],Gr=Ft.requestFormData();Gr&&(Sr.push("--data-raw "+Yn(Gr)),Sn["content-length"]=!0,or="POST"),Ft.requestMethod!==or&&dn.push("-X "+Yn(Ft.requestMethod));for(var co=Ft.requestHeaders(),po=0;po<co.length;po++){var yo=co[po],ts=yo.name.replace(/^:/,"");Sn[ts.toLowerCase()]||dn.push("-H "+Yn(ts+": "+yo.value))}return(dn=dn.concat(Sr)).push("--compressed"),"curl "+dn.join(dn.length>=3?tn==="win"?` ^
  `:` \\
  `:" ")}({requestMethod:Tt.method,url:function(){return Tt.url},requestFormData:function(){return Tt.data},requestHeaders:function(){var Ft=Tt.reqHeaders||{};return Ln()(Ft,{"User-Agent":navigator.userAgent,Referer:location.href}),gn()(Ft,function(tn,dn){return{name:dn,value:tn}})}})),vt._container.notify("Copied")}),(0,gt.Z)((0,ot.Z)(vt),"_toggleRecording",function(){vt._$control.find(qt(".record")).toggleClass(qt("recording")),vt._isRecording=!vt._isRecording}),(0,gt.Z)((0,ot.Z)(vt),"_showDetail",function(){vt._selectedRequest&&(vt._splitMode&&vt._$network.css("width","50%"),vt._detail.show(vt._selectedRequest))}),(0,gt.Z)((0,ot.Z)(vt),"_updateScale",function(Tt){vt._splitMediaQuery.setQuery("screen and (min-width: ".concat(680*Tt,"px)"))}),vt._style=An(o(3180)),vt.name="network",vt._requests={},vt._selectedRequest=null,vt._isRecording=!0,vt}return(0,$.Z)(Lt,[{key:"init",value:function(vt,Tt){(0,Et.Z)((0,dt.Z)(Lt.prototype),"init",this).call(this,vt),this._container=Tt,this._initTpl(),this._detail=new Il(this._$detail,Tt),this._splitMediaQuery=new(mr())("screen and (min-width: 680px)"),this._splitMode=this._splitMediaQuery.isMatch(),this._requestDataGrid=new rn.Z(this._$requests.get(0),{columns:[{id:"name",title:"Name",sortable:!0,weight:30},{id:"method",title:"Method",sortable:!0,weight:14},{id:"status",title:"Status",sortable:!0,weight:14},{id:"type",title:"Type",sortable:!0,weight:14},{id:"size",title:"Size",sortable:!0,weight:14},{id:"time",title:"Time",sortable:!0,weight:14}]}),this._resizeSensor=new(nr())(vt.get(0)),this._bindEvent()}},{key:"show",value:function(){(0,Et.Z)((0,dt.Z)(Lt.prototype),"show",this).call(this),this._updateDataGridHeight()}},{key:"clear",value:function(){this._requests={},this._requestDataGrid.clear()}},{key:"requests",value:function(){var vt=[];return Gt()(this._requests,function(Tt){vt.push(Tt)}),vt}},{key:"_updateDataGridHeight",value:function(){var vt=this._$el.offset().height-this._$control.offset().height;this._requestDataGrid.setOption({minHeight:vt,maxHeight:vt})}},{key:"_updateType",value:function(vt){var Tt=function(dn){if(!dn)return"unknown";var Sn=dn.split(";")[0].split("/");return{type:Sn[0],subType:ir()(Sn)}}(vt.resHeaders["content-type"]||""),Ft=Tt.type,tn=Tt.subType;vt.type=Ft,vt.subType=tn}},{key:"_updateButtons",value:function(){var vt=this._$control,Tt=vt.find(qt(".show-detail")),Ft=vt.find(qt(".copy-curl")),tn=qt("icon-disabled");Tt.addClass(tn),Ft.addClass(tn),this._selectedRequest&&(Tt.rmClass(tn),Ft.rmClass(tn))}},{key:"_bindEvent",value:function(){var vt=this,Tt=this._$control,Ft=this._$filterText,tn=this._requestDataGrid,dn=this;Tt.on("click",qt(".clear-request"),function(){return vt.clear()}).on("click",qt(".show-detail"),this._showDetail).on("click",qt(".copy-curl"),this._copyCurl).on("click",qt(".record"),this._toggleRecording).on("click",qt(".filter"),function(){Io.Z.prompt("Filter").then(function(Yn){Rs()(Yn)||(Ft.text(Yn),tn.setOption("filter",Vr()(Yn)))})}),tn.on("select",function(Yn){var or=xt()(Yn.container).data("id"),Sr=dn._requests[or];vt._selectedRequest=Sr,vt._updateButtons(),vt._splitMode&&vt._showDetail()}),tn.on("deselect",function(){vt._selectedRequest=null,vt._updateButtons(),vt._detail.hide()}),this._resizeSensor.addListener(Kl()(function(){return vt._updateDataGridHeight()},15)),this._splitMediaQuery.on("match",function(){vt._detail.hide(),vt._splitMode=!0}),this._splitMediaQuery.on("unmatch",function(){vt._detail.hide(),vt._splitMode=!1}),this._detail.on("hide",function(){vt._splitMode&&vt._$network.css("width","100%")}),zt.domain("Network").enable();var Sn=zt.domain("Network");Sn.on("requestWillBeSent",this._reqWillBeSent),Sn.on("responseReceivedExtraInfo",this._resReceivedExtraInfo),Sn.on("responseReceived",this._resReceived),Sn.on("loadingFinished",this._loadingFinished),Ct.on(Ct.SCALE,this._updateScale)}},{key:"destroy",value:function(){(0,Et.Z)((0,dt.Z)(Lt.prototype),"destroy",this).call(this),this._resizeSensor.destroy(),An.remove(this._style),this._splitMediaQuery.removeAllListeners();var vt=zt.domain("Network");vt.off("requestWillBeSent",this._reqWillBeSent),vt.off("responseReceivedExtraInfo",this._resReceivedExtraInfo),vt.off("responseReceived",this._resReceived),vt.off("loadingFinished",this._loadingFinished),Ct.off(Ct.SCALE,this._updateScale)}},{key:"_initTpl",value:function(){var vt=this._$el;vt.html(qt(`<div class="network">
        <div class="control">
          <span class="icon-record record recording"></span>
          <span class="icon-clear clear-request"></span>
          <span class="icon-eye icon-disabled show-detail"></span>
          <span class="icon-copy icon-disabled copy-curl"></span>
          <span class="filter-text"></span>
          <span class="icon-filter filter"></span>
        </div>
        <div class="requests"></div>
      </div>
      <div class="detail"></div>`)),this._$network=vt.find(qt(".network")),this._$detail=vt.find(qt(".detail")),this._$requests=vt.find(qt(".requests")),this._$control=vt.find(qt(".control")),this._$filterText=vt.find(qt(".filter-text"))}}]),Lt}(_t),to=o(9833),oo=o.n(to),lo=o(9956),hr=o.n(lo),uo=o(8209),Go=o(3063),hs=o.n(Go),bo=o(3487),zo=o.n(bo),Vo=o(42),ds=o.n(Vo),Ho=o(4696),Bs=o.n(Ho),rs=o(7653),Qo=o.n(rs),Os=o(8613),js=o.n(Os),Nr=o(2289),fs=o.n(Nr),xa=o(3629),Fl=o.n(xa);function Ys(Yt){for(var Zt={},Lt=0,vt=Yt.length;Lt<vt;Lt++){var Tt=Yt[Lt];Yt[Tt]!=="initial"&&(Zt[Tt]=Yt[Tt])}return function(Ft){return Fl()(Ft,{comparator:function(tn,dn){for(var Sn=tn.length,Yn=dn.length,or=Sn>Yn?Yn:Sn,Sr=0;Sr<or;Sr++){var Gr=Lo(tn.charCodeAt(Sr),dn.charCodeAt(Sr));if(Gr!==0)return Gr}return Sn>Yn?1:Sn<Yn?-1:0}})}(Zt)}var ao=Element.prototype,$s=function(){return!1};ao.webkitMatchesSelector?$s=function(Yt,Zt){return Yt.webkitMatchesSelector(Zt)}:ao.mozMatchesSelector&&($s=function(Yt,Zt){return Yt.mozMatchesSelector(Zt)});var So=function(){function Yt(Zt){(0,j.Z)(this,Yt),this._el=Zt}return(0,$.Z)(Yt,[{key:"getComputedStyle",value:function(){return Ys(window.getComputedStyle(this._el))}},{key:"getMatchedCSSRules",value:function(){var Zt=this,Lt=[];return Gt()(document.styleSheets,function(vt){try{if(!vt.cssRules)return}catch{return}Gt()(vt.cssRules,function(Tt){var Ft=!1;try{Ft=Zt._elMatchesSel(Tt.selectorText)}catch{}Ft&&Lt.push({selectorText:Tt.selectorText,style:Ys(Tt.style)})})}),Lt}},{key:"_elMatchesSel",value:function(Zt){return $s(this._el,Zt)}}]),Yt}();function Lo(Yt,Zt){return(Yt=Bl(Yt))>(Zt=Bl(Zt))?1:Yt<Zt?-1:0}function Bl(Yt){return Yt===45?123:Yt}var Ss=o(422);function Fo(Yt){var Zt=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).noAttr,Lt=Zt!==void 0&&Zt;if(Yt.nodeType===Node.TEXT_NODE)return'<span class="'.concat(qt("tag-name-color"),'">(text)</span>');if(Yt.nodeType===Node.COMMENT_NODE)return'<span class="'.concat(qt("tag-name-color"),'"><!--></span>');var vt=Yt.id,Tt=Yt.className,Ft=Yt.attributes,tn='<span class="eruda-tag-name-color">'.concat(Yt.tagName.toLowerCase(),"</span>");if(vt!==""&&(tn+='<span class="eruda-function-color">#'.concat(vt,"</span>")),Ut()(Tt)){var dn="";Gt()(Tt.split(/\s+/g),function(Sn){Sn.trim()!==""&&(dn+=".".concat(Sn))}),tn+='<span class="eruda-attribute-name-color">'.concat(dn,"</span>")}return Lt||Gt()(Ft,function(Sn){var Yn=Sn.name;Yn!=="id"&&Yn!=="class"&&Yn!=="style"&&(tn+=' <span class="eruda-attribute-name-color">'.concat(Yn,'</span><span class="eruda-operator-color">="</span><span class="eruda-string-color">').concat(Sn.value,'</span><span class="eruda-operator-color">"</span>'))}),tn}var Xs=function(){function Yt(Zt,Lt){var vt=this;(0,j.Z)(this,Yt),(0,gt.Z)(this,"hide",function(){vt._$container.hide(),vt._disableObserver(),zt.domain("Overlay").hideHighlight()}),this._$container=Zt,this._devtools=Lt,this._curEl=document.documentElement,this._bindEvent(),this._initObserver(),this._initCfg(),this._initTpl()}return(0,$.Z)(Yt,[{key:"show",value:function(Zt){this._curEl=Zt,this._rmDefComputedStyle=!0,this._computedStyleSearchKeyword="",this._enableObserver(),this._render();var Lt=zt.domain("DOM").getNodeId({node:Zt}).nodeId;zt.domain("Overlay").highlightNode({nodeId:Lt,highlightConfig:{showInfo:!0,contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)"}})}},{key:"destroy",value:function(){this._disableObserver(),this.restoreEventTarget(),this._rmCfg()}},{key:"overrideEventTarget",value:function(){var Zt=Ur(),Lt=this._origAddEvent=Zt.addEventListener,vt=this._origRmEvent=Zt.removeEventListener;Zt.addEventListener=function(Tt,Ft,tn){(function(dn,Sn,Yn){var or=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(!(!oo()(dn)||!is()(Yn)||!Bs()(or))){var Sr=dn.erudaEvents=dn.erudaEvents||{};Sr[Sn]=Sr[Sn]||[],Sr[Sn].push({listener:Yn,listenerStr:Yn.toString(),useCapture:or})}})(this,Tt,Ft,tn),Lt.apply(this,arguments)},Zt.removeEventListener=function(Tt,Ft,tn){(function(dn,Sn,Yn){var or=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(!(!oo()(dn)||!is()(Yn)||!Bs()(or))){var Sr=dn.erudaEvents;if(!(!Sr||!Sr[Sn])){for(var Gr=Sr[Sn],co=0,po=Gr.length;co<po;co++)if(Gr[co].listener===Yn){Gr.splice(co,1);break}Gr.length===0&&delete Sr[Sn],sn()(Sr).length===0&&delete dn.erudaEvents}}})(this,Tt,Ft,tn),vt.apply(this,arguments)}}},{key:"restoreEventTarget",value:function(){var Zt=Ur();this._origAddEvent&&(Zt.addEventListener=this._origAddEvent),this._origRmEvent&&(Zt.removeEventListener=this._origRmEvent)}},{key:"_initTpl",value:function(){var Zt=this._$container,Lt='<div class="'.concat(qt("control"),`">
      <span class="`).concat(qt("icon-arrow-left back"),`"></span>
      <span class="`).concat(qt("element-name"),`"></span>
      <span class="`).concat(qt("icon-refresh refresh"),`"></span>
    </div>
    <div class="`).concat(qt("element"),`">
      <div class="`).concat(qt("attributes section"),`"></div>
      <div class="`).concat(qt("styles section"),`"></div>
      <div class="`).concat(qt("computed-style section"),`"></div>
      <div class="`).concat(qt("listeners section"),`"></div>
    </div>`);Zt.html(Lt),this._$elementName=Zt.find(qt(".element-name")),this._$attributes=Zt.find(qt(".attributes")),this._$styles=Zt.find(qt(".styles")),this._$listeners=Zt.find(qt(".listeners")),this._$computedStyle=Zt.find(qt(".computed-style"));var vt=js()("div");this._$boxModel=xt()(vt),this._boxModel=new Ss.Z(vt)}},{key:"_toggleAllComputedStyle",value:function(){this._rmDefComputedStyle=!this._rmDefComputedStyle,this._render()}},{key:"_render",value:function(){var Zt=this._getData(this._curEl),Lt=this._$attributes,vt=this._$elementName,Tt=this._$styles,Ft=this._$computedStyle,tn=this._$listeners;vt.html(Zt.name);var dn="<tr><td>Empty</td></tr>";Mo()(Zt.attributes)||(dn=gn()(Zt.attributes,function(co){var po=co.name,yo=co.value;return`<tr>
          <td class="`.concat(qt("attribute-name-color"),'">').concat(ro()(po),`</td>
          <td class="`).concat(qt("string-color"),'">').concat(yo,`</td>
        </tr>`)}).join("")),dn=`<h2>Attributes</h2>
    <div class="`.concat(qt("table-wrapper"),`">
      <table>
        <tbody>
          `).concat(dn,` 
        </tbody>
      </table>
    </div>`),Lt.html(dn);var Sn="";if(Mo()(Zt.styles))Tt.hide();else{var Yn=gn()(Zt.styles,function(co){var po=co.selectorText,yo=co.style;return yo=gn()(yo,function(ts,es){return'<div class="'.concat(qt("rule"),'"><span>').concat(ro()(es),"</span>: ").concat(ts,";</div>")}).join(""),'<div class="'.concat(qt("style-rules"),`">
          <div>`).concat(ro()(po),` {</div>
            `).concat(yo,`
          <div>}</div>
        </div>`)}).join("");Sn=`<h2>Styles</h2>
      <div class="`.concat(qt("style-wrapper"),`">
        `).concat(Yn,`
      </div>`),Tt.html(Sn).show()}var or="";if(Zt.computedStyle){var Sr=qt(`<div class="btn toggle-all-computed-style">
        <span class="icon-expand"></span>
      </div>`);Zt.rmDefComputedStyle&&(Sr=qt(`<div class="btn toggle-all-computed-style">
          <span class="icon-compress"></span>
        </div>`)),or=`<h2>
        Computed Style
        `.concat(Sr,`
        <div class="`).concat(qt("btn computed-style-search"),`">
          <span class="`).concat(qt("icon-filter"),`"></span>
        </div>
        `).concat(Zt.computedStyleSearchKeyword?'<div class="'.concat(qt("btn filter-text"),'">').concat(ro()(Zt.computedStyleSearchKeyword),"</div>"):"",`
      </h2>
      <div class="`).concat(qt("box-model"),`"></div>
      <div class="`).concat(qt("table-wrapper"),`">
        <table>
          <tbody>
          `).concat(gn()(Zt.computedStyle,function(co,po){return`<tr>
              <td class="`.concat(qt("key"),'">').concat(ro()(po),`</td>
              <td>`).concat(co,`</td>
            </tr>`)}).join(""),`
          </tbody>
        </table>
      </div>`),Ft.html(or).show(),this._boxModel.setOption("element",this._curEl),Ft.find(qt(".box-model")).append(this._$boxModel.get(0))}else Ft.text("").hide();var Gr="";Zt.listeners?(Gr=gn()(Zt.listeners,function(co,po){return co=gn()(co,function(yo){var ts=yo.useCapture,es=yo.listenerStr;return"<li ".concat(ts?'class="'.concat(qt("capture"),'"'):"",">").concat(ro()(es),"</li>")}).join(""),'<div class="'.concat(qt("listener"),`">
          <div class="`).concat(qt("listener-type"),'">').concat(ro()(po),`</div>
          <ul class="`).concat(qt("listener-content"),`">
            `).concat(co,`
          </ul>
        </div>`)}).join(""),Gr=`<h2>Event Listeners</h2>
      <div class="`.concat(qt("listener-wrapper"),`">
        `).concat(Gr,` 
      </div>`),tn.html(Gr).show()):tn.hide(),this._$container.show()}},{key:"_getData",value:function(Zt){var Lt={},vt=new So(Zt),Tt=Zt.className,Ft=Zt.id,tn=Zt.attributes,dn=Zt.tagName;Lt.computedStyleSearchKeyword=this._computedStyleSearchKeyword,Lt.attributes=bs(tn),Lt.name=Fo({tagName:dn,id:Ft,className:Tt,attributes:tn});var Sn=Zt.erudaEvents;if(Sn&&sn()(Sn).length!==0&&(Lt.listeners=Sn),xo(dn))return Lt;var Yn=vt.getComputedStyle(),or=vt.getMatchedCSSRules();or.unshift(function(Gr){for(var co={selectorText:"element.style",style:{}},po=0,yo=Gr.length;po<yo;po++){var ts=Gr[po];co.style[ts]=Gr[ts]}return co}(Zt.style)),or.forEach(function(Gr){return tu(Gr.style)}),Lt.styles=or,this._rmDefComputedStyle&&(Yn=function(Gr,co){var po={},yo=["display","width","height"];return Gt()(co,function(ts){yo=yo.concat(sn()(ts.style))}),yo=ds()(yo),Gt()(Gr,function(ts,es){jt()(yo,es)&&(po[es]=ts)}),po}(Yn,or)),Lt.rmDefComputedStyle=this._rmDefComputedStyle;var Sr=hs()(Lt.computedStyleSearchKeyword);return Sr&&(Yn=zo()(Yn,function(Gr,co){return jt()(co,Sr)||jt()(Gr,Sr)})),tu(Yn),Lt.computedStyle=Yn,Lt}},{key:"_bindEvent",value:function(){var Zt=this,Lt=this._devtools;this._$container.on("click",qt(".toggle-all-computed-style"),function(){return Zt._toggleAllComputedStyle()}).on("click",qt(".computed-style-search"),function(){Io.Z.prompt("Filter").then(function(vt){Rs()(vt)||(vt=Vr()(vt),Zt._computedStyleSearchKeyword=vt,Zt._render())})}).on("click",".eruda-listener-content",function(){var vt=xt()(this).text(),Tt=Lt.get("sources");Tt&&(Tt.set("js",vt),Lt.showTool("sources"))}).on("click",qt(".element-name"),function(){var vt=Lt.get("sources");vt&&(vt.set("object",Zt._curEl),Lt.showTool("sources"))}).on("click",qt(".back"),this.hide).on("click",qt(".refresh"),function(){Zt._render(),Lt.notify("Refreshed")})}},{key:"_initObserver",value:function(){var Zt=this;this._observer=new(fs())(function(Lt){Gt()(Lt,function(vt){return Zt._handleMutation(vt)})})}},{key:"_enableObserver",value:function(){this._observer.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}},{key:"_handleMutation",value:function(Zt){if(!Fn(Zt.target)&&Zt.type==="attributes"){if(Zt.target!==this._curEl)return;this._render()}}},{key:"_rmCfg",value:function(){var Zt=this.config,Lt=this._devtools.get("settings");Lt&&Lt.remove(Zt,"overrideEventTarget").remove(Zt,"observeElement").remove("Elements")}},{key:"_initCfg",value:function(){var Zt=this,Lt=this.config=Dn.createCfg("elements",{overrideEventTarget:!0});Lt.get("overrideEventTarget")&&this.overrideEventTarget(),Lt.on("change",function(Tt,Ft){if(Tt==="overrideEventTarget")return Ft?Zt.overrideEventTarget():Zt.restoreEventTarget()});var vt=this._devtools.get("settings");vt&&(vt.text("Elements").switch(Lt,"overrideEventTarget","Catch Event Listeners"),vt.separator())}}]),Yt}();function tu(Yt){Gt()(Yt,function(Zt,Lt){return Yt[Lt]=Ro(Zt)})}var bs=function(Yt){return gn()(Yt,function(Zt){var Lt=Zt.value,vt=Zt.name;return Lt=ro()(Lt),(vt==="src"||vt==="href")&&!Eo()(Lt,"data")&&(Lt=Uo(Lt)),vt==="style"&&(Lt=Ro(Lt)),{name:vt,value:Lt}})},Ko=/rgba?\((.*?)\)/g,Po=/url\("?(.*?)"?\)/g;function Ro(Yt){return(Yt=Xt()(Yt)).replace(Ko,'<span class="eruda-style-color" style="background-color: $&"></span>$&').replace(Po,function(Zt,Lt){return'url("'.concat(Uo(Lt),'")')})}var No=["script","style","meta","title","link","head"],xo=function(Yt){return No.indexOf(Yt.toLowerCase())>-1},Uo=function(Yt){return'<a href="'.concat(Yt,'" target="_blank">').concat(Yt,"</a>")},Ur=function(){return Qo()(window,"EventTarget.prototype")||window.Node.prototype};function Ju(Yt){var Zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Lt,vt=(0,dt.Z)(Yt);if(Zt){var Tt=(0,dt.Z)(this).constructor;Lt=Reflect.construct(vt,arguments,Tt)}else Lt=vt.apply(this,arguments);return(0,pt.Z)(this,Lt)}}var _h=function(Yt){(0,ht.Z)(Lt,Yt);var Zt=Ju(Lt);function Lt(){var vt;return(0,j.Z)(this,Lt),vt=Zt.call(this),(0,gt.Z)((0,ot.Z)(vt),"_showDetail",function(){vt._isShow&&vt._curNode&&(vt._curNode.nodeType===Node.ELEMENT_NODE?vt._detail.show(vt._curNode):vt._detail.show(vt._curNode.parentNode))}),(0,gt.Z)((0,ot.Z)(vt),"_back",function(){if(vt._curNode!==vt._htmlEl){for(var Tt=vt._curParentQueue,Ft=Tt.shift();!Mu(Ft);)Ft=Tt.shift();vt.set(Ft)}}),(0,gt.Z)((0,ot.Z)(vt),"_updateScale",function(Tt){vt._splitMediaQuery.setQuery("screen and (min-width: ".concat(680*Tt,"px)"))}),(0,gt.Z)((0,ot.Z)(vt),"_deleteNode",function(){var Tt=vt._curNode;Tt.parentNode&&Tt.parentNode.removeChild(Tt)}),(0,gt.Z)((0,ot.Z)(vt),"_copyNode",function(){var Tt=vt._curNode;Tt.nodeType===Node.ELEMENT_NODE?ws()(Tt.outerHTML):ws()(Tt.nodeValue),vt._container.notify("Copied")}),(0,gt.Z)((0,ot.Z)(vt),"_toggleSelect",function(){vt._$el.find(qt(".select")).toggleClass(qt("active")),vt._selectElement=!vt._selectElement,vt._selectElement?(zt.domain("Overlay").setInspectMode({mode:"searchForNode",highlightConfig:{showInfo:!hr()(),showRulers:!1,showAccessibilityInfo:!hr()(),showExtensionLines:!1,contrastAlgorithm:"aa",contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)"}}),vt._container.hide()):(zt.domain("Overlay").setInspectMode({mode:"none"}),zt.domain("Overlay").hideHighlight())}),(0,gt.Z)((0,ot.Z)(vt),"_inspectNodeRequested",function(Tt){var Ft=Tt.backendNodeId;vt._container.show(),vt._toggleSelect();var tn=zt.domain("DOM").getNode({nodeId:Ft}).node;vt.select(tn)}),(0,gt.Z)((0,ot.Z)(vt),"_setNode",function(Tt){if(Tt!==vt._curNode){vt._curNode=Tt,vt._renderCrumbs();for(var Ft=[],tn=Tt.parentNode;tn;)Ft.push(tn),tn=tn.parentNode;vt._curParentQueue=Ft,vt._splitMode&&vt._showDetail(),vt._updateButtons(),vt._updateHistory()}}),vt._style=An(o(5896)),vt.name="elements",vt._selectElement=!1,vt._observeElement=!0,vt._history=[],bt().mixin((0,ot.Z)(vt)),vt}return(0,$.Z)(Lt,[{key:"init",value:function(vt,Tt){var Ft=this;(0,Et.Z)((0,dt.Z)(Lt.prototype),"init",this).call(this,vt),this._container=Tt,this._initTpl(),this._htmlEl=document.documentElement,this._detail=new Xs(this._$detail,Tt),this.config=this._detail.config,this._splitMediaQuery=new(mr())("screen and (min-width: 680px)"),this._splitMode=this._splitMediaQuery.isMatch(),this._domViewer=new uo.Z(this._$domViewer.get(0),{node:this._htmlEl,ignore:function(tn){return Fn(tn)||er(tn)}}),this._domViewer.expand(),this._bindEvent(),zt.domain("Overlay").enable(),lr()(function(){return Ft._updateHistory()})}},{key:"show",value:function(){(0,Et.Z)((0,dt.Z)(Lt.prototype),"show",this).call(this),this._isShow=!0,this._curNode?this._splitMode&&this._showDetail():this.select(document.body)}},{key:"hide",value:function(){(0,Et.Z)((0,dt.Z)(Lt.prototype),"hide",this).call(this),this._isShow=!1,zt.domain("Overlay").hideHighlight()}},{key:"set",value:function(vt){return this.select(vt)}},{key:"select",value:function(vt){return this._domViewer.select(vt),this._setNode(vt),this.emit("change",vt),this}},{key:"destroy",value:function(){(0,Et.Z)((0,dt.Z)(Lt.prototype),"destroy",this).call(this),Ct.off(Ct.SCALE,this._updateScale),An.remove(this._style),this._detail.destroy(),zt.domain("Overlay").off("inspectNodeRequested",this._inspectNodeRequested),zt.domain("Overlay").disable(),this._splitMediaQuery.removeAllListeners()}},{key:"_updateButtons",value:function(){var vt=this._$control,Tt=vt.find(qt(".show-detail")),Ft=vt.find(qt(".copy-node")),tn=vt.find(qt(".delete-node")),dn=qt("icon-disabled");Tt.addClass(dn),Ft.addClass(dn),tn.addClass(dn);var Sn=this._curNode;Sn&&(Sn!==document.documentElement&&Sn!==document.body&&tn.rmClass(dn),Ft.rmClass(dn),Sn.nodeType===Node.ELEMENT_NODE&&Tt.rmClass(dn))}},{key:"_initTpl",value:function(){var vt=this._$el;vt.html(qt(`<div class="elements">
        <div class="control">
          <span class="icon icon-select select"></span>
          <span class="icon icon-eye show-detail"></span>
          <span class="icon icon-copy copy-node"></span>
          <span class="icon icon-delete delete-node"></span>
        </div>
        <div class="dom-viewer-container">
          <div class="dom-viewer"></div>
        </div>
        <div class="crumbs"></div>
      </div>
      <div class="detail"></div>`)),this._$detail=vt.find(qt(".detail")),this._$domViewer=vt.find(qt(".dom-viewer")),this._$control=vt.find(qt(".control")),this._$crumbs=vt.find(qt(".crumbs"))}},{key:"_renderCrumbs",value:function(){var vt=function(Ft){for(var tn=[],dn=0;Ft;)tn.push({text:Fo(Ft,{noAttr:!0}),idx:dn++}),Ft=Ft.parentElement;return tn.reverse()}(this._curNode),Tt="";Mo()(vt)||(Tt=gn()(vt,function(Ft){var tn=Ft.text,dn=Ft.idx;return'<li class="'.concat(qt("crumb"),'" data-idx="').concat(dn,'">').concat(tn,"</div></li>")}).join("")),this._$crumbs.html(Tt)}},{key:"_bindEvent",value:function(){var vt=this,Tt=this;this._$el.on("click",qt(".crumb"),function(){for(var Ft=Wr()(xt()(this).data("idx")),tn=Tt._curNode;Ft--&&tn.parentElement;)tn=tn.parentElement;Mu(tn)&&Tt.select(tn)}),this._$control.on("click",qt(".select"),this._toggleSelect).on("click",qt(".show-detail"),this._showDetail).on("click",qt(".copy-node"),this._copyNode).on("click",qt(".delete-node"),this._deleteNode),this._domViewer.on("select",this._setNode).on("deselect",this._back),zt.domain("Overlay").on("inspectNodeRequested",this._inspectNodeRequested),this._splitMediaQuery.on("match",function(){vt._splitMode=!0,vt._showDetail()}),this._splitMediaQuery.on("unmatch",function(){vt._splitMode=!1,vt._detail.hide()}),Ct.on(Ct.SCALE,this._updateScale)}},{key:"_updateHistory",value:function(){var vt=this._container.get("console");if(vt){var Tt=this._history;Tt.unshift(this._curNode),Tt.length>5&&Tt.pop();for(var Ft=0;Ft<5;Ft++)vt.setGlobal("$".concat(Ft),Tt[Ft])}}}]),Lt}(_t),Mu=function(Yt){return oo()(Yt)&&Yt.parentNode},_d=o(8847),_f=o.n(_d),jo=o(9622),Ol=o.n(jo),Jo=null,tp=[{name:"Border All",fn:function(){if(Jo)return An.remove(Jo),void(Jo=null);Jo=An("* { outline: 2px dashed #707d8b; outline-offset: -3px; }",document.head)},desc:"Add color borders to all elements"},{name:"Refresh Page",fn:function(){var Yt=new(Tr());Yt.setQuery("timestamp",_f()()),window.location.replace(Yt.toString())},desc:"Add timestamp to url and refresh"},{name:"Search Text",fn:function(){Io.Z.prompt("Enter the text").then(function(Yt){Yt&&Vr()(Yt)!==""&&function(Zt){var Lt=document.body,vt=new RegExp(Zt,"ig");ps(Lt,function(Tt){var Ft=xt()(Tt);if(Ft.hasClass("eruda-search-highlight-block"))return document.createTextNode(Ft.text())}),ps(Lt,function(Tt){if(Tt.nodeType===3){var Ft=Tt.nodeValue;if((Ft=Ft.replace(vt,function(dn){return'<span class="eruda-keyword">'.concat(dn,"</span>")}))!==Tt.nodeValue){var tn=xt()(document.createElement("div"));return tn.html(Ft),tn.addClass("eruda-search-highlight-block"),tn.get(0)}}})}(Yt)})},desc:"Highlight given text on page"},{name:"Edit Page",fn:function(){var Yt=document.body;Yt.contentEditable=Yt.contentEditable!=="true"},desc:"Toggle body contentEditable"},{name:"Fit Screen",fn:function(){var Yt=document.body,Zt=document.documentElement,Lt=xt()(Yt);if(Lt.data("scaled"))window.scrollTo(0,+Lt.data("scaled")),Lt.rmAttr("data-scaled"),Lt.css("transform","none");else{var vt=Math.max(Yt.scrollHeight,Yt.offsetHeight,Zt.clientHeight,Zt.scrollHeight,Zt.offsetHeight),Tt=Math.max(document.documentElement.clientHeight,window.innerHeight||0),Ft=Tt/vt;Lt.css("transform","scale(".concat(Ft,")")),Lt.data("scaled",window.scrollY),window.scrollTo(0,vt/2-Tt/2)}},desc:"Scale down the whole page to fit screen"},{name:"Load Monitor Plugin",fn:function(){os("monitor")},desc:"Display page fps and memory"},{name:"Load Features Plugin",fn:function(){os("features")},desc:"Browser feature detections"},{name:"Load Timing Plugin",fn:function(){os("timing")},desc:"Show performance and resource timing"},{name:"Load Code Plugin",fn:function(){os("code")},desc:"Edit and run JavaScript"},{name:"Load Benchmark Plugin",fn:function(){os("benchmark")},desc:"Run JavaScript benchmarks"},{name:"Load Geolocation Plugin",fn:function(){os("geolocation")},desc:"Test geolocation"},{name:"Load Orientation Plugin",fn:function(){os("orientation")},desc:"Test orientation api"},{name:"Load Touches Plugin",fn:function(){os("touches")},desc:"Visualize screen touches"}];function ps(Yt,Zt){var Lt=Yt.childNodes;if(!Fn(Yt)){for(var vt=0,Tt=Lt.length;vt<Tt;vt++){var Ft=ps(Lt[vt],Zt);Ft&&Yt.replaceChild(Ft,Lt[vt])}return Zt(Yt)}}function os(Yt){var Zt="eruda"+Ls()(Yt);if(!window[Zt]){var Lt=location.protocol;Eo()(Lt,"http")||(Lt="http:"),Ol()("".concat(Lt,"//cdn.jsdelivr.net/npm/eruda-").concat(Yt,"@").concat(bu[Yt]),function(vt){if(!vt||!window[Zt])return Hr.error("Fail to load plugin "+Yt);Ct.emit(Ct.ADD,window[Zt]),Ct.emit(Ct.SHOW,Yt)})}}An(o(7346),document.head);var bu={monitor:"1.0.0",features:"2.0.0",timing:"2.0.1",code:"2.1.0",benchmark:"2.0.1",geolocation:"2.0.0",dom:"2.0.0",orientation:"2.0.0",touches:"2.0.0"},Do=o(5852),zl=o.n(Do);function eu(Yt){var Zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Lt,vt=(0,dt.Z)(Yt);if(Zt){var Tt=(0,dt.Z)(this).constructor;Lt=Reflect.construct(vt,arguments,Tt)}else Lt=vt.apply(this,arguments);return(0,pt.Z)(this,Lt)}}var Es=function(Yt){(0,ht.Z)(Lt,Yt);var Zt=eu(Lt);function Lt(){var vt;return(0,j.Z)(this,Lt),(vt=Zt.call(this))._style=An(o(5571)),vt.name="snippets",vt._snippets=[],vt}return(0,$.Z)(Lt,[{key:"init",value:function(vt){(0,Et.Z)((0,dt.Z)(Lt.prototype),"init",this).call(this,vt),this._bindEvent(),this._addDefSnippets()}},{key:"destroy",value:function(){(0,Et.Z)((0,dt.Z)(Lt.prototype),"destroy",this).call(this),An.remove(this._style)}},{key:"add",value:function(vt,Tt,Ft){return this._snippets.push({name:vt,fn:Tt,desc:Ft}),this._render(),this}},{key:"remove",value:function(vt){return zl()(this._snippets,function(Tt){return Tt.name===vt}),this._render(),this}},{key:"run",value:function(vt){for(var Tt=this._snippets,Ft=0,tn=Tt.length;Ft<tn;Ft++)Tt[Ft].name===vt&&this._run(Ft);return this}},{key:"clear",value:function(){return this._snippets=[],this._render(),this}},{key:"_bindEvent",value:function(){var vt=this;this._$el.on("click",".eruda-run",function(){var Tt=xt()(this).data("idx");vt._run(Tt)})}},{key:"_run",value:function(vt){this._snippets[vt].fn.call(null)}},{key:"_addDefSnippets",value:function(){var vt=this;Gt()(tp,function(Tt){vt.add(Tt.name,Tt.fn,Tt.desc)})}},{key:"_render",value:function(){var vt=gn()(this._snippets,function(Tt,Ft){return'<div class="'.concat(qt("section run"),'" data-idx="').concat(Ft,`">
        <h2 class="`).concat(qt("name"),'">').concat(ro()(Tt.name),`
          <div class="`).concat(qt("btn"),`">
            <span class="`).concat(qt("icon-play"),`"></span>
          </div>
        </h2>
        <div class="`).concat(qt("description"),`">
          `).concat(ro()(Tt.desc),`
        </div>
      </div>`)}).join("");this._renderHtml(vt)}},{key:"_renderHtml",value:function(vt){vt!==this._lastHtml&&(this._lastHtml=vt,this._$el.html(vt))}}]),Lt}(_t),vo=o(4224),Fu=o.n(vo),Bu=o(8991),xu=o.n(Bu),Ou=o(1352),nu=o.n(Ou),ss=o(8099),zu=o.n(ss),Au=function(){function Yt(Zt,Lt,vt,Tt){var Ft=this;(0,j.Z)(this,Yt),(0,gt.Z)(this,"_updateGridHeight",function(tn){Ft._dataGrid.setOption({minHeight:60*tn,maxHeight:223*tn})}),this._type=Tt,this._$container=Zt,this._devtools=Lt,this._resources=vt,this._selectedItem=null,this._storeData=[],this._initTpl(),this._dataGrid=new rn.Z(this._$dataGrid.get(0),{columns:[{id:"key",title:"Key",weight:30},{id:"value",title:"Value",weight:90}],minHeight:60,maxHeight:223}),this._bindEvent()}return(0,$.Z)(Yt,[{key:"destroy",value:function(){Ct.off(Ct.SCALE,this._updateGridHeight)}},{key:"refresh",value:function(){var Zt=this._dataGrid;this._refreshStorage(),Zt.clear(),Gt()(this._storeData,function(Lt){var vt=Lt.key,Tt=Lt.val;Zt.append({key:vt,value:Tt},{selectable:!0})})}},{key:"_refreshStorage",value:function(){var Zt=this._resources,Lt=Zr(this._type,!1);if(Lt){var vt=[];Lt=JSON.parse(JSON.stringify(Lt)),Gt()(Lt,function(Tt,Ft){Ut()(Tt)&&(Zt.config.get("hideErudaSetting")&&(Eo()(Ft,"eruda")||Ft==="active-eruda")||vt.push({key:Ft,val:Ms()(Tt,200)}))}),this._storeData=vt}}},{key:"_updateButtons",value:function(){var Zt=this._$container,Lt=Zt.find(qt(".show-detail")),vt=Zt.find(qt(".delete-storage")),Tt=Zt.find(qt(".copy-storage")),Ft=qt("btn-disabled");Lt.addClass(Ft),vt.addClass(Ft),Tt.addClass(Ft),this._selectedItem&&(Lt.rmClass(Ft),vt.rmClass(Ft),Tt.rmClass(Ft))}},{key:"_initTpl",value:function(){var Zt=this._$container,Lt=this._type;Zt.html(qt(`<h2 class="title">
      `.concat(Lt==="local"?"Local":"Session",` Storage
      <div class="btn refresh-storage">
        <span class="icon icon-refresh"></span>
      </div>
      <div class="btn show-detail btn-disabled">
        <span class="icon icon-eye"></span>
      </div>
      <div class="btn copy-storage btn-disabled">
        <span class="icon icon-copy"></span>
      </div>
      <div class="btn delete-storage btn-disabled">
        <span class="icon icon-delete"></span>
      </div>
      <div class="btn clear-storage">
        <span class="icon icon-clear"></span>
      </div>
      <div class="btn filter">
        <span class="icon icon-filter"></span>
      </div>
      <div class="btn filter-text"></div>
    </h2>
    <div class="data-grid"></div>`))),this._$dataGrid=Zt.find(qt(".data-grid")),this._$filterText=Zt.find(qt(".filter-text"))}},{key:"_getVal",value:function(Zt){return this._type==="local"?localStorage.getItem(Zt):sessionStorage.getItem(Zt)}},{key:"_bindEvent",value:function(){var Zt=this,Lt=this._type,vt=this._devtools;function Tt(Ft,tn){var dn=vt.get("sources");if(dn)return dn.set(Ft,tn),vt.showTool("sources"),!0}this._$container.on("click",qt(".refresh-storage"),function(){vt.notify("Refreshed"),Zt.refresh()}).on("click",qt(".clear-storage"),function(){Gt()(Zt._storeData,function(Ft){Lt==="local"?localStorage.removeItem(Ft.key):sessionStorage.removeItem(Ft.key)}),Zt.refresh()}).on("click",qt(".show-detail"),function(){var Ft=Zt._selectedItem,tn=Zt._getVal(Ft);try{Tt("object",JSON.parse(tn))}catch{Tt("raw",tn)}}).on("click",qt(".copy-storage"),function(){var Ft=Zt._selectedItem;ws()(Zt._getVal(Ft)),vt.notify("Copied")}).on("click",qt(".filter"),function(){Io.Z.prompt("Filter").then(function(Ft){Rs()(Ft)||(Ft=Vr()(Ft),Zt._$filterText.text(Ft),Zt._dataGrid.setOption("filter",Ft))})}).on("click",qt(".delete-storage"),function(){var Ft=Zt._selectedItem;Lt==="local"?localStorage.removeItem(Ft):sessionStorage.removeItem(Ft),Zt.refresh()}),this._dataGrid.on("select",function(Ft){Zt._selectedItem=Ft.data.key,Zt._updateButtons()}).on("deselect",function(){Zt._selectedItem=null,Zt._updateButtons()}),Ct.on(Ct.SCALE,this._updateGridHeight)}}]),Yt}();function Ll(Yt,Zt){Yt.rmClass(qt("ok")).rmClass(qt("danger")).rmClass(qt("warn")).addClass(qt(Zt))}function Nl(Yt,Zt){if(Zt===0)return"";var Lt=0,vt=0;switch(Yt){case"cookie":Lt=30,vt=60;break;case"script":Lt=5,vt=10;break;case"stylesheet":Lt=4,vt=8;break;case"image":Lt=50,vt=100}return Zt>=vt?"danger":Zt>=Lt?"warn":"ok"}var Lu=function(){function Yt(Zt,Lt){(0,j.Z)(this,Yt),this._$container=Zt,this._devtools=Lt,this._selectedItem=null,this._initTpl(),this._dataGrid=new rn.Z(this._$dataGrid.get(0),{columns:[{id:"key",title:"Key",weight:30},{id:"value",title:"Value",weight:90}],minHeight:60,maxHeight:223}),this._bindEvent()}return(0,$.Z)(Yt,[{key:"refresh",value:function(){var Zt=this._$container,Lt=this._dataGrid,vt=zt.domain("Network").getCookies().cookies,Tt=gn()(vt,function(Ft){return{key:Ft.name,val:Ft.value}});Lt.clear(),Gt()(Tt,function(Ft){var tn=Ft.key,dn=Ft.val;Lt.append({key:tn,value:dn},{selectable:!0})}),Ll(Zt,Nl("cookie",Tt.length))}},{key:"_initTpl",value:function(){var Zt=this._$container;Zt.html(qt(`<h2 class="title">
      Cookie
      <div class="btn refresh-cookie">
        <span class="icon-refresh"></span>
      </div>
      <div class="btn show-detail btn-disabled">
        <span class="icon icon-eye"></span>
      </div>
      <div class="btn copy-cookie btn-disabled">
        <span class="icon icon-copy"></span>
      </div>
      <div class="btn delete-cookie btn-disabled">
        <span class="icon icon-delete"></span>
      </div>
      <div class="btn clear-cookie">
        <span class="icon-clear"></span>
      </div>
      <div class="btn filter" data-type="cookie">
        <span class="icon-filter"></span>
      </div>
      <div class="btn filter-text"></div>
    </h2>
    <div class="data-grid"></div>`)),this._$dataGrid=Zt.find(qt(".data-grid")),this._$filterText=Zt.find(qt(".filter-text"))}},{key:"_updateButtons",value:function(){var Zt=this._$container,Lt=Zt.find(qt(".show-detail")),vt=Zt.find(qt(".delete-cookie")),Tt=Zt.find(qt(".copy-cookie")),Ft=qt("btn-disabled");Lt.addClass(Ft),vt.addClass(Ft),Tt.addClass(Ft),this._selectedItem&&(Lt.rmClass(Ft),vt.rmClass(Ft),Tt.rmClass(Ft))}},{key:"_getVal",value:function(Zt){for(var Lt=zt.domain("Network").getCookies().cookies,vt=0,Tt=Lt.length;vt<Tt;vt++)if(Lt[vt].name===Zt)return Lt[vt].value;return""}},{key:"_bindEvent",value:function(){var Zt=this,Lt=this._devtools;function vt(Tt,Ft){var tn=Lt.get("sources");if(tn)return tn.set(Tt,Ft),Lt.showTool("sources"),!0}this._$container.on("click",qt(".refresh-cookie"),function(){Lt.notify("Refreshed"),Zt.refresh()}).on("click",qt(".clear-cookie"),function(){zt.domain("Storage").clearDataForOrigin({storageTypes:"cookies"}),Zt.refresh()}).on("click",qt(".delete-cookie"),function(){var Tt=Zt._selectedItem;zt.domain("Network").deleteCookies({name:Tt}),Zt.refresh()}).on("click",qt(".show-detail"),function(){var Tt=Zt._selectedItem,Ft=Zt._getVal(Tt);try{vt("object",JSON.parse(Ft))}catch{vt("raw",Ft)}}).on("click",qt(".copy-cookie"),function(){var Tt=Zt._selectedItem;ws()(Zt._getVal(Tt)),Lt.notify("Copied")}).on("click",qt(".filter"),function(){Io.Z.prompt("Filter").then(function(Tt){Rs()(Tt)||(Tt=Vr()(Tt),Zt._filter=Tt,Zt._$filterText.text(Tt),Zt._dataGrid.setOption("filter",Tt))})}),this._dataGrid.on("select",function(Tt){Zt._selectedItem=Tt.data.key,Zt._updateButtons()}).on("deselect",function(){Zt._selectedItem=null,Zt._updateButtons()})}}]),Yt}();function Nu(Yt,Zt){var Lt=typeof Symbol<"u"&&Yt[Symbol.iterator]||Yt["@@iterator"];if(!Lt){if(Array.isArray(Yt)||(Lt=function(Sn,Yn){if(Sn){if(typeof Sn=="string")return Cu(Sn,Yn);var or=Object.prototype.toString.call(Sn).slice(8,-1);if(or==="Object"&&Sn.constructor&&(or=Sn.constructor.name),or==="Map"||or==="Set")return Array.from(Sn);if(or==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(or))return Cu(Sn,Yn)}}(Yt))||Zt){Lt&&(Yt=Lt);var vt=0,Tt=function(){};return{s:Tt,n:function(){return vt>=Yt.length?{done:!0}:{done:!1,value:Yt[vt++]}},e:function(Sn){throw Sn},f:Tt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ft,tn=!0,dn=!1;return{s:function(){Lt=Lt.call(Yt)},n:function(){var Sn=Lt.next();return tn=Sn.done,Sn},e:function(Sn){dn=!0,Ft=Sn},f:function(){try{tn||Lt.return==null||Lt.return()}finally{if(dn)throw Ft}}}}function Cu(Yt,Zt){(Zt==null||Zt>Yt.length)&&(Zt=Yt.length);for(var Lt=0,vt=new Array(Zt);Lt<Zt;Lt++)vt[Lt]=Yt[Lt];return vt}function ju(Yt){var Zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Lt,vt=(0,dt.Z)(Yt);if(Zt){var Tt=(0,dt.Z)(this).constructor;Lt=Reflect.construct(vt,arguments,Tt)}else Lt=vt.apply(this,arguments);return(0,pt.Z)(this,Lt)}}var $u=function(Yt){(0,ht.Z)(Lt,Yt);var Zt=ju(Lt);function Lt(){var vt;return(0,j.Z)(this,Lt),(vt=Zt.call(this))._style=An(o(2488)),vt.name="resources",vt._hideErudaSetting=!1,vt._observeElement=!0,vt}return(0,$.Z)(Lt,[{key:"init",value:function(vt,Tt){(0,Et.Z)((0,dt.Z)(Lt.prototype),"init",this).call(this,vt),this._container=Tt,this._initTpl(),this._localStorage=new Au(this._$localStorage,Tt,this,"local"),this._sessionStorage=new Au(this._$sessionStorage,Tt,this,"session"),this._cookie=new Lu(this._$cookie,Tt),this._bindEvent(),this._initObserver(),this._initCfg()}},{key:"refresh",value:function(){return this.refreshLocalStorage().refreshSessionStorage().refreshCookie().refreshScript().refreshStylesheet().refreshIframe().refreshImage()}},{key:"destroy",value:function(){(0,Et.Z)((0,dt.Z)(Lt.prototype),"destroy",this).call(this),this._localStorage.destroy(),this._sessionStorage.destroy(),this._disableObserver(),An.remove(this._style),this._rmCfg()}},{key:"refreshScript",value:function(){var vt=[];xt()("script").each(function(){var Sn=this.src;Sn!==""&&vt.push(Sn)});var Tt=Nl("script",(vt=ds()(vt)).length),Ft="<li>Empty</li>";Mo()(vt)||(Ft=gn()(vt,function(Sn){return Sn=ro()(Sn),'<li><a href="'.concat(Sn,'" target="_blank" class="').concat(qt("js-link"),'">').concat(Sn,"</a></li>")}).join(""));var tn='<h2 class="'.concat(qt("title"),`">
      Script
      <div class="`).concat(qt("btn refresh-script"),`">
        <span class="`).concat(qt("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(qt("link-list"),`">
      `).concat(Ft,`
    </ul>`),dn=this._$script;return Ll(dn,Tt),dn.html(tn),this}},{key:"refreshStylesheet",value:function(){var vt=[];xt()("link").each(function(){this.rel==="stylesheet"&&vt.push(this.href)});var Tt=Nl("stylesheet",(vt=ds()(vt)).length),Ft="<li>Empty</li>";Mo()(vt)||(Ft=gn()(vt,function(Sn){return Sn=ro()(Sn),' <li><a href="'.concat(Sn,'" target="_blank" class="').concat(qt("css-link"),'">').concat(Sn,"</a></li>")}).join(""));var tn='<h2 class="'.concat(qt("title"),`">
      Stylesheet
      <div class="`).concat(qt("btn refresh-stylesheet"),`">
        <span class="`).concat(qt("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(qt("link-list"),`">
      `).concat(Ft,`
    </ul>`),dn=this._$stylesheet;return Ll(dn,Tt),dn.html(tn),this}},{key:"refreshIframe",value:function(){var vt=[];xt()("iframe").each(function(){var tn=xt()(this).attr("src");tn&&vt.push(tn)}),vt=ds()(vt);var Tt="<li>Empty</li>";Mo()(vt)||(Tt=gn()(vt,function(tn){return tn=ro()(tn),'<li><a href="'.concat(tn,'" target="_blank" class="').concat(qt("iframe-link"),'">').concat(tn,"</a></li>")}).join(""));var Ft='<h2 class="'.concat(qt("title"),`">
      Iframe
      <div class="`).concat(qt("btn refresh-iframe"),`">
        <span class="`).concat(qt("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(qt("link-list"),`">
      `).concat(Tt,`
    </ul>`);return this._$iframe.html(Ft),this}},{key:"refreshLocalStorage",value:function(){return this._localStorage.refresh(),this}},{key:"refreshSessionStorage",value:function(){return this._sessionStorage.refresh(),this}},{key:"refreshCookie",value:function(){return this._cookie.refresh(),this}},{key:"refreshImage",value:function(){var vt=[],Tt=this._performance=window.webkitPerformance||window.performance;Tt&&Tt.getEntries?this._performance.getEntries().forEach(function(Yn){if(Yn.initiatorType==="img"||Uu(Yn.name)){if(jt()(Yn.name,"exclude=true"))return;vt.push(Yn.name)}}):xt()("img").each(function(){var Yn=xt()(this),or=Yn.attr("src");Yn.data("exclude")!=="true"&&vt.push(or)}),(vt=ds()(vt)).sort();var Ft=Nl("image",vt.length),tn="<li>Empty</li>";Mo()(vt)||(tn=gn()(vt,function(Yn){return'<li class="'.concat(qt("image"),`">
          <img src="`).concat(ro()(Yn),'" data-exclude="true" class="').concat(qt("img-link"),`"/>
        </li>`)}).join(""));var dn='<h2 class="'.concat(qt("title"),`">
      Image
      <div class="`).concat(qt("btn refresh-image"),`">
        <span class="`).concat(qt("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(qt("image-list"),`">
      `).concat(tn,`
    </ul>`),Sn=this._$image;return Ll(Sn,Ft),Sn.html(dn),this}},{key:"show",value:function(){return(0,Et.Z)((0,dt.Z)(Lt.prototype),"show",this).call(this),this._observeElement&&this._enableObserver(),this.refresh()}},{key:"hide",value:function(){return this._disableObserver(),(0,Et.Z)((0,dt.Z)(Lt.prototype),"hide",this).call(this)}},{key:"_initTpl",value:function(){var vt=this._$el;vt.html(qt(`<div class="section local-storage"></div>
      <div class="section session-storage"></div>
      <div class="section cookie"></div>
      <div class="section script"></div>
      <div class="section stylesheet"></div>
      <div class="section iframe"></div>
      <div class="section image"></div>`)),this._$localStorage=vt.find(qt(".local-storage")),this._$sessionStorage=vt.find(qt(".session-storage")),this._$cookie=vt.find(qt(".cookie")),this._$script=vt.find(qt(".script")),this._$stylesheet=vt.find(qt(".stylesheet")),this._$iframe=vt.find(qt(".iframe")),this._$image=vt.find(qt(".image"))}},{key:"_bindEvent",value:function(){var vt=this,Tt=this._$el,Ft=this._container;function tn(Sn,Yn){var or=Ft.get("sources");if(or)return or.set(Sn,Yn),Ft.showTool("sources"),!0}function dn(Sn){return function(Yn){if(Ft.get("sources")){Yn.preventDefault();var or=xt()(this).attr("href");Sn!=="iframe"&&Fu()(location.href,or)?xu()({url:or,success:function(Sr){tn(Sn,Sr)},dataType:"raw"}):tn("iframe",or)}}}Tt.on("click",".eruda-refresh-script",function(){Ft.notify("Refreshed"),vt.refreshScript()}).on("click",".eruda-refresh-stylesheet",function(){Ft.notify("Refreshed"),vt.refreshStylesheet()}).on("click",".eruda-refresh-iframe",function(){Ft.notify("Refreshed"),vt.refreshIframe()}).on("click",".eruda-refresh-image",function(){Ft.notify("Refreshed"),vt.refreshImage()}).on("click",".eruda-img-link",function(){tn("img",xt()(this).attr("src"))}).on("click",".eruda-css-link",dn("css")).on("click",".eruda-js-link",dn("js")).on("click",".eruda-iframe-link",dn("iframe"))}},{key:"_rmCfg",value:function(){var vt=this.config,Tt=this._container.get("settings");Tt&&Tt.remove(vt,"hideErudaSetting").remove(vt,"observeElement").remove("Resources")}},{key:"_initCfg",value:function(){var vt=this,Tt=this.config=Dn.createCfg("resources",{hideErudaSetting:!0,observeElement:!0});Tt.get("hideErudaSetting")&&(this._hideErudaSetting=!0),Tt.get("observeElement")||(this._observeElement=!1),Tt.on("change",function(Ft,tn){switch(Ft){case"hideErudaSetting":return void(vt._hideErudaSetting=tn);case"observeElement":return vt._observeElement=tn,tn?vt._enableObserver():vt._disableObserver()}}),this._container.get("settings").text("Resources").switch(Tt,"hideErudaSetting","Hide Eruda Setting").switch(Tt,"observeElement","Auto Refresh Elements").separator()}},{key:"_initObserver",value:function(){var vt=this;this._observer=new(fs())(function(Tt){Gt()(Tt,function(Ft){vt._handleMutation(Ft)})})}},{key:"_handleMutation",value:function(vt){var Tt=this;if(!Fn(vt.target)){var Ft=function(Yn){var or=function(Sr){return Sr.tagName?Sr.tagName.toLowerCase():""}(Yn);switch(or){case"script":Tt.refreshScript();break;case"img":Tt.refreshImage();break;case"link":Tt.refreshStylesheet()}};if(vt.type==="attributes")Ft(vt.target);else if(vt.type==="childList"){Ft(vt.target);var tn,dn=nu()(vt.addedNodes),Sn=Nu(dn=zu()(dn,nu()(vt.removedNodes)));try{for(Sn.s();!(tn=Sn.n()).done;)Ft(tn.value)}catch(Yn){Sn.e(Yn)}finally{Sn.f()}}}}},{key:"_enableObserver",value:function(){this._observer.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}}]),Lt}(_t),Hu=/\.(jpeg|jpg|gif|png)$/,Uu=function(Yt){return Hu.test(Yt)},ku=o(4541),iu=o.n(ku),$a=iu()(),_l=[{name:"Location",val:function(){return ro()(location.href)}},{name:"User Agent",val:navigator.userAgent},{name:"Device",val:["<table><tbody>",'<tr><td class="eruda-device-key">screen</td><td>'.concat(screen.width," * ").concat(screen.height,"</td></tr>"),"<tr><td>viewport</td><td>".concat(window.innerWidth," * ").concat(window.innerHeight,"</td></tr>"),"<tr><td>pixel ratio</td><td>".concat(window.devicePixelRatio,"</td></tr>"),"</tbody></table>"].join("")},{name:"System",val:["<table><tbody>",'<tr><td class="eruda-system-key">os</td><td>'.concat(vr()(),"</td></tr>"),"<tr><td>browser</td><td>".concat($a.name+" "+$a.version,"</td></tr>"),"</tbody></table>"].join("")},{name:"About",val:'<a href="https://eruda.liriliri.io" target="_blank">Eruda v3.0.1</a>'},{name:"Backers",val:function(){return'<a rel="noreferrer noopener" href="https://opencollective.com/eruda" target="_blank"><img data-exclude="true" style="width: 100%;"src="https://opencollective.com/eruda/backers.svg?width='.concat(1.5*window.innerWidth,'&exclude=true"></a>')}}],ru=o(550),ou=o.n(ru);function su(Yt){var Zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Lt,vt=(0,dt.Z)(Yt);if(Zt){var Tt=(0,dt.Z)(this).constructor;Lt=Reflect.construct(vt,arguments,Tt)}else Lt=vt.apply(this,arguments);return(0,pt.Z)(this,Lt)}}var au=function(Yt){(0,ht.Z)(Lt,Yt);var Zt=su(Lt);function Lt(){var vt;return(0,j.Z)(this,Lt),(vt=Zt.call(this))._style=An(o(879)),vt.name="info",vt._infos=[],vt}return(0,$.Z)(Lt,[{key:"init",value:function(vt,Tt){(0,Et.Z)((0,dt.Z)(Lt.prototype),"init",this).call(this,vt),this._container=Tt,this._addDefInfo(),this._bindEvent()}},{key:"destroy",value:function(){(0,Et.Z)((0,dt.Z)(Lt.prototype),"destroy",this).call(this),An.remove(this._style)}},{key:"add",value:function(vt,Tt){var Ft=this._infos,tn=!1;return Gt()(Ft,function(dn){vt===dn.name&&(dn.val=Tt,tn=!0)}),tn||Ft.push({name:vt,val:Tt}),this._render(),this}},{key:"get",value:function(vt){var Tt,Ft=this._infos;return pr()(vt)?ou()(Ft):(Gt()(Ft,function(tn){vt===tn.name&&(Tt=tn.val)}),Tt)}},{key:"remove",value:function(vt){for(var Tt=this._infos,Ft=Tt.length-1;Ft>=0;Ft--)Tt[Ft].name===vt&&Tt.splice(Ft,1);return this._render(),this}},{key:"clear",value:function(){return this._infos=[],this._render(),this}},{key:"_addDefInfo",value:function(){var vt=this;Gt()(_l,function(Tt){return vt.add(Tt.name,Tt.val)})}},{key:"_render",value:function(){var vt=[];Gt()(this._infos,function(Ft){var tn=Ft.name,dn=Ft.val;is()(dn)&&(dn=dn()),vt.push({name:tn,val:dn})});var Tt="<ul>".concat(gn()(vt,function(Ft){return'<li><h2 class="'.concat(qt("title"),'">').concat(ro()(Ft.name),'<span class="').concat(qt("icon-copy copy"),'"></span></h2><div class="').concat(qt("content"),'">').concat(Ft.val,"</div></li>")}).join(""),"</ul>");this._renderHtml(Tt)}},{key:"_bindEvent",value:function(){var vt=this._container;this._$el.on("click",qt(".copy"),function(){var Tt=xt()(this).parent().parent(),Ft=Tt.find(qt(".title")).text(),tn=Tt.find(qt(".content")).text();ws()("".concat(Ft,": ").concat(tn)),vt.notify("Copied")})}},{key:"_renderHtml",value:function(vt){vt!==this._lastHtml&&(this._lastHtml=vt,this._$el.html(vt))}}]),Lt}(_t),lu=o(8299),yl=o(8368),ho=o.n(yl),qs=o(3651),$l=o.n(qs),Yo=o(7049);function Wu(Yt){var Zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Lt,vt=(0,dt.Z)(Yt);if(Zt){var Tt=(0,dt.Z)(this).constructor;Lt=Reflect.construct(vt,arguments,Tt)}else Lt=vt.apply(this,arguments);return(0,pt.Z)(this,Lt)}}var Su=function(Yt){(0,ht.Z)(Lt,Yt);var Zt=Wu(Lt);function Lt(){var vt;return(0,j.Z)(this,Lt),(vt=Zt.call(this))._style=An(o(1344)),vt.name="sources",vt._showLineNum=!0,vt}return(0,$.Z)(Lt,[{key:"init",value:function(vt,Tt){(0,Et.Z)((0,dt.Z)(Lt.prototype),"init",this).call(this,vt),this._container=Tt,this._bindEvent(),this._initCfg()}},{key:"destroy",value:function(){(0,Et.Z)((0,dt.Z)(Lt.prototype),"destroy",this).call(this),An.remove(this._style),this._rmCfg()}},{key:"set",value:function(vt,Tt){if(vt==="img"){this._isFetchingData=!0;var Ft=new Image,tn=this;return Ft.onload=function(){tn._isFetchingData=!1,tn._data={type:"img",val:{width:this.width,height:this.height,src:Tt}},tn._render()},Ft.onerror=function(){tn._isFetchingData=!1},void(Ft.src=Tt)}return this._data={type:vt,val:Tt},this._render(),this}},{key:"show",value:function(){return(0,Et.Z)((0,dt.Z)(Lt.prototype),"show",this).call(this),this._data||this._isFetchingData||this._renderDef(),this}},{key:"_renderDef",value:function(){var vt=this;if(this._html)return this._data={type:"html",val:this._html},this._render();this._isGettingHtml||(this._isGettingHtml=!0,xu()({url:location.href,success:function(Tt){return vt._html=Tt},error:function(){return vt._html="Sorry, unable to fetch source code:("},complete:function(){vt._isGettingHtml=!1,vt._renderDef()},dataType:"raw"}))}},{key:"_bindEvent",value:function(){var vt=this;this._container.on("showTool",function(Tt,Ft){Tt!==vt.name&&Ft.name===vt.name&&delete vt._data})}},{key:"_rmCfg",value:function(){var vt=this.config,Tt=this._container.get("settings");Tt&&Tt.remove(vt,"showLineNum").remove("Sources")}},{key:"_initCfg",value:function(){var vt=this,Tt=this.config=Dn.createCfg("sources",{showLineNum:!0});Tt.get("showLineNum")||(this._showLineNum=!1),Tt.on("change",function(Ft,tn){Ft!=="showLineNum"||(vt._showLineNum=tn)}),this._container.get("settings").text("Sources").switch(Tt,"showLineNum","Show Line Numbers").separator()}},{key:"_render",value:function(){switch(this._isInit=!0,this._data.type){case"html":case"js":case"css":return this._renderCode();case"img":return this._renderImg();case"object":return this._renderObj();case"raw":return this._renderRaw();case"iframe":return this._renderIframe()}}},{key:"_renderImg",value:function(){var vt=this._data.val,Tt=vt.width,Ft=vt.height,tn=vt.src;this._renderHtml('<div class="'.concat(qt("image"),`">
      <div class="`).concat(qt("breadcrumb"),'">').concat(ro()(tn),`</div>
      <div class="`).concat(qt("img-container"),`" data-exclude="true">
        <img src="`).concat(ro()(tn),`">
      </div>
      <div class="`).concat(qt("img-info"),'">').concat(ro()(Tt)," × ").concat(ro()(Ft),`</div>
    </div>`))}},{key:"_renderCode",value:function(){var vt=this._data;this._renderHtml('<div class="'.concat(qt("code"),'" data-type="').concat(vt.type,'"></div>'),!1);var Tt=vt.val,Ft=vt.val.length;Ft>Ks&&(Tt=Ms()(Tt,Ks)),Ft<Qs?(Tt=$l()(Tt,vt.type,{comment:"",string:"",number:"",keyword:"",operator:""}),Gt()(["comment","string","number","keyword","operator"],function(dn){Tt=ho()(Tt,'class="'.concat(dn,'"'),'class="'.concat(qt(dn),'"'))})):Tt=ro()(Tt);var tn=this._$el.find(qt(".code")).get(0);new Yo.Z(tn,{text:Tt,escape:!1,wrapLongLines:!0,showLineNumbers:vt.val.length<Hl&&this._showLineNum})}},{key:"_renderObj",value:function(){this._renderHtml('<ul class="'.concat(qt("json"),'"></ul>'),!1);var vt=this._data.val;try{Ut()(vt)&&(vt=JSON.parse(vt))}catch{}new lu.Z(this._$el.find(".eruda-json").get(0),{unenumerable:!0,accessGetter:!0}).set(vt)}},{key:"_renderRaw",value:function(){var vt=this._data;this._renderHtml('<div class="'.concat(qt("raw-wrapper"),`">
      <div class="`).concat(qt("raw"),`"></div>
    </div>`));var Tt=vt.val,Ft=this._$el.find(qt(".raw")).get(0);Tt.length>Ks&&(Tt=Ms()(Tt,Ks)),new Yo.Z(Ft,{text:Tt,wrapLongLines:!0,showLineNumbers:Tt.length<Hl&&this._showLineNum})}},{key:"_renderIframe",value:function(){this._renderHtml('<iframe src="'.concat(ro()(this._data.val),'"></iframe>'))}},{key:"_renderHtml",value:function(vt){var Tt=this;(!(arguments.length>1&&arguments[1]!==void 0)||arguments[1])&&vt===this._lastHtml||(this._lastHtml=vt,this._$el.html(vt),setTimeout(function(){return Tt._$el.get(0).scrollTop=0},0))}}]),Lt}(_t),Qs=3e4,Hl=8e4,Ks=1e5,ep=o(5166),Zu=o.n(ep),Gu=o(3514),Vu=o.n(Gu),cu={init:function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Zt=Yt.container,Lt=Yt.tool,vt=Yt.autoScale,Tt=vt===void 0||vt,Ft=Yt.useShadowDom,tn=Ft===void 0||Ft,dn=Yt.defaults,Sn=dn===void 0?{}:dn;this._isInit||(this._isInit=!0,this._scale=1,this._initContainer(Zt,tn),this._initStyle(),this._initDevTools(Sn),this._initEntryBtn(),this._initSettings(),this._initTools(Lt),this._registerListener(),Tt&&this._autoScale())},_isInit:!1,version:"3.0.1",util:d,chobitsu:zt,Tool:_t,Console:ga,Elements:_h,Network:To,Sources:Su,Resources:$u,Info:au,Snippets:Es,Settings:Dn,get:function(Yt){if(this._checkInit()){if(Yt==="entryBtn")return this._entryBtn;var Zt=this._devTools;return Yt?Zt.get(Yt):Zt}},add:function(Yt){if(this._checkInit())return is()(Yt)&&(Yt=Yt(this)),this._devTools.add(Yt),this},remove:function(Yt){return this._devTools.remove(Yt),this},show:function(Yt){if(this._checkInit()){var Zt=this._devTools;return Yt?Zt.showTool(Yt):Zt.show(),this}},hide:function(){if(this._checkInit())return this._devTools.hide(),this},destroy:function(){this._devTools.destroy(),delete this._devTools,this._entryBtn.destroy(),delete this._entryBtn,this._unregisterListener(),xt()(this._container).remove(),An.clear(),this._isInit=!1,this._container=null,this._shadowRoot=null},scale:function(Yt){return fo()(Yt)?(this._scale=Yt,Ct.emit(Ct.SCALE,Yt),this):this._scale},position:function(Yt){var Zt=this._entryBtn;return Zu()(Yt)?(Zt.setPos(Yt),this):Zt.getPos()},_autoScale:function(){hr()()&&this.scale(1/Vu()())},_registerListener:function(){var Yt=this;this._addListener=function(){return Yt.add.apply(Yt,arguments)},this._showListener=function(){return Yt.show.apply(Yt,arguments)},Ct.on(Ct.ADD,this._addListener),Ct.on(Ct.SHOW,this._showListener),Ct.on(Ct.SCALE,An.setScale)},_unregisterListener:function(){Ct.off(Ct.ADD,this._addListener),Ct.off(Ct.SHOW,this._showListener),Ct.off(Ct.SCALE,An.setScale)},_checkInit:function(){return this._isInit||Hr.error('Please call "eruda.init()" first'),this._isInit},_initContainer:function(Yt,Zt){var Lt,vt;Yt||(Yt=document.createElement("div"),document.documentElement.appendChild(Yt)),Yt.id="eruda",Yt.style.all="initial",this._container=Yt,Zt&&(Yt.attachShadow?Lt=Yt.attachShadow({mode:"open"}):Yt.createShadowRoot&&(Lt=Yt.createShadowRoot()),Lt&&(An.container=document.head,An(o(5357)+o(9327)+o(4821)+o(8903)+o(5777)),vt=document.createElement("div"),Lt.appendChild(vt),this._shadowRoot=Lt)),this._shadowRoot||(vt=document.createElement("div"),Yt.appendChild(vt)),Ln()(vt,{className:"eruda-container __chobitsu-hide__",contentEditable:!1}),iu()().name==="ios"&&vt.setAttribute("ontouchstart",""),this._$el=xt()(vt)},_initDevTools:function(Yt){this._devTools=new Oo(this._$el,{defaults:Yt})},_initStyle:function(){var Yt="eruda-style-container",Zt=this._$el;this._shadowRoot?(An.container=this._shadowRoot,An(":host { all: initial }")):(Zt.append('<div class="'.concat(Yt,'"></div>')),An.container=Zt.find(".".concat(Yt)).get(0)),An(o(8020)+o(4821)+o(9327)+o(7591)+o(4987)+o(8903)+o(5512)+o(2156)+o(5777)+o(7871)+o(6833)+o(8516)+o(5357))},_initEntryBtn:function(){var Yt=this;this._entryBtn=new Lr(this._$el),this._entryBtn.on("click",function(){return Yt._devTools.toggle()})},_initSettings:function(){var Yt=this._devTools,Zt=new Dn;Yt.add(Zt),this._entryBtn.initCfg(Zt),Yt.initCfg(Zt)},_initTools:function(){var Yt=this,Zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["console","elements","network","resources","sources","info","snippets"];Zt=nu()(Zt);var Lt=this._devTools;Zt.forEach(function(vt){var Tt=Yt[Ls()(vt)];try{Tt&&Lt.add(new Tt)}catch(Ft){lr()(function(){Hr.error("Something wrong when initializing tool ".concat(vt,":"),Ft.message)})}}),Lt.showTool(Zt[0]||"settings")}}},2027:function(i,s,o){var d=o(6672).Z;i.exports=d,i.exports.default=d},6610:function(i,s,o){o.r(s),s.default={}},9143:function(i,s,o){var d=this&&this.__awaiter||function(St,Ct,Et,Pt){return new(Et||(Et=Promise))(function(_t,yt){function xt(Bt){try{Ot(Pt.next(Bt))}catch(At){yt(At)}}function Dt(Bt){try{Ot(Pt.throw(Bt))}catch(At){yt(At)}}function Ot(Bt){var At;Bt.done?_t(Bt.value):(At=Bt.value,At instanceof Et?At:new Et(function(It){It(At)})).then(xt,Dt)}Ot((Pt=Pt.apply(St,Ct||[])).next())})},j=this&&this.__generator||function(St,Ct){var Et,Pt,_t,yt,xt={label:0,sent:function(){if(1&_t[0])throw _t[1];return _t[1]},trys:[],ops:[]};return yt={next:Dt(0),throw:Dt(1),return:Dt(2)},typeof Symbol=="function"&&(yt[Symbol.iterator]=function(){return this}),yt;function Dt(Ot){return function(Bt){return function(At){if(Et)throw new TypeError("Generator is already executing.");for(;xt;)try{if(Et=1,Pt&&(_t=2&At[0]?Pt.return:At[0]?Pt.throw||((_t=Pt.return)&&_t.call(Pt),0):Pt.next)&&!(_t=_t.call(Pt,At[1])).done)return _t;switch(Pt=0,_t&&(At=[2&At[0],_t.value]),At[0]){case 0:case 1:_t=At;break;case 4:return xt.label++,{value:At[1],done:!1};case 5:xt.label++,Pt=At[1],At=[0];continue;case 7:At=xt.ops.pop(),xt.trys.pop();continue;default:if(_t=xt.trys,!((_t=_t.length>0&&_t[_t.length-1])||At[0]!==6&&At[0]!==2)){xt=0;continue}if(At[0]===3&&(!_t||At[1]>_t[0]&&At[1]<_t[3])){xt.label=At[1];break}if(At[0]===6&&xt.label<_t[1]){xt.label=_t[1],_t=At;break}if(_t&&xt.label<_t[2]){xt.label=_t[2],xt.ops.push(At);break}_t[2]&&xt.ops.pop(),xt.trys.pop();continue}At=Ct.call(St,xt)}catch(It){At=[6,It],Pt=0}finally{Et=_t=0}if(5&At[0])throw At[1];return{value:At[0]?At[1]:void 0,done:!0}}([Ot,Bt])}}},$=this&&this.__importDefault||function(St){return St&&St.__esModule?St:{default:St}};Object.defineProperty(s,"__esModule",{value:!0});var ot=$(o(3276)),ht=$(o(1214)),pt=$(o(5936)),dt=$(o(3783)),gt=$(o(1443)),wt=o(316),bt=function(){function St(){var Ct=this;this.resolves=new Map,this.domains=new Map,this.onMessage=ht.default,ot.default.on("message",function(Et){var Pt=JSON.parse(Et),_t=Ct.resolves.get(Pt.id);if(_t&&_t(Pt.result),!Pt.id){var yt=Pt.method.split("."),xt=yt[0],Dt=yt[1],Ot=Ct.domains.get(xt);Ot&&Ot.emit(Dt,Pt.params)}Ct.onMessage(Et)})}return St.prototype.domain=function(Ct){return this.domains.get(Ct)},St.prototype.setOnMessage=function(Ct){this.onMessage=Ct},St.prototype.sendMessage=function(Ct,Et){var Pt=this;Et===void 0&&(Et={});var _t=pt.default();return this.sendRawMessage(JSON.stringify({id:_t,method:Ct,params:Et})),new Promise(function(yt){Pt.resolves.set(_t,yt)})},St.prototype.sendRawMessage=function(Ct){return d(this,void 0,void 0,function(){var Et,Pt,_t,yt,xt,Dt,Ot;return j(this,function(Bt){switch(Bt.label){case 0:Et=JSON.parse(Ct),Pt=Et.method,_t=Et.params,yt=Et.id,xt={id:yt},Bt.label=1;case 1:return Bt.trys.push([1,3,,4]),Dt=xt,[4,this.callMethod(Pt,_t)];case 2:return Dt.result=Bt.sent(),[3,4];case 3:return(Ot=Bt.sent())instanceof wt.ErrorWithCode?xt.error={message:Ot.message,code:Ot.code}:Ot instanceof Error&&(xt.error={message:Ot.message}),[3,4];case 4:return ot.default.emit("message",JSON.stringify(xt)),[2]}})})},St.prototype.register=function(Ct,Et){var Pt=this.domains,_t=Pt.get(Ct);_t||(_t={},gt.default.mixin(_t)),dt.default(Et,function(yt,xt){_t[xt]=yt}),Pt.set(Ct,_t)},St.prototype.callMethod=function(Ct,Et){return d(this,void 0,void 0,function(){var Pt,_t,yt,xt;return j(this,function(Dt){if(Pt=Ct.split("."),_t=Pt[0],yt=Pt[1],(xt=this.domain(_t))&&xt[yt])return[2,xt[yt](Et)||{}];throw Error(Ct+" unimplemented")})})},St}();s.default=bt},7935:function(i,s,o){var d=this&&this.__createBinding||(Object.create?function(Ht,jt,Wt,ln){ln===void 0&&(ln=Wt),Object.defineProperty(Ht,ln,{enumerable:!0,get:function(){return jt[Wt]}})}:function(Ht,jt,Wt,ln){ln===void 0&&(ln=Wt),Ht[ln]=jt[Wt]}),j=this&&this.__setModuleDefault||(Object.create?function(Ht,jt){Object.defineProperty(Ht,"default",{enumerable:!0,value:jt})}:function(Ht,jt){Ht.default=jt}),$=this&&this.__importStar||function(Ht){if(Ht&&Ht.__esModule)return Ht;var jt={};if(Ht!=null)for(var Wt in Ht)Wt!=="default"&&Object.hasOwnProperty.call(Ht,Wt)&&d(jt,Ht,Wt);return j(jt,Ht),jt},ot=this&&this.__importDefault||function(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}};Object.defineProperty(s,"__esModule",{value:!0}),s.getDOMNode=s.getDOMNodeId=s.setOuterHTML=s.setNodeValue=s.setInspectedNode=s.setAttributeValue=s.setAttributesAsText=s.resolveNode=s.requestNode=s.requestChildNodes=s.removeNode=s.pushNodesByBackendIdsToFrontend=s.discardSearchResults=s.pushNodesToFrontend=s.getSearchResults=s.performSearch=s.moveTo=s.getOuterHTML=s.getDocument=s.enable=s.copyTo=s.collectClassNamesFromSubtree=void 0;var ht=ot(o(3276)),pt=$(o(2049)),dt=o(2049),gt=$(o(7923)),wt=ot(o(6126)),bt=ot(o(1512)),St=ot(o(6156)),Ct=ot(o(8887)),Et=ot(o(7483)),Pt=ot(o(2461)),_t=ot(o(42)),yt=ot(o(6341)),xt=ot(o(3063)),Dt=ot(o(3783)),Ot=ot(o(1352)),Bt=ot(o(8933)),At=ot(o(8099)),It=o(1628),Gt=o(316);s.collectClassNamesFromSubtree=function(Ht){var jt=dt.getNode(Ht.nodeId),Wt=[];return Ut(jt,function(ln){if(ln.nodeType===1){var Qt=ln.getAttribute("class");if(Qt)for(var Xt=0,on=Qt.split(/\s+/);Xt<on.length;Xt++){var sn=on[Xt];Wt.push(sn)}}}),{classNames:_t.default(Wt)}},s.copyTo=function(Ht){var jt=Ht.nodeId,Wt=Ht.targetNodeId,ln=dt.getNode(jt),Qt=dt.getNode(Wt),Xt=ln.cloneNode(!0);Qt.appendChild(Xt)},s.enable=function(){wt.default.observe(),pt.clear()},s.getDocument=function(){return{root:pt.wrap(document,{depth:2})}},s.getOuterHTML=function(Ht){return{outerHTML:dt.getNode(Ht.nodeId).outerHTML}},s.moveTo=function(Ht){var jt=Ht.nodeId,Wt=Ht.targetNodeId,ln=dt.getNode(jt);dt.getNode(Wt).appendChild(ln)};var Jt=new Map;function nn(Ht){for(var jt=[Ht],Wt=Ht.parentNode;Wt&&(jt.push(Wt),!(Qt=dt.getNodeId(Wt)));)Wt=Wt.parentNode;for(;jt.length;){var ln=jt.pop(),Qt=dt.getNodeId(ln);ht.default.trigger("DOM.setChildNodes",{parentId:Qt,nodes:pt.getChildNodes(ln,1)})}return dt.getNodeId(Ht)}s.performSearch=function(Ht){var jt=xt.default(Ht.query),Wt=[];try{Wt=At.default(Wt,Ot.default(document.querySelectorAll(jt)))}catch{}try{Wt=At.default(Wt,Bt.default(jt))}catch{}Ut(document,function(Qt){var Xt=Qt.nodeType;if(Xt===1){var on=Qt.localName;if(yt.default("<"+on+" ",jt)||yt.default("</"+on+">",jt))return void Wt.push(Qt);var sn=[];Dt.default(Qt.attributes,function(Rn){var vn=Rn.name,yn=Rn.value;return sn.push(vn,yn)});for(var bn=0,Zn=sn.length;bn<Zn;bn++)if(yt.default(xt.default(sn[bn]),jt)){Wt.push(Qt);break}}else Xt===3&&yt.default(xt.default(Qt.nodeValue),jt)&&Wt.push(Qt)});var ln=Gt.createId();return Jt.set(ln,Wt),{searchId:ln,resultCount:Wt.length}},s.getSearchResults=function(Ht){var jt=Ht.searchId,Wt=Ht.fromIndex,ln=Ht.toIndex,Qt=Jt.get(jt).slice(Wt,ln);return{nodeIds:Pt.default(Qt,function(Xt){var on=dt.getNodeId(Xt);return on||nn(Xt)})}},s.pushNodesToFrontend=nn,s.discardSearchResults=function(Ht){Jt.delete(Ht.searchId)},s.pushNodesByBackendIdsToFrontend=function(Ht){return{nodeIds:Ht.backendNodeIds}},s.removeNode=function(Ht){var jt=dt.getNode(Ht.nodeId);bt.default(jt).remove()},s.requestChildNodes=function(Ht){var jt=Ht.nodeId,Wt=Ht.depth,ln=Wt===void 0?1:Wt,Qt=dt.getNode(jt);ht.default.trigger("DOM.setChildNodes",{parentId:jt,nodes:pt.getChildNodes(Qt,ln)})},s.requestNode=function(Ht){var jt=gt.getObj(Ht.objectId);return{nodeId:dt.getNodeId(jt)}},s.resolveNode=function(Ht){var jt=dt.getNode(Ht.nodeId);return{object:gt.wrap(jt)}},s.setAttributesAsText=function(Ht){var jt,Wt=Ht.name,ln=Ht.text,Qt=Ht.nodeId,Xt=dt.getNode(Qt);Wt&&Xt.removeAttribute(Wt),bt.default(Xt).attr((jt="<div "+(jt=ln)+"></div>",Et.default.parse(jt)[0].attrs))},s.setAttributeValue=function(Ht){var jt=Ht.nodeId,Wt=Ht.name,ln=Ht.value;dt.getNode(jt).setAttribute(Wt,ln)};var Vt=[];function Ut(Ht,jt){for(var Wt=pt.filterNodes(Ht.childNodes),ln=0,Qt=Wt.length;ln<Qt;ln++){var Xt=Wt[ln];jt(Xt),Ut(Xt,jt)}}s.setInspectedNode=function(Ht){var jt=dt.getNode(Ht.nodeId);Vt.unshift(jt),Vt.length>5&&Vt.pop();for(var Wt=0;Wt<5;Wt++)It.setGlobal("$"+Wt,Vt[Wt])},s.setNodeValue=function(Ht){var jt=Ht.nodeId,Wt=Ht.value;dt.getNode(jt).nodeValue=Wt},s.setOuterHTML=function(Ht){var jt=Ht.nodeId,Wt=Ht.outerHTML;dt.getNode(jt).outerHTML=Wt},s.getDOMNodeId=function(Ht){var jt=Ht.node;return{nodeId:pt.getOrCreateNodeId(jt)}},s.getDOMNode=function(Ht){var jt=Ht.nodeId;return{node:dt.getNode(jt)}},wt.default.on("attributes",function(Ht,jt){var Wt=dt.getNodeId(Ht);if(Wt){var ln=Ht.getAttribute(jt);St.default(ln)?ht.default.trigger("DOM.attributeRemoved",{nodeId:Wt,name:jt}):ht.default.trigger("DOM.attributeModified",{nodeId:Wt,name:jt,value:ln})}}),wt.default.on("childList",function(Ht,jt,Wt){var ln=dt.getNodeId(Ht);if(ln){if(jt=pt.filterNodes(jt),Wt=pt.filterNodes(Wt),!Ct.default(jt)){Rn();for(var Qt=0,Xt=jt.length;Qt<Xt;Qt++){var on=jt[Qt],sn=pt.getPreviousNode(on),bn=sn?dt.getNodeId(sn):0,Zn={node:pt.wrap(on,{depth:0}),parentNodeId:ln,previousNodeId:bn};ht.default.trigger("DOM.childNodeInserted",Zn)}}if(!Ct.default(Wt))for(Qt=0,Xt=Wt.length;Qt<Xt;Qt++){if(on=Wt[Qt],!dt.getNodeId(on)){Rn();break}ht.default.trigger("DOM.childNodeRemoved",{nodeId:dt.getNodeId(on),parentNodeId:ln})}}function Rn(){ht.default.trigger("DOM.childNodeCountUpdated",{childNodeCount:pt.wrap(Ht,{depth:0}).childNodeCount,nodeId:ln})}}),wt.default.on("characterData",function(Ht){var jt=dt.getNodeId(Ht);jt&&ht.default.trigger("DOM.characterDataModified",{characterData:Ht.nodeValue,nodeId:jt})})},2139:function(i,s,o){var d=this&&this.__spreadArrays||function(){for(var Et=0,Pt=0,_t=arguments.length;Pt<_t;Pt++)Et+=arguments[Pt].length;var yt=Array(Et),xt=0;for(Pt=0;Pt<_t;Pt++)for(var Dt=arguments[Pt],Ot=0,Bt=Dt.length;Ot<Bt;Ot++,xt++)yt[xt]=Dt[Ot];return yt},j=this&&this.__importDefault||function(Et){return Et&&Et.__esModule?Et:{default:Et}};Object.defineProperty(s,"__esModule",{value:!0}),s.getResponseBody=s.enable=s.getCookies=s.deleteCookies=void 0;var $=j(o(4331)),ot=j(o(3783)),ht=j(o(1420)),pt=j(o(5031)),dt=j(o(8763)),gt=j(o(8740)),wt=j(o(6341)),bt=o(2636),St=j(o(3276));s.deleteCookies=function(Et){pt.default(Et.name)},s.getCookies=function(){var Et=[],Pt=document.cookie;return $.default(Pt)!==""&&ot.default(Pt.split(";"),function(_t){_t=_t.split("=");var yt=$.default(_t.shift());_t=ht.default(_t.join("=")),Et.push({name:yt,value:_t})}),{cookies:Et}};var Ct=new Map;s.enable=dt.default(function(){var Et=window.XMLHttpRequest.prototype,Pt=Et.send,_t=Et.open,yt=Et.setRequestHeader;Et.open=function(Ot,Bt){if(!function(Gt){return!wt.default(Gt,"__chobitsu-hide__=true")}(Bt))return _t.apply(this,arguments);var At=this,It=At.chobitsuRequest=new bt.XhrRequest(At,Ot,Bt);It.on("send",function(Gt,Jt){var nn={method:Jt.method,url:Jt.url,headers:Jt.reqHeaders};Jt.data&&(nn.postData=Jt.data),St.default.trigger("Network.requestWillBeSent",{requestId:Gt,type:"XHR",request:nn,timestamp:Jt.time/1e3})}),It.on("headersReceived",function(Gt,Jt){St.default.trigger("Network.responseReceivedExtraInfo",{requestId:Gt,blockedCookies:[],headers:Jt.resHeaders})}),It.on("done",function(Gt,Jt){St.default.trigger("Network.responseReceived",{requestId:Gt,type:"XHR",response:{status:Jt.status},timestamp:Jt.time/1e3}),Ct.set(Gt,Jt.resTxt),St.default.trigger("Network.loadingFinished",{requestId:Gt,encodedDataLength:Jt.size,timestamp:Jt.time/1e3})}),At.addEventListener("readystatechange",function(){switch(At.readyState){case 2:return It.handleHeadersReceived();case 4:return It.handleDone()}}),_t.apply(this,arguments)},Et.send=function(Ot){var Bt=this.chobitsuRequest;Bt&&Bt.handleSend(Ot),Pt.apply(this,arguments)},Et.setRequestHeader=function(Ot,Bt){var At=this.chobitsuRequest;At&&At.handleReqHeadersSet(Ot,Bt),yt.apply(this,arguments)};var xt=!1;if(window.fetch&&(xt=gt.default(window.fetch)),!xt&&navigator.serviceWorker&&(xt=!0),xt){var Dt=window.fetch;window.fetch=function(){for(var Ot=[],Bt=0;Bt<arguments.length;Bt++)Ot[Bt]=arguments[Bt];var At=new(bt.FetchRequest.bind.apply(bt.FetchRequest,d([void 0],Ot)));At.on("send",function(Gt,Jt){var nn={method:Jt.method,url:Jt.url,headers:Jt.reqHeaders};Jt.data&&(nn.postData=Jt.data),St.default.trigger("Network.requestWillBeSent",{requestId:Gt,type:"Fetch",request:nn,timestamp:Jt.time/1e3})}),At.on("done",function(Gt,Jt){St.default.trigger("Network.responseReceived",{requestId:Gt,type:"Fetch",response:{status:Jt.status,headers:Jt.resHeaders},timestamp:Jt.time/1e3}),Ct.set(Gt,Jt.resTxt),St.default.trigger("Network.loadingFinished",{requestId:Gt,encodedDataLength:Jt.size,timestamp:Jt.time/1e3})});var It=Dt.apply(void 0,Ot);return At.send(It),It}}}),s.getResponseBody=function(Et){return{base64Encoded:!1,body:Ct.get(Et.requestId)}}},8689:function(i,s,o){var d=this&&this.__createBinding||(Object.create?function(vn,yn,Ln,qn){qn===void 0&&(qn=Ln),Object.defineProperty(vn,qn,{enumerable:!0,get:function(){return yn[Ln]}})}:function(vn,yn,Ln,qn){qn===void 0&&(qn=Ln),vn[qn]=yn[Ln]}),j=this&&this.__setModuleDefault||(Object.create?function(vn,yn){Object.defineProperty(vn,"default",{enumerable:!0,value:yn})}:function(vn,yn){vn.default=yn}),$=this&&this.__importStar||function(vn){if(vn&&vn.__esModule)return vn;var yn={};if(vn!=null)for(var Ln in vn)Ln!=="default"&&Object.hasOwnProperty.call(vn,Ln)&&d(yn,vn,Ln);return j(yn,vn),yn},ot=this&&this.__importDefault||function(vn){return vn&&vn.__esModule?vn:{default:vn}};Object.defineProperty(s,"__esModule",{value:!0}),s.setInspectMode=s.setShowViewportSizeOnResize=s.hideHighlight=s.highlightNode=s.disable=s.enable=void 0;var ht,pt,dt=o(2049),gt=o(7935),wt=ot(o(1512)),bt=ot(o(8613)),St=ot(o(642)),Ct=ot(o(4193)),Et=ot(o(6329)),Pt=ot(o(3276)),_t=ot(o(5610)),yt=ot(o(3474)),xt=ot(o(4210)),Dt=ot(o(7715)),Ot=$(o(7923)),Bt=!1,At=!1,It=xt.default("clip-path","polygon(50% 0px, 0px 100%, 100% 100%)"),Gt="ontouchstart"in _t.default,Jt=o(2777).replace("/*# sourceMappingURL=luna-dom-highlighter.css.map*/","");function nn(vn){var yn,Ln=vn.nodeId,qn=vn.highlightConfig,_r=vn.objectId;Ln&&(yn=dt.getNode(Ln)),_r&&(yn=Ot.getObj(_r)),yn.nodeType!==1&&yn.nodeType!==3||(Ct.default(qn,{contentColor:"transparent",paddingColor:"transparent",borderColor:"transparent",marginColor:"transparent"}),It||Et.default(qn,{showInfo:!1}),ht.highlight(yn,qn))}function Vt(){ht.hide()}s.enable=function(){if(!At){var vn=bt.default("div",{class:"__chobitsu-hide__",style:{all:"initial"}});pt=wt.default(vn),document.documentElement.appendChild(vn);var yn=null,Ln=null;if(vn.attachShadow?Ln=vn.attachShadow({mode:"open"}):vn.createShadowRoot&&(Ln=vn.createShadowRoot()),Ln){var qn=document.createElement("style");qn.textContent=Jt,qn.type="text/css",Ln.appendChild(qn),yn=document.createElement("div"),Ln.appendChild(yn)}else yn=document.createElement("div"),vn.appendChild(yn),Bt||(St.default(Jt),Bt=!0);ht=new Dt.default(yn,{monitorResize:yt.default(_t.default.ResizeObserver),showInfo:It}),window.addEventListener("resize",bn),At=!0}},s.disable=function(){ht.destroy(),pt.remove(),window.removeEventListener("resize",bn),At=!1},s.highlightNode=nn,s.hideHighlight=Vt;var Ut=!1;s.setShowViewportSizeOnResize=function(vn){Ut=vn.show};var Ht={},jt="none";function Wt(vn){if(Gt){var yn=vn.touches[0]||vn.changedTouches[0];return document.elementFromPoint(yn.clientX,yn.clientY)}return document.elementFromPoint(vn.clientX,vn.clientY)}s.setInspectMode=function(vn){Ht=vn.highlightConfig,jt=vn.mode};var ln=-1;function Qt(vn){if(jt!=="none"){var yn=Wt(vn);if(yn&&dt.isValidNode(yn)){var Ln=dt.getNodeId(yn);Ln||(Ln=gt.pushNodesToFrontend(yn)),nn({nodeId:Ln,highlightConfig:Ht}),Ln!==ln&&(Pt.default.trigger("Overlay.nodeHighlightRequested",{nodeId:Ln}),ln=Ln)}}}function Xt(vn){if(jt!=="none"){vn.preventDefault(),vn.stopImmediatePropagation();var yn=Wt(vn);Pt.default.trigger("Overlay.inspectNodeRequested",{backendNodeId:dt.getNodeId(yn)}),ln=-1,Vt()}}function on(vn,yn){document.documentElement.addEventListener(vn,yn,!0)}Gt?(on("touchstart",Qt),on("touchmove",Qt),on("touchend",Xt)):(on("mousemove",Qt),on("mouseout",function(){jt!=="none"&&Vt()}),on("click",Xt));var sn=bt.default("div",{class:"__chobitsu-hide__",style:{position:"fixed",right:0,top:0,background:"#fff",fontSize:13,opacity:.5,padding:"4px 6px"}});function bn(){Ut&&(Rn.text(window.innerWidth+"px × "+window.innerHeight+"px"),Zn?clearTimeout(Zn):document.documentElement.appendChild(sn),Zn=setTimeout(function(){Rn.remove(),Zn=null},1e3))}var Zn,Rn=wt.default(sn)},9119:function(i,s,o){var d=this&&this.__importDefault||function(gt){return gt&&gt.__esModule?gt:{default:gt}};Object.defineProperty(s,"__esModule",{value:!0}),s.getTrustTokens=s.clearDataForOrigin=s.getUsageAndQuota=void 0;var j=d(o(3783)),$=d(o(5031)),ot=d(o(615)),ht=o(2139),pt=ot.default("local"),dt=ot.default("session");s.getUsageAndQuota=function(){return{quota:0,usage:0,usageBreakdown:[]}},s.clearDataForOrigin=function(gt){var wt=gt.storageTypes.split(",");j.default(wt,function(bt){if(bt==="cookies"){var St=ht.getCookies().cookies;j.default(St,function(Ct){var Et=Ct.name;return $.default(Et)})}else bt==="local_storage"&&(pt.clear(),dt.clear())})},s.getTrustTokens=function(){return{tokens:[]}}},3276:function(i,s,o){var d,j=this&&this.__extends||(d=function(ht,pt){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,gt){dt.__proto__=gt}||function(dt,gt){for(var wt in gt)gt.hasOwnProperty(wt)&&(dt[wt]=gt[wt])},d(ht,pt)},function(ht,pt){function dt(){this.constructor=ht}d(ht,pt),ht.prototype=pt===null?Object.create(pt):(dt.prototype=pt.prototype,new dt)}),$=this&&this.__importDefault||function(ht){return ht&&ht.__esModule?ht:{default:ht}};Object.defineProperty(s,"__esModule",{value:!0});var ot=function(ht){function pt(){return ht!==null&&ht.apply(this,arguments)||this}return j(pt,ht),pt.prototype.trigger=function(dt,gt){this.emit("message",JSON.stringify({method:dt,params:gt}))},pt}($(o(1443)).default);s.default=new ot},1628:function(i,s,o){var d=this&&this.__importDefault||function(wt){return wt&&wt.__esModule?wt:{default:wt}};Object.defineProperty(s,"__esModule",{value:!0}),s.setGlobal=void 0;var j=d(o(6768)),$=d(o(2327)),ot=d(o(1352)),ht=d(o(2533)),pt=d(o(8933)),dt=d(o(3783)),gt={copy:function(wt){j.default(wt)||(wt=JSON.stringify(wt,null,2)),$.default(wt)},$:function(wt){return document.querySelector(wt)},$$:function(wt){return ot.default(document.querySelectorAll(wt))},$x:function(wt){return pt.default(wt)},keys:ht.default};s.setGlobal=function(wt,bt){gt[wt]=bt},s.default=function(wt){var bt;dt.default(gt,function(St,Ct){window[Ct]||(window[Ct]=St)});try{bt=eval.call(window,"("+wt+")")}catch{bt=eval.call(window,wt)}return dt.default(gt,function(St,Ct){window[Ct]&&window[Ct]===St&&delete window[Ct]}),bt}},6126:function(i,s,o){var d,j=this&&this.__extends||(d=function(dt,gt){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(wt,bt){wt.__proto__=bt}||function(wt,bt){for(var St in bt)bt.hasOwnProperty(St)&&(wt[St]=bt[St])},d(dt,gt)},function(dt,gt){function wt(){this.constructor=dt}d(dt,gt),dt.prototype=gt===null?Object.create(gt):(wt.prototype=gt.prototype,new wt)}),$=this&&this.__importDefault||function(dt){return dt&&dt.__esModule?dt:{default:dt}};Object.defineProperty(s,"__esModule",{value:!0});var ot=$(o(1443)),ht=$(o(3783)),pt=function(dt){function gt(){var wt=dt.call(this)||this;return wt.observer=new MutationObserver(function(bt){ht.default(bt,function(St){return wt.handleMutation(St)})}),wt}return j(gt,dt),gt.prototype.observe=function(){var wt=this.observer;wt.disconnect(),wt.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},gt.prototype.handleMutation=function(wt){wt.type==="attributes"?this.emit("attributes",wt.target,wt.attributeName):wt.type==="childList"?this.emit("childList",wt.target,wt.addedNodes,wt.removedNodes):wt.type==="characterData"&&this.emit("characterData",wt.target)},gt}(ot.default);s.default=new pt},2049:function(i,s,o){var d=this&&this.__importDefault||function(xt){return xt&&xt.__esModule?xt:{default:xt}};Object.defineProperty(s,"__esModule",{value:!0}),s.getNode=s.isValidNode=s.filterNodes=s.getPreviousNode=s.getChildNodes=s.wrap=s.getNodeId=s.clear=s.getOrCreateNodeId=void 0;var j=d(o(2461)),$=d(o(5972)),ot=d(o(3783)),ht=d(o(4331)),pt=d(o(6341)),dt=d(o(6329)),gt=o(316),wt=new Map,bt=new Map,St=1;function Ct(xt){var Dt=bt.get(xt);return Dt||(Dt=St++,bt.set(xt,Dt),wt.set(Dt,xt),Dt)}function Et(xt,Dt){var Ot=(Dt===void 0?{}:Dt).depth,Bt=Ot===void 0?1:Ot,At=Ct(xt),It={nodeName:xt.nodeName,nodeType:xt.nodeType,localName:xt.localName||"",nodeValue:xt.nodeValue||"",nodeId:At,backendNodeId:At};if(xt.parentNode&&(It.parentId=Ct(xt.parentNode)),xt.nodeType===10)return dt.default(It,{publicId:"",systemId:""});if(xt.attributes){var Gt=[];ot.default(xt.attributes,function(Vt){var Ut=Vt.name,Ht=Vt.value;return Gt.push(Ut,Ht)}),It.attributes=Gt}var Jt=_t(xt.childNodes);It.childNodeCount=Jt.length;var nn=It.childNodeCount===1&&Jt[0].nodeType===3;return(Bt>0||nn)&&(It.children=Pt(xt,Bt)),It}function Pt(xt,Dt){var Ot=_t(xt.childNodes);return j.default(Ot,function(Bt){return Et(Bt,{depth:Dt-1})})}function _t(xt){return $.default(xt,function(Dt){return yt(Dt)})}function yt(xt){if(xt.nodeType===1){var Dt=xt.getAttribute("class")||"";if(pt.default(Dt,"__chobitsu-hide__")||pt.default(Dt,"html2canvas-container"))return!1}var Ot=!(xt.nodeType===3&&ht.default(xt.nodeValue||"")==="");return Ot&&xt.parentNode?yt(xt.parentNode):Ot}s.getOrCreateNodeId=Ct,s.clear=function(){wt.clear(),bt.clear()},s.getNodeId=function(xt){return bt.get(xt)},s.wrap=Et,s.getChildNodes=Pt,s.getPreviousNode=function(xt){var Dt=xt.previousSibling;if(Dt){for(;!yt(Dt)&&Dt.previousSibling;)Dt=Dt.previousSibling;return Dt&&yt(Dt)?Dt:void 0}},s.filterNodes=_t,s.isValidNode=yt,s.getNode=function(xt){var Dt=wt.get(xt);if(!Dt||Dt.nodeType===10)throw gt.createErr(-32e3,"Could not find node with given id");return Dt}},7923:function(i,s,o){var d=this&&this.__importDefault||function(on){return on&&on.__esModule?on:{default:on}};Object.defineProperty(s,"__esModule",{value:!0}),s.getProperties=s.releaseObj=s.getObj=s.wrap=s.clear=void 0;var j=d(o(3367)),$=d(o(6156)),ot=d(o(6472)),ht=d(o(4777)),pt=d(o(9833)),dt=d(o(2749)),gt=d(o(3708)),wt=d(o(7470)),bt=d(o(1754)),St=d(o(3085)),Ct=d(o(2533)),Et=d(o(300)),Pt=d(o(1116)),_t=d(o(8740)),yt=d(o(415)),xt=d(o(9804)),Dt=d(o(6257)),Ot=new Map,Bt=new Map,At=new Map,It=new Map,Gt=1;function Jt(on,sn){var bn=Bt.get(on);return bn||(bn=JSON.stringify({injectedScriptId:0,id:Gt++}),Bt.set(on,bn),Ot.set(bn,on),At.set(bn,sn),bn)}function nn(on,sn){var bn=sn===void 0?{}:sn,Zn=bn.generatePreview,Rn=Zn!==void 0&&Zn,vn=bn.self,yn=vn===void 0?on:vn,Ln=ln(on),qn=Ln.type,_r=Ln.subtype;return qn==="undefined"?Ln:qn==="string"||qn==="boolean"||_r==="null"?(Ln.value=on,Ln):(Ln.description=Wt(on,yn),qn==="number"?(Ln.value=on,Ln):qn==="symbol"?(Ln.objectId=Jt(on,yn),Ln):(Ln.className=qn==="function"?"Function":_r==="array"?"Array":_r==="map"?"Map":_r==="set"?"Set":_r==="regexp"?"RegExp":_r==="error"?on.name:St.default(on,!1),Rn&&(Ln.preview=Ht(on,yn)),Ln.objectId=Jt(on,yn),Ln))}function Vt(on){return Ot.get(on)}s.clear=function(){Ot.clear(),Bt.clear(),At.clear()},s.wrap=nn,s.getObj=Vt,s.releaseObj=function(on){var sn=Vt(on);Bt.delete(sn),At.delete(on),Ot.delete(on)},s.getProperties=function(on){for(var sn=on.accessorPropertiesOnly,bn=on.objectId,Zn=on.ownProperties,Rn=on.generatePreview,vn=[],yn={prototype:!Zn,unenumerable:!0,symbol:!sn},Ln=Ot.get(bn),qn=At.get(bn),_r=Pt.default(Ln,yn),Jn=yt.default(Ln),dr=0,Un=_r.length;dr<Un;dr++){var mn=_r[dr],xn=void 0;try{xn=qn[mn]}catch{}var cn={name:j.default(mn),isOwn:Dt.default(qn,mn)},kn=Object.getOwnPropertyDescriptor(Ln,mn);if(!kn&&Jn&&(kn=Object.getOwnPropertyDescriptor(Jn,mn)),kn){if(sn&&!kn.get&&!kn.set)continue;cn.configurable=kn.configurable,cn.enumerable=kn.enumerable,cn.writable=kn.writable,kn.get&&(cn.get=nn(kn.get)),kn.set&&(cn.set=nn(kn.set))}Jn&&Dt.default(Jn,mn)&&cn.enumerable&&(cn.isOwn=!0);var En=!0;!cn.isOwn&&cn.get&&(En=!1),En&&(xt.default(mn)?(cn.symbol=nn(mn),cn.value={type:"undefined"}):cn.value=nn(xn,{generatePreview:Rn})),sn&&ht.default(xn)&&_t.default(xn)||vn.push(cn)}if(!Jn||Zn||Xt(Ln)||vn.push({name:"__proto__",configurable:!0,enumerable:!1,isOwn:Dt.default(Ln,"__proto__"),value:nn(Jn,{self:qn}),writable:!1}),sn)return{result:vn};var cr=[];if(Jn&&!Xt(Ln)&&cr.push({name:"[[Prototype]]",value:nn(Jn,{self:qn})}),gt.default(Ln)||wt.default(Ln)){var Gn=function(ur){for(var hn=It.get(ur),sr=hn?Vt(hn):[],An=ur.entries(),Nn=An.next().value;Nn;)gt.default(ur)?sr.push(new Qt(Nn[1],Nn[0])):sr.push(new Qt(Nn[1])),Nn=An.next().value;return sr}(Ln);cr.push({name:"[[Entries]]",value:nn(Gn)})}return{internalProperties:cr,result:vn}};var Ut=5;function Ht(on,sn){sn===void 0&&(sn=on);var bn=ln(on);bn.description=Wt(on,sn);var Zn=!1,Rn=[],vn=Ct.default(on),yn=vn.length;yn>Ut&&(yn=Ut,Zn=!0);for(var Ln=0;Ln<yn;Ln++){var qn=vn[Ln];Rn.push(jt(qn,sn[qn]))}if(bn.properties=Rn,gt.default(on)){for(var _r=[],Jn=(Ln=0,on.keys()),dr=Jn.next().value;dr;){if(Ln>Ut){Zn=!0;break}_r.push({key:Ht(dr),value:Ht(on.get(dr))}),Ln++,dr=Jn.next().value}bn.entries=_r}else if(wt.default(on)){var Un=[],mn=(Ln=0,on.keys());for(dr=mn.next().value;dr;){if(Ln>Ut){Zn=!0;break}Un.push({value:Ht(dr)}),Ln++,dr=mn.next().value}bn.entries=Un}return bn.overflow=Zn,bn}function jt(on,sn){var bn=ln(sn);bn.name=on;var Zn,Rn=bn.subtype;return Zn=bn.type==="object"?Rn==="null"?"null":Rn==="array"?"Array("+sn.length+")":Rn==="map"?"Map("+sn.size+")":Rn==="set"?"Set("+sn.size+")":St.default(sn,!1):j.default(sn),bn.value=Zn,bn}function Wt(on,sn){sn===void 0&&(sn=on);var bn=ln(on),Zn=bn.type,Rn=bn.subtype;return Zn==="string"?on:Zn==="number"||Zn==="symbol"?j.default(on):Zn==="function"?Et.default(on):Rn==="array"?"Array("+on.length+")":Rn==="map"?"Map("+sn.size+")":Rn==="set"?"Set("+sn.size+")":Rn==="regexp"?j.default(on):Rn==="error"?on.stack:Rn==="internal#entry"?on.name?'{"'+j.default(on.name)+'" => "'+j.default(on.value)+'"}':'"'+j.default(on.value)+'"':St.default(on,!1)}function ln(on){var sn=typeof on,bn="object";if(on instanceof Qt)bn="internal#entry";else if($.default(on))bn="null";else if(ot.default(on))bn="array";else if(bt.default(on))bn="regexp";else if(dt.default(on))bn="error";else if(gt.default(on))bn="map";else if(wt.default(on))bn="set";else try{pt.default(on)&&(bn="node")}catch{}return{type:sn,subtype:bn}}var Qt=function(on,sn){sn&&(this.name=sn),this.value=on};function Xt(on){return on instanceof Qt||!!(on[0]&&on[0]instanceof Qt)}},2636:function(i,s,o){var d,j=this&&this.__extends||(d=function(Ut,Ht){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(jt,Wt){jt.__proto__=Wt}||function(jt,Wt){for(var ln in Wt)Wt.hasOwnProperty(ln)&&(jt[ln]=Wt[ln])},d(Ut,Ht)},function(Ut,Ht){function jt(){this.constructor=Ut}d(Ut,Ht),Ut.prototype=Ht===null?Object.create(Ht):(jt.prototype=Ht.prototype,new jt)}),$=this&&this.__importDefault||function(Ut){return Ut&&Ut.__esModule?Ut:{default:Ut}};Object.defineProperty(s,"__esModule",{value:!0}),s.fullUrl=s.FetchRequest=s.XhrRequest=void 0;var ot=$(o(1443)),ht=$(o(6768)),pt=$(o(9702)),dt=$(o(6334)),gt=$(o(8887)),wt=$(o(4331)),bt=$(o(8847)),St=$(o(3783)),Ct=$(o(6930)),Et=$(o(3875)),Pt=o(316),_t=function(Ut){function Ht(jt,Wt,ln){var Qt=Ut.call(this)||this;return Qt.xhr=jt,Qt.reqHeaders={},Qt.method=Wt,Qt.url=It(ln),Qt.id=Pt.createId(),Qt}return j(Ht,Ut),Ht.prototype.toJSON=function(){return{method:this.method,url:this.url,id:this.id}},Ht.prototype.handleSend=function(jt){ht.default(jt)||(jt=""),jt={name:Gt(this.url),url:this.url,data:jt,time:bt.default(),reqHeaders:this.reqHeaders,method:this.method},gt.default(this.reqHeaders)||(jt.reqHeaders=this.reqHeaders),this.emit("send",this.id,jt)},Ht.prototype.handleReqHeadersSet=function(jt,Wt){jt&&Wt&&(this.reqHeaders[jt]=Wt)},Ht.prototype.handleHeadersReceived=function(){var jt=this.xhr,Wt=Jt(jt.getResponseHeader("Content-Type")||"");this.emit("headersReceived",this.id,{type:Wt.type,subType:Wt.subType,size:Bt(jt,!0,this.url),time:bt.default(),resHeaders:Ot(jt)})},Ht.prototype.handleDone=function(){var jt,Wt,ln,Qt=this,Xt=this.xhr,on=Xt.responseType,sn="",bn=function(){Qt.emit("done",Qt.id,{status:Xt.status,size:Bt(Xt,!1,Qt.url),time:bt.default(),resTxt:sn})},Zn=Jt(Xt.getResponseHeader("Content-Type")||"");on!=="blob"||Zn.type!=="text"&&Zn.subType!=="javascript"&&Zn.subType!=="json"?(on!==""&&on!=="text"||(sn=Xt.responseText),on==="json"&&(sn=JSON.stringify(Xt.response)),bn()):(jt=Xt.response,Wt=function(Rn,vn){vn&&(sn=vn),bn()},(ln=new FileReader).onload=function(){Wt(null,ln.result)},ln.onerror=function(Rn){Wt(Rn)},ln.readAsText(jt))},Ht}(ot.default);s.XhrRequest=_t;var yt=function(Ut){function Ht(jt,Wt){Wt===void 0&&(Wt={});var ln=Ut.call(this)||this;return jt instanceof window.Request&&(jt=jt.url),ln.url=It(jt),ln.id=Pt.createId(),ln.options=Wt,ln.reqHeaders=Wt.headers||{},ln.method=Wt.method||"GET",ln}return j(Ht,Ut),Ht.prototype.send=function(jt){var Wt=this,ln=this.options,Qt=ht.default(ln.body)?ln.body:"";this.emit("send",this.id,{name:Gt(this.url),url:this.url,data:Qt,reqHeaders:this.reqHeaders,time:bt.default(),method:this.method}),jt.then(function(Xt){var on=Jt((Xt=Xt.clone()).headers.get("Content-Type"));return Xt.text().then(function(sn){var bn={type:on.type,subType:on.subType,time:bt.default(),size:xt(Xt,sn),resTxt:sn,resHeaders:Dt(Xt),status:Xt.status};gt.default(Wt.reqHeaders)||(bn.reqHeaders=Wt.reqHeaders),Wt.emit("done",Wt.id,bn)}),Xt})},Ht}(ot.default);function xt(Ut,Ht){var jt=Ut.headers.get("Content-length");return jt?Et.default(jt):Vt(Ht)}function Dt(Ut){var Ht={};return Ut.headers.forEach(function(jt,Wt){return Ht[Wt]=jt}),Ht}function Ot(Ut){var Ht=Ut.getAllResponseHeaders().split(`
`),jt={};return St.default(Ht,function(Wt){if((Wt=wt.default(Wt))!==""){var ln=Wt.split(":",2),Qt=ln[0],Xt=ln[1];jt[Qt]=wt.default(Xt)}}),jt}function Bt(Ut,Ht,jt){var Wt=0;function ln(){if(!Ht){var Qt=Ut.responseType,Xt="";Qt!==""&&Qt!=="text"||(Xt=Ut.responseText),Xt&&(Wt=Vt(Xt))}}if(function(Qt){return!Ct.default(Qt,nn)}(jt))ln();else try{Wt=Et.default(Ut.getResponseHeader("Content-Length"))}catch{ln()}return Wt===0&&ln(),Wt}s.FetchRequest=yt;var At=document.createElement("a");function It(Ut){return At.href=Ut,At.protocol+"//"+At.host+At.pathname+At.search+At.hash}function Gt(Ut){var Ht=pt.default(Ut.split("/"));return Ht.indexOf("?")>-1&&(Ht=wt.default(Ht.split("?")[0])),Ht===""&&(Ht=new dt.default(Ut).hostname),Ht}function Jt(Ut){if(!Ut)return{type:"unknown",subType:"unknown"};var Ht=Ut.split(";")[0].split("/");return{type:Ht[0],subType:pt.default(Ht)}}s.fullUrl=It;var nn=window.location.origin;function Vt(Ut){var Ht=encodeURIComponent(Ut).match(/%[89ABab]/g);return Ut.length+(Ht?Ht.length:0)}},316:function(i,s,o){var d,j=this&&this.__extends||(d=function(yt,xt){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Dt,Ot){Dt.__proto__=Ot}||function(Dt,Ot){for(var Bt in Ot)Ot.hasOwnProperty(Bt)&&(Dt[Bt]=Ot[Bt])},d(yt,xt)},function(yt,xt){function Dt(){this.constructor=yt}d(yt,xt),yt.prototype=xt===null?Object.create(xt):(Dt.prototype=xt.prototype,new Dt)}),$=this&&this.__awaiter||function(yt,xt,Dt,Ot){return new(Dt||(Dt=Promise))(function(Bt,At){function It(nn){try{Jt(Ot.next(nn))}catch(Vt){At(Vt)}}function Gt(nn){try{Jt(Ot.throw(nn))}catch(Vt){At(Vt)}}function Jt(nn){var Vt;nn.done?Bt(nn.value):(Vt=nn.value,Vt instanceof Dt?Vt:new Dt(function(Ut){Ut(Vt)})).then(It,Gt)}Jt((Ot=Ot.apply(yt,xt||[])).next())})},ot=this&&this.__generator||function(yt,xt){var Dt,Ot,Bt,At,It={label:0,sent:function(){if(1&Bt[0])throw Bt[1];return Bt[1]},trys:[],ops:[]};return At={next:Gt(0),throw:Gt(1),return:Gt(2)},typeof Symbol=="function"&&(At[Symbol.iterator]=function(){return this}),At;function Gt(Jt){return function(nn){return function(Vt){if(Dt)throw new TypeError("Generator is already executing.");for(;It;)try{if(Dt=1,Ot&&(Bt=2&Vt[0]?Ot.return:Vt[0]?Ot.throw||((Bt=Ot.return)&&Bt.call(Ot),0):Ot.next)&&!(Bt=Bt.call(Ot,Vt[1])).done)return Bt;switch(Ot=0,Bt&&(Vt=[2&Vt[0],Bt.value]),Vt[0]){case 0:case 1:Bt=Vt;break;case 4:return It.label++,{value:Vt[1],done:!1};case 5:It.label++,Ot=Vt[1],Vt=[0];continue;case 7:Vt=It.ops.pop(),It.trys.pop();continue;default:if(Bt=It.trys,!((Bt=Bt.length>0&&Bt[Bt.length-1])||Vt[0]!==6&&Vt[0]!==2)){It=0;continue}if(Vt[0]===3&&(!Bt||Vt[1]>Bt[0]&&Vt[1]<Bt[3])){It.label=Vt[1];break}if(Vt[0]===6&&It.label<Bt[1]){It.label=Bt[1],Bt=Vt;break}if(Bt&&It.label<Bt[2]){It.label=Bt[2],It.ops.push(Vt);break}Bt[2]&&It.ops.pop(),It.trys.pop();continue}Vt=xt.call(yt,It)}catch(Ut){Vt=[6,Ut],Ot=0}finally{Dt=Bt=0}if(5&Vt[0])throw Vt[1];return{value:Vt[0]?Vt[1]:void 0,done:!0}}([Jt,nn])}}},ht=this&&this.__importDefault||function(yt){return yt&&yt.__esModule?yt:{default:yt}};Object.defineProperty(s,"__esModule",{value:!0}),s.getBase64Content=s.getTextContent=s.getOrigin=s.getUrl=s.createErr=s.ErrorWithCode=s.getAbsoluteUrl=s.createId=void 0;var pt=ht(o(5229)),dt=ht(o(1216)),gt=ht(o(6930)),wt=ht(o(6334)),bt=ht(o(1792)),St=ht(o(6610)),Ct=dt.default(1e3,9999)+".";s.createId=function(){return pt.default(Ct)},s.getAbsoluteUrl=function(yt){var xt=document.createElement("a");return xt.href=yt,xt.href};var Et=function(yt){function xt(Dt,Ot){var Bt=this.constructor,At=yt.call(this,Ot)||this;return At.code=Dt,Object.setPrototypeOf(At,Bt.prototype),At}return j(xt,yt),xt}(Error);function Pt(yt,xt,Dt){return Dt===void 0&&(Dt=""),$(this,void 0,void 0,function(){var Ot;return ot(this,function(Bt){switch(Bt.label){case 0:return Bt.trys.push([0,2,,8]),(Ot=new wt.default(yt)).setQuery("__chobitsu-hide__","true"),[4,St.default.get(Ot.toString(),{responseType:xt})];case 1:return[2,Bt.sent().data];case 2:if(Bt.sent(),!Dt)return[3,7];Bt.label=3;case 3:return Bt.trys.push([3,6,,7]),[4,St.default.get(_t(Dt,yt),{responseType:xt})];case 4:return[4,Bt.sent().data];case 5:return[2,Bt.sent()];case 6:return Bt.sent(),[3,7];case 7:return[3,8];case 8:return[2,xt==="arraybuffer"?new ArrayBuffer(0):""]}})})}function _t(yt,xt){var Dt=new wt.default(yt);return Dt.setQuery("url",xt),Dt.setQuery("__chobitsu-hide__","true"),Dt.toString()}s.ErrorWithCode=Et,s.createErr=function(yt,xt){return new Et(yt,xt)},s.getUrl=function(){var yt=location.href;return gt.default(yt,"about:")?parent.location.href:yt},s.getOrigin=function(){var yt=location.origin;return yt==="null"?parent.location.origin:yt},s.getTextContent=function(yt,xt){return xt===void 0&&(xt=""),$(this,void 0,void 0,function(){return ot(this,function(Dt){switch(Dt.label){case 0:return[4,Pt(yt,"text",xt)];case 1:return[2,Dt.sent()]}})})},s.getBase64Content=function(yt,xt){return xt===void 0&&(xt=""),$(this,void 0,void 0,function(){var Dt;return ot(this,function(Ot){switch(Ot.label){case 0:return Dt=bt.default,[4,Pt(yt,"arraybuffer",xt)];case 1:return[2,Dt.apply(void 0,[Ot.sent(),"base64"])]}})})}},3191:function(i,s,o){(s=o(3645)(!1)).push([i.id,"#_console{padding-top:40px;padding-bottom:24px;width:100%;height:100%}#_console._js-input-hidden{padding-bottom:0}#_console ._control{position:absolute;width:100%;height:40px;left:0;top:0;cursor:default;font-size:0;background:var(--darker-background);color:var(--primary);line-height:20px;border-bottom:1px solid var(--border);padding:10px 10px 10px 35px}#_console ._control [class*=' _icon-'],#_console ._control [class^='_icon-']{display:inline-block;padding:10px;font-size:16px;position:absolute;top:0;cursor:pointer;transition:color .3s}#_console ._control [class*=' _icon-']._active,#_console ._control [class*=' _icon-']:active,#_console ._control [class^='_icon-']._active,#_console ._control [class^='_icon-']:active{color:var(--accent)}#_console ._control ._icon-clear{padding-right:0;left:0}#_console ._control ._icon-copy{right:0}#_console ._control ._icon-filter{right:23px}#_console ._control ._level{cursor:pointer;font-size:12px;height:20px;display:inline-block;margin:0 2px;padding:0 4px;line-height:20px;transition:background-color .3s,color .3s}#_console ._control ._level._active{background:var(--highlight);color:var(--select-foreground)}#_console ._control ._filter-text{white-space:nowrap;position:absolute;line-height:20px;max-width:80px;overflow:hidden;right:55px;font-size:14px;text-overflow:ellipsis}#_console ._js-input{pointer-events:none;position:absolute;z-index:100;left:0;bottom:0;width:100%;border-top:1px solid var(--border);height:24px}#_console ._js-input ._icon-arrow-right{line-height:23px;color:var(--accent);position:absolute;left:10px;top:0;z-index:10}#_console ._js-input._active{height:100%;padding-top:40px;padding-bottom:40px;border-top:none}#_console ._js-input._active ._icon-arrow-right{display:none}#_console ._js-input._active textarea{overflow:auto;padding-left:10px}#_console ._js-input ._buttons{display:none;position:absolute;left:0;bottom:0;width:100%;height:40px;color:var(--primary);background:var(--darker-background);font-size:12px;border-top:1px solid var(--border)}#_console ._js-input ._buttons ._button{pointer-events:all;cursor:pointer;flex:1;text-align:center;border-right:1px solid var(--border);height:40px;line-height:40px;transition:background-color .3s,color .3s}#_console ._js-input ._buttons ._button:last-child{border-right:none}#_console ._js-input ._buttons ._button:active{color:var(--select-foreground);background:var(--highlight)}#_console ._js-input textarea{overflow:hidden;pointer-events:all;padding:3px 10px;padding-left:25px;outline:0;border:none;font-size:14px;width:100%;height:100%;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;resize:none;color:var(--primary);background:var(--background)}._safe-area #_console{padding-bottom:calc(24px + env(safe-area-inset-bottom))}._safe-area #_console._js-input-hidden{padding-bottom:0}._safe-area #_console ._js-input{height:calc(24px + env(safe-area-inset-bottom))}._safe-area #_console ._js-input._active{height:100%;padding-bottom:calc(40px + env(safe-area-inset-bottom))}._safe-area #_console ._js-input ._buttons{height:calc(40px + env(safe-area-inset-bottom))}._safe-area #_console ._js-input ._buttons ._button{height:calc(40px + env(safe-area-inset-bottom))}",""]),i.exports=s},13:function(i,s,o){(s=o(3645)(!1)).push([i.id,"._dev-tools{position:absolute;width:100%;height:100%;left:0;bottom:0;background:var(--background);z-index:500;display:none;padding-top:40px!important;opacity:0;transition:opacity .3s;border-top:1px solid var(--border)}._dev-tools ._resizer{position:absolute;width:100%;touch-action:none;left:0;top:-8px;cursor:row-resize;z-index:120}._dev-tools ._tools{overflow:auto;-webkit-overflow-scrolling:touch;height:100%;width:100%;position:relative}._dev-tools ._tools ._tool{position:absolute;width:100%;height:100%;left:0;top:0;overflow:hidden;display:none}",""]),i.exports=s},5896:function(i,s,o){(s=o(3645)(!1)).push([i.id,"#_elements ._elements{position:absolute;width:100%;height:100%;left:0;top:0;padding-top:40px;padding-bottom:24px;font-size:14px}#_elements ._control{position:absolute;width:100%;height:40px;left:0;top:0;cursor:default;font-size:0;background:var(--darker-background);color:var(--primary);line-height:20px;border-bottom:1px solid var(--border);padding:10px 0}#_elements ._control [class*=' _icon-'],#_elements ._control [class^='_icon-']{display:inline-block;padding:10px;font-size:16px;position:absolute;top:0;cursor:pointer;transition:color .3s}#_elements ._control [class*=' _icon-']._active,#_elements ._control [class*=' _icon-']:active,#_elements ._control [class^='_icon-']._active,#_elements ._control [class^='_icon-']:active{color:var(--accent)}#_elements ._control ._icon-eye{right:0}#_elements ._control ._icon-copy{right:23px}#_elements ._control ._icon-delete{right:46px}#_elements ._dom-viewer-container{overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;padding:5px 0}#_elements ._crumbs{position:absolute;width:100%;height:24px;left:0;top:0;top:initial;line-height:24px;bottom:0;border-top:1px solid var(--border);background:var(--darker-background);color:var(--primary);font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}#_elements ._crumbs li{cursor:pointer;padding:0 7px;display:inline-block}#_elements ._crumbs li:hover,#_elements ._crumbs li:last-child{background:var(--highlight)}#_elements ._crumbs ._icon-arrow-right{font-size:12px;position:relative;top:1px}#_elements ._detail{position:absolute;width:100%;height:100%;left:0;top:0;z-index:10;padding-top:40px;display:none;background:var(--background)}#_elements ._detail ._control{padding:10px 35px}#_elements ._detail ._control ._element-name{font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%;display:inline-block}#_elements ._detail ._control ._icon-arrow-left{left:0}#_elements ._detail ._control ._icon-refresh{right:0}#_elements ._detail ._element{overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%}#_elements ._section{border-bottom:1px solid var(--border);color:var(--foreground);margin:10px 0}#_elements ._section h2{color:var(--primary);background:var(--darker-background);border-top:1px solid var(--border);padding:10px;line-height:18px;font-size:14px;transition:background-color .3s}#_elements ._section h2 ._btn{margin-left:5px;float:right;color:var(--primary);width:18px;height:18px;font-size:16px;cursor:pointer;transition:color .3s}#_elements ._section h2 ._btn._filter-text{width:auto;max-width:80px;font-size:14px;overflow:hidden;font-weight:400;text-overflow:ellipsis;display:inline-block}#_elements ._section h2 ._btn:active{color:var(--accent)}#_elements ._section h2 ._btn._btn-disabled{color:inherit!important;cursor:default!important;pointer-events:none;opacity:.5}#_elements ._section h2 ._btn._btn-disabled *{pointer-events:none}#_elements ._section h2._active-effect{cursor:pointer}#_elements ._section h2._active-effect:active{background:var(--highlight);color:var(--select-foreground)}#_elements ._attributes{font-size:12px}#_elements ._attributes a{color:var(--link-color)}#_elements ._attributes ._table-wrapper{overflow-x:auto;-webkit-overflow-scrolling:touch}#_elements ._attributes table td{padding:5px 10px}#_elements ._text-content{background:#fff}#_elements ._text-content ._content{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px}#_elements ._style-color{position:relative;top:1px;width:10px;height:10px;border-radius:50%;margin-right:2px;border:1px solid var(--border);display:inline-block}#_elements ._box-model{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px;text-align:center;border-bottom:1px solid var(--color)}#_elements ._computed-style{font-size:12px}#_elements ._computed-style a{color:var(--link-color)}#_elements ._computed-style ._table-wrapper{overflow-y:auto;-webkit-overflow-scrolling:touch;max-height:200px;border-top:1px solid var(--border)}#_elements ._computed-style table td{padding:5px 10px}#_elements ._computed-style table td._key{white-space:nowrap;color:var(--var-color)}#_elements ._styles{font-size:12px}#_elements ._styles ._style-wrapper{padding:10px}#_elements ._styles ._style-wrapper ._style-rules{border:1px solid var(--border);padding:10px;margin-bottom:10px}#_elements ._styles ._style-wrapper ._style-rules ._rule{padding-left:2em;word-break:break-all}#_elements ._styles ._style-wrapper ._style-rules ._rule a{color:var(--link-color)}#_elements ._styles ._style-wrapper ._style-rules ._rule span{color:var(--var-color)}#_elements ._styles ._style-wrapper ._style-rules:last-child{margin-bottom:0}#_elements ._listeners{font-size:12px}#_elements ._listeners ._listener-wrapper{padding:10px}#_elements ._listeners ._listener-wrapper ._listener{margin-bottom:10px;overflow:hidden;border:1px solid var(--border)}#_elements ._listeners ._listener-wrapper ._listener ._listener-type{padding:10px;background:var(--darker-background);color:var(--primary)}#_elements ._listeners ._listener-wrapper ._listener ._listener-content li{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px;border-top:none}._safe-area #_elements ._elements{padding-bottom:calc(24px + env(safe-area-inset-bottom))}._safe-area #_elements ._crumbs{height:calc(24px + env(safe-area-inset-bottom))}._safe-area #_elements ._element{padding-bottom:calc(0px + env(safe-area-inset-bottom))}@media screen and (min-width:680px){#_elements ._elements{width:50%}#_elements ._elements ._control ._icon-eye{display:none}#_elements ._elements ._control ._icon-copy{right:0}#_elements ._elements ._control ._icon-delete{right:23px}#_elements ._detail{width:50%;left:initial;right:0;border-left:1px solid var(--border)}#_elements ._detail ._control{padding-left:10px}#_elements ._detail ._control ._icon-arrow-left{display:none}}",""]),i.exports=s},9195:function(i,s,o){(s=o(3645)(!1)).push([i.id,"._container ._entry-btn{touch-action:none;width:40px;height:40px;display:flex;background:#000;opacity:.3;border-radius:10px;position:relative;z-index:1000;transition:opacity .3s;color:#fff;font-size:25px;align-items:center;justify-content:center}._container ._entry-btn._active,._container ._entry-btn:active{opacity:.8}",""]),i.exports=s},879:function(i,s,o){(s=o(3645)(!1)).push([i.id,"#_info{overflow-y:auto;-webkit-overflow-scrolling:touch}#_info li{margin:10px;border:1px solid var(--border)}#_info li ._content,#_info li ._title{padding:10px}#_info li ._title{position:relative;padding-bottom:0;color:var(--accent)}#_info li ._title ._icon-copy{position:absolute;right:10px;top:14px;color:var(--primary);cursor:pointer;transition:color .3s}#_info li ._title ._icon-copy:active{color:var(--accent)}#_info li ._content{margin:0;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;color:var(--foreground);font-size:12px;word-break:break-all}#_info li ._content table{width:100%;border-collapse:collapse}#_info li ._content table td,#_info li ._content table th{border:1px solid var(--border);padding:10px}#_info li ._content *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#_info li ._content a{color:var(--link-color)}#_info li ._device-key,#_info li ._system-key{width:100px}._safe-area #_info{padding-bottom:calc(10px + env(safe-area-inset-bottom))}",""]),i.exports=s},3180:function(i,s,o){(s=o(3645)(!1)).push([i.id,"#_network ._network{position:absolute;width:100%;height:100%;left:0;top:0;padding-top:39px}#_network ._control{position:absolute;width:100%;height:40px;left:0;top:0;cursor:default;font-size:0;background:var(--darker-background);color:var(--primary);line-height:20px;border-bottom:1px solid var(--border);padding:10px;border-bottom:none}#_network ._control [class*=' _icon-'],#_network ._control [class^='_icon-']{display:inline-block;padding:10px;font-size:16px;position:absolute;top:0;cursor:pointer;transition:color .3s}#_network ._control [class*=' _icon-']._active,#_network ._control [class*=' _icon-']:active,#_network ._control [class^='_icon-']._active,#_network ._control [class^='_icon-']:active{color:var(--accent)}#_network ._control ._title{font-size:14px}#_network ._control ._icon-clear{left:23px}#_network ._control ._icon-eye{right:0}#_network ._control ._icon-copy{right:23px}#_network ._control ._icon-filter{right:46px}#_network ._control ._filter-text{white-space:nowrap;position:absolute;line-height:20px;max-width:80px;overflow:hidden;right:88px;font-size:14px;text-overflow:ellipsis}#_network ._control ._icon-record{left:0}#_network ._control ._icon-record._recording{color:var(--console-error-foreground);text-shadow:0 0 4px var(--console-error-foreground)}#_network ._request-error{color:var(--console-error-foreground)}#_network .luna-data-grid:focus .luna-data-grid-data-container ._request-error.luna-data-grid-selected{background:var(--console-error-background)}#_network .luna-data-grid{border-left:none;border-right:none}#_network ._detail{position:absolute;width:100%;height:100%;left:0;top:0;z-index:10;display:none;padding-top:40px;background:var(--background)}#_network ._detail ._control{padding:10px 35px;border-bottom:1px solid var(--border)}#_network ._detail ._control ._url{font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%;display:inline-block}#_network ._detail ._control ._icon-arrow-left{left:0}#_network ._detail ._control ._icon-delete{left:0;display:none}#_network ._detail ._control ._icon-copy{right:0}#_network ._detail ._http{overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%}#_network ._detail ._http ._section{border-top:1px solid var(--border);border-bottom:1px solid var(--border);margin-top:10px;margin-bottom:10px}#_network ._detail ._http ._section h2{background:var(--darker-background);color:var(--primary);padding:10px;line-height:18px;font-size:14px}#_network ._detail ._http ._section table{color:var(--foreground)}#_network ._detail ._http ._section table *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#_network ._detail ._http ._section table td{font-size:12px;padding:5px 10px;word-break:break-all}#_network ._detail ._http ._section table ._key{white-space:nowrap;font-weight:700;color:var(--accent)}#_network ._detail ._http ._data,#_network ._detail ._http ._response{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px;font-size:12px;margin:10px 0;white-space:pre-wrap;border-top:1px solid var(--border);color:var(--foreground);border-bottom:1px solid var(--border)}._safe-area #_network ._http{padding-bottom:calc(0px + env(safe-area-inset-bottom))}@media screen and (min-width:680px){#_network ._network ._control ._icon-eye{display:none}#_network ._network ._control ._icon-copy{right:0}#_network ._network ._control ._icon-filter{right:23px}#_network ._network ._control ._filter-text{right:55px}#_network ._detail{width:50%;left:initial;right:0;border-left:1px solid var(--border)}#_network ._detail ._control ._icon-arrow-left{display:none}#_network ._detail ._control ._icon-delete{display:block}}",""]),i.exports=s},2488:function(i,s,o){(s=o(3645)(!1)).push([i.id,"#_resources{overflow-y:auto;-webkit-overflow-scrolling:touch;padding:10px;font-size:14px}#_resources ._section{margin-bottom:10px;overflow:hidden;border:1px solid var(--border)}#_resources ._section._warn{border:1px solid var(--console-warn-border)}#_resources ._section._warn ._title{background:var(--console-warn-background);color:var(--console-warn-foreground)}#_resources ._section._danger{border:1px solid var(--console-error-border)}#_resources ._section._danger ._title{background:var(--console-error-background);color:var(--console-error-foreground)}#_resources ._section._cookie,#_resources ._section._local-storage,#_resources ._section._session-storage{border:none}#_resources ._section._cookie ._title,#_resources ._section._local-storage ._title,#_resources ._section._session-storage ._title{border:1px solid var(--border);border-bottom:none}#_resources ._title{padding:10px;line-height:18px;color:var(--primary);background:var(--darker-background)}#_resources ._title ._btn{margin-left:5px;float:right;color:var(--primary);width:18px;height:18px;font-size:16px;cursor:pointer;transition:color .3s}#_resources ._title ._btn._filter-text{width:auto;max-width:80px;font-size:14px;overflow:hidden;font-weight:400;text-overflow:ellipsis;display:inline-block}#_resources ._title ._btn:active{color:var(--accent)}#_resources ._title ._btn._btn-disabled{color:inherit!important;cursor:default!important;pointer-events:none;opacity:.5}#_resources ._title ._btn._btn-disabled *{pointer-events:none}#_resources ._link-list{font-size:12px;color:var(--foreground)}#_resources ._link-list li{padding:10px;word-break:break-all}#_resources ._link-list li a{color:var(--link-color)!important}#_resources ._image-list{color:var(--foreground);font-size:12px;display:flex;flex-wrap:wrap;padding:10px!important}#_resources ._image-list:after{content:'';display:block;clear:both}#_resources ._image-list li{flex-grow:1;cursor:pointer;overflow-y:hidden}#_resources ._image-list li._image{height:100px;font-size:0}#_resources ._image-list li img{height:100px;min-width:100%;-o-object-fit:cover;object-fit:cover}._safe-area #_resources{padding-bottom:calc(10px + env(safe-area-inset-bottom))}",""]),i.exports=s},8011:function(i,s,o){(s=o(3645)(!1)).push([i.id,"#_settings{overflow-y:auto;-webkit-overflow-scrolling:touch}._safe-area #_settings{padding-bottom:calc(0px + env(safe-area-inset-bottom))}",""]),i.exports=s},5571:function(i,s,o){(s=o(3645)(!1)).push([i.id,"#_snippets{overflow-y:auto;-webkit-overflow-scrolling:touch;padding:10px}#_snippets ._section{margin-bottom:10px;border:1px solid var(--border);overflow:hidden;cursor:pointer}#_snippets ._section:active ._name{background:var(--highlight);color:var(--select-foreground)}#_snippets ._section ._name{padding:10px;line-height:18px;color:var(--primary);background:var(--darker-background);transition:background-color .3s}#_snippets ._section ._name ._btn{margin-left:10px;float:right;text-align:center;width:18px;height:18px;font-size:12px}#_snippets ._section ._description{font-size:12px;color:var(--foreground);padding:10px;transition:background-color .3s}._safe-area #_snippets{padding-bottom:calc(10px + env(safe-area-inset-bottom))}",""]),i.exports=s},7346:function(i,s,o){(s=o(3645)(!1)).push([i.id,"._search-highlight-block{display:inline}._search-highlight-block ._keyword{background:var(--console-warn-background);color:var(--console-warn-foreground)}",""]),i.exports=s},1344:function(i,s,o){(s=o(3645)(!1)).push([i.id,"#_sources{font-size:0;overflow-y:auto;-webkit-overflow-scrolling:touch;color:var(--foreground)}#_sources ._code-wrapper,#_sources ._raw-wrapper{overflow-x:auto;-webkit-overflow-scrolling:touch;width:100%;min-height:100%}#_sources ._code,#_sources ._raw{height:100%}#_sources ._code ._keyword,#_sources ._raw ._keyword{color:var(--keyword-color)}#_sources ._code ._comment,#_sources ._raw ._comment{color:var(--comment-color)}#_sources ._code ._number,#_sources ._raw ._number{color:var(--number-color)}#_sources ._code ._string,#_sources ._raw ._string{color:var(--string-color)}#_sources ._code ._operator,#_sources ._raw ._operator{color:var(--operator-color)}#_sources ._code[data-type=html] ._keyword,#_sources ._raw[data-type=html] ._keyword{color:var(--tag-name-color)}#_sources ._image{font-size:12px}#_sources ._image ._breadcrumb{background:var(--darker-background);color:var(--primary);-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;margin-bottom:10px;word-break:break-all;padding:10px;font-size:16px;min-height:40px;border-bottom:1px solid var(--border)}#_sources ._image ._img-container{text-align:center}#_sources ._image ._img-container img{max-width:100%}#_sources ._image ._img-info{text-align:center;margin:20px 0;color:var(--foreground)}#_sources ._json{padding:0 10px}#_sources ._json *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#_sources iframe{width:100%;height:100%}",""]),i.exports=s},8020:function(i,s,o){(s=o(3645)(!1)).push([i.id,"._container a,._container abbr,._container acronym,._container address,._container applet,._container article,._container aside,._container audio,._container b,._container big,._container blockquote,._container canvas,._container caption,._container center,._container cite,._container code,._container dd,._container del,._container details,._container dfn,._container dl,._container dt,._container em,._container embed,._container fieldset,._container figcaption,._container figure,._container footer,._container form,._container h1,._container h2,._container h3,._container h4,._container h5,._container h6,._container header,._container hgroup,._container i,._container iframe,._container img,._container ins,._container kbd,._container label,._container legend,._container li,._container mark,._container menu,._container nav,._container object,._container ol,._container output,._container p,._container pre,._container q,._container ruby,._container s,._container samp,._container section,._container small,._container span,._container strike,._container strong,._container sub,._container summary,._container sup,._container table,._container tbody,._container td,._container tfoot,._container th,._container thead,._container time,._container tr,._container tt,._container u,._container ul,._container var,._container video{margin:0;padding:0;border:0;font-size:100%}._container article,._container aside,._container details,._container figcaption,._container figure,._container footer,._container header,._container hgroup,._container menu,._container nav,._container section{display:block}._container body{line-height:1}._container ol,._container ul{list-style:none}._container blockquote,._container q{quotes:none}._container blockquote:after,._container blockquote:before,._container q:after,._container q:before{content:'';content:none}._container table{border-collapse:collapse;border-spacing:0}",""]),i.exports=s},8516:function(i,s,o){(s=o(3645)(!1)).push([i.id,`.luna-console{background:var(--background)}.luna-console-header{color:var(--link-color);border-bottom-color:var(--border)}.luna-console-nesting-level{border-right-color:var(--border)}.luna-console-nesting-level::before{border-bottom-color:var(--border)}.luna-console-log-container.luna-console-selected .luna-console-log-item{background:var(--contrast)}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:var(--border)}.luna-console-log-item{border-bottom-color:var(--border);color:var(--foreground)}.luna-console-log-item a{color:var(--link-color)!important}.luna-console-log-item .luna-console-icon-container .luna-console-icon{color:var(--foreground)}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{color:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{color:#e8a400}.luna-console-log-item .luna-console-count{color:var(--select-foreground);background:var(--highlight)}.luna-console-log-item.luna-console-warn{color:var(--console-warn-foreground);background:var(--console-warn-background);border-color:var(--console-warn-border)}.luna-console-log-item.luna-console-error{background:var(--console-error-background);color:var(--console-error-foreground);border-color:var(--console-error-border)}.luna-console-log-item.luna-console-error .luna-console-count{background:var(--console-error-foreground)}.luna-console-log-item .luna-console-code .luna-console-key{color:var(--var-color)}.luna-console-log-item .luna-console-code .luna-console-number{color:var(--number-color)}.luna-console-log-item .luna-console-code .luna-console-null{color:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-string{color:var(--string-color)}.luna-console-log-item .luna-console-code .luna-console-boolean{color:var(--keyword-color)}.luna-console-log-item .luna-console-code .luna-console-special{color:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-keyword{color:var(--keyword-color)}.luna-console-log-item .luna-console-code .luna-console-operator{color:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-comment{color:var(--comment-color)}.luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-log-item .luna-console-log-content .luna-console-undefined{color:var(--operator-color)}.luna-console-log-item .luna-console-log-content .luna-console-number{color:var(--number-color)}.luna-console-log-item .luna-console-log-content .luna-console-boolean{color:var(--keyword-color)}.luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-log-item .luna-console-log-content .luna-console-symbol{color:var(--var-color)}.luna-console-preview .luna-console-key{color:var(--var-color)}.luna-console-preview .luna-console-number{color:var(--number-color)}.luna-console-preview .luna-console-null{color:var(--operator-color)}.luna-console-preview .luna-console-string{color:var(--string-color)}.luna-console-preview .luna-console-boolean{color:var(--keyword-color)}.luna-console-preview .luna-console-special{color:var(--operator-color)}.luna-console-preview .luna-console-keyword{color:var(--keyword-color)}.luna-console-preview .luna-console-operator{color:var(--operator-color)}.luna-console-preview .luna-console-comment{color:var(--comment-color)}.luna-object-viewer{color:var(--primary);font-size:12px!important}.luna-object-viewer-null{color:var(--operator-color)}.luna-object-viewer-regexp,.luna-object-viewer-string{color:var(--string-color)}.luna-object-viewer-number{color:var(--number-color)}.luna-object-viewer-boolean{color:var(--keyword-color)}.luna-object-viewer-special{color:var(--operator-color)}.luna-object-viewer-key,.luna-object-viewer-key-lighter{color:var(--var-color)}.luna-object-viewer-expanded:before{border-color:transparent;border-top-color:var(--foreground)}.luna-object-viewer-collapsed:before{border-top-color:transparent;border-left-color:var(--foreground)}.luna-notification{pointer-events:none!important;padding:10px;z-index:1000}.luna-notification-item{z-index:500;color:var(--foreground);background:var(--background);box-shadow:none;padding:5px 10px;border:1px solid var(--border)}.luna-notification-upper{margin-bottom:10px}.luna-notification-lower{margin-top:10px}.luna-data-grid{color:var(--foreground);background:var(--background);border-color:var(--border)}.luna-data-grid:focus .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:var(--accent)}.luna-data-grid td,.luna-data-grid th{border-color:var(--border)}.luna-data-grid th{background:var(--darker-background)}.luna-data-grid th.luna-data-grid-sortable:active,.luna-data-grid th.luna-data-grid-sortable:hover{color:var(--select-foreground);background:var(--highlight)}.luna-data-grid .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:var(--highlight)}.luna-data-grid .luna-data-grid-data-container tr:nth-child(even){background:var(--contrast)}.luna-dom-viewer{color:var(--foreground)}.luna-dom-viewer .luna-dom-viewer-html-tag,.luna-dom-viewer .luna-dom-viewer-tag-name{color:var(--tag-name-color)}.luna-dom-viewer .luna-dom-viewer-attribute-name{color:var(--attribute-name-color)}.luna-dom-viewer .luna-dom-viewer-attribute-value{color:var(--string-color)}.luna-dom-viewer .luna-dom-viewer-html-comment{color:var(--comment-color)}.luna-dom-viewer .luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:var(--contrast)}.luna-dom-viewer .luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:var(--highlight)}.luna-dom-viewer .luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:var(--accent);opacity:.2}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-key{color:var(--var-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-number{color:var(--number-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-null{color:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-string{color:var(--string-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-boolean{color:var(--keyword-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-special{color:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:var(--keyword-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-operator{color:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-comment{color:var(--comment-color)}.luna-dom-viewer-children{margin:0;padding-left:15px!important}.luna-modal{z-index:9999999}.luna-modal-body,.luna-modal-input{color:var(--foreground);background:var(--background)}.luna-modal-input{-webkit-user-select:text!important;-moz-user-select:text!important;-ms-user-select:text!important;user-select:text!important;border-color:var(--border)}.luna-modal-button-group .luna-modal-secondary{border-color:var(--border);color:var(--foreground);background:var(--background)}.luna-modal-button-group .luna-modal-primary{background:var(--accent)}.luna-modal-button-group .luna-modal-button:active::before{background:var(--accent)}.luna-tab{position:absolute;left:0;top:0;color:var(--foreground);background:var(--darker-background)}.luna-tab-tabs-container{border-color:var(--border)}.luna-tab-item.luna-tab-selected,.luna-tab-item:hover{background:var(--highlight);color:var(--select-foreground)}.luna-tab-slider{background:var(--accent)}.luna-text-viewer{color:var(--foreground);border:none;border-bottom:1px solid var(--border);background:var(--background);font-size:12px}.luna-text-viewer .luna-text-viewer-line-text{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-text-viewer .luna-text-viewer-line-text *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-text-viewer .luna-text-viewer-copy,.luna-text-viewer .luna-text-viewer-line-number{border-color:var(--border)}.luna-text-viewer .luna-text-viewer-copy .luna-text-viewer-icon-check{color:var(--accent)}.luna-text-viewer .luna-text-viewer-copy{background-color:var(--background)}.luna-setting{color:var(--foreground);background:var(--background)}.luna-setting-item.luna-setting-selected,.luna-setting-item:hover{background:var(--darker-background)}.luna-setting-item.luna-setting-selected:focus{outline:0}.luna-setting-item-title{font-size:14px}.luna-setting-item-separator{border-color:var(--border)}.luna-setting-item-checkbox input{border-color:var(--border)}.luna-setting-item-checkbox input:checked{background-color:var(--accent);border-color:var(--accent)}.luna-setting-item-select .luna-setting-select select{color:var(--foreground);border-color:var(--border);background:var(--background)}.luna-setting-item-select .luna-setting-select:after{border-top-color:var(--foreground)}.luna-setting-item-button button{color:var(--accent);background:var(--background);border-color:var(--border)}.luna-setting-item-button button:active,.luna-setting-item-button button:hover{background:var(--darker-background)}.luna-setting-item-button button:active{border:1px solid var(--accent)}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{background:var(--border)}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar .luna-setting-range-track-progress{background:var(--accent)}.luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{border-color:var(--border);background:radial-gradient(circle at center,var(--dark) 0,var(--dark) 15%,var(--light) 22%,var(--light) 100%)}.luna-box-model{background:0 0}.luna-box-model-position{color:var(--foreground)}._container{min-width:320px;pointer-events:none;position:fixed;left:0;top:0;width:100%;height:100%;z-index:9999999;color:var(--foreground);font-family:".SFNSDisplay-Regular","Helvetica Neue","Lucida Grande","Segoe UI",Tahoma,sans-serif;font-size:14px;direction:ltr}._container._dark{color-scheme:dark}._container *{box-sizing:border-box;pointer-events:all;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;-webkit-text-size-adjust:none}._container ul{list-style:none;padding:0;margin:0}._container h1,._container h2,._container h3,._container h4{margin:0}._container h2{font-size:14px}._container h2 [class*=' _icon-'],._container h2 [class^='_icon-']{font-weight:400}._hidden{display:none}._icon-disabled{opacity:.5;pointer-events:none;cursor:default!important}._icon-disabled:active{color:inherit!important}._tag-name-color{color:var(--tag-name-color)}._function-color{color:var(--function-color)}._attribute-name-color{color:var(--attribute-name-color)}._operator-color{color:var(--operator-color)}._string-color{color:var(--string-color)}`,""]),i.exports=s},6833:function(i,s,o){(s=o(3645)(!1)).push([i.id,".luna-box-model{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;display:inline-block;color:#222;font-size:12px;text-align:center;white-space:nowrap}.luna-box-model.luna-box-model-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-box-model.luna-box-model-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-box-model .luna-box-model-hidden,.luna-box-model.luna-box-model-hidden{display:none}.luna-box-model .luna-box-model-invisible,.luna-box-model.luna-box-model-invisible{visibility:hidden}.luna-box-model *{box-sizing:border-box}.luna-box-model.luna-box-model-theme-dark{color:#a5a5a5;background-color:#242424}.luna-box-model-label{position:absolute;margin-left:3px;padding:0 2px}.luna-box-model-bottom,.luna-box-model-left,.luna-box-model-right,.luna-box-model-top{display:inline-block}.luna-box-model-left,.luna-box-model-right{vertical-align:middle}.luna-box-model-border,.luna-box-model-content,.luna-box-model-margin,.luna-box-model-padding,.luna-box-model-position{position:relative;display:inline-block;text-align:center;vertical-align:middle;padding:3px;margin:3px}.luna-box-model-position{border:1px grey dotted}.luna-box-model-margin{color:#333;border:1px dashed;background:rgba(246,178,107,.66)}.luna-box-model-border{color:#333;border:1px #000 solid;background:rgba(255,229,153,.66)}.luna-box-model-padding{color:#333;border:1px grey dashed;background:rgba(147,196,125,.55)}.luna-box-model-content{color:#333;border:1px grey solid;min-width:100px;background:rgba(111,168,220,.66)}",""]),i.exports=s},9327:function(i,s,o){(s=o(3645)(!1)).push([i.id,`@font-face{font-family:luna-console-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAasAAsAAAAACnAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAI4AAADcIsYnIk9TLzIAAAGYAAAAPgAAAFZWmlGRY21hcAAAAdgAAAD2AAACyDioZ9NnbHlmAAAC0AAAAZgAAAH8Lq6nDGhlYWQAAARoAAAAMQAAADZ25cSzaGhlYQAABJwAAAAdAAAAJAgCBBRobXR4AAAEvAAAABkAAABYGAH//GxvY2EAAATYAAAAGAAAAC4J8glUbWF4cAAABPAAAAAfAAAAIAEjAFBuYW1lAAAFEAAAASkAAAIWm5e+CnBvc3QAAAY8AAAAcAAAAJ7qA/7MeJxNjTsOwjAQRJ8TJzE2hPBrKBBHQByAAiGqFBRcIBVCiqhyBA7O2AgRr9Y7M2+lxQCeAyeyy7W9U/fd8GKL5fsiH2vTPx8d7ufEbJpO/aagYc+RM7fEjBKnmiRuySmZUTNNf0wybYSRj9VoO4iU7NQh+Up8qelZs5EupP75Shfm2oz3Kmkvt/gARcgJKwAAeJxjYGQUZ5zAwMrAwNTJdIaBgaEfQjO+ZjBi5ACKMrAyM2AFAWmuKQwHGHQ/srGAuDEsTGBhRhABALQ1CMwAAHiczdJNbsIwEIbh1+QHQsJviNRFF1XX7aEQRZQNRQjEHXqgrnopn4B+E8+qqip117GeRB4nk4lloAAyeZIcwicBiw9lQ5/PGPf5nHfNV8yVyXlmzZY9R05cuMbydtOqZTfsOCh7Vjb02e8RVMXGHfc8aDxqwFKVF7QMtdLpmzUVDSOmTJjpnUH/3YJSBcofqv4Wyz8+b6FuWvXSjW1SV30r1sl/icYuofFZh+1+Yn+7dnPZuIW8uFa2big7t5JXZzX3znbh4Gp5c5UcnfVyciM5u6lc3ESuTnsZQ2JnLQ4S7J4ldjZjntj5jEVi5zaWCeUXWN4q9AAAeJxdUMFOU0EUnTMzb2o1FB5O5wENg31k5mExVEo7jSGBEuO6CStDmtbIBuiKBYg/gRu/ABO3/ocscOEXsHBpogtWvFfnvQgxJnduztx7zknuIXQyIYSDE9IgLwmBmIZI1pDYbTSxBqeW4KvrVKSmaaRKFZREE7YJIyONSLW6W37bLiRxscXNTH1zbnFqlnJ5Eu+G9MnT8JBy9l69ELx69Ohd9JCryrwcU07TbCU5H4y+jQbnyco/EF+8x1/eaX03bCzR8IgGwVn0WC/I8YOzaLGS+4+p4K8O/lcXkPhj/CP0ig1JQIhJyugCxz3o7LqH4YUH0L3swlMK3q+CV/HMbhkJAqlarm1jgd+97DpnfsKPeH15eT2+l9L5OJ/kcjZJfY6MU++wQPzI+PRECUJjo97aAtqupaqhFLHtRLHNf1Kwn9lAOid9L7tV9nzVldNL3dC+NmrGOGM+sme2VrO335Mda3foXlXravY57zemY23HkLs72RsW5JegDjZK99FnPPtwl8FX1i92IfAax6yfvkWf/AHb1F1JeJxjYGRgYABi3/mPYuP5bb4ycLOABKI4H+9rgNH//zIwsDCzMAElOBhAJAMAQ2IK+QAAAHicY2BkYGBhAAEWhv9///9lYWZgZEAFYgBbLQQgAAAAeJxjYGBgYGH4/58FTIPZf2FsSgAAM58EEwAAAHicY2AAgjyGJoYlDI8YPjD8ww8BeTMTR3icY2BkYGAQY3BhYGYAASYg5gJCBob/YD4DABGFAXQAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxtxksOgjAUQNF3kaIW/x9cBYtqgEAnLXlp0+1rwtQzuVcq2Vj5r6NiR42hYc+BI5aWE2cuXLlx58GTF286PmIm1ajGhzWnJub0S12cBjs4nVI/xhLabdXPS2JCiXgCK5lEwTHQMzKziHwBqnYYpg==') format('woff')}[class*=' luna-console-icon-'],[class^=luna-console-icon-]{display:inline-block;font-family:luna-console-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-console-icon-error:before{content:'\\f101'}.luna-console-icon-input:before{content:'\\f102'}.luna-console-icon-output:before{content:'\\f103'}.luna-console-icon-warn:before{content:'\\f104'}.luna-console-icon-caret-down:before{content:'\\f105'}.luna-console-icon-caret-right:before{content:'\\f106'}.luna-console{background:#fff;overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;position:relative;will-change:scroll-position;cursor:default;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-console.luna-console-theme-dark{background-color:#242424}.luna-console-hidden{display:none}.luna-console-fake-logs{position:absolute;left:0;top:0;pointer-events:none;visibility:hidden;width:100%}.luna-console-logs{padding-top:1px;position:absolute;width:100%}.luna-console-log-container{box-sizing:content-box}.luna-console-log-container.luna-console-selected .luna-console-log-item{background:#ecf1f8}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#ccdef5}.luna-console-header{white-space:nowrap;display:flex;font-size:11px;color:#545454;border-top:1px solid transparent;border-bottom:1px solid #ccc}.luna-console-header .luna-console-time-from-container{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:3px 10px}.luna-console-nesting-level{width:14px;flex-shrink:0;margin-top:-1px;margin-bottom:-1px;position:relative;border-right:1px solid #ccc}.luna-console-nesting-level.luna-console-group-closed::before{content:""}.luna-console-nesting-level::before{border-bottom:1px solid #ccc;position:absolute;top:0;left:0;margin-left:100%;width:5px;height:100%;box-sizing:border-box}.luna-console-log-item{position:relative;display:flex;border-top:1px solid transparent;border-bottom:1px solid #ccc;margin-top:-1px;color:#333}.luna-console-log-item:after{content:"";display:block;clear:both}.luna-console-log-item .luna-console-code{display:inline;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-console-log-item .luna-console-code .luna-console-keyword{color:#881280}.luna-console-log-item .luna-console-code .luna-console-number{color:#1c00cf}.luna-console-log-item .luna-console-code .luna-console-operator{color:gray}.luna-console-log-item .luna-console-code .luna-console-comment{color:#236e25}.luna-console-log-item .luna-console-code .luna-console-string{color:#1a1aa6}.luna-console-log-item a{color:#15c!important}.luna-console-log-item .luna-console-icon-container{margin:0 -6px 0 10px}.luna-console-log-item .luna-console-icon-container .luna-console-icon{line-height:20px;font-size:12px;color:#333;position:relative}.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-right{top:0;left:-2px}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{top:0;color:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{top:0;color:#e8a400}.luna-console-log-item .luna-console-count{background:#8097bd;color:#fff;padding:2px 4px;border-radius:10px;font-size:12px;float:left;margin:1px -6px 0 10px}.luna-console-log-item .luna-console-log-content-wrapper{flex:1;overflow:hidden}.luna-console-log-item .luna-console-log-content{padding:3px 0;margin:0 10px;overflow-x:auto;-webkit-overflow-scrolling:touch;white-space:pre-wrap;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-console-log-item .luna-console-log-content *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-console-log-item .luna-console-log-content>*{vertical-align:top}.luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-log-item .luna-console-log-content .luna-console-undefined{color:#5e5e5e}.luna-console-log-item .luna-console-log-content .luna-console-number{color:#1c00cf}.luna-console-log-item .luna-console-log-content .luna-console-boolean{color:#0d22aa}.luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-log-item .luna-console-log-content .luna-console-symbol{color:#881391}.luna-console-log-item .luna-console-data-grid,.luna-console-log-item .luna-console-dom-viewer{white-space:initial}.luna-console-log-item.luna-console-error{z-index:50;background:#fff0f0;color:red;border-top:1px solid #ffd6d6;border-bottom:1px solid #ffd6d6}.luna-console-log-item.luna-console-error .luna-console-stack{padding-left:1.2em;white-space:nowrap}.luna-console-log-item.luna-console-error .luna-console-count{background:red}.luna-console-log-item.luna-console-debug{z-index:20}.luna-console-log-item.luna-console-input{border-bottom-color:transparent}.luna-console-log-item.luna-console-warn{z-index:40;color:#5c5c00;background:#fffbe5;border-top:1px solid #fff5c2;border-bottom:1px solid #fff5c2}.luna-console-log-item.luna-console-warn .luna-console-count{background:#e8a400}.luna-console-log-item.luna-console-info{z-index:30}.luna-console-log-item.luna-console-group,.luna-console-log-item.luna-console-groupCollapsed{font-weight:700}.luna-console-preview{display:inline-block}.luna-console-preview .luna-console-preview-container{display:flex;align-items:center}.luna-console-preview .luna-console-json{overflow-x:auto;-webkit-overflow-scrolling:touch;padding-left:12px}.luna-console-preview .luna-console-preview-icon-container{display:block}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon{position:relative;font-size:12px}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon-caret-down{top:2px}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon-caret-right{top:1px}.luna-console-preview .luna-console-preview-content-container{word-break:break-all}.luna-console-preview .luna-console-descriptor,.luna-console-preview .luna-console-object-preview{font-style:italic}.luna-console-preview .luna-console-key{color:#881391}.luna-console-preview .luna-console-number{color:#1c00cf}.luna-console-preview .luna-console-null{color:#5e5e5e}.luna-console-preview .luna-console-string{color:#c41a16}.luna-console-preview .luna-console-boolean{color:#0d22aa}.luna-console-preview .luna-console-special{color:#5e5e5e}.luna-console-theme-dark{color-scheme:dark}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item{background:#29323d}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#4173b4}.luna-console-theme-dark .luna-console-log-item{color:#a5a5a5;border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-keyword{color:#e36eec}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-operator{color:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-comment{color:#747474}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-string{color:#f29766}.luna-console-theme-dark .luna-console-log-item.luna-console-error{background:#290000;color:#ff8080;border-top-color:#5c0000;border-bottom-color:#5c0000}.luna-console-theme-dark .luna-console-log-item.luna-console-error .luna-console-count{background:#ff8080}.luna-console-theme-dark .luna-console-log-item.luna-console-warn{color:#ffcb6b;background:#332a00;border-top-color:#650;border-bottom-color:#650}.luna-console-theme-dark .luna-console-log-item .luna-console-count{background:#42597f;color:#949494}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-undefined{color:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-boolean,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-symbol{color:#e36eec}.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-right{color:#9aa0a6}.luna-console-theme-dark .luna-console-header{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level{border-right-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level::before{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-preview .luna-console-key{color:#e36eec}.luna-console-theme-dark .luna-console-preview .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-null{color:#7f7f7f}.luna-console-theme-dark .luna-console-preview .luna-console-string{color:#f29766}.luna-console-theme-dark .luna-console-preview .luna-console-boolean{color:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-special{color:#7f7f7f}`,""]),i.exports=s},4987:function(i,s,o){(s=o(3645)(!1)).push([i.id,'.luna-data-grid{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;position:relative;font-size:12px;border:1px solid #ccc;overflow:hidden;outline:0}.luna-data-grid.luna-data-grid-platform-windows{font-family:"Segoe UI",Tahoma,sans-serif}.luna-data-grid.luna-data-grid-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-data-grid .luna-data-grid-hidden,.luna-data-grid.luna-data-grid-hidden{display:none}.luna-data-grid .luna-data-grid-invisible,.luna-data-grid.luna-data-grid-invisible{visibility:hidden}.luna-data-grid *{box-sizing:border-box}.luna-data-grid.luna-data-grid-theme-dark{color:#a5a5a5;background-color:#242424}.luna-data-grid.luna-data-grid-theme-dark{color:#a5a5a5;background:#242424;border-color:#3d3d3d}.luna-data-grid table{width:100%;height:100%;border-collapse:separate;border-spacing:0;table-layout:fixed}.luna-data-grid td,.luna-data-grid th{padding:1px 4px;border-left:1px solid #ccc;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.luna-data-grid td:first-child,.luna-data-grid th:first-child{border-left:none}.luna-data-grid th{font-weight:400;border-bottom:1px solid #ccc;text-align:left;background:#f3f3f3}.luna-data-grid th.luna-data-grid-sortable:active,.luna-data-grid th.luna-data-grid-sortable:hover{background:#e6e6e6}.luna-data-grid td{height:20px;cursor:default;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-data-grid:focus .luna-data-grid-node.luna-data-grid-selected{color:#fff;background:#1a73e8}.luna-data-grid:focus.luna-data-grid-theme-dark .luna-data-grid-node.luna-data-grid-selected{background:#0e639c}.luna-data-grid-data-container,.luna-data-grid-header-container{overflow:hidden}.luna-data-grid-header-container{height:21px}.luna-data-grid-data-container{overflow-y:auto}.luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:#ddd}.luna-data-grid-data-container tr:nth-child(even){background:#f2f7fd}.luna-data-grid-filler-row td{height:auto}.luna-data-grid-resizer{position:absolute;top:0;bottom:0;width:5px;z-index:500;touch-action:none;cursor:col-resize}.luna-data-grid-resizing{cursor:col-resize!important}.luna-data-grid-resizing .luna-data-grid *{cursor:col-resize!important}.luna-data-grid-theme-dark{color-scheme:dark}.luna-data-grid-theme-dark td,.luna-data-grid-theme-dark th{border-color:#3d3d3d}.luna-data-grid-theme-dark th{background:#292a2d}.luna-data-grid-theme-dark th.luna-data-grid-sortable:hover{background:#303030}.luna-data-grid-theme-dark .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:#393939}.luna-data-grid-theme-dark .luna-data-grid-data-container tr:nth-child(even){background:#0b2544}',""]),i.exports=s},8903:function(i,s,o){(s=o(3645)(!1)).push([i.id,"@font-face{font-family:luna-dom-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAASgAAsAAAAAB4QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFwAAACMIRYl8k9TLzIAAAFkAAAAPQAAAFZLxUkaY21hcAAAAaQAAADHAAACWBcU1KRnbHlmAAACbAAAAC4AAAAwabU7V2hlYWQAAAKcAAAALwAAADZzjr4faGhlYQAAAswAAAAYAAAAJAFyANdobXR4AAAC5AAAABAAAAA4AZAAAGxvY2EAAAL0AAAAEAAAAB4AnACQbWF4cAAAAwQAAAAfAAAAIAEZAA9uYW1lAAADJAAAASkAAAIWm5e+CnBvc3QAAARQAAAATgAAAG5m1cqleJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiC2AdNMDGwMckCSGyzHCuSxA2kuIJ+HgReoggtJnANMcwJFGRmYAXZLBkt4nGNgZJBlnMDAysDAUMfQAyRloHQCAyeDMQMDEwMrMwNWEJDmmsJwgEH3IxPDCSBXCEwyMDCCCABbzwhtAAAAeJy1kksKwjAQhr/0oX0JLlyIZ9BDCQXtRkEEwQO56uV6Av0nmZWI4MIJX2H+JvNIBiiBXGxFAWEkYPaQGqKe00S94C5/xVJKwY49PQNnLly5Tdnzqb9JPXByNUT13YKipLVm4wvmilvR0ilfrboKFsy0N9OB2Yco32z+437SLVTQdo05dUksgF8z/8+6+B3dU2m67YR1u3fsLXtH7egtEq04OhZpcKzbk1OLs2NzcXE0F3rNhOW9ObqbKSRsVqYsQfYC6fYeiQB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOLeSTNM4/ltvjJwM5wACkRxPt7XgKCBYCXDMiDJwcAE4gAAQEgKxAB4nGNgZGBgOMHAACdXMjAyoAI+ADixAkp4nGNgAIITUEwCAABMyAGReJxjYAACHgYJ7BAADsoBLXicY2BkYGDgY2BmANEMDExAzAWEDAz/wXwGAAomASkAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxk0KgCAUAOE3/adlJ/FQgqBuFETw+i2kTd9mRiYZvv4ZJmYWVjZ2Dk4UmosbwyPK1Vq69aVnPbamEBuOSqFj8WQSgUgTeQGPtA2iAAA=') format('woff')}[class*=' luna-dom-viewer-icon-'],[class^=luna-dom-viewer-icon-]{display:inline-block;font-family:luna-dom-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-dom-viewer-icon-arrow-down:before{content:'\\f101'}.luna-dom-viewer-icon-arrow-right:before{content:'\\f102'}.luna-dom-viewer{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;overflow-y:auto;-webkit-overflow-scrolling:touch;background:0 0;overflow-x:hidden;word-wrap:break-word;padding:0 0 0 12px;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;cursor:default;list-style:none}.luna-dom-viewer.luna-dom-viewer-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-dom-viewer.luna-dom-viewer-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-viewer .luna-dom-viewer-hidden,.luna-dom-viewer.luna-dom-viewer-hidden{display:none}.luna-dom-viewer .luna-dom-viewer-invisible,.luna-dom-viewer.luna-dom-viewer-invisible{visibility:hidden}.luna-dom-viewer *{box-sizing:border-box}.luna-dom-viewer.luna-dom-viewer-theme-dark{color:#a5a5a5;background-color:#242424}.luna-dom-viewer ul{list-style:none}.luna-dom-viewer.luna-dom-viewer-theme-dark{color:#e8eaed}.luna-dom-viewer-toggle{min-width:12px;margin-left:-12px}.luna-dom-viewer-icon-arrow-down,.luna-dom-viewer-icon-arrow-right{position:absolute!important;font-size:12px!important}.luna-dom-viewer-tree-item{line-height:16px;min-height:16px;position:relative;z-index:10;outline:0}.luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection,.luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{display:block}.luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:#f2f7fd}.luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:#e0e0e0}.luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:#cfe8fc}.luna-dom-viewer-tree-item .luna-dom-viewer-icon-arrow-down{display:none}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-arrow-down{display:inline-block}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-arrow-right{display:none}.luna-dom-viewer-html-tag{color:#881280}.luna-dom-viewer-tag-name{color:#881280}.luna-dom-viewer-attribute-name{color:#994500}.luna-dom-viewer-attribute-value{color:#1a1aa6}.luna-dom-viewer-attribute-value.luna-dom-viewer-attribute-underline{text-decoration:underline}.luna-dom-viewer-html-comment{color:#236e25}.luna-dom-viewer-selection{position:absolute;display:none;left:-10000px;right:-10000px;top:0;bottom:0;z-index:-1}.luna-dom-viewer-children{margin:0;overflow-x:visible;overflow-y:visible;padding-left:15px}.luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:#881280}.luna-dom-viewer-text-node .luna-dom-viewer-number{color:#1c00cf}.luna-dom-viewer-text-node .luna-dom-viewer-operator{color:grey}.luna-dom-viewer-text-node .luna-dom-viewer-comment{color:#236e25}.luna-dom-viewer-text-node .luna-dom-viewer-string{color:#1a1aa6}.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-arrow-down,.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-arrow-right{color:#9aa0a6}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-tag,.luna-dom-viewer-theme-dark .luna-dom-viewer-tag-name{color:#5db0d7}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-name{color:#9bbbdc}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-value{color:#f29766}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-comment{color:#898989}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:#083c69}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:#454545}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:#073d69}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:#e36eec}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-number{color:#9980ff}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-operator{color:#7f7f7f}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-comment{color:#747474}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-string{color:#f29766}",""]),i.exports=s},5512:function(i,s,o){(s=o(3645)(!1)).push([i.id,`@font-face{font-family:luna-modal-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAQwAAsAAAAABpQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAEkAAABoILgliE9TLzIAAAFUAAAAPQAAAFZL+0kZY21hcAAAAZQAAACBAAAB3sqmCy5nbHlmAAACGAAAAC0AAAA0Ftcaz2hlYWQAAAJIAAAALgAAADZzhL4YaGhlYQAAAngAAAAYAAAAJAFoANBobXR4AAACkAAAAA8AAAAcAMgAAGxvY2EAAAKgAAAADgAAABAATgBObWF4cAAAArAAAAAfAAAAIAESABhuYW1lAAAC0AAAASkAAAIWm5e+CnBvc3QAAAP8AAAAMQAAAEOplauDeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiCWgNIsQMzKwAykWRnYgGxGBiYAk+wFgwAAAHicY2BkkGWcwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAIfkjI8MJIFcITDIwMIIIAGAqCKIAAAB4nM2RQQqDQAxFXxyVUsST9DhduBd3ggsv0JX39QT6kwYED1D6hzeQD0nmM0ADFPESNdiG4frItfALz/Br3qp7HlS0jEzMLKy7HYf8e33J1HMdortoWuPzreUX8p2hEikj9f+oi3vIyl86JpWYEvfnxH9sSTzPmijXbl+wE7urE5sAAAB4nGNgZACB+UDIzcBgrs6uzi7OLm4ubq4+j1tfn1tPD0xOhjGAJAMDAKekBtMAAAB4nGNgZGBgAGLPuE0l8fw2Xxm4GU4ABaI4H+9rQNBAMB8IGRg4GJhAHAA5KgqUAAB4nGNgZGBgOMHAACfnMzAyoAJ2ADfsAjl4nGNgAIITDFgBABIUAMkAeJxjYAACKQQEAAO4AJ0AAHicY2BkYGBgZ+BhANEMDExAzAWEDAz/wXwGAApKASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxjYGKAABiNDtgZmRiZGVkYWRnZGNkZORhYk3Pyi1MZkxlzGPMZixlTGRgANIEEbAAAAA==') format('woff')}[class*=' luna-modal-icon-'],[class^=luna-modal-icon-]{display:inline-block;font-family:luna-modal-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-modal-icon-close:before{content:'\\f101'}.luna-modal{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;justify-content:center;align-items:center}.luna-modal.luna-modal-platform-windows{font-family:"Segoe UI",Tahoma,sans-serif}.luna-modal.luna-modal-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-modal .luna-modal-hidden,.luna-modal.luna-modal-hidden{display:none}.luna-modal .luna-modal-invisible,.luna-modal.luna-modal-invisible{visibility:hidden}.luna-modal *{box-sizing:border-box}.luna-modal.luna-modal-theme-dark{color:#a5a5a5;background-color:#242424}.luna-modal-icon-close{position:absolute;right:16px;top:18px;cursor:pointer;font-size:20px}.luna-modal-body{position:relative;background:#fff;max-height:100%;display:flex;flex-direction:column;border-radius:4px}.luna-modal-body.luna-modal-no-title{position:static}.luna-modal-body.luna-modal-no-title .luna-modal-title{display:none}.luna-modal-body.luna-modal-no-title .luna-modal-icon-close{color:#fff}.luna-modal-body.luna-modal-no-footer .luna-modal-footer{display:none}.luna-modal-hidden{display:none}.luna-modal-title{padding:16px;padding-right:36px;padding-bottom:0;font-size:18px;height:46px;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.luna-modal-content{padding:16px;overflow-y:auto}.luna-modal-footer{padding:12px}.luna-modal-button-group{display:flex;justify-content:flex-end}.luna-modal-button{padding:0 12px;background:#e9ecef;cursor:default;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin:0 4px;font-size:12px;border-radius:4px;overflow:hidden;height:28px;line-height:28px}.luna-modal-button:active::before{background:#1a73e8;content:"";opacity:.4;position:absolute;top:0;left:0;width:100%;height:100%;z-index:2}.luna-modal-button.luna-modal-secondary{color:#1a73e8;border:1px solid #ccc;background:#fff}.luna-modal-button.luna-modal-primary{color:#fff;background:#1a73e8}.luna-modal-input{box-sizing:border-box;outline:0;width:100%;font-size:16px;padding:6px 12px;border:1px solid #ccc;-webkit-appearance:none;-moz-appearance:none}.luna-modal-theme-dark{color:#a5a5a5}.luna-modal-theme-dark .luna-modal-body{background:#242424}`,""]),i.exports=s},7591:function(i,s,o){(s=o(3645)(!1)).push([i.id,".luna-notification{position:fixed;top:0;left:0;width:100%;height:100%;padding:20px;box-sizing:border-box;pointer-events:none;display:flex;flex-direction:column;font-size:14px;font-family:Arial,Helvetica,sans-serif}.luna-notification-item{display:flex;box-shadow:0 2px 2px 0 rgba(0,0,0,.07),0 1px 5px 0 rgba(0,0,0,.1);padding:10px 16px;color:#333;background:#fff}.luna-notification-lower{margin-top:16px}.luna-notification-upper{margin-bottom:16px}.luna-notification-theme-dark .luna-notification-item{box-shadow:0 2px 2px 0 rgba(255,255,255,.07),0 1px 5px 0 rgba(255,255,255,.1);color:#a5a5a5;background:#242424}",""]),i.exports=s},4821:function(i,s,o){(s=o(3645)(!1)).push([i.id,"@font-face{font-family:luna-object-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS8AAsAAAAAB7QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAGEAAACMISgl+k9TLzIAAAFsAAAAPQAAAFZLxUkWY21hcAAAAawAAADWAAACdBU42qdnbHlmAAAChAAAAC4AAAAwabU7V2hlYWQAAAK0AAAALwAAADZzjr4faGhlYQAAAuQAAAAYAAAAJAFyANlobXR4AAAC/AAAABAAAABAAZAAAGxvY2EAAAMMAAAAEAAAACIAtACobWF4cAAAAxwAAAAfAAAAIAEbAA9uYW1lAAADPAAAASkAAAIWm5e+CnBvc3QAAARoAAAAUwAAAHZW8MNZeJxNjTsOQFAQRc/z/+sV1mABohKV0gZeJRJR2X9cT4RJZu7nFIMBMjoGvHGaF6rdngcNAc/c/O/Nvq2W5E1igdNE2zv1iGh1c5FQPlYXUlJRyxt9+/pUKadQa/AveGEGZQAAAHicY2BkkGScwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAQfcjE8MJIFcITDIwMIIIAFqDCGkAAAB4nM2STQ4BQRCFv54ZP8MwFhYW4gQcShBsSERi50BWDuFCcwJedddKRGKnOt8k9aanqudVAy0gF3NRQLgTsLhJDVHP6UW94Kp8zEhKwYIlG/YcOXHm0mTPp96aumLLwdUQ1fcIqmJrwpSZL+iqak5JmyE1Ayr1bdGhr/2ZPmp/qPQtuj/uJzqQl+pfDyypesQD6AT/ElV8PjyrMccT9rdLR3PUFBI227VTio1jbm6dodg5VnPvmAsHxzofHfmi+Sbs/pwdWcXFkWdNSNg9arIE2QufuSCyAAB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOINe2b6x/PbfGXgZjgBFIjifLyvAUEDwUqGZUCSg4EJxAEAUn4LLAB4nGNgZGBgOMHAACdXMjAyoAIBADizAkx4nGNgAIITUEwGAABZUAGReJxjYAACHgYJ3BAAE94BXXicY2BkYGAQYGBmANEMDExAzAWEDAz/wXwGAApcASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxjkOgCAUANE/uOOGB+FQBIjaaEJIuL6FsfE1M6Lk9fXPoKioaWjp6BnQjEzMLKwYNtHepZhtuMs1vpvO/ch4HIlIxhK4KVyc7BwiD8nvDlkA') format('woff')}[class*=' luna-object-viewer-icon-'],[class^=luna-object-viewer-icon-]{display:inline-block;font-family:luna-object-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-object-viewer-icon-caret-down:before{content:'\\f101'}.luna-object-viewer-icon-caret-right:before{content:'\\f102'}.luna-object-viewer{overflow-x:auto;-webkit-overflow-scrolling:touch;overflow-y:hidden;cursor:default;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;font-size:12px;line-height:1.2;min-height:100%;color:#333;list-style:none!important}.luna-object-viewer ul{list-style:none!important;padding:0!important;padding-left:12px!important;margin:0!important}.luna-object-viewer li{position:relative;white-space:nowrap;line-height:16px;min-height:16px}.luna-object-viewer>li>.luna-object-viewer-key{display:none}.luna-object-viewer span{position:static!important}.luna-object-viewer li .luna-object-viewer-collapsed~.luna-object-viewer-close:before{color:#999}.luna-object-viewer-array .luna-object-viewer-object .luna-object-viewer-key{display:inline}.luna-object-viewer-null{color:#5e5e5e}.luna-object-viewer-regexp,.luna-object-viewer-string{color:#c41a16}.luna-object-viewer-number{color:#1c00cf}.luna-object-viewer-boolean{color:#0d22aa}.luna-object-viewer-special{color:#5e5e5e}.luna-object-viewer-key,.luna-object-viewer-key-lighter{color:#881391}.luna-object-viewer-key-lighter{opacity:.6}.luna-object-viewer-key-special{color:#5e5e5e}.luna-object-viewer-collapsed .luna-object-viewer-icon,.luna-object-viewer-expanded .luna-object-viewer-icon{position:absolute!important;left:-12px;color:#727272;font-size:12px}.luna-object-viewer-icon-caret-right{top:0}.luna-object-viewer-icon-caret-down{top:1px}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-down{display:inline}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-right{display:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-down{display:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-right{display:inline}.luna-object-viewer-hidden~ul{display:none}.luna-object-viewer-theme-dark{color:#fff}.luna-object-viewer-theme-dark .luna-object-viewer-null,.luna-object-viewer-theme-dark .luna-object-viewer-special{color:#a1a1a1}.luna-object-viewer-theme-dark .luna-object-viewer-regexp,.luna-object-viewer-theme-dark .luna-object-viewer-string{color:#f28b54}.luna-object-viewer-theme-dark .luna-object-viewer-boolean,.luna-object-viewer-theme-dark .luna-object-viewer-number{color:#9980ff}.luna-object-viewer-theme-dark .luna-object-viewer-key,.luna-object-viewer-theme-dark .luna-object-viewer-key-lighter{color:#5db0d7}",""]),i.exports=s},7871:function(i,s,o){(s=o(3645)(!1)).push([i.id,`.luna-setting{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;min-width:320px}.luna-setting.luna-setting-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-setting.luna-setting-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-setting .luna-setting-hidden,.luna-setting.luna-setting-hidden{display:none}.luna-setting .luna-setting-invisible,.luna-setting.luna-setting-invisible{visibility:hidden}.luna-setting *{box-sizing:border-box}.luna-setting-item.luna-setting-selected,.luna-setting-item:hover{background:#f3f3f3}.luna-setting-item.luna-setting-selected:focus{outline:1px solid #1a73e8}.luna-setting-item .luna-setting-title{line-height:1.4em;font-weight:600}.luna-setting-item .luna-setting-description{line-height:1.4em}.luna-setting-item .luna-setting-description *{margin:0}.luna-setting-item .luna-setting-description strong{font-weight:600}.luna-setting-item .luna-setting-description a{background-color:transparent;color:#0969da;text-decoration:none}.luna-setting-item .luna-setting-control,.luna-setting-item .luna-setting-description{font-size:12px}.luna-setting-item .luna-setting-description{margin-bottom:8px}.luna-setting-item .luna-setting-control{display:flex;align-items:center}.luna-setting-item-button,.luna-setting-item-checkbox,.luna-setting-item-input,.luna-setting-item-number,.luna-setting-item-select,.luna-setting-item-title{padding:10px}.luna-setting-item-title{font-size:18px;font-weight:600}.luna-setting-item-input input{-webkit-tap-highlight-color:transparent;color:#333;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid #ccc;outline:0;padding:2px 8px;border-radius:0;font-size:14px;background:#fff;width:100%}.luna-setting-item-number input[type=number]{-webkit-tap-highlight-color:transparent;color:#333;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid #ccc;outline:0;padding:2px 8px;border-radius:0;font-size:14px;background:#fff;width:200px;padding:2px}.luna-setting-item-number .luna-setting-range-container{flex:2;position:relative;top:1px}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track{height:4px;width:100%;padding:0 10px;position:absolute;left:0;top:4px}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{background:#ccc;border-radius:2px;overflow:hidden;width:100%;height:4px}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar .luna-setting-range-track-progress{height:100%;background:#1a73e8;width:50%}.luna-setting-item-number .luna-setting-range-container input{-webkit-appearance:none;background:0 0;height:4px;width:100%;position:relative;top:-3px;margin:0 auto;outline:0;border-radius:2px}.luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{-webkit-appearance:none;position:relative;top:0;z-index:1;width:16px;border:none;height:16px;border-radius:10px;border:1px solid #ccc;background:radial-gradient(circle at center,#eee 0,#eee 15%,#fff 22%,#fff 100%)}.luna-setting-item-checkbox input{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:14px;height:14px;border:1px solid #ccc;border-radius:0;position:relative;outline:0;margin-left:0;margin-right:8px;transition:background-color .1s;align-self:flex-start;flex-shrink:0}.luna-setting-item-checkbox input:checked{background-color:#1a73e8;border-color:#1a73e8}.luna-setting-item-checkbox input:checked:after{content:"";width:100%;height:100%;position:absolute;left:0;top:0;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9JzMwMHB4JyB3aWR0aD0nMzAwcHgnICBmaWxsPSIjZmZmZmZmIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgdmVyc2lvbj0iMS4xIiB4PSIwcHgiIHk9IjBweCI+PHRpdGxlPmljb25fYnlfUG9zaGx5YWtvdjEwPC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZyBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBmaWxsPSIjZmZmZmZmIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi4wMDAwMDAsIDI2LjAwMDAwMCkiPjxwYXRoIGQ9Ik0xNy45OTk5ODc4LDMyLjQgTDEwLjk5OTk4NzgsMjUuNCBDMTAuMjI2Nzg5MSwyNC42MjY4MDE0IDguOTczMTg2NDQsMjQuNjI2ODAxNCA4LjE5OTk4Nzc5LDI1LjQgTDguMTk5OTg3NzksMjUuNCBDNy40MjY3ODkxNCwyNi4xNzMxOTg2IDcuNDI2Nzg5MTQsMjcuNDI2ODAxNCA4LjE5OTk4Nzc5LDI4LjIgTDE2LjU4NTc3NDIsMzYuNTg1Nzg2NCBDMTcuMzY2ODIyOCwzNy4zNjY4MzUgMTguNjMzMTUyOCwzNy4zNjY4MzUgMTkuNDE0MjAxNCwzNi41ODU3ODY0IEw0MC41OTk5ODc4LDE1LjQgQzQxLjM3MzE4NjQsMTQuNjI2ODAxNCA0MS4zNzMxODY0LDEzLjM3MzE5ODYgNDAuNTk5OTg3OCwxMi42IEw0MC41OTk5ODc4LDEyLjYgQzM5LjgyNjc4OTEsMTEuODI2ODAxNCAzOC41NzMxODY0LDExLjgyNjgwMTQgMzcuNzk5OTg3OCwxMi42IEwxNy45OTk5ODc4LDMyLjQgWiI+PC9wYXRoPjwvZz48L2c+PC9nPjwvc3ZnPg==);background-size:30px;background-repeat:no-repeat;background-position:center}.luna-setting-item-checkbox label{-webkit-tap-highlight-color:transparent}.luna-setting-item-checkbox label *{margin:0}.luna-setting-item-select .luna-setting-select{position:relative}.luna-setting-item-select .luna-setting-select select{margin:0;font-size:14px;background:#fff;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid #ccc;padding:2px 8px;padding-right:18px;outline:0;color:#333;border-radius:0;-webkit-tap-highlight-color:transparent}.luna-setting-item-select .luna-setting-select:after{content:'';width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #333;position:absolute;top:0;bottom:0;right:6px;margin:auto;pointer-events:none}.luna-setting-item-select .luna-setting-select select{width:300px}.luna-setting-item-button button{-webkit-tap-highlight-color:transparent;background:#fff;border:1px solid #ccc;padding:2px 8px;color:#1a73e8;font-size:14px;border-radius:2px}.luna-setting-item-button button:active,.luna-setting-item-button button:hover{background:#f3f3f3}.luna-setting-item-button button:active{border:1px solid #1a73e8}.luna-setting-item-separator{border-bottom:1px solid #ccc}.luna-setting-theme-dark{color-scheme:dark;color:#a5a5a5;background:#242424}.luna-setting-theme-dark .luna-setting-item.luna-setting-selected,.luna-setting-theme-dark .luna-setting-item:hover{background:#292a2d}.luna-setting-theme-dark .luna-setting-item .luna-setting-description a{background-color:transparent;color:#58a6ff}.luna-setting-theme-dark .luna-setting-item-separator{border-color:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-input input{background:#3d3d3d;border-color:#3d3d3d;color:#a5a5a5}.luna-setting-theme-dark .luna-setting-item-checkbox input{border-color:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-select .luna-setting-select select{color:#a5a5a5;border-color:#3d3d3d;background:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-select .luna-setting-select:after{border-top-color:#a5a5a5}.luna-setting-theme-dark .luna-setting-item-button button{background:#242424;border-color:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-button button:active,.luna-setting-theme-dark .luna-setting-item-button button:hover{background:#292a2d}.luna-setting-theme-dark .luna-setting-item-button button:active{border:1px solid #1a73e8}.luna-setting-theme-dark .luna-setting-item-number input[type=number]{background:#3d3d3d;border-color:#3d3d3d;color:#a5a5a5}.luna-setting-theme-dark .luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{background:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{border-color:#3d3d3d;background:radial-gradient(circle at center,#aaa 0,#aaa 15%,#ccc 22%,#ccc 100%)}`,""]),i.exports=s},2156:function(i,s,o){(s=o(3645)(!1)).push([i.id,".luna-tab{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;position:relative;overflow:hidden;width:100%}.luna-tab.luna-tab-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-tab.luna-tab-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-tab .luna-tab-hidden,.luna-tab.luna-tab-hidden{display:none}.luna-tab .luna-tab-invisible,.luna-tab.luna-tab-invisible{visibility:hidden}.luna-tab *{box-sizing:border-box}.luna-tab.luna-tab-theme-dark{color:#a5a5a5;background-color:#242424}.luna-tab-tabs-container{border-bottom:1px solid #ccc}.luna-tab-tabs{overflow-x:auto;-webkit-overflow-scrolling:touch;overflow-y:hidden;width:100%;height:100%;font-size:0;white-space:nowrap}.luna-tab-tabs::-webkit-scrollbar{display:none;width:0;height:0}.luna-tab-item{cursor:pointer;display:inline-block;padding:0 10px;font-size:12px;text-align:center;text-transform:capitalize}.luna-tab-item:hover{background:#f3f3f3}.luna-tab-slider{transition:left .3s,width .3s;height:1px;background:#1a73e8;position:absolute;bottom:0;left:0}",""]),i.exports=s},5777:function(i,s,o){(s=o(3645)(!1)).push([i.id,"@font-face{font-family:luna-text-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS0AAsAAAAAB2QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFQAAAB0INElr09TLzIAAAFcAAAAPQAAAFZL+0klY21hcAAAAZwAAACfAAACEAEewxRnbHlmAAACPAAAAIYAAACkNSDggmhlYWQAAALEAAAALgAAADZzrb4oaGhlYQAAAvQAAAAWAAAAJAGRANNobXR4AAADDAAAABAAAAAoAZAAAGxvY2EAAAMcAAAAEAAAABYBWgFIbWF4cAAAAywAAAAdAAAAIAEXADtuYW1lAAADTAAAASkAAAIWm5e+CnBvc3QAAAR4AAAAOwAAAFJIWdOleJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBWAdNMDGwMQkAWK1CGlYEZyGMCstiBMpxAUUYGZgDbGgXDeJxjYGTQYJzAwMrAwFDH0AMkZaB0AgMngzEDAxMDKzMDVhCQ5prCcIAh+SMTwwkgVwhMMjAwgggAY84IrgAAAHicvZFLCsMwDERHzsdJ6aL0HD1VQiDQRbIN9Axd9aI+QTpjq5Bdd5F4Bo1lybIBNAAq8iA1YB8YZG+qlvUKl6zXGBjf6MofMWHGEyu2FPb9oCxULCtHs3yy+J2urg1rtojo0HM/MKnFGabOGlbdYvdT+1N6/7drXl8e6Vajo3efHP3b7HAUvntBMy1OJKujMTeHNZMV9McpFBC+tLgY4QB4nGNgZACBEwzrGdgZGOwZxdnVDdXNPfKEGlhchO0KhZtZ3IQYmMFq1jCsZpBi0GLQY2AwNzGzZjQSk2UUYdNmVFID8UyVRUXYlNRMlVGlTM1FjU3tmZkTmVhYmFRBhHwoCyuzKgtTIjMzWJg3ZClIGMRlZQmVB7GhMixM0aGhQIsB52sTqgAAeJxjYGRgYADi2JNxkvH8Nl8ZuBlOAAWiOB/va0DQQHCCYT2Q5GBgAnEANJ0KnQAAeJxjYGRgYDjBwIBEMjKgAi4AOvoCZQAAeJxjYACCE1CMBwAAM7gBkXicY2AAAiGGIFQIABXIAqN4nGNgZGBg4GLQZ2BmAAEmMI8LSP4H8xkADjQBUwAAAHicZZA9bsJAFITHYEgCUoIUKSmzVQoimZ+SA0BPQZfCmLUxsr3WekGiywlyhBwhp4hyghwoY/NoYC0/fzNv3u7KAAb4hYd6ebhtar1auKE6cZv0IOyTn4U76ONFuEt/KNzDG6bCfTzinTt4/h2dAUrhFu7xIdym/ynsk7+EO3jCt3CX/o9wDyv8Cffx6g3TyBSxKdxSJ/sstGd5/q60rVJTqEkwPlsLXWgbOr1R66OqDsnUuVjF1uRqzq7OMqNKa3Y6csHWuXI2GsXiB5HJkSKCQYG4qQ5LaCTYI0MIe9W91CumLSr6tVaYIMD4KrVgqmiSIZXGhsk1jqwVDjxtStcxrfhazuSkucxq3iQjK/7vurejE9EPsG2mSsww4hNf5IPmDvk/PRFeqAAAAHicXcU7CsAgFEXBe4x/l/kQBAtt3X0KSZNpRk7X91/F8eAJRBKZQqUp2Og2va19MAadyWJzpBd4kgcWAA==') format('woff')}[class*=' luna-text-viewer-icon-'],[class^=luna-text-viewer-icon-]{display:inline-block;font-family:luna-text-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-text-viewer-icon-check:before{content:'\\f101'}.luna-text-viewer-icon-copy:before{content:'\\f102'}.luna-text-viewer{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;padding:0;unicode-bidi:embed;position:relative;overflow:auto;border:1px solid #ccc}.luna-text-viewer.luna-text-viewer-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-text-viewer.luna-text-viewer-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-text-viewer .luna-text-viewer-hidden,.luna-text-viewer.luna-text-viewer-hidden{display:none}.luna-text-viewer .luna-text-viewer-invisible,.luna-text-viewer.luna-text-viewer-invisible{visibility:hidden}.luna-text-viewer *{box-sizing:border-box}.luna-text-viewer.luna-text-viewer-theme-dark{color:#d9d9d9;border-color:#3d3d3d;background:#242424}.luna-text-viewer:hover .luna-text-viewer-copy{opacity:1}.luna-text-viewer-table{display:table}.luna-text-viewer-table .luna-text-viewer-line-number,.luna-text-viewer-table .luna-text-viewer-line-text{padding:0}.luna-text-viewer-table-row{display:table-row}.luna-text-viewer-line-number{display:table-cell;padding:0 3px 0 8px!important;text-align:right;vertical-align:top;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-right:1px solid #ccc}.luna-text-viewer-line-text{display:table-cell;padding-left:4px!important;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-text-viewer-copy{background:#fff;opacity:0;position:absolute;right:5px;top:5px;border:1px solid #ccc;border-radius:4px;width:25px;height:25px;text-align:center;line-height:25px;cursor:pointer;transition:opacity .3s,top .3s}.luna-text-viewer-copy .luna-text-viewer-icon-check{color:#188037}.luna-text-viewer-text{padding:4px;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;box-sizing:border-box;white-space:pre;display:block}.luna-text-viewer-text.luna-text-viewer-line-numbers{padding:0}.luna-text-viewer-text.luna-text-viewer-wrap-long-lines{white-space:pre-wrap}.luna-text-viewer-text.luna-text-viewer-wrap-long-lines .luna-text-viewer-line-text{word-break:break-all}.luna-text-viewer-theme-dark{color-scheme:dark}.luna-text-viewer-theme-dark .luna-text-viewer-copy,.luna-text-viewer-theme-dark .luna-text-viewer-line-number{border-color:#3d3d3d}.luna-text-viewer-theme-dark .luna-text-viewer-copy .luna-text-viewer-icon-check{color:#81c995}.luna-text-viewer-theme-dark .luna-text-viewer-copy{background-color:#242424}",""]),i.exports=s},5357:function(i,s,o){(s=o(3645)(!1)).push([i.id,"@font-face{font-family:eruda-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAA6UAAsAAAAAGvAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAARoAAAHeLjoycE9TLzIAAAIkAAAAPwAAAFZWm1KoY21hcAAAAmQAAAFdAAADwhPu1O9nbHlmAAADxAAAB+wAAA9I7RPQpGhlYWQAAAuwAAAAMQAAADZ26MSyaGhlYQAAC+QAAAAdAAAAJAgEBC9obXR4AAAMBAAAAB0AAACwXAv//GxvY2EAAAwkAAAAOwAAAFpuVmoybWF4cAAADGAAAAAfAAAAIAE9AQ1uYW1lAAAMgAAAASkAAAIWm5e+CnBvc3QAAA2sAAAA5QAAAU4VMmUJeJxNkD1Ow0AQhb9NHGISCH9RiB0cErCNHRrqFFSIyqKiQHSpEFJERUnBCTgPZ+AEHIe34wDe1f69efPezOKAHldc07q5re4ZrFevL8QE1MPHm3e3fn5aEf6+FAvsDHHuTUoxd7zzwSdffLulq9wjLbaYau8TacZMONE554xzZsrtNfBEzFOhbSmOyTmga0ikvRR/37RSsSMyDukYPjWdgGOtsSK55Y/k0Bf/ksK0MrbFr70idsVZKNPnDcSay3umd2TISCvWTJSxI78lFQ/C+qbv/Zo9tNXDP55ZL7k0Q90u5F5XX0qrYx16btccCtXg/ULrKzGFuqY9rUTMhf3fkCNj+MxUnsM/frr5Qx+ZbH4vVQ0F5Q/ZQBvxAAB4nGNgZJJgnMDAysDA1Mt0hoGBoR9CM75mMGLkAIoysDIzYAUBaa4pDAcYdD+KsIC4MSxMDIxAGoQZALgnCOUAeJy1011SGlEQhuF3BFHxD5UUyr8gIJIsiiKJsSqJlrHKsJssKFeuxF6Bfj3dF96aqhzqoZnDzJyG8w2wCVTko1SheKLAx1/NFuV8hXo5X+WPjht6+fmfWHLDHQ+srfnykjMrvnPPoxXlzNtRlFc26HLBZblal1N9ntBnwIgx5/SYMaWt78+YM6TDgitduaEVq+q0xhbb7KifPQ441N2OOOaEJh9oaYka7xvdd57vQz1P+oPR+Bx6s2lbrc6H0Flc/cO9/sfY87fiOY8u8X0J/muX6VRW6UI+p4l8SX35mgZynUbyLY3lJukf0e6HnvxIM/mZpnKb2nKXvM/7dCa/0lwe0lAeU0d+p4Wsk3bBiuDptY2A10rw9Fo1eOJtM/iTYLWA162A1+2A152A13rwJ8R2g++AJaUU2w/KK3YQlFzsMCjDWCMozdhRUK6x46CEYydBWceagdYraihRngAAAHic7RdbbBxX9Z57Z2d2d2ZndryzM7ve9ax3NztjO/bann0lTuW16zoBJSWJ7Zg83NiUJCQ1Ik2ikKQJNC9FFQqVEG0RVLQoSpEKH2klqgpEIyWAUMRTNBJC/PUDhETgiwhQd8y5s1s7oqr624/srO6ce89zzjn3nHsJEPwxyn5GVEJKBTcCdc80pAiYhkjfNWL+NnhLdTKqfxVOqJlxFX6E84wb86/6X4+5GRLw0/vsOgkREoFGBFx62P/uFviBP78FWrC02d/r79vcpmMl+k2uBwwJxIILTrVeyXsmK8krRLb5YGqUaCb9ksYnMuBqMtnRcY6V1nidml6texaY9CxSRm3TtKNIjcxrUjhEWKD3OnuNJEgPKSG/I6nUpo06fxwXH8lmEoyDFQIVyrROs7254z990rj0u2PLez47WqG1yu69V7ZdfDxU9He4C6P+v+HN+vlnD9Uou0Zp+NnfvveT/XL0kbGFxT/u37tx7CTdeuGlKfiibcMr/gt9qfyu05e4+YEdb7A3iEVG0ArdEAvDIPHBqTbB7bgCDA0sdH0x3/nEHDT4YFJi9siz74iaOBkK3ZyRTRXwE+FGG15BeA0Pf14hqinP3AyFJnHhnVm5xzThmNSBNFjDdvwzw75GFJIlvWhZ1UHlYlI3zIputa3CSduiRF7P09e9on+jODpanPOKsJMDOPV2wU7/BqsVPcQ2ix41X/8ARKpbfhPVtHNgik1hXAhIlmQ1rIbbcCVIzN/7+65794KRTc13IBwJXVkhRACBkAEyhVyiBqJbRn81YRjKUDfRN9xHpoVBt0xJRZ+iS4ehZFg2utJrjCO2GrAUAizcj+c3pXpiXVQwThZmdNrbrx+hAjtjbhSF5FPyKSsqmGraWKYCbfl97vMLi79fXHje7XsAhBsoo0P35fyMPpCj+lM0FDptJexuYzl82upRufxlKgrTh/+fOwBXc+Jt9jZJBTnxUbH/yGT5j4jRT2pB9O1oO/oi3FyD2/ggU14LY/j5RuHTJIZf5LR/WVmbaB2CT6xdQa4KwJZIHPfyMFoWRNSmQZDLlJVpdRw8GwwVWEGlScOGijdOq2VKyfHDB7/d1/+d37zXeT/dXG42l7/Kh2a20pd0JpxsxTVNt8KWyuu/94Ujr+7uvFpvQXP5PCfEAU4l+6pZZ9Ix3eqGqmsGrvok28V+zi6TKEYyi/Udt0MNavkkJC1e+vQA1tGqil6EV93j/UBbY0AXm/2Vku+z53x/8MDT5879U9Nb4Cqq/yf/WEjReiECfS9+C2f/6umFS/77q3t7kp0nGu8DTrFTQrwG1KtsoHVXlnXL0qMKHTRpGbaJlt7aoVsSbO3aQFb5L7MTJElIwrBMvnWxQteCEl2QREn8Ci/Ef9i7u1IT6tX5Pb/ePV+rUXKEL3DMkUPzc6OeNzo3/6C8K2QdrzVlKAYyHhBcxGgUyoCRqXimJZXYwYO1y1tWxQWKLkyfunpqevrU5vJs4SQ02JUDw94qMlC6maORJpc9AR/Sm7C4cK7S4MoL/FNqFYy+Nw5VbpIoWaWXP0atf+fj1Lb36w12h6SxShIouuNQw+TCVDNsWvHqDStpNUoFnobUs6mhUvpmn+r2VxaeuXjmCc974vSjm44OxfytrXeH5iaKxYm5fXMThcLEHLwcGzq66dHTnObMxWcWKv2u2tfa1ipMzu7rEM5OFshqLfsFu4R9thszrVjAUoHFgH98DxRreb3CK74rMTh/bWmJTq9Pd0nCZOvsbfrYrVsTty9cOPc5Or2U6spq8rXbrbNAL9yeuHWLYuEnEiErK0JIAPIN8kNyl9wn/yUt7mioN6GGTi1jDQrypNPRxQ+8zREatnUsVtgbcDHAaZA0rc6TxOIWLPFVXLDbvYRT45CDSnBOqFhee4aTcWw8gapGnS+Z+EYrOuqh825jrY5WSVwPDSewh/OWqYueCJQFEjhELTdgcdEODjUCo5yge7lcAlJxRSgceyZyu5LFfqnaeldKlsyunnK6N6LEaUSqTSndgpZK7jC7NZaR7LGcGhXwgMNC+WFt0MxEomZcECQ9EY4JkgAQDilSNKnGuxXJ0u2hdG9YUZkiZcfWpaOWkUv0G6IaCseVVH81o0dEEClKGokassX0hKSk44PxBGOS4E8cmNk+OMSY5+2cXfz8zI4hrG4jI9tnFpW/hqKx7PCnH1O7wpFkqeANT4IUVhopPTUwnNJxzSlUzLASV+4YfUIkpoQFTYvoMUFkJgtJ/Z6VEIyymx4usdCW5CuDc9s+dZDm6GeiejTl1jN6VFKUdMHMlUIWzaQEOdyrKHIsL0VZJB0TE1rUlLvCo71yPKya3dW+ONBQRBajUdPuKoXFsBAOiYoUdx7JtSXlU3ZJNAW1O+4ktBCFqBjLJhMW97JgyonISE5kVIJQJJ6tO6nueCJj1TV/D6uMzu06tH/H44NlRr3RnbNPLu7cXh75sWOklURzi5ZI9dgqG6tuEAf0bkWX0/0j6S6+RjfaYiQsbkKHhuNdms6kUExWZNGSlJgzkjIGjPK61KjLxOvGc/1/27r9KOQe7omHe+LhnvjQnmArLTyHMYHiPbGbFLEL4Q1BxOsiHrfy2HIBz67BXQbPsVbB4TNDZP/wF4x63cAxUl/PRtbXI61f2QM2/iuZUqleKr3ABp1Mxnn/rjvpOJN0b9K2k/73+Xi/VHOcGl4qyf8AzjWNo3icY2BkYGAA4uhnXafj+W2+MnCzgASiOB/va4DR///+/8/CysIElOBgAJEMAHS2DWQAAAB4nGNgZGBgYQABFtb/f///ZWFlYGRABToAW+YEPQAAAHicY2BgYGAhiP//J6wGCbNCMcP/vwxUBgDl4QRhAAAAeJxjYAACBQYThiCGAoYtjAyMZowBjPuYuJjCmBYxvWNWYXZhzmFewfyIRYUliPUOexr7EmIhAF3rF0sAeJxjYGRgYNBhZGRgZwABJiDmAkIGhv9gPgMADcIBTAB4nGWQPW7CQBSEx2BIAlKCFCkps1UKIpmfkgNAT0GXwpi1MbK91npBossJcoQcIaeIcoIcKGPzaGAtP38zb97uygAG+IWHenm4bWq9WrihOnGb9CDsk5+FO+jjRbhLfyjcwxumwn084p07eP4dnQFK4Rbu8SHcpv8p7JO/hDt4wrdwl/6PcA8r/An38eoN08gUsSncUif7LLRnef6utK1SU6hJMD5bC11oGzq9Ueujqg7J1LlYxdbkas6uzjKjSmt2OnLB1rlyNhrF4geRyZEigkGBuKkOS2gk2CNDCHvVvdQrpi0q+rVWmCDA+Cq1YKpokiGVxobJNY6sFQ48bUrXMa34Ws7kpLnMat4kIyv+77q3oxPRD7BtpkrMMOITX+SD5g75Pz0RXqgAAAB4nG2MyW6DQBiD+RKYpKT7vqf7Gg55pNHwEyJNGDSMRHj70nKtD7Zly45G0YA0+h8LRoyJSVBMmLJDyoxd9tjngEOOOOaEU84454JLrrjmhlvuuGfOA4888cwLr7zxzgeffPHNgixKtfeuzawUYTZYv16VITXaS8hy11azwf7FibGi/dS4Te2laWLj6k7lYiVIIv3aK9nWusqng2TLsXR900m2VMXaBvFxbXWnvBjn84mXor8pk54kqKa/NmUvVkyIg3NW/VK2jFvtKzQeR0uGRSgIrFlRYsip2FDT0LGNoh/MCkh9AAAA') format('woff')}[class*=' _icon-'],[class^='_icon-']{display:inline-block;font-family:eruda-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}._icon-arrow-left:before{content:'\\f101'}._icon-arrow-right:before{content:'\\f102'}._icon-caret-down:before{content:'\\f103'}._icon-caret-right:before{content:'\\f104'}._icon-clear:before{content:'\\f105'}._icon-compress:before{content:'\\f106'}._icon-copy:before{content:'\\f107'}._icon-delete:before{content:'\\f108'}._icon-error:before{content:'\\f109'}._icon-expand:before{content:'\\f10a'}._icon-eye:before{content:'\\f10b'}._icon-filter:before{content:'\\f10c'}._icon-play:before{content:'\\f10d'}._icon-record:before{content:'\\f10e'}._icon-refresh:before{content:'\\f10f'}._icon-reset:before{content:'\\f110'}._icon-search:before{content:'\\f111'}._icon-select:before{content:'\\f112'}._icon-tool:before{content:'\\f113'}._icon-warn:before{content:'\\f114'}",""]),i.exports=s},3645:function(i){i.exports=function(s){var o=[];return o.toString=function(){return this.map(function(d){var j=function($,ot){var ht=$[1]||"",pt=$[3];if(!pt)return ht;if(ot&&typeof btoa=="function"){var dt=(wt=pt,bt=btoa(unescape(encodeURIComponent(JSON.stringify(wt)))),St="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(bt),"/*# ".concat(St," */")),gt=pt.sources.map(function(Ct){return"/*# sourceURL=".concat(pt.sourceRoot||"").concat(Ct," */")});return[ht].concat(gt).concat([dt]).join(`
`)}var wt,bt,St;return[ht].join(`
`)}(d,s);return d[2]?"@media ".concat(d[2]," {").concat(j,"}"):j}).join("")},o.i=function(d,j,$){typeof d=="string"&&(d=[[null,d,""]]);var ot={};if($)for(var ht=0;ht<this.length;ht++){var pt=this[ht][0];pt!=null&&(ot[pt]=!0)}for(var dt=0;dt<d.length;dt++){var gt=[].concat(d[dt]);$&&ot[gt[0]]||(j&&(gt[2]?gt[2]="".concat(j," and ").concat(gt[2]):gt[2]=j),o.push(gt))}},o}},1512:function(i,s,o){var d=o(3244),j=o(6906),$=o(7665),ot=o(975),ht=o(4991),pt=o(4209),dt=o(9702),gt=o(6757),wt=o(8381),bt=o(5543),St=o(7781),Ct=o(8908),Et=o(1286),Pt=o(6768);s=function(yt){return new d(yt)},d.methods({offset:function(){return j(this)},hide:function(){return this.css("display","none")},show:function(){return $(this),this},first:function(){return s(this[0])},last:function(){return s(dt(this))},get:function(yt){return this[yt]},eq:function(yt){return s(this[yt])},on:function(yt,xt,Dt){return bt.on(this,yt,xt,Dt),this},off:function(yt,xt,Dt){return bt.off(this,yt,xt,Dt),this},html:function(yt){var xt=pt.html(this,yt);return Et(yt)?xt:this},text:function(yt){var xt=pt.text(this,yt);return Et(yt)?xt:this},val:function(yt){var xt=pt.val(this,yt);return Et(yt)?xt:this},css:function(yt,xt){var Dt=ot(this,yt,xt);return _t(yt,xt)?Dt:this},attr:function(yt,xt){var Dt=ht(this,yt,xt);return _t(yt,xt)?Dt:this},data:function(yt,xt){var Dt=wt(this,yt,xt);return _t(yt,xt)?Dt:this},rmAttr:function(yt){return ht.remove(this,yt),this},remove:function(){return gt(this),this},addClass:function(yt){return St.add(this,yt),this},rmClass:function(yt){return St.remove(this,yt),this},toggleClass:function(yt){return St.toggle(this,yt),this},hasClass:function(yt){return St.has(this,yt)},parent:function(){return s(this[0].parentNode)},append:function(yt){return Ct.append(this,yt),this},prepend:function(yt){return Ct.prepend(this,yt),this},before:function(yt){return Ct.before(this,yt),this},after:function(yt){return Ct.after(this,yt),this}});var _t=function(yt,xt){return Et(xt)&&Pt(yt)};i.exports=s},4991:function(i,s,o){var d=o(1352),j=o(5166),$=o(6768),ot=o(3783),ht=o(1286),pt=o(2341);(s=function(dt,gt,wt){if(dt=pt(dt),ht(wt)&&$(gt))return function(St,Ct){return St.getAttribute(Ct)}(dt[0],gt);var bt=gt;j(bt)||((bt={})[gt]=wt),function(St,Ct){ot(St,function(Et){ot(Ct,function(Pt,_t){Et.setAttribute(_t,Pt)})})}(dt,bt)}).remove=function(dt,gt){dt=pt(dt),gt=d(gt),ot(dt,function(wt){ot(gt,function(bt){wt.removeAttribute(bt)})})},i.exports=s},7781:function(i,s,o){var d=o(1352),j=o(6053),$=o(2341),ot=o(6768),ht=o(3783);function pt(dt){return ot(dt)?dt.split(/\s+/):d(dt)}s={add:function(dt,gt){dt=$(dt);var wt=pt(gt);ht(dt,function(bt){var St=[];ht(wt,function(Ct){s.has(bt,Ct)||St.push(Ct)}),St.length!==0&&(bt.className+=(bt.className?" ":"")+St.join(" "))})},has:function(dt,gt){dt=$(dt);var wt=new RegExp("(^|\\s)"+gt+"(\\s|$)");return j(dt,function(bt){return wt.test(bt.className)})},toggle:function(dt,gt){dt=$(dt),ht(dt,function(wt){if(!s.has(wt,gt))return s.add(wt,gt);s.remove(wt,gt)})},remove:function(dt,gt){dt=$(dt);var wt=pt(gt);ht(dt,function(bt){ht(wt,function(St){bt.classList.remove(St)})})}},i.exports=s},975:function(i,s,o){var d=o(6768),j=o(5166),$=o(7622),ot=o(1286),ht=o(6341),pt=o(3990),dt=o(2341),gt=o(747),wt=o(3783);s=function(St,Ct,Et){if(St=dt(St),ot(Et)&&d(Ct))return function(_t,yt){return _t.style[gt(yt)]||getComputedStyle(_t,"").getPropertyValue(yt)}(St[0],Ct);var Pt=Ct;j(Pt)||((Pt={})[Ct]=Et),function(_t,yt){wt(_t,function(xt){var Dt=";";wt(yt,function(Ot,Bt){Bt=gt.dash(Bt),Dt+=Bt+":"+function(At,It){var Gt=pt(It)&&!ht(bt,$(At));return Gt?It+"px":It}(Bt,Ot)+";"}),xt.style.cssText+=Dt})}(St,Pt)};var bt=["column-count","columns","font-weight","line-weight","opacity","z-index","zoom"];i.exports=s},8381:function(i,s,o){var d=o(4991),j=o(6768),$=o(5166),ot=o(3783);o(2341),s=function(ht,pt,dt){var gt=pt;return j(pt)&&(gt="data-"+pt),$(pt)&&(gt={},ot(pt,function(wt,bt){gt["data-"+bt]=wt})),d(ht,gt,dt)},i.exports=s},5543:function(i,s,o){var d=o(2443),j=o(1286),$=o(2341),ot=o(3783);function ht(pt){return function(dt,gt,wt,bt){dt=$(dt),j(bt)&&(bt=wt,wt=void 0),ot(dt,function(St){d[pt](St,gt,wt,bt)})}}s={on:ht("add"),off:ht("remove")},i.exports=s},8908:function(i,s,o){var d=o(3783),j=o(2341),$=o(6768);function ot(ht){return function(pt,dt){pt=j(pt),d(pt,function(gt){if($(dt))gt.insertAdjacentHTML(ht,dt);else{var wt=gt.parentNode;switch(ht){case"beforebegin":wt&&wt.insertBefore(dt,gt);break;case"afterend":wt&&wt.insertBefore(dt,gt.nextSibling);break;case"beforeend":gt.appendChild(dt);break;case"afterbegin":gt.prepend(dt)}}})}}s={before:ot("beforebegin"),after:ot("afterend"),append:ot("beforeend"),prepend:ot("afterbegin")},i.exports=s},6906:function(i,s,o){var d=o(2341);s=function(j){var $=(j=d(j))[0].getBoundingClientRect();return{left:$.left+window.pageXOffset,top:$.top+window.pageYOffset,width:Math.round($.width),height:Math.round($.height)}},i.exports=s},4209:function(i,s,o){var d=o(1286),j=o(3783),$=o(2341);function ot(ht){return function(pt,dt){var gt=(pt=$(pt))[0];if(d(dt))return gt?gt[ht]:"";gt&&j(pt,function(wt){wt[ht]=dt})}}s={html:ot("innerHTML"),text:ot("textContent"),val:ot("value")},i.exports=s},6757:function(i,s,o){var d=o(3783),j=o(2341);s=function($){$=j($),d($,function(ot){var ht=ot.parentNode;ht&&ht.removeChild(ot)})},i.exports=s},2341:function(i,s,o){var d=o(6768),j=o(1352),$=o(3244);s=function(ot){return j(d(ot)?new $(ot):ot)},i.exports=s},7665:function(i,s,o){var d=o(3783),j=o(2341);s=function(ot){ot=j(ot),d(ot,function(ht){(function(pt){return getComputedStyle(pt,"").getPropertyValue("display")=="none"})(ht)&&(ht.style.display=function(pt){var dt,gt;return $[pt]||(dt=document.createElement(pt),document.documentElement.appendChild(dt),gt=getComputedStyle(dt,"").getPropertyValue("display"),dt.parentNode.removeChild(dt),gt=="none"&&(gt="block"),$[pt]=gt),$[pt]}(ht.nodeName))})};var $={};i.exports=s},7496:function(i,s,o){var d=o(6329),j=o(1352),$=o(5022),ot=o(7653),ht=o(9537),pt=(s=function(dt,gt){return pt.extend(dt,gt)}).Base=function dt(gt,wt,bt){bt=bt||{};var St=wt.className||ot(wt,"initialize.name")||"";delete wt.className;var Ct=function(){var Et=j(arguments);return this.initialize&&this.initialize.apply(this,Et)||this};if(!ht)try{Ct=new Function("toArr","return function "+St+"(){var args = toArr(arguments);return this.initialize ? this.initialize.apply(this, args) || this : this;};")(j)}catch{}return $(Ct,gt),Ct.prototype.constructor=Ct,Ct.extend=function(Et,Pt){return dt(Ct,Et,Pt)},Ct.inherits=function(Et){$(Ct,Et)},Ct.methods=function(Et){return d(Ct.prototype,Et),Ct},Ct.statics=function(Et){return d(Ct,Et),Ct},Ct.methods(wt).statics(bt),Ct}(Object,{className:"Base",callSuper:function(dt,gt,wt){return dt.prototype[gt].apply(this,wt)},toString:function(){return this.constructor.name}});i.exports=s},3009:function(i,s,o){var d=o(7496),j=o(6768),$=o(9882),ot=o(3279),ht=o(5925),pt=o(5044);s=d({initialize:function(Ct){j(Ct)&&(Ct=s.parse(Ct)),this.model=Ct.model,this.val=Ct.val},toRgb:function(){var Ct=this.val;this.model==="hsl"&&(Ct=ht(Ct));var Et="rgba";return Ct[3]===1&&(Et="rgb",Ct=Ct.slice(0,3)),Et+"("+Ct.join(", ")+")"},toHex:function(){var Ct=this.val;this.model==="hsl"&&(Ct=ht(Ct));var Et=pt.encode(Ct.slice(0,3));return Et[0]===Et[1]&&Et[2]===Et[3]&&Et[4]===Et[5]&&(Et=Et[0]+Et[2]+Et[5]),"#"+Et},toHsl:function(){var Ct=this.val;this.model==="rgb"&&(Ct=ot(Ct));var Et="hsla";return Ct[3]===1&&(Et="hsl",Ct=Ct.slice(0,3)),Ct[1]=Ct[1]+"%",Ct[2]=Ct[2]+"%",Et+"("+Ct.join(", ")+")"}},{parse:function(Ct){var Et,Pt,_t=[0,0,0,1],yt="rgb";if(Pt=Ct.match(dt))for(Pt=Pt[1],Et=0;Et<3;Et++)_t[Et]=parseInt(Pt[Et]+Pt[Et],16);else if(Pt=Ct.match(gt))for(Pt=Pt[1],Et=0;Et<3;Et++){var xt=2*Et;_t[Et]=parseInt(Pt.slice(xt,xt+2),16)}else if(Pt=Ct.match(wt)){for(Et=0;Et<3;Et++)_t[Et]=parseInt(Pt[Et+1],0);Pt[4]&&(_t[3]=parseFloat(Pt[4]))}else if(Pt=Ct.match(bt)){for(Et=0;Et<3;Et++)_t[Et]=Math.round(2.55*parseFloat(Pt[Et+1]));Pt[4]&&(_t[3]=parseFloat(Pt[4]))}else(Pt=Ct.match(St))&&(yt="hsl",_t=[(parseFloat(Pt[1])%360+360)%360,$(parseFloat(Pt[2]),0,100),$(parseFloat(Pt[3]),0,100),$(parseFloat(Pt[4]),0,1)]);return{val:_t,model:yt}}});var dt=/^#([a-fA-F0-9]{3})$/,gt=/^#([a-fA-F0-9]{6})$/,wt=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,bt=/^rgba?\(\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,St=/^hsla?\(\s*([+-]?\d*[.]?\d+)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/;i.exports=s},1443:function(i,s,o){var d=o(7496),j=o(6257),$=o(3783),ot=o(9677),ht=o(8763),pt=o(4675);s=d({initialize:function(){this._events=this._events||{}},on:function(dt,gt){return this._events[dt]=this._events[dt]||[],this._events[dt].push(gt),this},off:function(dt,gt){var wt=this._events;if(j(wt,dt)){var bt=wt[dt].indexOf(gt);return bt>-1&&wt[dt].splice(bt,1),this}},once:function(dt,gt){return this.on(dt,ht(gt)),this},emit:function(dt){var gt=this;if(j(this._events,dt)){var wt=ot(arguments,1),bt=pt(this._events[dt]);return $(bt,function(St){return St.apply(gt,wt)},this),this}},removeAllListeners:function(dt){return dt?delete this._events[dt]:this._events={},this}},{mixin:function(dt){$(["on","off","once","emit","removeAllListeners"],function(gt){dt[gt]=s.prototype[gt]}),dt._events=dt._events||{}}}),i.exports=s},9640:function(i,s,o){var d=o(7496),j=o(4454),$=o(6472),ot=o(3783),ht=o(2533);s=d({initialize:function(pt){$(pt)?(this.size=pt.length,ot(pt,function(dt,gt){this[dt]=gt},this)):(this.size=ht(pt).length,ot(pt,function(dt,gt){this[gt]=dt},this)),j(this)}}),i.exports=s},125:function(i,s,o){var d=o(5128),j=o(615),$=o(8887),ot=o(4400),ht=o(4193),pt=o(5166),dt=j("local");s=d.extend({initialize:function(gt,wt){this._name=gt,wt=wt||{};var bt=dt.getItem(gt);try{bt=JSON.parse(bt)}catch{bt={}}pt(bt)||(bt={}),wt=ht(bt,wt),this.callSuper(d,"initialize",[wt])},save:function(gt){if($(gt))return dt.removeItem(this._name);dt.setItem(this._name,ot(gt))}}),i.exports=s},4989:function(i,s,o){var d=o(1443),j=o(9640),$=o(1352),ot=o(1286),ht=o(4675),pt=o(6768),dt=o(3990);s=d.extend({initialize:function(gt,wt){this.name=gt,this.setLevel(ot(wt)?s.level.DEBUG:wt),this.callSuper(d,"initialize",arguments)},setLevel:function(gt){return pt(gt)?((gt=s.level[gt.toUpperCase()])&&(this._level=gt),this):(dt(gt)&&(this._level=gt),this)},getLevel:function(){return this._level},formatter:function(gt,wt){return wt},trace:function(){return this._log("trace",arguments)},debug:function(){return this._log("debug",arguments)},info:function(){return this._log("info",arguments)},warn:function(){return this._log("warn",arguments)},error:function(){return this._log("error",arguments)},_log:function(gt,wt){return(wt=$(wt)).length===0?this:(this.emit("all",gt,ht(wt)),s.level[gt.toUpperCase()]<this._level||(this.emit(gt,ht(wt)),(gt==="debug"?console.log:console[gt]).apply(console,this.formatter(gt,wt))),this)}},{level:new j({TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5})}),i.exports=s},2765:function(i,s,o){var d=o(1443);s=d.extend({className:"MediaQuery",initialize:function(j){var $=this;this.callSuper(d,"initialize"),this._listener=function(){$.emit($.isMatch()?"match":"unmatch")},this.setQuery(j)},setQuery:function(j){this._mql&&this._mql.removeListener(this._listener),this._mql=window.matchMedia(j),this._mql.addListener(this._listener)},isMatch:function(){return this._mql.matches}}),i.exports=s},2289:function(i,s,o){var d=o(7496);(s=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)||(s=d({initialize:function(){},observe:function(){},disconnect:function(){},takeRecords:function(){}})),i.exports=s},242:function(i,s,o){var d=o(8985),j=o(8613),$=o(5543),ot=o(975),ht=o(6341),pt=o(6329),dt=o(5610);s=dt.ResizeObserver?d.extend({initialize:function(gt){var wt=this;if(gt._resizeSensor)return gt._resizeSensor;this.callSuper(d,"initialize");var bt=new dt.ResizeObserver(function(){return wt.emit()});bt.observe(gt),gt._resizeSensor=this,this._resizeObserver=bt,this._el=gt},destroy:function(){var gt=this._el;gt._resizeSensor&&(this.rmAllListeners(),delete gt._resizeSensor,this._resizeObserver.unobserve(gt))}}):d.extend({initialize:function(gt){if(gt._resizeSensor)return gt._resizeSensor;this.callSuper(d,"initialize"),this._el=gt,gt._resizeSensor=this,ht(["absolute","relative","fixed","sticky"],ot(gt,"position"))||ot(gt,"position","relative"),this._appendResizeSensor(),this._bindEvent()},destroy:function(){var gt=this._el;gt._resizeSensor&&(this.rmAllListeners(),delete gt._resizeSensor,gt.removeChild(this._resizeSensorEl))},_appendResizeSensor:function(){var gt=this._el,wt={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},bt={position:"absolute",left:"0px",top:"0px",transition:"0s"},St=j("div",{style:bt}),Ct=j("div.resize-sensor-expand",{style:wt},St),Et=j("div.resize-sensor-shrink",{style:wt},j("div",{style:pt({width:"200%",height:"200%"},bt)})),Pt=j("div.resize-sensor",{dir:"ltr",style:wt},Ct,Et);this._expandEl=Ct,this._expandChildEl=St,this._shrinkEl=Et,this._resizeSensorEl=Pt,gt.appendChild(Pt),this._resetExpandShrink()},_bindEvent:function(){var gt=this;$.on(this._expandEl,"scroll",function(){return gt._onScroll()}),$.on(this._shrinkEl,"scroll",function(){return gt._onScroll()})},_onScroll:function(){this.emit(),this._resetExpandShrink()},_resetExpandShrink:function(){var gt=this._el,wt=gt.offsetWidth,bt=gt.offsetHeight;ot(this._expandChildEl,{width:wt+10,height:bt+10}),pt(this._expandEl,{scrollLeft:wt+10,scrollTop:bt+10}),pt(this._shrinkEl,{scrollLeft:wt+10,scrollTop:bt+10})}}),i.exports=s},3244:function(i,s,o){var d=o(7496),j=o(6768),$=o(3783),ot=o(9971),ht=new(s=d({className:"Select",initialize:function(pt){return this.length=0,pt?j(pt)?ht.find(pt):void(pt.nodeType&&(this[0]=pt,this.length=1)):this},find:function(pt){var dt=new s;return this.each(function(){ot(dt,this.querySelectorAll(pt))}),dt},each:function(pt){return $(this,function(dt,gt){pt.call(dt,gt,dt)}),this}}))(document);i.exports=s},8985:function(i,s,o){var d=o(7496),j=o(4675),$=o(3783),ot=o(1352);s=d({initialize:function(){this._listeners=[]},addListener:function(ht){this._listeners.push(ht)},rmListener:function(ht){var pt=this._listeners.indexOf(ht);pt>-1&&this._listeners.splice(pt,1)},rmAllListeners:function(){this._listeners=[]},emit:function(){var ht=this,pt=ot(arguments),dt=j(this._listeners);$(dt,function(gt){return gt.apply(ht,pt)},this)}},{mixin:function(ht){$(["addListener","rmListener","emit","rmAllListeners"],function(pt){ht[pt]=s.prototype[pt]}),ht._listeners=ht._listeners||[]}}),i.exports=s},9001:function(i,s,o){var d=o(7496),j=o(1527);s=d({initialize:function(){this.clear()},clear:function(){this._items=[],this.size=0},push:function($){return this._items.push($),++this.size},pop:function(){if(this.size)return this.size--,this._items.pop()},peek:function(){return this._items[this.size-1]},forEach:function($,ot){ot=arguments.length>1?ot:this;for(var ht=this._items,pt=this.size-1,dt=0;pt>=0;pt--,dt++)$.call(ot,ht[pt],dt,this)},toArr:function(){return j(this._items)}}),i.exports=s},5128:function(i,s,o){var d=o(1443),j=o(6768),$=o(5166),ot=o(3783),ht=o(1352);s=d.extend({initialize:function(pt){this.callSuper(d,"initialize",arguments),this._data=pt||{},this.save(this._data)},set:function(pt,dt){var gt;j(pt)?(gt={})[pt]=dt:$(pt)&&(gt=pt);var wt=this;ot(gt,function(bt,St){var Ct=wt._data[St];wt._data[St]=bt,wt.emit("change",St,bt,Ct)}),this.save(this._data)},get:function(pt){var dt=this._data;if(j(pt))return dt[pt];var gt={};return ot(pt,function(wt){gt[wt]=dt[wt]}),gt},remove:function(pt){pt=ht(pt);var dt=this._data;ot(pt,function(gt){delete dt[gt]}),this.save(dt)},clear:function(){this._data={},this.save(this._data)},each:function(pt){ot(this._data,pt)},save:function(pt){this._data=pt}}),i.exports=s},6334:function(i,s,o){var d=o(7496),j=o(6329),$=o(4331),ot=o(1745),ht=o(8887),pt=o(3783),dt=o(6472),gt=o(1352),wt=o(2727),bt=o(5166),St=o(3367);s=d({className:"Url",initialize:function(_t){!_t&&wt&&(_t=window.location.href),j(this,s.parse(_t||""))},setQuery:function(_t,yt){var xt=this.query;return bt(_t)?pt(_t,function(Dt,Ot){xt[Ot]=St(Dt)}):xt[_t]=St(yt),this},rmQuery:function(_t){var yt=this.query;return dt(_t)||(_t=gt(_t)),pt(_t,function(xt){delete yt[xt]}),this},toString:function(){return s.stringify(this)}},{parse:function(_t){var yt={protocol:"",auth:"",hostname:"",hash:"",query:{},port:"",pathname:"",slashes:!1},xt=$(_t),Dt=!1,Ot=xt.match(Ct);if(Ot&&(Ot=Ot[0],yt.protocol=Ot.toLowerCase(),xt=xt.substr(Ot.length)),Ot&&(Dt=xt.substr(0,2)==="//")&&(xt=xt.slice(2),yt.slashes=!0),Dt){for(var Bt=xt,At=-1,It=0,Gt=Pt.length;It<Gt;It++){var Jt=xt.indexOf(Pt[It]);Jt!==-1&&(At===-1||Jt<At)&&(At=Jt)}At>-1&&(Bt=xt.slice(0,At),xt=xt.slice(At));var nn=Bt.lastIndexOf("@");nn!==-1&&(yt.auth=decodeURIComponent(Bt.slice(0,nn)),Bt=Bt.slice(nn+1)),yt.hostname=Bt;var Vt=Bt.match(Et);Vt&&((Vt=Vt[0])!==":"&&(yt.port=Vt.substr(1)),yt.hostname=Bt.substr(0,Bt.length-Vt.length))}var Ut=xt.indexOf("#");Ut!==-1&&(yt.hash=xt.substr(Ut),xt=xt.slice(0,Ut));var Ht=xt.indexOf("?");return Ht!==-1&&(yt.query=ot.parse(xt.substr(Ht+1)),xt=xt.slice(0,Ht)),yt.pathname=xt||"/",yt},stringify:function(_t){var yt=_t.protocol+(_t.slashes?"//":"")+(_t.auth?encodeURIComponent(_t.auth)+"@":"")+_t.hostname+(_t.port?":"+_t.port:"")+_t.pathname;return ht(_t.query)||(yt+="?"+ot.stringify(_t.query)),_t.hash&&(yt+=_t.hash),yt}});var Ct=/^([a-z0-9.+-]+:)/i,Et=/:[0-9]*$/,Pt=["/","?","#"];i.exports=s},8991:function(i,s,o){var d=o(4777),j=o(1214),$=o(4193),ot=o(5166),ht=o(1745);function pt(dt,gt,wt,bt){return d(gt)&&(bt=wt,wt=gt,gt={}),{url:dt,data:gt,success:wt,dataType:bt}}(s=function(dt){$(dt,s.setting);var gt,wt=dt.type,bt=dt.url,St=dt.data,Ct=dt.dataType,Et=dt.success,Pt=dt.error,_t=dt.timeout,yt=dt.complete,xt=dt.xhr();return xt.onreadystatechange=function(){if(xt.readyState===4){var Dt;clearTimeout(gt);var Ot=xt.status;if(Ot>=200&&Ot<300||Ot===304){Dt=xt.responseText,Ct==="xml"&&(Dt=xt.responseXML);try{Ct==="json"&&(Dt=JSON.parse(Dt))}catch{}Et(Dt,xt)}else Pt(xt);yt(xt)}},wt==="GET"?(St=ht.stringify(St))&&(bt+=bt.indexOf("?")>-1?"&"+St:"?"+St):dt.contentType==="application/x-www-form-urlencoded"?ot(St)&&(St=ht.stringify(St)):dt.contentType==="application/json"&&ot(St)&&(St=JSON.stringify(St)),xt.open(wt,bt,!0),xt.setRequestHeader("Content-Type",dt.contentType),_t>0&&(gt=setTimeout(function(){xt.onreadystatechange=j,xt.abort(),Pt(xt,"timeout"),yt(xt)},_t)),xt.send(wt==="GET"?null:St),xt}).setting={type:"GET",success:j,error:j,complete:j,dataType:"json",contentType:"application/x-www-form-urlencoded",data:{},xhr:function(){return new XMLHttpRequest},timeout:0},s.get=function(){return s(pt.apply(null,arguments))},s.post=function(){var dt=pt.apply(null,arguments);return dt.type="POST",s(dt)},i.exports=s},1116:function(i,s,o){var d=o(2533),j=o(415),$=o(42),ot=Object.getOwnPropertyNames,ht=Object.getOwnPropertySymbols;s=function(pt){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},gt=dt.prototype,wt=gt===void 0||gt,bt=dt.unenumerable,St=bt!==void 0&&bt,Ct=dt.symbol,Et=Ct!==void 0&&Ct,Pt=[];if((St||Et)&&ot){var _t=d;St&&ot&&(_t=ot);do Pt=Pt.concat(_t(pt)),Et&&ht&&(Pt=Pt.concat(ht(pt)));while(wt&&(pt=j(pt))&&pt!==Object.prototype);Pt=$(Pt)}else if(wt)for(var yt in pt)Pt.push(yt);else Pt=d(pt);return Pt},i.exports=s},7913:function(i,s,o){var d=o(3783),j=o(1286),$=o(4777);s=function(ot,ht){j(ht)&&(ht=!0);var pt=$(ht),dt={};return d(ot,function(gt){dt[gt]=pt?ht(gt):ht}),dt},i.exports=s},3901:function(i,s){s={encode:function(ot){var ht,pt,dt=[],gt=ot.length,wt=gt%3;gt-=wt;for(var bt=0;bt<gt;bt+=3)dt.push((ht=(ot[bt]<<16)+(ot[bt+1]<<8)+ot[bt+2],d[ht>>18&63]+d[ht>>12&63]+d[ht>>6&63]+d[63&ht]));return gt=ot.length,wt===1?(pt=ot[gt-1],dt.push(d[pt>>2]),dt.push(d[pt<<4&63]),dt.push("==")):wt===2&&(pt=(ot[gt-2]<<8)+ot[gt-1],dt.push(d[pt>>10]),dt.push(d[pt>>4&63]),dt.push(d[pt<<2&63]),dt.push("=")),dt.join("")},decode:function(ot){var ht=ot.length,pt=0;ot[ht-2]==="="?pt=2:ot[ht-1]==="="&&(pt=1);var dt,gt,wt,bt,St,Ct,Et,Pt=new Array(3*ht/4-pt);for(ht=pt>0?ht-4:ht,dt=0,gt=0;dt<ht;dt+=4){var _t=(wt=ot[dt],bt=ot[dt+1],St=ot[dt+2],Ct=ot[dt+3],o[wt.charCodeAt(0)]<<18|o[bt.charCodeAt(0)]<<12|o[St.charCodeAt(0)]<<6|o[Ct.charCodeAt(0)]);Pt[gt++]=_t>>16&255,Pt[gt++]=_t>>8&255,Pt[gt++]=255&_t}return pt===2?(Et=o[ot.charCodeAt(dt)]<<2|o[ot.charCodeAt(dt+1)]>>4,Pt[gt++]=255&Et):pt===1&&(Et=o[ot.charCodeAt(dt)]<<10|o[ot.charCodeAt(dt+1)]<<4|o[ot.charCodeAt(dt+2)]>>2,Pt[gt++]=Et>>8&255,Pt[gt++]=255&Et),Pt}};for(var o=[],d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=0,$=d.length;j<$;j++)o[d.charCodeAt(j)]=j;i.exports=s},5637:function(i,s){s=function(o,d){var j;return function(){return--o>0&&(j=d.apply(this,arguments)),o<=1&&(d=null),j}},i.exports=s},7494:function(i,s,o){var d=o(8935);function j($,ot){this[ot]=$.replace(/\w/,function(ht){return ht.toUpperCase()})}s=function($){var ot=d($),ht=ot[0];return ot.shift(),ot.forEach(j,ot),ht+=ot.join("")},i.exports=s},1694:function(i,s,o){var d=o(6257),j=o(6472);s=function(ht,pt){if(j(ht))return ht;if(pt&&d(pt,ht))return[ht];var dt=[];return ht.replace($,function(gt,wt,bt,St){dt.push(bt?St.replace(ot,"$1"):wt||gt)}),dt};var $=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ot=/\\(\\)?/g;i.exports=s},996:function(i,s){s=function(o,d){var j=[];d=d||1;for(var $=0,ot=Math.ceil(o.length/d);$<ot;$++){var ht=$*d,pt=ht+d;j.push(o.slice(ht,pt))}return j},i.exports=s},9882:function(i,s,o){var d=o(1286);s=function(j,$,ot){return d(ot)&&(ot=$,$=void 0),!d($)&&j<$?$:j>ot?ot:j},i.exports=s},4675:function(i,s,o){var d=o(5166),j=o(6472),$=o(6329);s=function(ot){return d(ot)?j(ot)?ot.slice():$({},ot):ot},i.exports=s},550:function(i,s,o){var d=o(5166),j=o(4777),$=o(6472),ot=o(8820);s=function(ht){return $(ht)?ht.map(function(pt){return s(pt)}):d(ht)&&!j(ht)?ot(ht,function(pt){return s(pt)}):ht},i.exports=s},8099:function(i,s,o){var d=o(1352);s=function(){for(var j=d(arguments),$=[],ot=0,ht=j.length;ot<ht;ot++)$=$.concat(d(j[ot]));return $},i.exports=s},6341:function(i,s,o){var d=o(496),j=o(6768),$=o(1369),ot=o(2578);s=function(ht,pt){return j(ht)?ht.indexOf(pt)>-1:($(ht)||(ht=ot(ht)),d(ht,pt)>=0)},i.exports=s},1792:function(i,s,o){var d=o(6768),j=o(3901),$=o(385),ot=o(6472),ht=o(2349),pt=o(3085),dt=o(3063);(s=function(gt,wt){var bt;if(wt=dt(wt),d(gt))bt=new Uint8Array(j.decode(gt));else if($(gt))gt=gt.slice(0),bt=new Uint8Array(gt);else if(ot(gt))bt=new Uint8Array(gt);else if(pt(gt)==="uint8array")bt=gt.slice(0);else if(ht(gt)){bt=new Uint8Array(gt.length);for(var St=0;St<gt.length;St++)bt[St]=gt[St]}if(bt)switch(wt){case"base64":bt=j.encode(bt);break;case"arraybuffer":bt=bt.buffer;break;case"array":bt=[].slice.call(bt);break;case"buffer":bt=Buffer.from(bt);break;case"blob":bt=new Blob([bt.buffer])}return bt}).blobToArrBuffer=function(gt){return new Promise(function(wt,bt){var St=new FileReader;St.onload=function(Ct){wt(Ct.target.result)},St.onerror=function(Ct){bt(Ct)},St.readAsArrayBuffer(gt)})},i.exports=s},6299:function(i,s,o){var d=o(4193),j=o(3990),$=o(1286),ot=o(1420),ht={path:"/"};function pt(dt,gt,wt){if(!$(gt)){if(wt=d(wt=wt||{},ht),j(wt.expires)){var bt=new Date;bt.setMilliseconds(bt.getMilliseconds()+864e5*wt.expires),wt.expires=bt}return gt=encodeURIComponent(gt),dt=encodeURIComponent(dt),document.cookie=[dt,"=",gt,wt.expires&&"; expires="+wt.expires.toUTCString(),wt.path&&"; path="+wt.path,wt.domain&&"; domain="+wt.domain,wt.secure?"; secure":""].join(""),s}for(var St=document.cookie?document.cookie.split("; "):[],Ct=dt?void 0:{},Et=0,Pt=St.length;Et<Pt;Et++){var _t=St[Et],yt=_t.split("="),xt=ot(yt.shift());if(_t=yt.join("="),_t=ot(_t),dt===xt){Ct=_t;break}dt||(Ct[xt]=_t)}return Ct}s={get:pt,set:pt,remove:function(dt,gt){return(gt=gt||{}).expires=-1,pt(dt,"",gt)}},i.exports=s},2327:function(i,s,o){var d=o(6329),j=o(1214);s=function($,ot){ot=ot||j;var ht=document.createElement("textarea"),pt=document.body;d(ht.style,{fontSize:"12pt",border:"0",padding:"0",margin:"0",position:"absolute",left:"-9999px"}),ht.value=$,pt.appendChild(ht),ht.setAttribute("readonly",""),ht.select(),ht.setSelectionRange(0,$.length);try{document.execCommand("copy"),ot()}catch(dt){ot(dt)}finally{pt.removeChild(ht)}},i.exports=s},1662:function(i,s,o){var d=o(5166);s=function($){if(!d($))return{};if(j)return j($);function ot(){}return ot.prototype=$,new ot};var j=Object.create;i.exports=s},4427:function(i,s,o){var d=o(1286),j=o(3783);s=function($,ot){return function(ht){return j(arguments,function(pt,dt){if(dt!==0){var gt=$(pt);j(gt,function(wt){ot&&!d(ht[wt])||(ht[wt]=pt[wt])})}}),ht}},i.exports=s},4210:function(i,s,o){var d=o(1475),j=o(1286),$=o(7494);s=d(function(ht,pt){return j(pt)?(ht=$(ht),!j(ot[ht])):(ot.cssText="",ot.cssText=ht+":"+pt,!!ot.length)},function(ht,pt){return ht+" "+pt});var ot=document.createElement("p").style;i.exports=s},4407:function(i,s,o){var d=o(6768),j=o(2106),$=o(3367),ot=o(5351);s=function(bt,St,Ct,Et){arguments.length===1&&d(bt)&&!gt.test(bt)&&(St=bt,bt=void 0),bt=bt||new Date,j(bt)||(bt=new Date(bt));var Pt=(St=$(s.masks[St]||St||s.masks.default)).slice(0,4);Pt!=="UTC:"&&Pt!=="GMT:"||(St=St.slice(4),Ct=!0,Pt==="GMT:"&&(Et=!0));var _t=Ct?"getUTC":"get",yt=bt[_t+"Date"](),xt=bt[_t+"Day"](),Dt=bt[_t+"Month"](),Ot=bt[_t+"FullYear"](),Bt=bt[_t+"Hours"](),At=bt[_t+"Minutes"](),It=bt[_t+"Seconds"](),Gt=bt[_t+"Milliseconds"](),Jt=Ct?0:bt.getTimezoneOffset(),nn={d:yt,dd:ht(yt),ddd:s.i18n.dayNames[xt],dddd:s.i18n.dayNames[xt+7],m:Dt+1,mm:ht(Dt+1),mmm:s.i18n.monthNames[Dt],mmmm:s.i18n.monthNames[Dt+12],yy:$(Ot).slice(2),yyyy:Ot,h:Bt%12||12,hh:ht(Bt%12||12),H:Bt,HH:ht(Bt),M:At,MM:ht(At),s:It,ss:ht(It),l:ht(Gt,3),L:ht(Math.round(Gt/10)),t:Bt<12?"a":"p",tt:Bt<12?"am":"pm",T:Bt<12?"A":"P",TT:Bt<12?"AM":"PM",Z:Et?"GMT":Ct?"UTC":($(bt).match(dt)||[""]).pop().replace(wt,""),o:(Jt>0?"-":"+")+ht(100*Math.floor(Math.abs(Jt)/60)+Math.abs(Jt)%60,4),S:["th","st","nd","rd"][yt%10>3?0:(yt%100-yt%10!=10)*yt%10]};return St.replace(pt,function(Vt){return Vt in nn?nn[Vt]:Vt.slice(1,Vt.length-1)})};var ht=function(bt){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return ot($(bt),St,"0")},pt=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,dt=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,gt=/\d/,wt=/[^-+\dA-Z]/g;s.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},s.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},i.exports=s},6049:function(i,s){s=function(o,d,j){var $;return function(){var ot=this,ht=arguments;j||clearTimeout($),j&&$||($=setTimeout(function(){$=null,o.apply(ot,ht)},d))}},i.exports=s},1420:function(i,s,o){var d=o(3783),j=o(8166),$=o(2461),ot=o(5742);function ht(dt){return+("0x"+dt)}s=function(dt){try{return decodeURIComponent(dt)}catch{var gt=dt.match(pt);return gt&&d(gt,function(bt){dt=dt.replace(bt,function(St){St=St.split("%").slice(1);var Ct=$(St,ht);return St=j.encode(Ct),St=ot.decode(St,!0),St}(bt))}),dt}};var pt=/(%[a-f0-9]{2})+/gi;i.exports=s},4193:function(i,s,o){s=o(4427)(o(1116),!0),i.exports=s},9803:function(i,s,o){var d=o(1694),j=o(6768),$=o(5166),ot=o(3783);function ht(pt,dt,gt){for(var wt=d(dt,pt),bt=wt.pop();dt=wt.shift();)pt[dt]||(pt[dt]={}),pt=pt[dt];Object.defineProperty(pt,bt,gt)}s=function(pt,dt,gt){return j(dt)?ht(pt,dt,gt):$(dt)&&ot(dt,function(wt,bt){ht(pt,bt,wt)}),pt},i.exports=s},2443:function(i,s,o){var d=o(7496),j=o(6341);function $(){return!0}function ot(){return!1}function ht(dt){var gt,wt=this.events[dt.type],bt=pt.call(this,dt,wt);dt=new s.Event(dt);for(var St,Ct,Et=0;(Ct=bt[Et++])&&!dt.isPropagationStopped();)for(dt.curTarget=Ct.el,St=0;(gt=Ct.handlers[St++])&&!dt.isImmediatePropagationStopped();)gt.handler.apply(Ct.el,[dt])===!1&&(dt.preventDefault(),dt.stopPropagation())}function pt(dt,gt){var wt,bt,St,Ct,Et=dt.target,Pt=[],_t=gt.delegateCount;if(Et.nodeType)for(;Et!==this;Et=Et.parentNode||this){for(bt=[],Ct=0;Ct<_t;Ct++)bt[wt=(St=gt[Ct]).selector+" "]===void 0&&(bt[wt]=j(this.querySelectorAll(wt),Et)),bt[wt]&&bt.push(St);bt.length&&Pt.push({el:Et,handlers:bt})}return _t<gt.length&&Pt.push({el:this,handlers:gt.slice(_t)}),Pt}s={add:function(dt,gt,wt,bt){var St,Ct={selector:wt,handler:bt};dt.events||(dt.events={}),(St=dt.events[gt])||((St=dt.events[gt]=[]).delegateCount=0,dt.addEventListener(gt,function(){ht.apply(dt,arguments)},!1)),wt?St.splice(St.delegateCount++,0,Ct):St.push(Ct)},remove:function(dt,gt,wt,bt){var St=dt.events;if(St&&St[gt])for(var Ct,Et=St[gt],Pt=Et.length;Pt--;)Ct=Et[Pt],wt&&Ct.selector!=wt||Ct.handler!=bt||(Et.splice(Pt,1),Ct.selector&&Et.delegateCount--)},Event:d({className:"Event",initialize:function(dt){this.origEvent=dt},isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var dt=this.origEvent;this.isDefaultPrevented=$,dt&&dt.preventDefault&&dt.preventDefault()},stopPropagation:function(){var dt=this.origEvent;this.isPropagationStopped=$,dt&&dt.stopPropagation&&dt.stopPropagation()},stopImmediatePropagation:function(){var dt=this.origEvent;this.isImmediatePropagationStopped=$,dt&&dt.stopImmediatePropagation&&dt.stopImmediatePropagation(),this.stopPropagation()}})},i.exports=s},4541:function(i,s,o){var d=o(2727),j=o(9296),$=o(2533);s=function(gt){var wt=dt(gt=(gt=gt||(d?navigator.userAgent:"")).toLowerCase(),"msie ");if(wt)return{version:wt,name:"ie"};if(ht.test(gt))return{version:11,name:"ie"};for(var bt=0,St=pt.length;bt<St;bt++){var Ct=pt[bt],Et=gt.match(ot[Ct]);if(Et!=null){var Pt=j(Et[1].split(".")[0]);return Ct==="opera"&&(Pt=dt(gt,"version/")||Pt),{name:Ct,version:Pt}}}return{name:"unknown",version:-1}};var ot={edge:/edge\/([0-9._]+)/,firefox:/firefox\/([0-9.]+)(?:\s|$)/,opera:/opera\/([0-9.]+)(?:\s|$)/,android:/android\s([0-9.]+)/,ios:/version\/([0-9._]+).*mobile.*safari.*/,safari:/version\/([0-9._]+).*safari/,chrome:/(?!chrom.*opr)chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/},ht=/trident\/7\./,pt=$(ot);function dt(gt,wt){var bt=gt.indexOf(wt);if(bt>-1)return j(gt.substring(bt+wt.length,gt.indexOf(".",bt)))}i.exports=s},6954:function(i,s,o){var d=o(2727);s=function(j){if(j=(j=j||(d?navigator.userAgent:"")).toLowerCase(),$("windows phone"))return"windows phone";if($("win"))return"windows";if($("android"))return"android";if($("ipad")||$("iphone")||$("ipod"))return"ios";if($("mac"))return"os x";if($("linux"))return"linux";function $(ot){return j.indexOf(ot)>-1}return"unknown"},i.exports=s},801:function(i,s,o){var d=o(1137),j=o(288),$=o(5972),ot=o(6341);s=d(function(ht,pt){return pt=j(pt),$(ht,function(dt){return!ot(pt,dt)})}),i.exports=s},3783:function(i,s,o){var d=o(1369),j=o(2533),$=o(3955);s=function(ot,ht,pt){var dt,gt;if(ht=$(ht,pt),d(ot))for(dt=0,gt=ot.length;dt<gt;dt++)ht(ot[dt],dt,ot);else{var wt=j(ot);for(dt=0,gt=wt.length;dt<gt;dt++)ht(ot[wt[dt]],wt[dt],ot)}return ot},i.exports=s},4858:function(i,s){s=function(o,d){var j=o.length-d.length;return j>=0&&o.indexOf(d,j)===j},i.exports=s},8901:function(i,s,o){var d=o(2533),j=(s=function(dt){return ot.test(dt)?dt.replace(ht,pt):dt}).map={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$="(?:"+d(j).join("|")+")",ot=new RegExp($),ht=new RegExp($,"g"),pt=function(dt){return j[dt]};i.exports=s},4187:function(i,s,o){var d=o(3367);s=function($){return d($).replace(j,function(ot){switch(ot){case'"':case"'":case"\\":return"\\"+ot;case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}})};var j=/["'\\\n\r\u2028\u2029]/g;i.exports=s},2337:function(i,s){s=function(o){return o.replace(/\W/g,"\\$&")},i.exports=s},642:function(i,s){s=function(o){var d=document.createElement("style");return d.textContent=o,d.type="text/css",document.head.appendChild(d),d},i.exports=s},1672:function(i,s,o){var d=o(2838),j=o(1369),$=o(2533);s=function(ot,ht,pt){ht=d(ht,pt);for(var dt=!j(ot)&&$(ot),gt=(dt||ot).length,wt=0;wt<gt;wt++){var bt=dt?dt[wt]:wt;if(!ht(ot[bt],bt,ot))return!1}return!0},i.exports=s},6329:function(i,s,o){s=o(4427)(o(1116)),i.exports=s},3021:function(i,s,o){var d=o(2533);s=o(4427)(d),i.exports=s},2581:function(i,s,o){var d=o(42),j=o(4331),$=o(2461),ot=o(1352);s=function(pt){var dt=ot(pt.match(ht));return d($(dt,function(gt){return j(gt)}))};var ht=/((https?)|(ftp)):\/\/[\w.]+[^ \f\n\r\t\v"\\<>[\]\u2100-\uFFFF(),]*/gi;i.exports=s},5972:function(i,s,o){var d=o(2838),j=o(3783);s=function($,ot,ht){var pt=[];return ot=d(ot,ht),j($,function(dt,gt,wt){ot(dt,gt,wt)&&pt.push(dt)}),pt},i.exports=s},2244:function(i,s,o){var d=o(2267),j=o(4072),$=o(1369),ot=o(1286);s=function(ht,pt,dt){var gt=($(ht)?j:d)(ht,pt,dt);if(!ot(gt)&&gt!==-1)return ht[gt]},i.exports=s},4072:function(i,s,o){var d=o(2838);s=function(j,$,ot,ht){ht=ht||1,$=d($,ot);for(var pt=j.length,dt=ht>0?0:pt-1;dt>=0&&dt<pt;){if($(j[dt],dt,j))return dt;dt+=ht}return-1},i.exports=s},2267:function(i,s,o){var d=o(2838),j=o(2533);s=function($,ot,ht){ot=d(ot,ht);for(var pt,dt=j($),gt=0,wt=dt.length;gt<wt;gt++)if(ot($[pt=dt[gt]],pt,$))return pt},i.exports=s},288:function(i,s,o){var d=o(6472);function j($,ot){for(var ht,pt=$.length,dt=-1;pt--;)ht=$[++dt],d(ht)?j(ht,ot):ot.push(ht);return ot}s=function($){return j($,[])},i.exports=s},4454:function(i,s,o){var d=o(2533);s=function(j){return Object.freeze?Object.freeze(j):(d(j).forEach(function($){Object.getOwnPropertyDescriptor(j,$).configurable&&Object.defineProperty(j,$,{writable:!1,configurable:!1})}),j)},i.exports=s},415:function(i,s,o){var d=o(5166),j=o(4777),$=Object.getPrototypeOf,ot={}.constructor;s=function(ht){if(d(ht)){if($)return $(ht);var pt=ht.__proto__;return pt||pt===null?pt:j(ht.constructor)?ht.constructor.prototype:ht instanceof ot?ot.prototype:void 0}},i.exports=s},8613:function(i,s,o){var d=o(9833),j=o(6768),$=o(6930),ot=o(7781),ht=o(975),pt=o(3783),dt=o(4777);s=function(gt,wt){for(var bt=arguments.length,St=new Array(bt>2?bt-2:0),Ct=2;Ct<bt;Ct++)St[Ct-2]=arguments[Ct];(d(wt)||j(wt))&&(St.unshift(wt),wt=null),wt||(wt={});var Et=function(Dt){for(var Ot="div",Bt="",At=[],It=[],Gt="",Jt=0,nn=Dt.length;Jt<nn;Jt++){var Vt=Dt[Jt];Vt==="#"||Vt==="."?(It.push(Gt),Gt=Vt):Gt+=Vt}It.push(Gt);for(var Ut=0,Ht=It.length;Ut<Ht;Ut++)(Gt=It[Ut])&&($(Gt,"#")?Bt=Gt.slice(1):$(Gt,".")?At.push(Gt.slice(1)):Ot=Gt);return{tagName:Ot,id:Bt,classes:At}}(gt),Pt=Et.tagName,_t=Et.id,yt=Et.classes,xt=document.createElement(Pt);return _t&&xt.setAttribute("id",_t),ot.add(xt,yt),pt(St,function(Dt){j(Dt)?xt.appendChild(document.createTextNode(Dt)):d(Dt)&&xt.appendChild(Dt)}),pt(wt,function(Dt,Ot){j(Dt)?xt.setAttribute(Ot,Dt):dt(Dt)&&$(Ot,"on")?xt.addEventListener(Ot.slice(2),Dt,!1):Ot==="style"&&ht(xt,Dt)}),xt},i.exports=s},6257:function(i,s){var o=Object.prototype.hasOwnProperty;s=function(d,j){return o.call(d,j)},i.exports=s},5044:function(i,s,o){var d=o(7348);s={encode:function(j){for(var $=[],ot=0,ht=j.length;ot<ht;ot++){var pt=j[ot];$.push((pt>>>4).toString(16)),$.push((15&pt).toString(16))}return $.join("")},decode:function(j){var $=[],ot=j.length;d(ot)&&ot--;for(var ht=0;ht<ot;ht+=2)$.push(parseInt(j.substr(ht,2),16));return $}},i.exports=s},3651:function(i,s,o){var d=o(3783),j=o(4193);s=function(ht){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"js",dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};j(dt,$),ht=ht.replace(/</g,"&lt;").replace(/>/g,"&gt;"),pt=ot[pt];var gt=0,wt=[];d(pt,function(St){St.language&&(ht=ht.replace(St.re,function(Ct,Et){return Et?(wt[gt++]=s(Et,St.language,dt),Ct.replace(Et,"___subtmpl"+(gt-1)+"___")):Ct}))}),d(pt,function(St,Ct){ot[St.language]||(ht=ht.replace(St.re,"___"+Ct+"___$1___end"+Ct+"___"))});var bt=[];return ht=ht.replace(/___(?!subtmpl)\w+?___/g,function(St){var Ct=St.substr(3,3)==="end",Et=(Ct?St.substr(6):St.substr(3)).replace(/_/g,""),Pt=bt.length>0?bt[bt.length-1]:null;return!Ct&&(Pt==null||Et==Pt||Pt!=null&&pt[Pt]&&pt[Pt].embed!=null&&pt[Pt].embed.indexOf(Et)>-1)?(bt.push(Et),St):Ct&&Et==Pt?(bt.pop(),St):""}),d(pt,function(St,Ct){var Et=dt[St.style]?' style="'.concat(dt[St.style],'"'):"";ht=ht.replace(new RegExp("___end"+Ct+"___","g"),"</span>").replace(new RegExp("___"+Ct+"___","g"),'<span class="'.concat(St.style,'"').concat(Et,">"))}),d(pt,function(St){St.language&&(ht=ht.replace(/___subtmpl\d+___/g,function(Ct){var Et=parseInt(Ct.replace(/___subtmpl(\d+)___/,"$1"),10);return wt[Et]}))}),ht};var $={comment:"color:#63a35c;",string:"color:#183691;",number:"color:#0086b3;",keyword:"color:#a71d5d;",operator:"color:#994500;"},ot={js:{comment:{re:/(\/\/.*|\/\*([\s\S]*?)\*\/)/g,style:"comment"},string:{re:/(('.*?')|(".*?"))/g,style:"string"},numbers:{re:/(-?(\d+|\d+\.\d+|\.\d+))/g,style:"number"},keywords:{re:/(?:\b)(function|for|foreach|while|if|else|elseif|switch|break|as|return|this|class|self|default|var|const|let|false|true|null|undefined)(?:\b)/gi,style:"keyword"},operator:{re:/(\+|-|\/|\*|%|=|&lt;|&gt;|\||\?|\.)/g,style:"operator"}}};ot.html={comment:{re:/(&lt;!--([\s\S]*?)--&gt;)/g,style:"comment"},tag:{re:/(&lt;\/?\w(.|\n)*?\/?&gt;)/g,style:"keyword",embed:["string"]},string:ot.js.string,css:{re:/(?:&lt;style.*?&gt;)([\s\S]*)?(?:&lt;\/style&gt;)/gi,language:"css"},script:{re:/(?:&lt;script.*?&gt;)([\s\S]*?)(?:&lt;\/script&gt;)/gi,language:"js"}},ot.css={comment:ot.js.comment,string:ot.js.string,numbers:{re:/((-?(\d+|\d+\.\d+|\.\d+)(%|px|em|pt|in)?)|#[0-9a-fA-F]{3}[0-9a-fA-F]{3})/g,style:"number"},keywords:{re:/(@\w+|:?:\w+|[a-z-]+:)/g,style:"keyword"}},i.exports=s},5925:function(i,s){s=function(d){var j,$,ot,ht=d[0]/360,pt=d[1]/100,dt=d[2]/100,gt=[];if(d[3]&&(gt[3]=d[3]),pt===0)return ot=o(255*dt),gt[0]=gt[1]=gt[2]=ot,gt;for(var wt=2*dt-(j=dt<.5?dt*(1+pt):dt+pt-dt*pt),bt=0;bt<3;bt++)($=ht+.3333333333333333*-(bt-1))<0&&$++,$>1&&$--,ot=6*$<1?wt+6*(j-wt)*$:2*$<1?j:3*$<2?wt+(j-wt)*(.6666666666666666-$)*6:wt,gt[bt]=o(255*ot);return gt};var o=Math.round;i.exports=s},7483:function(i,s,o){var d=o(8702),j=o(9001),$=o(6472),ot=o(3783),ht=o(6768),pt=o(8820),dt=function(wt){return wt.replace(/&quot;/g,'"')},gt=function(wt){return wt.replace(/"/g,"&quot;")};s={parse:function(wt){var bt=[],St=new j;return d(wt,{start:function(Ct,Et){Et=pt(Et,function(Pt){return dt(Pt)}),St.push({tag:Ct,attrs:Et})},end:function(){var Ct=St.pop();if(St.size){var Et=St.peek();$(Et.content)||(Et.content=[]),Et.content.push(Ct)}else bt.push(Ct)},comment:function(Ct){var Et="<!--".concat(Ct,"-->"),Pt=St.peek();Pt?(Pt.content||(Pt.content=[]),Pt.content.push(Et)):bt.push(Et)},text:function(Ct){var Et=St.peek();Et?(Et.content||(Et.content=[]),Et.content.push(Ct)):bt.push(Ct)}}),bt},stringify:function wt(bt){var St="";return $(bt)?ot(bt,function(Ct){return St+=wt(Ct)}):ht(bt)?St=bt:(St+="<".concat(bt.tag),ot(bt.attrs,function(Ct,Et){return St+=" ".concat(Et,'="').concat(gt(Ct),'"')}),St+=">",bt.content&&(St+=wt(bt.content)),St+="</".concat(bt.tag,">")),St}},i.exports=s},6362:function(i,s){s=function(o){return o},i.exports=s},496:function(i,s){s=function(o,d,j){return Array.prototype.indexOf.call(o,d,j)},i.exports=s},5022:function(i,s,o){var d=o(1662);s=function(j,$){j.prototype=d($.prototype)},i.exports=s},7190:function(i,s,o){var d=o(3783);s=function(j){var $={};return d(j,function(ot,ht){$[ot]=ht}),$},i.exports=s},7403:function(i,s,o){var d=o(106);s=function(j){return d(j)==="[object Arguments]"},i.exports=s},6472:function(i,s,o){var d=o(106);s=Array.isArray?Array.isArray:function(j){return d(j)==="[object Array]"},i.exports=s},385:function(i,s,o){var d=o(106);s=function(j){return d(j)==="[object ArrayBuffer]"},i.exports=s},1369:function(i,s,o){var d=o(3990),j=o(4777),$=Math.pow(2,53)-1;s=function(ot){if(!ot)return!1;var ht=ot.length;return d(ht)&&ht>=0&&ht<=$&&!j(ot)},i.exports=s},4696:function(i,s){s=function(o){return o===!0||o===!1},i.exports=s},2727:function(i,s){s=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,i.exports=s},2349:function(i,s,o){var d=o(4777);s=function(j){return j!=null&&(!!j._isBuffer||j.constructor&&d(j.constructor.isBuffer)&&j.constructor.isBuffer(j))},i.exports=s},2520:function(i,s,o){var d=new(o(2765))("(prefers-color-scheme: dark)");s=function(){return d.isMatch()},i.exports=s},2106:function(i,s,o){var d=o(106);s=function(j){return d(j)==="[object Date]"},i.exports=s},9833:function(i,s){s=function(o){return!(!o||o.nodeType!==1)},i.exports=s},8887:function(i,s,o){var d=o(1369),j=o(6472),$=o(6768),ot=o(7403),ht=o(2533);s=function(pt){return pt==null||(d(pt)&&(j(pt)||$(pt)||ot(pt))?pt.length===0:ht(pt).length===0)},i.exports=s},2749:function(i,s,o){var d=o(106);s=function(j){return d(j)==="[object Error]"},i.exports=s},4777:function(i,s,o){var d=o(106);s=function(j){var $=d(j);return $==="[object Function]"||$==="[object GeneratorFunction]"||$==="[object AsyncFunction]"},i.exports=s},9585:function(i,s,o){var d=o(5610),j=d.getComputedStyle,$=d.document;function ot(ht,pt){return ht.right<pt.left||ht.left>pt.right||ht.bottom<pt.top||ht.top>pt.bottom}s=function(ht){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dt=pt.display,gt=dt===void 0||dt,wt=pt.visibility,bt=wt!==void 0&&wt,St=pt.opacity,Ct=St!==void 0&&St,Et=pt.size,Pt=Et!==void 0&&Et,_t=pt.viewport,yt=_t!==void 0&&_t,xt=pt.overflow,Dt=xt!==void 0&&xt,Ot=j(ht);if(gt){var Bt=ht.tagName;if(Bt==="BODY"||Bt==="HTML"||Ot.position==="fixed"){if(Ot.display==="none")return!0;for(var At=ht;At=At.parentElement;)if(j(At).display==="none")return!0}else if(ht.offsetParent===null)return!0}if(bt&&Ot.visibility==="hidden")return!0;if(Ct){if(Ot.opacity==="0")return!0;for(var It=ht;It=It.parentElement;)if(j(It).opacity==="0")return!0}var Gt=ht.getBoundingClientRect();if(Pt&&(Gt.width===0||Gt.height===0))return!0;if(yt)return ot(Gt,{top:0,left:0,right:$.documentElement.clientWidth,bottom:$.documentElement.clientHeight});if(Dt)for(var Jt=ht;Jt=Jt.parentElement;){var nn=j(Jt).overflow;if((nn==="scroll"||nn==="hidden")&&ot(Gt,Jt.getBoundingClientRect()))return!0}return!1},i.exports=s},2246:function(i,s,o){var d=o(3990);s=function(j){return d(j)&&j%1==0},i.exports=s},4219:function(i,s){s=function(o){try{return JSON.parse(o),!0}catch{return!1}},i.exports=s},3708:function(i,s,o){var d=o(106);s=function(j){return d(j)==="[object Map]"},i.exports=s},7949:function(i,s,o){var d=o(2533);s=function(j,$){var ot=d($),ht=ot.length;if(j==null)return!ht;j=Object(j);for(var pt=0;pt<ht;pt++){var dt=ot[pt];if($[dt]!==j[dt]||!(dt in j))return!1}return!0},i.exports=s},9537:function(i,s,o){var d=o(4777);s=typeof wx<"u"&&d(wx.openLocation),i.exports=s},9956:function(i,s,o){var d=o(2727),j=o(1475),$=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,ot=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i;s=j(function(ht){return ht=ht||(d?navigator.userAgent:""),$.test(ht)||ot.test(ht.substr(0,4))}),i.exports=s},9433:function(i,s,o){var d=o(3990);s=function(j){return d(j)&&j!==+j},i.exports=s},8740:function(i,s,o){var d=o(5166),j=o(4777),$=o(300);s=function(dt){return!!d(dt)&&(j(dt)?ht.test($(dt)):pt.test($(dt)))};var ot=Object.prototype.hasOwnProperty,ht=new RegExp("^"+$(ot).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pt=/^\[object .+?Constructor\]$/;i.exports=s},2763:function(i,s){s=function(o){return o==null},i.exports=s},1965:function(i,s,o){var d=o(106);s=typeof process<"u"&&d(process)==="[object process]",i.exports=s},6156:function(i,s){s=function(o){return o===null},i.exports=s},3990:function(i,s,o){var d=o(106);s=function(j){return d(j)==="[object Number]"},i.exports=s},5166:function(i,s){s=function(o){var d=typeof o;return!!o&&(d==="function"||d==="object")},i.exports=s},7348:function(i,s,o){var d=o(2246);s=function(j){return!!d(j)&&j%2!=0},i.exports=s},6997:function(i,s){s=function(o){var d=typeof o;return o==null||d!=="function"&&d!=="object"},i.exports=s},4321:function(i,s,o){var d=o(5166),j=o(4777);s=function($){return d($)&&j($.then)&&j($.catch)},i.exports=s},1754:function(i,s,o){var d=o(106);s=function(j){return d(j)==="[object RegExp]"},i.exports=s},7470:function(i,s,o){var d=o(106);s=function(j){return d(j)==="[object Set]"},i.exports=s},3843:function(i,s){s=function(o){for(var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.defComparator,j=0,$=o.length;j<$-1;j++)if(d(o[j],o[j+1])>0)return!1;return!0},s.defComparator=function(o,d){return o<d?-1:o>d?1:0},i.exports=s},6768:function(i,s,o){var d=o(106);s=function(j){return d(j)==="[object String]"},i.exports=s},9804:function(i,s){s=function(o){return typeof o=="symbol"},i.exports=s},1286:function(i,s){s=function(o){return o===void 0},i.exports=s},7622:function(i,s,o){var d=o(8935);s=function(j){return d(j).join("-")},i.exports=s},2533:function(i,s,o){var d=o(6257);s=Object.keys?Object.keys:function(j){var $=[];for(var ot in j)d(j,ot)&&$.push(ot);return $},i.exports=s},9702:function(i,s){s=function(o){var d=o?o.length:0;if(d)return o[d-1]},i.exports=s},3988:function(i,s,o){var d=o(2581),j=o(3783),$=o(2337);function ot(ht){return'<a href="'+ht+'">'+ht+"</a>"}s=function(ht,pt){pt=pt||ot;var dt=d(ht);return j(dt,function(gt){ht=ht.replace(new RegExp($(gt),"g"),pt)}),ht},i.exports=s},9622:function(i,s){s=function(o,d){var j=document.createElement("script");j.src=o,j.onload=function(){var $=j.readyState&&j.readyState!="complete"&&j.readyState!="loaded";d&&d(!$)},j.onerror=function(){d(!1)},document.body.appendChild(j)},i.exports=s},3063:function(i,s,o){var d=o(3367);s=function(j){return d(j).toLocaleLowerCase()},i.exports=s},5351:function(i,s,o){var d=o(4552),j=o(3367);s=function($,ot,ht){var pt=($=j($)).length;return ht=ht||" ",pt<ot&&($=(d(ht,ot-pt)+$).slice(-ot)),$},i.exports=s},7767:function(i,s){var o=/^\s+/;s=function(d,j){if(j==null)return d.trimLeft?d.trimLeft():d.replace(o,"");for(var $,ot,ht=0,pt=d.length,dt=j.length,gt=!0;gt&&ht<pt;)for(gt=!1,$=-1,ot=d.charAt(ht);++$<dt;)if(ot===j[$]){gt=!0,ht++;break}return ht>=pt?"":d.substr(ht,pt)},i.exports=s},2461:function(i,s,o){var d=o(2838),j=o(2533),$=o(1369);s=function(ot,ht,pt){ht=d(ht,pt);for(var dt=!$(ot)&&j(ot),gt=(dt||ot).length,wt=Array(gt),bt=0;bt<gt;bt++){var St=dt?dt[bt]:bt;wt[bt]=ht(ot[St],St,ot)}return wt},i.exports=s},8820:function(i,s,o){var d=o(2838),j=o(2533);s=function($,ot,ht){ot=d(ot,ht);for(var pt=j($),dt=pt.length,gt={},wt=0;wt<dt;wt++){var bt=pt[wt];gt[bt]=ot($[bt],bt,$)}return gt},i.exports=s},4491:function(i,s,o){var d=o(3021),j=o(7949);s=function($){return $=d({},$),function(ot){return j(ot,$)}},i.exports=s},9853:function(i,s){s=function(){for(var o=arguments,d=o[0],j=1,$=o.length;j<$;j++)o[j]>d&&(d=o[j]);return d},i.exports=s},5026:function(i,s,o){var d=o(2533);s={getItem:function(dt){return($[dt]?j[dt]:this[dt])||null},setItem:function(dt,gt){$[dt]?j[dt]=gt:this[dt]=gt},removeItem:function(dt){$[dt]?delete j[dt]:delete this[dt]},key:function(dt){var gt=ot();return dt>=0&&dt<gt.length?gt[dt]:null},clear:function(){for(var dt,gt=ht(),wt=0;dt=gt[wt];wt++)delete this[dt];gt=pt();for(var bt,St=0;bt=gt[St];St++)delete j[bt]}},Object.defineProperty(s,"length",{enumerable:!1,configurable:!0,get:function(){return ot().length}});var j={},$={getItem:1,setItem:1,removeItem:1,key:1,clear:1,length:1};function ot(){return ht().concat(pt())}function ht(){return d(s).filter(function(dt){return!$[dt]})}function pt(){return d(j)}i.exports=s},1475:function(i,s,o){var d=o(6257);s=function(j,$){var ot=function(ht){var pt=ot.cache,dt=""+($?$.apply(this,arguments):ht);return d(pt,dt)||(pt[dt]=j.apply(this,arguments)),pt[dt]};return ot.cache={},ot},i.exports=s},9971:function(i,s,o){s=o(1137)(function(d,j){for(var $=d.length,ot=0,ht=j.length;ot<ht;ot++)for(var pt=j[ot],dt=0,gt=pt.length;dt<gt;dt++)d[$++]=pt[dt];return d.length=$,d}),i.exports=s},8573:function(i,s,o){var d=o(3783),j=o(6768),$=o(1286),ot=o(6341),ht=o(6472),pt=o(5166),dt=o(1352);(s=function(St,Ct){if($(St))return Et={},wt(function(_t,yt){Et[_t]=yt}),Et;var Et;if(j(St)&&$(Ct)||ht(St))return function(_t){if(!j(_t)){var yt={};return wt(function(Dt,Ot){ot(_t,Dt)&&(yt[Dt]=Ot)}),yt}var xt=bt(_t);if(xt)return xt.getAttribute("content")}(St);var Pt=St;pt(Pt)||((Pt={})[St]=Ct),function(_t){d(_t,function(yt,xt){var Dt=bt(xt);if(Dt)return Dt.setAttribute("content",yt);(Dt=gt.createElement("meta")).setAttribute("name",xt),Dt.setAttribute("content",yt),gt.head.appendChild(Dt)})}(Pt)}).remove=function(St){St=dt(St),d(St,function(Ct){var Et=bt(Ct);Et&&gt.head.removeChild(Et)})};var gt=document;function wt(St){var Ct=gt.querySelectorAll("meta");d(Ct,function(Et){var Pt=Et.getAttribute("name"),_t=Et.getAttribute("content");Pt&&_t&&St(Pt,_t)})}function bt(St){return gt.querySelector('meta[name="'+St+'"]')}i.exports=s},6435:function(i,s){s=function(){for(var o=arguments,d=o[0],j=1,$=o.length;j<$;j++)o[j]<d&&(d=o[j]);return d},i.exports=s},4677:function(i,s,o){var d=o(3875),j=o(6768);s=function(pt){if(j(pt)){var dt=pt.match(ht);return dt?d(dt[1])*$[dt[2]||"ms"]:0}for(var gt=pt,wt="ms",bt=0,St=ot.length;bt<St;bt++)if(gt>=$[ot[bt]]){wt=ot[bt];break}return+(gt/$[wt]).toFixed(2)+wt};var $={ms:1,s:1e3};$.m=60*$.s,$.h=60*$.m,$.d=24*$.h,$.y=365.25*$.d;var ot=["y","d","h","m","s"],ht=/^((?:\d+)?\.?\d+) *(s|m|h|d|y)?$/;i.exports=s},6339:function(i,s,o){var d=o(6930),j=o(5610),$=o(3367);function ot(ht,pt){if(ht=$(ht),pt=$(pt),d(ht,"_")&&!d(pt,"_"))return 1;if(d(pt,"_")&&!d(ht,"_"))return-1;for(var dt,gt,wt,bt,St=/^\d+|^\D+/;;){if(!ht)return pt?-1:0;if(!pt)return 1;if(dt=ht.match(St)[0],gt=pt.match(St)[0],wt=!j.isNaN(dt),bt=!j.isNaN(gt),wt&&!bt)return-1;if(bt&&!wt)return 1;if(wt&&bt){var Ct=dt-gt;if(Ct)return Ct;if(dt.length!==gt.length)return+dt||+gt?gt.length-dt.length:dt.length-gt.length}else if(dt!==gt)return dt<gt?-1:1;ht=ht.substring(dt.length),pt=pt.substring(gt.length)}}s=function(ht){return ht.sort(ot)},i.exports=s},6837:function(i,s){function o(d){if(typeof d!="function")throw new TypeError(d+" is not a function");return d}s=typeof process=="object"&&process.nextTick?process.nextTick:typeof setImmediate=="function"?function(d){setImmediate(o(d))}:function(d){setTimeout(o(d),0)},i.exports=s},1214:function(i,s){s=function(){},i.exports=s},8847:function(i,s){s=Date.now?Date.now:function(){return new Date().getTime()},i.exports=s},106:function(i,s){var o=Object.prototype.toString;s=function(d){return o.call(d)},i.exports=s},8763:function(i,s,o){s=o(4198)(o(5637),2),i.exports=s},3955:function(i,s,o){var d=o(1286);s=function(j,$,ot){if(d($))return j;switch(ot??3){case 1:return function(ht){return j.call($,ht)};case 3:return function(ht,pt,dt){return j.call($,ht,pt,dt)};case 4:return function(ht,pt,dt,gt){return j.call($,ht,pt,dt,gt)}}return function(){return j.apply($,arguments)}},i.exports=s},442:function(i,s,o){var d=o(1443),j=o(7653),$=window.screen;s={get:function(){if($){var ot=j($,"orientation.type");if(ot)return ot.split("-").shift()}return window.innerWidth>window.innerHeight?"landscape":"portrait"}},d.mixin(s),window.addEventListener("orientationchange",function(){setTimeout(function(){s.emit("change",s.get())},200)},!1),i.exports=s},8702:function(i,s,o){var d=o(9702),j=o(7913),$=o(6930),ot=o(3063);s=function(bt,St){for(var Ct,Et=[],Pt=bt;bt;){if(Ct=!0,d(Et)&&wt[d(Et)]){var _t=new RegExp("</".concat(d(Et),"[^>]*>")).exec(bt);if(_t){var yt=bt.substring(0,_t.index);bt=bt.substring(_t.index+_t[0].length),yt&&St.text&&St.text(yt)}Jt("",d(Et))}else{if($(bt,"<!--")){var xt=bt.indexOf("-->");xt>=0&&(St.comment&&St.comment(bt.substring(4,xt)),bt=bt.substring(xt+3),Ct=!1)}else if($(bt,"<!")){var Dt=bt.match(ht);Dt&&(St.text&&St.text(bt.substring(0,Dt[0].length)),bt=bt.substring(Dt[0].length),Ct=!1)}else if($(bt,"</")){var Ot=bt.match(pt);Ot&&(bt=bt.substring(Ot[0].length),Ot[0].replace(pt,Jt),Ct=!1)}else if($(bt,"<")){var Bt=bt.match(dt);Bt&&(bt=bt.substring(Bt[0].length),Bt[0].replace(dt,Gt),Ct=!1)}if(Ct){var At=bt.indexOf("<"),It=At<0?bt:bt.substring(0,At);bt=At<0?"":bt.substring(At),St.text&&St.text(It)}}if(Pt===bt)throw Error("Parse Error: "+bt);Pt=bt}function Gt(nn,Vt,Ut,Ht){if(Vt=ot(Vt),(Ht=!!Ht)||Et.push(Vt),St.start){var jt={};Ut.replace(gt,function(Wt,ln,Qt,Xt,on){jt[ln]=Qt||Xt||on||""}),St.start(Vt,jt,Ht)}}function Jt(nn,Vt){var Ut;if(Vt=ot(Vt))for(Ut=Et.length-1;Ut>=0&&Et[Ut]!==Vt;Ut--);else Ut=0;if(Ut>=0){for(var Ht=Et.length-1;Ht>=Ut;Ht--)St.end&&St.end(Et[Ht]);Et.length=Ut}}Jt()};var ht=/^<!\s*doctype((?:\s+[\w:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,pt=/^<\/([-A-Za-z0-9_]+)[^>]*>/,dt=/^<([-A-Za-z0-9_]+)((?:\s+[-A-Za-z0-9_:@.]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,gt=/([-A-Za-z0-9_:@.]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,wt=j("script,style".split(","));i.exports=s},4198:function(i,s,o){var d=o(1137),j=o(1352);s=d(function($,ot){return function(){var ht=[];return ht=(ht=ht.concat(ot)).concat(j(arguments)),$.apply(this,ht)}}),i.exports=s},1194:function(i,s,o){var d,j=o(8847),$=o(5610),ot=$.performance,ht=$.process;if(ot&&ot.now)s=function(){return ot.now()};else if(ht&&ht.hrtime){var pt=function(){var dt=ht.hrtime();return 1e9*dt[0]+dt[1]};d=pt()-1e9*ht.uptime(),s=function(){return(pt()-d)/1e6}}else d=j(),s=function(){return j()-d};i.exports=s},3487:function(i,s,o){var d=o(6768),j=o(6472),$=o(6341),ot=o(3783);s=function(ht,pt,dt){if(d(pt)&&(pt=[pt]),j(pt)){var gt=pt;pt=function(St,Ct){return $(gt,Ct)}}var wt={},bt=function(St,Ct){pt(St,Ct)&&(wt[Ct]=St)};return dt&&(bt=function(St,Ct){pt(St,Ct)||(wt[Ct]=St)}),ot(ht,bt),wt},i.exports=s},747:function(i,s,o){var d=o(1475),j=o(7494),$=o(3023),ot=o(6257),ht=o(7622);(s=d(function(wt){if(wt=wt.replace(dt,""),wt=j(wt),ot(gt,wt))return wt;for(var bt=pt.length;bt--;){var St=pt[bt]+$(wt);if(ot(gt,St))return St}return wt})).dash=d(function(wt){var bt=s(wt);return(dt.test(bt)?"-":"")+ht(bt)});var pt=["O","ms","Moz","Webkit"],dt=/^(O)|(ms)|(Moz)|(Webkit)|(-o-)|(-ms-)|(-moz-)|(-webkit-)/g,gt=document.createElement("p").style;i.exports=s},2994:function(i,s,o){var d=o(6472),j=o(7653);s=function($){return d($)?function(ht){return j(ht,$)}:(ot=$,function(ht){return ht?.[ot]});var ot},i.exports=s},1745:function(i,s,o){var d=o(4331),j=o(3783),$=o(1286),ot=o(6472),ht=o(2461),pt=o(8887),dt=o(5972),gt=o(5166);s={parse:function(bt){var St={};return bt=d(bt).replace(wt,""),j(bt.split("&"),function(Ct){var Et=Ct.split("="),Pt=Et.shift(),_t=Et.length>0?Et.join("="):null;Pt=decodeURIComponent(Pt),_t=decodeURIComponent(_t),$(St[Pt])?St[Pt]=_t:ot(St[Pt])?St[Pt].push(_t):St[Pt]=[St[Pt],_t]}),St},stringify:function(bt,St){return dt(ht(bt,function(Ct,Et){return gt(Ct)&&pt(Ct)?"":ot(Ct)?s.stringify(Ct,Et):encodeURIComponent(St||Et)+"="+encodeURIComponent(Ct)}),function(Ct){return Ct.length>0}).join("&")}};var wt=/^(\?|#|&)/g;i.exports=s},1571:function(i,s,o){var d,j,$=o(8847),ot=o(2727),ht=0;if(ot){d=window.requestAnimationFrame,j=window.cancelAnimationFrame;for(var pt=["ms","moz","webkit","o"],dt=0,gt=pt.length;dt<gt&&!d;dt++)d=window[pt[dt]+"RequestAnimationFrame"],j=window[pt[dt]+"CancelAnimationFrame"]||window[pt[dt]+"CancelRequestAnimationFrame"];d&&(d=d.bind(window),j=j.bind(window))}j=j||function(wt){clearTimeout(wt)},(d=d||function(wt){var bt=$(),St=Math.max(0,16-(bt-ht)),Ct=setTimeout(function(){wt(bt+St)},St);return ht=bt+St,Ct}).cancel=j,s=d,i.exports=s},1216:function(i,s){s=function(o,d,j){d==null&&(d=o,o=0);var $=Math.random();return j||o%1||d%1?Math.min(o+$*(d-o+parseFloat("1e-"+(($+"").length-1))),d):o+Math.floor($*(d-o+1))},i.exports=s},3366:function(module,exports,__webpack_require__){var random=__webpack_require__(1216),isBrowser=__webpack_require__(2727),isNode=__webpack_require__(1965),crypto;exports=function(i){for(var s=new Uint8Array(i),o=0;o<i;o++)s[o]=random(0,255);return s},isBrowser?(crypto=window.crypto||window.msCrypto,crypto&&(exports=function(i){var s=new Uint8Array(i);return crypto.getRandomValues(s),s})):isNode&&(crypto=eval("require")("crypto"),exports=function(i){return crypto.randomBytes(i)}),module.exports=exports},4270:function(i,s){var o,d=[],j=document,$=j.documentElement.doScroll,ot="DOMContentLoaded",ht=($?/^loaded|^c/:/^loaded|^i|^c/).test(j.readyState);ht||j.addEventListener(ot,o=function(){for(j.removeEventListener(ot,o),ht=1;o=d.shift();)o()}),s=function(pt){ht?setTimeout(pt,0):d.push(pt)},i.exports=s},5852:function(i,s,o){var d=o(2838);s=function(j,$,ot){var ht=[];$=d($,ot);for(var pt=-1,dt=j.length;++pt<dt;){var gt=pt-ht.length,wt=j[gt];$(wt,pt,j)&&(ht.push(wt),j.splice(gt,1))}return ht},i.exports=s},4552:function(i,s){s=function(o,d){var j="";if(d<1)return"";for(;d>0;)1&d&&(j+=o),d>>=1,o+=o;return j},i.exports=s},8368:function(i,s,o){var d=o(2337);s=function(j,$,ot){return j.replace(new RegExp(d($),"g"),ot)},i.exports=s},1137:function(i,s){s=function(o,d){return d=d==null?o.length-1:+d,function(){var j,$=Math.max(arguments.length-d,0),ot=new Array($);for(j=0;j<$;j++)ot[j]=arguments[j+d];switch(d){case 0:return o.call(this,ot);case 1:return o.call(this,arguments[0],ot);case 2:return o.call(this,arguments[0],arguments[1],ot)}var ht=new Array(d+1);for(j=0;j<d;j++)ht[j]=arguments[j];return ht[d]=ot,o.apply(this,ht)}},i.exports=s},1527:function(i,s){s=function(o){var d=o.length,j=Array(d);d--;for(var $=0;$<=d;$++)j[d-$]=o[$];return j},i.exports=s},3279:function(i,s){s=function($){var ot,ht,pt=$[0]/255,dt=$[1]/255,gt=$[2]/255,wt=o(pt,dt,gt),bt=d(pt,dt,gt),St=bt-wt;(ot=o(60*(ot=bt===wt?0:pt===bt?(dt-gt)/St:dt===bt?2+(gt-pt)/St:4+(pt-dt)/St),360))<0&&(ot+=360);var Ct=(wt+bt)/2;ht=bt===wt?0:Ct<=.5?St/(bt+wt):St/(2-bt-wt);var Et=[j(ot),j(100*ht),j(100*Ct)];return $[3]&&(Et[3]=$[3]),Et};var o=Math.min,d=Math.max,j=Math.round;i.exports=s},5031:function(i,s,o){var d=o(6299);s=function(j){var $,ot=window.location,ht=ot.hostname,pt=ot.pathname,dt=ht.split("."),gt=pt.split("/"),wt="",bt=gt.length;if(!_t())for(var St=dt.length-1;St>=0;St--){var Ct=dt[St];if(Ct!==""){if(_t({domain:wt=wt===""?Ct:Ct+"."+wt,path:$="/"})||_t({domain:wt}))return;for(var Et=0;Et<bt;Et++){var Pt=gt[Et];if(Pt!==""&&(_t({domain:wt,path:$+=Pt})||_t({path:$})||_t({domain:wt,path:$+="/"})||_t({path:$})))return}}}function _t(yt){return yt=yt||{},d.remove(j,yt),!d.get(j)}},i.exports=s},5610:function(i,s,o){s=o(2727)?window:o.g,i.exports=s},3597:function(i,s){s=function(o,d){if(d==null){if(o.trimRight)return o.trimRight();d=` \r
	\f\v`}for(var j,$,ot=o.length-1,ht=d.length,pt=!0;pt&&ot>=0;)for(pt=!1,j=-1,$=o.charAt(ot);++j<ht;)if($===d[j]){pt=!0,ot--;break}return ot>=0?o.substring(0,ot+1):""},i.exports=s},2838:function(i,s,o){var d=o(4777),j=o(5166),$=o(6472),ot=o(3955),ht=o(4491),pt=o(6362),dt=o(2994);s=function(gt,wt,bt){return gt==null?pt:d(gt)?ot(gt,wt,bt):j(gt)&&!$(gt)?ht(gt):dt(gt)},i.exports=s},7653:function(i,s,o){var d=o(1286),j=o(1694);s=function($,ot){var ht;for(ht=(ot=j(ot,$)).shift();!d(ht);){if(($=$[ht])==null)return;ht=ot.shift()}return $},i.exports=s},8079:function(i,s,o){var d=o(1694),j=o(1286),$=o(3367),ot=o(9804),ht=o(6768);s=function(pt,dt,gt){var wt,bt=(dt=d(dt,pt)).pop();for(wt=dt.shift();!j(wt);){if(ht(wt)||ot(wt)||(wt=$(wt)),wt==="__proto__"||wt==="constructor"||wt==="prototype")return;pt[wt]||(pt[wt]={}),pt=pt[wt],wt=dt.shift()}pt[bt]=gt},i.exports=s},615:function(i,s,o){var d=o(5026);s=function(j){var $;switch(j=j||"local"){case"local":$=window.localStorage;break;case"session":$=window.sessionStorage}try{var ot="test-localStorage-"+Date.now();$.setItem(ot,ot);var ht=$.getItem(ot);if($.removeItem(ot),ht!==ot)throw new Error}catch{return d}return $},i.exports=s},4224:function(i,s,o){var d=o(6334);s=function(j,$){return j=new d(j),$=new d($),j.port=0|j.port||(j.protocol==="https"?443:80),$.port=0|$.port||($.protocol==="https"?443:80),j.protocol===$.protocol&&j.hostname===$.hostname&&j.port===$.port},i.exports=s},9677:function(i,s){s=function(o,d,j){var $=o.length;d=d==null?0:d<0?Math.max($+d,0):Math.min(d,$),j=j==null?$:j<0?Math.max($+j,0):Math.min(j,$);for(var ot=[];d<j;)ot.push(o[d++]);return ot},i.exports=s},6053:function(i,s,o){var d=o(2838),j=o(1369),$=o(2533);s=function(ot,ht,pt){ht=d(ht,pt);for(var dt=!j(ot)&&$(ot),gt=(dt||ot).length,wt=0;wt<gt;wt++){var bt=dt?dt[wt]:wt;if(ht(ot[bt],bt,ot))return!0}return!1},i.exports=s},3629:function(i,s,o){var d=o(3843),j=o(4193),$=o(2533),ot=o(6472),ht=o(5166);s=function(dt){var gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};j(gt,pt);var wt=gt.deep,bt=gt.comparator,St=[],Ct=[];return function Et(Pt){var _t,yt=St.indexOf(Pt);if(yt>-1)return Ct[yt];if(ot(Pt)){_t=[],St.push(Pt),Ct.push(_t);for(var xt=0,Dt=Pt.length;xt<Dt;xt++){var Ot=Pt[xt];wt&&ht(Ot)?_t[xt]=Et(Ot):_t[xt]=Ot}}else{_t={},St.push(Pt),Ct.push(_t);for(var Bt=$(Pt).sort(bt),At=0,It=Bt.length;At<It;At++){var Gt=Bt[At],Jt=Pt[Gt];wt&&ht(Jt)?_t[Gt]=Et(Jt):_t[Gt]=Jt}}return _t}(dt)};var pt={deep:!1,comparator:d.defComparator};i.exports=s},8935:function(i,s){var o=/([A-Z])/g,d=/[_.\- ]+/g,j=/(^-)|(-$)/g;s=function($){return($=$.replace(o,"-$1").toLowerCase().replace(d,"-").replace(j,"")).split("-")},i.exports=s},6930:function(i,s){s=function(o,d){return o.indexOf(d)===0},i.exports=s},4400:function(i,s,o){var d=o(3085),j=o(3023),$=o(3367),ot=o(1286),ht=o(4777),pt=o(1754);s=function(dt,gt){return JSON.stringify(dt,(wt=[],bt=[],function(St,Ct){if(wt.length>0){var Et=wt.indexOf(this);Et>-1?(wt.splice(Et+1),bt.splice(Et,1/0,St)):(wt.push(this),bt.push(St));var Pt=wt.indexOf(Ct);Pt>-1&&(Ct=wt[0]===Ct?"[Circular ~]":"[Circular ~."+bt.slice(0,Pt).join(".")+"]")}else wt.push(Ct);return pt(Ct)||ht(Ct)?Ct="["+j(d(Ct))+" "+$(Ct)+"]":ot(Ct)&&(Ct=null),Ct}),gt);var wt,bt},i.exports=s},9963:function(i,s,o){var d=o(4187),j=o(3085),$=o(3367),ot=o(4858),ht=o(300),pt=o(2533),dt=o(3783),gt=o(7496),wt=o(415),bt=o(801),St=o(6329),Ct=o(4321),Et=o(5972),Pt=o(8847),_t=o(1116),yt=o(6341),xt=o(5166),Dt=o(9537),Ot=o(1662),Bt=o(6930),At=o(8079),It=o(9803),Gt=o(3487),Jt=o(1369);function nn(Qt,Xt,on,sn){var bn=[];return dt(Xt,function(Zn){var Rn,vn=Object.getOwnPropertyDescriptor(on,Zn),yn=vn&&vn.get,Ln=vn&&vn.set;if(!sn.accessGetter&&yn)Rn="(...)";else try{if(Rn=on[Zn],yt(sn.ignore,Rn))return;Ct(Rn)&&Rn.catch(function(){})}catch(qn){Rn=qn.message}bn.push("".concat(Vt(Zn),":").concat(s(Rn,sn))),yn&&bn.push("".concat(Vt("get "+$(Zn)),":").concat(s(vn.get,sn))),Ln&&bn.push("".concat(Vt("set "+$(Zn)),":").concat(s(vn.set,sn)))}),'"'.concat(Qt,'":{')+bn.join(",")+"}"}function Vt(Qt){return'"'.concat(Ht(Qt),'"')}function Ut(Qt){return'"'.concat(Ht($(Qt)),'"')}function Ht(Qt){return d(Qt).replace(/\\'/g,"'").replace(/\t/g,"\\t")}s=function(Qt){var Xt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},on=Xt.self,sn=Xt.startTime,bn=sn===void 0?Pt():sn,Zn=Xt.timeout,Rn=Zn===void 0?0:Zn,vn=Xt.depth,yn=vn===void 0?0:vn,Ln=Xt.curDepth,qn=Ln===void 0?1:Ln,_r=Xt.visitor,Jn=_r===void 0?new jt:_r,dr=Xt.unenumerable,Un=dr!==void 0&&dr,mn=Xt.symbol,xn=mn!==void 0&&mn,cn=Xt.accessGetter,kn=cn!==void 0&&cn,En=Xt.ignore,cr=En===void 0?[]:En,Gn="",ur={visitor:Jn,unenumerable:Un,symbol:xn,accessGetter:kn,depth:yn,curDepth:qn+1,timeout:Rn,startTime:bn,ignore:cr},hn=j(Qt,!1);if(hn==="String")Gn=Ut(Qt);else if(hn==="Number")Gn=$(Qt),ot(Gn,"Infinity")&&(Gn='{"value":"'.concat(Gn,'","type":"Number"}'));else if(hn==="NaN")Gn='{"value":"NaN","type":"Number"}';else if(hn==="Boolean")Gn=Qt?"true":"false";else if(hn==="Null")Gn="null";else if(hn==="Undefined")Gn='{"type":"Undefined"}';else if(hn==="Symbol"){var sr="Symbol";try{sr=$(Qt)}catch{}Gn='{"value":'.concat(Ut(sr),',"type":"Symbol"}')}else{if(Rn&&Pt()-bn>Rn)return Ut("Timeout");if(yn&&qn>yn)return Ut("{...}");Gn="{";var An,Nn=[],Wn=Jn.get(Qt);if(Wn?(An=Wn.id,Nn.push('"reference":'.concat(An))):(An=Jn.set(Qt),Nn.push('"id":'.concat(An))),Nn.push('"type":"'.concat(hn,'"')),ot(hn,"Function")?Nn.push('"value":'.concat(Ut(ht(Qt)))):hn==="RegExp"&&Nn.push('"value":'.concat(Ut(Qt))),!Wn){var Dn=pt(Qt);if(Dn.length&&Nn.push(nn("enumerable",Dn,on||Qt,ur)),Un){var Kn=bt(_t(Qt,{prototype:!1,unenumerable:!0}),Dn);Kn.length&&Nn.push(nn("unenumerable",Kn,on||Qt,ur))}if(xn){var lr=Et(_t(Qt,{prototype:!1,symbol:!0}),function(br){return typeof br=="symbol"});lr.length&&Nn.push(nn("symbol",lr,on||Qt,ur))}var Rr=wt(Qt);if(Rr&&!yt(cr,Rr)){var $r='"proto":'.concat(s(Rr,St(ur,{self:on||Qt})));Nn.push($r)}}Gn+=Nn.join(",")+"}"}return Gn};var jt=gt({initialize:function(){this.id=1,this.visited=[]},set:function(Qt){var Xt=this.visited,on=this.id,sn={id:on,val:Qt};return Xt.push(sn),this.id++,on},get:function(Qt){for(var Xt=this.visited,on=0,sn=Xt.length;on<sn;on++){var bn=Xt[on];if(Qt===bn.val)return bn}return!1}});function Wt(Qt,Xt){var on=Xt.map;if(!xt(Qt))return Qt;var sn=Qt.id,bn=Qt.type,Zn=Qt.value,Rn=Qt.proto,vn=Qt.reference,yn=Qt.enumerable,Ln=Qt.unenumerable;if(vn)return Qt;if(bn==="Number")return Zn==="Infinity"?Number.POSITIVE_INFINITY:Zn==="-Infinity"?Number.NEGATIVE_INFINITY:NaN;if(bn!=="Undefined"){var qn,_r,Jn;if(bn==="Function")(qn=function(){}).toString=function(){return Zn},Rn&&Object.setPrototypeOf(qn,Wt(Rn,Xt));else if(bn==="RegExp")Jn=(_r=Zn).lastIndexOf("/"),qn=new RegExp(_r.slice(1,Jn),_r.slice(Jn+1));else{var dr;bn!=="Object"?(dr=Dt?function(){}:new Function(bn,""),Rn&&(dr.prototype=Wt(Rn,Xt)),qn=new dr):qn=Ot(Rn?Wt(Rn,Xt):null)}var Un,mn={};return yn&&(Jt(yn)&&(Un=yn.length,delete yn.length),yn=Gt(yn,function(cn,kn){return!xn(yn,cn,kn)}),dt(yn,function(cn,kn){(mn[kn]||{}).get||(qn[kn]=Wt(cn,Xt))}),Un&&(qn.length=Un)),Ln&&(Ln=Gt(Ln,function(cn,kn){return!xn(Ln,cn,kn)}),dt(Ln,function(cn,kn){var En=mn[kn]||{};if(!En.get)if(cn=Wt(cn,Xt),xt(cn)&&cn.reference){var cr=cn.reference;cn=function(){return on[cr]},En.get=cn}else En.value=cn;En.enumerable=!1,mn[kn]=En})),It(qn,mn),on[sn]=qn,qn}function xn(cn,kn,En){En=$(En);var cr=!1;return dt(["get","set"],function(Gn){if(Bt(En,Gn+" ")){var ur=En.replace(Gn+" ","");cn[ur]&&((kn=Wt(kn,Xt))==="Timeout"&&(kn=ln),At(mn,[ur,Gn],kn),cr=!0)}}),cr}}function ln(){return"Timeout"}s.parse=function(Qt){var Xt={},on=Wt(JSON.parse(Qt),{map:Xt});return function(sn){dt(sn,function(bn){for(var Zn=pt(bn),Rn=0,vn=Zn.length;Rn<vn;Rn++){var yn=Zn[Rn];if(xt(bn[yn])){var Ln=bn[yn].reference;Ln&&sn[Ln]&&(bn[yn]=sn[Ln])}}var qn=wt(bn);qn&&qn.reference&&sn[qn.reference]&&Object.setPrototypeOf(bn,sn[qn.reference])})}(Xt),on},i.exports=s},6677:function(i,s){var o=/<[^>]*>/g;s=function(d){return d.replace(o,"")},i.exports=s},1907:function(i,s,o){var d=o(6768),j=o(1352),$=o(6435),ot=o(2461),ht=o(4331);s=function(dt){d(dt)&&(dt=j(dt));for(var gt="",wt=arguments.length,bt=new Array(wt>1?wt-1:0),St=1;St<wt;St++)bt[St-1]=arguments[St];for(var Ct=0,Et=dt.length;Ct<Et;Ct++)gt+=dt[Ct],bt[Ct]&&(gt+=bt[Ct]);for(var Pt=gt.split(`
`),_t=[],yt=0,xt=Pt.length;yt<xt;yt++){var Dt=Pt[yt].match(pt);Dt&&_t.push(Dt[1].length)}var Ot=_t.length>0?$.apply(null,_t):0;return ht(ot(Pt,function(Bt){return Bt[0]===" "?Bt.slice(Ot):Bt}).join(`
`))};var pt=/^(\s+)\S+/;i.exports=s},2439:function(i,s,o){var d=o(6049);s=function(j,$){return d(j,$,!0)},i.exports=s},1352:function(i,s,o){var d=o(1369),j=o(2461),$=o(6472),ot=o(6768);s=function(ht){return ht?$(ht)?ht:d(ht)&&!ot(ht)?j(ht):[ht]:[]},i.exports=s},3474:function(i,s,o){var d=o(6768);s=function(j){return d(j)?(j=j.toLowerCase())!=="0"&&j!==""&&j!=="false":!!j},i.exports=s},4891:function(i,s){var o=document;if(s=function(j){var $=o.createElement("body");return $.innerHTML=j,$.childNodes[0]},o.createRange&&o.body){var d=o.createRange();d.selectNode(o.body),d.createContextualFragment&&(s=function(j){return d.createContextualFragment(j).childNodes[0]})}i.exports=s},9296:function(i,s,o){var d=o(3875);s=function(j){return j?(j=d(j))-j%1:j===0?j:0},i.exports=s},3875:function(i,s,o){var d=o(3990),j=o(5166),$=o(4777),ot=o(6768);s=function(ht){if(d(ht))return ht;if(j(ht)){var pt=$(ht.valueOf)?ht.valueOf():ht;ht=j(pt)?pt+"":pt}return ot(ht)?+ht:ht===0?ht:+ht},i.exports=s},300:function(i,s,o){var d=o(2763);s=function($){if(d($))return"";try{return j.call($)}catch{}try{return $+""}catch{}return""};var j=Function.prototype.toString;i.exports=s},3367:function(i,s){s=function(o){return o==null?"":o.toString()},i.exports=s},4331:function(i,s,o){var d=o(7767),j=o(3597);s=function($,ot){return ot==null&&$.trim?$.trim():d(j($,ot),ot)},i.exports=s},7756:function(i,s,o){var d=o(4193),j=o(1286);s=function(ot,ht){var pt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d(pt,$);var dt=pt.ellipsis,gt=pt.separator;if(ht>ot.length)return ot;var wt=ht-dt.length;if(wt<1)return dt;var bt=ot.slice(0,wt);if(j(gt))return bt+dt;if(ot.indexOf(gt,wt)!==wt){var St=bt.lastIndexOf(gt);St>-1&&(bt=bt.slice(0,St))}return bt+dt};var $={ellipsis:"..."};i.exports=s},3085:function(i,s,o){var d=o(106),j=o(9433),$=o(3063),ot=o(2349);s=function(pt){var dt,gt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return pt===null&&(dt="Null"),pt===void 0&&(dt="Undefined"),j(pt)&&(dt="NaN"),ot(pt)&&(dt="Buffer"),dt||(dt=d(pt).match(ht))&&(dt=dt[1]),dt?gt?$(dt):dt:""};var ht=/^\[object\s+(.*?)]$/;i.exports=s},8166:function(i,s,o){var d=o(996),j=o(2461);s={encode:function($){return $.length<32768?String.fromCodePoint.apply(String,$):j(d($,32767),function(ot){return String.fromCodePoint.apply(String,ot)}).join("")},decode:function($){for(var ot=[],ht=0,pt=$.length;ht<pt;){var dt=$.charCodeAt(ht++);if(dt>=55296&&dt<=56319&&ht<pt){var gt=$.charCodeAt(ht++);(64512&gt)==56320?ot.push(((1023&dt)<<10)+(1023&gt)+65536):(ot.push(dt),ht--)}else ot.push(dt)}return ot}},i.exports=s},5484:function(i,s,o){var d=o(2727),j=o(8985),$=!1;function ot(ht){$&&s.emit(ht)}s={start:function(){$=!0},stop:function(){$=!1}},j.mixin(s),d?(window.addEventListener("error",function(ht){if(ht.error)ot(ht.error);else if(ht.message){var pt=new Error(ht.message);pt.stack="Error: ".concat(ht.message,` 
 at `).concat(ht.filename,":").concat(ht.lineno,":").concat(ht.colno),ot(pt)}}),window.addEventListener("unhandledrejection",function(ht){ot(ht.reason)})):(process.on("uncaughtException",ot),process.on("unhandledRejection",ot)),i.exports=s},7387:function(i,s,o){var d=o(8901),j=o(2533);s=function(gt){return ht.test(gt)?gt.replace(pt,dt):gt};var $=o(7190)(d.map),ot="(?:"+j($).join("|")+")",ht=new RegExp(ot),pt=new RegExp(ot,"g");function dt(gt){return $[gt]}i.exports=s},5229:function(i,s){var o=0;s=function(d){var j=++o+"";return d?d+j:j},i.exports=s},42:function(i,s,o){var d=o(5972);function j($,ot){return $===ot}s=function($,ot){return ot=ot||j,d($,function(ht,pt,dt){for(var gt=dt.length;++pt<gt;)if(ot(ht,dt[pt]))return!1;return!0})},i.exports=s},4502:function(i,s,o){var d=o(3367);s=function(j){return d(j).toLocaleUpperCase()},i.exports=s},3023:function(i,s){s=function(o){return o.length<1?o:o[0].toUpperCase()+o.slice(1)},i.exports=s},5742:function(i,s,o){var d=o(8166);s={encode:function(Pt){for(var _t=d.decode(Pt),yt="",xt=0,Dt=_t.length;xt<Dt;xt++)yt+=St(_t[xt]);return yt},decode:function(Pt,_t){j=d.decode(Pt),$=0,ot=j.length,ht=0,pt=0,dt=0,gt=128,wt=191;for(var yt,xt=[];(yt=Ct(_t))!==!1;)xt.push(yt);return d.encode(xt)}};var j,$,ot,ht,pt,dt,gt,wt,bt=String.fromCharCode;function St(Pt){if(!(4294967168&Pt))return bt(Pt);var _t,yt,xt="";for(4294965248&Pt?4294901760&Pt?!(4292870144&Pt)&&(_t=3,yt=240):(_t=2,yt=224):(_t=1,yt=192),xt+=bt((Pt>>6*_t)+yt);_t>0;)xt+=bt(128|63&Pt>>6*(_t-1)),_t--;return xt}function Ct(Pt){for(;;){if($>=ot&&dt){if(Pt)return Et();throw new Error("Invalid byte index")}if($===ot)return!1;var _t=j[$];if($++,dt){if(_t<gt||_t>wt){if(Pt)return $--,Et();throw new Error("Invalid continuation byte")}if(gt=128,wt=191,ht=ht<<6|63&_t,++pt===dt){var yt=ht;return ht=0,dt=0,pt=0,yt}}else{if(!(128&_t))return _t;if((224&_t)==192)dt=1,ht=31&_t;else if((240&_t)==224)_t===224&&(gt=160),_t===237&&(wt=159),dt=2,ht=15&_t;else{if((248&_t)!=240){if(Pt)return Et();throw new Error("Invalid UTF-8 detected")}_t===240&&(gt=144),_t===244&&(wt=143),dt=3,ht=7&_t}}}}function Et(){var Pt=$-pt-1;return $=Pt+1,ht=0,dt=0,pt=0,gt=128,wt=191,j[Pt]}i.exports=s},5936:function(i,s,o){var d=o(3366);s=function(){var ot=d(16);return ot[6]=15&ot[6]|64,ot[8]=63&ot[8]|128,j[ot[0]]+j[ot[1]]+j[ot[2]]+j[ot[3]]+"-"+j[ot[4]]+j[ot[5]]+"-"+j[ot[6]]+j[ot[7]]+"-"+j[ot[8]]+j[ot[9]]+"-"+j[ot[10]]+j[ot[11]]+j[ot[12]]+j[ot[13]]+j[ot[14]]+j[ot[15]]};for(var j=[],$=0;$<256;$++)j[$]=($+256).toString(16).substr(1);i.exports=s},2578:function(i,s,o){var d=o(3783);s=function(j){var $=[];return d(j,function(ot){$.push(ot)}),$},i.exports=s},3514:function(i,s,o){var d=o(8573),j=o(9882),$=o(4331),ot=o(3783),ht=o(2461),pt=o(9433);s=function(){var dt=d("viewport");if(!dt)return 1;dt=ht(dt.split(","),function(Ct){return $(Ct)});var gt=.25,wt=5,bt=1;ot(dt,function(Ct){var Et=(Ct=Ct.split("="))[0];Ct=Ct[1],Et==="initial-scale"&&(bt=+Ct),Et==="maximum-scale"&&(wt=+Ct),Et==="minimum-scale"&&(gt=+Ct)});var St=j(bt,gt,wt);return pt(St)?1:St},i.exports=s},8933:function(i,s){s=function(o){for(var d=[],j=document.evaluate(o,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),$=0;$<j.snapshotLength;$++)d.push(j.snapshotItem($));return d},i.exports=s},3577:function(i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=[["menuitem","command"],["rel","roletype"],["article","article"],["header","banner"],["input","button",[["type","checkbox"]]],["summary","button",[["aria-expanded","false"]]],["summary","button",[["aria-expanded","true"]]],["input","button",[["type","button"]]],["input","button",[["type","image"]]],["input","button",[["type","reset"]]],["input","button",[["type","submit"]]],["button","button"],["td","cell"],["input","checkbox",[["type","checkbox"]]],["th","columnheader"],["input","combobox",[["type","email"]]],["input","combobox",[["type","search"]]],["input","combobox",[["type","tel"]]],["input","combobox",[["type","text"]]],["input","combobox",[["type","url"]]],["input","combobox",[["type","url"]]],["select","combobox"],["select","combobox",[["size",1]]],["aside","complementary"],["footer","contentinfo"],["dd","definition"],["dialog","dialog"],["body","document"],["figure","figure"],["form","form"],["form","form"],["form","form"],["span","generic"],["div","generic"],["table","grid",[["role","grid"]]],["td","gridcell",[["role","gridcell"]]],["details","group"],["fieldset","group"],["optgroup","group"],["h1","heading"],["h2","heading"],["h3","heading"],["h4","heading"],["h5","heading"],["h6","heading"],["img","img"],["img","img"],["a","link"],["area","link"],["link","link"],["menu","list"],["ol","list"],["ul","list"],["select","listbox"],["select","listbox"],["select","listbox"],["datalist","listbox"],["li","listitem"],["main","main"],["math","math"],["menuitem","command"],["nav","navigation"],["option","option"],["progress","progressbar"],["input","radio",[["type","radio"]]],["section","region"],["section","region"],["frame","region"],["tr","row"],["tbody","rowgroup"],["tfoot","rowgroup"],["thead","rowgroup"],["th","rowheader",[["scope","row"]]],["input","searchbox",[["type","search"]]],["hr","separator"],["input","slider",[["type","range"]]],["input","spinbutton",[["type","number"]]],["output","status"],["table","table"],["dfn","term"],["input","textbox"],["input","textbox",[["type","email"]]],["input","textbox",[["type","tel"]]],["input","textbox",[["type","text"]]],["input","textbox",[["type","url"]]],["textarea","textbox"]]},7715:function(i,s,o){var d,j=this&&this.__extends||(d=function(Ut,Ht){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(jt,Wt){jt.__proto__=Wt}||function(jt,Wt){for(var ln in Wt)Object.prototype.hasOwnProperty.call(Wt,ln)&&(jt[ln]=Wt[ln])},d(Ut,Ht)},function(Ut,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Class extends value "+String(Ht)+" is not a constructor or null");function jt(){this.constructor=Ut}d(Ut,Ht),Ut.prototype=Ht===null?Object.create(Ht):(jt.prototype=Ht.prototype,new jt)}),$=this&&this.__assign||function(){return $=Object.assign||function(Ut){for(var Ht,jt=1,Wt=arguments.length;jt<Wt;jt++)for(var ln in Ht=arguments[jt])Object.prototype.hasOwnProperty.call(Ht,ln)&&(Ut[ln]=Ht[ln]);return Ut},$.apply(this,arguments)},ot=this&&this.__values||function(Ut){var Ht=typeof Symbol=="function"&&Symbol.iterator,jt=Ht&&Ut[Ht],Wt=0;if(jt)return jt.call(Ut);if(Ut&&typeof Ut.length=="number")return{next:function(){return Ut&&Wt>=Ut.length&&(Ut=void 0),{value:Ut&&Ut[Wt++],done:!Ut}}};throw new TypeError(Ht?"Object is not iterable.":"Symbol.iterator is not defined.")},ht=this&&this.__importDefault||function(Ut){return Ut&&Ut.__esModule?Ut:{default:Ut}};Object.defineProperty(s,"__esModule",{value:!0});var pt=ht(o(1160)),dt=o(7669),gt=o(2062),wt=ht(o(242)),bt=ht(o(2439)),St=ht(o(3063)),Ct=ht(o(3783)),Et=ht(o(3009)),Pt=ht(o(5044)),_t=ht(o(4502)),yt=ht(o(6329)),xt=ht(o(7494)),Dt=ht(o(6341)),Ot=ht(o(3875)),Bt=ht(o(3577)),At=ht(o(6768));o(8169);var It=function(Ut){function Ht(jt,Wt){Wt===void 0&&(Wt={});var ln=Ut.call(this,jt,{compName:"dom-highlighter"},Wt)||this;return ln.overlay=new dt.HighlightOverlay(window),ln.reset=function(){var Qt=document.documentElement.clientWidth,Xt=document.documentElement.clientHeight;ln.overlay.reset({viewportSize:{width:Qt,height:Xt},deviceScaleFactor:1,pageScaleFactor:1,pageZoomFactor:1,emulationScaleFactor:1,scrollX:window.scrollX,scrollY:window.scrollY})},ln.initOptions(Wt,{showRulers:!1,showExtensionLines:!1,showInfo:!0,showStyles:!0,showAccessibilityInfo:!0,colorFormat:"hex",contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)",monitorResize:!0}),ln.overlay.setContainer(jt),ln.overlay.setPlatform("mac"),ln.redraw=(0,bt.default)(function(){ln.reset(),ln.draw()},16),ln.redraw(),ln.bindEvent(),ln}return j(Ht,Ut),Ht.prototype.highlight=function(jt,Wt){Wt&&(0,yt.default)(this.options,Wt),this.target=jt,jt instanceof HTMLElement&&this.options.monitorResize&&(this.resizeSensor&&this.resizeSensor.destroy(),this.resizeSensor=new wt.default(jt),this.resizeSensor.addListener(this.redraw)),this.redraw()},Ht.prototype.hide=function(){this.target=null,this.redraw()},Ht.prototype.intercept=function(jt){this.interceptor=jt},Ht.prototype.destroy=function(){window.removeEventListener("resize",this.redraw),window.removeEventListener("scroll",this.redraw),this.resizeSensor&&this.resizeSensor.destroy(),Ut.prototype.destroy.call(this)},Ht.prototype.draw=function(){var jt=this.target;jt&&(jt instanceof Text?this.drawText(jt):this.drawElement(jt))},Ht.prototype.drawText=function(jt){var Wt=this.options,ln=document.createRange();ln.selectNode(jt);var Qt=ln.getBoundingClientRect(),Xt=Qt.left,on=Qt.top,sn=Qt.width,bn=Qt.height;ln.detach();var Zn={paths:[{path:this.rectToPath({left:Xt,top:on,width:sn,height:bn}),fillColor:nn(Wt.contentColor),name:"content"}],showExtensionLines:Wt.showExtensionLines,showRulers:Wt.showRulers};Wt.showInfo&&(Zn.elementInfo={tagName:"#text",nodeWidth:sn,nodeHeight:bn}),this.overlay.drawHighlight(Zn)},Ht.prototype.drawElement=function(jt){var Wt={paths:this.getPaths(jt),showExtensionLines:this.options.showExtensionLines,showRulers:this.options.showRulers,colorFormat:this.options.colorFormat};if(this.options.showInfo&&(Wt.elementInfo=this.getElementInfo(jt)),this.interceptor){var ln=this.interceptor(Wt);ln&&(Wt=ln)}this.overlay.drawHighlight(Wt)},Ht.prototype.getPaths=function(jt){var Wt=this.options,ln=window.getComputedStyle(jt),Qt=jt.getBoundingClientRect(),Xt=Qt.left,on=Qt.top,sn=Qt.width,bn=Qt.height,Zn=function(kn){return(0,gt.pxToNum)(ln.getPropertyValue(kn))},Rn=Zn("margin-left"),vn=Zn("margin-right"),yn=Zn("margin-top"),Ln=Zn("margin-bottom"),qn=Zn("border-left-width"),_r=Zn("border-right-width"),Jn=Zn("border-top-width"),dr=Zn("border-bottom-width"),Un=Zn("padding-left"),mn=Zn("padding-right"),xn=Zn("padding-top"),cn=Zn("padding-bottom");return[{path:this.rectToPath({left:Xt+qn+Un,top:on+Jn+xn,width:sn-qn-Un-_r-mn,height:bn-Jn-xn-dr-cn}),fillColor:nn(Wt.contentColor),name:"content"},{path:this.rectToPath({left:Xt+qn,top:on+Jn,width:sn-qn-_r,height:bn-Jn-dr}),fillColor:nn(Wt.paddingColor),name:"padding"},{path:this.rectToPath({left:Xt,top:on,width:sn,height:bn}),fillColor:nn(Wt.borderColor),name:"border"},{path:this.rectToPath({left:Xt-Rn,top:on-yn,width:sn+Rn+vn,height:bn+yn+Ln}),fillColor:nn(Wt.marginColor),name:"margin"}]},Ht.prototype.getElementInfo=function(jt){var Wt=jt.getBoundingClientRect(),ln=Wt.width,Qt=Wt.height,Xt=jt.getAttribute("class")||"";Xt=Xt.split(/\s+/).map(function(sn){return"."+sn}).join("");var on={tagName:(0,St.default)(jt.tagName),className:Xt,idValue:jt.id,nodeWidth:ln,nodeHeight:Qt};return this.options.showStyles&&(on.style=this.getStyles(jt)),this.options.showAccessibilityInfo&&(0,yt.default)(on,this.getAccessibilityInfo(jt)),on},Ht.prototype.getStyles=function(jt){for(var Wt=window.getComputedStyle(jt),ln=!1,Qt=jt.childNodes,Xt=0,on=Qt.length;Xt<on;Xt++)Qt[Xt].nodeType===3&&(ln=!0);var sn=[];return ln&&sn.push("color","font-family","font-size","line-height"),sn.push("padding","margin","background-color"),Vt(Wt,sn)},Ht.prototype.getAccessibilityInfo=function(jt){var Wt=window.getComputedStyle(jt);return $({showAccessibilityInfo:!0,contrast:$({contrastAlgorithm:"aa",textOpacity:.1},Vt(Wt,["font-size","font-weight","background-color","text-opacity"],!0)),isKeyboardFocusable:this.isFocusable(jt)},this.getAccessibleNameAndRole(jt))},Ht.prototype.isFocusable=function(jt){var Wt=(0,St.default)(jt.tagName);if((0,Dt.default)(["a","button","input","textarea","select","details"],Wt))return!0;var ln=jt.getAttribute("tabindex");return!!(ln&&(0,Ot.default)(ln)>-1)},Ht.prototype.getAccessibleNameAndRole=function(jt){var Wt=jt.getAttribute("labelledby")||jt.getAttribute("aria-label"),ln=jt.getAttribute("role"),Qt=(0,St.default)(jt.tagName);return Bt.default.forEach(function(Xt){var on,sn;if(!ln){var bn=Xt[0],Zn=Xt[2];if(bn===Qt){if(Zn)try{for(var Rn=ot(Zn),vn=Rn.next();!vn.done;vn=Rn.next()){var yn=vn.value;if(jt.getAttribute(yn[0])!==yn[1])return}}catch(Ln){on={error:Ln}}finally{try{vn&&!vn.done&&(sn=Rn.return)&&sn.call(Rn)}finally{if(on)throw on.error}}ln=Xt[1]}}}),{accessibleName:Wt||jt.getAttribute("title")||"",accessibleRole:ln||"generic"}},Ht.prototype.bindEvent=function(){var jt=this;window.addEventListener("resize",this.redraw),window.addEventListener("scroll",this.redraw),this.on("optionChange",function(){return jt.redraw()})},Ht.prototype.rectToPath=function(jt){var Wt=jt.left,ln=jt.top,Qt=jt.width,Xt=jt.height,on=[];return on.push("M",Wt,ln),on.push("L",Wt+Qt,ln),on.push("L",Wt+Qt,ln+Xt),on.push("L",Wt,ln+Xt),on.push("Z"),on},Ht}(pt.default);s.default=It,i.exports=It,i.exports.default=It;var Gt=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,Jt=/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*(?:\.\d+)?)\)$/;function nn(Ut){return(0,At.default)(Ut)?Ut:Ut.a?"rgba(".concat(Ut.r,", ").concat(Ut.g,", ").concat(Ut.b,", ").concat(Ut.a,")"):"rgb(".concat(Ut.r,", ").concat(Ut.g,", ").concat(Ut.b,")")}function Vt(Ut,Ht,jt){jt===void 0&&(jt=!1);var Wt={};return(0,Ct.default)(Ht,function(ln){var Qt,Xt=Ut[ln==="text-opacity"?"color":ln];Xt&&(Qt=Xt,(Gt.test(Qt)||Jt.test(Qt))&&(Xt=function(on){var sn=Et.default.parse(on),bn=sn.val[3]||1;return sn.val=sn.val.slice(0,3),sn.val.push(Math.round(255*bn)),"#"+(0,_t.default)(Pt.default.encode(sn.val))}(Xt),ln==="text-opacity"&&(Xt=Xt.slice(7),Xt=Pt.default.decode(Xt)[0]/255)),jt&&(ln=(0,xt.default)(ln)),Wt[ln]=Xt)}),Wt}},9706:function(i,s){var o=this&&this.__read||function(nn,Vt){var Ut=typeof Symbol=="function"&&nn[Symbol.iterator];if(!Ut)return nn;var Ht,jt,Wt=Ut.call(nn),ln=[];try{for(;(Vt===void 0||Vt-- >0)&&!(Ht=Wt.next()).done;)ln.push(Ht.value)}catch(Qt){jt={error:Qt}}finally{try{Ht&&!Ht.done&&(Ut=Wt.return)&&Ut.call(Wt)}finally{if(jt)throw jt.error}}return ln},d=this&&this.__values||function(nn){var Vt=typeof Symbol=="function"&&Symbol.iterator,Ut=Vt&&nn[Vt],Ht=0;if(Ut)return Ut.call(nn);if(nn&&typeof nn.length=="number")return{next:function(){return nn&&Ht>=nn.length&&(nn=void 0),{value:nn&&nn[Ht++],done:!nn}}};throw new TypeError(Vt?"Object is not iterable.":"Symbol.iterator is not defined.")};function j(nn,Vt){var Ut=nn[3];return[(1-Ut)*Vt[0]+Ut*nn[0],(1-Ut)*Vt[1]+Ut*nn[1],(1-Ut)*Vt[2]+Ut*nn[2],Ut+Vt[3]*(1-Ut)]}function $(nn){var Vt=o(nn,3),Ut=Vt[0],Ht=Vt[1],jt=Vt[2];return .2126*(Ut<=.03928?Ut/12.92:Math.pow((Ut+.055)/1.055,2.4))+.7152*(Ht<=.03928?Ht/12.92:Math.pow((Ht+.055)/1.055,2.4))+.0722*(jt<=.03928?jt/12.92:Math.pow((jt+.055)/1.055,2.4))}Object.defineProperty(s,"__esModule",{value:!0}),s.getContrastThreshold=s.isLargeFont=s.getAPCAThreshold=s.desiredLuminanceAPCA=s.contrastRatioByLuminanceAPCA=s.contrastRatioAPCA=s.luminanceAPCA=s.contrastRatio=s.luminance=s.rgbaToHsla=s.blendColors=void 0,s.blendColors=j,s.rgbaToHsla=function(nn){var Vt=o(nn,4),Ut=Vt[0],Ht=Vt[1],jt=Vt[2],Wt=Vt[3],ln=Math.max(Ut,Ht,jt),Qt=Math.min(Ut,Ht,jt),Xt=ln-Qt,on=ln+Qt,sn=.5*on;return[Qt===ln?0:Ut===ln?(.16666666666666666*(Ht-jt)/Xt+1)%1:Ht===ln?.16666666666666666*(jt-Ut)/Xt+.3333333333333333:.16666666666666666*(Ut-Ht)/Xt+.6666666666666666,sn===0||sn===1?0:sn<=.5?Xt/on:Xt/(2-on),sn,Wt]},s.luminance=$,s.contrastRatio=function(nn,Vt){var Ut=$(j(nn,Vt)),Ht=$(Vt);return(Math.max(Ut,Ht)+.05)/(Math.min(Ut,Ht)+.05)};var ot=2.4,ht=.55,pt=.58,dt=.62,gt=.57,wt=.03,bt=1.45,St=1.25,Ct=1.25,Et=5e-4,Pt=.078,_t=12.82051282051282,yt=.06,xt=.001;function Dt(nn){var Vt=o(nn,3),Ut=Vt[0],Ht=Vt[1],jt=Vt[2];return .2126729*Math.pow(Ut,ot)+.7151522*Math.pow(Ht,ot)+.072175*Math.pow(jt,ot)}function Ot(nn){return nn>wt?nn:nn+Math.pow(wt-nn,bt)}function Bt(nn,Vt){if(nn=Ot(nn),Vt=Ot(Vt),Math.abs(nn-Vt)<Et)return 0;var Ut=0;return 100*(Ut=Vt>=nn?(Ut=(Math.pow(Vt,ht)-Math.pow(nn,pt))*St)<xt?0:Ut<Pt?Ut-Ut*_t*yt:Ut-yt:(Ut=(Math.pow(Vt,dt)-Math.pow(nn,gt))*Ct)>-xt?0:Ut>-Pt?Ut-Ut*_t*yt:Ut+yt)}s.luminanceAPCA=Dt,s.contrastRatioAPCA=function(nn,Vt){return Bt(Dt(nn),Dt(Vt))},s.contrastRatioByLuminanceAPCA=Bt,s.desiredLuminanceAPCA=function(nn,Vt,Ut){function Ht(){return Ut?Math.pow(Math.abs(Math.pow(nn,dt)-(-Vt-yt)/Ct),1/gt):Math.pow(Math.abs(Math.pow(nn,ht)-(Vt+yt)/St),1/pt)}nn=Ot(nn),Vt/=100;var jt=Ht();return(jt<0||jt>1)&&(Ut=!Ut,jt=Ht()),jt};var At=[[12,-1,-1,-1,-1,100,90,80,-1,-1],[14,-1,-1,-1,100,90,80,60,60,-1],[16,-1,-1,100,90,80,60,55,50,50],[18,-1,-1,90,80,60,55,50,40,40],[24,-1,100,80,60,55,50,40,38,35],[30,-1,90,70,55,50,40,38,35,40],[36,-1,80,60,50,40,38,35,30,25],[48,100,70,55,40,38,35,30,25,20],[60,90,60,50,38,35,30,25,20,20],[72,80,55,40,35,30,25,20,20,20],[96,70,50,35,30,25,20,20,20,20],[120,60,40,30,25,20,20,20,20,20]];function It(nn,Vt){var Ut=72*parseFloat(nn.replace("px",""))/96;return["bold","bolder","600","700","800","900"].indexOf(Vt)!==-1?Ut>=14:Ut>=18}At.reverse(),s.getAPCAThreshold=function(nn,Vt){var Ut,Ht,jt,Wt,ln=parseFloat(nn.replace("px","")),Qt=parseFloat(Vt);try{for(var Xt=d(At),on=Xt.next();!on.done;on=Xt.next()){var sn=o(on.value),bn=sn[0],Zn=sn.slice(1);if(ln>=bn)try{for(var Rn=(jt=void 0,d([900,800,700,600,500,400,300,200,100].entries())),vn=Rn.next();!vn.done;vn=Rn.next()){var yn=o(vn.value,2),Ln=yn[0];if(Qt>=yn[1]){var qn=Zn[Zn.length-1-Ln];return qn===-1?null:qn}}}catch(_r){jt={error:_r}}finally{try{vn&&!vn.done&&(Wt=Rn.return)&&Wt.call(Rn)}finally{if(jt)throw jt.error}}}}catch(_r){Ut={error:_r}}finally{try{on&&!on.done&&(Ht=Xt.return)&&Ht.call(Xt)}finally{if(Ut)throw Ut.error}}return null},s.isLargeFont=It;var Gt={aa:3,aaa:4.5},Jt={aa:4.5,aaa:7};s.getContrastThreshold=function(nn,Vt){return It(nn,Vt)?Gt:Jt}},9434:function(i,s){var o=this&&this.__values||function(dt){var gt=typeof Symbol=="function"&&Symbol.iterator,wt=gt&&dt[gt],bt=0;if(wt)return wt.call(dt);if(dt&&typeof dt.length=="number")return{next:function(){return dt&&bt>=dt.length&&(dt=void 0),{value:dt&&dt[bt++],done:!dt}}};throw new TypeError(gt?"Object is not iterable.":"Symbol.iterator is not defined.")},d=this&&this.__read||function(dt,gt){var wt=typeof Symbol=="function"&&dt[Symbol.iterator];if(!wt)return dt;var bt,St,Ct=wt.call(dt),Et=[];try{for(;(gt===void 0||gt-- >0)&&!(bt=Ct.next()).done;)Et.push(bt.value)}catch(Pt){St={error:Pt}}finally{try{bt&&!bt.done&&(wt=Ct.return)&&wt.call(Ct)}finally{if(St)throw St.error}}return Et},j=this&&this.__spreadArray||function(dt,gt,wt){if(wt||arguments.length===2)for(var bt,St=0,Ct=gt.length;St<Ct;St++)!bt&&St in gt||(bt||(bt=Array.prototype.slice.call(gt,0,St)),bt[St]=gt[St]);return dt.concat(bt||Array.prototype.slice.call(gt))};Object.defineProperty(s,"__esModule",{value:!0}),s.adoptStyleSheet=s.constrainNumber=s.ellipsify=s.createElement=s.createTextChild=s.createChild=s.log=s.Overlay=void 0;var $=function(){function dt(gt,wt){wt===void 0&&(wt=[]),this.viewportSize={width:800,height:600},this.deviceScaleFactor=1,this.emulationScaleFactor=1,this.pageScaleFactor=1,this.pageZoomFactor=1,this.scrollX=0,this.scrollY=0,this.canvasWidth=0,this.canvasHeight=0,this._installed=!1,this._window=gt,this._document=gt.document,Array.isArray(wt)||(wt=[wt]),this.style=wt}return dt.prototype.setCanvas=function(gt){this.canvas=gt,this._context=gt.getContext("2d")},dt.prototype.install=function(){var gt,wt;try{for(var bt=o(this.style),St=bt.next();!St.done;St=bt.next())pt(St.value)}catch(Ct){gt={error:Ct}}finally{try{St&&!St.done&&(wt=bt.return)&&wt.call(bt)}finally{if(gt)throw gt.error}}this._installed=!0},dt.prototype.uninstall=function(){var gt,wt,bt=function(Et){document.adoptedStyleSheets=document.adoptedStyleSheets.filter(function(Pt){return Pt!==Et})};try{for(var St=o(this.style),Ct=St.next();!Ct.done;Ct=St.next())bt(Ct.value)}catch(Et){gt={error:Et}}finally{try{Ct&&!Ct.done&&(wt=St.return)&&wt.call(St)}finally{if(gt)throw gt.error}}this._installed=!1},dt.prototype.reset=function(gt){gt&&(this.viewportSize=gt.viewportSize,this.visualViewportSize=gt.visualViewportSize,this.deviceScaleFactor=gt.deviceScaleFactor,this.pageScaleFactor=gt.pageScaleFactor,this.pageZoomFactor=gt.pageZoomFactor,this.emulationScaleFactor=gt.emulationScaleFactor,this.scrollX=Math.round(gt.scrollX),this.scrollY=Math.round(gt.scrollY)),this.resetCanvas()},dt.prototype.resetCanvas=function(){this.canvas&&this._context&&(this.canvas.width=this.deviceScaleFactor*this.viewportSize.width,this.canvas.height=this.deviceScaleFactor*this.viewportSize.height,this.canvas.style.width=this.viewportSize.width+"px",this.canvas.style.height=this.viewportSize.height+"px",this._context.scale(this.deviceScaleFactor,this.deviceScaleFactor),this.canvasWidth=this.viewportSize.width,this.canvasHeight=this.viewportSize.height)},dt.prototype.setPlatform=function(gt){this.platform=gt,this._installed||this.install()},dt.prototype.dispatch=function(gt){this[gt.shift()].apply(this,gt)},dt.prototype.eventHasCtrlOrMeta=function(gt){return this.platform==="mac"?gt.metaKey&&!gt.ctrlKey:gt.ctrlKey&&!gt.metaKey},Object.defineProperty(dt.prototype,"context",{get:function(){if(!this._context)throw new Error("Context object is missing");return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(dt.prototype,"document",{get:function(){if(!this._document)throw new Error("Document object is missing");return this._document},enumerable:!1,configurable:!0}),Object.defineProperty(dt.prototype,"window",{get:function(){if(!this._window)throw new Error("Window object is missing");return this._window},enumerable:!1,configurable:!0}),Object.defineProperty(dt.prototype,"installed",{get:function(){return this._installed},enumerable:!1,configurable:!0}),dt}();function ot(dt,gt,wt){var bt=ht(gt,wt);return bt.addEventListener("click",function(St){St.stopPropagation()},!1),dt.appendChild(bt),bt}function ht(dt,gt){var wt=document.createElement(dt);if(gt){var bt=gt.split(/\s+/);bt=bt.map(function(St){return"luna-dom-highlighter-"+St}),wt.className=bt.join(" ")}return wt}function pt(dt){document.adoptedStyleSheets=j(j([],d(document.adoptedStyleSheets),!1),[dt],!1)}s.Overlay=$,s.log=function(dt){var gt=document.getElementById("log");gt||((gt=ot(document.body,"div")).id="log"),ot(gt,"div").textContent=dt},s.createChild=ot,s.createTextChild=function(dt,gt){var wt=document.createTextNode(gt);return dt.appendChild(wt),wt},s.createElement=ht,s.ellipsify=function(dt,gt){return dt.length<=gt?String(dt):dt.substr(0,gt-1)+"…"},s.constrainNumber=function(dt,gt,wt){return dt<gt?dt=gt:dt>wt&&(dt=wt),dt},s.adoptStyleSheet=pt},1521:function(i,s,o){var d=this&&this.__values||function(_t){var yt=typeof Symbol=="function"&&Symbol.iterator,xt=yt&&_t[yt],Dt=0;if(xt)return xt.call(_t);if(_t&&typeof _t.length=="number")return{next:function(){return _t&&Dt>=_t.length&&(_t=void 0),{value:_t&&_t[Dt++],done:!_t}}};throw new TypeError(yt?"Object is not iterable.":"Symbol.iterator is not defined.")},j=this&&this.__read||function(_t,yt){var xt=typeof Symbol=="function"&&_t[Symbol.iterator];if(!xt)return _t;var Dt,Ot,Bt=xt.call(_t),At=[];try{for(;(yt===void 0||yt-- >0)&&!(Dt=Bt.next()).done;)At.push(Dt.value)}catch(It){Ot={error:It}}finally{try{Dt&&!Dt.done&&(xt=Bt.return)&&xt.call(Bt)}finally{if(Ot)throw Ot.error}}return At},$=this&&this.__spreadArray||function(_t,yt,xt){if(xt||arguments.length===2)for(var Dt,Ot=0,Bt=yt.length;Ot<Bt;Ot++)!Dt&&Ot in yt||(Dt||(Dt=Array.prototype.slice.call(yt,0,Ot)),Dt[Ot]=yt[Ot]);return _t.concat(Dt||Array.prototype.slice.call(yt))},ot=this&&this.__importDefault||function(_t){return _t&&_t.__esModule?_t:{default:_t}};Object.defineProperty(s,"__esModule",{value:!0}),s.drawPath=s.formatColor=s.formatRgba=s.parseHexa=s.createPathForQuad=s.hatchFillPath=s.applyMatrixToPoint=s.emptyBounds=s.buildPath=s.fillPathWithBoxStyle=s.drawPathWithLineStyle=void 0;var ht=ot(o(4858)),pt=o(9706);function dt(_t,yt,xt){var Dt=0;function Ot(It){for(var Gt=[],Jt=0;Jt<It;++Jt){var nn=Math.round(_t[Dt++]*xt);yt.maxX=Math.max(yt.maxX,nn),yt.minX=Math.min(yt.minX,nn);var Vt=Math.round(_t[Dt++]*xt);yt.maxY=Math.max(yt.maxY,Vt),yt.minY=Math.min(yt.minY,Vt),yt.leftmostXForY[Vt]=Math.min(yt.leftmostXForY[Vt]||Number.MAX_VALUE,nn),yt.rightmostXForY[Vt]=Math.max(yt.rightmostXForY[Vt]||Number.MIN_VALUE,nn),yt.topmostYForX[nn]=Math.min(yt.topmostYForX[nn]||Number.MAX_VALUE,Vt),yt.bottommostYForX[nn]=Math.max(yt.bottommostYForX[nn]||Number.MIN_VALUE,Vt),yt.allPoints.push({x:nn,y:Vt}),Gt.push(nn,Vt)}return Gt}for(var Bt=_t.length,At=new Path2D;Dt<Bt;)switch(_t[Dt++]){case"M":At.moveTo.apply(At,Ot(1));break;case"L":At.lineTo.apply(At,Ot(1));break;case"C":At.bezierCurveTo.apply(At,Ot(3));break;case"Q":At.quadraticCurveTo.apply(At,Ot(2));break;case"Z":At.closePath()}return At}s.drawPathWithLineStyle=function(_t,yt,xt,Dt){Dt===void 0&&(Dt=1),xt&&xt.color&&(_t.save(),_t.translate(.5,.5),_t.lineWidth=Dt,xt.pattern==="dashed"&&_t.setLineDash([3,3]),xt.pattern==="dotted"&&_t.setLineDash([2,2]),_t.strokeStyle=xt.color,_t.stroke(yt),_t.restore())},s.fillPathWithBoxStyle=function(_t,yt,xt,Dt,Ot){Ot&&(_t.save(),Ot.fillColor&&(_t.fillStyle=Ot.fillColor,_t.fill(yt)),Ot.hatchColor&&Ct(_t,yt,xt,10,Ot.hatchColor,Dt,!1),_t.restore())},s.buildPath=dt,s.emptyBounds=function(){return{minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,maxY:-Number.MAX_VALUE,leftmostXForY:{},rightmostXForY:{},topmostYForX:{},bottommostYForX:{},allPoints:[]}},s.applyMatrixToPoint=function(_t,yt){var xt=new DOMPoint(_t.x,_t.y);return{x:(xt=xt.matrixTransform(yt)).x,y:xt.y}};var gt,wt=5,bt=3,St="";function Ct(_t,yt,xt,Dt,Ot,Bt,At){if((_t.canvas.width<xt.maxX-xt.minX||_t.canvas.height<xt.maxY-xt.minY)&&(xt={minX:0,maxX:_t.canvas.width,minY:0,maxY:_t.canvas.height,allPoints:[]}),!gt||Ot!==St){St=Ot;var It=document.createElement("canvas");It.width=Dt,It.height=wt+bt;var Gt=It.getContext("2d");Gt.clearRect(0,0,It.width,It.height),Gt.rect(0,0,1,wt),Gt.fillStyle=Ot,Gt.fill(),gt=_t.createPattern(It,"repeat")}_t.save();var Jt=new DOMMatrix;gt.setTransform(Jt.scale(At?-1:1,1).rotate(0,0,-45+Bt)),_t.fillStyle=gt,_t.fill(yt),_t.restore()}function Et(_t){return(_t.match(/#(\w\w)(\w\w)(\w\w)(\w\w)/)||[]).slice(1).map(function(yt){return parseInt(yt,16)/255})}function Pt(_t,yt){if(yt==="rgb"){var xt=j(_t,4),Dt=xt[0],Ot=xt[1],Bt=xt[2],At=xt[3];return"rgb(".concat((255*Dt).toFixed()," ").concat((255*Ot).toFixed()," ").concat((255*Bt).toFixed()).concat(At===1?"":" / "+Math.round(100*At)/100,")")}if(yt==="hsl"){var It=j((0,pt.rgbaToHsla)(_t),4),Gt=It[0],Jt=It[1],nn=It[2];return At=It[3],"hsl(".concat(Math.round(360*Gt),"deg ").concat(Math.round(100*Jt)," ").concat(Math.round(100*nn)).concat(At===1?"":" / "+Math.round(100*At)/100,")")}throw new Error("NOT_REACHED")}s.hatchFillPath=Ct,s.createPathForQuad=function(_t,yt,xt,Dt){var Ot,Bt,At=["M",_t.p1.x,_t.p1.y,"L",_t.p2.x,_t.p2.y,"L",_t.p3.x,_t.p3.y,"L",_t.p4.x,_t.p4.y];try{for(var It=d(yt),Gt=It.next();!Gt.done;Gt=It.next()){var Jt=Gt.value;At=$($([],j(At),!1),["L",Jt.p4.x,Jt.p4.y,"L",Jt.p3.x,Jt.p3.y,"L",Jt.p2.x,Jt.p2.y,"L",Jt.p1.x,Jt.p1.y,"L",Jt.p4.x,Jt.p4.y,"L",_t.p4.x,_t.p4.y],!1)}}catch(nn){Ot={error:nn}}finally{try{Gt&&!Gt.done&&(Bt=It.return)&&Bt.call(It)}finally{if(Ot)throw Ot.error}}return At.push("Z"),dt(At,xt,Dt)},s.parseHexa=Et,s.formatRgba=Pt,s.formatColor=function(_t,yt){return yt==="rgb"||yt==="hsl"?Pt(Et(_t),yt):(0,ht.default)(_t,"FF")?_t.substr(0,7):_t},s.drawPath=function(_t,yt,xt,Dt,Ot,Bt,At){_t.save();var It=dt(yt,Bt,At);return xt&&(_t.fillStyle=xt,_t.fill(It)),Dt&&(Ot==="dashed"&&_t.setLineDash([3,3]),Ot==="dotted"&&_t.setLineDash([2,2]),_t.lineWidth=2,_t.strokeStyle=Dt,_t.stroke(It)),_t.restore(),It}},7669:function(i,s,o){var d,j=this&&this.__extends||(d=function(Et,Pt){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,yt){_t.__proto__=yt}||function(_t,yt){for(var xt in yt)Object.prototype.hasOwnProperty.call(yt,xt)&&(_t[xt]=yt[xt])},d(Et,Pt)},function(Et,Pt){if(typeof Pt!="function"&&Pt!==null)throw new TypeError("Class extends value "+String(Pt)+" is not a constructor or null");function _t(){this.constructor=Et}d(Et,Pt),Et.prototype=Pt===null?Object.create(Pt):(_t.prototype=Pt.prototype,new _t)}),$=this&&this.__importDefault||function(Et){return Et&&Et.__esModule?Et:{default:Et}};Object.defineProperty(s,"__esModule",{value:!0}),s.HighlightOverlay=void 0;var ot=$(o(4858)),ht=o(9706),pt=o(9434),dt=o(1521),gt=function(Et){function Pt(){var _t=Et!==null&&Et.apply(this,arguments)||this;return _t.gridLabelState={gridLayerCounter:0},_t}return j(Pt,Et),Pt.prototype.setContainer=function(_t){this._container=_t},Pt.prototype.setPlatform=function(_t){this.container&&this.container.classList.add("luna-dom-highlighter-platform-"+_t),Et.prototype.setPlatform.call(this,_t)},Object.defineProperty(Pt.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Pt.prototype.reset=function(_t){Et.prototype.reset.call(this,_t),this.tooltip.innerHTML="",this.gridLabelState.gridLayerCounter=0},Pt.prototype.install=function(){var _t=this.document.createElement("canvas");_t.classList.add("luna-dom-highlighter-fill"),this.container.appendChild(_t);var yt=this.document.createElement("div");this.container.appendChild(yt),this.tooltip=yt,this.setCanvas(_t),Et.prototype.install.call(this)},Pt.prototype.uninstall=function(){this.document.body.classList.remove("fill"),this.document.body.innerHTML="",Et.prototype.uninstall.call(this)},Pt.prototype.drawHighlight=function(_t){this.context.save();for(var yt=(0,dt.emptyBounds)(),xt=_t.paths.slice();xt.length;){var Dt=xt.pop();Dt&&(this.context.save(),(0,dt.drawPath)(this.context,Dt.path,Dt.fillColor,Dt.outlineColor,void 0,yt,this.emulationScaleFactor),xt.length&&(this.context.globalCompositeOperation="destination-out",(0,dt.drawPath)(this.context,xt[xt.length-1].path,"red",void 0,void 0,yt,this.emulationScaleFactor)),this.context.restore())}this.context.restore(),this.context.save();var Ot=!!(_t.paths.length&&_t.showRulers&&yt.minX<20&&yt.maxX+20<this.canvasWidth),Bt=!!(_t.paths.length&&_t.showRulers&&yt.minY<20&&yt.maxY+20<this.canvasHeight);return _t.showRulers&&this.drawAxis(this.context,Ot,Bt),_t.paths.length&&(_t.showExtensionLines&&function(At,It,Gt,Jt,nn,Vt,Ut,Ht){At.save();var jt=Ut,Wt=Ht;if(At.strokeStyle=Ct,At.lineWidth=1,At.translate(.5,.5),Gt)for(var ln in It.rightmostXForY)At.beginPath(),At.moveTo(jt,Number(ln)),At.lineTo(It.rightmostXForY[ln],Number(ln)),At.stroke();else for(var ln in It.leftmostXForY)At.beginPath(),At.moveTo(0,Number(ln)),At.lineTo(It.leftmostXForY[ln],Number(ln)),At.stroke();if(Jt)for(var Qt in It.bottommostYForX)At.beginPath(),At.moveTo(Number(Qt),Wt),At.lineTo(Number(Qt),It.topmostYForX[Qt]),At.stroke();else for(var Qt in It.topmostYForX)At.beginPath(),At.moveTo(Number(Qt),0),At.lineTo(Number(Qt),It.topmostYForX[Qt]),At.stroke();At.restore()}(this.context,yt,Ot,Bt,void 0,!1,this.canvasWidth,this.canvasHeight),_t.elementInfo&&function(At,It,Gt,Jt,nn,Vt){At.innerHTML="";var Ut=(0,pt.createChild)(At,"div"),Ht=(0,pt.createChild)(Ut,"div","tooltip-content"),jt=function(cn,kn){var En=(0,pt.createElement)("div","element-info"),cr=(0,pt.createChild)(En,"div","element-info-header"),Gn=function(Vn){return Vn.layoutObjectName&&(0,ot.default)(Vn.layoutObjectName,"Grid")?"grid":Vn.layoutObjectName&&Vn.layoutObjectName==="LayoutNGFlexibleBox"?"flex":null}(cn);Gn&&(0,pt.createChild)(cr,"div","element-layout-type ".concat(Gn));var ur=(0,pt.createChild)(cr,"div","element-description");(0,pt.createChild)(ur,"span","material-tag-name").textContent=cn.tagName;var hn=(0,pt.createChild)(ur,"span","material-node-id"),sr=80;hn.textContent=cn.idValue?"#"+(0,pt.ellipsify)(cn.idValue,sr):"",hn.classList.toggle("hidden",!cn.idValue);var An=(0,pt.createChild)(ur,"span","material-class-name");hn.textContent.length<sr&&(An.textContent=(0,pt.ellipsify)(cn.className||"",sr-hn.textContent.length)),An.classList.toggle("hidden",!cn.className);var Nn=(0,pt.createChild)(cr,"div","dimensions");(0,pt.createChild)(Nn,"span","material-node-width").textContent=String(Math.round(100*cn.nodeWidth)/100),(0,pt.createTextChild)(Nn,"×"),(0,pt.createChild)(Nn,"span","material-node-height").textContent=String(Math.round(100*cn.nodeHeight)/100);var Wn,Dn=cn.style||{};cn.isLockedAncestor&&Mn("Showing content-visibility ancestor",""),cn.isLocked&&Mn("Descendants are skipped due to content-visibility","");var Kn=Dn.color;Kn&&Kn!=="#00000000"&&gn("Color",Kn,kn);var lr=Dn["font-family"],Rr=Dn["font-size"];lr&&Rr!=="0px"&&Mn("Font","".concat(Rr," ").concat(lr));var $r=Dn["background-color"];$r&&$r!=="#00000000"&&gn("Background",$r,kn);var br=Dn.margin;br&&br!=="0px"&&Mn("Margin",br);var Tr=Dn.padding;Tr&&Tr!=="0px"&&Mn("Padding",Tr);var fr=cn.contrast?cn.contrast.backgroundColor:null,In=Kn&&Kn!=="#00000000"&&fr&&fr!=="#00000000";cn.showAccessibilityInfo&&(pr("Accessibility"),In&&Dn.color&&cn.contrast&&Xn(Dn.color,cn.contrast),Mn("Name",cn.accessibleName),Mn("Role",cn.accessibleRole),ir("Keyboard-focusable",cn.isKeyboardFocusable?"a11y-icon a11y-icon-ok":"a11y-icon a11y-icon-not-ok"));function _i(){Wn||(Wn=(0,pt.createChild)(En,"div","element-info-body"))}function pr(Vn){_i();var gr=(0,pt.createChild)(Wn,"div","element-info-row element-info-section");(0,pt.createChild)(gr,"div","section-name").textContent=Vn,(0,pt.createChild)((0,pt.createChild)(gr,"div","separator-container"),"div","separator")}function tr(Vn,gr,zr){_i();var Ir=(0,pt.createChild)(Wn,"div","element-info-row");return(0,pt.createChild)(Ir,"div","element-info-name").textContent=Vn,(0,pt.createChild)(Ir,"div","element-info-gap"),(0,pt.createChild)(Ir,"div",zr||"")}function ir(Vn,gr){(0,pt.createChild)(tr(Vn,"","element-info-value-icon"),"div",gr)}function Mn(Vn,gr){(0,pt.createTextChild)(tr(Vn,"","element-info-value-text"),gr)}function gn(Vn,gr,zr){var Ir=tr(Vn,"","element-info-value-color"),Wr=(0,pt.createChild)(Ir,"div","color-swatch");(0,pt.createChild)(Wr,"div","color-swatch-inner").style.backgroundColor=gr,(0,pt.createTextChild)(Ir,(0,dt.formatColor)(gr,zr))}function Xn(Vn,gr){var zr=(0,dt.parseHexa)(Vn),Ir=(0,dt.parseHexa)(gr.backgroundColor);zr[3]*=gr.textOpacity;var Wr=tr("Contrast","","element-info-value-contrast"),eo=(0,pt.createChild)(Wr,"div","contrast-text");eo.style.color=(0,dt.formatRgba)(zr,"rgb"),eo.style.backgroundColor=gr.backgroundColor,eo.textContent="Aa";var Vr=(0,pt.createChild)(Wr,"span");if(gr.contrastAlgorithm==="apca"){var go=(0,ht.contrastRatioAPCA)(zr,Ir),mo=(0,ht.getAPCAThreshold)(gr.fontSize,gr.fontWeight);Vr.textContent=String(Math.floor(100*go)/100)+"%",(0,pt.createChild)(Wr,"div",mo===null||Math.abs(go)<mo?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}else if(gr.contrastAlgorithm==="aa"||gr.contrastAlgorithm==="aaa"){var $o=(0,ht.contrastRatio)(zr,Ir);mo=(0,ht.getContrastThreshold)(gr.fontSize,gr.fontWeight)[gr.contrastAlgorithm],Vr.textContent=String(Math.floor(100*$o)/100),(0,pt.createChild)(Wr,"div",$o<mo?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}}return En}(It,Gt);Ht.appendChild(jt);var Wt,ln=Ht.offsetWidth,Qt=Ht.offsetHeight,Xt=8,on=2,sn=2*Xt,bn=Xt+2,Zn=on+bn,Rn=nn-on-bn-sn,vn=Jt.maxX-Jt.minX<sn+2*bn;if(vn)Wt=.5*(Jt.minX+Jt.maxX)-Xt;else{var yn=Jt.minX+bn,Ln=Jt.maxX-bn-sn;Wt=yn>Zn&&yn<Rn?yn:(0,pt.constrainNumber)(Zn,yn,Ln)}var qn=Wt<Zn||Wt>Rn,_r=Wt-bn;_r=(0,pt.constrainNumber)(_r,on,nn-ln-on);var Jn=Jt.minY-Xt-Qt,dr=!0;Jn<0?(Jn=Math.min(Vt-Qt,Jt.maxY+Xt),dr=!1):Jt.minY>Vt&&(Jn=Vt-Xt-Qt);var Un=_r>=Jt.minX&&_r+ln<=Jt.maxX&&Jn>=Jt.minY&&Jn+Qt<=Jt.maxY,mn=_r<Jt.maxX&&_r+ln>Jt.minX&&Jn<Jt.maxY&&Jn+Qt>Jt.minY;if(mn&&!Un)return void(Ht.style.display="none");if(Ht.style.top=Jn+"px",Ht.style.left=_r+"px",!qn){var xn=(0,pt.createChild)(Ht,"div","tooltip-arrow");xn.style.clipPath=dr?"polygon(0 0, 100% 0, 50% 100%)":"polygon(50% 0, 0 100%, 100% 100%)",xn.style.top=(dr?Qt-1:-Xt)+"px",xn.style.left=Wt-_r+"px"}}(this.tooltip,_t.elementInfo,_t.colorFormat,yt,this.canvasWidth,this.canvasHeight)),this.context.restore(),{bounds:yt}},Pt.prototype.drawAxis=function(_t,yt,xt){_t.save();var Dt=this.pageZoomFactor*this.pageScaleFactor*this.emulationScaleFactor,Ot=this.scrollX*this.pageScaleFactor,Bt=this.scrollY*this.pageScaleFactor;function At(ln){return Math.round(ln*Dt)}function It(ln){return Math.round(ln/Dt)}var Gt=this.canvasWidth/Dt,Jt=this.canvasHeight/Dt,nn=50;_t.save(),_t.fillStyle=St,xt?_t.fillRect(0,At(Jt)-15,At(Gt),At(Jt)):_t.fillRect(0,0,At(Gt),15),_t.globalCompositeOperation="destination-out",_t.fillStyle="red",yt?_t.fillRect(At(Gt)-15,0,At(Gt),At(Jt)):_t.fillRect(0,0,15,At(Jt)),_t.restore(),_t.fillStyle=St,yt?_t.fillRect(At(Gt)-15,0,At(Gt),At(Jt)):_t.fillRect(0,0,15,At(Jt)),_t.lineWidth=1,_t.strokeStyle=bt,_t.fillStyle=bt,_t.save(),_t.translate(-Ot,.5-Bt);for(var Vt=Jt+It(Bt),Ut=100;Ut<Vt;Ut+=100)_t.save(),_t.translate(Ot,At(Ut)),_t.rotate(-Math.PI/2),_t.fillText(String(Ut),2,yt?At(Gt)-7:13),_t.restore();_t.translate(.5,-.5);for(var Ht=Gt+It(Ot),jt=100;jt<Ht;jt+=100)_t.save(),_t.fillText(String(jt),At(jt)+2,xt?Bt+At(Jt)-7:Bt+13),_t.restore();for(_t.restore(),_t.save(),yt&&(_t.translate(At(Gt),0),_t.scale(-1,1)),_t.translate(-Ot,.5-Bt),Vt=Jt+It(Bt),Ut=nn;Ut<Vt;Ut+=nn){_t.beginPath(),_t.moveTo(Ot,At(Ut));var Wt=Ut%100?5:8;_t.lineTo(Ot+Wt,At(Ut)),_t.stroke()}for(_t.strokeStyle=wt,Ut=5;Ut<Vt;Ut+=5)Ut%nn&&(_t.beginPath(),_t.moveTo(Ot,At(Ut)),_t.lineTo(Ot+5,At(Ut)),_t.stroke());for(_t.restore(),_t.save(),xt&&(_t.translate(0,At(Jt)),_t.scale(1,-1)),_t.translate(.5-Ot,-Bt),Ht=Gt+It(Ot),jt=nn;jt<Ht;jt+=nn)_t.beginPath(),_t.moveTo(At(jt),Bt),Wt=jt%100?5:8,_t.lineTo(At(jt),Bt+Wt),_t.stroke();for(_t.strokeStyle=wt,jt=5;jt<Ht;jt+=5)jt%nn&&(_t.beginPath(),_t.moveTo(At(jt),Bt),_t.lineTo(At(jt),Bt+5),_t.stroke());_t.restore(),_t.restore()},Pt}(pt.Overlay);s.HighlightOverlay=gt;var wt="rgba(0,0,0,0.2)",bt="rgba(0,0,0,0.7)",St="rgba(255, 255, 255, 0.8)",Ct="rgba(128, 128, 128, 0.3)"},1160:function(i,s,o){var d,j=this&&this.__extends||(d=function(Ct,Et){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Pt,_t){Pt.__proto__=_t}||function(Pt,_t){for(var yt in _t)Object.prototype.hasOwnProperty.call(_t,yt)&&(Pt[yt]=_t[yt])},d(Ct,Et)},function(Ct,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Class extends value "+String(Et)+" is not a constructor or null");function Pt(){this.constructor=Ct}d(Ct,Et),Ct.prototype=Et===null?Object.create(Et):(Pt.prototype=Et.prototype,new Pt)}),$=this&&this.__importDefault||function(Ct){return Ct&&Ct.__esModule?Ct:{default:Ct}};Object.defineProperty(s,"__esModule",{value:!0});var ot=$(o(1443)),ht=$(o(1512)),pt=o(2062),dt=$(o(3783)),gt=$(o(6329)),wt=$(o(4193)),bt=$(o(5852)),St=function(Ct){function Et(Pt,_t,yt){var xt=_t.compName,Dt=(yt===void 0?{}:yt).theme,Ot=Dt===void 0?"light":Dt,Bt=Ct.call(this)||this;return Bt.subComponents=[],Bt.compName=xt,Bt.c=(0,pt.classPrefix)(xt),Bt.options={},Bt.container=Pt,Bt.$container=(0,ht.default)(Pt),Bt.$container.addClass(["luna-".concat(xt),Bt.c("platform-".concat((0,pt.getPlatform)()))]),Bt.on("optionChange",function(At,It,Gt){var Jt=Bt.c;At==="theme"&&(Bt.$container.rmClass(Jt("theme-".concat(Gt))).addClass(Jt("theme-".concat(It))),(0,dt.default)(Bt.subComponents,function(nn){return nn.setOption("theme",It)}))}),Bt.setOption("theme",Ot),Bt}return j(Et,Ct),Et.prototype.destroy=function(){this.destroySubComponents();var Pt=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Pt("platform-".concat((0,pt.getPlatform)()))).rmClass(Pt("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Et.prototype.setOption=function(Pt,_t){var yt=this,xt=this.options,Dt={};typeof Pt=="string"?Dt[Pt]=_t:Dt=Pt,(0,dt.default)(Dt,function(Ot,Bt){var At=xt[Bt];xt[Bt]=Ot,yt.emit("optionChange",Bt,Ot,At)})},Et.prototype.getOption=function(Pt){return this.options[Pt]},Et.prototype.addSubComponent=function(Pt){Pt.setOption("theme",this.options.theme),this.subComponents.push(Pt)},Et.prototype.removeSubComponent=function(Pt){(0,bt.default)(this.subComponents,function(_t){return _t===Pt})},Et.prototype.destroySubComponents=function(){(0,dt.default)(this.subComponents,function(Pt){return Pt.destroy()}),this.subComponents=[]},Et.prototype.initOptions=function(Pt,_t){_t===void 0&&(_t={}),(0,wt.default)(Pt,_t),(0,gt.default)(this.options,Pt)},Et.prototype.find=function(Pt){return this.$container.find(this.c(Pt))},Et}(ot.default);s.default=St},2062:function(i,s,o){var d=this&&this.__importDefault||function(yt){return yt&&yt.__esModule?yt:{default:yt}};Object.defineProperty(s,"__esModule",{value:!0}),s.resetCanvasSize=s.getPlatform=s.pxToNum=s.executeAfterTransition=s.hasVerticalScrollbar=s.measuredScrollbarWidth=s.eventPage=s.eventClient=s.drag=s.classPrefix=void 0;var j=d(o(2461)),$=d(o(4331)),ot=d(o(5610)),ht=d(o(7483)),pt=d(o(3990)),dt=d(o(6341)),gt=d(o(3875)),wt=d(o(6954)),bt=d(o(9585));function St(yt,xt){for(var Dt=0,Ot=yt.length;Dt<Ot;Dt++){var Bt=yt[Dt];xt(Bt),Bt.content&&St(Bt.content,xt)}}s.classPrefix=function(yt){var xt="luna-".concat(yt,"-");function Dt(Ot){return(0,j.default)((0,$.default)(Ot).split(/\s+/),function(Bt){return(0,dt.default)(Bt,xt)?Bt:Bt.replace(/[\w-]+/,function(At){return"".concat(xt).concat(At)})}).join(" ")}return function(Ot){if(/<[^>]*>/g.test(Ot))try{var Bt=ht.default.parse(Ot);return St(Bt,function(At){At.attrs&&At.attrs.class&&(At.attrs.class=Dt(At.attrs.class))}),ht.default.stringify(Bt)}catch{return Dt(Ot)}return Dt(Ot)}};var Ct,Et="ontouchstart"in ot.default,Pt={start:"touchstart",move:"touchmove",end:"touchend"},_t={start:"mousedown",move:"mousemove",end:"mouseup"};s.drag=function(yt){return Et?Pt[yt]:_t[yt]},s.eventClient=function(yt,xt){var Dt=yt==="x"?"clientX":"clientY";return xt[Dt]?xt[Dt]:xt.changedTouches?xt.changedTouches[0][Dt]:0},s.eventPage=function(yt,xt){var Dt=yt==="x"?"pageX":"pageY";return xt[Dt]?xt[Dt]:xt.changedTouches?xt.changedTouches[0][Dt]:0},s.measuredScrollbarWidth=function(){if((0,pt.default)(Ct))return Ct;if(!document)return 16;var yt=document.createElement("div"),xt=document.createElement("div");return yt.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),xt.setAttribute("style","height: 200px"),yt.appendChild(xt),document.body.appendChild(yt),Ct=yt.offsetWidth-yt.clientWidth,document.body.removeChild(yt),Ct},s.hasVerticalScrollbar=function(yt){return yt.scrollHeight>yt.offsetHeight},s.executeAfterTransition=function(yt,xt){if((0,bt.default)(yt))return xt();var Dt=function(Ot){Ot.target===yt&&(yt.removeEventListener("transitionend",Dt),xt())};yt.addEventListener("transitionend",Dt)},s.pxToNum=function(yt){return(0,gt.default)(yt.replace("px",""))},s.getPlatform=function(){var yt=(0,wt.default)();return yt==="os x"?"mac":yt},s.resetCanvasSize=function(yt){yt.width=Math.round(yt.offsetWidth*window.devicePixelRatio),yt.height=Math.round(yt.offsetHeight*window.devicePixelRatio)}},6093:function(i,s,o){var d,j=this&&this.__extends||(d=function(bt,St){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ct,Et){Ct.__proto__=Et}||function(Ct,Et){for(var Pt in Et)Object.prototype.hasOwnProperty.call(Et,Pt)&&(Ct[Pt]=Et[Pt])},d(bt,St)},function(bt,St){if(typeof St!="function"&&St!==null)throw new TypeError("Class extends value "+String(St)+" is not a constructor or null");function Ct(){this.constructor=bt}d(bt,St),bt.prototype=St===null?Object.create(St):(Ct.prototype=St.prototype,new Ct)}),$=this&&this.__importDefault||function(bt){return bt&&bt.__esModule?bt:{default:bt}};Object.defineProperty(s,"__esModule",{value:!0});var ot=$(o(1512)),ht=$(o(5229)),pt=$(o(2244)),dt=$(o(8613)),gt=function(bt){function St(Ct,Et){Et===void 0&&(Et={});var Pt=bt.call(this,Ct,{compName:"notification"},Et)||this;return Pt.notifications=[],Pt.initOptions(Et,{position:{x:"right",y:"bottom"},duration:2e3}),Pt.initTpl(),Pt}return j(St,bt),St.prototype.notify=function(Ct,Et){var Pt=this;Et===void 0&&(Et={duration:this.options.duration});var _t=new wt(this,Ct);this.notifications.push(_t),this.add(_t),setTimeout(function(){return Pt.remove(_t.id)},Et.duration)},St.prototype.dismissAll=function(){for(var Ct=this.notifications,Et=Ct[0];Et;)this.remove(Et.id),Et=Ct[0]},St.prototype.add=function(Ct){this.container.appendChild(Ct.container)},St.prototype.remove=function(Ct){var Et=this.notifications,Pt=(0,pt.default)(Et,function(yt){return yt.id===Ct});if(Pt){Pt.destroy();var _t=Et.indexOf(Pt);Et.splice(_t,1)}},St.prototype.initTpl=function(){var Ct=this.$container,Et=this.options.position,Pt=Et.x,_t=Et.y,yt="flex-end",xt="flex-end";switch(Pt){case"center":xt="center";break;case"left":xt="flex-start"}_t==="top"&&(yt="flex-start"),Ct.attr("style","justify-content: ".concat(yt,"; align-items: ").concat(xt))},St}($(o(5404)).default);s.default=gt;var wt=function(){function bt(St,Ct){this.container=(0,dt.default)("div"),this.$container=(0,ot.default)(this.container),this.notification=St,this.content=Ct,this.id=(0,ht.default)("luna-notification-"),this.$container.attr({id:this.id,class:St.c("item ".concat(St.getOption("position").y==="bottom"?"lower":"upper"))}),this.initTpl()}return bt.prototype.destroy=function(){this.$container.remove()},bt.prototype.initTpl=function(){this.$container.html(this.notification.c('<div class="content">'.concat(this.content,"</div>")))},bt}();i.exports=gt,i.exports.default=gt},5404:function(i,s,o){var d,j=this&&this.__extends||(d=function(Ct,Et){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Pt,_t){Pt.__proto__=_t}||function(Pt,_t){for(var yt in _t)Object.prototype.hasOwnProperty.call(_t,yt)&&(Pt[yt]=_t[yt])},d(Ct,Et)},function(Ct,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Class extends value "+String(Et)+" is not a constructor or null");function Pt(){this.constructor=Ct}d(Ct,Et),Ct.prototype=Et===null?Object.create(Et):(Pt.prototype=Et.prototype,new Pt)}),$=this&&this.__importDefault||function(Ct){return Ct&&Ct.__esModule?Ct:{default:Ct}};Object.defineProperty(s,"__esModule",{value:!0});var ot=$(o(1443)),ht=$(o(1512)),pt=o(164),dt=$(o(3783)),gt=$(o(6329)),wt=$(o(4193)),bt=$(o(5852)),St=function(Ct){function Et(Pt,_t,yt){var xt=_t.compName,Dt=(yt===void 0?{}:yt).theme,Ot=Dt===void 0?"light":Dt,Bt=Ct.call(this)||this;return Bt.subComponents=[],Bt.compName=xt,Bt.c=(0,pt.classPrefix)(xt),Bt.options={},Bt.container=Pt,Bt.$container=(0,ht.default)(Pt),Bt.$container.addClass(["luna-".concat(xt),Bt.c("platform-".concat((0,pt.getPlatform)()))]),Bt.on("optionChange",function(At,It,Gt){var Jt=Bt.c;At==="theme"&&(Bt.$container.rmClass(Jt("theme-".concat(Gt))).addClass(Jt("theme-".concat(It))),(0,dt.default)(Bt.subComponents,function(nn){return nn.setOption("theme",It)}))}),Bt.setOption("theme",Ot),Bt}return j(Et,Ct),Et.prototype.destroy=function(){this.destroySubComponents();var Pt=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Pt("platform-".concat((0,pt.getPlatform)()))).rmClass(Pt("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Et.prototype.setOption=function(Pt,_t){var yt=this,xt=this.options,Dt={};typeof Pt=="string"?Dt[Pt]=_t:Dt=Pt,(0,dt.default)(Dt,function(Ot,Bt){var At=xt[Bt];xt[Bt]=Ot,yt.emit("optionChange",Bt,Ot,At)})},Et.prototype.getOption=function(Pt){return this.options[Pt]},Et.prototype.addSubComponent=function(Pt){Pt.setOption("theme",this.options.theme),this.subComponents.push(Pt)},Et.prototype.removeSubComponent=function(Pt){(0,bt.default)(this.subComponents,function(_t){return _t===Pt})},Et.prototype.destroySubComponents=function(){(0,dt.default)(this.subComponents,function(Pt){return Pt.destroy()}),this.subComponents=[]},Et.prototype.initOptions=function(Pt,_t){_t===void 0&&(_t={}),(0,wt.default)(Pt,_t),(0,gt.default)(this.options,Pt)},Et.prototype.find=function(Pt){return this.$container.find(this.c(Pt))},Et}(ot.default);s.default=St},164:function(i,s,o){var d=this&&this.__importDefault||function(yt){return yt&&yt.__esModule?yt:{default:yt}};Object.defineProperty(s,"__esModule",{value:!0}),s.resetCanvasSize=s.getPlatform=s.pxToNum=s.executeAfterTransition=s.hasVerticalScrollbar=s.measuredScrollbarWidth=s.eventClient=s.drag=s.classPrefix=void 0;var j=d(o(2461)),$=d(o(4331)),ot=d(o(5610)),ht=d(o(7483)),pt=d(o(3990)),dt=d(o(6341)),gt=d(o(3875)),wt=d(o(6954)),bt=d(o(9585));function St(yt,xt){for(var Dt=0,Ot=yt.length;Dt<Ot;Dt++){var Bt=yt[Dt];xt(Bt),Bt.content&&St(Bt.content,xt)}}s.classPrefix=function(yt){var xt="luna-".concat(yt,"-");function Dt(Ot){return(0,j.default)((0,$.default)(Ot).split(/\s+/),function(Bt){return(0,dt.default)(Bt,xt)?Bt:Bt.replace(/[\w-]+/,function(At){return"".concat(xt).concat(At)})}).join(" ")}return function(Ot){if(/<[^>]*>/g.test(Ot))try{var Bt=ht.default.parse(Ot);return St(Bt,function(At){At.attrs&&At.attrs.class&&(At.attrs.class=Dt(At.attrs.class))}),ht.default.stringify(Bt)}catch{return Dt(Ot)}return Dt(Ot)}};var Ct,Et="ontouchstart"in ot.default,Pt={start:"touchstart",move:"touchmove",end:"touchend"},_t={start:"mousedown",move:"mousemove",end:"mouseup"};s.drag=function(yt){return Et?Pt[yt]:_t[yt]},s.eventClient=function(yt,xt){var Dt=yt==="x"?"clientX":"clientY";return xt[Dt]?xt[Dt]:xt.changedTouches?xt.changedTouches[0][Dt]:0},s.measuredScrollbarWidth=function(){if((0,pt.default)(Ct))return Ct;if(!document)return 16;var yt=document.createElement("div"),xt=document.createElement("div");return yt.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),xt.setAttribute("style","height: 200px"),yt.appendChild(xt),document.body.appendChild(yt),Ct=yt.offsetWidth-yt.clientWidth,document.body.removeChild(yt),Ct},s.hasVerticalScrollbar=function(yt){return yt.scrollHeight>yt.offsetHeight},s.executeAfterTransition=function(yt,xt){if((0,bt.default)(yt))return xt();var Dt=function(Ot){Ot.target===yt&&(yt.removeEventListener("transitionend",Dt),xt())};yt.addEventListener("transitionend",Dt)},s.pxToNum=function(yt){return(0,gt.default)(yt.replace("px",""))},s.getPlatform=function(){var yt=(0,wt.default)();return yt==="os x"?"mac":yt},s.resetCanvasSize=function(yt){yt.width=Math.round(yt.offsetWidth*window.devicePixelRatio),yt.height=Math.round(yt.offsetHeight*window.devicePixelRatio)}},8169:function(i,s,o){o.r(s),o.d(s,{default:function(){return Pt}});var d={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},j=/([astvzqmhlc])([^astvzqmhlc]*)/gi,$=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,ot=function(_t){var yt=[],xt=String(_t).trim();return xt[0]!=="M"&&xt[0]!=="m"||xt.replace(j,function(Dt,Ot,Bt){var At=Ot.toLowerCase(),It=function(Jt){var nn=Jt.match($);return nn?nn.map(Number):[]}(Bt),Gt=Ot;if(At==="m"&&It.length>2&&(yt.push([Gt].concat(It.splice(0,2))),At="l",Gt=Gt==="m"?"l":"L"),It.length<d[At])return"";for(yt.push([Gt].concat(It.splice(0,d[At])));It.length>=d[At]&&It.length&&d[At];)yt.push([Gt].concat(It.splice(0,d[At])));return""}),yt};function ht(_t,yt){for(var xt=0;xt<yt.length;xt++){var Dt=yt[xt];Dt.enumerable=Dt.enumerable||!1,Dt.configurable=!0,"value"in Dt&&(Dt.writable=!0),Object.defineProperty(_t,Dt.key,Dt)}}function pt(_t){return function(yt){if(Array.isArray(yt))return dt(yt)}(_t)||function(yt){if(typeof Symbol<"u"&&yt[Symbol.iterator]!=null||yt["@@iterator"]!=null)return Array.from(yt)}(_t)||function(yt,xt){if(yt){if(typeof yt=="string")return dt(yt,xt);var Dt=Object.prototype.toString.call(yt).slice(8,-1);if(Dt==="Object"&&yt.constructor&&(Dt=yt.constructor.name),Dt==="Map"||Dt==="Set")return Array.from(yt);if(Dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Dt))return dt(yt,xt)}}(_t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dt(_t,yt){(yt==null||yt>_t.length)&&(yt=_t.length);for(var xt=0,Dt=new Array(yt);xt<yt;xt++)Dt[xt]=_t[xt];return Dt}var gt=ot;function wt(_t,yt){var xt=_t.x*Math.cos(yt)-_t.y*Math.sin(yt),Dt=_t.y*Math.cos(yt)+_t.x*Math.sin(yt);_t.x=xt,_t.y=Dt}function bt(_t,yt){_t.x*=yt,_t.y*=yt}var St=function(_t){if(_t!==void 0&&_t.CanvasRenderingContext2D&&(!_t.Path2D||!function(At){var It=At.document.createElement("canvas").getContext("2d"),Gt=new At.Path2D("M0 0 L1 1");return It.strokeStyle="red",It.lineWidth=1,It.stroke(Gt),It.getImageData(0,0,1,1).data[0]===255}(_t))){var yt=function(){function At(Jt){var nn;(function(Vt,Ut){if(!(Vt instanceof Ut))throw new TypeError("Cannot call a class as a function")})(this,At),this.segments=[],Jt&&Jt instanceof At?(nn=this.segments).push.apply(nn,pt(Jt.segments)):Jt&&(this.segments=gt(Jt))}var It,Gt;return It=At,(Gt=[{key:"addPath",value:function(Jt){var nn;Jt&&Jt instanceof At&&(nn=this.segments).push.apply(nn,pt(Jt.segments))}},{key:"moveTo",value:function(Jt,nn){this.segments.push(["M",Jt,nn])}},{key:"lineTo",value:function(Jt,nn){this.segments.push(["L",Jt,nn])}},{key:"arc",value:function(Jt,nn,Vt,Ut,Ht,jt){this.segments.push(["AC",Jt,nn,Vt,Ut,Ht,!!jt])}},{key:"arcTo",value:function(Jt,nn,Vt,Ut,Ht){this.segments.push(["AT",Jt,nn,Vt,Ut,Ht])}},{key:"ellipse",value:function(Jt,nn,Vt,Ut,Ht,jt,Wt,ln){this.segments.push(["E",Jt,nn,Vt,Ut,Ht,jt,Wt,!!ln])}},{key:"closePath",value:function(){this.segments.push(["Z"])}},{key:"bezierCurveTo",value:function(Jt,nn,Vt,Ut,Ht,jt){this.segments.push(["C",Jt,nn,Vt,Ut,Ht,jt])}},{key:"quadraticCurveTo",value:function(Jt,nn,Vt,Ut){this.segments.push(["Q",Jt,nn,Vt,Ut])}},{key:"rect",value:function(Jt,nn,Vt,Ut){this.segments.push(["R",Jt,nn,Vt,Ut])}}])&&ht(It.prototype,Gt),Object.defineProperty(It,"prototype",{writable:!1}),At}(),xt=_t.CanvasRenderingContext2D.prototype.fill,Dt=_t.CanvasRenderingContext2D.prototype.stroke;_t.CanvasRenderingContext2D.prototype.fill=function(){for(var At=arguments.length,It=new Array(At),Gt=0;Gt<At;Gt++)It[Gt]=arguments[Gt];var Jt="nonzero";It.length===0||It.length===1&&typeof It[0]=="string"?xt.apply(this,It):(arguments.length===2&&(Jt=It[1]),Bt(this,It[0].segments),xt.call(this,Jt))},_t.CanvasRenderingContext2D.prototype.stroke=function(At){At?(Bt(this,At.segments),Dt.call(this)):Dt.call(this)};var Ot=_t.CanvasRenderingContext2D.prototype.isPointInPath;_t.CanvasRenderingContext2D.prototype.isPointInPath=function(){for(var At=arguments.length,It=new Array(At),Gt=0;Gt<At;Gt++)It[Gt]=arguments[Gt];if(It[0].constructor.name==="Path2D"){var Jt=It[1],nn=It[2],Vt=It[3]||"nonzero";return Bt(this,It[0].segments),Ot.apply(this,[Jt,nn,Vt])}return Ot.apply(this,It)},_t.Path2D=yt}function Bt(At,It){var Gt,Jt,nn,Vt,Ut,Ht,jt,Wt,ln,Qt,Xt,on,sn,bn,Zn,Rn,vn,yn,Ln,qn,_r,Jn,dr,Un,mn,xn,cn,kn,En,cr={x:0,y:0},Gn={x:0,y:0};At.beginPath();for(var ur=0;ur<It.length;++ur){var hn=It[ur];switch((qn=hn[0])!=="S"&&qn!=="s"&&qn!=="C"&&qn!=="c"&&(Jn=null,dr=null),qn!=="T"&&qn!=="t"&&qn!=="Q"&&qn!=="q"&&(Un=null,mn=null),qn){case"m":case"M":qn==="m"?(Xt+=hn[1],sn+=hn[2]):(Xt=hn[1],sn=hn[2]),qn!=="M"&&cr||(cr={x:Xt,y:sn}),At.moveTo(Xt,sn);break;case"l":Xt+=hn[1],sn+=hn[2],At.lineTo(Xt,sn);break;case"L":Xt=hn[1],sn=hn[2],At.lineTo(Xt,sn);break;case"H":Xt=hn[1],At.lineTo(Xt,sn);break;case"h":Xt+=hn[1],At.lineTo(Xt,sn);break;case"V":sn=hn[1],At.lineTo(Xt,sn);break;case"v":sn+=hn[1],At.lineTo(Xt,sn);break;case"a":case"A":qn==="a"?(Xt+=hn[6],sn+=hn[7]):(Xt=hn[6],sn=hn[7]),Rn=hn[1],vn=hn[2],jt=hn[3]*Math.PI/180,nn=!!hn[4],Vt=!!hn[5],Ut={x:Xt,y:sn},wt(Ht={x:(Gn.x-Ut.x)/2,y:(Gn.y-Ut.y)/2},-jt),(Wt=Ht.x*Ht.x/(Rn*Rn)+Ht.y*Ht.y/(vn*vn))>1&&(Rn*=Wt=Math.sqrt(Wt),vn*=Wt),ln=Rn*Rn*vn*vn,Qt=Rn*Rn*Ht.y*Ht.y+vn*vn*Ht.x*Ht.x,bt(_r={x:Rn*Ht.y/vn,y:-vn*Ht.x/Rn},Vt!==nn?Math.sqrt((ln-Qt)/Qt)||0:-Math.sqrt((ln-Qt)/Qt)||0),Jt=Math.atan2((Ht.y-_r.y)/vn,(Ht.x-_r.x)/Rn),Gt=Math.atan2(-(Ht.y+_r.y)/vn,-(Ht.x+_r.x)/Rn),wt(_r,jt),cn=_r,kn=(Ut.x+Gn.x)/2,En=(Ut.y+Gn.y)/2,cn.x+=kn,cn.y+=En,At.save(),At.translate(_r.x,_r.y),At.rotate(jt),At.scale(Rn,vn),At.arc(0,0,1,Jt,Gt,!Vt),At.restore();break;case"C":Jn=hn[3],dr=hn[4],Xt=hn[5],sn=hn[6],At.bezierCurveTo(hn[1],hn[2],Jn,dr,Xt,sn);break;case"c":At.bezierCurveTo(hn[1]+Xt,hn[2]+sn,hn[3]+Xt,hn[4]+sn,hn[5]+Xt,hn[6]+sn),Jn=hn[3]+Xt,dr=hn[4]+sn,Xt+=hn[5],sn+=hn[6];break;case"S":Jn!==null&&dr!==null||(Jn=Xt,dr=sn),At.bezierCurveTo(2*Xt-Jn,2*sn-dr,hn[1],hn[2],hn[3],hn[4]),Jn=hn[1],dr=hn[2],Xt=hn[3],sn=hn[4];break;case"s":Jn!==null&&dr!==null||(Jn=Xt,dr=sn),At.bezierCurveTo(2*Xt-Jn,2*sn-dr,hn[1]+Xt,hn[2]+sn,hn[3]+Xt,hn[4]+sn),Jn=hn[1]+Xt,dr=hn[2]+sn,Xt+=hn[3],sn+=hn[4];break;case"Q":Un=hn[1],mn=hn[2],Xt=hn[3],sn=hn[4],At.quadraticCurveTo(Un,mn,Xt,sn);break;case"q":Un=hn[1]+Xt,mn=hn[2]+sn,Xt+=hn[3],sn+=hn[4],At.quadraticCurveTo(Un,mn,Xt,sn);break;case"T":Un!==null&&mn!==null||(Un=Xt,mn=sn),Un=2*Xt-Un,mn=2*sn-mn,Xt=hn[1],sn=hn[2],At.quadraticCurveTo(Un,mn,Xt,sn);break;case"t":Un!==null&&mn!==null||(Un=Xt,mn=sn),Un=2*Xt-Un,mn=2*sn-mn,Xt+=hn[1],sn+=hn[2],At.quadraticCurveTo(Un,mn,Xt,sn);break;case"z":case"Z":Xt=cr.x,sn=cr.y,cr=void 0,At.closePath();break;case"AC":Xt=hn[1],sn=hn[2],Zn=hn[3],Jt=hn[4],Gt=hn[5],xn=hn[6],At.arc(Xt,sn,Zn,Jt,Gt,xn);break;case"AT":on=hn[1],bn=hn[2],Xt=hn[3],sn=hn[4],Zn=hn[5],At.arcTo(on,bn,Xt,sn,Zn);break;case"E":Xt=hn[1],sn=hn[2],Rn=hn[3],vn=hn[4],jt=hn[5],Jt=hn[6],Gt=hn[7],xn=hn[8],At.save(),At.translate(Xt,sn),At.rotate(jt),At.scale(Rn,vn),At.arc(0,0,1,Jt,Gt,xn),At.restore();break;case"R":Xt=hn[1],sn=hn[2],yn=hn[3],Ln=hn[4],cr={x:Xt,y:sn},At.rect(Xt,sn,yn,Ln)}Gn.x=Xt,Gn.y=sn}}},Ct=ot,Et=St;typeof window<"u"&&Et(window);var Pt={path2dPolyfill:Et,parsePath:Ct}},2777:function(i){i.exports=`.luna-dom-highlighter{position:fixed;left:0;top:0;width:100%;height:100%;z-index:100000;pointer-events:none;font-size:13px}.luna-dom-highlighter-fill{position:absolute;top:0;right:0;bottom:0;left:0}.luna-dom-highlighter-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-highlighter-platform-mac{color:#303942;font-family:'.SFNSDisplay-Regular','Helvetica Neue','Lucida Grande',sans-serif}.luna-dom-highlighter-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-dom-highlighter-px{color:gray}#luna-dom-highlighter-element-title{position:absolute;z-index:10}.luna-dom-highlighter-tooltip-content{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:#fff;padding:5px 8px;border:1px solid #fff;border-radius:3px;box-sizing:border-box;min-width:100px;max-width:min(300px,100% - 4px);z-index:2;background-clip:padding-box;will-change:transform;text-rendering:optimizeLegibility;pointer-events:none;filter:drop-shadow(0 2px 4px rgba(0,0,0,.35))}.luna-dom-highlighter-tooltip-content .luna-dom-highlighter-tooltip-arrow{background:#fff;width:15px;height:8px;position:absolute}.luna-dom-highlighter-element-info-section{margin-top:12px;margin-bottom:6px}.luna-dom-highlighter-section-name{color:#333;font-weight:500;font-size:10px;text-transform:uppercase;letter-spacing:.05em;line-height:12px}.luna-dom-highlighter-element-info{display:flex;flex-direction:column}.luna-dom-highlighter-element-info-header{display:flex;align-items:center}.luna-dom-highlighter-element-info-body{display:flex;flex-direction:column;padding-top:2px;margin-top:2px}.luna-dom-highlighter-element-info-row{display:flex;line-height:19px}.luna-dom-highlighter-separator-container{display:flex;align-items:center;flex:auto;margin-left:7px}.luna-dom-highlighter-separator{border-top:1px solid #ddd;width:100%}.luna-dom-highlighter-element-info-name{flex-shrink:0;color:#666}.luna-dom-highlighter-element-info-gap{flex:auto}.luna-dom-highlighter-element-info-value-color{display:flex;color:#303942;margin-left:10px;align-items:baseline}.luna-dom-highlighter-a11y-icon{width:16px;height:16px;background-repeat:no-repeat;display:inline-block}.luna-dom-highlighter-element-info-value-contrast{display:flex;align-items:center;text-align:right;color:#303942;margin-left:10px}.luna-dom-highlighter-element-info-value-contrast .luna-dom-highlighter-a11y-icon{margin-left:8px}.luna-dom-highlighter-element-info-value-icon{display:flex;align-items:center}.luna-dom-highlighter-element-info-value-text{text-align:right;color:#303942;margin-left:10px;align-items:baseline;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.luna-dom-highlighter-color-swatch{display:flex;margin-right:2px;width:10px;height:10px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==);line-height:10px}.luna-dom-highlighter-color-swatch-inner{flex:auto;border:1px solid #808002}.luna-dom-highlighter-element-layout-type{margin-right:10px;width:16px;height:16px}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-grid{background-image:url('data:image/svg+xml,<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="9.5" width="4" height="4" stroke="%231A73E8"/><rect x="2.5" y="9.5" width="4" height="4" stroke="%231A73E8"/></svg>')}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-flex{background-image:url('data:image/svg+xml,<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 3.5h8v3H1v-3zm-1 0a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H1a1 1 0 01-1-1v-3zm12 0h3v3h-3v-3zm-1 0a1 1 0 011-1h3a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-3zm-7 6H1v3h3v-3zm-3-1a1 1 0 00-1 1v3a1 1 0 001 1h3a1 1 0 001-1v-3a1 1 0 00-1-1H1zm6 4v-3h8v3H7zm-1-3a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H7a1 1 0 01-1-1v-3z" fill="%231A73E8"/></svg>')}.luna-dom-highlighter-element-description{flex:1 1;font-weight:700;word-wrap:break-word;word-break:break-all}.luna-dom-highlighter-dimensions{color:#737373;text-align:right;margin-left:10px}.luna-dom-highlighter-material-node-width{margin-right:2px}.luna-dom-highlighter-material-node-height{margin-left:2px}.luna-dom-highlighter-material-tag-name{color:#881280}.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id{color:#1a1aa6}.luna-dom-highlighter-contrast-text{width:16px;height:16px;text-align:center;line-height:16px;margin-right:8px;border:1px solid #000;padding:0 1px}.luna-dom-highlighter-a11y-icon-not-ok{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.315 0-6-2.685-6-6 0-1.3875.4725-2.6625 1.2675-3.675l8.4075 8.4075c-1.0125.795-2.2875 1.2675-3.675 1.2675zm4.7325-2.325-8.4075-8.4075c1.0125-.795 2.2875-1.2675 3.675-1.2675 3.315 0 6 2.685 6 6 0 1.3875-.4725 2.6625-1.2675 3.675z" fill="%239e9e9e"/></svg>')}.luna-dom-highlighter-a11y-icon-warning{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m8.25 11.25h1.5v1.5h-1.5zm0-6h1.5v4.5h-1.5zm.7425-3.75c-4.14 0-7.4925 3.36-7.4925 7.5s3.3525 7.5 7.4925 7.5c4.1475 0 7.5075-3.36 7.5075-7.5s-3.36-7.5-7.5075-7.5zm.0075 13.5c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6z" fill="%23e37400"/></svg>')}.luna-dom-highlighter-a11y-icon-ok{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.3075 0-6-2.6925-6-6s2.6925-6 6-6 6 2.6925 6 6-2.6925 6-6 6zm-1.5-4.35-1.95-1.95-1.05 1.05 3 3 6-6-1.05-1.05z" fill="%230ca40c"/></svg>')}@media (forced-colors:active){:root,body{background-color:transparent;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content{border-color:Highlight;background-color:canvas;color:text;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content::after{background-color:Highlight}.luna-dom-highlighter-color-swatch-inner,.luna-dom-highlighter-contrast-text,.luna-dom-highlighter-separator{border-color:Highlight}.luna-dom-highlighter-section-name{color:Highlight}.luna-dom-highlighter-dimensions,.luna-dom-highlighter-element-info-name,.luna-dom-highlighter-element-info-value-color,.luna-dom-highlighter-element-info-value-contrast,.luna-dom-highlighter-element-info-value-icon,.luna-dom-highlighter-element-info-value-text,.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id,.luna-dom-highlighter-material-tag-name{color:canvastext}}

/*# sourceMappingURL=luna-dom-highlighter.css.map*/`},907:function(i,s,o){function d(j,$){($==null||$>j.length)&&($=j.length);for(var ot=0,ht=new Array($);ot<$;ot++)ht[ot]=j[ot];return ht}o.d(s,{Z:function(){return d}})},7326:function(i,s,o){function d(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}o.d(s,{Z:function(){return d}})},5671:function(i,s,o){function d(j,$){if(!(j instanceof $))throw new TypeError("Cannot call a class as a function")}o.d(s,{Z:function(){return d}})},3144:function(i,s,o){o.d(s,{Z:function(){return $}});var d=o(9142);function j(ot,ht){for(var pt=0;pt<ht.length;pt++){var dt=ht[pt];dt.enumerable=dt.enumerable||!1,dt.configurable=!0,"value"in dt&&(dt.writable=!0),Object.defineProperty(ot,(0,d.Z)(dt.key),dt)}}function $(ot,ht,pt){return ht&&j(ot.prototype,ht),pt&&j(ot,pt),Object.defineProperty(ot,"prototype",{writable:!1}),ot}},4942:function(i,s,o){o.d(s,{Z:function(){return j}});var d=o(9142);function j($,ot,ht){return(ot=(0,d.Z)(ot))in $?Object.defineProperty($,ot,{value:ht,enumerable:!0,configurable:!0,writable:!0}):$[ot]=ht,$}},1752:function(i,s,o){o.d(s,{Z:function(){return j}});var d=o(1120);function j(){return j=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function($,ot,ht){var pt=function(gt,wt){for(;!Object.prototype.hasOwnProperty.call(gt,wt)&&(gt=(0,d.Z)(gt))!==null;);return gt}($,ot);if(pt){var dt=Object.getOwnPropertyDescriptor(pt,ot);return dt.get?dt.get.call(arguments.length<3?$:ht):dt.value}},j.apply(this,arguments)}},1120:function(i,s,o){function d(j){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($){return $.__proto__||Object.getPrototypeOf($)},d(j)}o.d(s,{Z:function(){return d}})},9340:function(i,s,o){function d($,ot){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ht,pt){return ht.__proto__=pt,ht},d($,ot)}function j($,ot){if(typeof ot!="function"&&ot!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(ot&&ot.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),Object.defineProperty($,"prototype",{writable:!1}),ot&&d($,ot)}o.d(s,{Z:function(){return j}})},2963:function(i,s,o){o.d(s,{Z:function(){return $}});var d=o(1002),j=o(7326);function $(ot,ht){if(ht&&((0,d.Z)(ht)==="object"||typeof ht=="function"))return ht;if(ht!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(0,j.Z)(ot)}},168:function(i,s,o){function d(j,$){return $||($=j.slice(0)),Object.freeze(Object.defineProperties(j,{raw:{value:Object.freeze($)}}))}o.d(s,{Z:function(){return d}})},9142:function(i,s,o){o.d(s,{Z:function(){return j}});var d=o(1002);function j($){var ot=function(ht,pt){if((0,d.Z)(ht)!=="object"||ht===null)return ht;var dt=ht[Symbol.toPrimitive];if(dt!==void 0){var gt=dt.call(ht,pt||"default");if((0,d.Z)(gt)!=="object")return gt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(pt==="string"?String:Number)(ht)}($,"string");return(0,d.Z)(ot)==="symbol"?ot:String(ot)}},1002:function(i,s,o){function d(j){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},d(j)}o.d(s,{Z:function(){return d}})},181:function(i,s,o){o.d(s,{Z:function(){return j}});var d=o(907);function j($,ot){if($){if(typeof $=="string")return(0,d.Z)($,ot);var ht=Object.prototype.toString.call($).slice(8,-1);return ht==="Object"&&$.constructor&&(ht=$.constructor.name),ht==="Map"||ht==="Set"?Array.from($):ht==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ht)?(0,d.Z)($,ot):void 0}}}},__webpack_module_cache__={};function __webpack_require__(i){var s=__webpack_module_cache__[i];if(s!==void 0)return s.exports;var o=__webpack_module_cache__[i]={id:i,loaded:!1,exports:{}};return __webpack_modules__[i].call(o.exports,o,o.exports,__webpack_require__),o.loaded=!0,o.exports}__webpack_require__.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return __webpack_require__.d(s,{a:s}),s},__webpack_require__.d=function(i,s){for(var o in s)__webpack_require__.o(s,o)&&!__webpack_require__.o(i,o)&&Object.defineProperty(i,o,{enumerable:!0,get:s[o]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.hmd=function(i){return(i=Object.create(i)).children||(i.children=[]),Object.defineProperty(i,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+i.id)}}),i},__webpack_require__.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},__webpack_require__.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(2027);return __webpack_exports__}()})})(eruda$1);var erudaExports=eruda$1.exports;const eruda=getDefaultExportFromCjs(erudaExports);class VikingsMap extends __webpack_exports__Actor{constructor(){super({pos:__webpack_exports__vec(0,0),width:100,height:100})}onInitialize(){this.graphics.add(Resources.MapSprite.toSprite())}}var We=Object.defineProperty,Ue=(i,s,o)=>s in i?We(i,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[s]=o,c=(i,s,o)=>Ue(i,typeof s!="symbol"?s+"":s,o);function oe(i,s){let o;const d=()=>{o!==void 0&&s&&s(o),o=void 0};return[()=>o===void 0?o=i(d):o,d]}function ae(i){const s=M(),{count:o}=s;s.unsubscribe(i),o&&!s.count&&it()}function He(i){return M().subscribe(i),()=>ae(i)}class Oe{constructor(s,o={}){this.scope=s,this.options=o}print(s,...o){const d=new Date,j=Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(d),{textColor:$,bgColor:ot}=this.options,ht="font-weight: bold;padding: 0 5px;border-radius:5px";console[s](`%c${j}%c / %c${this.scope}`,`${ht};background-color: lightblue;color:black`,"",`${ht};${$?`color:${$};`:""}${ot?`background-color:${ot}`:""}`,...o)}error(...s){this.print("error",...s)}log(...s){this.print("log",...s)}}const F=new Oe("SDK",{bgColor:"forestgreen",textColor:"white"});let O=!1;const se=({name:i,payload:s})=>{F.log("Event received:",s?{name:i,payload:s}:{name:i})};function Kt(i){O!==i&&(O=i,He(se))}function Ge(...i){O&&F.log(...i)}class R{constructor(){c(this,"listeners",new Map),c(this,"listenersCount",0),c(this,"subscribeListeners",[])}clear(){this.listeners.clear(),this.subscribeListeners=[]}get count(){return this.listenersCount+this.subscribeListeners.length}emit(s,...o){this.subscribeListeners.forEach(d=>d({event:s,args:o})),(this.listeners.get(s)||[]).forEach(([d,j])=>{d(...o),j&&this.off(s,d)})}on(s,o,d){let j=this.listeners.get(s);return j||this.listeners.set(s,j=[]),j.push([o,d]),this.listenersCount+=1,()=>this.off(s,o)}off(s,o){const d=this.listeners.get(s)||[];for(let j=0;j<d.length;j+=1)if(o===d[j][0]){d.splice(j,1),this.listenersCount-=1;return}}subscribe(s){return this.subscribeListeners.push(s),()=>this.unsubscribe(s)}unsubscribe(s){for(let o=0;o<this.subscribeListeners.length;o+=1)if(this.subscribeListeners[o]===s){this.subscribeListeners.splice(o,1);return}}}function G(i,s,o){return window.addEventListener(i,s,o),()=>window.removeEventListener(i,s,o)}function J(...i){let s=!1;const o=i.flat(1);return[d=>!s&&o.push(d),()=>{s||(s=!0,o.forEach(d=>d()))},s]}class V extends Error{constructor(s,o,d){super(o,{cause:d}),this.type=s,Object.setPrototypeOf(this,V.prototype)}}function f(i,s,o){return new V(i,s,o)}const Fe="ERR_UNKNOWN_ENV",Ye="ERR_UNEXPECTED_TYPE",ce="ERR_PARSE";function E(){return f(Ye,"Value has unexpected type")}class D{constructor(s,o,d){this.parser=s,this.isOptional=o,this.type=d}parse(s){if(!(this.isOptional&&s===void 0))try{return this.parser(s)}catch(o){throw f(ce,`Unable to parse value${this.type?` as ${this.type}`:""}`,o)}}optional(){return this.isOptional=!0,this}}function S(i,s){return()=>new D(i,!1,s)}const b=S(i=>{if(typeof i=="boolean")return i;const s=String(i);if(s==="1"||s==="true")return!0;if(s==="0"||s==="false")return!1;throw E()},"boolean");function he(i,s){const o={};for(const d in i){const j=i[d];if(!j)continue;let $,ot;if(typeof j=="function"||"parse"in j)$=d,ot=typeof j=="function"?j:j.parse.bind(j);else{const{type:ht}=j;$=j.from||d,ot=typeof ht=="function"?ht:ht.parse.bind(ht)}try{const ht=ot(s($));ht!==void 0&&(o[d]=ht)}catch(ht){throw f(ce,`Unable to parse field "${d}"`,ht)}}return o}function pe(i){let s=i;if(typeof s=="string"&&(s=JSON.parse(s)),typeof s!="object"||s===null||Array.isArray(s))throw E();return s}function g(i,s){return new D(o=>{const d=pe(o);return he(i,j=>d[j])},!1,s)}const y=S(i=>{if(typeof i=="number")return i;if(typeof i=="string"){const s=Number(i);if(!Number.isNaN(s))return s}throw E()},"number"),p=S(i=>{if(typeof i=="string"||typeof i=="number")return i.toString();throw E()},"string");function ue(i){return g({eventType:p(),eventData:s=>s}).parse(i)}function et(){["TelegramGameProxy_receiveEvent","TelegramGameProxy","Telegram"].forEach(i=>{delete window[i]})}function z(i,s){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:i,eventData:s}),source:window.parent}))}function tt(){[["TelegramGameProxy_receiveEvent"],["TelegramGameProxy","receiveEvent"],["Telegram","WebView","receiveEvent"]].forEach(i=>{let s=window;i.forEach((o,d,j)=>{if(d===j.length-1){s[o]=z;return}o in s||(s[o]={}),s=s[o]})})}const st={clipboard_text_received:g({req_id:p(),data:i=>i===null?i:p().optional().parse(i)}),custom_method_invoked:g({req_id:p(),result:i=>i,error:p().optional()}),popup_closed:{parse(i){return g({button_id:s=>s==null?void 0:p().parse(s)}).parse(i??{})}},viewport_changed:g({height:y(),width:i=>i==null?window.innerWidth:y().parse(i),is_state_stable:b(),is_expanded:b()})};function nt(){const i=new R,s=new R;s.subscribe(d=>{i.emit("event",{name:d.event,payload:d.args[0]})}),tt();const[,o]=J(et,G("resize",()=>{s.emit("viewport_changed",{width:window.innerWidth,height:window.innerHeight,is_state_stable:!0,is_expanded:!0})}),G("message",d=>{if(d.source!==window.parent)return;let j;try{j=ue(d.data)}catch{return}const{eventType:$,eventData:ot}=j,ht=st[$];try{const pt=ht?ht.parse(ot):ot;s.emit(...pt?[$,pt]:[$])}catch(pt){F.error(`An error occurred processing the "${$}" event from the Telegram application.
Please, file an issue here:
https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose`,j,pt)}}),()=>i.clear(),()=>s.clear());return[{on:s.on.bind(s),off:s.off.bind(s),subscribe(d){return i.on("event",d)},unsubscribe(d){i.off("event",d)},get count(){return s.count+i.count}},o]}const[rt,it]=oe(i=>{const[s,o]=nt(),d=s.off.bind(s);return s.off=(j,$)=>{const{count:ot}=s;d(j,$),ot&&!s.count&&i()},[s,o]},([,i])=>i());function M(){return rt()[0]}function w(i,s,o){return M().on(i,s,o)}function k(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function le(i){return"external"in i&&k(i.external)&&"notify"in i.external&&typeof i.external.notify=="function"}function de(i){return"TelegramWebviewProxy"in i&&k(i.TelegramWebviewProxy)&&"postEvent"in i.TelegramWebviewProxy&&typeof i.TelegramWebviewProxy.postEvent=="function"}function _e(){try{return window.self!==window.top}catch{return!0}}const at="https://web.telegram.org";let fe=at;function ct(){return fe}function A(i,s,o){let d={},j;if(!s&&!o?d={}:s&&o?(d=o,j=s):s&&("targetOrigin"in s?d=s:j=s),Ge("Posting event:",j?{event:i,data:j}:{event:i}),_e())return window.parent.postMessage(JSON.stringify({eventType:i,eventData:j}),d.targetOrigin||ct());if(le(window)){window.external.notify(JSON.stringify({eventType:i,eventData:j}));return}if(de(window)){window.TelegramWebviewProxy.postEvent(i,JSON.stringify(j));return}throw f(Fe,"Unable to determine current environment and possible way to send event. You are probably trying to use Mini Apps method outside the Telegram application environment.")}g({id:y(),type:p(),title:p(),photoUrl:{type:p().optional(),from:"photo_url"},username:p().optional()},"Chat").optional();g({addedToAttachmentMenu:{type:b().optional(),from:"added_to_attachment_menu"},allowsWriteToPm:{type:b().optional(),from:"allows_write_to_pm"},firstName:{type:p(),from:"first_name"},id:y(),isBot:{type:b().optional(),from:"is_bot"},isPremium:{type:b().optional(),from:"is_premium"},languageCode:{type:p().optional(),from:"language_code"},lastName:{type:p().optional(),from:"last_name"},photoUrl:{type:p().optional(),from:"photo_url"},username:p().optional()},"User").optional();function Ps(i=!0){const s=[w("reload_iframe",()=>{A("iframe_will_reload"),window.location.reload()})],o=()=>s.forEach(d=>d());if(i){const d=document.createElement("style");d.id="telegram-custom-styles",document.head.appendChild(d),s.push(w("set_custom_style",j=>{d.innerHTML=j}),()=>document.head.removeChild(d))}return A("iframe_ready",{reload_supported:!0}),o}const WindowHeader=({title:i})=>jsxRuntimeExports.jsxs("div",{className:"window-header",children:[jsxRuntimeExports.jsx("button",{className:"nav-button back-button"}),jsxRuntimeExports.jsx("h1",{children:i}),jsxRuntimeExports.jsx("button",{className:"nav-button close-button",onClick:()=>window.closeWindow()})]});class BaseWindow extends React.Component{render(){const{title:s,children:o}=this.props;return jsxRuntimeExports.jsxs("div",{id:"content",children:[jsxRuntimeExports.jsx(WindowHeader,{title:s}),jsxRuntimeExports.jsx("div",{className:"window-content",children:jsxRuntimeExports.jsx("div",{children:o})})]})}}class BuildingsWindow extends React.Component{render(){return jsxRuntimeExports.jsx(BaseWindow,{title:"Building Info",children:jsxRuntimeExports.jsx(BuildingSelectWindow,{})})}}function BuildingSelectWindow(){const i=Array.from({length:2},(s,o)=>`Item ${o+1}`);return jsxRuntimeExports.jsx("div",{className:"scroll-container",children:i.map((s,o)=>jsxRuntimeExports.jsx("div",{className:"scroll-item building-select-frame",children:jsxRuntimeExports.jsx("div",{className:"scroll-item building-select-item",children:s},o)},o))})}class Building extends __webpack_exports__Actor{constructor(s,o,d=!1){super(),this.image=s,this.canDrag=d,this.pos=o,this.mouseOver=!1}mouseOver;isDragging=!1;clicked=!1;dragStartPointerPos=null;dragStartCameraPos=null;onInitialize(){this.graphics.add(this.image.toSprite()),this.pointer.useGraphicsBounds=!0,this.graphics.use(this.image.toSprite()),this.on("pointerdown",()=>{this.clicked=!0}),this.on("pointerup",()=>{this.clicked&&(this.clicked=!1,window.openWindow(new BuildingsWindow({}).render()))}),this.on("pointerdragstart",s=>{this.canDrag&&(this.isDragging=!0,this.dragStartPointerPos=s.worldPos.clone(),this.dragStartCameraPos=this.pos.clone())}),this.on("pointerdragmove",s=>{this.isDragging&&this.dragStartPointerPos&&this.dragStartCameraPos&&(this.pos=s.worldPos.add(this.dragStartCameraPos.sub(this.dragStartPointerPos)))}),this.on("pointerdragend",()=>{this.isDragging=!1,this.dragStartPointerPos=null,this.dragStartCameraPos=null,console.log(this.pos)}),this.on("pointerenter",()=>{this.mouseOver=!0}),this.on("pointerleave",()=>{this.clicked=!1,this.mouseOver=!1,this.isDragging=!1,this.dragStartPointerPos=null,this.dragStartCameraPos=null})}}const WindowManager=()=>{const[i,s]=reactExports.useState();reactExports.useEffect(()=>(window.openWindow=o,window.closeWindow=d,()=>{delete window.openWindow,delete window.closeWindow}),[]);const o=j=>{s({component:j})},d=()=>{s(i)};return jsxRuntimeExports.jsx("div",{className:"window-manager",children:i==null?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):i.component})};function makeTypeChecker(i){return s=>!!s.type&&s.type.tabsRole===i}const isTab=makeTypeChecker("Tab"),isTabList=makeTypeChecker("TabList"),isTabPanel=makeTypeChecker("TabPanel");function isTabChild(i){return isTab(i)||isTabList(i)||isTabPanel(i)}function deepMap(i,s){return reactExports.Children.map(i,o=>o===null?null:isTabChild(o)?s(o):o.props&&o.props.children&&typeof o.props.children=="object"?reactExports.cloneElement(o,{...o.props,children:deepMap(o.props.children,s)}):o)}function deepForEach(i,s){return reactExports.Children.forEach(i,o=>{o!==null&&(isTab(o)||isTabPanel(o)?s(o):o.props&&o.props.children&&typeof o.props.children=="object"&&(isTabList(o)&&s(o),deepForEach(o.props.children,s)))})}function r(i){var s,o,d="";if(typeof i=="string"||typeof i=="number")d+=i;else if(typeof i=="object")if(Array.isArray(i)){var j=i.length;for(s=0;s<j;s++)i[s]&&(o=r(i[s]))&&(d&&(d+=" "),d+=o)}else for(o in i)i[o]&&(d&&(d+=" "),d+=o);return d}function clsx(){for(var i,s,o=0,d="",j=arguments.length;o<j;o++)(i=arguments[o])&&(s=r(i))&&(d&&(d+=" "),d+=s);return d}function getTabsCount(i){let s=0;return deepForEach(i,o=>{isTab(o)&&s++}),s}function isNode(i){return i&&"getAttribute"in i}function isTabNode(i){return isNode(i)&&i.getAttribute("data-rttab")}function isTabDisabled(i){return isNode(i)&&i.getAttribute("aria-disabled")==="true"}let canUseActiveElement;function determineCanUseActiveElement(i){const s=i||(typeof window<"u"?window:void 0);try{canUseActiveElement=!!(typeof s<"u"&&s.document&&s.document.activeElement)}catch{canUseActiveElement=!1}}const defaultProps$4={className:"react-tabs",focus:!1},UncontrolledTabs=i=>{let s=reactExports.useRef([]),o=reactExports.useRef([]);const d=reactExports.useRef();function j(Ut,Ht){if(Ut<0||Ut>=dt())return;const{onSelect:jt,selectedIndex:Wt}=i;jt(Ut,Wt,Ht)}function $(Ut){const Ht=dt();for(let jt=Ut+1;jt<Ht;jt++)if(!isTabDisabled(gt(jt)))return jt;for(let jt=0;jt<Ut;jt++)if(!isTabDisabled(gt(jt)))return jt;return Ut}function ot(Ut){let Ht=Ut;for(;Ht--;)if(!isTabDisabled(gt(Ht)))return Ht;for(Ht=dt();Ht-- >Ut;)if(!isTabDisabled(gt(Ht)))return Ht;return Ut}function ht(){const Ut=dt();for(let Ht=0;Ht<Ut;Ht++)if(!isTabDisabled(gt(Ht)))return Ht;return null}function pt(){let Ut=dt();for(;Ut--;)if(!isTabDisabled(gt(Ut)))return Ut;return null}function dt(){const{children:Ut}=i;return getTabsCount(Ut)}function gt(Ut){return s.current[`tabs-${Ut}`]}function wt(){let Ut=0;const{children:Ht,disabledTabClassName:jt,focus:Wt,forceRenderTabPanel:ln,selectedIndex:Qt,selectedTabClassName:Xt,selectedTabPanelClassName:on,environment:sn}=i;o.current=o.current||[];let bn=o.current.length-dt();const Zn=reactExports.useId();for(;bn++<0;)o.current.push(`${Zn}${o.current.length}`);return deepMap(Ht,Rn=>{let vn=Rn;if(isTabList(Rn)){let yn=0,Ln=!1;canUseActiveElement==null&&determineCanUseActiveElement(sn);const qn=sn||(typeof window<"u"?window:void 0);canUseActiveElement&&qn&&(Ln=React.Children.toArray(Rn.props.children).filter(isTab).some((_r,Jn)=>qn.document.activeElement===gt(Jn))),vn=reactExports.cloneElement(Rn,{children:deepMap(Rn.props.children,_r=>{const Jn=`tabs-${yn}`,dr=Qt===yn,Un={tabRef:mn=>{s.current[Jn]=mn},id:o.current[yn],selected:dr,focus:dr&&(Wt||Ln)};return Xt&&(Un.selectedClassName=Xt),jt&&(Un.disabledClassName=jt),yn++,reactExports.cloneElement(_r,Un)})})}else if(isTabPanel(Rn)){const yn={id:o.current[Ut],selected:Qt===Ut};ln&&(yn.forceRender=ln),on&&(yn.selectedClassName=on),Ut++,vn=reactExports.cloneElement(Rn,yn)}return vn})}function bt(Ut){const{direction:Ht,disableUpDownKeys:jt,disableLeftRightKeys:Wt}=i;if(Ct(Ut.target)){let{selectedIndex:ln}=i,Qt=!1,Xt=!1;(Ut.code==="Space"||Ut.keyCode===32||Ut.code==="Enter"||Ut.keyCode===13)&&(Qt=!0,Xt=!1,St(Ut)),!Wt&&(Ut.keyCode===37||Ut.code==="ArrowLeft")||!jt&&(Ut.keyCode===38||Ut.code==="ArrowUp")?(Ht==="rtl"?ln=$(ln):ln=ot(ln),Qt=!0,Xt=!0):!Wt&&(Ut.keyCode===39||Ut.code==="ArrowRight")||!jt&&(Ut.keyCode===40||Ut.code==="ArrowDown")?(Ht==="rtl"?ln=ot(ln):ln=$(ln),Qt=!0,Xt=!0):Ut.keyCode===35||Ut.code==="End"?(ln=pt(),Qt=!0,Xt=!0):(Ut.keyCode===36||Ut.code==="Home")&&(ln=ht(),Qt=!0,Xt=!0),Qt&&Ut.preventDefault(),Xt&&j(ln,Ut)}}function St(Ut){let Ht=Ut.target;do if(Ct(Ht)){if(isTabDisabled(Ht))return;const jt=[].slice.call(Ht.parentNode.children).filter(isTabNode).indexOf(Ht);j(jt,Ut);return}while((Ht=Ht.parentNode)!=null)}function Ct(Ut){if(!isTabNode(Ut))return!1;let Ht=Ut.parentElement;do{if(Ht===d.current)return!0;if(Ht.getAttribute("data-rttabs"))break;Ht=Ht.parentElement}while(Ht);return!1}const{children:Et,className:Pt,disabledTabClassName:_t,domRef:yt,focus:xt,forceRenderTabPanel:Dt,onSelect:Ot,selectedIndex:Bt,selectedTabClassName:At,selectedTabPanelClassName:It,environment:Gt,disableUpDownKeys:Jt,disableLeftRightKeys:nn,...Vt}={...defaultProps$4,...i};return React.createElement("div",Object.assign({},Vt,{className:clsx(Pt),onClick:St,onKeyDown:bt,ref:Ut=>{d.current=Ut,yt&&yt(Ut)},"data-rttabs":!0}),wt())};UncontrolledTabs.propTypes={};const MODE_CONTROLLED=0,MODE_UNCONTROLLED=1,defaultProps$3={defaultFocus:!1,focusTabOnClick:!0,forceRenderTabPanel:!1,selectedIndex:null,defaultIndex:null,environment:null,disableUpDownKeys:!1,disableLeftRightKeys:!1},getModeFromProps=i=>i.selectedIndex===null?MODE_UNCONTROLLED:MODE_CONTROLLED,Tabs=i=>{const{children:s,defaultFocus:o,defaultIndex:d,focusTabOnClick:j,onSelect:$,...ot}={...defaultProps$3,...i},[ht,pt]=reactExports.useState(o),[dt]=reactExports.useState(getModeFromProps(ot)),[gt,wt]=reactExports.useState(dt===MODE_UNCONTROLLED?d||0:null);if(reactExports.useEffect(()=>{pt(!1)},[]),dt===MODE_UNCONTROLLED){const Ct=getTabsCount(s);reactExports.useEffect(()=>{if(gt!=null){const Et=Math.max(0,Ct-1);wt(Math.min(gt,Et))}},[Ct])}const bt=(Ct,Et,Pt)=>{typeof $=="function"&&$(Ct,Et,Pt)===!1||(j&&pt(!0),dt===MODE_UNCONTROLLED&&wt(Ct))};let St={...i,...ot};return St.focus=ht,St.onSelect=bt,gt!=null&&(St.selectedIndex=gt),delete St.defaultFocus,delete St.defaultIndex,delete St.focusTabOnClick,React.createElement(UncontrolledTabs,St,s)};Tabs.propTypes={};Tabs.tabsRole="Tabs";const defaultProps$2={className:"react-tabs__tab-list"},TabList=i=>{const{children:s,className:o,...d}={...defaultProps$2,...i};return React.createElement("ul",Object.assign({},d,{className:clsx(o),role:"tablist"}),s)};TabList.tabsRole="TabList";TabList.propTypes={};const DEFAULT_CLASS$1="react-tabs__tab",defaultProps$1={className:DEFAULT_CLASS$1,disabledClassName:`${DEFAULT_CLASS$1}--disabled`,focus:!1,id:null,selected:!1,selectedClassName:`${DEFAULT_CLASS$1}--selected`},Tab=i=>{let s=reactExports.useRef();const{children:o,className:d,disabled:j,disabledClassName:$,focus:ot,id:ht,selected:pt,selectedClassName:dt,tabIndex:gt,tabRef:wt,...bt}={...defaultProps$1,...i};return reactExports.useEffect(()=>{pt&&ot&&s.current.focus()},[pt,ot]),React.createElement("li",Object.assign({},bt,{className:clsx(d,{[dt]:pt,[$]:j}),ref:St=>{s.current=St,wt&&wt(St)},role:"tab",id:`tab${ht}`,"aria-selected":pt?"true":"false","aria-disabled":j?"true":"false","aria-controls":`panel${ht}`,tabIndex:gt||(pt?"0":null),"data-rttab":!0}),o)};Tab.propTypes={};Tab.tabsRole="Tab";const DEFAULT_CLASS="react-tabs__tab-panel",defaultProps={className:DEFAULT_CLASS,forceRender:!1,selectedClassName:`${DEFAULT_CLASS}--selected`},TabPanel=i=>{const{children:s,className:o,forceRender:d,id:j,selected:$,selectedClassName:ot,...ht}={...defaultProps,...i};return React.createElement("div",Object.assign({},ht,{className:clsx(o,{[ot]:$}),role:"tabpanel",id:`panel${j}`,"aria-labelledby":`tab${j}`}),d||$?s:null)};TabPanel.tabsRole="TabPanel";TabPanel.propTypes={};class BuildingInfoWindow extends React.Component{render(){return jsxRuntimeExports.jsx(BaseWindow,{title:"Building Info",children:jsxRuntimeExports.jsx(WindowTabs,{})})}}function WindowTabs(){const[i,s]=reactExports.useState(0);return jsxRuntimeExports.jsxs(Tabs,{selectedIndex:i,onSelect:o=>{console.log(o),s(o)},children:[jsxRuntimeExports.jsxs(TabList,{children:[jsxRuntimeExports.jsx(Tab,{children:"Title 1"}),jsxRuntimeExports.jsx(Tab,{children:"Title 2"})]}),jsxRuntimeExports.jsx(TabPanel,{}),jsxRuntimeExports.jsx(TabPanel,{})]})}class Placement extends __webpack_exports__Actor{constructor(s,o=!1){super({width:150,height:100,color:__webpack_exports__Color.Red}),this.canDrag=o,this.pos=s,this.mouseOver=!0}mouseOver;isDragging=!1;clicked=!1;dragStartPointerPos=null;dragStartCameraPos=null;onInitialize(){this.on("pointerdown",()=>{this.clicked=!0}),this.on("pointerup",()=>{this.clicked&&(this.clicked=!1,window.openWindow(new BuildingInfoWindow({}).render()))}),this.on("pointerdragstart",s=>{this.canDrag&&(this.isDragging=!0,this.dragStartPointerPos=s.worldPos.clone(),this.dragStartCameraPos=this.pos.clone())}),this.on("pointerdragmove",s=>{this.isDragging&&this.dragStartPointerPos&&this.dragStartCameraPos&&(this.pos=s.worldPos.add(this.dragStartCameraPos.sub(this.dragStartPointerPos)))}),this.on("pointerdragend",()=>{this.isDragging=!1,this.dragStartPointerPos=null,this.dragStartCameraPos=null,console.log(this.pos)}),this.on("pointerenter",()=>{this.mouseOver=!0}),this.on("pointerleave",()=>{this.clicked=!1,this.mouseOver=!1,this.isDragging=!1,this.dragStartPointerPos=null,this.dragStartCameraPos=null})}}Kt(!0);class Game extends __webpack_exports__Engine{constructor(){super({displayMode:__webpack_exports__DisplayMode.FillScreen,pointerScope:__webpack_exports__PointerScope.Canvas,antialiasing:!1})}initialize(){}}_e()&&Ps(!0);eruda.init();A("web_app_setup_swipe_behavior",{allow_vertical_swipe:!1});A("web_app_set_header_color",{color_key:"bg_color"});const game=new Game,map=new VikingsMap,palace=new Building(Resources.Palace,new __webpack_exports__Vector(-986,-824));game.initialize();game.start(loader).then(()=>{game.add(map),game.add(palace),createPlacements();let i=new __webpack_exports__BoundingBox(-2048,-1660,2048,1640);game.currentScene.camera.strategy.limitCameraBounds(i),addEventListener("mouseout",()=>{isDragging=!1,dragStartPointerPos=null,dragStartCameraPos=null}),client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(WindowManager,{})}))});let isDragging=!1,dragStartPointerPos=null,dragStartCameraPos=null;game.input.pointers.primary.on("down",i=>{palace.mouseOver||(isDragging=!0,dragStartPointerPos=i.screenPos.clone(),dragStartCameraPos=game.currentScene.camera.pos.clone())});game.input.pointers.primary.on("up",()=>{isDragging=!1,dragStartPointerPos=null,dragStartCameraPos=null});game.input.pointers.primary.on("move",i=>{if(isDragging&&dragStartPointerPos&&dragStartCameraPos){const s=game.screenToWorldCoordinates(i.screenPos).sub(game.screenToWorldCoordinates(dragStartPointerPos));game.currentScene.camera.x=dragStartCameraPos.x-s.x,game.currentScene.camera.y=dragStartCameraPos.y-s.y}});let maxZoom=1,minZoom=.4;game.input.pointers.primary.on("wheel",i=>{zoom(i.deltaY*zoomFactor)});let scale=1;const zoomFactor=.1;function zoom(i){scale+=i,scale=Math.min(Math.max(scale,minZoom),maxZoom),game.currentScene.camera.zoom=scale}let lastDistance=0;addEventListener("touchstart",i=>{i.touches.length===2&&(lastDistance=getDistance(i.touches[0],i.touches[1]))});addEventListener("touchmove",i=>{if(i.touches.length===2){const s=getDistance(i.touches[0],i.touches[1]),o=s-lastDistance;o>0?zoom(zoomFactor):o<0&&zoom(-zoomFactor),lastDistance=s}});addEventListener("touchend",i=>{i.touches.length<2&&(lastDistance=0)});function getDistance(i,s){const o=i.clientX-s.clientX,d=i.clientY-s.clientY;return Math.sqrt(o*o+d*d)}function createPlacements(){const i=new Placement(new __webpack_exports__Vector(-1218,-159));game.add(i);const s=new Placement(new __webpack_exports__Vector(-645,70));game.add(s);const o=new Placement(new __webpack_exports__Vector(-1663,-591));game.add(o)}
