(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))_(x);new MutationObserver(x=>{for(const I of x)if(I.type==="childList")for(const B of I.addedNodes)B.tagName==="LINK"&&B.rel==="modulepreload"&&_(B)}).observe(document,{childList:!0,subtree:!0});function s(x){const I={};return x.integrity&&(I.integrity=x.integrity),x.referrerPolicy&&(I.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?I.credentials="include":x.crossOrigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function _(x){if(x.ep)return;x.ep=!0;const I=s(x);fetch(x.href,I)}})();/*!
 * excalibur - 0.29.3 - 2024-5-5
 * https://github.com/excaliburjs/Excalibur
 * Copyright (c) 2024 Excalibur.js <https://github.com/excaliburjs/Excalibur/graphs/contributors>
 * Licensed BSD-2-Clause
 * @preserve
 */var __webpack_modules__={8851:(v,r,s)=>{s.d(r,{A:()=>N});var _=s(2001),x=s.n(_),I=s(935),B=s.n(I),H=B()(x());H.push([v.id,`/* Buttons styles start */

button#excalibur-play {
  display: inline-block;
  position: relative;
  z-index: 999;
  border-radius: 6px;
  border: none;
  /*border: 3px solid;
    border-color: white;
    box-shadow: 0 0 10px #ccc;*/
  padding: 1rem 1.5rem 1rem 4rem;
  margin: 0;
  text-decoration: none;
  background: #00b233;
  color: #ffffff;
  font-family: sans-serif;
  font-size: 2rem;
  white-space: nowrap;
  line-height: 1;
  cursor: pointer;
  text-align: center;
  transition: background 250ms ease-in-out, transform 150ms ease;
  -webkit-appearance: none;
  -moz-appearance: none;

  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */
  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */
  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */
  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */
  animation: excalibur-button-fadein 200ms;
}

/*
button#excalibur-play {
  display: none;
}*/

button#excalibur-play:after {
  position: absolute;
  content: '';
  border: 8px solid;
  border-color: transparent transparent transparent white;
  left: 35px;
  top: 24px;
  width: 0;
  height: 0;
}

button#excalibur-play:before {
  position: absolute;
  content: '';
  border: 3px solid;
  left: 19px;
  top: 14px;
  border-radius: 20px;
  width: 30px;
  height: 30px;
}

button#excalibur-play:hover,
button#excalibur-play:focus {
  background: #00982c;
}

button#excalibur-play:focus {
  outline: 1px solid #fff;
  outline-offset: -4px;
}

button#excalibur-play:active {
  transform: scale(0.99);
}

@keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Firefox < 16 */
@-moz-keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Safari, Chrome and Opera > 12.1 */
@-webkit-keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Internet Explorer */
@-ms-keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Opera < 12.1 */
@-o-keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
`,"",{version:3,sources:["webpack://./Director/Loader.css"],names:[],mappings:"AAAA,yBAAyB;;AAEzB;EACE,qBAAqB;EACrB,kBAAkB;EAClB,YAAY;EACZ,kBAAkB;EAClB,YAAY;EACZ;;+BAE6B;EAC7B,8BAA8B;EAC9B,SAAS;EACT,qBAAqB;EACrB,mBAAmB;EACnB,cAAc;EACd,uBAAuB;EACvB,eAAe;EACf,mBAAmB;EACnB,cAAc;EACd,eAAe;EACf,kBAAkB;EAClB,8DAA8D;EAC9D,wBAAwB;EACxB,qBAAqB;;EAErB,gDAAgD,EAAE,oCAAoC;EACtF,6CAA6C,EAAE,iBAAiB;EAChE,4CAA4C,EAAE,sBAAsB;EACpE,2CAA2C,EAAE,iBAAiB;EAC9D,wCAAwC;AAC1C;;AAEA;;;EAGE;;AAEF;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,uDAAuD;EACvD,UAAU;EACV,SAAS;EACT,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,UAAU;EACV,SAAS;EACT,mBAAmB;EACnB,WAAW;EACX,YAAY;AACd;;AAEA;;EAEE,mBAAmB;AACrB;;AAEA;EACE,uBAAuB;EACvB,oBAAoB;AACtB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,oCAAoC;AACpC;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,sBAAsB;AACtB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF",sourcesContent:[`/* Buttons styles start */\r
\r
button#excalibur-play {\r
  display: inline-block;\r
  position: relative;\r
  z-index: 999;\r
  border-radius: 6px;\r
  border: none;\r
  /*border: 3px solid;\r
    border-color: white;\r
    box-shadow: 0 0 10px #ccc;*/\r
  padding: 1rem 1.5rem 1rem 4rem;\r
  margin: 0;\r
  text-decoration: none;\r
  background: #00b233;\r
  color: #ffffff;\r
  font-family: sans-serif;\r
  font-size: 2rem;\r
  white-space: nowrap;\r
  line-height: 1;\r
  cursor: pointer;\r
  text-align: center;\r
  transition: background 250ms ease-in-out, transform 150ms ease;\r
  -webkit-appearance: none;\r
  -moz-appearance: none;\r
\r
  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\r
  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\r
  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\r
  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\r
  animation: excalibur-button-fadein 200ms;\r
}\r
\r
/*\r
button#excalibur-play {\r
  display: none;\r
}*/\r
\r
button#excalibur-play:after {\r
  position: absolute;\r
  content: '';\r
  border: 8px solid;\r
  border-color: transparent transparent transparent white;\r
  left: 35px;\r
  top: 24px;\r
  width: 0;\r
  height: 0;\r
}\r
\r
button#excalibur-play:before {\r
  position: absolute;\r
  content: '';\r
  border: 3px solid;\r
  left: 19px;\r
  top: 14px;\r
  border-radius: 20px;\r
  width: 30px;\r
  height: 30px;\r
}\r
\r
button#excalibur-play:hover,\r
button#excalibur-play:focus {\r
  background: #00982c;\r
}\r
\r
button#excalibur-play:focus {\r
  outline: 1px solid #fff;\r
  outline-offset: -4px;\r
}\r
\r
button#excalibur-play:active {\r
  transform: scale(0.99);\r
}\r
\r
@keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Firefox < 16 */\r
@-moz-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Safari, Chrome and Opera > 12.1 */\r
@-webkit-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Internet Explorer */\r
@-ms-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Opera < 12.1 */\r
@-o-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
`],sourceRoot:""}]);const N=H},4296:(v,r,s)=>{s.d(r,{A:()=>N});var _=s(2001),x=s.n(_),I=s(935),B=s.n(I),H=B()(x());H.push([v.id,`
#ex-toast-container {
  position: absolute;
  height: 0;
  min-width: 50%;
  left: 50%;
  top: 0;
}

.ex-toast-message {
  left: -50%;
  position: relative;
  display: flex;
  justify-content: space-between;


  padding: 10px;
  margin-top: 5px;
  font-size: 18px;
  font-family: sans-serif;
  border-radius: 6px;
  border: 3px solid #b7b779;
  background-color: rgb(253, 253, 192);
}


.ex-toast-message button {
  align-self: flex-start;
}`,"",{version:3,sources:["webpack://./Util/Toaster.css"],names:[],mappings:";AACA;EACE,kBAAkB;EAClB,SAAS;EACT,cAAc;EACd,SAAS;EACT,MAAM;AACR;;AAEA;EACE,UAAU;EACV,kBAAkB;EAClB,aAAa;EACb,8BAA8B;;;EAG9B,aAAa;EACb,eAAe;EACf,eAAe;EACf,uBAAuB;EACvB,kBAAkB;EAClB,yBAAyB;EACzB,oCAAoC;AACtC;;;AAGA;EACE,sBAAsB;AACxB",sourcesContent:[`\r
#ex-toast-container {\r
  position: absolute;\r
  height: 0;\r
  min-width: 50%;\r
  left: 50%;\r
  top: 0;\r
}\r
\r
.ex-toast-message {\r
  left: -50%;\r
  position: relative;\r
  display: flex;\r
  justify-content: space-between;\r
\r
\r
  padding: 10px;\r
  margin-top: 5px;\r
  font-size: 18px;\r
  font-family: sans-serif;\r
  border-radius: 6px;\r
  border: 3px solid #b7b779;\r
  background-color: rgb(253, 253, 192);\r
}\r
\r
\r
.ex-toast-message button {\r
  align-self: flex-start;\r
}`],sourceRoot:""}]);const N=H},935:v=>{v.exports=function(r){var s=[];return s.toString=function(){return this.map(function(x){var I="",B=typeof x[5]<"u";return x[4]&&(I+="@supports (".concat(x[4],") {")),x[2]&&(I+="@media ".concat(x[2]," {")),B&&(I+="@layer".concat(x[5].length>0?" ".concat(x[5]):""," {")),I+=r(x),B&&(I+="}"),x[2]&&(I+="}"),x[4]&&(I+="}"),I}).join("")},s.i=function(x,I,B,H,N){typeof x=="string"&&(x=[[null,x,void 0]]);var l={};if(B)for(var d=0;d<this.length;d++){var o=this[d][0];o!=null&&(l[o]=!0)}for(var T=0;T<x.length;T++){var L=[].concat(x[T]);B&&l[L[0]]||(typeof N<"u"&&(typeof L[5]>"u"||(L[1]="@layer".concat(L[5].length>0?" ".concat(L[5]):""," {").concat(L[1],"}")),L[5]=N),I&&(L[2]&&(L[1]="@media ".concat(L[2]," {").concat(L[1],"}")),L[2]=I),H&&(L[4]?(L[1]="@supports (".concat(L[4],") {").concat(L[1],"}"),L[4]=H):L[4]="".concat(H)),s.push(L))}},s}},2001:v=>{v.exports=function(r){var s=r[1],_=r[3];if(!_)return s;if(typeof btoa=="function"){var x=btoa(unescape(encodeURIComponent(JSON.stringify(_)))),I="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(x),B="/*# ".concat(I," */");return[s].concat([B]).join(`
`)}return[s].join(`
`)}},9493:(v,r,s)=>{s(3975);var _=s(2564);v.exports=_("Array","sort")},311:(v,r,s)=>{s(8291);var _=s(9120);v.exports=_.Object.keys},4977:(v,r,s)=>{var _=s(4188),x=s(3174),I=TypeError;v.exports=function(B){if(_(B))return B;throw new I(x(B)+" is not a function")}},3770:(v,r,s)=>{var _=s(831),x=String,I=TypeError;v.exports=function(B){if(_(B))return B;throw new I(x(B)+" is not an object")}},1458:(v,r,s)=>{var _=s(380),x=s(675),I=s(9389),B=function(H){return function(N,l,d){var o=_(N),T=I(o);if(T===0)return!H&&-1;var L=x(d,T),Q;if(H&&l!==l){for(;T>L;)if(Q=o[L++],Q!==Q)return!0}else for(;T>L;L++)if((H||L in o)&&o[L]===l)return H||L||0;return!H&&-1}};v.exports={includes:B(!0),indexOf:B(!1)}},5397:(v,r,s)=>{var _=s(5234);v.exports=function(x,I){var B=[][x];return!!B&&_(function(){B.call(null,I||function(){return 1},1)})}},7825:(v,r,s)=>{var _=s(6881);v.exports=_([].slice)},9295:(v,r,s)=>{var _=s(7825),x=Math.floor,I=function(B,H){var N=B.length;if(N<8)for(var l=1,d,o;l<N;){for(o=l,d=B[l];o&&H(B[o-1],d)>0;)B[o]=B[--o];o!==l++&&(B[o]=d)}else for(var T=x(N/2),L=I(_(B,0,T),H),Q=I(_(B,T),H),P=L.length,q=Q.length,C=0,Z=0;C<P||Z<q;)B[C+Z]=C<P&&Z<q?H(L[C],Q[Z])<=0?L[C++]:Q[Z++]:C<P?L[C++]:Q[Z++];return B};v.exports=I},8689:(v,r,s)=>{var _=s(6881),x=_({}.toString),I=_("".slice);v.exports=function(B){return I(x(B),8,-1)}},5438:(v,r,s)=>{var _=s(9345),x=s(4188),I=s(8689),B=s(4282),H=B("toStringTag"),N=Object,l=I(function(){return arguments}())==="Arguments",d=function(o,T){try{return o[T]}catch{}};v.exports=_?I:function(o){var T,L,Q;return o===void 0?"Undefined":o===null?"Null":typeof(L=d(T=N(o),H))=="string"?L:l?I(T):(Q=I(T))==="Object"&&x(T.callee)?"Arguments":Q}},8657:(v,r,s)=>{var _=s(4418),x=s(3168),I=s(9304),B=s(4466);v.exports=function(H,N,l){for(var d=x(N),o=B.f,T=I.f,L=0;L<d.length;L++){var Q=d[L];!_(H,Q)&&!(l&&_(l,Q))&&o(H,Q,T(N,Q))}}},8088:(v,r,s)=>{var _=s(6893),x=s(4466),I=s(9123);v.exports=_?function(B,H,N){return x.f(B,H,I(1,N))}:function(B,H,N){return B[H]=N,B}},9123:v=>{v.exports=function(r,s){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:s}}},7509:(v,r,s)=>{var _=s(4188),x=s(4466),I=s(4530),B=s(4798);v.exports=function(H,N,l,d){d||(d={});var o=d.enumerable,T=d.name!==void 0?d.name:N;if(_(l)&&I(l,T,d),d.global)o?H[N]=l:B(N,l);else{try{d.unsafe?H[N]&&(o=!0):delete H[N]}catch{}o?H[N]=l:x.f(H,N,{value:l,enumerable:!1,configurable:!d.nonConfigurable,writable:!d.nonWritable})}return H}},4798:(v,r,s)=>{var _=s(1488),x=Object.defineProperty;v.exports=function(I,B){try{x(_,I,{value:B,configurable:!0,writable:!0})}catch{_[I]=B}return B}},1305:(v,r,s)=>{var _=s(3174),x=TypeError;v.exports=function(I,B){if(!delete I[B])throw new x("Cannot delete property "+_(B)+" of "+_(I))}},6893:(v,r,s)=>{var _=s(5234);v.exports=!_(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},5926:(v,r,s)=>{var _=s(1488),x=s(831),I=_.document,B=x(I)&&x(I.createElement);v.exports=function(H){return B?I.createElement(H):{}}},8807:(v,r,s)=>{var _=s(4109),x=_.match(/firefox\/(\d+)/i);v.exports=!!x&&+x[1]},5661:(v,r,s)=>{var _=s(4109);v.exports=/MSIE|Trident/.test(_)},4109:v=>{v.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},3749:(v,r,s)=>{var _=s(1488),x=s(4109),I=_.process,B=_.Deno,H=I&&I.versions||B&&B.version,N=H&&H.v8,l,d;N&&(l=N.split("."),d=l[0]>0&&l[0]<4?1:+(l[0]+l[1])),!d&&x&&(l=x.match(/Edge\/(\d+)/),(!l||l[1]>=74)&&(l=x.match(/Chrome\/(\d+)/),l&&(d=+l[1]))),v.exports=d},3589:(v,r,s)=>{var _=s(4109),x=_.match(/AppleWebKit\/(\d+)\./);v.exports=!!x&&+x[1]},2564:(v,r,s)=>{var _=s(1488),x=s(6881);v.exports=function(I,B){return x(_[I].prototype[B])}},1274:v=>{v.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},5613:(v,r,s)=>{var _=s(1488),x=s(9304).f,I=s(8088),B=s(7509),H=s(4798),N=s(8657),l=s(8489);v.exports=function(d,o){var T=d.target,L=d.global,Q=d.stat,P,q,C,Z,j,dt;if(L?q=_:Q?q=_[T]||H(T,{}):q=_[T]&&_[T].prototype,q)for(C in o){if(j=o[C],d.dontCallGetSet?(dt=x(q,C),Z=dt&&dt.value):Z=q[C],P=l(L?C:T+(Q?".":"#")+C,d.forced),!P&&Z!==void 0){if(typeof j==typeof Z)continue;N(j,Z)}(d.sham||Z&&Z.sham)&&I(j,"sham",!0),B(q,C,j,d)}}},5234:v=>{v.exports=function(r){try{return!!r()}catch{return!0}}},9055:(v,r,s)=>{var _=s(5234);v.exports=!_(function(){var x=function(){}.bind();return typeof x!="function"||x.hasOwnProperty("prototype")})},9944:(v,r,s)=>{var _=s(9055),x=Function.prototype.call;v.exports=_?x.bind(x):function(){return x.apply(x,arguments)}},2735:(v,r,s)=>{var _=s(6893),x=s(4418),I=Function.prototype,B=_&&Object.getOwnPropertyDescriptor,H=x(I,"name"),N=H&&function(){}.name==="something",l=H&&(!_||_&&B(I,"name").configurable);v.exports={EXISTS:H,PROPER:N,CONFIGURABLE:l}},6881:(v,r,s)=>{var _=s(9055),x=Function.prototype,I=x.call,B=_&&x.bind.bind(I,I);v.exports=_?B:function(H){return function(){return I.apply(H,arguments)}}},5604:(v,r,s)=>{var _=s(1488),x=s(4188),I=function(B){return x(B)?B:void 0};v.exports=function(B,H){return arguments.length<2?I(_[B]):_[B]&&_[B][H]}},2913:(v,r,s)=>{var _=s(4977),x=s(4318);v.exports=function(I,B){var H=I[B];return x(H)?void 0:_(H)}},1488:function(v,r,s){var _=function(x){return x&&x.Math===Math&&x};v.exports=_(typeof globalThis=="object"&&globalThis)||_(typeof window=="object"&&window)||_(typeof self=="object"&&self)||_(typeof s.g=="object"&&s.g)||_(typeof this=="object"&&this)||function(){return this}()||Function("return this")()},4418:(v,r,s)=>{var _=s(6881),x=s(3628),I=_({}.hasOwnProperty);v.exports=Object.hasOwn||function(H,N){return I(x(H),N)}},7588:v=>{v.exports={}},9622:(v,r,s)=>{var _=s(6893),x=s(5234),I=s(5926);v.exports=!_&&!x(function(){return Object.defineProperty(I("div"),"a",{get:function(){return 7}}).a!==7})},7568:(v,r,s)=>{var _=s(6881),x=s(5234),I=s(8689),B=Object,H=_("".split);v.exports=x(function(){return!B("z").propertyIsEnumerable(0)})?function(N){return I(N)==="String"?H(N,""):B(N)}:B},3029:(v,r,s)=>{var _=s(6881),x=s(4188),I=s(2694),B=_(Function.toString);x(I.inspectSource)||(I.inspectSource=function(H){return B(H)}),v.exports=I.inspectSource},3086:(v,r,s)=>{var _=s(5945),x=s(1488),I=s(831),B=s(8088),H=s(4418),N=s(2694),l=s(168),d=s(7588),o="Object already initialized",T=x.TypeError,L=x.WeakMap,Q,P,q,C=function(Y){return q(Y)?P(Y):Q(Y,{})},Z=function(Y){return function(W){var u;if(!I(W)||(u=P(W)).type!==Y)throw new T("Incompatible receiver, "+Y+" required");return u}};if(_||N.state){var j=N.state||(N.state=new L);j.get=j.get,j.has=j.has,j.set=j.set,Q=function(Y,W){if(j.has(Y))throw new T(o);return W.facade=Y,j.set(Y,W),W},P=function(Y){return j.get(Y)||{}},q=function(Y){return j.has(Y)}}else{var dt=l("state");d[dt]=!0,Q=function(Y,W){if(H(Y,dt))throw new T(o);return W.facade=Y,B(Y,dt,W),W},P=function(Y){return H(Y,dt)?Y[dt]:{}},q=function(Y){return H(Y,dt)}}v.exports={set:Q,get:P,has:q,enforce:C,getterFor:Z}},4188:v=>{var r=typeof document=="object"&&document.all;v.exports=typeof r>"u"&&r!==void 0?function(s){return typeof s=="function"||s===r}:function(s){return typeof s=="function"}},8489:(v,r,s)=>{var _=s(5234),x=s(4188),I=/#|\.prototype\./,B=function(o,T){var L=N[H(o)];return L===d?!0:L===l?!1:x(T)?_(T):!!T},H=B.normalize=function(o){return String(o).replace(I,".").toLowerCase()},N=B.data={},l=B.NATIVE="N",d=B.POLYFILL="P";v.exports=B},4318:v=>{v.exports=function(r){return r==null}},831:(v,r,s)=>{var _=s(4188);v.exports=function(x){return typeof x=="object"?x!==null:_(x)}},1942:v=>{v.exports=!1},6032:(v,r,s)=>{var _=s(5604),x=s(4188),I=s(4578),B=s(9809),H=Object;v.exports=B?function(N){return typeof N=="symbol"}:function(N){var l=_("Symbol");return x(l)&&I(l.prototype,H(N))}},9389:(v,r,s)=>{var _=s(7611);v.exports=function(x){return _(x.length)}},4530:(v,r,s)=>{var _=s(6881),x=s(5234),I=s(4188),B=s(4418),H=s(6893),N=s(2735).CONFIGURABLE,l=s(3029),d=s(3086),o=d.enforce,T=d.get,L=String,Q=Object.defineProperty,P=_("".slice),q=_("".replace),C=_([].join),Z=H&&!x(function(){return Q(function(){},"length",{value:8}).length!==8}),j=String(String).split("String"),dt=v.exports=function(Y,W,u){P(L(W),0,7)==="Symbol("&&(W="["+q(L(W),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),u&&u.getter&&(W="get "+W),u&&u.setter&&(W="set "+W),(!B(Y,"name")||N&&Y.name!==W)&&(H?Q(Y,"name",{value:W,configurable:!0}):Y.name=W),Z&&u&&B(u,"arity")&&Y.length!==u.arity&&Q(Y,"length",{value:u.arity});try{u&&B(u,"constructor")&&u.constructor?H&&Q(Y,"prototype",{writable:!1}):Y.prototype&&(Y.prototype=void 0)}catch{}var O=o(Y);return B(O,"source")||(O.source=C(j,typeof W=="string"?W:"")),Y};Function.prototype.toString=dt(function(){return I(this)&&T(this).source||l(this)},"toString")},142:v=>{var r=Math.ceil,s=Math.floor;v.exports=Math.trunc||function(x){var I=+x;return(I>0?s:r)(I)}},4466:(v,r,s)=>{var _=s(6893),x=s(9622),I=s(3315),B=s(3770),H=s(2344),N=TypeError,l=Object.defineProperty,d=Object.getOwnPropertyDescriptor,o="enumerable",T="configurable",L="writable";r.f=_?I?function(P,q,C){if(B(P),q=H(q),B(C),typeof P=="function"&&q==="prototype"&&"value"in C&&L in C&&!C[L]){var Z=d(P,q);Z&&Z[L]&&(P[q]=C.value,C={configurable:T in C?C[T]:Z[T],enumerable:o in C?C[o]:Z[o],writable:!1})}return l(P,q,C)}:l:function(P,q,C){if(B(P),q=H(q),B(C),x)try{return l(P,q,C)}catch{}if("get"in C||"set"in C)throw new N("Accessors not supported");return"value"in C&&(P[q]=C.value),P}},9304:(v,r,s)=>{var _=s(6893),x=s(9944),I=s(4416),B=s(9123),H=s(380),N=s(2344),l=s(4418),d=s(9622),o=Object.getOwnPropertyDescriptor;r.f=_?o:function(L,Q){if(L=H(L),Q=N(Q),d)try{return o(L,Q)}catch{}if(l(L,Q))return B(!x(I.f,L,Q),L[Q])}},5629:(v,r,s)=>{var _=s(1843),x=s(1274),I=x.concat("length","prototype");r.f=Object.getOwnPropertyNames||function(H){return _(H,I)}},156:(v,r)=>{r.f=Object.getOwnPropertySymbols},4578:(v,r,s)=>{var _=s(6881);v.exports=_({}.isPrototypeOf)},1843:(v,r,s)=>{var _=s(6881),x=s(4418),I=s(380),B=s(1458).indexOf,H=s(7588),N=_([].push);v.exports=function(l,d){var o=I(l),T=0,L=[],Q;for(Q in o)!x(H,Q)&&x(o,Q)&&N(L,Q);for(;d.length>T;)x(o,Q=d[T++])&&(~B(L,Q)||N(L,Q));return L}},7137:(v,r,s)=>{var _=s(1843),x=s(1274);v.exports=Object.keys||function(B){return _(B,x)}},4416:(v,r)=>{var s={}.propertyIsEnumerable,_=Object.getOwnPropertyDescriptor,x=_&&!s.call({1:2},1);r.f=x?function(B){var H=_(this,B);return!!H&&H.enumerable}:s},2287:(v,r,s)=>{var _=s(9944),x=s(4188),I=s(831),B=TypeError;v.exports=function(H,N){var l,d;if(N==="string"&&x(l=H.toString)&&!I(d=_(l,H))||x(l=H.valueOf)&&!I(d=_(l,H))||N!=="string"&&x(l=H.toString)&&!I(d=_(l,H)))return d;throw new B("Can't convert object to primitive value")}},3168:(v,r,s)=>{var _=s(5604),x=s(6881),I=s(5629),B=s(156),H=s(3770),N=x([].concat);v.exports=_("Reflect","ownKeys")||function(d){var o=I.f(H(d)),T=B.f;return T?N(o,T(d)):o}},9120:(v,r,s)=>{var _=s(1488);v.exports=_},9509:(v,r,s)=>{var _=s(4318),x=TypeError;v.exports=function(I){if(_(I))throw new x("Can't call method on "+I);return I}},168:(v,r,s)=>{var _=s(746),x=s(6209),I=_("keys");v.exports=function(B){return I[B]||(I[B]=x(B))}},2694:(v,r,s)=>{var _=s(1942),x=s(1488),I=s(4798),B="__core-js_shared__",H=v.exports=x[B]||I(B,{});(H.versions||(H.versions=[])).push({version:"3.36.1",mode:_?"pure":"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.1/LICENSE",source:"https://github.com/zloirock/core-js"})},746:(v,r,s)=>{var _=s(2694);v.exports=function(x,I){return _[x]||(_[x]=I||{})}},8944:(v,r,s)=>{var _=s(3749),x=s(5234),I=s(1488),B=I.String;v.exports=!!Object.getOwnPropertySymbols&&!x(function(){var H=Symbol("symbol detection");return!B(H)||!(Object(H)instanceof Symbol)||!Symbol.sham&&_&&_<41})},675:(v,r,s)=>{var _=s(6744),x=Math.max,I=Math.min;v.exports=function(B,H){var N=_(B);return N<0?x(N+H,0):I(N,H)}},380:(v,r,s)=>{var _=s(7568),x=s(9509);v.exports=function(I){return _(x(I))}},6744:(v,r,s)=>{var _=s(142);v.exports=function(x){var I=+x;return I!==I||I===0?0:_(I)}},7611:(v,r,s)=>{var _=s(6744),x=Math.min;v.exports=function(I){var B=_(I);return B>0?x(B,9007199254740991):0}},3628:(v,r,s)=>{var _=s(9509),x=Object;v.exports=function(I){return x(_(I))}},290:(v,r,s)=>{var _=s(9944),x=s(831),I=s(6032),B=s(2913),H=s(2287),N=s(4282),l=TypeError,d=N("toPrimitive");v.exports=function(o,T){if(!x(o)||I(o))return o;var L=B(o,d),Q;if(L){if(T===void 0&&(T="default"),Q=_(L,o,T),!x(Q)||I(Q))return Q;throw new l("Can't convert object to primitive value")}return T===void 0&&(T="number"),H(o,T)}},2344:(v,r,s)=>{var _=s(290),x=s(6032);v.exports=function(I){var B=_(I,"string");return x(B)?B:B+""}},9345:(v,r,s)=>{var _=s(4282),x=_("toStringTag"),I={};I[x]="z",v.exports=String(I)==="[object z]"},2618:(v,r,s)=>{var _=s(5438),x=String;v.exports=function(I){if(_(I)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return x(I)}},3174:v=>{var r=String;v.exports=function(s){try{return r(s)}catch{return"Object"}}},6209:(v,r,s)=>{var _=s(6881),x=0,I=Math.random(),B=_(1 .toString);v.exports=function(H){return"Symbol("+(H===void 0?"":H)+")_"+B(++x+I,36)}},9809:(v,r,s)=>{var _=s(8944);v.exports=_&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},3315:(v,r,s)=>{var _=s(6893),x=s(5234);v.exports=_&&x(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},5945:(v,r,s)=>{var _=s(1488),x=s(4188),I=_.WeakMap;v.exports=x(I)&&/native code/.test(String(I))},4282:(v,r,s)=>{var _=s(1488),x=s(746),I=s(4418),B=s(6209),H=s(8944),N=s(9809),l=_.Symbol,d=x("wks"),o=N?l.for||l:l&&l.withoutSetter||B;v.exports=function(T){return I(d,T)||(d[T]=H&&I(l,T)?l[T]:o("Symbol."+T)),d[T]}},3975:(v,r,s)=>{var _=s(5613),x=s(6881),I=s(4977),B=s(3628),H=s(9389),N=s(1305),l=s(2618),d=s(5234),o=s(9295),T=s(5397),L=s(8807),Q=s(5661),P=s(3749),q=s(3589),C=[],Z=x(C.sort),j=x(C.push),dt=d(function(){C.sort(void 0)}),Y=d(function(){C.sort(null)}),W=T("sort"),u=!d(function(){if(P)return P<70;if(!(L&&L>3)){if(Q)return!0;if(q)return q<603;var ht="",pt,ft,$,At;for(pt=65;pt<76;pt++){switch(ft=String.fromCharCode(pt),pt){case 66:case 69:case 70:case 72:$=3;break;case 68:case 71:$=4;break;default:$=2}for(At=0;At<47;At++)C.push({k:ft+At,v:$})}for(C.sort(function(_t,ut){return ut.v-_t.v}),At=0;At<C.length;At++)ft=C[At].k.charAt(0),ht.charAt(ht.length-1)!==ft&&(ht+=ft);return ht!=="DGBEFHACIJK"}}),O=dt||!Y||!W||!u,X=function(ht){return function(pt,ft){return ft===void 0?-1:pt===void 0?1:ht!==void 0?+ht(pt,ft)||0:l(pt)>l(ft)?1:-1}};_({target:"Array",proto:!0,forced:O},{sort:function(pt){pt!==void 0&&I(pt);var ft=B(this);if(u)return pt===void 0?Z(ft):Z(ft,pt);var $=[],At=H(ft),_t,ut;for(ut=0;ut<At;ut++)ut in ft&&j($,ft[ut]);for(o($,X(pt)),_t=H($),ut=0;ut<_t;)ft[ut]=$[ut++];for(;ut<At;)N(ft,ut++);return ft}})},8291:(v,r,s)=>{var _=s(5613),x=s(3628),I=s(7137),B=s(5234),H=B(function(){I(1)});_({target:"Object",stat:!0,forced:H},{keys:function(l){return I(x(l))}})}},__webpack_module_cache__={};function __webpack_require__(v){var r=__webpack_module_cache__[v];if(r!==void 0)return r.exports;var s=__webpack_module_cache__[v]={id:v,exports:{}};return __webpack_modules__[v].call(s.exports,s,s.exports,__webpack_require__),s.exports}__webpack_require__.n=v=>{var r=v&&v.__esModule?()=>v.default:()=>v;return __webpack_require__.d(r,{a:r}),r};__webpack_require__.d=(v,r)=>{for(var s in r)__webpack_require__.o(r,s)&&!__webpack_require__.o(v,s)&&Object.defineProperty(v,s,{enumerable:!0,get:r[s]})};__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();__webpack_require__.o=(v,r)=>Object.prototype.hasOwnProperty.call(v,r);__webpack_require__.r=v=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(v,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{__webpack_require__.d(__webpack_exports__,{eKr:()=>rr,yVm:()=>$n,a7j:()=>ao,U_w:()=>Uo,JF2:()=>Pn,htg:()=>Xn,HXL:()=>ea,mcg:()=>is,Agj:()=>Xs,u6S:()=>ko,x7M:()=>$t,X55:()=>vn,m3M:()=>hr,aE5:()=>Do,YJU:()=>rn,eZi:()=>Qo,GNv:()=>Fi,Y56:()=>zr,_0v:()=>Rr,vhs:()=>Qr,Z8b:()=>fo,Yfw:()=>Hi,IcQ:()=>ut,Rl2:()=>Ln,kgJ:()=>zo,GTT:()=>da,ypY:()=>Or,i7d:()=>Xt,fQ3:()=>Dt,HlI:()=>rs,jlt:()=>Br,VQc:()=>Ns,zD7:()=>Go,I0I:()=>cr,AUF:()=>Tn,JoF:()=>cn,MlA:()=>Cs,PZh:()=>Hn,qA:()=>Fs,CrD:()=>_n,dQK:()=>Js,D3r:()=>En,Qpo:()=>Vn,D9n:()=>Bn,b6v:()=>jn,mvh:()=>Lo,Bpo:()=>je,Q1f:()=>X,IKv:()=>ca,fcV:()=>vr,Glf:()=>la,uAl:()=>ss,ElT:()=>Ss,MPu:()=>$o,Z8r:()=>$,QSL:()=>Jo,sPV:()=>Hs,nAn:()=>mn,zCU:()=>ds,QrV:()=>mi,fF9:()=>nl,xI8:()=>er,yar:()=>Ds,SP7:()=>ha,oRy:()=>qn,f5X:()=>ta,V1c:()=>Me,Mlx:()=>ua,ZCo:()=>Qn,Vy3:()=>as,J5p:()=>pa,mL_:()=>Ws,Guw:()=>_o,VKx:()=>Nn,N5j:()=>Ai,pgY:()=>Ao,OP3:()=>Lr,rl5:()=>Aa,eod:()=>Fa,q5Z:()=>wi,YUC:()=>An,saR:()=>Mn,hvr:()=>Yo,Qol:()=>$r,Wf4:()=>po,JCs:()=>As,gJV:()=>nn,fWD:()=>Mt,Va_:()=>Fr,N$8:()=>pn,_jQ:()=>za,rxj:()=>sr,rhv:()=>ir,wCu:()=>js,HAp:()=>To,Zy1:()=>cs,Qev:()=>Ga,bkB:()=>l,wfL:()=>ws,sVA:()=>r,$Gs:()=>fs,CJ0:()=>ai,NWh:()=>hi,tWi:()=>nr,xAj:()=>Cn,zWh:()=>go,i_4:()=>sl,iIx:()=>B,c9e:()=>Xr,KQV:()=>Zn,weH:()=>ps,jXp:()=>el,zzY:()=>Mr,yRQ:()=>Dr,MtE:()=>fa,rPj:()=>ro,KLc:()=>N,Fir:()=>Ri,V5f:()=>Es,Xj7:()=>gn,Wud:()=>io,FVg:()=>ri,g5Y:()=>ee,YQB:()=>bt,KPb:()=>Pt,nHK:()=>eo,TX_:()=>Ka,r3n:()=>so,vYh:()=>It,hnk:()=>Ms,D2R:()=>hn,n1o:()=>Ko,RLG:()=>ve,fBU:()=>lr,Adb:()=>yt,bEs:()=>Gt,wCy:()=>qt,CbD:()=>Wt,x_C:()=>Rn,pde:()=>_,pGf:()=>Oo,ibQ:()=>ra,QlN:()=>Fn,shR:()=>to,Yjk:()=>ia,_u1:()=>Ua,OBI:()=>ma,klh:()=>jr,s3S:()=>Ro,D$R:()=>Gr,xth:()=>ks,JU7:()=>ja,h9x:()=>wt,N1A:()=>Wo,e_k:()=>zs,aHM:()=>oi,tlv:()=>Ir,Vi9:()=>zt,ieR:()=>jt,$bb:()=>pt,VyI:()=>ft,imn:()=>Yi,uqu:()=>Ot,QnL:()=>Ae,vnc:()=>or,wk_:()=>Tr,GH0:()=>us,_1r:()=>Vo,l0X:()=>co,HHX:()=>Sr,tjk:()=>Yn,rWe:()=>Sn,j9l:()=>xr,NVp:()=>Un,cPK:()=>ls,XoL:()=>sa,RmF:()=>xs,DXI:()=>gr,tCD:()=>Ha,oGn:()=>ba,J3D:()=>wo,vCJ:()=>Xo,f9l:()=>Nr,AQx:()=>zi,v9m:()=>Co,yRJ:()=>na,EU6:()=>No,m3O:()=>On,Ryz:()=>Dn,OxP:()=>Ur,LEs:()=>no,Ec:()=>d,Pi5:()=>xo,gmH:()=>zn,tS:()=>qo,XxX:()=>Qs,bCz:()=>Te,nYS:()=>bi,yiT:()=>Us,NHl:()=>Bs,mO8:()=>gt,PXI:()=>Rs,bn5:()=>xn,Ywr:()=>ln,cMd:()=>_i,Bs6:()=>kn,G0k:()=>vs,pyn:()=>Ft,QeM:()=>ms,aPX:()=>Qa,ITP:()=>Vs,BY0:()=>en,MFw:()=>Os,sBn:()=>Ui,S3L:()=>Hr,XKQ:()=>gs,ESI:()=>on,uxz:()=>K,o8N:()=>T,u_r:()=>Xi,RlV:()=>Zs,gVA:()=>Mo,M_G:()=>dr,GRB:()=>oo,kM6:()=>lo,dO8:()=>Vr,jgM:()=>Qi,FWq:()=>xe,s3j:()=>Ve,hlw:()=>Jr,B7e:()=>ho,H_X:()=>dn,S_d:()=>pr,U7E:()=>ur,Z58:()=>In,yh2:()=>Ma,ff$:()=>xi,cWi:()=>At,NBt:()=>Kr,oNz:()=>Si,QlU:()=>aa,Xey:()=>tr,jft:()=>ll,Mtr:()=>$e,ypk:()=>Gs,mnM:()=>_t,bAZ:()=>sn,ABN:()=>Er,VK6:()=>qr,kxk:()=>Nt,DT1:()=>se,FLG:()=>te,qN_:()=>jo,Z37:()=>_s,FtL:()=>yo,Z6X:()=>va,iQT:()=>Wi,ziO:()=>_r,OEF:()=>ui,uuE:()=>Di,tiv:()=>bs,T$Y:()=>ga,EYj:()=>fr,nOB:()=>Pr,Tap:()=>Tt,FAs:()=>bo,B_P:()=>vo,aA5:()=>Po,M4G:()=>Wn,l$l:()=>_a,dLy:()=>os,WZP:()=>fi,eB6:()=>Zo,nFK:()=>$s,l9z:()=>ei,YOF:()=>be,yhB:()=>L,J0N:()=>x,Miz:()=>u,Bj4:()=>Ki,Rcs:()=>ii,vJ4:()=>Le,TqC:()=>Jn,nM0:()=>Ne,X1u:()=>Gi,SpZ:()=>Ls,DX8:()=>mr,Yx$:()=>Fo,HK4:()=>Ar,SE$:()=>C,qE8:()=>q,Pz7:()=>wa,sX_:()=>H,JuI:()=>Q,Nl$:()=>Yr,OwT:()=>Wa,P$G:()=>Ja,mHV:()=>Ya,Fx_:()=>Xa,WFC:()=>$a,aDq:()=>Za,jIg:()=>Va,UH3:()=>qa,K6X:()=>Bo,C1Y:()=>Ts,Aw1:()=>ar,A8$:()=>So,hsx:()=>Gn,l9E:()=>mo,aSf:()=>an,Zex:()=>xa,mXP:()=>ol,vt$:()=>re,hCA:()=>Vt,pjR:()=>ti,U43:()=>Y,pSZ:()=>W,y17:()=>dt,jVr:()=>rl,_SZ:()=>P,xWn:()=>Z,ehJ:()=>j,t6s:()=>O,Eyn:()=>v});var v={};__webpack_require__.r(v),__webpack_require__.d(v,{getAttributeComponentSize:()=>Ke,getAttributePointerType:()=>pi,getGLTypeFromSource:()=>De,getGlTypeSizeBytes:()=>yi,isAttributeInSource:()=>ci});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{ActionCompleteEvent:()=>rr,ActionStartEvent:()=>Pn,ActivateEvent:()=>is,CollisionEndEvent:()=>Fs,CollisionPostSolveEvent:()=>Vn,CollisionPreSolveEvent:()=>Bn,CollisionStartEvent:()=>jn,ContactEndEvent:()=>Hs,ContactStartEvent:()=>ds,DeactivateEvent:()=>er,EnterTriggerEvent:()=>sr,EnterViewPortEvent:()=>ir,EventTypes:()=>ws,ExitTriggerEvent:()=>nr,ExitViewPortEvent:()=>Cn,GameEvent:()=>Ri,GameStartEvent:()=>Es,GameStopEvent:()=>gn,GamepadAxisEvent:()=>ri,GamepadButtonEvent:()=>ee,GamepadConnectEvent:()=>bt,GamepadDisconnectEvent:()=>Pt,HiddenEvent:()=>ve,InitializeEvent:()=>Rn,KillEvent:()=>ks,PostCollisionEvent:()=>bi,PostDebugDrawEvent:()=>Us,PostDrawEvent:()=>Bs,PostFrameEvent:()=>gt,PostKillEvent:()=>Rs,PostTransformDrawEvent:()=>xn,PostUpdateEvent:()=>ln,PreCollisionEvent:()=>_i,PreDebugDrawEvent:()=>kn,PreDrawEvent:()=>vs,PreFrameEvent:()=>Ft,PreKillEvent:()=>ms,PreTransformDrawEvent:()=>Vs,PreUpdateEvent:()=>en,VisibleEvent:()=>Ne});var s={};__webpack_require__.r(s),__webpack_require__.d(s,{circle:()=>Qt,line:()=>ki,point:()=>Vi,roundRect:()=>Rt,vector:()=>Ci});var _={};__webpack_require__.r(_),__webpack_require__.d(_,{Axes:()=>zr,Buttons:()=>Or,Gamepad:()=>io,Gamepads:()=>eo,KeyEvent:()=>jr,Keyboard:()=>Ro,Keys:()=>Gr,NativePointerButton:()=>Yn,PointerButton:()=>On,PointerComponent:()=>Dn,PointerEvent:()=>Ur,PointerEventReceiver:()=>no,PointerScope:()=>d,PointerSystem:()=>xo,PointerType:()=>zn,WheelDeltaMode:()=>mr,WheelEvent:()=>Fo});var x={};__webpack_require__.r(x),__webpack_require__.d(x,{ConsoleAppender:()=>$,DrawUtil:()=>s,EasingFunctions:()=>As,LogLevel:()=>pt,Logger:()=>ft,Observable:()=>ls,ScreenAppender:()=>At,addItemToArray:()=>vt,contains:()=>lt,delay:()=>Jt,fail:()=>kt,getPosition:()=>Ct,omit:()=>Ut,removeItemFromArray:()=>xt}),__webpack_require__(9493),__webpack_require__(311);function I(){if(typeof window>"u"&&(window={audioContext:function(){}}),typeof window<"u"&&!window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(h){window.setInterval(h,1e3/60)}),typeof window<"u"&&!window.cancelAnimationFrame&&(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(){}),typeof window<"u"&&!window.AudioContext){if(window.webkitAudioContext){const t=window.webkitAudioContext.prototype.decodeAudioData;window.webkitAudioContext.prototype.decodeAudioData=function(e){return new Promise((i,n)=>{t.call(this,e,i,n)})}}window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext||window.oAudioContext}typeof window<"u"&&!window.devicePixelRatio&&(window.devicePixelRatio=window.devicePixelRatio||1)}class B{static useCanvasGraphicsContext(){B.enable("use-canvas-context")}static freeze(){B._FROZEN=!0}static _reset(){B._FROZEN=!1,B._FLAGS={}}static enable(t){if(this._FROZEN)throw Error("Feature flags can only be enabled before Engine constructor time");B._FLAGS[t]=!0}static disable(t){if(this._FROZEN)throw Error("Feature flags can only be disabled before Engine constructor time");B._FLAGS[t]=!1}static isEnabled(t){return!!B._FLAGS[t]}static show(){return Object.keys(B._FLAGS)}}B._FROZEN=!1,B._FLAGS={};function H(h,t){return{type:h,value:t}}class N{constructor(){this._isCompleted=!1,this.promise=new Promise((t,e)=>{this._resolver=t,this._rejecter=e})}get isCompleted(){return this._isCompleted}resolve(t){this._isCompleted||(this._isCompleted=!0,this._resolver(t))}reject(t){this._isCompleted||(this._isCompleted=!0,this._rejecter(t))}}class l{constructor(){this._paused=!1,this._listeners={},this._listenersOnce={},this._pipes=[]}clear(){this._listeners={},this._listenersOnce={},this._pipes.length=0}on(t,e){var i;return this._listeners[t]=(i=this._listeners[t])!==null&&i!==void 0?i:[],this._listeners[t].push(e),{close:()=>this.off(t,e)}}once(t,e){var i;return this._listenersOnce[t]=(i=this._listenersOnce[t])!==null&&i!==void 0?i:[],this._listenersOnce[t].push(e),{close:()=>this.off(t,e)}}off(t,e){var i,n;if(e){const a=(i=this._listeners[t])===null||i===void 0?void 0:i.filter(U=>U!==e);this._listeners[t]=a;const m=(n=this._listenersOnce[t])===null||n===void 0?void 0:n.filter(U=>U!==e);this._listenersOnce[t]=m}else delete this._listeners[t]}emit(t,e){var i;if(this._paused)return;(i=this._listeners[t])===null||i===void 0||i.forEach(a=>a(e));const n=this._listenersOnce[t];this._listenersOnce[t]=[],n&&n.forEach(a=>a(e)),this._pipes.forEach(a=>{a.emit(t,e)})}pipe(t){if(this===t)throw Error("Cannot pipe to self");return this._pipes.push(t),{close:()=>{const e=this._pipes.indexOf(t);e>-1&&this._pipes.splice(e,1)}}}unpipe(t){const e=this._pipes.indexOf(t);e>-1&&this._pipes.splice(e,1)}pause(){this._paused=!0}unpause(){this._paused=!1}}var d;(function(h){h.Canvas="Canvas",h.Document="Document"})(d||(d={}));const o=4294967295;class T{constructor(t){this.seed=t,this._lowerMask=2147483647,this._upperMask=2147483648,this._w=32,this._n=624,this._m=397,this._a=2567483615,this._u=11,this._s=7,this._b=2636928640,this._t=15,this._c=4022730752,this._l=18,this._f=1812433253,this._mt=new Array(this._n),this._mt[0]=(t||Date.now())>>>0;for(let e=1;e<this._n;e++){const i=this._mt[e-1]^this._mt[e-1]>>>this._w-2;this._mt[e]=(this._f*((i&4294901760)>>>16)<<16)+this._f*(i&65535)+e>>>0}this._index=this._n}_twist(){const t=[0,this._a];let e=0,i=0;for(;i<this._n-this._m;i++)e=this._mt[i]&this._upperMask|this._mt[i+1]&this._lowerMask,this._mt[i]=this._mt[i+this._m]^e>>>1^t[e&1]&o;for(;i<this._n-1;i++)e=this._mt[i]&this._upperMask|this._mt[i+1]&this._lowerMask,this._mt[i]=this._mt[i+(this._m-this._n)]^e>>>1^t[e&1]&o;e=this._mt[this._n-1]&this._upperMask|this._mt[0]&this._lowerMask,this._mt[this._n-1]=this._mt[this._m-1]^e>>>1^t[e&1]&o,this._index=0}nextInt(){this._index>=this._n&&this._twist();let t=this._mt[this._index++];return t^=t>>>this._u,t^=t<<this._s&this._b,t^=t<<this._t&this._c,t^=t>>>this._l,t>>>0}next(){return this.nextInt()*(1/4294967296)}floating(t,e){return(e-t)*this.next()+t}integer(t,e){return Math.floor((e-t+1)*this.next()+t)}bool(t=.5){return this.next()<=t}pickOne(t){return t[this.integer(0,t.length-1)]}pickSet(t,e,i=!1){return i?this._pickSetWithDuplicates(t,e):this._pickSetWithoutDuplicates(t,e)}_pickSetWithoutDuplicates(t,e){if(e>t.length||e<0)throw new Error("Invalid number of elements to pick, must pick a value 0 < n <= length");if(e===t.length)return t;const i=new Array(e);let n=0;const a=t.slice(0);for(;n<e;){const m=this.integer(0,a.length-1);i[n++]=a[m],a.splice(m,1)}return i}_pickSetWithDuplicates(t,e){if(e<0)throw new Error("Invalid number of elements to pick, must pick a value 0 <= n < MAX_INT");const i=new Array(e);for(let n=0;n<e;n++)i[n]=this.pickOne(t);return i}shuffle(t){const e=t.slice(0);let i=null;for(let n=0;n<e.length-2;n++){const a=this.integer(n,e.length-1);i=e[n],e[n]=e[a],e[a]=i}return e}range(t,e,i){const n=new Array(t);for(let a=0;a<t;a++)n[a]=this.integer(e,i);return n}d4(){return this.integer(1,4)}d6(){return this.integer(1,6)}d8(){return this.integer(1,8)}d10(){return this.integer(1,10)}d12(){return this.integer(1,12)}d20(){return this.integer(1,20)}}const L=Math.PI*2;function Q(h){return h>=0?h-Math.floor(h):h-Math.ceil(h)}function P(h){return h===0?0:h<0?-1:1}function q(h,t,e){return Math.min(Math.max(t,h),e)}function C(h){let t=h;if(h>L)for(;t>L;)t-=L;if(h<0)for(;t<0;)t+=L;return t}function Z(h){return 180/Math.PI*h}function j(h){return h/180*Math.PI}const dt=(h,t)=>Array.from(new Array(t-h+1),(e,i)=>i+h);function Y(h,t,e=new T){return e?e.floating(h,t):h+Math.random()*(t-h)}function W(h,t,e=new T){return e?e.integer(h,t):Math.round(Y(h,t))}class u{static get Zero(){return new u(0,0)}static get One(){return new u(1,1)}static get Half(){return new u(.5,.5)}static get Up(){return new u(0,-1)}static get Down(){return new u(0,1)}static get Left(){return new u(-1,0)}static get Right(){return new u(1,0)}static fromAngle(t){return new u(Math.cos(t),Math.sin(t))}static isValid(t){return!(t==null||isNaN(t.x)||isNaN(t.y)||t.x===1/0||t.y===1/0||t.x===-1/0||t.y===-1/0)}static distance(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}static min(t,e){return new u(Math.min(t.x,e.x),Math.min(t.y,e.y))}static max(t,e){return new u(Math.max(t.x,e.x),Math.max(t.y,e.y))}constructor(t,e){this._x=0,this._y=0,this._x=t,this._y=e}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}setTo(t,e){this.x=t,this.y=e}equals(t,e=u.EQUALS_EPSILON){return Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e}distance(t){if(!t)return Math.sqrt(this.x*this.x+this.y*this.y);const e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)}squareDistance(t){t||(t=u.Zero);const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}clampMagnitude(t){const e=this.size,i=q(e,0,t);return this.size=i,this}get size(){return this.distance()}set size(t){const e=this.normalize().scale(t);this.setTo(e.x,e.y)}normalize(){const t=this.distance();return t>0?new u(this.x/t,this.y/t):new u(0,1)}average(t){return this.add(t).scale(.5)}scale(t,e){const i=e||new u(0,0);return t instanceof u?(i.x=this.x*t.x,i.y=this.y*t.y):(i.x=this.x*t,i.y=this.y*t),i}add(t,e){return e?(e.x=this.x+t.x,e.y=this.y+t.y,e):new u(this.x+t.x,this.y+t.y)}sub(t){return new u(this.x-t.x,this.y-t.y)}addEqual(t){return this.setTo(this.x+t.x,this.y+t.y),this}subEqual(t){return this.setTo(this.x-t.x,this.y-t.y),this}scaleEqual(t){return this.setTo(this.x*t,this.y*t),this}dot(t){return this.x*t.x+this.y*t.y}cross(t){if(t instanceof u)return this.x*t.y-this.y*t.x;if(typeof t=="number")return new u(t*this.y,-t*this.x)}static cross(t,e){return new u(-t*e.y,t*e.x)}perpendicular(){return new u(this.y,-this.x)}normal(){return this.perpendicular().normalize()}negate(){return this.scale(-1)}toAngle(){return C(Math.atan2(this.y,this.x))}rotate(t,e){e||(e=new u(0,0));const i=Math.sin(t),n=Math.cos(t),a=n*(this.x-e.x)-i*(this.y-e.y)+e.x,m=i*(this.x-e.x)+n*(this.y-e.y)+e.y;return new u(a,m)}clone(t){const e=t??new u(0,0);return e.x=this.x,e.y=this.y,e}toString(t){return t?`(${this.x.toFixed(t)}, ${this.y.toFixed(t)})`:`(${this.x}, ${this.y})`}}u.EQUALS_EPSILON=.001;function O(h,t){return new u(h,t)}class X{constructor(t,e,i,n){this.r=t,this.g=e,this.b=i,this.a=n??1}static fromRGB(t,e,i,n){return new X(t,e,i,n)}static fromRGBString(t){const e=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)/i;let i=null;if(i=t.match(e)){const n=parseInt(i[1],10),a=parseInt(i[2],10),m=parseInt(i[3],10);let U=1;return i[4]&&(U=parseFloat(i[4])),new X(n,a,m,U)}else throw new Error("Invalid rgb/a string: "+t)}static fromHex(t){const e=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i;let i=null;if(i=t.match(e)){const n=parseInt(i[1],16),a=parseInt(i[2],16),m=parseInt(i[3],16);let U=1;return i[4]&&(U=parseInt(i[4],16)/255),new X(n,a,m,U)}else throw new Error("Invalid hex string: "+t)}static fromHSL(t,e,i,n=1){return new ht(t,e,i,n).toRGBA()}lighten(t=.1){const e=ht.fromRGBA(this.r,this.g,this.b,this.a);return e.l+=(1-e.l)*t,e.toRGBA()}darken(t=.1){const e=ht.fromRGBA(this.r,this.g,this.b,this.a);return e.l-=e.l*t,e.toRGBA()}saturate(t=.1){const e=ht.fromRGBA(this.r,this.g,this.b,this.a);return e.s+=e.s*t,e.toRGBA()}desaturate(t=.1){const e=ht.fromRGBA(this.r,this.g,this.b,this.a);return e.s-=e.s*t,e.toRGBA()}multiply(t){const e=t.r/255*this.r/255*255,i=t.g/255*this.g/255*255,n=t.b/255*this.b/255*255,a=t.a*this.a;return new X(e,i,n,a)}screen(t){const e=t.invert(),i=t.invert();return e.multiply(i).invert()}invert(){return new X(255-this.r,255-this.g,255-this.b,1-this.a)}average(t){const e=(t.r+this.r)/2,i=(t.g+this.g)/2,n=(t.b+this.b)/2,a=(t.a+this.a)/2;return new X(e,i,n,a)}equal(t){return this.toString()===t.toString()}toString(t="rgb"){switch(t){case"rgb":return this.toRGBA();case"hsl":return this.toHSLA();case"hex":return this.toHex();default:throw new Error("Invalid Color format")}}_componentToHex(t){const e=Math.max(Math.round(t),0).toString(16);return e.length===1?"0"+e:e}toHex(){let t="#"+this._componentToHex(this.r)+this._componentToHex(this.g)+this._componentToHex(this.b);return this.a!==1&&(t+=this._componentToHex(this.a*255)),t}toRGBA(){const t=String(this.r.toFixed(0))+", "+String(this.g.toFixed(0))+", "+String(this.b.toFixed(0));return this.a!==void 0||this.a!==null?"rgba("+t+", "+String(this.a)+")":"rgb("+t+")"}toHSLA(){return ht.fromRGBA(this.r,this.g,this.b,this.a).toString()}fillStyle(){return this.toString()}clone(){return new X(this.r,this.g,this.b,this.a)}static get Black(){return X.fromHex("#000000")}static get White(){return X.fromHex("#FFFFFF")}static get Gray(){return X.fromHex("#808080")}static get LightGray(){return X.fromHex("#D3D3D3")}static get DarkGray(){return X.fromHex("#A9A9A9")}static get Yellow(){return X.fromHex("#FFFF00")}static get Orange(){return X.fromHex("#FFA500")}static get Red(){return X.fromHex("#FF0000")}static get Vermilion(){return X.fromHex("#FF5B31")}static get Rose(){return X.fromHex("#FF007F")}static get Magenta(){return X.fromHex("#FF00FF")}static get Violet(){return X.fromHex("#7F00FF")}static get Blue(){return X.fromHex("#0000FF")}static get Azure(){return X.fromHex("#007FFF")}static get Cyan(){return X.fromHex("#00FFFF")}static get Viridian(){return X.fromHex("#59978F")}static get Green(){return X.fromHex("#00FF00")}static get Chartreuse(){return X.fromHex("#7FFF00")}static get Transparent(){return X.fromHex("#FFFFFF00")}static get ExcaliburBlue(){return X.fromHex("#176BAA")}}class ht{constructor(t,e,i,n){this.h=t,this.s=e,this.l=i,this.a=n}static hue2rgb(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+(e-t)*6*i:i<1/2?e:i<2/3?t+(e-t)*(2/3-i)*6:t}static fromRGBA(t,e,i,n){t/=255,e/=255,i/=255;const a=Math.max(t,e,i),m=Math.min(t,e,i);let U,mt;const Et=(a+m)/2;if(a===m)U=mt=0;else{const St=a-m;switch(mt=Et>.5?St/(2-a-m):St/(a+m),a){case t:U=(e-i)/St+(e<i?6:0);break;case e:U=(i-t)/St+2;break;case i:U=(t-e)/St+4;break}U/=6}return new ht(U,mt,Et,n)}toRGBA(){let t,e,i;if(this.s===0)t=e=i=this.l;else{const n=this.l<.5?this.l*(1+this.s):this.l+this.s-this.l*this.s,a=2*this.l-n;t=ht.hue2rgb(a,n,this.h+1/3),e=ht.hue2rgb(a,n,this.h),i=ht.hue2rgb(a,n,this.h-1/3)}return new X(t*255,e*255,i*255,this.a)}toString(){const t=this.h.toFixed(0),e=this.s.toFixed(0),i=this.l.toFixed(0),n=this.a.toFixed(0);return`hsla(${t}, ${e}, ${i}, ${n})`}}var pt;(function(h){h[h.Debug=0]="Debug",h[h.Info=1]="Info",h[h.Warn=2]="Warn",h[h.Error=3]="Error",h[h.Fatal=4]="Fatal"})(pt||(pt={}));class ft{constructor(){if(this._appenders=[],this.defaultLevel=pt.Info,this._logOnceSet=new Set,ft._INSTANCE)throw new Error("Logger is a singleton");return ft._INSTANCE=this,ft._INSTANCE.addAppender(new $),ft._INSTANCE}static getInstance(){return ft._INSTANCE==null&&(ft._INSTANCE=new ft),ft._INSTANCE}addAppender(t){this._appenders.push(t)}clearAppenders(){this._appenders.length=0}_log(t,e){t==null&&(t=this.defaultLevel);const i=this._appenders.length;for(let n=0;n<i;n++)t>=this.defaultLevel&&this._appenders[n].log(t,e)}_logOnce(t,e){const i=t+e.join("+");this._logOnceSet.has(i)||(this._logOnceSet.add(i),this._log(t,e))}debug(...t){this._log(pt.Debug,t)}debugOnce(...t){this._logOnce(pt.Debug,t)}info(...t){this._log(pt.Info,t)}infoOnce(...t){this._logOnce(pt.Info,t)}warn(...t){this._log(pt.Warn,t)}warnOnce(...t){this._logOnce(pt.Warn,t)}error(...t){this._log(pt.Error,t)}errorOnce(...t){this._logOnce(pt.Error,t)}fatal(...t){this._log(pt.Fatal,t)}fatalOnce(...t){this._logOnce(pt.Fatal,t)}}ft._INSTANCE=null;class ${log(t,e){if(!console&&!console.log&&console.warn&&console.error)return;const i=[];i.unshift.apply(i,e),i.unshift("["+pt[t]+"] : "),t<pt.Warn?console.log.apply?console.log.apply(console,i):console.log(i.join(" ")):t<pt.Error?console.warn.apply?console.warn.apply(console,i):console.warn(i.join(" ")):console.error.apply?console.error.apply(console,i):console.error(i.join(" "))}}class At{constructor(t){var e,i;this._messages=[],this._pos=10,this._color=X.Black,this._options=t,this.canvas=document.createElement("canvas"),this._ctx=this.canvas.getContext("2d"),this.canvas.style.position="absolute",this.canvas.style.zIndex=(i=(e=t.zIndex)===null||e===void 0?void 0:e.toString())!==null&&i!==void 0?i:"99",document.body.appendChild(this.canvas),this._positionScreenAppenderCanvas(),t.engine.screen.events.on("resize",()=>{this._positionScreenAppenderCanvas()})}_positionScreenAppenderCanvas(){var t,e,i,n;const a=this._options;this.canvas.width=(t=a.width)!==null&&t!==void 0?t:a.engine.screen.resolution.width,this.canvas.height=(e=a.height)!==null&&e!==void 0?e:a.engine.screen.resolution.height,this.canvas.style.position="absolute";const m=a.engine.screen.screenToPageCoordinates(O(0,0));this.canvas.style.left=m.x+"px",this.canvas.style.top=m.y+"px",this._pos=(i=a.xPos)!==null&&i!==void 0?i:this._pos,this._color=(n=a.color)!==null&&n!==void 0?n:this._color}log(t,e){const i=e.join(",");this._ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this._messages.unshift("["+pt[t]+"] : "+i);let n=10;this._messages=this._messages.slice(0,1e3);for(let a=0;a<this._messages.length;a++)this._ctx.fillStyle=this._color.toRGBA(),this._ctx.fillText(this._messages[a],this._pos,n),n+=10}}var _t;(function(h){h.None="None",h.Top="Top",h.Bottom="Bottom",h.Left="Left",h.Right="Right"})(_t||(_t={})),function(h){function t(i){return i===h.Top?h.Bottom:i===h.Bottom?h.Top:i===h.Left?h.Right:i===h.Right?h.Left:h.None}h.getOpposite=t;function e(i){const n=[u.Left,u.Right,u.Up,u.Down],a=[h.Left,h.Right,h.Top,h.Bottom];let m=-Number.MAX_VALUE,U=-1;for(let mt=0;mt<n.length;mt++)n[mt].dot(i)>m&&(m=n[mt].dot(i),U=mt);return a[U]}h.fromDirection=e}(_t||(_t={}));class ut{constructor(t=0,e=0,i=0,n=0){this._points=[],typeof t=="object"?(this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom):typeof t=="number"&&(this.left=t,this.top=e,this.right=i,this.bottom=n)}clone(){return new ut(this.left,this.top,this.right,this.bottom)}static getSideFromIntersection(t){return t&&t?Math.abs(t.x)>Math.abs(t.y)?t.x<0?_t.Right:_t.Left:t.y<0?_t.Bottom:_t.Top:_t.None}static fromPoints(t){let e=1/0,i=1/0,n=-1/0,a=-1/0;for(let m=0;m<t.length;m++)t[m].x<e&&(e=t[m].x),t[m].x>n&&(n=t[m].x),t[m].y<i&&(i=t[m].y),t[m].y>a&&(a=t[m].y);return new ut(e,i,n,a)}static fromDimension(t,e,i=u.Half,n=u.Zero){return new ut(-t*i.x+n.x,-e*i.y+n.y,t-t*i.x+n.x,e-e*i.y+n.y)}get width(){return this.right-this.left}get height(){return this.bottom-this.top}hasZeroDimensions(){return this.width===0||this.height===0}get center(){return new u((this.left+this.right)/2,(this.top+this.bottom)/2)}get topLeft(){return new u(this.left,this.top)}get bottomRight(){return new u(this.right,this.bottom)}get topRight(){return new u(this.right,this.top)}get bottomLeft(){return new u(this.left,this.bottom)}translate(t){return new ut(this.left+t.x,this.top+t.y,this.right+t.x,this.bottom+t.y)}rotate(t,e=u.Zero){const i=this.getPoints().map(n=>n.rotate(t,e));return ut.fromPoints(i)}scale(t,e=u.Zero){const i=this.translate(e);return new ut(i.left*t.x,i.top*t.y,i.right*t.x,i.bottom*t.y)}transform(t){const e=t.data[0]*this.left,i=t.data[1]*this.left,n=t.data[0]*this.right,a=t.data[1]*this.right,m=t.data[2]*this.top,U=t.data[3]*this.top,mt=t.data[2]*this.bottom,Et=t.data[3]*this.bottom,St=t.getPosition(),Lt=Math.min(e,n)+Math.min(m,mt)+St.x,Kt=Math.min(i,a)+Math.min(U,Et)+St.y,ne=Math.max(e,n)+Math.max(m,mt)+St.x,ae=Math.max(i,a)+Math.max(U,Et)+St.y;return new ut({left:Lt,top:Kt,right:ne,bottom:ae})}getPerimeter(){const t=this.width,e=this.height;return 2*(t+e)}getPoints(){return(this._left!==this.left||this._right!==this.right||this._top!==this.top||this._bottom!==this.bottom)&&(this._points.length=0,this._points.push(new u(this.left,this.top)),this._points.push(new u(this.right,this.top)),this._points.push(new u(this.right,this.bottom)),this._points.push(new u(this.left,this.bottom)),this._left=this.left,this._right=this.right,this._top=this.top,this._bottom=this.bottom),this._points}rayCast(t,e=1/0){let i=-1/0,n=1/0;const a=t.dir.x===0?Number.MAX_VALUE:1/t.dir.x,m=t.dir.y===0?Number.MAX_VALUE:1/t.dir.y,U=(this.left-t.pos.x)*a,mt=(this.right-t.pos.x)*a;i=Math.min(U,mt),n=Math.max(U,mt);const Et=(this.top-t.pos.y)*m,St=(this.bottom-t.pos.y)*m;return i=Math.max(i,Math.min(Et,St)),n=Math.min(n,Math.max(Et,St)),n>=Math.max(0,i)&&i<e}rayCastTime(t,e=1/0){let i=-1/0,n=1/0;const a=t.dir.x===0?Number.MAX_VALUE:1/t.dir.x,m=t.dir.y===0?Number.MAX_VALUE:1/t.dir.y,U=(this.left-t.pos.x)*a,mt=(this.right-t.pos.x)*a;i=Math.min(U,mt),n=Math.max(U,mt);const Et=(this.top-t.pos.y)*m,St=(this.bottom-t.pos.y)*m;return i=Math.max(i,Math.min(Et,St)),n=Math.min(n,Math.max(Et,St)),n>=Math.max(0,i)&&i<e?i:-1}contains(t){return t instanceof u?this.left<=t.x&&this.top<=t.y&&this.bottom>=t.y&&this.right>=t.x:t instanceof ut?this.left<=t.left&&this.top<=t.top&&t.bottom<=this.bottom&&t.right<=this.right:!1}combine(t){return new ut(Math.min(this.left,t.left),Math.min(this.top,t.top),Math.max(this.right,t.right),Math.max(this.bottom,t.bottom))}get dimensions(){return new u(this.width,this.height)}overlaps(t,e){const i=e||0;if(t.hasZeroDimensions())return this.contains(t);if(this.hasZeroDimensions())return t.contains(this);const n=this.combine(t);return n.width+i<t.width+this.width&&n.height+i<t.height+this.height}intersect(t){const e=this.combine(t);if(e.width<t.width+this.width&&e.height<t.height+this.height&&!e.dimensions.equals(t.dimensions)&&!e.dimensions.equals(this.dimensions)){let i=0;this.right>=t.left&&this.right<=t.right?i=t.left-this.right:i=t.right-this.left;let n=0;return this.top<=t.bottom&&this.top>=t.top?n=t.bottom-this.top:n=t.top-this.bottom,Math.abs(i)<Math.abs(n)?new u(i,0):new u(0,n)}else if(e.dimensions.equals(t.dimensions)||e.dimensions.equals(this.dimensions)){let i=0;this.width-t.width>=0?this.right-t.right<=t.left-this.left?i=t.left-this.right:i=t.right-this.left:t.right-this.right<=this.left-t.left?i=this.left-t.right:i=this.right-t.left;let n=0;return this.height-t.height>=0?this.bottom-t.bottom<=t.top-this.top?n=t.top-this.bottom:n=t.bottom-this.top:t.bottom-this.bottom<=this.top-t.top?n=this.top-t.bottom:n=this.bottom-t.top,Math.abs(i)<Math.abs(n)?new u(i,0):new u(0,n)}else return null}intersectWithSide(t){const e=this.intersect(t);return ut.getSideFromIntersection(e)}draw(t,e=X.Yellow){t.debug.drawRect(this.left,this.top,this.width,this.height,{color:e})}}function Ct(h){if(h){const t=h.getBoundingClientRect();return O(t.x+window.scrollX,t.y+window.scrollY)}return u.Zero}function vt(h,t){return t.indexOf(h)===-1?(t.push(h),!0):!1}function xt(h,t){let e=-1;return(e=t.indexOf(h))>-1?(t.splice(e,1),!0):!1}function lt(h,t){for(let e=0;e<h.length;e++)if(h[e]===t)return!0;return!1}function kt(h){throw new Error(h)}function Jt(h,t){var e;const i=new N;return((e=t?.schedule.bind(t))!==null&&e!==void 0?e:setTimeout)(()=>{i.resolve()},h),i.promise}function Ut(h,t){const e={};for(const i in h)t.includes(i)||(e[i]=h[i]);return e}var Ae;(function(h){h[h.X=12]="X",h[h.Y=13]="Y"})(Ae||(Ae={}));class Ot{constructor(){this.data=new Float32Array(16),this._scaleX=1,this._scaleSignX=1,this._scaleY=1,this._scaleSignY=1}static ortho(t,e,i,n,a,m){const U=new Ot;return U.data[0]=2/(e-t),U.data[1]=0,U.data[2]=0,U.data[3]=0,U.data[4]=0,U.data[5]=2/(n-i),U.data[6]=0,U.data[7]=0,U.data[8]=0,U.data[9]=0,U.data[10]=-2/(m-a),U.data[11]=0,U.data[12]=-(e+t)/(e-t),U.data[13]=-(n+i)/(n-i),U.data[14]=-(m+a)/(m-a),U.data[15]=1,U}clone(t){const e=t||new Ot;return e.data[0]=this.data[0],e.data[1]=this.data[1],e.data[2]=this.data[2],e.data[3]=this.data[3],e.data[4]=this.data[4],e.data[5]=this.data[5],e.data[6]=this.data[6],e.data[7]=this.data[7],e.data[8]=this.data[8],e.data[9]=this.data[9],e.data[10]=this.data[10],e.data[11]=this.data[11],e.data[12]=this.data[12],e.data[13]=this.data[13],e.data[14]=this.data[14],e.data[15]=this.data[15],e}toDOMMatrix(){return new DOMMatrix([...this.data])}static fromFloat32Array(t){const e=new Ot;return e.data=t,e}static identity(){const t=new Ot;return t.data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=0,t.data[4]=0,t.data[5]=1,t.data[6]=0,t.data[7]=0,t.data[8]=0,t.data[9]=0,t.data[10]=1,t.data[11]=0,t.data[12]=0,t.data[13]=0,t.data[14]=0,t.data[15]=1,t}reset(){const t=this;return t.data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=0,t.data[4]=0,t.data[5]=1,t.data[6]=0,t.data[7]=0,t.data[8]=0,t.data[9]=0,t.data[10]=1,t.data[11]=0,t.data[12]=0,t.data[13]=0,t.data[14]=0,t.data[15]=1,t}static translation(t,e){const i=Ot.identity();return i.data[12]=t,i.data[13]=e,i}static scale(t,e){const i=Ot.identity();return i.data[0]=t,i.data[5]=e,i.data[10]=1,i.data[15]=1,i}static rotation(t){const e=Ot.identity();return e.data[0]=Math.cos(t),e.data[4]=-Math.sin(t),e.data[1]=Math.sin(t),e.data[5]=Math.cos(t),e}multiply(t,e){if(t instanceof u){const i=e||new u(0,0),n=t,a=n.x*this.data[0]+n.y*this.data[4]+this.data[12],m=n.x*this.data[1]+n.y*this.data[5]+this.data[13];return i.x=a,i.y=m,i}else{const i=e||new Ot,n=t,a=this.data[0],m=this.data[1],U=this.data[2],mt=this.data[3],Et=this.data[4],St=this.data[5],Lt=this.data[6],Kt=this.data[7],ne=this.data[8],ae=this.data[9],ke=this.data[10],ze=this.data[11],ye=this.data[12],we=this.data[13],He=this.data[14],Pe=this.data[15],vi=n.data[0],Ji=n.data[1],Xe=n.data[2],$i=n.data[3],Is=n.data[4],qs=n.data[5],bn=n.data[6],yn=n.data[7],wn=n.data[8],fn=n.data[9],Ks=n.data[10],tn=n.data[11],Ni=n.data[12],br=n.data[13],yr=n.data[14],wr=n.data[15];i.data[0]=a*vi+Et*Ji+ne*Xe+ye*$i,i.data[1]=m*vi+St*Ji+ae*Xe+we*$i,i.data[2]=U*vi+Lt*Ji+ke*Xe+He*$i,i.data[3]=mt*vi+Kt*Ji+ze*Xe+Pe*$i,i.data[4]=a*Is+Et*qs+ne*bn+ye*yn,i.data[5]=m*Is+St*qs+ae*bn+we*yn,i.data[6]=U*Is+Lt*qs+ke*bn+He*yn,i.data[7]=mt*Is+Kt*qs+ze*bn+Pe*yn,i.data[8]=a*wn+Et*fn+ne*Ks+ye*tn,i.data[9]=m*wn+St*fn+ae*Ks+we*tn,i.data[10]=U*wn+Lt*fn+ke*Ks+He*tn,i.data[11]=mt*wn+Kt*fn+ze*Ks+Pe*tn,i.data[12]=a*Ni+Et*br+ne*yr+ye*wr,i.data[13]=m*Ni+St*br+ae*yr+we*wr,i.data[14]=U*Ni+Lt*br+ke*yr+He*wr,i.data[15]=mt*Ni+Kt*br+ze*yr+Pe*wr;const Wr=this.getScale();return i._scaleSignX=P(Wr.x)*P(i._scaleSignX),i._scaleSignY=P(Wr.y)*P(i._scaleSignY),i}}translate(t,e){const i=this.data[0],n=this.data[1],a=this.data[2],m=this.data[3],U=this.data[4],mt=this.data[5],Et=this.data[6],St=this.data[7],Lt=this.data[8],Kt=this.data[9],ne=this.data[10],ae=this.data[11],ke=this.data[12],ze=this.data[13],ye=this.data[14],we=this.data[15],He=0,Pe=1;return this.data[12]=i*t+U*e+Lt*He+ke*Pe,this.data[13]=n*t+mt*e+Kt*He+ze*Pe,this.data[14]=a*t+Et*e+ne*He+ye*Pe,this.data[15]=m*t+St*e+ae*He+we*Pe,this}setPosition(t,e){this.data[12]=t,this.data[13]=e}getPosition(){return O(this.data[12],this.data[13])}rotate(t){const e=this.data[0],i=this.data[1],n=this.data[2],a=this.data[3],m=this.data[4],U=this.data[5],mt=this.data[6],Et=this.data[7],St=Math.sin(t),Lt=Math.cos(t);return this.data[0]=Lt*e+St*m,this.data[1]=Lt*i+St*U,this.data[2]=Lt*n+St*mt,this.data[3]=Lt*a+St*Et,this.data[4]=Lt*m-St*e,this.data[5]=Lt*U-St*i,this.data[6]=Lt*mt-St*n,this.data[7]=Lt*Et-St*a,this}scale(t,e){const i=this.data[0],n=this.data[1],a=this.data[2],m=this.data[3],U=this.data[4],mt=this.data[5],Et=this.data[6],St=this.data[7];return this.data[0]=i*t,this.data[1]=n*t,this.data[2]=a*t,this.data[3]=m*t,this.data[4]=U*e,this.data[5]=mt*e,this.data[6]=Et*e,this.data[7]=St*e,this}setRotation(t){const e=this.getScale(),i=Math.sin(t),n=Math.cos(t);this.data[0]=n*e.x,this.data[1]=i*e.y,this.data[4]=-i*e.x,this.data[5]=n*e.y}getRotation(){const t=Math.atan2(this.data[1]/this.getScaleY(),this.data[0]/this.getScaleX());return C(t)}getScaleX(){const t=O(this.data[0],this.data[4]).size;return this._scaleSignX*t}getScaleY(){const t=O(this.data[1],this.data[5]).size;return this._scaleSignY*t}getScale(){return O(this.getScaleX(),this.getScaleY())}setScaleX(t){if(this._scaleX===t)return;this._scaleSignX=P(t);const e=O(this.data[0]*this._scaleSignX,this.data[4]*this._scaleSignX).normalize();this.data[0]=e.x*t,this.data[4]=e.y*t,this._scaleX=t}setScaleY(t){if(this._scaleY===t)return;this._scaleSignY=P(t);const e=O(this.data[1]*this._scaleSignY,this.data[5]*this._scaleSignY).normalize();this.data[1]=e.x*t,this.data[5]=e.y*t,this._scaleY=t}setScale(t){this.setScaleX(t.x),this.setScaleY(t.y)}getBasisDeterminant(){return this.data[0]*this.data[5]-this.data[1]*this.data[4]}getAffineInverse(t){const i=1/this.getBasisDeterminant(),n=this.data[0],a=this.data[4],m=this.data[1],U=this.data[5],mt=t||Ot.identity();mt.data[0]=U*i,mt.data[1]=-m*i,mt.data[4]=-a*i,mt.data[5]=n*i;const Et=this.data[12],St=this.data[13];return mt.data[12]=-(Et*mt.data[0]+St*mt.data[4]),mt.data[13]=-(Et*mt.data[1]+St*mt.data[5]),mt}isIdentity(){return this.data[0]===1&&this.data[1]===0&&this.data[2]===0&&this.data[3]===0&&this.data[4]===0&&this.data[5]===1&&this.data[6]===0&&this.data[7]===0&&this.data[8]===0&&this.data[9]===0&&this.data[10]===1&&this.data[11]===0&&this.data[12]===0&&this.data[13]===0&&this.data[14]===0&&this.data[15]===1}toString(){return`
[${this.data[0]} ${this.data[4]} ${this.data[8]} ${this.data[12]}]
[${this.data[1]} ${this.data[5]} ${this.data[9]} ${this.data[13]}]
[${this.data[2]} ${this.data[6]} ${this.data[10]} ${this.data[14]}]
[${this.data[3]} ${this.data[7]} ${this.data[11]} ${this.data[15]}]
`}}class $t{constructor(){this.data=new Float64Array(6),this._scale=new Float64Array([1,1]),this._scaleSignX=1,this._scaleSignY=1}toDOMMatrix(){return new DOMMatrix([...this.data])}static identity(){const t=new $t;return t.data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=1,t.data[4]=0,t.data[5]=0,t}static translation(t,e){const i=$t.identity();return i.data[4]=t,i.data[5]=e,i}static scale(t,e){const i=$t.identity();return i.data[0]=t,i.data[3]=e,i._scale[0]=t,i._scale[1]=e,i}static rotation(t){const e=$t.identity();return e.data[0]=Math.cos(t),e.data[1]=Math.sin(t),e.data[2]=-Math.sin(t),e.data[3]=Math.cos(t),e}setPosition(t,e){this.data[4]=t,this.data[5]=e}getPosition(){return O(this.data[4],this.data[5])}rotate(t){const e=this.data[0],i=this.data[1],n=this.data[2],a=this.data[3],m=Math.sin(t),U=Math.cos(t);return this.data[0]=U*e+m*n,this.data[1]=U*i+m*a,this.data[2]=U*n-m*e,this.data[3]=U*a-m*i,this}translate(t,e){const i=this.data[0],n=this.data[1],a=this.data[2],m=this.data[3],U=this.data[4],mt=this.data[5];return this.data[4]=i*t+a*e+U,this.data[5]=n*t+m*e+mt,this}scale(t,e){const i=this.data[0],n=this.data[1],a=this.data[2],m=this.data[3];return this.data[0]=i*t,this.data[1]=n*t,this.data[2]=a*e,this.data[3]=m*e,this._scale[0]=t,this._scale[1]=e,this}determinant(){return this.data[0]*this.data[3]-this.data[1]*this.data[2]}inverse(t){const i=1/this.determinant(),n=this.data[0],a=this.data[2],m=this.data[1],U=this.data[3],mt=t||$t.identity();mt.data[0]=U*i,mt.data[1]=-m*i,mt.data[2]=-a*i,mt.data[3]=n*i;const Et=this.data[4],St=this.data[5];return mt.data[4]=-(Et*mt.data[0]+St*mt.data[2]),mt.data[5]=-(Et*mt.data[1]+St*mt.data[3]),mt}multiply(t,e){if(t instanceof u){const i=e||new u(0,0),n=t,a=n.x*this.data[0]+n.y*this.data[2]+this.data[4],m=n.x*this.data[1]+n.y*this.data[3]+this.data[5];return i.x=a,i.y=m,i}else{const i=e||new $t,n=t,a=this.data[0],m=this.data[1],U=this.data[2],mt=this.data[3],Et=this.data[4],St=this.data[5],Lt=n.data[0],Kt=n.data[1],ne=n.data[2],ae=n.data[3],ke=n.data[4],ze=n.data[5];i.data[0]=a*Lt+U*Kt,i.data[1]=m*Lt+mt*Kt,i.data[2]=a*ne+U*ae,i.data[3]=m*ne+mt*ae,i.data[4]=a*ke+U*ze+Et,i.data[5]=m*ke+mt*ze+St;const ye=this.getScale();return i._scaleSignX=P(ye.x)*P(i._scaleSignX),i._scaleSignY=P(ye.y)*P(i._scaleSignY),i}}multiplyQuadInPlace(t){const e=t[0]*this.data[0]+t[1]*this.data[2]+this.data[4],i=t[0]*this.data[1]+t[1]*this.data[3]+this.data[5];t[0]=e,t[1]=i;const n=t[2]*this.data[0]+t[3]*this.data[2]+this.data[4],a=t[2]*this.data[1]+t[3]*this.data[3]+this.data[5];t[2]=n,t[3]=a;const m=t[4]*this.data[0]+t[5]*this.data[2]+this.data[4],U=t[4]*this.data[1]+t[5]*this.data[3]+this.data[5];t[4]=m,t[5]=U;const mt=t[6]*this.data[0]+t[7]*this.data[2]+this.data[4],Et=t[6]*this.data[1]+t[7]*this.data[3]+this.data[5];t[6]=mt,t[7]=Et}to4x4(){const t=new Ot;return t.data[0]=this.data[0],t.data[1]=this.data[1],t.data[2]=0,t.data[3]=0,t.data[4]=this.data[2],t.data[5]=this.data[3],t.data[6]=0,t.data[7]=0,t.data[8]=0,t.data[9]=0,t.data[10]=1,t.data[11]=0,t.data[12]=this.data[4],t.data[13]=this.data[5],t.data[14]=0,t.data[15]=1,t}setRotation(t){const e=this.getScale(),i=Math.sin(t),n=Math.cos(t);this.data[0]=n*e.x,this.data[1]=i*e.y,this.data[2]=-i*e.x,this.data[3]=n*e.y}getRotation(){const t=Math.atan2(this.data[1]/this.getScaleY(),this.data[0]/this.getScaleX());return C(t)}getScaleX(){const t=O(this.data[0],this.data[2]).distance();return this._scaleSignX*t}getScaleY(){const t=O(this.data[1],this.data[3]).distance();return this._scaleSignY*t}getScale(){return O(this.getScaleX(),this.getScaleY())}setScaleX(t){if(t===this._scale[0])return;this._scaleSignX=P(t);const e=O(this.data[0]*this._scaleSignX,this.data[2]*this._scaleSignX).normalize();this.data[0]=e.x*t,this.data[2]=e.y*t,this._scale[0]=t}setScaleY(t){if(t===this._scale[1])return;this._scaleSignY=P(t);const e=O(this.data[1]*this._scaleSignY,this.data[3]*this._scaleSignY).normalize();this.data[1]=e.x*t,this.data[3]=e.y*t,this._scale[1]=t}setScale(t){this.setScaleX(t.x),this.setScaleY(t.y)}isIdentity(){return this.data[0]===1&&this.data[1]===0&&this.data[2]===0&&this.data[3]===1&&this.data[4]===0&&this.data[5]===0}reset(){const t=this;return t.data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=1,t.data[4]=0,t.data[5]=0,t}clone(t){const e=t||new $t;return e.data.set(this.data),e}toString(){return`
[${this.data[0]} ${this.data[2]} ${this.data[4]}]
[${this.data[1]} ${this.data[3]} ${this.data[5]}]
[0 0 1]
`}}class Zt{constructor(){this._transforms=[],this._currentTransform=$t.identity()}save(){this._transforms.push(this._currentTransform),this._currentTransform=this._currentTransform.clone()}restore(){this._currentTransform=this._transforms.pop()}translate(t,e){return this._currentTransform.translate(t,e)}rotate(t){return this._currentTransform.rotate(t)}scale(t,e){return this._currentTransform.scale(t,e)}set current(t){this._currentTransform=t}get current(){return this._currentTransform}}class Yt{constructor(){this.current=this._getDefaultState(),this._states=[]}_getDefaultState(){return{opacity:1,z:0,tint:X.White,material:null}}_cloneState(){return{opacity:this.current.opacity,z:this.current.z,tint:this.current.tint.clone(),material:this.current.material}}save(){this._states.push(this.current),this.current=this._cloneState()}restore(){this.current=this._states.pop()}}const Ve={Complete:"complete",Load:"load",LoadStart:"loadstart",Progress:"progress",Error:"error"};class xe{constructor(t,e,i=!1){this.path=t,this.responseType=e,this.bustCache=i,this.data=null,this.logger=ft.getInstance(),this.events=new l}isLoaded(){return this.data!==null}_cacheBust(t){return/\?\w*=\w*/.test(t)?t+="&__="+Date.now():t+="?__="+Date.now(),t}load(){return new Promise((t,e)=>{if(this.data!==null){this.logger.debug("Already have data for resource",this.path),this.events.emit("complete",this.data),t(this.data);return}const i=new XMLHttpRequest;i.open("GET",this.bustCache?this._cacheBust(this.path):this.path,!0),i.responseType=this.responseType,i.addEventListener("loadstart",n=>this.events.emit("loadstart",n)),i.addEventListener("progress",n=>this.events.emit("progress",n)),i.addEventListener("error",n=>this.events.emit("error",n)),i.addEventListener("load",n=>this.events.emit("load",n)),i.addEventListener("load",()=>{if(i.status!==0&&i.status!==200){this.logger.error("Failed to load resource ",this.path," server responded with error code",i.status),this.events.emit("error",i.response),e(new Error(i.statusText));return}this.data=i.response,this.events.emit("complete",this.data),this.logger.debug("Completed loading resource",this.path),t(this.data)}),i.send()})}}function Ee(h,t){return h&&(h.__isProxy===void 0?new Proxy(h,{set:(e,i,n)=>(e[i]!==n&&(e[i]=n,typeof i=="string"&&i[0]!=="_"&&t(e)),!0),get:(e,i)=>i!=="__isProxy"?e[i]:!0}):h)}const Qe=(h=[],t,e)=>({get:(i,n)=>n==="__isProxy"?!0:typeof i[n]=="object"&&i[n]!=null?new Proxy(i[n],Qe([...h,n],t,e)):i[n],set:(i,n,a)=>(typeof n=="string"&&n[0]!=="_"&&t(e),i[n]=a,!0)});function Bt(h,t){return h&&(h.__isProxy===void 0?new Proxy(h,Qe([],t,h)):h)}function ot(h,t){return h&&(h.__isProxy===void 0?new Proxy(h,{set:(e,i,n)=>(e[i]=n,typeof i=="string"&&i[0]!=="_"&&t(e),!0),get:(e,i)=>i!=="__isProxy"?e[i]:!0}):h)}class It{isStale(){return this._transformStale}get flipHorizontal(){return this._flipHorizontal}set flipHorizontal(t){this._flipHorizontal=t,this._transformStale=!0}get flipVertical(){return this._flipVertical}set flipVertical(t){this._flipVertical=t,this._transformStale=!0}get rotation(){return this._rotation}set rotation(t){this._rotation=t,this._transformStale=!0}get scale(){return this._scale}set scale(t){this._scale=Ee(t,()=>{this._transformStale=!0}),this._transformStale=!0}get origin(){return this._origin}set origin(t){this._origin=Ee(t,()=>{this._transformStale=!0}),this._transformStale=!0}constructor(t){var e,i,n,a,m,U,mt;this.id=It._ID++,this.transform=$t.identity(),this.tint=null,this._transformStale=!0,this.showDebug=!1,this._flipHorizontal=!1,this._flipVertical=!1,this._rotation=0,this.opacity=1,this._scale=u.One,this._origin=null,this._width=0,this._height=0,t&&(this.origin=(e=t.origin)!==null&&e!==void 0?e:this.origin,this.flipHorizontal=(i=t.flipHorizontal)!==null&&i!==void 0?i:this.flipHorizontal,this.flipVertical=(n=t.flipVertical)!==null&&n!==void 0?n:this.flipVertical,this.rotation=(a=t.rotation)!==null&&a!==void 0?a:this.rotation,this.opacity=(m=t.opacity)!==null&&m!==void 0?m:this.opacity,this.scale=(U=t.scale)!==null&&U!==void 0?U:this.scale,this.tint=(mt=t.tint)!==null&&mt!==void 0?mt:this.tint)}cloneGraphicOptions(){return{width:this.width/this.scale.x,height:this.height/this.scale.y,origin:this.origin?this.origin.clone():null,flipHorizontal:this.flipHorizontal,flipVertical:this.flipVertical,rotation:this.rotation,opacity:this.opacity,scale:this.scale?this.scale.clone():null,tint:this.tint?this.tint.clone():null}}get width(){return Math.abs(this._width*this.scale.x)}get height(){return Math.abs(this._height*this.scale.y)}set width(t){this._width=t,this._transformStale=!0}set height(t){this._height=t,this._transformStale=!0}get localBounds(){return ut.fromDimension(this.width,this.height,u.Zero)}draw(t,e,i){this._preDraw(t,e,i),this._drawImage(t,0,0),this._postDraw(t)}_preDraw(t,e,i){t.save(),t.translate(e,i),this._transformStale&&(this.transform.reset(),this.transform.scale(Math.abs(this.scale.x),Math.abs(this.scale.y)),this._rotate(this.transform),this._flip(this.transform),this._transformStale=!1),t.multiply(this.transform),t.opacity=t.opacity*this.opacity,this.tint&&(t.tint=this.tint)}_rotate(t){var e;const i=this.scale.x>0?1:-1,n=this.scale.y>0?1:-1,a=(e=this.origin)!==null&&e!==void 0?e:O(this.width/2,this.height/2);t.translate(a.x,a.y),t.rotate(this.rotation),t.scale(i,n),t.translate(-a.x,-a.y)}_flip(t){this.flipHorizontal&&(t.translate(this.width/this.scale.x,0),t.scale(-1,1)),this.flipVertical&&(t.translate(0,this.height/this.scale.y),t.scale(1,-1))}_postDraw(t){this.showDebug&&t.debug.drawRect(0,0,this.width,this.height),t.restore()}}It._ID=0;class Nt extends It{static from(t){return new Nt({image:t})}constructor(t){var e,i;super(t),this._logger=ft.getInstance(),this._dirty=!0,this.image=t.image;const{width:n,height:a}=t;this.sourceView=(e=t.sourceView)!==null&&e!==void 0?e:{x:0,y:0,width:n??0,height:a??0},this.destSize=(i=t.destSize)!==null&&i!==void 0?i:{width:n??0,height:a??0},this._updateSpriteDimensions(),this.image.ready.then(()=>{this._updateSpriteDimensions()})}get width(){return Math.abs(this.destSize.width*this.scale.x)}get height(){return Math.abs(this.destSize.height*this.scale.y)}set width(t){t/=Math.abs(this.scale.x),this.destSize.width=t,super.width=Math.ceil(this.destSize.width)}set height(t){t/=Math.abs(this.scale.y),this.destSize.height=t,super.height=Math.ceil(this.destSize.height)}_updateSpriteDimensions(){var t,e,i,n,a,m;const{width:U,height:mt}=this.image;this.sourceView.width=((t=this.sourceView)===null||t===void 0?void 0:t.width)||U,this.sourceView.height=((e=this.sourceView)===null||e===void 0?void 0:e.height)||mt,this.destSize.width=((i=this.destSize)===null||i===void 0?void 0:i.width)||((n=this.sourceView)===null||n===void 0?void 0:n.width)||U,this.destSize.height=((a=this.destSize)===null||a===void 0?void 0:a.height)||((m=this.sourceView)===null||m===void 0?void 0:m.height)||mt,this.width=Math.ceil(this.destSize.width)*this.scale.x,this.height=Math.ceil(this.destSize.height)*this.scale.y}_preDraw(t,e,i){this.image.isLoaded()&&this._dirty&&(this._dirty=!1,this._updateSpriteDimensions()),super._preDraw(t,e,i)}_drawImage(t,e,i){this.image.isLoaded()?t.drawImage(this.image.image,this.sourceView.x,this.sourceView.y,this.sourceView.width,this.sourceView.height,e,i,this.destSize.width,this.destSize.height):this._logger.warnOnce(`ImageSource ${this.image.path} is not yet loaded and won't be drawn. Please call .load() or include in a Loader.

Read https://excaliburjs.com/docs/imagesource for more information.`)}clone(){return new Nt({image:this.image,sourceView:{...this.sourceView},destSize:{...this.destSize},...this.cloneGraphicOptions()})}}var yt;(function(h){h.Pixel="Pixel",h.Blended="Blended"})(yt||(yt={}));function re(h){switch(h){case yt.Pixel:return yt.Pixel;case yt.Blended:return yt.Blended;default:return null}}var Wt;(function(h){h.Clamp="Clamp",h.Repeat="Repeat",h.Mirror="Mirror"})(Wt||(Wt={}));function Vt(h){switch(h){case Wt.Clamp:return Wt.Clamp;case Wt.Repeat:return Wt.Repeat;case Wt.Mirror:return Wt.Mirror;default:return Wt.Clamp}}class Tt{constructor(t){this._textureMap=new Map,this._gl=t,Tt._MAX_TEXTURE_SIZE=t.getParameter(t.MAX_TEXTURE_SIZE)}dispose(){for(const[t]of this._textureMap)this.delete(t);this._textureMap.clear(),this._gl=null}get(t){return this._textureMap.get(t)}has(t){return this._textureMap.has(t)}load(t,e,i=!1){const n=this._gl;if(!n)return null;const{filtering:a,wrapping:m}={...e};let U=null;if(this.has(t)&&(U=this.get(t)),U)return i&&(n.bindTexture(n.TEXTURE_2D,U),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)),U;U=n.createTexture(),Tt.checkImageSizeSupportedAndLog(t),n.bindTexture(n.TEXTURE_2D,U),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);let mt;m&&(typeof m=="string"?mt={x:m,y:m}:mt={x:m.x,y:m.y});const{x:Et,y:St}=mt??Tt.wrapping;switch(Et){case Wt.Clamp:n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);break;case Wt.Repeat:n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT);break;case Wt.Mirror:n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.MIRRORED_REPEAT);break;default:n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)}switch(St){case Wt.Clamp:n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);break;case Wt.Repeat:n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT);break;case Wt.Mirror:n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.MIRRORED_REPEAT);break;default:n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)}const Lt=a??Tt.filtering;return n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,Lt===yt.Pixel?n.NEAREST:n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,Lt===yt.Pixel?n.NEAREST:n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),this._textureMap.set(t,U),U}delete(t){const e=this._gl;if(!e)return null;let i=null;this.has(t)&&(i=this.get(t),e.deleteTexture(i))}static checkImageSizeSupportedAndLog(t){var e;const i=(e=t.dataset.originalSrc)!==null&&e!==void 0?e:"internal canvas bitmap";return t.width>Tt._MAX_TEXTURE_SIZE||t.height>Tt._MAX_TEXTURE_SIZE?(Tt._LOGGER.error(`The image [${i}] provided to Excalibur is too large for the device's maximum texture size of (${Tt._MAX_TEXTURE_SIZE}x${Tt._MAX_TEXTURE_SIZE}) please resize to an image for excalibur to render properly.

Images will likely render as black rectangles.

Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`),!1):((t.width>4096||t.height>4096)&&Tt._LOGGER.warn(`The image [${i}] provided to excalibur is too large may not work on all mobile devices, it is recommended you resize images to a maximum (4096x4096).

Images will likely render as black rectangles on some mobile platforms.

Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`),!0)}}Tt._LOGGER=ft.getInstance(),Tt.filtering=yt.Blended,Tt.wrapping={x:Wt.Clamp,y:Wt.Clamp},Tt._MAX_TEXTURE_SIZE=4096;const qt={Filtering:"filtering",WrappingX:"wrapping-x",WrappingY:"wrapping-y"};class Gt{get width(){return this.image.naturalWidth}get height(){return this.image.naturalHeight}isLoaded(){return this._src||(this._src=this.data.src),!!this._src}get image(){return this.data}constructor(t,e,i){this._logger=ft.getInstance(),this.data=new Image,this._readyFuture=new N,this.ready=this._readyFuture.promise,this.path=t;let n=!1,a;typeof e=="boolean"?n=e:{filtering:i,wrapping:a,bustCache:n}={...e},this._resource=new xe(t,"blob",n),this.filtering=i??this.filtering,typeof a=="string"?this.wrapping={x:a,y:a}:this.wrapping=a??this.wrapping,(t.endsWith(".svg")||t.endsWith(".gif"))&&this._logger.warn(`Image type is not fully supported, you may have mixed results ${t}. Fully supported: jpg, bmp, and png`)}static fromHtmlImageElement(t,e){const i=new Gt("");if(i._src="image-element",i.data=t,i.data.setAttribute("data-original-src","image-element"),e?.filtering?i.data.setAttribute(qt.Filtering,e?.filtering):i.data.setAttribute(qt.Filtering,yt.Blended),e?.wrapping){let n;typeof e.wrapping=="string"?n={x:e.wrapping,y:e.wrapping}:n={x:e.wrapping.x,y:e.wrapping.y},i.data.setAttribute(qt.WrappingX,n.x),i.data.setAttribute(qt.WrappingY,n.y)}else i.data.setAttribute(qt.WrappingX,Wt.Clamp),i.data.setAttribute(qt.WrappingY,Wt.Clamp);return Tt.checkImageSizeSupportedAndLog(t),i._readyFuture.resolve(t),i}get bustCache(){return this._resource.bustCache}set bustCache(t){this._resource.bustCache=t}async load(){var t,e,i,n;if(this.isLoaded())return this.data;try{let a;if(this.path.includes("data:image/"))a=this.path;else{const mt=await this._resource.load();a=URL.createObjectURL(mt)}const m=new Image,U=new N;m.onload=()=>U.resolve(),m.src=a,m.setAttribute("data-original-src",this.path),await U.promise,this.data=m,Tt.checkImageSizeSupportedAndLog(this.data)}catch(a){throw`Error loading ImageSource from path '${this.path}' with error [${a.message}]`}return this.data.setAttribute(qt.Filtering,this.filtering),this.data.setAttribute(qt.WrappingX,(e=(t=this.wrapping)===null||t===void 0?void 0:t.x)!==null&&e!==void 0?e:Wt.Clamp),this.data.setAttribute(qt.WrappingY,(n=(i=this.wrapping)===null||i===void 0?void 0:i.y)!==null&&n!==void 0?n:Wt.Clamp),this._readyFuture.resolve(this.data),this.data}toSprite(){return Nt.from(this)}unload(){this.data=new Image}}class se extends It{constructor(t){super(t),this._text="",this.alphabet="",this.shadow=null,this.caseInsensitive=!1,this.spacing=0,this.lineHeight=void 0,this._logger=ft.getInstance();const{alphabet:e,spriteSheet:i,caseInsensitive:n,spacing:a,shadow:m,lineHeight:U}=t;this.alphabet=e,this.spriteSheet=i,this.caseInsensitive=n??this.caseInsensitive,this.spacing=a??this.spacing,this.shadow=m??this.shadow,this.lineHeight=U??this.lineHeight}_getCharacterSprites(t){const e=[],i=this.caseInsensitive?t.toLocaleLowerCase():t,n=this.caseInsensitive?this.alphabet.toLocaleLowerCase():this.alphabet;for(let a=0;a<i.length;a++){const m=i[a];let U=n.indexOf(m);U===-1&&(U=0,this._logger.warnOnce(`SpriteFont - Cannot find letter '${m}' in configured alphabet '${n}'.`),this._logger.warnOnce("There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged."));const mt=this.spriteSheet.sprites[U];mt?e.push(mt):(this._logger.warnOnce(`SpriteFont - Cannot find sprite for '${m}' at index '${U}' in configured SpriteSheet`),this._logger.warnOnce("There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged."))}return e}measureText(t,e){const i=this._getLinesFromText(t,e),n=i.reduce((mt,Et)=>mt.length>Et.length?mt:Et),a=this._getCharacterSprites(n);let m=0,U=0;for(const mt of a)m+=mt.width+this.spacing,U=Math.max(U,mt.height);return ut.fromDimension(m,U*i.length,u.Zero)}_drawImage(t,e,i,n){var a;let m=0,U=0,mt=0;const Et=this._getLinesFromText(this._text,n);for(const St of Et){for(const Lt of this._getCharacterSprites(St))Lt.draw(t,e+m,i+U),m+=Lt.width+this.spacing,mt=Math.max(mt,Lt.height);m=0,U+=(a=this.lineHeight)!==null&&a!==void 0?a:mt}}render(t,e,i,n,a,m){this._text=e;const U=this.measureText(e,m);this.width=U.width,this.height=U.height,this.shadow&&(t.save(),t.translate(this.shadow.offset.x,this.shadow.offset.y),this._preDraw(t,n,a),this._drawImage(t,0,0,m),this._postDraw(t),t.restore()),this._preDraw(t,n,a),this._drawImage(t,0,0,m),this._postDraw(t)}clone(){return new se({alphabet:this.alphabet,spriteSheet:this.spriteSheet,spacing:this.spacing})}_getLinesFromText(t,e){if(this._cachedText===t&&this._cachedRenderWidth===e)return this._cachedLines;const i=t.split(`
`);if(e==null)return i;for(let n=0;n<i.length;n++){let a=i[n],m="";if(this.measureText(a).width>e){for(;this.measureText(a).width>e;)m=a[a.length-1]+m,a=a.slice(0,-1);i[n]=a,i[n+1]=m}}return this._cachedText=t,this._cachedLines=i,this._cachedRenderWidth=e,i}}class te{constructor(t){this.sprites=[];const{sprites:e,rows:i,columns:n}=t;this.sprites=e,this.rows=i??1,this.columns=n??this.sprites.length}getSprite(t,e,i){var n,a,m,U,mt,Et,St,Lt,Kt;if(t>=this.columns||t<0)throw Error(`No sprite exists in the SpriteSheet at (${t}, ${e}), x: ${t} should be between 0 and ${this.columns-1}`);if(e>=this.rows||e<0)throw Error(`No sprite exists in the SpriteSheet at (${t}, ${e}), y: ${e} should be between 0 and ${this.rows-1}`);const ne=t+e*this.columns,ae=this.sprites[ne];if(ae){if(i){const ke=ae.clone();return ke.flipHorizontal=(n=i.flipHorizontal)!==null&&n!==void 0?n:ke.flipHorizontal,ke.flipVertical=(a=i.flipVertical)!==null&&a!==void 0?a:ke.flipVertical,ke.width=(m=i.width)!==null&&m!==void 0?m:ke.width,ke.height=(U=i.height)!==null&&U!==void 0?U:ke.height,ke.rotation=(mt=i.rotation)!==null&&mt!==void 0?mt:ke.rotation,ke.scale=(Et=i.scale)!==null&&Et!==void 0?Et:ke.scale,ke.opacity=(St=i.opacity)!==null&&St!==void 0?St:ke.opacity,ke.tint=(Lt=i.tint)!==null&&Lt!==void 0?Lt:ke.tint,ke.origin=(Kt=i.origin)!==null&&Kt!==void 0?Kt:ke.origin,ke}return ae}throw Error(`Invalid sprite coordinates (${t}, ${e}`)}static fromImageSourceWithSourceViews(t){const e=t.sourceViews.map(i=>new Nt({image:t.image,sourceView:i}));return new te({sprites:e})}static fromImageSource(t){var e;const i=[];t.spacing=(e=t.spacing)!==null&&e!==void 0?e:{};const{image:n,grid:{rows:a,columns:m,spriteWidth:U,spriteHeight:mt},spacing:{originOffset:Et,margin:St}}=t,Lt={x:0,y:0,...Et},Kt={x:0,y:0,...St};for(let ne=0;ne<m;ne++)for(let ae=0;ae<a;ae++)i[ne+ae*m]=new Nt({image:n,sourceView:{x:ne*U+Kt.x*ne+Lt.x,y:ae*mt+Kt.y*ae+Lt.y,width:U,height:mt},destSize:{height:mt,width:U}});return new te({sprites:i,rows:a,columns:m})}clone(){return new te({sprites:this.sprites.map(t=>t.clone()),rows:this.rows,columns:this.columns})}}const ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAABACAYAAAD1Xam+AAAAAXNSR0IArs4c6QAABlFJREFUeJztndmy4yoMRcWt/v9fdr8EWoDAaDD4JntVpeqcxBrMIGQDNhEAAAAAAAAAAAAAAOCrSbMfr+u6yoEpTY+906GV57YtPkjyXj9WZZ+wHWHfo2N3/bU6Tte9Rv6ptruqRyMvKvvIX/zY3I/vjLeqsg6l/CWdp0KHKO/1Y1H2EdsR9j06Ntdfp+N03SvkH2u7i3pu5XkQ+DNTkgNJSok+/183xpcdWZHjgUzpQ2pGD67vaf//KRAGAq3tdhCy2tcMQKPyXyz7iPqrdBjbX5h9g7xbtvWf4ZJvM4D/BKG24Sd+IkQ0TC9aW5NM5FbO2HgrPVzW2vmN50DZNv/QWtl5bfPy85SBtdy9dFmjsf2F2SehTBVE+u+tkE5+lAGcJlFwGuodwRRU2Qe3rx0FhPNflc3HWC7BEh8EDGVR5IMCiLnDONtPp87qhxVH/S/LvzUAuDs/kyGimA5oSONKR1w8vsLpv+v+S9vhmS71JRiX1xB5CWZNw7m6rMrllMag/RJyWb67BEgpDVMWSydc+K47pr35w05kWd7ReEq6116KaG4CsbJ7OmV9PdZLEKkONiC1/7ZONVgDsajLIJPYp2OUAXRpnPcGmnIE6eSK4nv5YQqqSYO52JqnYfYj/PdQXQIY7XszuMofMgZRT/1LdeC5h2I5/0EdWDMY2Yb05WDE1RodVdpSA5r85slArAVnSf+89iP896St0f5bZKVA7Gk/3ja8q+152/+wrLqBWZTem3IBADbRBoDuHgAA4HdAAADgh0EAAOCHQQAA4IdBAADgh0EAAOCHuVsKbJ3P9M7jjuxHzGfv8j9iDt47Dx7hP8cjq5F/o/0T62Aer//ZOgDrajBp6aNlOWTEajKLjgj/Pcs/vfZD/a++3Pc8hNfZ966EVeh5vP75luDRJUAl0KzJfnopaqbaTuzZiulc2BS5lltFXntu3dcQsXadl59Wn1H+dfYNtrt2d6D/LDF9HkCQw6eXFbr8P9X5W/un5Ol8gz1t39p5pWOPn0vLynbgdnfe8maEQw+UIPJdfxdOd/4oTtVD0IYg8wDywGas0I04T5O3P8/qf2UWwPpkn1PbOT1bN2tFe59EM7TvKf+TRFw+erZ2ey4hpS3hp9qBkqq/tjsSU1OYqucBWB1yynt5QxC42Mdk30pAEIio//zRG3feBzLUX+TTjCKwlH83aI/KbpQBVEHgUGF0j/SitcLofHem8q6AyH0wBhFv4WszuOjy0yK2vc/oRWQoP2X9ve78jfaLnpncbBqQSC6s0HnIRT0a2yNZjfxT8+ir8t+yDsDTWaS6X70GP33+d77stp+I5HtBdwEAAPBl8ECApcAA/DBvfSowAGAB7/05ZAAA/DAIAADMMU3fOuS2ggAAwBjrorKoxWiPBxHMAgAg490Ts0VeePdA+ZfJDKcCh7sBqY88mmjklZeOt9iXPrvx2I2QPRnN2/qzyJ84h4gNcbtfasq5mM1rZr+bBWh2A+bIIX13Z9wqL+nQvFno7v3oq4tJItCed7isUT6C/I7BUn9KP95wDicYBYpcjncrO2c/dmW4tBtw4RiRld1IDxDyYsoXMHxF1w3dyz0Nne8033AOFsT6VgRCafl89fenTZUfbm8CGhrgdDcS7anAsvnkkP0IeCfQ+JzYunky6jhNYj5bl7++4fJvN9WDSKS/292A0wyANyKDI91bfkm3kcH7ckaP/SKW/VHKRZAcI14pP3beu0fPyn/DuZQbWMogNnsc16sziE96f7H/iai7uTf0/3N8lwFz/e13T00Djt4OrInCnkeChXT+qOcKOLA21tJpsv/G8/COnGnw97J9QwbTvd6djYSv7fxEVTuV/LzNhj7nOawv6bfbAGCYEpQ6HxFtuxs6sq9tzOYHobQ6Nje+6vo5BwFrPZ4OgMayS4PPt1NlzdLfbRCYBoBc+NaO4JWPwLEf33oN3unY3InKPQBW6Z7nEZzEmrl4iZjC804lqgePPEOguQcwWghUphxm343wyt/pWpWR0OrR+jvyxavHajfb9pTjbt9bH07Z5/expM4TLWfwb7QQqMoC+UDWXZo/4RgA38LOgUvLJAAQ1Td9y9//0ylxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB+g79apuVUsS5ZmwAAAABJRU5ErkJggg==";class Me{constructor(){this.fontSheet=ge,this.size=16,this.load()}load(){return this._imageSource=new Gt(this.fontSheet),this._imageSource.load().then(()=>{this._spriteSheet=te.fromImageSource({image:this._imageSource,grid:{rows:4,columns:16,spriteWidth:16,spriteHeight:16}}),this._spriteFont=new se({alphabet:`0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ,!'&."?-()+# `,caseInsensitive:!0,spriteSheet:this._spriteSheet,spacing:-6})})}write(t,e,i){this._imageSource.isLoaded()&&this._spriteFont.render(t,e,null,i.x,i.y)}}class Ie{constructor(t,e){this._gl=t,this._texture=e}use(){const t=this._gl;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this._texture)}disable(){const t=this._gl;t.bindTexture(t.TEXTURE_2D,null)}}class gi{constructor(t){var e,i;this.antialias=!1,this.samples=1,this._gl=t.gl,this.width=t.width,this.height=t.height,this.transparency=t.transparency,this.antialias=(e=t.antialias)!==null&&e!==void 0?e:this.antialias,this.samples=(i=t.samples)!==null&&i!==void 0?i:this._gl.getParameter(this._gl.MAX_SAMPLES);const n=this._gl;n.drawingBufferFormat?this.bufferFormat=n.drawingBufferFormat:this.transparency?this.bufferFormat=n.RGBA8:this.bufferFormat=n.RGB8,this._setupRenderBuffer(),this._setupFramebuffer()}setResolution(t,e){const i=this._gl;this.width=t,this.height=e,i.bindTexture(i.TEXTURE_2D,this._frameTexture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.width,this.height,0,i.RGBA,i.UNSIGNED_BYTE,null),this._renderBuffer&&(i.bindRenderbuffer(i.RENDERBUFFER,this._renderBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,Math.min(this.samples,i.getParameter(i.MAX_SAMPLES)),this.bufferFormat,this.width,this.height))}get renderBuffer(){return this._renderBuffer}get renderFrameBuffer(){return this._renderFrameBuffer}get frameBuffer(){return this._frameBuffer}get frameTexture(){return this._frameTexture}_setupRenderBuffer(){if(this.antialias){const t=this._gl;this._renderBuffer=t.createRenderbuffer(),this._renderFrameBuffer=t.createFramebuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this._renderBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,Math.min(this.samples,t.getParameter(t.MAX_SAMPLES)),this.bufferFormat,this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,this._renderFrameBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,this._renderBuffer)}}_setupFramebuffer(){const t=this._gl;this._frameTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._frameTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);const e=t.COLOR_ATTACHMENT0;this._frameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this._frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,e,t.TEXTURE_2D,this._frameTexture,0),this.disable()}toRenderSource(){return this.renderBuffer&&this.blitRenderBufferToFrameBuffer(),new Ie(this._gl,this._frameTexture)}blitToScreen(){const t=this._gl;this._renderBuffer?(t.bindFramebuffer(t.READ_FRAMEBUFFER,this.renderFrameBuffer),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.clearBufferfv(t.COLOR,0,[0,0,1,1]),t.blitFramebuffer(0,0,this.width,this.height,0,0,this.width,this.height,t.COLOR_BUFFER_BIT,t.LINEAR)):(t.bindFramebuffer(t.READ_FRAMEBUFFER,this.frameBuffer),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.clearBufferfv(t.COLOR,0,[0,0,1,1]),t.blitFramebuffer(0,0,this.width,this.height,0,0,this.width,this.height,t.COLOR_BUFFER_BIT,t.LINEAR))}blitRenderBufferToFrameBuffer(){if(this._renderBuffer){const t=this._gl;t.bindFramebuffer(t.READ_FRAMEBUFFER,this.renderFrameBuffer),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,this.frameBuffer),t.clearBufferfv(t.COLOR,0,[0,0,1,1]),t.blitFramebuffer(0,0,this.width,this.height,0,0,this.width,this.height,t.COLOR_BUFFER_BIT,t.LINEAR)}}copyToTexture(t){const e=this._gl;this._renderBuffer&&this.blitRenderBufferToFrameBuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this._frameBuffer),e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,this.width,this.height,0)}use(){const t=this._gl;this.antialias?t.bindFramebuffer(t.FRAMEBUFFER,this._renderFrameBuffer):t.bindFramebuffer(t.FRAMEBUFFER,this._frameBuffer),t.viewport(0,0,this.width,this.height)}disable(){const t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null)}}const Ei=`#version 300 es\r
in vec2 a_position;\r
in vec4 a_color;\r
\r
out lowp vec4 v_color;\r
\r
uniform mat4 u_matrix;\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Passthrough the color\r
   v_color = a_color;\r
}`,li=`#version 300 es\r
precision mediump float;\r
\r
// Color\r
in lowp vec4 v_color;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  fragColor = v_color;\r
}`;function yi(h,t){switch(t){case h.FLOAT:return 4;case h.SHORT:return 2;case h.UNSIGNED_SHORT:return 2;case h.BYTE:return 1;case h.UNSIGNED_BYTE:return 1;default:return 1}}function ci(h,t){const e=`(?<type>[a-z0-9]+)\\s+${t};`,n=new RegExp(e,"g").exec(h);return n?.length>0}function De(h,t,e){var i;const n=`(?<type>[a-z0-9]+)\\s+${e};`,m=new RegExp(n,"g").exec(t);switch((i=m?.groups)===null||i===void 0?void 0:i.type){case"float":case"vec2":case"vec3":case"vec4":return h.FLOAT;case"int":case"ivec2":case"ivec3":case"ivec4":return h.INT;case"uint":case"uvec2":case"uvec3":case"uvec4":return h.UNSIGNED_INT;case"bool":case"bvec2":case"bvec3":case"bvec4":return h.BOOL;case"short":return h.SHORT;case"ushort":return h.UNSIGNED_SHORT;case"ubyte":return h.UNSIGNED_BYTE;case"byte":return h.BYTE;default:return h.FLOAT}}function Ke(h,t){switch(t){case h.LOW_FLOAT:case h.HIGH_FLOAT:case h.FLOAT:return 1;case h.FLOAT_VEC2:return 2;case h.FLOAT_VEC3:return 3;case h.FLOAT_VEC4:return 4;case h.BYTE:return 1;case h.UNSIGNED_BYTE:return 1;case h.UNSIGNED_SHORT:case h.SHORT:return 1;default:return 1}}function pi(h,t){switch(t){case h.LOW_FLOAT:case h.HIGH_FLOAT:case h.FLOAT:case h.FLOAT_VEC2:case h.FLOAT_VEC3:case h.FLOAT_VEC4:return h.FLOAT;case h.BYTE:return h.BYTE;case h.UNSIGNED_BYTE:return h.UNSIGNED_BYTE;case h.SHORT:return h.SHORT;case h.UNSIGNED_SHORT:return h.UNSIGNED_SHORT;default:return h.FLOAT}}class $e{get compiled(){return this._compiled}constructor(t){this._logger=ft.getInstance(),this.uniforms={},this.attributes={},this._compiled=!1;const{gl:e,vertexSource:i,fragmentSource:n}=t;this._gl=e,this.vertexSource=i,this.fragmentSource=n}dispose(){this._gl.deleteProgram(this.program),this._gl=null}use(){this._gl.useProgram(this.program),$e._ACTIVE_SHADER_INSTANCE=this}isCurrentlyBound(){return $e._ACTIVE_SHADER_INSTANCE===this}compile(){const t=this._gl,e=this._compileShader(t,this.vertexSource,t.VERTEX_SHADER),i=this._compileShader(t,this.fragmentSource,t.FRAGMENT_SHADER);this.program=this._createProgram(t,e,i);const n=this.getAttributes();for(const m of n)this.attributes[m.name]=m;const a=this.getUniforms();for(const m of a)this.uniforms[m.name]=m;return this._compiled=!0,this.program}getUniforms(){const t=this._gl,e=t.getProgramParameter(this.program,t.ACTIVE_UNIFORMS),i=[];for(let n=0;n<e;n++){const a=t.getActiveUniform(this.program,n),m=t.getUniformLocation(this.program,a.name);i.push({name:a.name,glType:a.type,location:m})}return i}getAttributes(){const t=this._gl,e=t.getProgramParameter(this.program,t.ACTIVE_ATTRIBUTES),i=[];for(let n=0;n<e;n++){const a=t.getActiveAttrib(this.program,n),m=t.getAttribLocation(this.program,a.name);i.push({name:a.name,glType:pi(t,a.type),size:Ke(t,a.type),location:m,normalized:!1})}return i}setTexture(t,e){const i=this._gl;i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,e)}setUniformInt(t,e){this.setUniform("uniform1i",t,~~e)}trySetUniformInt(t,e){return this.trySetUniform("uniform1i",t,~~e)}setUniformIntArray(t,e){this.setUniform("uniform1iv",t,e)}trySetUniformIntArray(t,e){return this.trySetUniform("uniform1iv",t,e)}setUniformBoolean(t,e){this.setUniform("uniform1i",t,e?1:0)}trySetUniformBoolean(t,e){return this.trySetUniform("uniform1i",t,e?1:0)}setUniformFloat(t,e){this.setUniform("uniform1f",t,e)}trySetUniformFloat(t,e){return this.trySetUniform("uniform1f",t,e)}setUniformFloatArray(t,e){this.setUniform("uniform1fv",t,e)}trySetUniformFloatArray(t,e){return this.trySetUniform("uniform1fv",t,e)}setUniformFloatVector(t,e){this.setUniform("uniform2f",t,e.x,e.y)}trySetUniformFloatVector(t,e){return this.trySetUniform("uniform2f",t,e.x,e.y)}setUniformFloatColor(t,e){this.setUniform("uniform4f",t,e.r/255,e.g/255,e.b/255,e.a)}trySetUniformFloatColor(t,e){return this.trySetUniform("uniform4f",t,e.r/255,e.g/255,e.b/255,e.a)}setUniformMatrix(t,e){this.setUniform("uniformMatrix4fv",t,!1,e.data)}trySetUniformMatrix(t,e){return this.trySetUniform("uniformMatrix4fv",t,!1,e.data)}setUniform(t,e,...i){if(!this._compiled)throw Error(`Must compile shader before setting a uniform ${t}:${e}`);if(!this.isCurrentlyBound())throw Error("Currently accessed shader instance is not the current active shader in WebGL, must call `shader.use()` before setting uniforms");const a=this._gl.getUniformLocation(this.program,e);if(a){const m=[a,...i];this._gl[t].apply(this._gl,m)}else throw Error(`Uniform ${t}:${e} doesn't exist or is not used in the shader source code, unused uniforms are optimized away by most browsers`)}trySetUniform(t,e,...i){if(!this._compiled)return this._logger.warn(`Must compile shader before setting a uniform ${t}:${e}`),!1;if(!this.isCurrentlyBound())return this._logger.warn("Currently accessed shader instance is not the current active shader in WebGL, must call `shader.use()` before setting uniforms"),!1;const a=this._gl.getUniformLocation(this.program,e);if(a){const m=[a,...i];this._gl[t].apply(this._gl,m)}else return!1;return!0}_createProgram(t,e,i){const n=t.createProgram();if(n===null)throw Error("Could not create graphics shader program");if(t.attachShader(n,e),t.attachShader(n,i),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS))throw Error(`Could not link the program: [${t.getProgramInfoLog(n)}]`);return n}_compileShader(t,e,i){const n=t.VERTEX_SHADER===i?"vertex":"fragment",a=t.createShader(i);if(a===null)throw Error(`Could not build shader: [${e}]`);if(t.shaderSource(a,e),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS)){const U=t.getShaderInfoLog(a);throw Error(`Could not compile ${n} shader:

${U}${this._processSourceForError(e,U)}`)}return a}_processSourceForError(t,e){if(!t)return e;const i=t.split(`
`),n=e.search(/\d:\d/),a=e.indexOf(" ",n),[m,U]=e.slice(n,a).split(":").map(mt=>Number(mt));for(let mt=0;mt<i.length;mt++)i[mt]=`${mt+1}: ${i[mt]}${U===mt+1?" <----- ERROR!":""}`;return`

Source:
`+i.join(`
`)}}$e._ACTIVE_SHADER_INSTANCE=null;class ii{constructor(t){this.type="dynamic";const{gl:e,size:i,type:n,data:a}=t;if(this._gl=e,this.buffer=this._gl.createBuffer(),!a&&!i)throw Error("Must either provide data or a size to the VertexBuffer");a?this.bufferData=a:this.bufferData=new Float32Array(i),this.type=n??this.type,e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,this.bufferData,this.type==="static"?e.STATIC_DRAW:e.DYNAMIC_DRAW)}bind(){const t=this._gl;t.bindBuffer(t.ARRAY_BUFFER,this.buffer)}unbind(){const t=this._gl;t.bindBuffer(t.ARRAY_BUFFER,null)}upload(t){const e=this._gl;e.bindBuffer(e.ARRAY_BUFFER,this.buffer),t?e.bufferSubData(e.ARRAY_BUFFER,0,this.bufferData,0,t):e.bufferData(e.ARRAY_BUFFER,this.bufferData,this.type==="static"?e.STATIC_DRAW:e.DYNAMIC_DRAW)}dispose(){this._gl.deleteBuffer(this.buffer),this._gl=null}}class Le{get vertexBuffer(){return this._vertexBuffer}get attributes(){return this._attributes}constructor(t){this._logger=ft.getInstance(),this._suppressWarnings=!1,this._layout=[],this._attributes=[],this._vertexTotalSizeBytes=0,this._initialized=!1;const{gl:e,shader:i,vertexBuffer:n,attributes:a,suppressWarnings:m}=t;this._gl=e,this._vertexBuffer=n,this._attributes=a,this._shader=i,this._suppressWarnings=m,i&&this.initialize()}get totalVertexSizeBytes(){return this._vertexTotalSizeBytes}set shader(t){t&&this._shader!==t&&(this._shader=t,this.initialize())}get shader(){return this._shader}initialize(){if(this._initialized||!this._shader)return;if(!this._shader.compiled)throw Error("Shader not compiled, shader must be compiled before defining a vertex layout");this._vertexTotalSizeBytes=0,this._layout.length=0;const t=this._shader.attributes;for(const a of this._attributes){const m=t[a[0]];if(!m){if(!ci(this._shader.vertexSource,a[0]))throw Error(`The attribute named: ${a[0]} size ${a[1]} not found in the shader source code:
 ${this._shader.vertexSource}`);this._suppressWarnings||this._logger.warn(`The attribute named: ${a[0]} size ${a[1]} not found in the compiled shader. This is possibly a bug:
 1. Not a bug, but should remove unused code - attribute "${a[0]}" is unused in vertex/fragment and has been automatically removed by glsl compiler.
 2. Definitely a bug, attribute "${a[0]}" in layout has been mistyped or is missing in shader, check vertex/fragment source.`);const U=De(this._gl,this._shader.vertexSource,a[0]);this._layout.push({name:a[0],glType:U,size:a[1],location:-1,normalized:!1})}if(m){if(m.size!==a[1])throw Error(`VertexLayout size definition for attribute: [${a[0]}, ${a[1]}], doesn't match shader source size ${m.size}:
 ${this._shader.vertexSource}`);this._layout.push(m)}}let e=0;for(const a of this._layout){const m=yi(this._gl,a.glType);this._vertexTotalSizeBytes+=m*a.size,e+=a.size}this._vertexBuffer.bufferData.length%e!==0&&this._logger.warn(`The vertex component size (${e})  does NOT divide evenly into the specified vertex buffer (${this._vertexBuffer.bufferData.length})`);const i=this._gl;this._vao=i.createVertexArray(),i.bindVertexArray(this._vao),this._vertexBuffer.bind();let n=0;for(const a of this._layout)a.location!==-1&&(i.vertexAttribPointer(a.location,a.size,a.glType,a.normalized,this.totalVertexSizeBytes,n),i.enableVertexAttribArray(a.location)),n+=yi(i,a.glType)*a.size;i.bindVertexArray(null),this._vertexBuffer.unbind(),this._initialized=!0}use(t=!1,e){if(!this._shader)throw Error("No shader is associated with this vertex layout, a shader must be set");const i=this._gl;if(!this._shader.isCurrentlyBound())throw Error("Shader associated with this vertex layout is not active! Call shader.use() before layout.use()");this._vertexBuffer.bind(),t&&this._vertexBuffer.upload(e),i.bindVertexArray(this._vao)}}class me{static clear(){me.DrawCallCount=0,me.DrawnImagesCount=0}}me.DrawCallCount=0,me.DrawnImagesCount=0;class Je{constructor(){this.type="ex.line",this.priority=0,this._maxLines=10922,this._vertexIndex=0,this._lineCount=0}initialize(t,e){this._gl=t,this._context=e,this._shader=new $e({gl:t,vertexSource:Ei,fragmentSource:li}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._vertexBuffer=new ii({gl:t,size:6*2*this._maxLines,type:"dynamic"}),this._layout=new Le({gl:t,vertexBuffer:this._vertexBuffer,shader:this._shader,attributes:[["a_position",2],["a_color",4]]})}dispose(){this._vertexBuffer.dispose(),this._shader.dispose(),this._context=null,this._gl=null}draw(t,e,i){this._isFull()&&this.flush(),this._lineCount++;const n=this._context.getTransform(),a=n.multiply(t),m=n.multiply(e),U=this._vertexBuffer.bufferData;U[this._vertexIndex++]=a.x,U[this._vertexIndex++]=a.y,U[this._vertexIndex++]=i.r/255,U[this._vertexIndex++]=i.g/255,U[this._vertexIndex++]=i.b/255,U[this._vertexIndex++]=i.a,U[this._vertexIndex++]=m.x,U[this._vertexIndex++]=m.y,U[this._vertexIndex++]=i.r/255,U[this._vertexIndex++]=i.g/255,U[this._vertexIndex++]=i.b/255,U[this._vertexIndex++]=i.a}_isFull(){return this._lineCount>=this._maxLines}hasPendingDraws(){return this._lineCount!==0}flush(){if(this._lineCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),t.drawArrays(t.LINES,0,this._lineCount*2),me.DrawnImagesCount+=this._lineCount,me.DrawCallCount++,this._vertexIndex=0,this._lineCount=0}}const Ge=`#version 300 es\r
in vec2 a_position;\r
in vec4 a_color;\r
in float a_size;\r
out lowp vec4 v_color;\r
uniform mat4 u_matrix;\r
\r
void main() {\r
  gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
  gl_PointSize = a_size * 2.0;\r
  v_color = a_color;\r
}`,di=`#version 300 es\r
\r
precision mediump float;\r
in lowp vec4 v_color;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  float r = 0.0, delta = 0.0, alpha = 1.0;\r
  vec2 cxy = 2.0 * gl_PointCoord - 1.0;\r
  r = dot(cxy, cxy);\r
\r
  delta = fwidth(r);\r
  alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\r
  // "premultiply" the color by alpha\r
  vec4 color = v_color;\r
  color.a = color.a * alpha;\r
  color.rgb = color.rgb * color.a;\r
  fragColor = color;\r
}`;class Pi{constructor(){this.type="ex.point",this.priority=0,this._maxPoints=10922,this._pointCount=0,this._vertexIndex=0}initialize(t,e){this._gl=t,this._context=e,this._shader=new $e({gl:t,vertexSource:Ge,fragmentSource:di}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._buffer=new ii({gl:t,size:7*this._maxPoints,type:"dynamic"}),this._layout=new Le({gl:t,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_color",4],["a_size",1]]})}dispose(){this._buffer.dispose(),this._shader.dispose(),this._context=null,this._gl=null}draw(t,e,i){this._isFull()&&this.flush(),this._pointCount++;const n=this._context.getTransform(),a=this._context.opacity,m=this._context.snapToPixel,U=n.multiply(t);m&&(U.x=~~(U.x+ti),U.y=~~(U.y+ti));const mt=this._buffer.bufferData;mt[this._vertexIndex++]=U.x,mt[this._vertexIndex++]=U.y,mt[this._vertexIndex++]=e.r/255,mt[this._vertexIndex++]=e.g/255,mt[this._vertexIndex++]=e.b/255,mt[this._vertexIndex++]=e.a*a,mt[this._vertexIndex++]=i*Math.max(n.getScaleX(),n.getScaleY())}_isFull(){return this._pointCount>=this._maxPoints}hasPendingDraws(){return this._pointCount!==0}flush(){if(this._pointCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),t.drawArrays(t.POINTS,0,this._pointCount),me.DrawnImagesCount+=this._pointCount,me.DrawCallCount++,this._pointCount=0,this._vertexIndex=0}}const Ti=`#version 300 es\r
in vec2 a_position;\r
\r
in vec2 a_texcoord;\r
out vec2 v_texcoord;\r
\r
void main() {\r
  gl_Position = vec4(a_position, 0.0, 1.0);\r
\r
  // Pass the texcoord to the fragment shader.\r
  v_texcoord = a_texcoord;\r
}`,Oi=`#version 300 es\r
precision mediump float;\r
\r
// Passed in from the vertex shader.\r
in vec2 v_texcoord;\r
\r
// The texture.\r
uniform sampler2D u_texture;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
   fragColor = texture(u_texture, v_texcoord);\r
}`;class qi{constructor(t){this._gl=t,this._shader=new $e({gl:t,vertexSource:Ti,fragmentSource:Oi}),this._shader.compile(),this._buffer=new ii({gl:t,type:"static",data:new Float32Array([-1,-1,0,0,-1,1,0,1,1,-1,1,0,1,-1,1,0,-1,1,0,1,1,1,1,1])}),this._layout=new Le({gl:t,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_texcoord",2]]}),this._buffer.upload()}renderWithPostProcessor(t){const e=this._gl;t.getShader().use(),t.getLayout().use(),e.drawArrays(e.TRIANGLES,0,6)}renderToScreen(){const t=this._gl;this._shader.use(),this._layout.use(),t.drawArrays(t.TRIANGLES,0,6)}}class Ui{constructor(t,e,i){this._logger=ft.getInstance(),this._gl=t,this.buffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer);const n=e*6;if(!i)this.bufferData=new Uint32Array(n);else{const U=Math.floor(16383.5);this.bufferGlType=t.UNSIGNED_SHORT,this.bufferData=new Uint16Array(n),e>U&&this._logger.warn(`Total quads exceeds hardware index buffer limit (uint16), max(${U}) requested quads(${e})`)}let a=0;for(let m=0;m<n;m+=6)this.bufferData[m+0]=a+0,this.bufferData[m+1]=a+1,this.bufferData[m+2]=a+2,this.bufferData[m+3]=a+2,this.bufferData[m+4]=a+1,this.bufferData[m+5]=a+3,a+=4;t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.bufferData,t.STATIC_DRAW)}get size(){return this.bufferData.length}upload(){const t=this._gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.bufferData,t.STATIC_DRAW)}bind(){const t=this._gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer)}dispose(){this._gl.deleteBuffer(this.buffer),this._gl=null}}const hs=`#version 300 es\r
precision mediump float;\r
\r
// UV coord\r
in vec2 v_texcoord;\r
\r
// Texture index\r
in lowp float v_textureIndex;\r
\r
// Textures in the current draw\r
uniform sampler2D u_textures[%%count%%];\r
\r
uniform bool u_pixelart;\r
\r
// Opacity\r
in float v_opacity;\r
\r
in vec4 v_tint;\r
\r
in vec2 v_res;\r
\r
out vec4 fragColor;\r
\r
// Inigo Quilez pixel art filter https://jorenjoestar.github.io/post/pixel_art_filtering/\r
vec2 uv_iq(in vec2 uv, in vec2 texture_size) {\r
  vec2 pixel = uv * texture_size;\r
  \r
  vec2 seam=floor(pixel+.5);\r
  vec2 dudv=fwidth(pixel);\r
  pixel=seam+clamp((pixel-seam)/dudv,-.5,.5);\r
  \r
  return pixel/texture_size;\r
}\r
\r
void main(){\r
  // In order to support the most efficient sprite batching, we have multiple\r
  // textures loaded into the gpu (usually 8) this picker logic skips over textures\r
  // that do not apply to a particular sprite.\r
  \r
  vec4 color=vec4(1.,0,0,1.);\r
  \r
  // GLSL is templated out to pick the right texture and set the vec4 color\r
  %%texture_picker%%\r
  \r
  color.rgb=color.rgb*v_opacity;\r
  color.a=color.a*v_opacity;\r
  fragColor=color*v_tint;\r
}`,ns=`#version 300 es\r
in vec2 a_position;\r
\r
// Opacity\r
in float a_opacity;\r
out float v_opacity;\r
\r
// UV coordinate\r
in vec2 a_texcoord;\r
out vec2 v_texcoord;\r
\r
// Texture res\r
in vec2 a_res;\r
out vec2 v_res;\r
\r
// Texture number\r
in lowp float a_textureIndex;\r
out lowp float v_textureIndex;\r
\r
in vec4 a_tint;\r
out vec4 v_tint;\r
\r
uniform mat4 u_matrix;\r
\r
void main(){\r
  // Set the vertex position using the ortho transform matrix\r
  gl_Position=u_matrix*vec4(a_position,0.,1.);\r
  \r
  // Pass through the Opacity to the fragment shader\r
  v_opacity=a_opacity;\r
  // Pass through the UV coord to the fragment shader\r
  v_texcoord=a_texcoord;\r
\r
  v_res = a_res;\r
\r
  // Pass through the texture number to the fragment shader\r
  v_textureIndex=a_textureIndex;\r
  // Pass through the tint\r
  v_tint=a_tint;\r
}`;class ys{constructor(t){this.type="ex.image",this.priority=0,this._maxImages=10922,this._maxTextures=0,this._imageCount=0,this._textures=[],this._textureIndex=0,this._textureToIndex=new Map,this._images=new Set,this._vertexIndex=0,this._imageToWidth=new Map,this._imageToHeight=new Map,this._view=[0,0,0,0],this._dest=[0,0],this._quad=[0,0,0,0,0,0,0,0],this.pixelArtSampler=t.pixelArtSampler,this.uvPadding=t.uvPadding}initialize(t,e){this._gl=t,this._context=e,this._maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),125);const i=this._transformFragmentSource(hs,this._maxTextures);this._shader=new $e({gl:t,fragmentSource:i,vertexSource:ns}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",e.ortho),this._shader.setUniformIntArray("u_textures",[...Array(this._maxTextures)].map((n,a)=>a)),this._buffer=new ii({gl:t,size:12*4*this._maxImages,type:"dynamic"}),this._layout=new Le({gl:t,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_opacity",1],["a_res",2],["a_texcoord",2],["a_textureIndex",1],["a_tint",4]]}),this._quads=new Ui(t,this._maxImages,!0)}dispose(){this._buffer.dispose(),this._quads.dispose(),this._shader.dispose(),this._textures.length=0,this._context=null,this._gl=null}_transformFragmentSource(t,e){let i=t.replace("%%count%%",e.toString()),n="";for(let a=0;a<e;a++)a===0?n+=`if (v_textureIndex <= ${a}.5) {
`:n+=`   else if (v_textureIndex <= ${a}.5) {
`,n+=`      vec2 uv = u_pixelart ? uv_iq(v_texcoord, v_res) : v_texcoord;
`,n+=`      color = texture(u_textures[${a}], uv);
`,n+=`   }
`;return i=i.replace("%%texture_picker%%",n),i}_addImageAsTexture(t){if(this._images.has(t))return;const e=t.getAttribute(qt.Filtering),i=e?re(e):null,n=Vt(t.getAttribute(qt.WrappingX)),a=Vt(t.getAttribute(qt.WrappingY)),m=t.getAttribute("forceUpload")==="true",U=this._context.textureLoader.load(t,{filtering:i,wrapping:{x:n,y:a}},m);t.removeAttribute("forceUpload"),this._textures.indexOf(U)===-1&&(this._textures.push(U),this._textureToIndex.set(U,this._textureIndex++),this._images.add(t))}_bindTextures(t){for(let e=0;e<this._maxTextures;e++)t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this._textures[e]||this._textures[0])}_getTextureIdForImage(t){var e;if(t){const i=this._context.textureLoader.get(t);return(e=this._textureToIndex.get(i))!==null&&e!==void 0?e:-1}return-1}_isFull(){return this._imageCount>=this._maxImages||this._textures.length>=this._maxTextures}_getImageWidth(t){let e=this._imageToWidth.get(t);return e===void 0&&(e=t.width,this._imageToWidth.set(t,e)),e}_getImageHeight(t){let e=this._imageToHeight.get(t);return e===void 0&&(e=t.height,this._imageToHeight.set(t,e)),e}draw(t,e,i,n,a,m,U,mt,Et){var St,Lt,Kt,ne;this._isFull()&&this.flush(),this._imageCount++,this._addImageAsTexture(t);const ae=this._getImageWidth(t),ke=this._getImageHeight(t);let ze=ae||n||0,ye=ke||a||0;this._view[0]=0,this._view[1]=0,this._view[2]=(St=n??ae)!==null&&St!==void 0?St:0,this._view[3]=(Lt=a??ke)!==null&&Lt!==void 0?Lt:0,this._dest[0]=e??1,this._dest[1]=i??1,m!==void 0&&U!==void 0&&mt!==void 0&&Et!==void 0&&(this._view[0]=e??1,this._view[1]=i??1,this._view[2]=(Kt=n??ae)!==null&&Kt!==void 0?Kt:0,this._view[3]=(ne=a??ke)!==null&&ne!==void 0?ne:0,this._dest[0]=m,this._dest[1]=U,ze=mt,ye=Et),e=this._view[0],i=this._view[1];const we=this._view[2],He=this._view[3],Pe=this._context.getTransform(),vi=this._context.opacity,Ji=this._context.snapToPixel;this._quad[0]=this._dest[0],this._quad[1]=this._dest[1],this._quad[2]=this._dest[0]+ze,this._quad[3]=this._dest[1],this._quad[4]=this._dest[0],this._quad[5]=this._dest[1]+ye,this._quad[6]=this._dest[0]+ze,this._quad[7]=this._dest[1]+ye,Pe.multiplyQuadInPlace(this._quad),Ji&&(this._quad[0]=~~(this._quad[0]+P(this._quad[0])*ti),this._quad[1]=~~(this._quad[1]+P(this._quad[1])*ti),this._quad[2]=~~(this._quad[2]+P(this._quad[2])*ti),this._quad[3]=~~(this._quad[3]+P(this._quad[3])*ti),this._quad[4]=~~(this._quad[4]+P(this._quad[4])*ti),this._quad[5]=~~(this._quad[5]+P(this._quad[5])*ti),this._quad[6]=~~(this._quad[6]+P(this._quad[6])*ti),this._quad[7]=~~(this._quad[7]+P(this._quad[7])*ti));const Xe=this._context.tint,$i=this._getTextureIdForImage(t),Is=ae||ze,qs=ke||ye,bn=(e+this.uvPadding)/Is,yn=(i+this.uvPadding)/qs,wn=(e+we-this.uvPadding)/Is,fn=(i+He-this.uvPadding)/qs,Ks=ae,tn=ke,Ni=this._layout.vertexBuffer.bufferData;Ni[this._vertexIndex++]=this._quad[0],Ni[this._vertexIndex++]=this._quad[1],Ni[this._vertexIndex++]=vi,Ni[this._vertexIndex++]=Ks,Ni[this._vertexIndex++]=tn,Ni[this._vertexIndex++]=bn,Ni[this._vertexIndex++]=yn,Ni[this._vertexIndex++]=$i,Ni[this._vertexIndex++]=Xe.r/255,Ni[this._vertexIndex++]=Xe.g/255,Ni[this._vertexIndex++]=Xe.b/255,Ni[this._vertexIndex++]=Xe.a,Ni[this._vertexIndex++]=this._quad[4],Ni[this._vertexIndex++]=this._quad[5],Ni[this._vertexIndex++]=vi,Ni[this._vertexIndex++]=Ks,Ni[this._vertexIndex++]=tn,Ni[this._vertexIndex++]=bn,Ni[this._vertexIndex++]=fn,Ni[this._vertexIndex++]=$i,Ni[this._vertexIndex++]=Xe.r/255,Ni[this._vertexIndex++]=Xe.g/255,Ni[this._vertexIndex++]=Xe.b/255,Ni[this._vertexIndex++]=Xe.a,Ni[this._vertexIndex++]=this._quad[2],Ni[this._vertexIndex++]=this._quad[3],Ni[this._vertexIndex++]=vi,Ni[this._vertexIndex++]=Ks,Ni[this._vertexIndex++]=tn,Ni[this._vertexIndex++]=wn,Ni[this._vertexIndex++]=yn,Ni[this._vertexIndex++]=$i,Ni[this._vertexIndex++]=Xe.r/255,Ni[this._vertexIndex++]=Xe.g/255,Ni[this._vertexIndex++]=Xe.b/255,Ni[this._vertexIndex++]=Xe.a,Ni[this._vertexIndex++]=this._quad[6],Ni[this._vertexIndex++]=this._quad[7],Ni[this._vertexIndex++]=vi,Ni[this._vertexIndex++]=Ks,Ni[this._vertexIndex++]=tn,Ni[this._vertexIndex++]=wn,Ni[this._vertexIndex++]=fn,Ni[this._vertexIndex++]=$i,Ni[this._vertexIndex++]=Xe.r/255,Ni[this._vertexIndex++]=Xe.g/255,Ni[this._vertexIndex++]=Xe.b/255,Ni[this._vertexIndex++]=Xe.a}hasPendingDraws(){return this._imageCount!==0}flush(){if(this._imageCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0,4*12*this._imageCount),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._shader.setUniformBoolean("u_pixelart",this.pixelArtSampler),this._bindTextures(t),this._quads.bind(),t.drawElements(t.TRIANGLES,this._imageCount*6,this._quads.bufferGlType,0),me.DrawnImagesCount+=this._imageCount,me.DrawCallCount++,this._imageCount=0,this._vertexIndex=0,this._textures.length=0,this._textureIndex=0,this._textureToIndex.clear(),this._images.clear(),this._imageToWidth.clear(),this._imageToHeight.clear()}}const Ys=`#version 300 es\r
\r
precision mediump float;\r
\r
// UV coord\r
in vec2 v_uv;\r
\r
in vec2 v_size; // in pixels\r
\r
// Color coord to blend with image\r
in lowp vec4 v_color;\r
\r
// Stroke color if used\r
in lowp vec4 v_strokeColor;\r
\r
// Stroke thickness if used\r
in lowp float v_strokeThickness; // in pixels\r
\r
// Opacity\r
in float v_opacity;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
    // modified from https://stackoverflow.com/questions/59197671/glsl-rounded-rectangle-with-variable-border\r
    vec2 uv = v_uv;\r
    vec2 fragCoord = uv * v_size;\r
    float maxX = v_size.x - v_strokeThickness;\r
    float minX = v_strokeThickness;\r
    float maxY = v_size.y - v_strokeThickness;\r
    float minY = v_strokeThickness;\r
\r
    if (fragCoord.x < maxX && fragCoord.x > minX &&\r
        fragCoord.y < maxY && fragCoord.y > minY) {\r
      fragColor = v_color;\r
    } else {\r
      fragColor = v_strokeColor;\r
    }\r
    fragColor.a *= v_opacity;\r
    fragColor.rgb *= fragColor.a;\r
\r
    // vec2 v2CenteredPos     = abs(fragCoord - v_size.xy / 2.0);\r
    // vec2 v2HalfShapeSizePx = v_size.xy/2.0 - v_strokeThickness/2.0;\r
\r
    // float fHalfBorderDist      = 0.0;\r
    // float fHalfBorderThickness = 0.0;\r
\r
    // if (fragCoord.x > max(v_radius, v_strokeThickness) && \r
    //     fragCoord.x < v_size.x - max(v_radius, v_strokeThickness))\r
    // {\r
    //     fHalfBorderDist      = v2CenteredPos.y - v2HalfShapeSizePx.y;\r
    //     fHalfBorderThickness = v_strokeThickness / 2.0;\r
    // }\r
    // else if (fragCoord.y > max(v_radius, v_strokeThickness) && \r
    //          fragCoord.y < v_size.y - max(v_radius, v_strokeThickness))\r
    // {\r
    //     fHalfBorderDist      = v2CenteredPos.x - v2HalfShapeSizePx.x;\r
    //     fHalfBorderThickness = v_strokeThickness / 2.0;\r
    // }\r
    // else\r
    // {\r
    //     vec2 edgeVec = max(vec2(0.0), v_radius - vec2(\r
    //         uv.x > 0.5 ? v_size.x - fragCoord.x : fragCoord.x,\r
    //         uv.y > 0.5 ? v_size.y - fragCoord.y : fragCoord.y));\r
        \r
    //     float ellipse_ab    = v_radius-v_strokeThickness;\r
    //     vec2 ellipse_isect = (v_strokeThickness > v_radius || v_strokeThickness > v_radius) ? vec2(0.0) :\r
    //                             edgeVec.xy * ellipse_ab*ellipse_ab / length(ellipse_ab*edgeVec.yx); \r
            \r
    //     fHalfBorderThickness = (v_radius - length(ellipse_isect)) / 2.0;\r
    //     fHalfBorderDist      = length(edgeVec) - (v_radius - fHalfBorderThickness);\r
    // }\r
\r
    // vec4 v4FromColor = v_strokeColor;\r
    // v4FromColor.rgb *= v4FromColor.a;\r
    // vec4 v4ToColor   = vec4(0.0); // background color is transparent\r
    // if (fHalfBorderDist < 0.0) {\r
    //     v4ToColor = v_color;\r
    //     v4ToColor.rgb *= v4ToColor.a;\r
    // }\r
\r
    // float mixPct = abs(fHalfBorderDist) - fHalfBorderThickness;\r
\r
    // vec4 finalColor = mix(v4FromColor, v4ToColor, mixPct);\r
    // gl_FragColor = finalColor;\r
}`,ji=`#version 300 es\r
in vec2 a_position;\r
\r
// UV coordinate\r
in vec2 a_uv;\r
out vec2 v_uv;\r
\r
in vec2 a_size;\r
out vec2 v_size;\r
\r
// Opacity \r
in float a_opacity;\r
out float v_opacity;\r
\r
in vec4 a_color;\r
out vec4 v_color;\r
\r
in vec4 a_strokeColor;\r
out vec4 v_strokeColor;\r
\r
in float a_strokeThickness;\r
out float v_strokeThickness;\r
\r
uniform mat4 u_matrix;\r
\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Pass through UV coords\r
   v_uv = a_uv;\r
   // Pass through size\r
   v_size = a_size;\r
   // Pass through the Opacity to the fragment shader\r
   v_opacity = a_opacity;\r
   // Pass through the color to the fragment shader\r
   v_color = a_color;\r
   // Pass through the stroke color to the fragment shader\r
   v_strokeColor = a_strokeColor;\r
   // Pass through the stroke thickenss to the fragment shader\r
   v_strokeThickness = a_strokeThickness;\r
}`;class ni{constructor(){this.type="ex.rectangle",this.priority=0,this._maxRectangles=10922,this._rectangleCount=0,this._vertexIndex=0}initialize(t,e){this._gl=t,this._context=e,this._shader=new $e({gl:t,fragmentSource:Ys,vertexSource:ji}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",e.ortho),this._buffer=new ii({gl:t,size:16*4*this._maxRectangles,type:"dynamic"}),this._layout=new Le({gl:t,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_uv",2],["a_size",2],["a_opacity",1],["a_color",4],["a_strokeColor",4],["a_strokeThickness",1]]}),this._quads=new Ui(t,this._maxRectangles,!0)}dispose(){this._buffer.dispose(),this._quads.dispose(),this._shader.dispose(),this._context=null,this._gl=null}_isFull(){return this._rectangleCount>=this._maxRectangles}draw(...t){t[0]instanceof u&&t[1]instanceof u?this.drawLine.apply(this,t):this.drawRectangle.apply(this,t)}drawLine(t,e,i,n=1){this._isFull()&&this.flush(),this._rectangleCount++;const a=this._context.getTransform(),m=this._context.opacity,U=this._context.snapToPixel,mt=e.sub(t),Et=mt.size,St=mt.normalize().perpendicular(),Lt=n/2,Kt=a.multiply(St.scale(Lt).add(t)),ne=a.multiply(St.scale(-Lt).add(t)),ae=a.multiply(St.scale(Lt).add(e)),ke=a.multiply(St.scale(-Lt).add(e));U&&(Kt.x=~~(Kt.x+ti),Kt.y=~~(Kt.y+ti),ae.x=~~(ae.x+ti),ae.y=~~(ae.y+ti),ne.x=~~(ne.x+ti),ne.y=~~(ne.y+ti),ke.x=~~(ke.x+ti),ke.y=~~(ke.y+ti));const ze=0,ye=0,we=1,He=1,Pe=X.Transparent,vi=0,Ji=1,Xe=this._layout.vertexBuffer.bufferData;Xe[this._vertexIndex++]=Kt.x,Xe[this._vertexIndex++]=Kt.y,Xe[this._vertexIndex++]=ze,Xe[this._vertexIndex++]=ye,Xe[this._vertexIndex++]=Et,Xe[this._vertexIndex++]=n,Xe[this._vertexIndex++]=m,Xe[this._vertexIndex++]=i.r/255,Xe[this._vertexIndex++]=i.g/255,Xe[this._vertexIndex++]=i.b/255,Xe[this._vertexIndex++]=i.a,Xe[this._vertexIndex++]=Pe.r/255,Xe[this._vertexIndex++]=Pe.g/255,Xe[this._vertexIndex++]=Pe.b/255,Xe[this._vertexIndex++]=Pe.a,Xe[this._vertexIndex++]=vi/Ji,Xe[this._vertexIndex++]=ne.x,Xe[this._vertexIndex++]=ne.y,Xe[this._vertexIndex++]=ze,Xe[this._vertexIndex++]=He,Xe[this._vertexIndex++]=Et,Xe[this._vertexIndex++]=n,Xe[this._vertexIndex++]=m,Xe[this._vertexIndex++]=i.r/255,Xe[this._vertexIndex++]=i.g/255,Xe[this._vertexIndex++]=i.b/255,Xe[this._vertexIndex++]=i.a,Xe[this._vertexIndex++]=Pe.r/255,Xe[this._vertexIndex++]=Pe.g/255,Xe[this._vertexIndex++]=Pe.b/255,Xe[this._vertexIndex++]=Pe.a,Xe[this._vertexIndex++]=vi/Ji,Xe[this._vertexIndex++]=ae.x,Xe[this._vertexIndex++]=ae.y,Xe[this._vertexIndex++]=we,Xe[this._vertexIndex++]=ye,Xe[this._vertexIndex++]=Et,Xe[this._vertexIndex++]=n,Xe[this._vertexIndex++]=m,Xe[this._vertexIndex++]=i.r/255,Xe[this._vertexIndex++]=i.g/255,Xe[this._vertexIndex++]=i.b/255,Xe[this._vertexIndex++]=i.a,Xe[this._vertexIndex++]=Pe.r/255,Xe[this._vertexIndex++]=Pe.g/255,Xe[this._vertexIndex++]=Pe.b/255,Xe[this._vertexIndex++]=Pe.a,Xe[this._vertexIndex++]=vi/Ji,Xe[this._vertexIndex++]=ke.x,Xe[this._vertexIndex++]=ke.y,Xe[this._vertexIndex++]=we,Xe[this._vertexIndex++]=He,Xe[this._vertexIndex++]=Et,Xe[this._vertexIndex++]=n,Xe[this._vertexIndex++]=m,Xe[this._vertexIndex++]=i.r/255,Xe[this._vertexIndex++]=i.g/255,Xe[this._vertexIndex++]=i.b/255,Xe[this._vertexIndex++]=i.a,Xe[this._vertexIndex++]=Pe.r/255,Xe[this._vertexIndex++]=Pe.g/255,Xe[this._vertexIndex++]=Pe.b/255,Xe[this._vertexIndex++]=Pe.a,Xe[this._vertexIndex++]=vi/Ji}drawRectangle(t,e,i,n,a=X.Transparent,m=0){this._isFull()&&this.flush(),this._rectangleCount++;const U=this._context.getTransform(),mt=this._context.opacity,Et=this._context.snapToPixel,St=U.multiply(t.add(O(0,0))),Lt=U.multiply(t.add(O(e,0))),Kt=U.multiply(t.add(O(e,i))),ne=U.multiply(t.add(O(0,i)));Et&&(St.x=~~(St.x+ti),St.y=~~(St.y+ti),Lt.x=~~(Lt.x+ti),Lt.y=~~(Lt.y+ti),ne.x=~~(ne.x+ti),ne.y=~~(ne.y+ti),Kt.x=~~(Kt.x+ti),Kt.y=~~(Kt.y+ti));const ae=0,ke=0,ze=1,ye=1,we=this._layout.vertexBuffer.bufferData;we[this._vertexIndex++]=St.x,we[this._vertexIndex++]=St.y,we[this._vertexIndex++]=ae,we[this._vertexIndex++]=ke,we[this._vertexIndex++]=e,we[this._vertexIndex++]=i,we[this._vertexIndex++]=mt,we[this._vertexIndex++]=n.r/255,we[this._vertexIndex++]=n.g/255,we[this._vertexIndex++]=n.b/255,we[this._vertexIndex++]=n.a,we[this._vertexIndex++]=a.r/255,we[this._vertexIndex++]=a.g/255,we[this._vertexIndex++]=a.b/255,we[this._vertexIndex++]=a.a,we[this._vertexIndex++]=m,we[this._vertexIndex++]=ne.x,we[this._vertexIndex++]=ne.y,we[this._vertexIndex++]=ae,we[this._vertexIndex++]=ye,we[this._vertexIndex++]=e,we[this._vertexIndex++]=i,we[this._vertexIndex++]=mt,we[this._vertexIndex++]=n.r/255,we[this._vertexIndex++]=n.g/255,we[this._vertexIndex++]=n.b/255,we[this._vertexIndex++]=n.a,we[this._vertexIndex++]=a.r/255,we[this._vertexIndex++]=a.g/255,we[this._vertexIndex++]=a.b/255,we[this._vertexIndex++]=a.a,we[this._vertexIndex++]=m,we[this._vertexIndex++]=Lt.x,we[this._vertexIndex++]=Lt.y,we[this._vertexIndex++]=ze,we[this._vertexIndex++]=ke,we[this._vertexIndex++]=e,we[this._vertexIndex++]=i,we[this._vertexIndex++]=mt,we[this._vertexIndex++]=n.r/255,we[this._vertexIndex++]=n.g/255,we[this._vertexIndex++]=n.b/255,we[this._vertexIndex++]=n.a,we[this._vertexIndex++]=a.r/255,we[this._vertexIndex++]=a.g/255,we[this._vertexIndex++]=a.b/255,we[this._vertexIndex++]=a.a,we[this._vertexIndex++]=m,we[this._vertexIndex++]=Kt.x,we[this._vertexIndex++]=Kt.y,we[this._vertexIndex++]=ze,we[this._vertexIndex++]=ye,we[this._vertexIndex++]=e,we[this._vertexIndex++]=i,we[this._vertexIndex++]=mt,we[this._vertexIndex++]=n.r/255,we[this._vertexIndex++]=n.g/255,we[this._vertexIndex++]=n.b/255,we[this._vertexIndex++]=n.a,we[this._vertexIndex++]=a.r/255,we[this._vertexIndex++]=a.g/255,we[this._vertexIndex++]=a.b/255,we[this._vertexIndex++]=a.a,we[this._vertexIndex++]=m}hasPendingDraws(){return this._rectangleCount!==0}flush(){if(this._rectangleCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._quads.bind(),t.drawElements(t.TRIANGLES,this._rectangleCount*6,this._quads.bufferGlType,0),me.DrawnImagesCount+=this._rectangleCount,me.DrawCallCount++,this._rectangleCount=0,this._vertexIndex=0}}const Bi=`#version 300 es\r
precision highp float;\r
\r
// UV coord\r
in vec2 v_uv;\r
\r
// Color coord to blend with image\r
in lowp vec4 v_color;\r
\r
// Stroke color if used\r
in lowp vec4 v_strokeColor;\r
\r
// Stroke thickness if used\r
in lowp float v_strokeThickness;\r
\r
// Opacity\r
in float v_opacity;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  // make (0, 0) the center the uv \r
  vec2 uv = v_uv * 2.0 - 1.0;\r
\r
  vec4 color = v_color;\r
  vec4 strokeColor = v_strokeColor;\r
\r
  // circle border is at radius 1.0 \r
  // dist is > 0 when inside the circle \r
  float d = length(uv);\r
  float dist = 1.0 - length(uv);\r
\r
  // Fade based on fwidth\r
  float fade = fwidth(dot(uv, uv));\r
\r
  // if dist is greater than 0 step to 1;\r
  // when we cross this 0 threshold add a smooth fade\r
  float fill = smoothstep(-fade/2.0, fade/2.0, dist);\r
\r
  // if dist is greater than the stroke thickness step to 1\r
  float stroke = 1.0 - smoothstep(v_strokeThickness, v_strokeThickness + fade, dist);\r
\r
  strokeColor.a *= fill * stroke;\r
  strokeColor.rgb *= strokeColor.a;\r
\r
  color.a *= fill * (1.0 - stroke);\r
  color.rgb *= color.a;\r
\r
  vec4 finalColor = mix(vec4(0.0), (color + strokeColor), fill);\r
  finalColor.rgb = finalColor.rgb * v_opacity;\r
  finalColor.a = finalColor.a * v_opacity;\r
  fragColor = finalColor;\r
}`,Re=`#version 300 es\r
in vec2 a_position;\r
\r
// UV coordinate\r
in vec2 a_uv;\r
out vec2 v_uv;\r
\r
// Opacity \r
in float a_opacity;\r
out float v_opacity;\r
\r
in vec4 a_color;\r
out vec4 v_color;\r
\r
in vec4 a_strokeColor;\r
out vec4 v_strokeColor;\r
\r
in float a_strokeThickness;\r
out float v_strokeThickness;\r
\r
uniform mat4 u_matrix;\r
\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Pass through UV coords\r
   v_uv = a_uv;\r
   // Pass through the Opacity to the fragment shader\r
   v_opacity = a_opacity;\r
   // Pass through the color to the fragment shader\r
   v_color = a_color;\r
   // Pass through the stroke color to the fragment shader\r
   v_strokeColor = a_strokeColor;\r
   // Pass through the stroke thickenss to the fragment shader\r
   v_strokeThickness = a_strokeThickness;\r
}`;class si{constructor(){this.type="ex.circle",this.priority=0,this._maxCircles=10922,this._circleCount=0,this._vertexIndex=0}initialize(t,e){this._gl=t,this._context=e,this._shader=new $e({gl:t,fragmentSource:Bi,vertexSource:Re}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",e.ortho),this._buffer=new ii({gl:t,size:14*4*this._maxCircles,type:"dynamic"}),this._layout=new Le({gl:t,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_uv",2],["a_opacity",1],["a_color",4],["a_strokeColor",4],["a_strokeThickness",1]]}),this._quads=new Ui(t,this._maxCircles,!0)}dispose(){this._buffer.dispose(),this._quads.dispose(),this._shader.dispose(),this._context=null,this._gl=null}_isFull(){return this._circleCount>=this._maxCircles}draw(t,e,i,n=X.Transparent,a=0){this._isFull()&&this.flush(),this._circleCount++;const m=this._context.getTransform(),U=this._context.opacity,mt=this._context.snapToPixel,Et=m.multiply(t.add(O(-e,-e))),St=m.multiply(t.add(O(e,-e))),Lt=m.multiply(t.add(O(e,e))),Kt=m.multiply(t.add(O(-e,e)));mt&&(Et.x=~~(Et.x+ti),Et.y=~~(Et.y+ti),St.x=~~(St.x+ti),St.y=~~(St.y+ti),Kt.x=~~(Kt.x+ti),Kt.y=~~(Kt.y+ti),Lt.x=~~(Lt.x+ti),Lt.y=~~(Lt.y+ti));const ne=0,ae=0,ke=1,ze=1,ye=this._layout.vertexBuffer.bufferData;ye[this._vertexIndex++]=Et.x,ye[this._vertexIndex++]=Et.y,ye[this._vertexIndex++]=ne,ye[this._vertexIndex++]=ae,ye[this._vertexIndex++]=U,ye[this._vertexIndex++]=i.r/255,ye[this._vertexIndex++]=i.g/255,ye[this._vertexIndex++]=i.b/255,ye[this._vertexIndex++]=i.a,ye[this._vertexIndex++]=n.r/255,ye[this._vertexIndex++]=n.g/255,ye[this._vertexIndex++]=n.b/255,ye[this._vertexIndex++]=n.a,ye[this._vertexIndex++]=a/e,ye[this._vertexIndex++]=Kt.x,ye[this._vertexIndex++]=Kt.y,ye[this._vertexIndex++]=ne,ye[this._vertexIndex++]=ze,ye[this._vertexIndex++]=U,ye[this._vertexIndex++]=i.r/255,ye[this._vertexIndex++]=i.g/255,ye[this._vertexIndex++]=i.b/255,ye[this._vertexIndex++]=i.a,ye[this._vertexIndex++]=n.r/255,ye[this._vertexIndex++]=n.g/255,ye[this._vertexIndex++]=n.b/255,ye[this._vertexIndex++]=n.a,ye[this._vertexIndex++]=a/e,ye[this._vertexIndex++]=St.x,ye[this._vertexIndex++]=St.y,ye[this._vertexIndex++]=ke,ye[this._vertexIndex++]=ae,ye[this._vertexIndex++]=U,ye[this._vertexIndex++]=i.r/255,ye[this._vertexIndex++]=i.g/255,ye[this._vertexIndex++]=i.b/255,ye[this._vertexIndex++]=i.a,ye[this._vertexIndex++]=n.r/255,ye[this._vertexIndex++]=n.g/255,ye[this._vertexIndex++]=n.b/255,ye[this._vertexIndex++]=n.a,ye[this._vertexIndex++]=a/e,ye[this._vertexIndex++]=Lt.x,ye[this._vertexIndex++]=Lt.y,ye[this._vertexIndex++]=ke,ye[this._vertexIndex++]=ze,ye[this._vertexIndex++]=U,ye[this._vertexIndex++]=i.r/255,ye[this._vertexIndex++]=i.g/255,ye[this._vertexIndex++]=i.b/255,ye[this._vertexIndex++]=i.a,ye[this._vertexIndex++]=n.r/255,ye[this._vertexIndex++]=n.g/255,ye[this._vertexIndex++]=n.b/255,ye[this._vertexIndex++]=n.a,ye[this._vertexIndex++]=a/e}hasPendingDraws(){return this._circleCount!==0}flush(){if(this._circleCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._quads.bind(),t.drawElements(t.TRIANGLES,this._circleCount*6,this._quads.bufferGlType,0),me.DrawnImagesCount+=this._circleCount,me.DrawCallCount++,this._circleCount=0,this._vertexIndex=0}}class Te{constructor(t,e,i=100){this.builder=t,this.recycler=e,this.maxObjects=i,this.totalAllocations=0,this.index=0,this.objects=[],this.disableWarnings=!1,this._logger=ft.getInstance()}dispose(){this.objects.length=0}preallocate(){for(let t=0;t<this.maxObjects;t++)this.objects[t]=this.builder()}using(t){const e=t(this);return e?this.done(...e):this.done()}borrow(t){const e=this.get();t(e),this.index--}get(){return this.index===this.maxObjects&&(this.disableWarnings||this._logger.warn("Max pooled objects reached, possible memory leak? Doubling"),this.maxObjects=this.maxObjects*2),this.objects[this.index]?this.recycler(this.objects[this.index++]):(this.totalAllocations++,this.objects[this.index++]=this.builder())}done(...t){this.index=0;for(const e of t){const i=this.objects.indexOf(e);this.objects[i]=this.builder(),this.totalAllocations++}return t}}class Ht{constructor(){this.z=0,this.priority=0,this.transform=$t.identity(),this.state={z:0,opacity:1,tint:X.White,material:null}}}const Mi=`#version 300 es
in vec2 a_position;

in vec2 a_uv;
out vec2 v_uv;

in vec2 a_screenuv;
out vec2 v_screenuv;

uniform mat4 u_matrix;
uniform mat4 u_transform;

void main() {
  // Set the vertex position using the ortho & transform matrix
  gl_Position = u_matrix * u_transform * vec4(a_position, 0.0, 1.0);

  // Pass through the UV coord to the fragment shader
  v_uv = a_uv;
  v_screenuv = a_screenuv;
}
`;class Yi{constructor(t){this._logger=ft.getInstance(),this._color=X.Transparent,this._initialized=!1,this._images=new Map,this._textures=new Map;const{color:e,name:i,vertexSource:n,fragmentSource:a,graphicsContext:m,images:U}=t;if(this._name=i??"anonymous material",this._vertexSource=n??Mi,this._fragmentSource=a,this._color=e??this._color,!m)throw Error(`Material ${i} must be provided an excalibur webgl graphics context`);if(m instanceof hi?(this._graphicsContext=m,this._initialize(m)):this._logger.warn(`Material ${i} was created in 2D Canvas mode, currently only WebGL is supported`),U)for(const mt in U)this.addImageSource(mt,U[mt])}_initialize(t){if(this._initialized)return;const e=t.__gl;this._maxTextureSlots=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)-2,this._shader=t.createShader({vertexSource:this._vertexSource,fragmentSource:this._fragmentSource}),this._shader.compile(),this._initialized=!0}get name(){var t;return(t=this._name)!==null&&t!==void 0?t:"anonymous material"}get isUsingScreenTexture(){return this._fragmentSource.includes("u_screen_texture")}update(t){this._shader&&(this._shader.use(),t(this._shader))}getShader(){return this._shader}addImageSource(t,e){this._images.size<this._maxTextureSlots?this._images.set(t,e):this._logger.warn(`Max number texture slots ${this._maxTextureSlots} have been reached for material "${this.name}", no more textures will be uploaded due to hardware constraints.`)}removeImageSource(t){const e=this._images.get(t);this._graphicsContext.textureLoader.delete(e.image),this._images.delete(t)}_loadImageSource(t){const e=t.image,i=e.getAttribute(qt.Filtering),n=i?re(i):null,a=Vt(e.getAttribute(qt.WrappingX)),m=Vt(e.getAttribute(qt.WrappingY)),U=e.getAttribute("forceUpload")==="true",mt=this._graphicsContext.textureLoader.load(e,{filtering:n,wrapping:{x:a,y:m}},U);return e.removeAttribute("forceUpload"),this._textures.has(t)||this._textures.set(t,mt),mt}uploadAndBind(t,e=2){let i=e;for(const[n,a]of this._images.entries()){if(!a.isLoaded()){this._logger.warnOnce(`Image named ${n} in material ${this.name} not loaded, nothing will be uploaded to the shader. Did you forget to add this to a loader? https://excaliburjs.com/docs/loaders/`);continue}const m=this._loadImageSource(a);t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,m),this._shader.trySetUniformInt(n,i),i++}}use(){if(this._initialized)this._shader.use(),this._shader.trySetUniformFloatColor("u_color",this._color);else throw Error(`Material ${this.name} not yet initialized, use the ExcaliburGraphicsContext.createMaterial() to work around this.`)}}class Zi{constructor(){this.type="ex.material",this.priority=0,this._textures=[]}initialize(t,e){this._gl=t,this._context=e,this._buffer=new ii({gl:t,size:6*4,type:"dynamic"}),this._layout=new Le({gl:t,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_uv",2],["a_screenuv",2]],suppressWarnings:!0}),this._quads=new Ui(t,1,!0)}dispose(){this._buffer.dispose(),this._quads.dispose(),this._textures.length=0,this._context=null,this._gl=null}draw(t,e,i,n,a,m,U,mt,Et){var St,Lt,Kt,ne;const ae=this._gl,ke=this._context.material,ze=this._context.getTransform(),ye=this._context.opacity,we=ke.getShader(),He=this._layout.vertexBuffer.bufferData;let Pe=0,vi=t?.width||n||0,Ji=t?.height||a||0,Xe=[0,0,(St=n??t?.width)!==null&&St!==void 0?St:0,(Lt=a??t?.height)!==null&&Lt!==void 0?Lt:0],$i=[e??1,i??1];m!==void 0&&U!==void 0&&mt!==void 0&&Et!==void 0&&(Xe=[e??1,i??1,(Kt=n??t?.width)!==null&&Kt!==void 0?Kt:0,(ne=a??t?.height)!==null&&ne!==void 0?ne:0],$i=[m,U],vi=mt,Ji=Et),e=Xe[0],i=Xe[1];const Is=Xe[2],qs=Xe[3],bn=O($i[0],$i[1]),yn=O($i[0]+vi,$i[1]),wn=O($i[0],$i[1]+Ji),fn=O($i[0]+vi,$i[1]+Ji),Ks=t.width||vi,tn=t.height||Ji,Ni=e/Ks,br=i/tn,yr=(e+Is-.01)/Ks,wr=(i+qs-.01)/tn,Wr=ze.getPosition(),Ca=Wr.add(fn),Ea=Wr.x/this._context.width,Ia=Wr.y/this._context.height,ka=Ca.x/this._context.width,Ba=Ca.y/this._context.height;He[Pe++]=bn.x,He[Pe++]=bn.y,He[Pe++]=Ni,He[Pe++]=br,He[Pe++]=Ea,He[Pe++]=Ia,He[Pe++]=wn.x,He[Pe++]=wn.y,He[Pe++]=Ni,He[Pe++]=wr,He[Pe++]=Ea,He[Pe++]=Ba,He[Pe++]=yn.x,He[Pe++]=yn.y,He[Pe++]=yr,He[Pe++]=br,He[Pe++]=ka,He[Pe++]=Ia,He[Pe++]=fn.x,He[Pe++]=fn.y,He[Pe++]=yr,He[Pe++]=wr,He[Pe++]=ka,He[Pe++]=Ba;const cl=this._addImageAsTexture(t);ke.use(),this._layout.shader=we,this._layout.use(!0),we.trySetUniformFloat("u_time_ms",performance.now()),we.trySetUniformFloat("u_opacity",ye),we.trySetUniformFloatVector("u_resolution",O(this._context.width,this._context.height)),we.trySetUniformFloatVector("u_graphic_resolution",O(Ks,tn)),we.trySetUniformFloatVector("u_size",O(Is,qs)),we.trySetUniformMatrix("u_matrix",this._context.ortho),we.trySetUniformMatrix("u_transform",ze.to4x4()),ae.activeTexture(ae.TEXTURE0+0),ae.bindTexture(ae.TEXTURE_2D,cl),we.trySetUniformInt("u_graphic",0),ae.activeTexture(ae.TEXTURE0+1),ae.bindTexture(ae.TEXTURE_2D,this._context.materialScreenTexture),we.trySetUniformInt("u_screen_texture",1),ke.uploadAndBind(ae),this._quads.bind(),ae.drawElements(ae.TRIANGLES,6,this._quads.bufferGlType,0),me.DrawnImagesCount++,me.DrawCallCount++}_addImageAsTexture(t){const e=t.getAttribute(qt.Filtering),i=e?re(e):null,n=Vt(t.getAttribute(qt.WrappingX)),a=Vt(t.getAttribute(qt.WrappingY)),m=t.getAttribute("forceUpload")==="true",U=this._context.textureLoader.load(t,{filtering:i,wrapping:{x:n,y:a}},m);return t.removeAttribute("forceUpload"),this._textures.indexOf(U)===-1&&this._textures.push(U),U}hasPendingDraws(){return!1}flush(){}}const ti=1e-4;class Ii{constructor(t){this._webglCtx=t,this._debugText=new Me}drawRect(t,e,i,n,a={color:X.Black}){this.drawLine(O(t,e),O(t+i,e),{...a}),this.drawLine(O(t+i,e),O(t+i,e+n),{...a}),this.drawLine(O(t+i,e+n),O(t,e+n),{...a}),this.drawLine(O(t,e+n),O(t,e),{...a})}drawLine(t,e,i={color:X.Black}){this._webglCtx.draw("ex.line",t,e,i.color)}drawPoint(t,e={color:X.Black,size:5}){this._webglCtx.draw("ex.point",t,e.color,e.size)}drawText(t,e){this._debugText.write(this._webglCtx,t,e)}}class hi{get z(){return this._state.current.z}set z(t){this._state.current.z=t}get opacity(){return this._state.current.opacity}set opacity(t){this._state.current.opacity=t}get tint(){return this._state.current.tint}set tint(t){this._state.current.tint=t}get width(){return this.__gl.canvas.width}get height(){return this.__gl.canvas.height}get ortho(){return this._ortho}checkIfResolutionSupported(t){let e=!0;return(t.width>4096||t.height>4096)&&(e=!1),e}constructor(t){this._logger=ft.getInstance(),this._renderers=new Map,this._isDrawLifecycle=!1,this.useDrawSorting=!0,this._drawCallPool=new Te(()=>new Ht,ke=>(ke.priority=0,ke.z=0,ke.renderer=void 0,ke.args=void 0,ke),4e3),this._drawCallIndex=0,this._drawCalls=new Array(4e3).fill(null),this._postProcessTargets=[],this._postprocessors=[],this._transform=new Zt,this._state=new Yt,this.snapToPixel=!1,this.smoothing=!1,this.pixelArtSampler=!1,this.uvPadding=.01,this.backgroundColor=X.ExcaliburBlue,this.multiSampleAntialiasing=!0,this.transparency=!0,this._isContextLost=!1,this._disposed=!1,this._imageToWidth=new Map,this._imageToHeight=new Map,this.debug=new Ii(this),this._totalPostProcessorTime=0;const{canvasElement:e,context:i,enableTransparency:n,antialiasing:a,uvPadding:m,multiSampleAntialiasing:U,pixelArtSampler:mt,powerPreference:Et,snapToPixel:St,backgroundColor:Lt,useDrawSorting:Kt,handleContextLost:ne,handleContextRestored:ae}=t;if(this.__gl=i??e.getContext("webgl2",{antialias:a??this.smoothing,premultipliedAlpha:!1,alpha:n??this.transparency,depth:!1,powerPreference:Et??"high-performance"}),!this.__gl)throw Error("Failed to retrieve webgl context from browser");ne&&this.__gl.canvas.addEventListener("webglcontextlost",ne,!1),ae&&this.__gl.canvas.addEventListener("webglcontextrestored",ae,!1),this.__gl.canvas.addEventListener("webglcontextlost",()=>{this._isContextLost=!0}),this.__gl.canvas.addEventListener("webglcontextrestored",()=>{this._isContextLost=!1}),this.textureLoader=new Tt(this.__gl),this.snapToPixel=St??this.snapToPixel,this.smoothing=a??this.smoothing,this.transparency=n??this.transparency,this.pixelArtSampler=mt??this.pixelArtSampler,this.uvPadding=m??this.uvPadding,this.multiSampleAntialiasing=typeof U=="boolean"?U:this.multiSampleAntialiasing,this.samples=typeof U=="object"?U.samples:void 0,this.backgroundColor=Lt??this.backgroundColor,this.useDrawSorting=Kt??this.useDrawSorting,this._drawCallPool.disableWarnings=!0,this._drawCallPool.preallocate(),this._init()}dispose(){if(!this._disposed){this._disposed=!0,this.textureLoader.dispose();for(const t of this._renderers.values())t.dispose();this._renderers.clear(),this._drawCallPool.dispose(),this._drawCalls.length=0,this.__gl=null}}_init(){const t=this.__gl;this._ortho=Ot.ortho(0,t.canvas.width,t.canvas.height,0,400,-400),t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(this.backgroundColor.r/255,this.backgroundColor.g/255,this.backgroundColor.b/255,this.backgroundColor.a),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),this.register(new ys({uvPadding:this.uvPadding,pixelArtSampler:this.pixelArtSampler})),this.register(new Zi),this.register(new ni),this.register(new si),this.register(new Pi),this.register(new Je),this.materialScreenTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.materialScreenTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.bindTexture(t.TEXTURE_2D,null),this._screenRenderer=new qi(t),this._renderTarget=new gi({gl:t,transparency:this.transparency,width:t.canvas.width,height:t.canvas.height}),this._postProcessTargets=[new gi({gl:t,transparency:this.transparency,width:t.canvas.width,height:t.canvas.height}),new gi({gl:t,transparency:this.transparency,width:t.canvas.width,height:t.canvas.height})],this._msaaTarget=new gi({gl:t,transparency:this.transparency,width:t.canvas.width,height:t.canvas.height,antialias:this.multiSampleAntialiasing,samples:this.samples})}register(t){this._renderers.set(t.type,t),t.initialize(this.__gl,this)}get(t){return this._renderers.get(t)}_isCurrentRenderer(t){return!this._currentRenderer||this._currentRenderer===t}beginDrawLifecycle(){this._isDrawLifecycle=!0}endDrawLifecycle(){this._isDrawLifecycle=!1}draw(t,...e){if(this._isDrawLifecycle||this._logger.warnOnce(`Attempting to draw outside the the drawing lifecycle (preDraw/postDraw) is not supported and is a source of bugs/errors.
If you want to do custom drawing, use Actor.graphics, or any onPreDraw or onPostDraw handler.`),this._isContextLost){this._logger.errorOnce(`Unable to draw ${t}, the webgl context is lost`);return}const i=this._renderers.get(t);if(i)if(this.useDrawSorting){const n=this._drawCallPool.get();n.z=this._state.current.z,n.priority=i.priority,n.renderer=t,this.getTransform().clone(n.transform),n.state.z=this._state.current.z,n.state.opacity=this._state.current.opacity,n.state.tint=this._state.current.tint,n.state.material=this._state.current.material,n.args=e,this._drawCalls[this._drawCallIndex++]=n}else this._currentRenderer||(this._currentRenderer=i),this._isCurrentRenderer(i)||this._currentRenderer.flush(),i.draw(...e),this._currentRenderer=i;else throw Error(`No renderer with name ${t} has been registered`)}resetTransform(){this._transform.current=$t.identity()}updateViewport(t){const e=this.__gl;this._ortho=this._ortho=Ot.ortho(0,t.width,t.height,0,400,-400),this._renderTarget.setResolution(e.canvas.width,e.canvas.height),this._msaaTarget.setResolution(e.canvas.width,e.canvas.height),this._postProcessTargets[0].setResolution(e.canvas.width,e.canvas.height),this._postProcessTargets[1].setResolution(e.canvas.width,e.canvas.height)}_getImageWidth(t){let e=this._imageToWidth.get(t);return e===void 0&&(e=t.width,this._imageToWidth.set(t,e)),e}_getImageHeight(t){let e=this._imageToHeight.get(t);return e===void 0&&(e=t.height,this._imageToHeight.set(t,e)),e}drawImage(t,e,i,n,a,m,U,mt,Et){if(!(n===0||a===0)){{if(mt===0||Et===0)return;if(this._getImageWidth(t)===0||this._getImageHeight(t)===0)return}if(!t){ft.getInstance().warn("Cannot draw a null or undefined image"),console.trace&&console.trace();return}this._state.current.material?this.draw("ex.material",t,e,i,n,a,m,U,mt,Et):this.draw("ex.image",t,e,i,n,a,m,U,mt,Et)}}drawLine(t,e,i,n=1){this.draw("ex.rectangle",t,e,i,n)}drawRectangle(t,e,i,n,a,m){this.draw("ex.rectangle",t,e,i,n,a,m)}drawCircle(t,e,i,n,a){this.draw("ex.circle",t,e,i,n,a)}save(){this._transform.save(),this._state.save()}restore(){this._transform.restore(),this._state.restore()}translate(t,e){this._transform.translate(this.snapToPixel?~~(t+ti):t,this.snapToPixel?~~(e+ti):e)}rotate(t){this._transform.rotate(t)}scale(t,e){this._transform.scale(t,e)}transform(t){this._transform.current=t}getTransform(){return this._transform.current}multiply(t){this._transform.current.multiply(t,this._transform.current)}addPostProcessor(t){this._postprocessors.push(t),t.initialize(this.__gl)}removePostProcessor(t){const e=this._postprocessors.indexOf(t);e!==-1&&this._postprocessors.splice(e,1)}clearPostProcessors(){this._postprocessors.length=0}updatePostProcessors(t){for(const e of this._postprocessors){const i=e.getShader();i.use();const n=i.getUniforms();this._totalPostProcessorTime+=t,n.find(a=>a.name==="u_time_ms")&&i.setUniformFloat("u_time_ms",this._totalPostProcessorTime),n.find(a=>a.name==="u_elapsed_ms")&&i.setUniformFloat("u_elapsed_ms",t),n.find(a=>a.name==="u_resolution")&&i.setUniformFloatVector("u_resolution",O(this.width,this.height)),e.onUpdate&&e.onUpdate(t)}}set material(t){this._state.current.material=t}get material(){return this._state.current.material}createMaterial(t){return new Yi({...t,graphicsContext:this})}createShader(t){const e=this.__gl,{vertexSource:i,fragmentSource:n}=t,a=new $e({gl:e,vertexSource:i,fragmentSource:n});return a.compile(),a}clear(){const t=this.__gl;(this.multiSampleAntialiasing?this._msaaTarget:this._renderTarget).use(),t.clearColor(this.backgroundColor.r/255,this.backgroundColor.g/255,this.backgroundColor.b/255,this.backgroundColor.a),t.clear(t.COLOR_BUFFER_BIT)}flush(){if(this._isContextLost){this._logger.errorOnce("Unable to flush the webgl context is lost");return}let t=this.multiSampleAntialiasing?this._msaaTarget:this._renderTarget;if(t.use(),this.useDrawSorting){for(let a=this._drawCallIndex;a<this._drawCalls.length;a++)this._drawCalls[a]=null;const e=new Map;for(const[a]of this._renderers){let m=0;for(m=0;m<this._drawCallIndex&&this._drawCalls[m].renderer!==a;m++);e.set(a,m)}this._drawCalls.sort((a,m)=>{if(a===null||m===null)return 0;const U=a.z-m.z,mt=e.get(a.renderer)-e.get(m.renderer),Et=a.priority-m.priority;return U===0?Et===0?mt:Et:U});const i=this._transform.current,n=this._state.current;if(this._drawCalls.length&&this._drawCallIndex){let a=this._drawCalls[0].renderer,m=this._renderers.get(a);for(let U=0;U<this._drawCallIndex;U++)this._transform.current=this._drawCalls[U].transform,this._state.current=this._drawCalls[U].state,this._drawCalls[U].renderer!==a&&(m.flush(),a=this._drawCalls[U].renderer,m=this._renderers.get(a)),m instanceof Zi&&this.material.isUsingScreenTexture&&(t.copyToTexture(this.materialScreenTexture),t.use()),m.draw(...this._drawCalls[U].args);m.hasPendingDraws()&&m.flush()}this._transform.current=i,this._state.current=n,this._drawCallPool.done(),this._drawCallIndex=0,this._imageToHeight.clear(),this._imageToWidth.clear()}else for(const e of this._renderers.values())e.hasPendingDraws()&&e.flush();t.disable(),this._postprocessors.length>0&&t.toRenderSource().use();for(let e=0;e<this._postprocessors.length;e++)t=this._postProcessTargets[e%2],this._postProcessTargets[e%2].use(),this._screenRenderer.renderWithPostProcessor(this._postprocessors[e]),this._postProcessTargets[e%2].toRenderSource().use();t.blitToScreen()}}const Be=1e-4;class qe{constructor(t){this._ex=t,this._debugText=new Me}drawRect(t,e,i,n){this._ex.__ctx.save(),this._ex.__ctx.strokeStyle="red",this._ex.__ctx.strokeRect(this._ex.snapToPixel?~~(t+Be):t,this._ex.snapToPixel?~~(e+Be):e,this._ex.snapToPixel?~~(i+Be):i,this._ex.snapToPixel?~~(n+Be):n),this._ex.__ctx.restore()}drawLine(t,e,i={color:X.Black}){this._ex.__ctx.save(),this._ex.__ctx.beginPath(),this._ex.__ctx.strokeStyle=i.color.toString(),this._ex.__ctx.moveTo(this._ex.snapToPixel?~~(t.x+Be):t.x,this._ex.snapToPixel?~~(t.y+Be):t.y),this._ex.__ctx.lineTo(this._ex.snapToPixel?~~(e.x+Be):e.x,this._ex.snapToPixel?~~(e.y+Be):e.y),this._ex.__ctx.lineWidth=2,this._ex.__ctx.stroke(),this._ex.__ctx.closePath(),this._ex.__ctx.restore()}drawPoint(t,e={color:X.Black,size:5}){this._ex.__ctx.save(),this._ex.__ctx.beginPath(),this._ex.__ctx.fillStyle=e.color.toString(),this._ex.__ctx.arc(this._ex.snapToPixel?~~(t.x+Be):t.x,this._ex.snapToPixel?~~(t.y+Be):t.y,e.size,0,Math.PI*2),this._ex.__ctx.fill(),this._ex.__ctx.closePath(),this._ex.__ctx.restore()}drawText(t,e){this._debugText.write(this._ex,t,e)}}class ai{get width(){return this.__ctx.canvas.width}get height(){return this.__ctx.canvas.height}get opacity(){return this._state.current.opacity}set opacity(t){this._state.current.opacity=t}get tint(){return this._state.current.tint}set tint(t){this._state.current.tint=t}get smoothing(){return this.__ctx.imageSmoothingEnabled}set smoothing(t){this.__ctx.imageSmoothingEnabled=t}constructor(t){this.useDrawSorting=!1,this.z=0,this.backgroundColor=X.ExcaliburBlue,this._state=new Yt,this.snapToPixel=!1,this.debug=new qe(this);const{canvasElement:e,context:i,enableTransparency:n,snapToPixel:a,antialiasing:m,backgroundColor:U}=t;if(this.__ctx=i??e.getContext("2d",{alpha:n??!0}),!this.__ctx)throw new Error("Cannot build new ExcaliburGraphicsContext2D for some reason!");this.backgroundColor=U??this.backgroundColor,this.snapToPixel=a??this.snapToPixel,this.smoothing=m??this.smoothing}resetTransform(){this.__ctx.resetTransform()}updateViewport(t){}drawImage(t,e,i,n,a,m,U,mt,Et){if(n===0||a===0)return;if(mt===0||Et===0)return;if(t.width===0||t.height===0)return;this.__ctx.globalAlpha=this.opacity;const St=[t,e,i,n,a,m,U,mt,Et].filter(Lt=>Lt!==void 0).map(Lt=>typeof Lt=="number"&&this.snapToPixel?~~Lt:Lt);this.__ctx.drawImage.apply(this.__ctx,St),me.DrawCallCount++,me.DrawnImagesCount=1}drawLine(t,e,i,n=1){this.__ctx.save(),this.__ctx.beginPath(),this.__ctx.strokeStyle=i.toString(),this.__ctx.moveTo(this.snapToPixel?~~(t.x+Be):t.x,this.snapToPixel?~~(t.y+Be):t.y),this.__ctx.lineTo(this.snapToPixel?~~(e.x+Be):e.x,this.snapToPixel?~~(e.y+Be):e.y),this.__ctx.lineWidth=n,this.__ctx.stroke(),this.__ctx.closePath(),this.__ctx.restore()}drawRectangle(t,e,i,n){this.__ctx.save(),this.__ctx.fillStyle=n.toString(),this.__ctx.fillRect(this.snapToPixel?~~(t.x+Be):t.x,this.snapToPixel?~~(t.y+Be):t.y,this.snapToPixel?~~(e+Be):e,this.snapToPixel?~~(i+Be):i),this.__ctx.restore()}drawCircle(t,e,i,n,a){this.__ctx.save(),this.__ctx.beginPath(),n&&(this.__ctx.strokeStyle=n.toString()),a&&(this.__ctx.lineWidth=a),this.__ctx.fillStyle=i.toString(),this.__ctx.arc(this.snapToPixel?~~(t.x+Be):t.x,this.snapToPixel?~~(t.y+Be):t.y,e,0,Math.PI*2),this.__ctx.fill(),n&&this.__ctx.stroke(),this.__ctx.closePath(),this.__ctx.restore()}save(){this.__ctx.save(),this._state.save()}restore(){this.__ctx.restore(),this._state.restore()}translate(t,e){this.__ctx.translate(this.snapToPixel?~~(t+Be):t,this.snapToPixel?~~(e+Be):e)}rotate(t){this.__ctx.rotate(t)}scale(t,e){this.__ctx.scale(t,e)}getTransform(){throw new Error("Not implemented")}multiply(t){this.__ctx.setTransform(this.__ctx.getTransform().multiply(t.toDOMMatrix()))}addPostProcessor(t){}removePostProcessor(t){}clearPostProcessors(){}updatePostProcessors(t){}beginDrawLifecycle(){}endDrawLifecycle(){}set material(t){this._state.current.material=t}get material(){return this._state.current.material}createMaterial(t){return null}clear(){this.__ctx.clearRect(0,0,this.width,this.height),this.__ctx.fillStyle=this.backgroundColor.toString(),this.__ctx.fillRect(0,0,this.width,this.height),me.clear()}flush(){}dispose(){this.__ctx=null}}var wi;(function(h){h.Fixed="Fixed",h.FitContainerAndFill="FitContainerAndFill",h.FitScreenAndFill="FitScreenAndFill",h.FitContainerAndZoom="FitContainerAndZoom",h.FitScreenAndZoom="FitScreenAndZoom",h.FitScreen="FitScreen",h.FillScreen="FillScreen",h.FitContainer="FitContainer",h.FillContainer="FillContainer"})(wi||(wi={}));class Qi{static get SVGA(){return{width:800,height:600}}static get Standard(){return{width:1920,height:1080}}static get Atari2600(){return{width:160,height:192}}static get GameBoy(){return{width:160,height:144}}static get GameBoyAdvance(){return{width:240,height:160}}static get NintendoDS(){return{width:256,height:192}}static get NES(){return{width:256,height:224}}static get SNES(){return{width:256,height:244}}}const Si={ScreenResize:"resize",PixelRatioChange:"pixelratio",FullScreenChange:"fullscreen"};class xi{constructor(t){var e,i,n,a;this.events=new l,this._antialiasing=!0,this._canvasImageRendering="auto",this._resolutionStack=[],this._viewportStack=[],this._pixelRatioOverride=null,this._isFullScreen=!1,this._isDisposed=!1,this._logger=ft.getInstance(),this._fullscreenChangeHandler=()=>{this._isDisposed||(this._isFullScreen=!this._isFullScreen,this._logger.debug("Fullscreen Change",this._isFullScreen),this.events.emit("fullscreen",{fullscreen:this.isFullScreen}))},this._pixelRatioChangeHandler=()=>{this._isDisposed||(this._logger.debug("Pixel Ratio Change",window.devicePixelRatio),this._listenForPixelRatio(),this._devicePixelRatio=this._calculateDevicePixelRatio(),this.applyResolutionAndViewport(),this.events.emit("pixelratio",{pixelRatio:this.pixelRatio}))},this._resizeHandler=()=>{if(this._isDisposed)return;const m=this.parent;this._logger.debug("View port resized"),this._setResolutionAndViewportByDisplayMode(m),this.applyResolutionAndViewport(),this.events.emit("resize",{resolution:this.resolution,viewport:this.viewport})},this._devicePixelRatio=this._calculateDevicePixelRatio(),this._contentArea=new ut,this._unsafeArea=new ut,this.viewport=t.viewport,this.resolution=(e=t.resolution)!==null&&e!==void 0?e:{...this.viewport},this._contentResolution=this.resolution,this._displayMode=(i=t.displayMode)!==null&&i!==void 0?i:wi.Fixed,this._canvas=t.canvas,this.graphicsContext=t.context,this._antialiasing=(n=t.antialiasing)!==null&&n!==void 0?n:this._antialiasing,this._canvasImageRendering=(a=t.canvasImageRendering)!==null&&a!==void 0?a:this._canvasImageRendering,this._browser=t.browser,this._pixelRatioOverride=t.pixelRatio,this._applyDisplayMode(),this._listenForPixelRatio(),this._canvas.addEventListener("fullscreenchange",this._fullscreenChangeHandler),this.applyResolutionAndViewport()}_listenForPixelRatio(){this._mediaQueryList&&!this._mediaQueryList.addEventListener&&this._mediaQueryList.removeListener(this._pixelRatioChangeHandler),this._mediaQueryList=this._browser.window.nativeComponent.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener?this._mediaQueryList.addEventListener("change",this._pixelRatioChangeHandler,{once:!0}):this._mediaQueryList.addListener(this._pixelRatioChangeHandler)}dispose(){this._isDisposed||(this._isDisposed=!0,this.events.clear(),this._browser.window.off("resize",this._resizeHandler),this._browser.window.clear(),this._resizeObserver&&this._resizeObserver.disconnect(),this.parent.removeEventListener("resize",this._resizeHandler),this._mediaQueryList.removeEventListener?this._mediaQueryList.removeEventListener("change",this._pixelRatioChangeHandler):this._mediaQueryList.removeListener(this._pixelRatioChangeHandler),this._canvas.removeEventListener("fullscreenchange",this._fullscreenChangeHandler),this._canvas=null)}_calculateDevicePixelRatio(){return window.devicePixelRatio<1?1:window.devicePixelRatio||1}get pixelRatio(){return this._pixelRatioOverride?this._pixelRatioOverride:this._devicePixelRatio}get pixelRatioOverride(){return this._pixelRatioOverride}set pixelRatioOverride(t){this._pixelRatioOverride=t}get isHiDpi(){return this.pixelRatio!==1}get displayMode(){return this._displayMode}get canvas(){return this._canvas}get parent(){switch(this.displayMode){case wi.FillContainer:case wi.FitContainer:case wi.FitContainerAndFill:case wi.FitContainerAndZoom:return this.canvas.parentElement||document.body;default:return window}}get resolution(){return this._resolution}set resolution(t){this._resolution=t}get viewport(){return this._viewport?this._viewport:this._resolution}set viewport(t){this._viewport=t}get aspectRatio(){return this._resolution.width/this._resolution.height}get scaledWidth(){return this._resolution.width*this.pixelRatio}get scaledHeight(){return this._resolution.height*this.pixelRatio}setCurrentCamera(t){this._camera=t}pushResolutionAndViewport(){this._resolutionStack.push(this.resolution),this._viewportStack.push(this.viewport),this.resolution={...this.resolution},this.viewport={...this.viewport}}peekViewport(){return this._viewportStack[this._viewportStack.length-1]}peekResolution(){return this._resolutionStack[this._resolutionStack.length-1]}popResolutionAndViewport(){this._resolutionStack.length&&this._viewportStack.length&&(this.resolution=this._resolutionStack.pop(),this.viewport=this._viewportStack.pop())}applyResolutionAndViewport(){if(this.graphicsContext instanceof hi&&!this.graphicsContext.checkIfResolutionSupported({width:this.scaledWidth,height:this.scaledHeight})&&(this._logger.warnOnce(`The currently configured resolution (${this.resolution.width}x${this.resolution.height}) and pixel ratio (${this.pixelRatio}) are too large for the platform WebGL implementation, this may work but cause WebGL rendering to behave oddly. Try reducing the resolution or disabling Hi DPI scaling to avoid this (read more here https://excaliburjs.com/docs/screens#understanding-viewport--resolution).`),!this.pixelRatioOverride)){let n=Math.max(1,this.pixelRatio-.5),a=!1;for(;n>1&&!a;){n=Math.max(1,n-.5);const m=this._resolution.width*n,U=this._resolution.height*n;a=this.graphicsContext.checkIfResolutionSupported({width:m,height:U})}this.pixelRatioOverride=n,this._logger.warnOnce(`Scaled resolution too big attempted recovery! Pixel ratio was automatically reduced to (${this.pixelRatio}) to avoid 4k texture limit. Setting \`ex.Engine({pixelRatio: ...}) will override any automatic recalculation, do so at your own risk.\`  (read more here https://excaliburjs.com/docs/screens#understanding-viewport--resolution).`)}this._canvas.width=this.scaledWidth,this._canvas.height=this.scaledHeight,this._canvasImageRendering==="auto"?this._canvas.style.imageRendering="auto":(this._canvas.style.imageRendering="pixelated",this._canvas.style.imageRendering===""&&(this._canvas.style.imageRendering="crisp-edges"));const t=this.viewport.widthUnit==="percent"?"%":"px",e=this.viewport.heightUnit==="percent"?"%":"px";this._canvas.style.width=this.viewport.width+t,this._canvas.style.height=this.viewport.height+e,this.graphicsContext.updateViewport(this.resolution),this.graphicsContext.resetTransform(),this.graphicsContext.smoothing=this._antialiasing,this.graphicsContext instanceof ai&&this.graphicsContext.scale(this.pixelRatio,this.pixelRatio)}get antialiasing(){return this._antialiasing}set antialiasing(t){this._antialiasing=t,this.graphicsContext.smoothing=this._antialiasing}get isFullScreen(){return this._isFullScreen}goFullScreen(t){if(t){const e=document.getElementById(t);if(e)return e.getAttribute("ex-fullscreen-listener")||(e.setAttribute("ex-fullscreen-listener","true"),e.addEventListener("fullscreenchange",this._fullscreenChangeHandler)),e.requestFullscreen()}return this._canvas.requestFullscreen()}exitFullScreen(){return document.exitFullscreen()}_viewportToPixels(t){return{width:t.widthUnit==="percent"?this.canvas.offsetWidth:t.width,height:t.heightUnit==="percent"?this.canvas.offsetHeight:t.height}}pageToScreenCoordinates(t){let e=t.x,i=t.y;this._isFullScreen||(e-=Ct(this._canvas).x,i-=Ct(this._canvas).y);const n=this._viewportToPixels(this.viewport);if(this._isFullScreen)if(window.innerWidth/this.aspectRatio<window.innerHeight){const a=window.innerWidth/this.aspectRatio,m=(window.innerHeight-a)/2;i=(i-m)/a*n.height,e=e/window.innerWidth*n.width}else{const a=window.innerHeight*this.aspectRatio,m=(window.innerWidth-a)/2;e=(e-m)/a*n.width,i=i/window.innerHeight*n.height}return e=e/n.width*this.resolution.width,i=i/n.height*this.resolution.height,e=e-this.contentArea.left,i=i-this.contentArea.top,new u(e,i)}screenToPageCoordinates(t){let e=t.x,i=t.y;const n=this._viewportToPixels(this.viewport);if(e=e/this.resolution.width*n.width,i=i/this.resolution.height*n.height,this._isFullScreen)if(window.innerWidth/this.aspectRatio<window.innerHeight){const a=window.innerWidth/this.aspectRatio,m=(window.innerHeight-a)/2;i=i/n.height*a+m,e=e/n.width*window.innerWidth}else{const a=window.innerHeight*this.aspectRatio,m=(window.innerWidth-a)/2;e=e/n.width*a+m,i=i/n.height*window.innerHeight}return this._isFullScreen||(e+=Ct(this._canvas).x,i+=Ct(this._canvas).y),new u(e,i)}screenToWorldCoordinates(t){return t=t.add(O(this.contentArea.left,this.contentArea.top)),this._camera?this._camera.inverse.multiply(t):t.sub(O(this.resolution.width/2,this.resolution.height/2))}worldToScreenCoordinates(t){return this._camera?this._camera.transform.multiply(t):t.add(O(this.resolution.width/2,this.resolution.height/2))}pageToWorldCoordinates(t){const e=this.pageToScreenCoordinates(t);return this.screenToWorldCoordinates(e)}worldToPageCoordinates(t){const e=this.worldToScreenCoordinates(t);return this.screenToPageCoordinates(e)}getWorldBounds(){return ut.fromDimension(this.resolution.width,this.resolution.height,u.Half).scale(O(1/this._camera.zoom,1/this._camera.zoom)).rotate(this._camera.rotation).translate(this._camera.drawPos)}getScreenBounds(){return ut.fromDimension(this.resolution.width,this.resolution.height,u.Zero,u.Zero)}get canvasWidth(){return this.canvas.width}get halfCanvasWidth(){return this.canvas.width/2}get canvasHeight(){return this.canvas.height}get halfCanvasHeight(){return this.canvas.height/2}get drawWidth(){return this._camera?this.resolution.width/this._camera.zoom:this.resolution.width}get halfDrawWidth(){return this.drawWidth/2}get drawHeight(){return this._camera?this.resolution.height/this._camera.zoom:this.resolution.height}get halfDrawHeight(){return this.drawHeight/2}get center(){return O(this.halfDrawWidth,this.halfDrawHeight)}get contentArea(){return this._contentArea}get unsafeArea(){return this._unsafeArea}_computeFit(){document.body.style.margin="0px",document.body.style.overflow="hidden";const t=this.aspectRatio;let e=0,i=0;window.innerWidth/t<window.innerHeight?(e=window.innerWidth,i=window.innerWidth/t):(e=window.innerHeight*t,i=window.innerHeight),this.viewport={width:e,height:i},this._contentArea=ut.fromDimension(this.resolution.width,this.resolution.height,u.Zero),this._unsafeArea=ut.fromDimension(this.resolution.width,this.resolution.height,u.Zero),this.events.emit("resize",{resolution:this.resolution,viewport:this.viewport})}_computeFitScreenAndFill(){document.body.style.margin="0px",document.body.style.overflow="hidden";const t=window.innerWidth,e=window.innerHeight;this._computeFitAndFill(t,e),this.events.emit("resize",{resolution:this.resolution,viewport:this.viewport})}_computeFitContainerAndFill(){this.canvas.style.width="100%",this.canvas.style.height="100%",this._computeFitAndFill(this.canvas.offsetWidth,this.canvas.offsetHeight,{width:100,widthUnit:"percent",height:100,heightUnit:"percent"}),this.events.emit("resize",{resolution:this.resolution,viewport:this.viewport})}_computeFitAndFill(t,e,i){if(this.viewport=i??{width:t,height:e},t/e<=this._contentResolution.width/this._contentResolution.height){this.resolution={width:t*this._contentResolution.width/t,height:t*this._contentResolution.width/t*e/t};const n=(this.resolution.height-this._contentResolution.height)/2;this._contentArea=new ut({top:n,left:0,right:this._contentResolution.width,bottom:this.resolution.height-n}),this._unsafeArea=new ut({top:-n,left:0,right:this._contentResolution.width,bottom:this.resolution.height+n})}else{this.resolution={width:e*this._contentResolution.height/e*t/e,height:e*this._contentResolution.height/e};const n=(this.resolution.width-this._contentResolution.width)/2;this._contentArea=new ut({top:0,left:n,right:this.resolution.width-n,bottom:this._contentResolution.height}),this._unsafeArea=new ut({top:0,left:-n,right:this.resolution.width+n,bottom:this._contentResolution.height})}}_computeFitScreenAndZoom(){document.body.style.margin="0px",document.body.style.overflow="hidden",this.canvas.style.position="absolute";const t=window.innerWidth,e=window.innerHeight;this._computeFitAndZoom(t,e),this.events.emit("resize",{resolution:this.resolution,viewport:this.viewport})}_computeFitContainerAndZoom(){this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="relative";const t=this.canvas.parentElement;t.style.overflow="hidden";const{offsetWidth:e,offsetHeight:i}=this.canvas;this._computeFitAndZoom(e,i),this.events.emit("resize",{resolution:this.resolution,viewport:this.viewport})}_computeFitAndZoom(t,e){const i=this.aspectRatio;let n=0,a=0;t/i<e?(n=t,a=t/i):(n=e*i,a=e);const m=t/n,U=e/a,mt=Math.max(m,U),Et=n*mt,St=a*mt;Et>t?this.canvas.style.left=-(Et-t)/2+"px":this.canvas.style.left="",St>e?this.canvas.style.top=-(St-e)/2+"px":this.canvas.style.top="",this.viewport={width:Et,height:St};const Lt=ut.fromDimension(this.viewport.width,this.viewport.height,u.Zero);if(this.viewport.width>t){const Kt=(this.viewport.width-t)/this.viewport.width*this.resolution.width;Lt.top=0,Lt.left=Kt/2,Lt.right=this.resolution.width-Kt/2,Lt.bottom=this.resolution.height}if(this.viewport.height>e){const Kt=(this.viewport.height-e)/this.viewport.height*this.resolution.height;Lt.top=Kt/2,Lt.left=0,Lt.bottom=this.resolution.height-Kt/2,Lt.right=this.resolution.width}this._contentArea=Lt}_computeFitContainer(){const t=this.aspectRatio;let e=0,i=0,n="pixel",a="pixel";const m=this.canvas.parentElement;m.clientWidth/t<m.clientHeight?(this.canvas.style.width="100%",e=100,n="percent",i=this.canvas.offsetWidth/t):(this.canvas.style.height="100%",i=100,a="percent",e=this.canvas.offsetHeight*t),this.viewport={width:e,widthUnit:n,height:i,heightUnit:a},this._contentArea=ut.fromDimension(this.resolution.width,this.resolution.height,u.Zero),this.events.emit("resize",{resolution:this.resolution,viewport:this.viewport})}_applyDisplayMode(){this._setResolutionAndViewportByDisplayMode(this.parent),this.parent instanceof Window?this._browser.window.on("resize",this._resizeHandler):(this._resizeObserver=new ResizeObserver(()=>{this._resizeHandler()}),this._resizeObserver.observe(this.parent)),this.parent.addEventListener("resize",this._resizeHandler)}_setResolutionAndViewportByDisplayMode(t){this.displayMode===wi.FillContainer&&(this.canvas.style.width="100%",this.canvas.style.height="100%",this.viewport={width:100,widthUnit:"percent",height:100,heightUnit:"percent"},this.resolution={width:this.canvas.offsetWidth,height:this.canvas.offsetHeight}),this.displayMode===wi.FillScreen&&(document.body.style.margin="0px",document.body.style.overflow="hidden",this.resolution={width:t.innerWidth,height:t.innerHeight},this.viewport=this.resolution),this._contentArea=ut.fromDimension(this.resolution.width,this.resolution.height,u.Zero),this.displayMode===wi.FitScreen&&this._computeFit(),this.displayMode===wi.FitContainer&&this._computeFitContainer(),this.displayMode===wi.FitScreenAndFill&&this._computeFitScreenAndFill(),this.displayMode===wi.FitContainerAndFill&&this._computeFitContainerAndFill(),this.displayMode===wi.FitScreenAndZoom&&this._computeFitScreenAndZoom(),this.displayMode===wi.FitContainerAndZoom&&this._computeFitContainerAndZoom()}}class Fi{static create(){return this._INSTANCE||(window.AudioContext||window.webkitAudioContext)&&(this._INSTANCE=new AudioContext),this._INSTANCE}}Fi._INSTANCE=null;function Li(h){return!!h.playbackState}class Gi{static unlock(){return new Promise((e,i)=>{if(Gi._UNLOCKED||!Fi.create())return e(!0);const n=setTimeout(()=>{ft.getInstance().warn("Excalibur was unable to unlock the audio context, audio probably will not play in this browser."),e(!1)},200),a=Fi.create();a.resume().then(()=>{const m=a.createBuffer(1,1,22050),U=a.createBufferSource();let mt=!1;U.buffer=m,U.connect(a.destination),U.onended=()=>mt=!0,U.start(0),setTimeout(()=>{Li(U)?(U.playbackState===U.PLAYING_STATE||U.playbackState===U.FINISHED_STATE)&&(Gi._UNLOCKED=!0):(a.currentTime>0||mt)&&(Gi._UNLOCKED=!0)},0),clearTimeout(n),e(!0)},()=>{i()})})}static isUnlocked(){return this._UNLOCKED}}Gi._UNLOCKED=!1;class Xi extends It{constructor(t){var e,i,n,a,m,U,mt,Et,St,Lt;super(Ut(t,["width","height"])),this.filtering=null,this.lineCap="butt",this.quality=1,this._dirty=!0,this._smoothing=!1,this._color=Ee(X.Black,()=>this.flagDirty()),this._lineWidth=1,this._lineDash=[],this._padding=0,t&&(this.quality=(e=t.quality)!==null&&e!==void 0?e:this.quality,this.color=(i=t.color)!==null&&i!==void 0?i:X.Black,this.strokeColor=t?.strokeColor,this.smoothing=(n=t.smoothing)!==null&&n!==void 0?n:this.smoothing,this.lineWidth=(a=t.lineWidth)!==null&&a!==void 0?a:this.lineWidth,this.lineDash=(m=t.lineDash)!==null&&m!==void 0?m:this.lineDash,this.lineCap=(U=t.lineCap)!==null&&U!==void 0?U:this.lineCap,this.padding=(mt=t.padding)!==null&&mt!==void 0?mt:this.padding,this.filtering=(Et=t.filtering)!==null&&Et!==void 0?Et:this.filtering),this._bitmap=document.createElement("canvas");const Kt=(St=t?.width)!==null&&St!==void 0?St:this._bitmap.width,ne=(Lt=t?.height)!==null&&Lt!==void 0?Lt:this._bitmap.height;this.width=Kt,this.height=ne;const ae=this._bitmap.getContext("2d");if(ae)this._ctx=ae;else throw new Error("Browser does not support 2d canvas drawing, cannot create Raster graphic")}cloneRasterOptions(){return{color:this.color?this.color.clone():null,strokeColor:this.strokeColor?this.strokeColor.clone():null,smoothing:this.smoothing,lineWidth:this.lineWidth,lineDash:this.lineDash,lineCap:this.lineCap,quality:this.quality,padding:this.padding}}get dirty(){return this._dirty}flagDirty(){this._dirty=!0}get width(){return Math.abs(this._getTotalWidth()*this.scale.x)}set width(t){t/=Math.abs(this.scale.x),this._bitmap.width=t,this._originalWidth=t,this.flagDirty()}get height(){return Math.abs(this._getTotalHeight()*this.scale.y)}set height(t){t/=Math.abs(this.scale.y),this._bitmap.height=t,this._originalHeight=t,this.flagDirty()}_getTotalWidth(){var t;return(((t=this._originalWidth)!==null&&t!==void 0?t:this._bitmap.width)+this.padding*2)*1}_getTotalHeight(){var t;return(((t=this._originalHeight)!==null&&t!==void 0?t:this._bitmap.height)+this.padding*2)*1}get localBounds(){return ut.fromDimension(this._getTotalWidth()*this.scale.x,this._getTotalHeight()*this.scale.y,u.Zero)}get smoothing(){return this._smoothing}set smoothing(t){this._smoothing=t,this.flagDirty()}get color(){return this._color}set color(t){this.flagDirty(),this._color=Ee(t,()=>this.flagDirty())}get strokeColor(){return this._strokeColor}set strokeColor(t){this.flagDirty(),this._strokeColor=Ee(t,()=>this.flagDirty())}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.flagDirty()}get lineDash(){return this._lineDash}set lineDash(t){this._lineDash=t,this.flagDirty()}get padding(){return this._padding}set padding(t){this._padding=t,this.flagDirty()}rasterize(){this._dirty=!1,this._ctx.clearRect(0,0,this._getTotalWidth(),this._getTotalHeight()),this._ctx.save(),this._applyRasterProperties(this._ctx),this.execute(this._ctx),this._ctx.restore()}_applyRasterProperties(t){var e,i,n;this._bitmap.width=this._getTotalWidth()*this.quality,this._bitmap.height=this._getTotalHeight()*this.quality,this._bitmap.setAttribute("filtering",this.filtering),this._bitmap.setAttribute("forceUpload","true"),t.scale(this.quality,this.quality),t.translate(this.padding,this.padding),t.imageSmoothingEnabled=this.smoothing,t.lineWidth=this.lineWidth,t.setLineDash((e=this.lineDash)!==null&&e!==void 0?e:t.getLineDash()),t.lineCap=this.lineCap,t.strokeStyle=(i=this.strokeColor)===null||i===void 0?void 0:i.toString(),t.fillStyle=(n=this.color)===null||n===void 0?void 0:n.toString()}_drawImage(t,e,i){this._dirty&&this.rasterize(),t.scale(1/this.quality,1/this.quality),t.drawImage(this._bitmap,e,i)}}class rs extends Xi{get ctx(){return this._ctx}constructor(t){super(t),this._options=t}clone(){return new rs({...this._options,...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(t){var e,i;!((e=this._options)===null||e===void 0)&&e.draw&&((i=this._options)===null||i===void 0||i.draw(t)),this._options.cache||this.flagDirty()}}class fs{}fs.type={any:"",blob:"blob",json:"json",text:"text",document:"document",arraybuffer:"arraybuffer"};class _s{constructor(){this.states=new Map}get currentState(){return this._currentState}set currentState(t){this._currentState=t}static create(t,e){const i=new _s;i.data=e;for(const n in t.states)i.states.set(n,{name:n,...t.states[n]});for(const n of i.states.values())for(const a of n.transitions)if(a!=="*"&&!i.states.has(a))throw Error(`Invalid state machine, state [${n.name}] has a transition to another state that doesn't exist [${a}]`);return i.currentState=i.startState=i.states.get(t.start),i}in(t){return this.currentState.name===t}go(t,e){var i,n;if(this.currentState.transitions.includes(t)||this.currentState.transitions.includes("*")){const a=this.states.get(t);return this.currentState.onExit&&((i=this.currentState)===null||i===void 0?void 0:i.onExit({to:a.name,data:this.data}))===!1||a?.onEnter&&a?.onEnter({from:this.currentState.name,eventData:e,data:this.data})===!1?!1:(this.currentState=a,!((n=this.currentState)===null||n===void 0)&&n.onState&&this.currentState.onState(),!0)}return!1}update(t){this.currentState.onUpdate&&this.currentState.onUpdate(this.data,t)}save(t){localStorage.setItem(t,JSON.stringify({currentState:this.currentState.name,data:this.data}))}restore(t){const e=JSON.parse(localStorage.getItem(t));this.currentState=this.states.get(e.currentState),this.data=e.data}}class Ls{_createNewBufferSource(){this._instance=this._audioContext.createBufferSource(),this._instance.buffer=this._src,this._instance.loop=this.loop,this._instance.playbackRate.value=this._playbackRate,this._instance.connect(this._volumeNode),this._volumeNode.connect(this._audioContext.destination)}_handleEnd(){this.loop||(this._instance.onended=()=>{this._playingFuture.resolve(!0)})}set loop(t){this._loop=t,this._instance&&(this._instance.loop=t,this.loop||(this._instance.onended=()=>{this._playingFuture.resolve(!0)}))}get loop(){return this._loop}set volume(t){t=q(t,0,1),this._volume=t,this._stateMachine.in("PLAYING")&&this._volumeNode.gain.setTargetAtTime?this._volumeNode.gain.setTargetAtTime(t,this._audioContext.currentTime,.1):this._volumeNode.gain.value=t}get volume(){return this._volume}get duration(){var t;return(t=this._duration)!==null&&t!==void 0?t:this.getTotalPlaybackDuration()}set duration(t){this._duration=t}constructor(t){this._src=t,this._audioContext=Fi.create(),this._volumeNode=this._audioContext.createGain(),this._playingFuture=new N,this._stateMachine=_s.create({start:"STOPPED",states:{PLAYING:{onEnter:({data:e})=>{this._createNewBufferSource(),this._handleEnd(),this.loop?this._instance.start(0,e.pausedAt*this._playbackRate):this._instance.start(0,e.pausedAt*this._playbackRate,this.duration),e.startedAt=this._audioContext.currentTime-e.pausedAt,e.pausedAt=0},onState:()=>this._playStarted(),onExit:({to:e})=>{e==="STOPPED"&&this._playingFuture.resolve(!0),this._instance.onended=null,this._instance.disconnect(),this._instance.stop(0),this._instance=null},transitions:["STOPPED","PAUSED","SEEK"]},SEEK:{onEnter:({eventData:e,data:i})=>{i.pausedAt=(e??0)/this._playbackRate,i.startedAt=0},transitions:["*"]},STOPPED:{onEnter:({data:e})=>{e.pausedAt=0,e.startedAt=0,this._playingFuture.resolve(!0)},transitions:["PLAYING","PAUSED","SEEK"]},PAUSED:{onEnter:({data:e})=>{e.pausedAt=this._audioContext.currentTime-e.startedAt},transitions:["PLAYING","STOPPED","SEEK"]}}},{startedAt:0,pausedAt:0}),this._volume=1,this._loop=!1,this._playStarted=()=>{},this._playbackRate=1,this._createNewBufferSource()}isPlaying(){return this._stateMachine.in("PLAYING")}isPaused(){return this._stateMachine.in("PAUSED")||this._stateMachine.in("SEEK")}isStopped(){return this._stateMachine.in("STOPPED")}play(t=()=>{}){return this._playStarted=t,this._stateMachine.go("PLAYING"),this._playingFuture.promise}pause(){this._stateMachine.go("PAUSED")}stop(){this._stateMachine.go("STOPPED")}seek(t){this._stateMachine.go("PAUSED"),this._stateMachine.go("SEEK",t)}getTotalPlaybackDuration(){return this._src.duration}getPlaybackPosition(){const{pausedAt:t,startedAt:e}=this._stateMachine.data;return t?t*this._playbackRate:e?(this._audioContext.currentTime-e)*this._playbackRate:0}set playbackRate(t){this._instance.playbackRate.value=this._playbackRate=t}get playbackRate(){return this._instance.playbackRate.value}}var ws;(function(h){h.Kill="kill",h.PreKill="prekill",h.PostKill="postkill",h.PreDraw="predraw",h.PostDraw="postdraw",h.PreDebugDraw="predebugdraw",h.PostDebugDraw="postdebugdraw",h.PreUpdate="preupdate",h.PostUpdate="postupdate",h.PreFrame="preframe",h.PostFrame="postframe",h.PreCollision="precollision",h.CollisionStart="collisionstart",h.CollisionEnd="collisionend",h.PostCollision="postcollision",h.Initialize="initialize",h.Activate="activate",h.Deactivate="deactivate",h.ExitViewport="exitviewport",h.EnterViewport="enterviewport",h.ExitTrigger="exit",h.EnterTrigger="enter",h.Connect="connect",h.Disconnect="disconnect",h.Button="button",h.Axis="axis",h.Visible="visible",h.Hidden="hidden",h.Start="start",h.Stop="stop",h.PointerUp="pointerup",h.PointerDown="pointerdown",h.PointerMove="pointermove",h.PointerEnter="pointerenter",h.PointerLeave="pointerleave",h.PointerCancel="pointercancel",h.PointerWheel="pointerwheel",h.Up="up",h.Down="down",h.Move="move",h.Enter="enter",h.Leave="leave",h.Cancel="cancel",h.Wheel="wheel",h.Press="press",h.Release="release",h.Hold="hold",h.PointerDragStart="pointerdragstart",h.PointerDragEnd="pointerdragend",h.PointerDragEnter="pointerdragenter",h.PointerDragLeave="pointerdragleave",h.PointerDragMove="pointerdragmove",h.ActionStart="actionstart",h.ActionComplete="actioncomplete"})(ws||(ws={}));class Ri{constructor(){this._bubbles=!0}get bubbles(){return this._bubbles}set bubbles(t){this._bubbles=t}stopPropagation(){this.bubbles=!1}}class ks extends Ri{constructor(t){super(),this.target=t}}class ms extends Ri{constructor(t){super(),this.target=t}}class Rs extends Ri{constructor(t){super(),this.target=t}}class Es extends Ri{constructor(t){super(),this.target=t}}class gn extends Ri{constructor(t){super(),this.target=t}}class vs extends Ri{constructor(t,e,i){super(),this.ctx=t,this.delta=e,this.target=i}}class Bs extends Ri{constructor(t,e,i){super(),this.ctx=t,this.delta=e,this.target=i}}class Vs extends Ri{constructor(t,e,i){super(),this.ctx=t,this.delta=e,this.target=i}}class xn extends Ri{constructor(t,e,i){super(),this.ctx=t,this.delta=e,this.target=i}}class kn extends Ri{constructor(t,e){super(),this.ctx=t,this.target=e}}class Us extends Ri{constructor(t,e){super(),this.ctx=t,this.target=e}}class en extends Ri{constructor(t,e,i){super(),this.engine=t,this.delta=e,this.target=i}}class ln extends Ri{constructor(t,e,i){super(),this.engine=t,this.delta=e,this.target=i}}class Ft extends Ri{constructor(t,e){super(),this.engine=t,this.prevStats=e,this.target=t}}class gt extends Ri{constructor(t,e){super(),this.engine=t,this.stats=e,this.target=t}}class bt extends Ri{constructor(t,e){super(),this.index=t,this.gamepad=e,this.target=e}}class Pt extends Ri{constructor(t,e){super(),this.index=t,this.gamepad=e,this.target=e}}class ee extends Ri{constructor(t,e,i){super(),this.button=t,this.value=e,this.target=i}}class ri extends Ri{constructor(t,e,i){super(),this.axis=t,this.value=e,this.target=i}}class Ne extends Ri{constructor(t){super(),this.target=t}}class ve extends Ri{constructor(t){super(),this.target=t}}class _i extends Ri{constructor(t,e,i,n,a){super(),this.other=e,this.side=i,this.intersection=n,this.contact=a,this.target=t}}class bi extends Ri{constructor(t,e,i,n,a){super(),this.other=e,this.side=i,this.intersection=n,this.contact=a,this.target=t}get actor(){return this.target}set actor(t){this.target=t}}class ds{constructor(t,e,i,n){this.target=t,this.other=e,this.side=i,this.contact=n}}class Hs{constructor(t,e,i,n){this.target=t,this.other=e,this.side=i,this.lastContact=n}}class Bn{constructor(t,e,i,n,a){this.target=t,this.other=e,this.side=i,this.intersection=n,this.contact=a}}class Vn{constructor(t,e,i,n,a){this.target=t,this.other=e,this.side=i,this.intersection=n,this.contact=a}}class jn extends Ri{constructor(t,e,i,n){super(),this.other=e,this.side=i,this.contact=n,this.target=t}get actor(){return this.target}set actor(t){this.target=t}}class Fs extends Ri{constructor(t,e,i,n){super(),this.other=e,this.side=i,this.lastContact=n,this.target=t}get actor(){return this.target}set actor(t){this.target=t}}class Rn extends Ri{constructor(t,e){super(),this.engine=t,this.target=e}}class is extends Ri{constructor(t,e){super(),this.context=t,this.target=e}}class er extends Ri{constructor(t,e){super(),this.context=t,this.target=e}}class Cn extends Ri{constructor(t){super(),this.target=t}}class ir extends Ri{constructor(t){super(),this.target=t}}class sr extends Ri{constructor(t,e){super(),this.target=t,this.actor=e}}class nr extends Ri{constructor(t,e){super(),this.target=t,this.actor=e}}class Pn extends Ri{constructor(t,e){super(),this.action=t,this.target=e}}class rr extends Ri{constructor(t,e){super(),this.action=t,this.target=e}}class or extends Ri{set bubbles(t){}get bubbles(){return!1}get _path(){return null}set _path(t){}constructor(t,e="MediaEvent"){super(),this.target=t,this._name=e}stopPropagation(){}action(){}propagate(){}layPath(t){}}class Sn extends or{constructor(t,e){super(t,"NativeSoundEvent"),this.track=e}}class xr extends or{constructor(t,e){super(t,"NativeSoundProcessedEvent"),this._processedData=e,this.data=this._processedData}}function Cr(h){try{const t=new Audio,e=/.*\.([A-Za-z0-9]+)(?:(?:\?|\#).*)*$/,i=h.match(e)[1];return!!t.canPlayType("audio/"+i)}catch(t){return ft.getInstance().warn("Cannot determine audio support, assuming no support for the Audio Tag",t),!1}}const qr={VolumeChange:"volumechange",Processed:"processed",Pause:"pause",Stop:"stop",PlaybackEnd:"playbackend",Resume:"resume",PlaybackStart:"playbackstart"};class Er{set loop(t){this._loop=t;for(const e of this._tracks)e.loop=this._loop;this.logger.debug("Set loop for all instances of sound",this.path,"to",this._loop)}get loop(){return this._loop}set volume(t){this._volume=t;for(const e of this._tracks)e.volume=this._volume;this.events.emit("volumechange",new Sn(this)),this.logger.debug("Set loop for all instances of sound",this.path,"to",this._volume)}get volume(){return this._volume}get duration(){return this._duration}set duration(t){this._duration=t}get instances(){return this._tracks}get path(){return this._resource.path}set path(t){this._resource.path=t}get bustCache(){return this._resource.bustCache}set bustCache(t){this._resource.bustCache=t}constructor(...t){this.events=new l,this.logger=ft.getInstance(),this._loop=!1,this._volume=1,this._isStopped=!1,this._tracks=[],this._wasPlayingOnHidden=!1,this._playbackRate=1,this._audioContext=Fi.create(),this._resource=new xe("",fs.type.arraybuffer);for(const e of t)if(Cr(e)){this.path=e;break}this.path||(this.logger.warn("This browser does not support any of the audio files specified:",t.join(", ")),this.logger.warn("Attempting to use",t[0]),this.path=t[0])}isLoaded(){return!!this.data}async load(){var t,e;if(this.data)return this.data;const i=await this._resource.load(),n=await this.decodeAudio(i.slice(0));return this._duration=(e=(t=this._duration)!==null&&t!==void 0?t:n?.duration)!==null&&e!==void 0?e:void 0,this.events.emit("processed",new xr(this,n)),this.data=n}async decodeAudio(t){try{return await this._audioContext.decodeAudioData(t.slice(0))}catch{return this.logger.error("Unable to decode  this browser may not fully support this format, or the file may be corrupt, if this is an mp3 try removing id3 tags and album art from the file."),await Promise.reject()}}wireEngine(t){t&&(this._engine=t,this._engine.on("hidden",()=>{t.pauseAudioWhenHidden&&this.isPlaying()&&(this._wasPlayingOnHidden=!0,this.pause())}),this._engine.on("visible",()=>{t.pauseAudioWhenHidden&&this._wasPlayingOnHidden&&(this.play(),this._wasPlayingOnHidden=!1)}),this._engine.on("start",()=>{this._isStopped=!1}),this._engine.on("stop",()=>{this.stop(),this._isStopped=!0}))}instanceCount(){return this._tracks.length}isPlaying(){return this._tracks.some(t=>t.isPlaying())}isPaused(){return this._tracks.some(t=>t.isPaused())}isStopped(){return this._tracks.some(t=>t.isStopped())}play(t){return this.isLoaded()?this._isStopped?(this.logger.warn("Cannot start playing. Engine is in a stopped state."),Promise.resolve(!1)):(this.volume=t||this.volume,this.isPaused()?this._resumePlayback():this._startPlayback()):(this.logger.warn("Cannot start playing. Resource",this.path,"is not loaded yet"),Promise.resolve(!0))}pause(){if(this.isPlaying()){for(const t of this._tracks)t.pause();this.events.emit("pause",new Sn(this)),this.logger.debug("Paused all instances of sound",this.path)}}stop(){for(const t of this._tracks)t.stop();this.events.emit("stop",new Sn(this)),this._tracks.length=0,this.logger.debug("Stopped all instances of sound",this.path)}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._tracks.forEach(e=>{e.playbackRate=this._playbackRate})}seek(t,e=0){this._tracks.length===0&&this._getTrackInstance(this.data),this._tracks[e].seek(t)}getTotalPlaybackDuration(){return this.isLoaded()?this.data.duration:(this.logger.warnOnce(`Sound from ${this.path} is not loaded, cannot return total playback duration.Did you forget to add Sound to a loader? https://excaliburjs.com/docs/loaders/`),0)}getPlaybackPosition(t=0){return this._tracks.length?this._tracks[t].getPlaybackPosition():0}getTrackId(t){return this._tracks.indexOf(t)}async _resumePlayback(){if(this.isPaused){const t=[];for(const e of this._tracks)t.push(e.play().then(()=>(this._tracks.splice(this.getTrackId(e),1),!0)));this.events.emit("resume",new Sn(this)),this.logger.debug("Resuming paused instances for sound",this.path,this._tracks),await Promise.all(t)}return!0}async _startPlayback(){const t=this._getTrackInstance(this.data),e=await t.play(()=>{this.events.emit("playbackstart",new Sn(this,t)),this.logger.debug("Playing new instance for sound",this.path)});this.events.emit("playbackend",new Sn(this,t));const i=this.getTrackId(t);return i!==-1&&this._tracks.splice(i,1),e}_getTrackInstance(t){const e=new Ls(t);return e.loop=this.loop,e.volume=this.volume,e.duration=this.duration,e.playbackRate=this._playbackRate,this._tracks.push(e),e}emit(t,e){this.events.emit(t,e)}on(t,e){return this.events.on(t,e)}once(t,e){return this.events.once(t,e)}off(t,e){this.events.off(t,e)}}const Ir={BeforeLoad:"beforeload",AfterLoad:"afterload",UserAction:"useraction",LoadResourceStart:"loadresourcestart",LoadResourceEnd:"loadresourceend"};function ar(h){var t,e;return!!h?.prototype&&!!(!((e=(t=h?.prototype)===null||t===void 0?void 0:t.constructor)===null||e===void 0)&&e.name)}class Qn{get resources(){return this._resources}constructor(t){var e;this.events=new l,this.canvas=new rs({filtering:yt.Blended,smoothing:!0,cache:!1,draw:this.onDraw.bind(this)}),this._resources=[],this._numLoaded=0,this._totalTimeMs=0,this._loadingFuture=new N,t&&(!((e=t.loadables)===null||e===void 0)&&e.length)&&this.addResources(t.loadables)}onInitialize(t){this.engine=t,this.canvas.width=this.engine.screen.resolution.width,this.canvas.height=this.engine.screen.resolution.height}async onUserAction(){return await Promise.resolve()}async onBeforeLoad(){}async onAfterLoad(){await Jt(500,this.engine.clock)}addResource(t){this._resources.push(t)}addResources(t){let e=0;const i=t.length;for(e;e<i;e++)this.addResource(t[e])}markResourceComplete(){this._numLoaded++}get progress(){const t=this._resources.length;return t>0?q(this._numLoaded,0,t)/t:1}isLoaded(){return this._numLoaded===this._resources.length}onUpdate(t,e){this._totalTimeMs+=e}onDraw(t){const e=this._totalTimeMs/1e3;t.fillStyle=X.Black.toRGBA(),t.fillRect(0,0,this.engine.screen.resolution.width,this.engine.screen.resolution.height),t.save(),t.translate(this.engine.screen.resolution.width/2,this.engine.screen.resolution.height/2);const i=e*10;t.strokeStyle="white",t.lineWidth=10,t.lineCap="round",t.arc(0,0,40,i,i+Math.PI*3/2),t.stroke(),t.fillStyle="white",t.font="16px sans-serif";const n=(this.progress*100).toFixed(0)+"%",a=t.measureText(n),m=Math.abs(a.actualBoundingBoxLeft)+Math.abs(a.actualBoundingBoxRight),U=Math.abs(a.actualBoundingBoxAscent)+Math.abs(a.actualBoundingBoxDescent);t.fillText(n,-m/2,U/2),t.restore()}areResourcesLoaded(){return this._loadingFuture.promise}async load(){await this.onBeforeLoad(),this.events.emit("beforeload"),this.canvas.flagDirty(),await Promise.all(this._resources.map(async t=>{this.events.emit("loadresourcestart",t),await t.load().finally(()=>{this._numLoaded++,this.canvas.flagDirty(),this.events.emit("loadresourceend",t)})}));for(const t of this._resources)t instanceof Er&&t.wireEngine(this.engine);return this._loadingFuture.resolve(),this.canvas.flagDirty(),await this.onUserAction(),this.events.emit("useraction"),await Gi.unlock(),await this.onAfterLoad(),this.events.emit("afterload"),this.data=this._resources}emit(t,e){this.events.emit(t,e)}on(t,e){return this.events.on(t,e)}once(t,e){return this.events.once(t,e)}off(t,e){this.events.off(t,e)}}function ki(h,t=X.Red,e,i,n,a,m=1,U="butt"){h.save(),h.beginPath(),h.lineWidth=m,h.lineCap=U,h.strokeStyle=t.toString(),h.moveTo(e,i),h.lineTo(n,a),h.closePath(),h.stroke(),h.restore()}function Vi(h,t=X.Red,e){h.beginPath(),h.strokeStyle=t.toString(),h.arc(e.x,e.y,5,0,Math.PI*2),h.closePath(),h.stroke()}function Ci(h,t,e,i,n=1){const a=t?t.toString():"blue",m=i.scale(n);h.beginPath(),h.strokeStyle=a,h.moveTo(e.x,e.y),h.lineTo(e.x+m.x,e.y+m.y),h.closePath(),h.stroke()}function Rt(h,t,e,i,n,a=5,m=X.White,U=null){let mt;if(typeof a=="number")mt={tl:a,tr:a,br:a,bl:a};else{const Et={tl:0,tr:0,br:0,bl:0};for(const St in Et)if(Et.hasOwnProperty(St)){const Lt=St;mt[Lt]=a[Lt]||Et[Lt]}}h.beginPath(),h.moveTo(t+mt.tl,e),h.lineTo(t+i-mt.tr,e),h.quadraticCurveTo(t+i,e,t+i,e+mt.tr),h.lineTo(t+i,e+n-mt.br),h.quadraticCurveTo(t+i,e+n,t+i-mt.br,e+n),h.lineTo(t+mt.bl,e+n),h.quadraticCurveTo(t,e+n,t,e+n-mt.bl),h.lineTo(t,e+mt.tl),h.quadraticCurveTo(t,e,t+mt.tl,e),h.closePath(),U&&(h.fillStyle=U.toString(),h.fill()),m&&(h.strokeStyle=m.toString(),h.stroke())}function Qt(h,t,e,i,n=X.White,a=null){h.beginPath(),h.arc(t,e,i,0,Math.PI*2),h.closePath(),a&&(h.fillStyle=a.toString(),h.fill()),n&&(h.strokeStyle=n.toString(),h.stroke())}const ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdQAAAB2CAYAAABxhGI9AAAACXBIWXMAAAsSAAALEgHS3X78AAAKnUlEQVR42u3dP2wjSx0H8N8hJIonIRmJjsq0SBR+BQ1dcqKhe0lD77SvSwpKkJKGPulpktfRIMUdEqKIqV57rpAokM4dbSiyq7ONPTP7x39ifz7SFbnEnp3xer47O7uzH15fXwMA6OYHmgAABCoACFQAEKgAgEAFAIEKAAIVAAQqACBQAUCgAoBABQCBCgAIVAAQqAAgUAFAoAIAAhUABCoACFQAEKgAgECFLbmOiNeFf2PbAyz68Pr6qhUgbRwR92v+/zwiJrYHMEKFMmcN///UtgcQqFBk1PD/97U9Qx8VCFSgu4EmAIEKAAIVAAQqACBQ4Z25jojP8eX+0WtNAgIVaOY+Im5j+eKh24h41jQgUIEyZ7F5NaPU7wCBCiwYd/w9cOB+qAlgJ3KLLow0EV198803RWvJfvfddx+0lhEqHKu5JgAjVCBvlhmFzjQRXUekHz9+TP79y8uLRjNChXfvoePvAYEKxNtj1e42/O5JoIJABcrdRMRVLM+X3kTEpaaB988cKuzWg9EobTWdMx0Oly8uN4dqhAoARqgnaN3arHfqu7OyH8ItKLVB/P+CEfMTHyGPY3npx1m8zWGDEeoBfUk/xdti57dr/r1Wv2+6EPow3tZ5rRdS72s1neuF97xvWd+XTH0/V+UMttDWqbI/r2nrxfp+jv2uSjSO7S+OXy/A/3lN+9xX5T5HxEUPZZ0tfB71+w57eJ/HFu+z+jkv1u92YX9fbI/HhX3JA9rp5MPr66tWaG9UfUGbrHIzi7cLUyYFf/tpTady03EEeL8mUJ6i7MKYNvWNqr4Pe2jradXO60LrvPAz2PQ5RPX684ah8dxD+2zantnCgVipSVV+m/tgB9W2DDq2Sx/vM95wcHhZhWVJm8yrv58cSgfTdc70+++/X/r522+/tUKSEepBqo+om4ZLPerMjUwuNnQCtx1GWJtee1FwdD5uWd86xLs8UaVt2aNEO1/saZ/Z5rYMW4zq6v34rGV9Bg3q2eZ9SkeNm9qwyUh30OPIHYFKx5FG03C7znSOqYBq+qW/zpQ3anH037TNHluG6f0WPsPhHvab4QFty7ogOeuxDYcNy2/zu2214WNYWxmBurNO8bGn97pNBOO8xy/9uCorZZ4I2r4C7aJgO7ZV9iE49Dm6NvOWx+pWE9CUq3zbdTp9doz38TbXtzqH9RT5CyWe422OaZoZGeZCabrhPQY9HjwsjpTvCg4YtlE2+Ta/j2bzn8fqrDqgm+6yUHOmAvWUjAtGhbNYvsBknDnqH1Qhc7VmxHgeb/NbudA5j/UXlYwif2p6luhAc9teu1npiHKnDs8if6tCm7JLX3NKpgttXe9ruc9mHMd7a83iwdxF5vt8tutARaCeklRnNK9C8WnNF7geJQ4T4XG3JhSnVdilQrG+yOnrlVHfsEGYzhNBn7Lu6tS7+HJafJQ4EMiNlNqWXZ9WPvVgnVYHG5M1ByDXkT6leX2EgTqJtyt45yv7S2qO3sEZjZhDLXeR+YKdJ0Zdk8QocvH9N732KrNtq+FZ/zzIHABcJrYpd+Xv14lOd5ap76SgrduW/VTQ1qcQpqnbgu4ifZvUMNpd9XuoZmvCtPaQ2Y/BCHVLgbrJTeRPDdVf6pfMKDU2fOkHmVFFfXr3MsouLsnNvV5kRoe5+s431PeuoKPqWnaurY/ZPBEeqwceN4l96iwO6H7Mjq4y7VGPVNe10VaZMzVCPVWpI/Z6FZbcv5fMqGCU+dLfFGzj58jP8+bCdJCo7yzKTwdOF0bu9Ug7V4c+yz7FJfYeGoysUss0HssIdVZwYLDujMqlESoCdTtGsZtbHnJBeNdDSJSs0jTKdMJN1HNX54Wv7bvsU9NkVJVa13dX+/wuArV0X/l5RHyo/lnfF4G6p6DrS0kHdtXhy35TGErDPYZUn2WfWqDOo/lVqdMD2O/hKJhD7S/odukymq9s02QN4EEPR/zbaOumZc+r15zK1Zqznl9jsfiemTM1QmV3HUuTkedlg9HIQzRbUD93dfC+2tpj2fIHEH2+RqCCQH13gZq7hWXTNpVu19OB1fc9nQ0AKOKUb5lU0P1kDyOneoWk0lOZ9cIP0x7qu8+2BhCoR2wYu1+e7DmaXzBSsu5vaX1ne2zrpmUPTmxf7PM1Dm4y/vC7ny7Nif7+z/9ZmtM0Z3panPLtPmra9f16bcK0Dpbnwk43Vd/RHtu6zfNQTy1QBy3aqG2g9nVmxml+BOoJyT3NpWmn9xhfFnu4bvDa+44BXhqqfdf3uUF9+yz77AT31Yue2mjecYQ62NLfgkA9ghHqLNEhNem4H1c6vdyDxhf/bpz5m4coW/c39wi6VH2bPtHlcaV9cvXts+zxCe6rTeqc2ndL7uGd93QwM9bFcAzMoZZ7SgTBbWx+asui61h/iq1+RmjqdbnQXQ3T1DNQ63V/U9ucqm/pMzPb1rePsk/1iTOjgvatR4W3Lc8ULB78pELyrnAfeTcj1NU509/86mfJ33/8+Mf00a05UyPUEw7UVCeWG/WNEiExyHRMt5ltW30izUPk18ytt7lNfc8i//DvtvXto+ySA5BjljsLUF8lPkqMPEtW1JomDsiGBZ9Byb4NAvUITSN9GuwsIj6t6UTOqk7jJREkmzqli8xIs96udSO20sX0H1vW92IL9e1a9rgqVyf91gbPsTy9UD9n9lOkT8k+RfkFR5PMNqxOcdSf32PBvg3vilO+zdxE+okx9Wm0ph36XYsRZCpMF993GOk5qvqB3Dct6jvssb67KvuUNJ3frw92bhr8/STSF0JdRPMLpUCgnsgo9S76PZ246ZFk1wWvK5m3vVoYvW1Sz7nN91jfXbQ1ZQc7TW6HeaoOalypG/8/p/rP1aNAc6ZHzSnfdqPUPhdy2PQw6Nz9gSVhuhiqueUHR3uu7y7K3rdDX4u46ZrPbUa0IFBZ0seKQ3XQTRt2vm3W/a2DbNKys++rvm3ep6+y1x2UdP3bWU9lzra47U1GmlctX/sQ23t+aOlByLTh/4NAPaCRxtcdO5HLSJ/6vNtCwGx67VPmPbvWd1q9frKHtp4kAqRJ2HR9j762JfX3bZ//elPtj13PPDx1+D5tqk/Xi6NO8SHz7MmH19dXrdBNfVFP6T2PT1UHNit87/t4m5+aRH+nQBdvqyhZDKJLfZs8h7XPsqdV2ZOV+tanKB8aln0dyxdAXbV4j4gvt4oMOrbP6vbU73NW7TMlbdTnPrWpfqXfh9HKZ9vke7KuTeZRNtXRSe6+1FV//ce/ln5eXfsXgcqXzr6+9261M3moOoa7E6nvTZTfy7iNsmfb7kjfgXGsvxe0vihsEts9HTquPpt1q1vtahu2TqAiUAEEKj0zhwoARqgAu/OnX/442WH+9xc/Wvr58re/Tr7f41/+ZsRqhAoACFQAEKgAcHjMoQJskJsz/eqrr5Z+vvr7v5fmQFevAl5lztQIFQAQqAAgUAHgIJlDBdhgdQ41N2eKESoAIFABQKACwFEwhwoARqgAIFABQKACAAIVAAQqAAhUABCoAIBABQCBCgACFQAEKgAgUAFAoAKAQAUAgQoACFQAEKgAIFABQKACAAIVAAQqAAhUABCoAIBABQCBCgACFQAQqAAgUAFAoAKAQAUAlvwPcFDns1DsH4sAAAAASUVORK5CYII=";var Ce=__webpack_require__(8851);class oi extends Qn{get _image(){return this._imageElement||(this._imageElement=new Image,this._imageElement.onload=()=>this._imageLoaded.resolve(),this._imageElement.src=this.logo),this._imageElement}get playButtonRootElement(){return this._playButtonRootElement}get playButtonElement(){return this._playButtonElement}get _playButton(){const t=document.getElementById("excalibur-play-root");return t&&(this._playButtonRootElement=t),this._playButtonRootElement||(this._playButtonRootElement=document.createElement("div"),this._playButtonRootElement.id="excalibur-play-root",this._playButtonRootElement.style.position="absolute",document.body.appendChild(this._playButtonRootElement)),this._styleBlock||(this._styleBlock=document.createElement("style"),this._styleBlock.textContent=this._playButtonStyles,document.head.appendChild(this._styleBlock)),this._playButtonElement||(this._playButtonElement=this.startButtonFactory(),this._playButtonRootElement.appendChild(this._playButtonElement)),this._playButtonElement}constructor(t){const e=Array.isArray(t)?{loadables:t}:t;super(e),this._logger=ft.getInstance(),this._originalOptions={loadables:[]},this.events=new l,this._playButtonShown=!1,this.logo=ie,this.logoWidth=468,this.logoHeight=118,this.loadingBarColor=X.White,this.backgroundColor="#176BAA",this._imageLoaded=new N,this.suppressPlayButton=!1,this._playButtonStyles=Ce.A.toString(),this.playButtonText="Play game",this.startButtonFactory=()=>{let i=document.getElementById("excalibur-play");return i||(i=document.createElement("button")),i.id="excalibur-play",i.textContent=this.playButtonText,i.style.display="none",i},this._configuredPixelRatio=null,this._originalOptions={...oi._DEFAULT_LOADER_OPTIONS,...e}}onInitialize(t){this.engine=t,this.screen=t.screen,this.canvas.width=this.engine.canvas.width,this.canvas.height=this.engine.canvas.height,this.screen.events.on("resize",()=>{this.canvas.width=this.engine.canvas.width,this.canvas.height=this.engine.canvas.height})}async showPlayButton(){var t,e;if(this.suppressPlayButton)this.hidePlayButton(),await Jt(500,(t=this.engine)===null||t===void 0?void 0:t.clock);else{const i=()=>{try{this._positionPlayButton()}catch{}};return!((e=this.engine)===null||e===void 0)&&e.browser&&this.engine.browser.window.on("resize",i),this._playButtonShown=!0,this._playButton.style.display="block",document.body.addEventListener("keyup",a=>{a.key==="Enter"&&this._playButton.click()}),this._positionPlayButton(),await new Promise(a=>{const m=U=>{var mt;if(U.stopPropagation(),this.hidePlayButton(),!((mt=this.engine)===null||mt===void 0)&&mt.browser&&this.engine.browser.window.off("resize",i),this._originalOptions.fullscreenAfterLoad)try{this._logger.info("requesting fullscreen"),this._originalOptions.fullscreenContainer instanceof HTMLElement?this._originalOptions.fullscreenContainer.requestFullscreen():this.engine.screen.goFullScreen(this._originalOptions.fullscreenContainer)}catch(Et){this._logger.error("could not go fullscreen",Et)}a()};this._playButton.addEventListener("click",m),this._playButton.addEventListener("touchend",m),this._playButton.addEventListener("pointerup",m)})}}hidePlayButton(){this._playButtonShown=!1,this._playButton.style.display="none"}dispose(){this._playButtonRootElement.parentElement&&(this._playButtonRootElement.removeChild(this._playButtonElement),document.body.removeChild(this._playButtonRootElement),document.head.removeChild(this._styleBlock),this._playButtonRootElement=null,this._playButtonElement=null,this._styleBlock=null)}async onUserAction(){var t;await Jt(200,(t=this.engine)===null||t===void 0?void 0:t.clock),this.canvas.flagDirty(),await this.showPlayButton()}async onBeforeLoad(){const t=this._image;await this._imageLoaded.promise,await t?.decode()}async onAfterLoad(){this.screen.pixelRatioOverride=this._configuredPixelRatio,this.screen.popResolutionAndViewport(),this.screen.applyResolutionAndViewport(),this.dispose()}_positionPlayButton(){if(this.engine){const{x:t,y:e,width:i,height:n}=this.engine.canvas.getBoundingClientRect();if(this._playButtonRootElement){const a=this._playButton.clientWidth,m=this._playButton.clientHeight;this.playButtonPosition?(this._playButtonRootElement.style.left=`${this.playButtonPosition.x}px`,this._playButtonRootElement.style.top=`${this.playButtonPosition.y}px`):(this._playButtonRootElement.style.left=`${t+i/2-a/2}px`,this._playButtonRootElement.style.top=`${e+n/2-m/2+100}px`)}}}onDraw(t){const e=this.engine.canvasHeight/this.engine.pixelRatio,i=this.engine.canvasWidth/this.engine.pixelRatio;this._positionPlayButton(),t.fillStyle=this.backgroundColor,t.fillRect(0,0,i,e);let n=e/2;const a=Math.min(this.logoWidth,i*.75);let m=i/2-a/2;this.logoPosition&&(m=this.logoPosition.x,n=this.logoPosition.y);const U=Math.floor(a*(this.logoHeight/this.logoWidth)),mt=this.engine.getAntialiasing();if(this.engine.setAntialiasing(!0),this.logoPosition?t.drawImage(this._image,0,0,this.logoWidth,this.logoHeight,m,n,a,U):t.drawImage(this._image,0,0,this.logoWidth,this.logoHeight,m,n-U-20,a,U),!this.suppressPlayButton&&this._playButtonShown){this.engine.setAntialiasing(mt);return}let Et=m,St=n;this.loadingBarPosition&&(Et=this.loadingBarPosition.x,St=this.loadingBarPosition.y),t.lineWidth=2,Rt(t,Et,St,a,20,10,this.loadingBarColor);const Lt=a*this.progress,Kt=5,ne=Lt-Kt*2,ae=20-Kt*2;Rt(t,Et+Kt,St+Kt,ne>10?ne:10,ae,5,null,this.loadingBarColor),this.engine.setAntialiasing(mt)}}oi._DEFAULT_LOADER_OPTIONS={loadables:[],fullscreenAfterLoad:!1,fullscreenContainer:void 0};const Ze={webgl:"WebGL",webaudio:"WebAudio",gamepadapi:"Gamepad API"};class Ai{constructor(){this._features=null,this.failedTests=[],this._criticalTests={canvasSupport:function(){const t=document.createElement("canvas");return!!(t.getContext&&t.getContext("2d"))},arrayBufferSupport:function(){const t=new XMLHttpRequest;t.open("GET","/");try{t.responseType="arraybuffer"}catch{return!1}return t.responseType==="arraybuffer"},dataUrlSupport:function(){return document.createElement("canvas").toDataURL("image/png").indexOf("data:image/png")===0},objectUrlSupport:function(){return"URL"in window&&"revokeObjectURL"in URL&&"createObjectURL"in URL},rgbaSupport:function(){const t=document.createElement("a").style;return t.cssText="background-color:rgba(150,255,150,.5)",(""+t.backgroundColor).indexOf("rgba")>-1}},this._warningTest={webAudioSupport:function(){return!!(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext||window.oAudioContext)},webglSupport:function(){const t=document.createElement("canvas");return!!(t.getContext&&t.getContext("webgl"))}},this._features=this._loadBrowserFeatures()}getBrowserFeatures(){return this._features===null&&(this._features=this._loadBrowserFeatures()),this._features}logBrowserFeatures(){let t=`%cSUPPORTED BROWSER FEATURES
==========================%c
`;const e=["font-weight: bold; color: navy","font-weight: normal; color: inherit"],i=this.getBrowserFeatures();for(const n of Object.keys(Ze))i[n]?(t+="(%câ%c)",e.push("font-weight: bold; color: green"),e.push("font-weight: normal; color: inherit")):(t+="(%câ%c)",e.push("font-weight: bold; color: red"),e.push("font-weight: normal; color: inherit")),t+=" "+Ze[n]+`
`;e.unshift(t),console.log.apply(console,e)}_loadBrowserFeatures(){return{canvas:this._criticalTests.canvasSupport(),arraybuffer:this._criticalTests.arrayBufferSupport(),dataurl:this._criticalTests.dataUrlSupport(),objecturl:this._criticalTests.objectUrlSupport(),rgba:this._criticalTests.rgbaSupport(),webaudio:this._warningTest.webAudioSupport(),webgl:this._warningTest.webglSupport(),gamepadapi:!!navigator.getGamepads}}test(){let t=!1;for(const e in this._criticalTests)this._criticalTests[e].call(this)||(this.failedTests.push(e),ft.getInstance().error("Critical browser feature missing, Excalibur requires:",e),t=!0);if(t)return!1;for(const e in this._warningTest)this._warningTest[e]()||ft.getInstance().warn("Warning browser feature missing, Excalibur will have reduced performance:",e);return!0}}var je;(function(h){h.PreventCollision="PreventCollision",h.Passive="Passive",h.Active="Active",h.Fixed="Fixed"})(je||(je={}));var mi;(function(h){h.World="world",h.Screen="screen"})(mi||(mi={}));class Ki extends u{constructor(t){super(0,0),this._getX=t.getX,this._getY=t.getY,this._setX=t.setX,this._setY=t.setY}get x(){return this._x=this._getX()}set x(t){this._setX(t),this._x=t}get y(){return this._y=this._getY()}set y(t){this._setY(t),this._y=t}}class es extends u{constructor(t,e){super(t.x,t.y),this.original=t,this.change=e}get x(){return this._x=this.original.x}set x(t){this.change(t,this._y),this._x=this.original.x=t}get y(){return this._y=this.original.y}set y(t){this.change(this._x,t),this._y=this.original.y=t}}class os{constructor(){this._parent=null,this._children=[],this._pos=O(0,0),this._rotation=0,this._scale=O(1,1),this._isDirty=!1,this._isInverseDirty=!1,this._matrix=$t.identity(),this._inverse=$t.identity()}get parent(){return this._parent}set parent(t){if(this._parent){const e=this._parent._children.indexOf(this);e>-1&&this._parent._children.splice(e,1)}this._parent=t,this._parent&&this._parent._children.push(this),this.flagDirty()}get children(){return this._children}set pos(t){t.equals(this._pos)||(this._pos.x=t.x,this._pos.y=t.y,this.flagDirty())}get pos(){return new es(this._pos,(t,e)=>{(t!==this._pos.x||e!==this._pos.y)&&this.flagDirty()})}set globalPos(t){let e=t.clone();this.parent&&(e=this.parent.inverse.multiply(t)),e.equals(this._pos)||(this._pos=e,this.flagDirty())}get globalPos(){return new Ki({getX:()=>this.matrix.data[4],getY:()=>this.matrix.data[5],setX:t=>{if(this.parent){const{x:e}=this.parent.inverse.multiply(O(t,this.pos.y));this.pos.x=e}else this.pos.x=t;t!==this.matrix.data[4]&&this.flagDirty()},setY:t=>{if(this.parent){const{y:e}=this.parent.inverse.multiply(O(this.pos.x,t));this.pos.y=e}else this.pos.y=t;t!==this.matrix.data[5]&&this.flagDirty()}})}set rotation(t){const e=C(t);e!==this._rotation&&this.flagDirty(),this._rotation=e}get rotation(){return this._rotation}set globalRotation(t){let e=0;this.parent&&(e=this.parent.globalRotation);const i=C(t+e);i!==this._rotation&&this.flagDirty(),this._rotation=i}get globalRotation(){return this.parent?this.matrix.getRotation():this.rotation}set scale(t){(t.x!==this._scale.x||t.y!==this._scale.y)&&(this._scale.x=t.x,this._scale.y=t.y,this.flagDirty())}get scale(){return new es(this._scale,(t,e)=>{(t!==this._scale.x||e!==this._scale.y)&&this.flagDirty()})}set globalScale(t){let e=O(1,1);this.parent&&(e=this.parent.globalScale),this.scale=t.scale(O(1/e.x,1/e.y))}get globalScale(){return new Ki({getX:()=>this.parent?this.matrix.getScaleX():this.scale.x,getY:()=>this.parent?this.matrix.getScaleY():this.scale.y,setX:t=>{if(this.parent){const e=this.parent.globalScale.x;this.scale.x=t/e}else this.scale.x=t},setY:t=>{if(this.parent){const e=this.parent.globalScale.y;this.scale.y=t/e}else this.scale.y=t}})}get matrix(){return this._isDirty&&(this.parent===null?this._matrix=this._calculateMatrix():this._matrix=this.parent.matrix.multiply(this._calculateMatrix()),this._isDirty=!1),this._matrix}get inverse(){return this._isInverseDirty&&(this._inverse=this.matrix.inverse(),this._isInverseDirty=!1),this._inverse}_calculateMatrix(){return $t.identity().translate(this.pos.x,this.pos.y).rotate(this.rotation).scale(this.scale.x,this.scale.y)}flagDirty(){this._isDirty=!0,this._isInverseDirty=!0;for(let t=0;t<this._children.length;t++)this._children[t].flagDirty()}apply(t){return this.matrix.multiply(t)}applyInverse(t){return this.inverse.multiply(t)}setTransform(t,e,i){this._pos.x=t.x,this._pos.y=t.y,this._rotation=C(e),this._scale.x=i.x,this._scale.y=i.y,this.flagDirty()}clone(t){const e=t??new os;return this._pos.clone(e._pos),e._rotation=this._rotation,this._scale.clone(e._scale),e.flagDirty(),e}}function Ts(h){return!!h&&!!h.prototype&&!!h.prototype.constructor}function ts(h){return!!h?.clone}class ss{constructor(){this.owner=void 0}clone(){const t=new this.constructor;for(const e in this)if(this.hasOwnProperty(e)){const i=this[e];ts(i)&&e!=="owner"&&e!=="clone"?t[e]=i.clone():t[e]=i}return t}}class ls{constructor(){this.observers=[],this.subscriptions=[]}register(t){this.observers.push(t)}subscribe(t){this.subscriptions.push(t)}unregister(t){const e=this.observers.indexOf(t);e!==-1&&this.observers.splice(e,1)}unsubscribe(t){const e=this.subscriptions.indexOf(t);e!==-1&&this.subscriptions.splice(e,1)}notifyAll(t){const e=this.observers.length;for(let n=0;n<e;n++)this.observers[n].notify(t);const i=this.subscriptions.length;for(let n=0;n<i;n++)this.subscriptions[n](t)}clear(){this.observers.length=0,this.subscriptions.length=0}}class fi extends ss{constructor(){super(...arguments),this._logger=ft.getInstance(),this._parentComponent=null,this._transform=new os,this._addChildTransform=t=>{const e=t.get(fi);e&&(e._transform.parent=this._transform,e._parentComponent=this)},this.zIndexChanged$=new ls,this._z=0,this._coordPlane=mi.World}get(){return this._transform}onAdd(t){for(const e of t.children)this._addChildTransform(e);t.childrenAdded$.subscribe(e=>this._addChildTransform(e)),t.childrenRemoved$.subscribe(e=>{const i=e.get(fi);i&&(i._transform.parent=null,i._parentComponent=null)})}onRemove(t){this._transform.parent=null,this._parentComponent=null}get z(){return this._z}set z(t){const e=this._z;this._z=t,e!==t&&this.zIndexChanged$.notifyAll(t)}get coordPlane(){return this._parentComponent?this._parentComponent.coordPlane:this._coordPlane}set coordPlane(t){var e;this._parentComponent?this._logger.warn(`Cannot set coordinate plane on child entity ${(e=this.owner)===null||e===void 0?void 0:e.name}, children inherit their coordinate plane from their parents.`):this._coordPlane=t}get pos(){return this._transform.pos}set pos(t){this._transform.pos=t}get globalPos(){return this._transform.globalPos}set globalPos(t){this._transform.globalPos=t}get rotation(){return this._transform.rotation}set rotation(t){this._transform.rotation=t}get globalRotation(){return this._transform.globalRotation}set globalRotation(t){this._transform.globalRotation=t}get scale(){return this._transform.scale}set scale(t){this._transform.scale=t}get globalScale(){return this._transform.globalScale}set globalScale(t){this._transform.globalScale=t}applyInverse(t){return this._transform.applyInverse(t)}apply(t){return this._transform.apply(t)}clone(){const t=new fi;return t._transform=this._transform.clone(),t._z=this._z,t}}class us extends ss{constructor(){super(...arguments),this.vel=u.Zero,this.acc=u.Zero,this.scaleFactor=u.Zero,this.angularVelocity=0,this.torque=0,this.inertia=1}}class Js{static create(t,e){if(this._CURRENT_GROUP>this._MAX_GROUPS)throw new Error(`Cannot have more than ${this._MAX_GROUPS} collision groups`);if(this._GROUPS.get(t)){const n=this._GROUPS.get(t);if(n.mask===e)return n;throw new Error(`Collision group ${t} already exists with a different mask!`)}const i=new _n(t,this._CURRENT_BIT,e!==void 0?e:~this._CURRENT_BIT);return this._CURRENT_BIT=this._CURRENT_BIT<<1|0,this._CURRENT_GROUP++,this._GROUPS.set(t,i),i}static get groups(){return Array.from(this._GROUPS.values())}static groupByName(t){return this._GROUPS.get(t)}static reset(){this._GROUPS=new Map,this._CURRENT_BIT=this._STARTING_BIT,this._CURRENT_GROUP=1}}Js._STARTING_BIT=1,Js._MAX_GROUPS=32,Js._CURRENT_GROUP=1,Js._CURRENT_BIT=Js._STARTING_BIT,Js._GROUPS=new Map;class _n{constructor(t,e,i){this._name=t,this._category=e,this._mask=i}get name(){return this._name}get category(){return this._category}get mask(){return this._mask}canCollide(t){const e=this.category&t.mask,i=this.mask&t.category;return e!==0&&i!==0}invert(){const t=Js.create("~("+this.name+")",~this.mask|0);return t._category=~this.category,t}static combine(t){const e=t.map(a=>a.name).join("+"),n=~t.reduce((a,m)=>m.category|a,0);return Js.create(e,n)}static collidesWith(t){const e=`collidesWith(${t.map(n=>n.name).join("+")})`,i=t.reduce((n,a)=>a.category|n,0);return Js.create(e,i)}toString(){return`
category: ${this.category.toString(2).padStart(32,"0")}
mask:     ${(this.mask>>>0).toString(2).padStart(32,"0")}
    `}}_n.All=new _n("Collide with all groups",-1,-1);class xs{constructor(t,e){this.colliderA=t,this.colliderB=e,this.id=null,this.id=xs.calculatePairHash(t.id,e.id)}static canCollide(t,e){var i,n;const a=(i=t?.owner)===null||i===void 0?void 0:i.get(Hi),m=(n=e?.owner)===null||n===void 0?void 0:n.get(Hi);return!(t.id===e.id||t.owner&&e.owner&&t.owner.id===e.owner.id||t.localBounds.hasZeroDimensions()||e.localBounds.hasZeroDimensions()||!a||!m||!a.group.canCollide(m.group)||a.collisionType===je.Fixed&&m.collisionType===je.Fixed||m.collisionType===je.PreventCollision||a.collisionType===je.PreventCollision||!a.active||!m.active)}get canCollide(){const t=this.colliderA,e=this.colliderB;return xs.canCollide(t,e)}collide(){return this.colliderA.collide(this.colliderB)}hasCollider(t){return t===this.colliderA||t===this.colliderB}static calculatePairHash(t,e){return t.value<e.value?`#${t.value}+${e.value}`:`#${e.value}+${t.value}`}}class Os{constructor(t,e){this.min=t,this.max=e}overlaps(t){return this.max>t.min&&t.max>this.min}getOverlap(t){return this.overlaps(t)?this.max>t.max?t.max-this.min:this.max-t.min:0}}class $s{constructor(t){this.parent=t,this.parent=t||null,this.data=null,this.bounds=new ut,this.left=null,this.right=null,this.height=0}isLeaf(){return!this.left&&!this.right}}class An{constructor(t,e=new ut(-Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)){this._config=t,this.worldBounds=e,this.root=null,this.nodes={}}_insert(t){if(this.root===null){this.root=t,this.root.parent=null;return}const e=t.bounds;let i=this.root;for(;!i.isLeaf();){const U=i.left,mt=i.right,Et=i.bounds.getPerimeter(),Lt=i.bounds.combine(e).getPerimeter(),Kt=2*Lt,ne=2*(Lt-Et);let ae=0;const ke=e.combine(U.bounds);let ze,ye;U.isLeaf()?ae=ke.getPerimeter()+ne:(ye=U.bounds.getPerimeter(),ze=ke.getPerimeter(),ae=ze-ye+ne);let we=0;const He=e.combine(mt.bounds);if(mt.isLeaf()?we=He.getPerimeter()+ne:(ye=mt.bounds.getPerimeter(),ze=He.getPerimeter(),we=ze-ye+ne),Kt<ae&&Kt<we)break;ae<we?i=U:i=mt}const n=i.parent,a=new $s(n);a.bounds=e.combine(i.bounds),a.height=i.height+1,n!==null?(n.left===i?n.left=a:n.right=a,a.left=i,a.right=t,i.parent=a,t.parent=a):(a.left=i,a.right=t,i.parent=a,t.parent=a,this.root=a);let m=t.parent;for(;m;){if(m=this._balance(m),!m.left)throw new Error("Parent of current leaf cannot have a null left child"+m);if(!m.right)throw new Error("Parent of current leaf cannot have a null right child"+m);m.height=1+Math.max(m.left.height,m.right.height),m.bounds=m.left.bounds.combine(m.right.bounds),m=m.parent}}_remove(t){if(t===this.root){this.root=null;return}const e=t.parent,i=e.parent;let n;if(e.left===t?n=e.right:n=e.left,i){i.left===e?i.left=n:i.right=n,n.parent=i;let a=i;for(;a;)a=this._balance(a),a.bounds=a.left.bounds.combine(a.right.bounds),a.height=1+Math.max(a.left.height,a.right.height),a=a.parent}else this.root=n,n.parent=null}trackCollider(t){const e=new $s;e.data=t,e.bounds=t.bounds,e.bounds.left-=2,e.bounds.top-=2,e.bounds.right+=2,e.bounds.bottom+=2,this.nodes[t.id.value]=e,this._insert(e)}updateCollider(t){var e;const i=this.nodes[t.id.value];if(!i)return!1;const n=t.bounds;if(!this.worldBounds.contains(n))return ft.getInstance().warn("Collider with id "+t.id.value+" is outside the world bounds and will no longer be tracked for physics"),this.untrackCollider(t),!1;if(i.bounds.contains(n))return!1;if(this._remove(i),n.left-=this._config.boundsPadding,n.top-=this._config.boundsPadding,n.right+=this._config.boundsPadding,n.bottom+=this._config.boundsPadding,t.owner){const a=(e=t.owner)===null||e===void 0?void 0:e.get(Hi);if(a){const m=a.vel.x*32/1e3*this._config.velocityMultiplier,U=a.vel.y*32/1e3*this._config.velocityMultiplier;m<0?n.left+=m:n.right+=m,U<0?n.top+=U:n.bottom+=U}}return i.bounds=n,this._insert(i),!0}untrackCollider(t){const e=this.nodes[t.id.value];e&&(this._remove(e),this.nodes[t.id.value]=null,delete this.nodes[t.id.value])}_balance(t){if(t===null)throw new Error("Cannot balance at null node");if(t.isLeaf()||t.height<2)return t;const e=t.left,i=t.right,n=t,a=e,m=i,U=e.left,mt=e.right,Et=i.left,St=i.right,Lt=m.height-a.height;if(Lt>1)return m.left=n,m.parent=n.parent,n.parent=m,m.parent?m.parent.left===n?m.parent.left=m:m.parent.right=m:this.root=m,Et.height>St.height?(m.right=Et,n.right=St,St.parent=n,n.bounds=a.bounds.combine(St.bounds),m.bounds=n.bounds.combine(Et.bounds),n.height=1+Math.max(a.height,St.height),m.height=1+Math.max(n.height,Et.height)):(m.right=St,n.right=Et,Et.parent=n,n.bounds=a.bounds.combine(Et.bounds),m.bounds=n.bounds.combine(St.bounds),n.height=1+Math.max(a.height,Et.height),m.height=1+Math.max(n.height,St.height)),m;if(Lt<-1){if(a.left=n,a.parent=n.parent,n.parent=a,a.parent)if(a.parent.left===n)a.parent.left=a;else{if(a.parent.right!==n)throw"Error rotating Dynamic Tree";a.parent.right=a}else this.root=a;return U.height>mt.height?(a.right=U,n.left=mt,mt.parent=n,n.bounds=m.bounds.combine(mt.bounds),a.bounds=n.bounds.combine(U.bounds),n.height=1+Math.max(m.height,mt.height),a.height=1+Math.max(n.height,U.height)):(a.right=mt,n.left=U,U.parent=n,n.bounds=m.bounds.combine(U.bounds),a.bounds=n.bounds.combine(mt.bounds),n.height=1+Math.max(m.height,U.height),a.height=1+Math.max(n.height,mt.height)),a}return t}getHeight(){return this.root===null?0:this.root.height}query(t,e){const i=t.bounds,n=a=>{if(a&&a.bounds.overlaps(i))if(a.isLeaf()&&a.data!==t){if(e.call(t,a.data))return!0}else return n(a.left)||n(a.right);return!1};n(this.root)}rayCastQuery(t,e=1/0,i){const n=a=>{if(a&&a.bounds.rayCast(t,e))if(a.isLeaf()){if(i.call(t,a.data))return!0}else return n(a.left)||n(a.right);return!1};n(this.root)}getNodes(){const t=e=>e?[e].concat(t(e.left),t(e.right)):[];return t(this.root)}debug(t){const e=i=>{i&&(i.isLeaf()?i.bounds.draw(t,X.Green):i.bounds.draw(t,X.White),i.left&&e(i.left),i.right&&e(i.right))};e(this.root)}}class Zs{constructor(t,e){this.pos=t,this.dir=e.normalize()}intersect(t){const e=t.begin.sub(this.pos);if(this.dir.cross(t.getSlope())===0&&e.cross(this.dir)!==0)return-1;const i=this.dir.cross(t.getSlope());if(i===0)return-1;const n=e.cross(t.getSlope())/i;if(n>=0){const a=e.cross(this.dir)/i/t.getLength();if(a>=0&&a<=1)return n}return-1}intersectPoint(t){const e=this.intersect(t);return e<0?null:this.getPoint(e)}getPoint(t){return this.pos.add(this.dir.scale(t))}}class Mn{constructor(t){this._config=t,this._pairs=new Set,this._collisionPairCache=[],this._colliders=[],this._dynamicCollisionTree=new An(t.dynamicTree)}getColliders(){return this._colliders}rayCast(t,e){var i,n,a;const m=[],U=(i=e?.maxDistance)!==null&&i!==void 0?i:1/0,mt=e?.collisionGroup,Et=mt?mt.category:(n=e?.collisionMask)!==null&&n!==void 0?n:_n.All.category,St=(a=e?.searchAllColliders)!==null&&a!==void 0?a:!1;return this._dynamicCollisionTree.rayCastQuery(t,U,Lt=>{const ne=Lt.owner.get(Hi);if(e?.ignoreCollisionGroupAll&&ne.group===_n.All)return!1;const ae=(Et&ne.group.category)!==0;if(ne?.group&&!ae)return!1;const ke=Lt.rayCast(t,U);if(ke){if(e?.filter){if(e.filter(ke)&&(m.push(ke),!St))return!0}else if(m.push(ke),!St)return!0}return!1}),m}track(t){if(!t){ft.getInstance().warn("Cannot track null collider");return}if(t instanceof Ss){const e=t.getColliders();for(const i of e)i.owner=t.owner,this._colliders.push(i),this._dynamicCollisionTree.trackCollider(i)}else this._colliders.push(t),this._dynamicCollisionTree.trackCollider(t)}untrack(t){if(!t){ft.getInstance().warn("Cannot untrack a null collider");return}if(t instanceof Ss){const e=t.getColliders();for(const i of e){const n=this._colliders.indexOf(i);n!==-1&&this._colliders.splice(n,1),this._dynamicCollisionTree.untrackCollider(i)}}else{const e=this._colliders.indexOf(t);e!==-1&&this._colliders.splice(e,1),this._dynamicCollisionTree.untrackCollider(t)}}_pairExists(t,e){const i=xs.calculatePairHash(t.id,e.id);return this._pairs.has(i)}broadphase(t,e,i){const n=e/1e3,a=t.filter(U=>{var mt,Et;const St=(mt=U.owner)===null||mt===void 0?void 0:mt.get(Hi);return((Et=U.owner)===null||Et===void 0?void 0:Et.active)&&St.collisionType!==je.PreventCollision});this._collisionPairCache=[],this._pairs.clear();let m;for(let U=0,mt=a.length;U<mt;U++)m=a[U],this._dynamicCollisionTree.query(m,Et=>{if(!this._pairExists(m,Et)&&xs.canCollide(m,Et)){const St=new xs(m,Et);this._pairs.add(St.id),this._collisionPairCache.push(St)}return!1});if(i&&(i.physics.pairs=this._collisionPairCache.length),this._config.continuous.checkForFastBodies)for(const U of a){const mt=U.owner.get(Hi);if(mt.collisionType!==je.Active)continue;const Et=mt.vel.size*n+mt.acc.size*.5*n*n,St=Math.min(U.bounds.height,U.bounds.width);if(this._config.continuous.disableMinimumSpeedForFastBody||Et>St/2){i&&i.physics.fastBodies++;const Lt=mt.globalPos.sub(mt.oldPos),Kt=U.center,ne=U.getFurthestPoint(mt.vel),ae=ne.sub(Lt),ke=new Zs(ae,mt.vel);ke.pos=ke.pos.add(ke.dir.scale(-2*this._config.continuous.surfaceEpsilon));let ze,ye=new u(1/0,1/0);if(this._dynamicCollisionTree.rayCastQuery(ke,Et+this._config.continuous.surfaceEpsilon*2,we=>{if(!this._pairExists(U,we)&&xs.canCollide(U,we)){const He=we.rayCast(ke,Et+this._config.continuous.surfaceEpsilon*10);if(He){const Pe=He.point.sub(ae);Pe.size<ye.size&&(ye=Pe,ze=we)}}return!1}),ze&&u.isValid(ye)){const we=new xs(U,ze);this._pairs.has(we.id)||(this._pairs.add(we.id),this._collisionPairCache.push(we));const He=Kt.sub(ne);mt.globalPos=ae.add(He).add(ye).add(ke.dir.scale(10*this._config.continuous.surfaceEpsilon)),U.update(mt.transform.get()),i&&i.physics.fastBodyCollisions++}}}return this._collisionPairCache}narrowphase(t,e){let i=[];for(let n=0;n<t.length;n++){const a=t[n].collide();if(i=i.concat(a),e&&a.length>0)for(const m of a)e.physics.contacts.set(m.id,m)}return e&&(e.physics.collisions+=i.length),i}update(t){let e=0;const i=t.length;for(let n=0;n<i;n++)this._dynamicCollisionTree.updateCollider(t[n])&&e++;return e}debug(t){this._dynamicCollisionTree.debug(t)}}class cn{constructor(){this.id=H("collider",cn._ID++),this.composite=null,this.events=new l,this.offset=u.Zero}touching(t){return!!this.collide(t)}}cn._ID=0;var sn;(function(h){h.Arcade="arcade",h.Realistic="realistic"})(sn||(sn={}));var Ln;(function(h){h[h.DynamicAABBTree=0]="DynamicAABBTree"})(Ln||(Ln={}));var Fn;(function(h){h[h.Euler=0]="Euler"})(Fn||(Fn={}));class zi{static get gravity(){return zi.acc}static set gravity(t){zi.acc=t}static useArcadePhysics(){zi.collisionResolutionStrategy=sn.Arcade}static useRealisticPhysics(){zi.collisionResolutionStrategy=sn.Realistic}}zi.acc=new u(0,0),zi.enabled=!0,zi.broadphaseStrategy=Ln.DynamicAABBTree,zi.collisionResolutionStrategy=sn.Arcade,zi.defaultMass=10,zi.integrator=Fn.Euler,zi.dynamicTreeVelocityMultiplier=2,zi.boundsPadding=5,zi.positionIterations=3,zi.velocityIterations=8,zi.slop=1,zi.steeringFactor=.2,zi.warmStart=!0,zi.bodiesCanSleepByDefault=!1,zi.surfaceEpsilon=.1,zi.sleepEpsilon=.07,zi.wakeThreshold=zi.sleepEpsilon*3,zi.sleepBias=.9,zi.checkForFastBodies=!0,zi.disableMinimumSpeedForFastBody=!1;var mn;(function(h){h.None="none",h.VerticalFirst="vertical-first",h.HorizontalFirst="horizontal-first"})(mn||(mn={}));const Jn={vertical:1,horizontal:2},lr={horizontal:1,vertical:2},Un={horizontal:0,vertical:0},as={enabled:!0,gravity:O(0,0),solver:sn.Arcade,colliders:{compositeStrategy:"together"},continuous:{checkForFastBodies:!0,disableMinimumSpeedForFastBody:!1,surfaceEpsilon:.1},bodies:{canSleepByDefault:!1,sleepEpsilon:.07,wakeThreshold:.07*3,sleepBias:.9,defaultMass:10},dynamicTree:{boundsPadding:5,velocityMultiplier:2},arcade:{contactSolveBias:mn.None},realistic:{positionIterations:3,velocityIterations:8,slop:1,steeringFactor:.2,warmStart:!0}};function Nn(){return{enabled:zi.enabled,gravity:zi.gravity,solver:zi.collisionResolutionStrategy,continuous:{checkForFastBodies:zi.checkForFastBodies,disableMinimumSpeedForFastBody:zi.disableMinimumSpeedForFastBody,surfaceEpsilon:zi.surfaceEpsilon},colliders:{compositeStrategy:"together"},bodies:{canSleepByDefault:zi.bodiesCanSleepByDefault,sleepEpsilon:zi.sleepEpsilon,wakeThreshold:zi.wakeThreshold,sleepBias:zi.sleepBias,defaultMass:zi.defaultMass},dynamicTree:{boundsPadding:zi.boundsPadding,velocityMultiplier:zi.dynamicTreeVelocityMultiplier},arcade:{contactSolveBias:mn.None},realistic:{positionIterations:zi.positionIterations,velocityIterations:zi.velocityIterations,slop:zi.slop,steeringFactor:zi.steeringFactor,warmStart:zi.warmStart}}}class Ss extends cn{set compositeStrategy(t){this._compositeStrategy=t}get compositeStrategy(){return this._compositeStrategy}constructor(t){super(),this._collisionProcessor=new Mn(as),this._dynamicAABBTree=new An(as.dynamicTree),this._colliders=[];for(const e of t)this.addCollider(e)}clearColliders(){this._colliders=[]}addCollider(t){let e;t instanceof Ss?(e=t.getColliders(),e.forEach(i=>i.offset.addEqual(t.offset))):e=[t];for(const i of e)i.events.pipe(this.events),i.composite=this,this._colliders.push(i),this._collisionProcessor.track(i),this._dynamicAABBTree.trackCollider(i)}removeCollider(t){t.events.pipe(this.events),t.composite=null,xt(t,this._colliders),this._collisionProcessor.untrack(t),this._dynamicAABBTree.untrackCollider(t)}getColliders(){return this._colliders}get worldPos(){var t,e;return((e=(t=this._transform)===null||t===void 0?void 0:t.pos)!==null&&e!==void 0?e:u.Zero).add(this.offset)}get center(){var t,e;return((e=(t=this._transform)===null||t===void 0?void 0:t.pos)!==null&&e!==void 0?e:u.Zero).add(this.offset)}get bounds(){var t,e;const i=this.getColliders();return i.reduce((a,m)=>a.combine(m.bounds),(e=(t=i[0])===null||t===void 0?void 0:t.bounds)!==null&&e!==void 0?e:new ut().translate(this.worldPos)).translate(this.offset)}get localBounds(){var t,e;const i=this.getColliders();return i.reduce((a,m)=>a.combine(m.localBounds),(e=(t=i[0])===null||t===void 0?void 0:t.localBounds)!==null&&e!==void 0?e:new ut)}get axes(){const t=this.getColliders();let e=[];for(const i of t)e=e.concat(i.axes);return e}getFurthestPoint(t){const e=this.getColliders(),i=[];for(const m of e)i.push(m.getFurthestPoint(t));let n=i[0],a=-Number.MAX_VALUE;for(const m of i){const U=m.dot(t);U>a&&(n=m,a=U)}return n}getInertia(t){const e=this.getColliders();let i=0;for(const n of e)i+=n.getInertia(t);return i}collide(t){let e=[t];t instanceof Ss&&(e=t.getColliders());const i=[];for(const a of e)this._dynamicAABBTree.query(a,m=>(i.push(new xs(a,m)),!1));let n=[];for(const a of i)n=n.concat(a.collide());return n}getClosestLineBetween(t){const e=this.getColliders(),i=[];if(t instanceof Ss){const n=t.getColliders();for(const a of e)for(const m of n){const U=a.getClosestLineBetween(m);U&&i.push(U)}}else for(const n of e){const a=t.getClosestLineBetween(n);a&&i.push(a)}if(i.length){let n=i[0].getLength(),a=i[0];for(const m of i){const U=m.getLength();U<n&&(n=U,a=m)}return a}return null}contains(t){const e=this.getColliders();for(const i of e)if(i.contains(t))return!0;return!1}rayCast(t,e){const i=this.getColliders(),n=[];for(const a of i){const m=a.rayCast(t,e);m&&n.push(m)}if(n.length){let a=n[0],m=a.point.dot(t.dir);for(const U of n){const mt=t.dir.dot(U.point);mt<m&&(a=U,m=mt)}return a}return null}project(t){const e=this.getColliders(),i=[];for(const n of e){const a=n.project(t);a&&i.push(a)}if(i.length){const n=new Os(i[0].min,i[0].max);for(const a of i)n.min=Math.min(a.min,n.min),n.max=Math.max(a.max,n.max);return n}return null}update(t){if(t){const e=this.getColliders();for(const i of e)i.owner=this.owner,i.update(t)}}debug(t,e,i){const n=this.getColliders();t.save(),t.translate(this.offset.x,this.offset.y);for(const a of n)a.debug(t,e,i);t.restore()}clone(){const t=new Ss(this._colliders.map(e=>e.clone()));return t.offset=this.offset.clone(),t}}class zs{constructor(t,e){this.begin=t,this.end=e}get slope(){return(this.end.y-this.begin.y)/(this.end.x-this.begin.x)}get intercept(){return this.begin.y-this.slope*this.begin.x}normal(){return this._normal?this._normal:this._normal=this.end.sub(this.begin).normal()}dir(){return this._dir?this._dir:this._dir=this.end.sub(this.begin)}getPoints(){return[this.begin,this.end]}getSlope(){if(this._slope)return this._slope;const t=this.begin,e=this.end,i=t.distance(e);return this._slope=e.sub(t).scale(1/i)}getEdge(){const t=this.begin;return this.end.sub(t)}getLength(){if(this._length)return this._length;const t=this.begin,e=this.end,i=t.distance(e);return this._length=i}get midpoint(){return this.begin.add(this.end).scale(.5)}flip(){return new zs(this.end,this.begin)}below(t){return(this.end.x-this.begin.x)*(t.y-this.begin.y)-(this.end.y-this.begin.y)*(t.x-this.begin.x)>=0}clip(t,e){let i=t;i=i.normalize();const n=i.dot(this.begin)-e,a=i.dot(this.end)-e,m=[];if(n<=0&&m.push(this.begin),a<=0&&m.push(this.end),n*a<0){const U=n/(n-a);m.push(this.begin.add(this.end.sub(this.begin).scale(U)))}return m.length!==2?null:new zs(m[0],m[1])}distanceToPoint(t,e=!1){const i=t.x,n=t.y,a=this.getLength(),m=this.end.y-this.begin.y,U=this.end.x-this.begin.x,mt=(m*i-U*n+this.end.x*this.begin.y-this.end.y*this.begin.x)/a;return e?mt:Math.abs(mt)}findVectorToPoint(t){const e=this.begin.sub(t),i=this.getSlope();return e.sub(i.scale(e.dot(i)))}findPoint(t=null,e=null){const i=this.slope,n=this.intercept;if(t!==null)return new u(t,i*t+n);if(e!==null)return new u((e-n)/i,e);throw new Error("You must provide an X or a Y value")}hasPoint(){let t,e=0;if(typeof arguments[0]=="number"&&typeof arguments[1]=="number")t=new u(arguments[0],arguments[1]),e=arguments[2]||0;else if(arguments[0]instanceof u)t=arguments[0],e=arguments[1]||0;else throw"Could not determine the arguments for Vector.hasPoint";const i=t.x-this.begin.x,n=t.y-this.begin.y,a=this.end.x-this.begin.x,m=this.end.y-this.begin.y,U=i*m-n*a;return Math.abs(U)>e?!1:Math.abs(a)>=Math.abs(m)?a>0?this.begin.x<=t.x&&t.x<=this.end.x:this.end.x<=t.x&&t.x<=this.begin.x:m>0?this.begin.y<=t.y&&t.y<=this.end.y:this.end.y<=t.y&&t.y<=this.begin.y}}function cr(h,t,e,i){const n=h.sub(e),a=t.dot(t),m=t.dot(i),U=i.dot(i),mt=t.dot(n),Et=i.dot(n),St=a*U-m*m;let Lt=St,Kt=St;if(St===0||St<=.01){const ke=mt/m;return new zs(h,e.add(i.scale(ke)))}let ne=m*Et-U*mt,ae=a*Et-m*mt;return ne<0?(ne=0,ae=Et,Kt=U):ne>Lt&&(ne=Lt,ae=Et+m,Kt=U),ae<0?(ae=0,-mt<0?ne=0:-mt>a?ne=Lt:(ne=-mt,Lt=a)):ae>Kt&&(ae=Kt,-mt+m<0?ne=0:-mt+m>a?ne=Lt:(ne=-mt+m,Lt=a)),ne=Math.abs(ne)<.001?0:ne/Lt,ae=Math.abs(ae)<.001?0:ae/Kt,new zs(h.add(t.scale(ne)),e.add(i.scale(ae)))}const Tn={PolygonPolygonClosestLine(h,t){const e=t.worldPos,i=e.sub(h.worldPos),n=i.negate(),a=new Zs(h.worldPos,i),m=new Zs(e,n),U=h.rayCast(a).point.add(a.dir.scale(.1)),mt=t.rayCast(m).point.add(m.dir.scale(.1)),Et=h.getClosestFace(U),St=t.getClosestFace(mt),Lt=Et.face.begin,Kt=Et.face.getEdge(),ne=St.face.begin,ae=St.face.getEdge();return cr(Lt,Kt,ne,ae)},PolygonEdgeClosestLine(h,t){const i=t.worldPos.sub(h.worldPos),n=new Zs(h.worldPos,i),a=h.rayCast(n).point.add(n.dir.scale(.1)),m=h.getClosestFace(a),U=m.face.begin,mt=m.face.getEdge(),Et=t.asLine(),St=Et.begin,Lt=Et.getEdge();return cr(U,mt,St,Lt)},PolygonCircleClosestLine(h,t){const e=t.worldPos,i=e.sub(h.worldPos),n=new Zs(h.worldPos,i.normalize()),a=h.rayCast(n).point.add(n.dir.scale(.1)),m=h.getClosestFace(a),U=m.face.begin,mt=m.face.getEdge();let Et=(mt.x*(e.x-U.x)+mt.y*(e.y-U.y))/(mt.x*mt.x+mt.y*mt.y);Et>1?Et=1:Et<0&&(Et=0);const St=Math.sqrt(Math.pow(U.x+mt.x*Et-e.x,2)+Math.pow(U.y+mt.y*Et-e.y,2))-t.radius,Lt=(U.x+mt.x*Et-e.x)*t.radius/(t.radius+St),Kt=(U.y+mt.y*Et-e.y)*t.radius/(t.radius+St);return new zs(mt.scale(Et).add(U),new u(e.x+Lt,e.y+Kt))},CircleCircleClosestLine(h,t){const i=t.worldPos.sub(h.worldPos),a=h.worldPos.sub(t.worldPos),m=new Zs(h.worldPos,i),U=new Zs(t.worldPos,a),mt=h.rayCast(m),Et=t.rayCast(U);return new zs(mt.point,Et.point)},CircleEdgeClosestLine(h,t){const e=h.worldPos,i=t.asLine(),n=i.begin,a=i.getEdge(),m=n,U=a;let mt=(U.x*(e.x-m.x)+U.y*(e.y-m.y))/(U.x*U.x+U.y*U.y);mt>1?mt=1:mt<0&&(mt=0);const Et=Math.sqrt(Math.pow(m.x+U.x*mt-e.x,2)+Math.pow(m.y+U.y*mt-e.y,2))-h.radius,St=(m.x+U.x*mt-e.x)*h.radius/(h.radius+Et),Lt=(m.y+U.y*mt-e.y)*h.radius/(h.radius+Et);return new zs(U.scale(mt).add(m),new u(e.x+St,e.y+Lt))},EdgeEdgeClosestLine(h,t){const e=h.asLine(),i=e.begin,n=e.getEdge(),a=i,m=n,U=t.asLine(),mt=U.begin,Et=U.getEdge();return cr(a,m,mt,Et)}};class Ns extends cn{get worldPos(){return this._globalMatrix.getPosition()}get radius(){var t;const e=this._transform,i=(t=e?.globalScale)!==null&&t!==void 0?t:u.One;return this._naturalRadius*Math.min(i.x,i.y)}set radius(t){var e;const i=this._transform,n=(e=i?.globalScale)!==null&&e!==void 0?e:u.One;this._naturalRadius=t/Math.min(n.x,n.y)}constructor(t){super(),this.offset=u.Zero,this._globalMatrix=$t.identity(),this.offset=t.offset||u.Zero,this.radius=t.radius||0,this._globalMatrix.translate(this.offset.x,this.offset.y)}clone(){return new Ns({offset:this.offset.clone(),radius:this.radius})}get center(){return this._globalMatrix.getPosition()}contains(t){var e,i;return((i=(e=this._transform)===null||e===void 0?void 0:e.pos)!==null&&i!==void 0?i:this.offset).distance(t)<=this.radius}rayCast(t,e=1/0){var i,n;const a=this.center,m=t.dir,U=t.pos,mt=Math.sqrt(Math.pow(m.dot(U.sub(a)),2)-Math.pow(U.sub(a).distance(),2)+Math.pow(this.radius,2));if(mt<0)return null;{let Et=0;if(mt===0){if(Et=-m.dot(U.sub(a)),Et>0&&Et<e){const St=t.getPoint(Et);return{point:St,normal:St.sub(a).normalize(),collider:this,body:(i=this.owner)===null||i===void 0?void 0:i.get(Hi),distance:Et}}return null}else{const St=-m.dot(U.sub(a))+mt,Lt=-m.dot(U.sub(a))-mt,Kt=[];St>=0&&Kt.push(St),Lt>=0&&Kt.push(Lt);const ne=Math.min(...Kt);if(ne<=e){const ae=t.getPoint(ne);return{point:ae,normal:ae.sub(a).normalize(),collider:this,body:(n=this.owner)===null||n===void 0?void 0:n.get(Hi),distance:ne}}return null}}}getClosestLineBetween(t){if(t instanceof Ns)return Tn.CircleCircleClosestLine(this,t);if(t instanceof Qs)return Tn.PolygonCircleClosestLine(t,this).flip();if(t instanceof nn)return Tn.CircleEdgeClosestLine(this,t).flip();throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof t}`)}collide(t){if(t instanceof Ns)return En.CollideCircleCircle(this,t);if(t instanceof Qs)return En.CollideCirclePolygon(this,t);if(t instanceof nn)return En.CollideCircleEdge(this,t);throw new Error(`Circle could not collide with unknown CollisionShape ${typeof t}`)}getFurthestPoint(t){return this.center.add(t.normalize().scale(this.radius))}getFurthestLocalPoint(t){return t.normalize().scale(this.radius)}get bounds(){var t,e,i;const n=this._transform,a=(t=n?.globalScale)!==null&&t!==void 0?t:u.One,m=(e=n?.globalRotation)!==null&&e!==void 0?e:0,U=(i=n?.globalPos)!==null&&i!==void 0?i:u.Zero;return new ut(this.offset.x-this._naturalRadius,this.offset.y-this._naturalRadius,this.offset.x+this._naturalRadius,this.offset.y+this._naturalRadius).rotate(m).scale(a).translate(U)}get localBounds(){return new ut(this.offset.x-this._naturalRadius,this.offset.y-this._naturalRadius,this.offset.x+this._naturalRadius,this.offset.y+this._naturalRadius)}get axes(){return[]}getInertia(t){return t*this.radius*this.radius/2}update(t){var e;this._transform=t,((e=t.matrix)!==null&&e!==void 0?e:this._globalMatrix).clone(this._globalMatrix),this._globalMatrix.translate(this.offset.x,this.offset.y)}project(t){const e=[],n=this.center.dot(t);return e.push(n),e.push(n+this.radius),e.push(n-this.radius),new Os(Math.min.apply(Math,e),Math.max.apply(Math,e))}debug(t,e,i){var n,a,m,U;const{lineWidth:mt}={lineWidth:1,...i},Et=this._transform,St=(n=Et?.globalScale)!==null&&n!==void 0?n:u.One,Lt=(a=Et?.globalRotation)!==null&&a!==void 0?a:0,Kt=(m=Et?.globalPos)!==null&&m!==void 0?m:u.Zero;t.save(),t.translate(Kt.x,Kt.y),t.rotate(Lt),t.scale(St.x,St.y),t.drawCircle((U=this.offset)!==null&&U!==void 0?U:u.Zero,this._naturalRadius,X.Transparent,e,mt),t.restore()}}class Hn{constructor(t,e,i,n,a,m,U,mt){var Et,St,Lt,Kt,ne,ae;if(this._canceled=!1,this.colliderA=t,this.colliderB=e,this.mtv=i,this.normal=n,this.tangent=a,this.points=m,this.localPoints=U,this.info=mt,this.id=xs.calculatePairHash(t.id,e.id),t.composite||e.composite){const ke=((Et=t.composite)===null||Et===void 0?void 0:Et.compositeStrategy)==="separate"?t.id:(Lt=(St=t.composite)===null||St===void 0?void 0:St.id)!==null&&Lt!==void 0?Lt:t.id,ze=((Kt=e.composite)===null||Kt===void 0?void 0:Kt.compositeStrategy)==="separate"?e.id:(ae=(ne=e.composite)===null||ne===void 0?void 0:ne.id)!==null&&ae!==void 0?ae:e.id;this.id+="|"+xs.calculatePairHash(ke,ze)}}matchAwake(){const t=this.colliderA.owner.get(Hi),e=this.colliderB.owner.get(Hi);t&&e&&t.sleeping!==e.sleeping&&(t.sleeping&&t.collisionType!==je.Fixed&&e.sleepMotion>=t.wakeThreshold&&t.setSleeping(!1),e.sleeping&&e.collisionType!==je.Fixed&&t.sleepMotion>=e.wakeThreshold&&e.setSleeping(!1))}isCanceled(){return this._canceled}cancel(){this._canceled=!0}}class kr{static findPolygonPolygonSeparation(t,e){let i=-Number.MAX_VALUE,n=null,a=null,m=-1,U=null;const mt=t.getSides(),Et=t.getLocalSides();for(let St=0;St<mt.length;St++){const Lt=mt[St],Kt=Lt.normal(),ne=e.getFurthestPoint(Kt.negate()),ae=Lt.distanceToPoint(ne,!0);ae>i&&(i=ae,n=Lt,a=Kt,m=St,U=ne)}return{collider:t,separation:a?i:99,axis:a,side:n,localSide:Et[m],sideId:m,point:U,localPoint:a?e.getFurthestLocalPoint(a.negate()):null}}static findCirclePolygonSeparation(t,e){const i=e.axes,a=e.center.sub(t.worldPos),m=e.getFurthestPoint(a.negate());i.push(m.sub(t.worldPos).normalize());let U=Number.MAX_VALUE,mt=null,Et=-1;for(let St=0;St<i.length;St++){const Lt=e.project(i[St]),Kt=t.project(i[St]),ne=Lt.getOverlap(Kt);if(ne<=0)return null;ne<U&&(U=ne,mt=i[St],Et=St)}return Et<0?null:mt.normalize().scale(U)}}const En={CollideCircleCircle(h,t){const e=h.worldPos,i=t.worldPos,n=h.radius+t.radius,a=e.distance(i);if(a>n)return[];const m=n-a,U=i.sub(e).normalize(),mt=U.perpendicular(),Et=U.scale(m),St=h.getFurthestPoint(U),Lt=h.getFurthestLocalPoint(U),Kt={collider:h,separation:m,axis:U,point:St};return[new Hn(h,t,Et,U,mt,[St],[Lt],Kt)]},CollideCirclePolygon(h,t){var e,i;let n=kr.findCirclePolygonSeparation(h,t);if(!n)return[];n=n.dot(t.center.sub(h.center))<0?n.negate():n;const m=h.getFurthestPoint(n),mt=((i=(e=h.owner)===null||e===void 0?void 0:e.get(fi))!==null&&i!==void 0?i:new fi).applyInverse(m),Et=n.normalize(),St={collider:h,separation:-n.size,axis:Et,point:m,localPoint:mt,side:t.findSide(Et.negate()),localSide:t.findLocalSide(Et.negate())};return[new Hn(h,t,n,Et,Et.perpendicular(),[m],[mt],St)]},CollideCircleEdge(h,t){const e=h.center,i=t.asLine(),n=i.end.sub(i.begin),a=n.dot(i.end.sub(e)),m=n.dot(e.sub(i.begin)),U=t.asLine(),mt=t.asLocalLine();if(m<=0){const ye=i.begin.sub(e),we=ye.dot(ye);if(we>h.radius*h.radius)return[];const He=ye.normalize(),Pe=h.radius-Math.sqrt(we),vi={collider:h,separation:Pe,axis:He,point:U.begin,side:U,localSide:mt};return[new Hn(h,t,He.scale(Pe),He,He.perpendicular(),[U.begin],[mt.begin],vi)]}if(a<=0){const ye=i.end.sub(e),we=ye.dot(ye);if(we>h.radius*h.radius)return[];const He=ye.normalize(),Pe=h.radius-Math.sqrt(we),vi={collider:h,separation:Pe,axis:He,point:U.end,side:U,localSide:mt};return[new Hn(h,t,He.scale(Pe),He,He.perpendicular(),[U.end],[mt.end],vi)]}const Et=n.dot(n),St=i.begin.scale(a).add(i.end.scale(m)).scale(1/Et),Lt=e.sub(St),Kt=Lt.dot(Lt);if(Kt>h.radius*h.radius)return[];let ne=n.perpendicular();ne.dot(e.sub(i.begin))<0&&(ne.x=-ne.x,ne.y=-ne.y),ne=ne.normalize();const ae=h.radius-Math.sqrt(Kt),ke=ne.scale(ae),ze={collider:h,separation:ae,axis:ne,point:St,side:U,localSide:mt};return[new Hn(h,t,ke,ne.negate(),ne.negate().perpendicular(),[St],[St.sub(t.worldPos)],ze)]},CollideEdgeEdge(){return[]},CollidePolygonEdge(h,t){var e;const i=h.center,a=t.center.sub(i).normalize(),m=new Qs({points:[t.begin,t.end,t.end.add(a.scale(100)),t.begin.add(a.scale(100))],offset:t.offset});m.owner=t.owner,((e=t.owner)===null||e===void 0?void 0:e.get(fi))&&m.update(t.owner.get(fi).get());const mt=this.CollidePolygonPolygon(h,m);return mt.length&&(mt[0].colliderB=t,mt[0].id=xs.calculatePairHash(h.id,t.id)),mt},CollidePolygonPolygon(h,t){var e,i,n,a;const m=kr.findPolygonPolygonSeparation(h,t);if(m.separation>0)return[];const U=kr.findPolygonPolygonSeparation(t,h);if(U.separation>0)return[];const mt=m.separation>U.separation?m:U,St=(mt.collider===h?t:h).findSide(mt.axis.negate()),Lt=mt.side,Kt=Lt.dir().normalize(),ne=St.clip(Kt.negate(),-Kt.dot(Lt.begin));let ae=null;if(ne&&(ae=ne.clip(Kt,Kt.dot(Lt.end))),ae){const ke=ae.getPoints().filter(He=>Lt.below(He));let ze=mt.axis,ye=ze.perpendicular();t.center.sub(h.center).dot(ze)<0&&(ze=ze.negate(),ye=ze.perpendicular());let we=[];if(mt.collider===h){const He=(i=(e=t.owner)===null||e===void 0?void 0:e.get(fi))!==null&&i!==void 0?i:new fi;we=ke.map(Pe=>He.applyInverse(Pe))}else{const He=(a=(n=h.owner)===null||n===void 0?void 0:n.get(fi))!==null&&a!==void 0?a:new fi;we=ke.map(Pe=>He.applyInverse(Pe))}return[new Hn(h,t,ze.scale(-mt.separation),ze,ye,ke,we,mt)]}return[]},FindContactSeparation(h,t){var e,i,n,a;const m=h.colliderA,U=(i=(e=h.colliderA.owner)===null||e===void 0?void 0:e.get(fi))!==null&&i!==void 0?i:new fi,mt=h.colliderB,Et=(a=(n=h.colliderB.owner)===null||n===void 0?void 0:n.get(fi))!==null&&a!==void 0?a:new fi;if(m instanceof Ns&&mt instanceof Ns){const St=m.radius+mt.radius,Lt=U.pos.distance(Et.pos);return-(St-Lt)}if(m instanceof Qs&&mt instanceof Qs&&h.info.localSide){let St,Lt;return h.info.collider===m?(St=new zs(U.apply(h.info.localSide.begin),U.apply(h.info.localSide.end)),Lt=Et.apply(t)):(St=new zs(Et.apply(h.info.localSide.begin),Et.apply(h.info.localSide.end)),Lt=U.apply(t)),St.distanceToPoint(Lt,!0)}if(m instanceof Qs&&mt instanceof Ns||mt instanceof Qs&&m instanceof Ns){const St=U.apply(t);if(h.info.side)return h.info.side.distanceToPoint(St,!0)}if(m instanceof nn&&mt instanceof Qs||mt instanceof nn&&m instanceof Qs){let St;if(h.info.collider===m?St=Et.apply(t):St=U.apply(t),h.info.side)return h.info.side.distanceToPoint(St,!0)}if(m instanceof Ns&&mt instanceof nn||mt instanceof Ns&&m instanceof nn){const St=Et.apply(t);let Lt;m instanceof Ns&&(Lt=m.getFurthestPoint(h.normal));const Kt=St.distance(Lt);if(h.info.side)return Kt>0?-Kt:0}return 0}};class nn extends cn{constructor(t){var e;super(),this._globalMatrix=$t.identity(),this.begin=t.begin||u.Zero,this.end=t.end||u.Zero,this.offset=(e=t.offset)!==null&&e!==void 0?e:u.Zero}clone(){return new nn({begin:this.begin.clone(),end:this.end.clone()})}get worldPos(){var t;const e=this._transform;return(t=e?.globalPos.add(this.offset))!==null&&t!==void 0?t:this.offset}get center(){const t=this._getTransformedBegin(),e=this._getTransformedEnd();return t.average(e)}_getTransformedBegin(){return this._globalMatrix.multiply(this.begin)}_getTransformedEnd(){return this._globalMatrix.multiply(this.end)}getSlope(){const t=this._getTransformedBegin(),e=this._getTransformedEnd(),i=t.distance(e);return e.sub(t).scale(1/i)}getLength(){const t=this._getTransformedBegin(),e=this._getTransformedEnd();return t.distance(e)}contains(){return!1}rayCast(t,e=1/0){var i;const n=this._getTransformedBegin().sub(t.pos);if(t.dir.cross(this.getSlope())===0&&n.cross(t.dir)!==0)return null;const a=t.dir.cross(this.getSlope());if(a===0)return null;const m=n.cross(this.getSlope())/a;if(m>=0&&m<=e){const U=n.cross(t.dir)/a/this.getLength();if(U>=0&&U<=1)return{distance:m,normal:this.asLine().normal(),collider:this,body:(i=this.owner)===null||i===void 0?void 0:i.get(Hi),point:t.getPoint(m)}}return null}getClosestLineBetween(t){if(t instanceof Ns)return Tn.CircleEdgeClosestLine(t,this);if(t instanceof Qs)return Tn.PolygonEdgeClosestLine(t,this).flip();if(t instanceof nn)return Tn.EdgeEdgeClosestLine(this,t);throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof t}`)}collide(t){if(t instanceof Ns)return En.CollideCircleEdge(t,this);if(t instanceof Qs)return En.CollidePolygonEdge(t,this);if(t instanceof nn)return En.CollideEdgeEdge();throw new Error(`Edge could not collide with unknown CollisionShape ${typeof t}`)}getFurthestPoint(t){const e=this._getTransformedBegin(),i=this._getTransformedEnd();return t.dot(e)>0?e:i}_boundsFromBeginEnd(t,e,i=10){return new ut(Math.min(t.x,e.x)-i,Math.min(t.y,e.y)-i,Math.max(t.x,e.x)+i,Math.max(t.y,e.y)+i)}get bounds(){const t=this._getTransformedBegin(),e=this._getTransformedEnd();return this._boundsFromBeginEnd(t,e)}get localBounds(){return this._boundsFromBeginEnd(this.begin,this.end)}asLine(){return new zs(this._getTransformedBegin(),this._getTransformedEnd())}asLocalLine(){return new zs(this.begin,this.end)}get axes(){const e=this._getTransformedEnd().sub(this._getTransformedBegin()).normal(),i=[];return i.push(e),i.push(e.negate()),i.push(e.normal()),i.push(e.normal().negate()),i}getInertia(t){const e=this.end.sub(this.begin).distance()/2;return t*e*e}update(t){var e;this._transform=t,((e=t.matrix)!==null&&e!==void 0?e:this._globalMatrix).clone(this._globalMatrix),this._globalMatrix.translate(this.offset.x,this.offset.y)}project(t){const e=[],i=[this._getTransformedBegin(),this._getTransformedEnd()],n=i.length;for(let a=0;a<n;a++)e.push(i[a].dot(t));return new Os(Math.min.apply(Math,e),Math.max.apply(Math,e))}debug(t,e){const i=this._getTransformedBegin(),n=this._getTransformedEnd();t.drawLine(i,n,e,2),t.drawCircle(i,2,e),t.drawCircle(n,2,e)}}class Ds{static registerGraphicsContext(t){Ds._ctx=t}static draw(t){this._drawCalls.push(t)}static drawPoint(t,e){Ds.draw(i=>{i.debug.drawPoint(t,e)})}static drawLine(t,e,i){Ds.draw(n=>{n.debug.drawLine(t,e,i)})}static drawLines(t,e){t.length>1&&Ds.draw(i=>{for(let n=0;n<t.length-1;n++)i.debug.drawLine(t[n],t[n+1],e)})}static drawText(t,e){Ds.draw(i=>{i.debug.drawText(t,e)})}static drawPolygon(t,e){t.length>1&&Ds.draw(i=>{const n=t[0],a=[...t,n];for(let m=0;m<a.length-1;m++)i.debug.drawLine(a[m],a[m+1],e)})}static drawCircle(t,e,i){const{color:n,strokeColor:a,width:m}={color:X.Black,strokeColor:void 0,width:void 0,...i};Ds.draw(U=>{U.drawCircle(t,e,n,a,m)})}static drawBounds(t,e){Ds.draw(i=>{i.debug.drawRect(t.left,t.top,t.width,t.height,e)})}static drawRay(t,e){const{distance:i,color:n}={color:X.Blue,distance:10,...e};Ds.draw(a=>{const m=t.pos,U=t.pos.add(t.dir.scale(i));a.debug.drawLine(m,U,{color:n})})}static flush(t){t.save(),t.z=Ds.z;for(const e of Ds._drawCalls)e(t);t.restore(),Ds.clear()}static clear(){Ds._drawCalls.length=0}}Ds._drawCalls=[],Ds.z=1/0;class Qs extends cn{flagDirty(){this._localBoundsDirty=!0,this._localSidesDirty=!0,this._transformedPointsDirty=!0,this._sidesDirty=!0}set points(t){this._points=t,this.flagDirty()}get points(){return this._points}constructor(t){var e,i;super(),this._logger=ft.getInstance(),this._transformedPoints=[],this._sides=[],this._localSides=[],this._globalMatrix=$t.identity(),this._transformedPointsDirty=!0,this._sidesDirty=!0,this._localSidesDirty=!0,this._localBoundsDirty=!0,this.offset=(e=t.offset)!==null&&e!==void 0?e:u.Zero,this._globalMatrix.translate(this.offset.x,this.offset.y),this.points=(i=t.points)!==null&&i!==void 0?i:[],this._isCounterClockwiseWinding(this.points)||this.points.reverse(),this.isConvex()||t.suppressConvexWarning||this._logger.warn("Excalibur only supports convex polygon colliders and will not behave properly.Call PolygonCollider.triangulate() to build a new collider composed of smaller convex triangles"),this._calculateTransformation()}_isCounterClockwiseWinding(t){let e=0;for(let i=0;i<t.length;i++)e+=(t[(i+1)%t.length].x-t[i].x)*(t[(i+1)%t.length].y+t[i].y);return e<0}isConvex(){if(this.points.length<3)return!1;let t=this.points[this.points.length-2],e=this.points[this.points.length-1],i=Math.atan2(e.y-t.y,e.x-t.x),n=0,a=0,m=0;for(const[U,mt]of this.points.entries()){if(t=e,n=i,e=mt,i=Math.atan2(e.y-t.y,e.x-t.x),t.equals(e))return!1;let Et=i-n;if(Et<=-Math.PI?Et+=Math.PI*2:Et>Math.PI&&(Et-=Math.PI*2),U===0){if(Et===0)return!1;a=Et>0?1:-1}else if(a*Et<=0)return!1;m+=Et}return Math.abs(Math.round(m/(Math.PI*2)))===1}tessellate(){const t=[];for(let e=1;e<this.points.length-2;e++)t.push([this.points[0],this.points[e+1],this.points[e+2]]);return t.push([this.points[0],this.points[1],this.points[2]]),new Ss(t.map(e=>Gs.Polygon(e)))}triangulate(){if(this.points.length<3)throw Error("Invalid polygon");const t=[],e=[...this.points].reverse();let i=e.length;function n(Lt){return Lt===0?i-1:Lt-1}function a(Lt){return Lt===i-1?0:Lt+1}function m(Lt){const Kt=n(Lt),ne=a(Lt),ae=e[Kt],ke=e[Lt],ze=e[ne],ye=ae.sub(ke),we=ze.sub(ke);return!(ye.cross(we)<0)}const U=e.map((Lt,Kt)=>m(Kt));function mt(Lt,Kt,ne,ae){const ke=ne.sub(Kt),ze=ae.sub(ne),ye=Kt.sub(ae),we=Lt.sub(Kt),He=Lt.sub(ne),Pe=Lt.sub(ae),vi=ke.cross(we),Ji=ze.cross(He),Xe=ye.cross(Pe);return!(vi>0||Ji>0||Xe>0)}function Et(){for(let Lt=0;Lt<i;Lt++)if(U[Lt]){const Kt=n(Lt),ne=a(Lt),ae=e[Kt],ke=e[Lt],ze=e[ne];let ye=!0;for(let we=0;we<i;we++){if(we===Lt||we===Kt||we===ne)continue;const He=e[we];if(mt(He,ae,ke,ze)){ye=!1;break}}if(ye)return Lt}for(let Lt=0;Lt<i;Lt++)if(U[Lt])return Lt;return 0}function St(Lt){const Kt=n(Lt),ne=a(Lt),ae=e[Kt],ke=e[Lt],ze=e[ne];t.push([ae,ke,ze]),e.splice(Lt,1),U.splice(Lt,1),i--}for(;i>3;){const Lt=Et();St(Lt);for(let Kt=0;Kt<i;Kt++)U[Kt]=m(Kt)}return t.push([e[0],e[1],e[2]]),new Ss(t.map(Lt=>Gs.Polygon(Lt,u.Zero,!0)))}clone(){return new Qs({offset:this.offset.clone(),points:this.points.map(t=>t.clone())})}get worldPos(){return this._transform?this._transform.pos.add(this.offset):this.offset}get center(){return this.bounds.center}_calculateTransformation(){const t=this.points,e=t.length;this._transformedPoints.length=0;for(let i=0;i<e;i++)this._transformedPoints[i]=this._globalMatrix.multiply(t[i].clone())}getTransformedPoints(){return this._transformedPointsDirty&&(this._calculateTransformation(),this._transformedPointsDirty=!1),this._transformedPoints}getSides(){if(this._sidesDirty){const t=[],e=this.getTransformedPoints(),i=e.length;for(let n=0;n<i;n++)t.push(new zs(e[n],e[(n+1)%i]));this._sides=t,this._sidesDirty=!1}return this._sides}getLocalSides(){if(this._localSidesDirty){const t=[],e=this.points,i=e.length;for(let n=0;n<i;n++)t.push(new zs(e[n],e[(n+1)%i]));this._localSides=t,this._localSidesDirty=!1}return this._localSides}findSide(t){const e=this.getSides();let i=e[0],n=-Number.MAX_VALUE;for(let a=0;a<e.length;a++){const m=e[a],mt=m.normal().dot(t);mt>n&&(i=m,n=mt)}return i}findLocalSide(t){const e=this.getLocalSides();let i=e[0],n=-Number.MAX_VALUE;for(let a=0;a<e.length;a++){const m=e[a],mt=m.normal().dot(t);mt>n&&(i=m,n=mt)}return i}get axes(){const t=[],e=this.getSides();for(let i=0;i<e.length;i++)t.push(e[i].normal());return t}update(t){var e;t&&(this._transform=t,this._transformedPointsDirty=!0,this._sidesDirty=!0,((e=t.matrix)!==null&&e!==void 0?e:this._globalMatrix).clone(this._globalMatrix),this._globalMatrix.translate(this.offset.x,this.offset.y))}contains(t){const e=new Zs(t,new u(1,0));return this.getSides().reduce(function(n,a){return e.intersect(a)>=0?n+1:n},0)%2!==0}getClosestLineBetween(t){if(t instanceof Ns)return Tn.PolygonCircleClosestLine(this,t);if(t instanceof Qs)return Tn.PolygonPolygonClosestLine(this,t);if(t instanceof nn)return Tn.PolygonEdgeClosestLine(this,t);throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof t}`)}collide(t){if(t instanceof Ns)return En.CollideCirclePolygon(t,this);if(t instanceof Qs)return En.CollidePolygonPolygon(this,t);if(t instanceof nn)return En.CollidePolygonEdge(this,t);throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof t}`)}getFurthestPoint(t){const e=this.getTransformedPoints();let i=null,n=-Number.MAX_VALUE;for(let a=0;a<e.length;a++){const m=t.dot(e[a]);m>n&&(n=m,i=e[a])}return i}getFurthestLocalPoint(t){const e=this.points;let i=e[0],n=-Number.MAX_VALUE;for(let a=0;a<e.length;a++){const m=t.dot(e[a]);m>n&&(n=m,i=e[a])}return i}getClosestFace(t){const e=this.getSides();let i=Number.POSITIVE_INFINITY,n=-1,a=-1;for(let m=0;m<e.length;m++){const U=e[m].distanceToPoint(t);U<i&&(i=U,n=m,a=U)}return n!==-1?{distance:e[n].normal().scale(a),face:e[n]}:null}get bounds(){return this.localBounds.transform(this._globalMatrix)}get localBounds(){return this._localBoundsDirty&&(this._localBounds=ut.fromPoints(this.points),this._localBoundsDirty=!1),this._localBounds}getInertia(t){if(this._cachedMass===t&&this._cachedInertia)return this._cachedInertia;let e=0,i=0;const n=this.points;for(let a=0;a<n.length;a++){const m=(a+1)%n.length,U=n[m].cross(n[a]);e+=U*(n[a].dot(n[a])+n[a].dot(n[m])+n[m].dot(n[m])),i+=U}return this._cachedMass=t,this._cachedInertia=t/6*(e/i)}rayCast(t,e=1/0){var i;const n=this.getSides(),a=n.length;let m=Number.MAX_VALUE,U,mt=-1;for(let Et=0;Et<a;Et++){const St=t.intersect(n[Et]);St>=0&&St<m&&St<=e&&(m=St,U=n[Et],mt=Et)}return mt>=0?{collider:this,distance:m,body:(i=this.owner)===null||i===void 0?void 0:i.get(Hi),point:t.getPoint(m),normal:U.normal()}:null}project(t){const e=this.getTransformedPoints(),i=e.length;let n=Number.MAX_VALUE,a=-Number.MAX_VALUE;for(let m=0;m<i;m++){const U=e[m].dot(t);n=Math.min(n,U),a=Math.max(a,U)}return new Os(n,a)}debug(t,e,i){const n=this.getTransformedPoints();Ds.drawPolygon(n,{color:e})}}class Gs{static Box(t,e,i=u.Half,n=u.Zero){return new Qs({points:new ut(-t*i.x,-e*i.y,t-t*i.x,e-e*i.y).getPoints(),offset:n})}static Polygon(t,e=u.Zero,i=!1){return new Qs({points:t,offset:e,suppressConvexWarning:i})}static Circle(t,e=u.Zero){return new Ns({radius:t,offset:e})}static Edge(t,e){return new nn({begin:t,end:e})}static Capsule(t,e,i=u.Zero){const n=ft.getInstance();return t===e&&n.warn("A capsule collider with equal width and height is a circle, consider using a ex.Shape.Circle or ex.CircleCollider"),e>=t?new Ss([Gs.Circle(t/2,O(0,-e/2+t/2).add(i)),Gs.Box(t,e-t,u.Half,i),Gs.Circle(t/2,O(0,e/2-t/2).add(i))]):new Ss([Gs.Circle(e/2,O(-t/2+e/2,0).add(i)),Gs.Box(t-e,e,u.Half,i),Gs.Circle(e/2,O(t/2-e/2,0).add(i))])}}class Cs extends ss{constructor(t){super(),this.events=new l,this.$colliderAdded=new ls,this.$colliderRemoved=new ls,this._collidersToRemove=[],this.set(t)}get(){return this._collider}set(t){return this.clear(),t&&(this._collider=t,this._collider.owner=this.owner,t.events.pipe(this.events),this.$colliderAdded.notifyAll(t),this.update()),t}clear(){this._collider&&(this._collidersToRemove.push(this._collider),this._collider=null)}processColliderRemoval(){for(const t of this._collidersToRemove)t.events.unpipe(this.events),this.$colliderRemoved.notifyAll(t),t.owner=null}clone(){return new Cs(this._collider.clone())}get bounds(){var t,e;return(e=(t=this._collider)===null||t===void 0?void 0:t.bounds)!==null&&e!==void 0?e:new ut}get localBounds(){var t,e;return(e=(t=this._collider)===null||t===void 0?void 0:t.localBounds)!==null&&e!==void 0?e:new ut}update(){var t;const e=(t=this.owner)===null||t===void 0?void 0:t.get(fi);this._collider&&(this._collider.owner=this.owner,e&&this._collider.update(e.get()))}collide(t){let e=this._collider,i=t._collider;if(!e||!i)return[];let n=!1;if(i instanceof Ss&&(e=i,i=this._collider,n=!0),this._collider){const a=e.collide(i);return a?(n&&a.forEach(m=>{m.mtv=m.mtv.negate(),m.normal=m.normal.negate(),m.tangent=m.normal.perpendicular(),m.colliderA=this._collider,m.colliderB=t._collider}),a):[]}return[]}onAdd(t){this._collider&&this.update(),this.events.on("precollision",e=>{const i=e;t.events.emit("precollision",new _i(i.target.owner,i.other.owner,i.side,i.intersection,i.contact)),t instanceof Xs&&t.onPreCollisionResolve(i.target,i.other,i.side,i.contact)}),this.events.on("postcollision",e=>{const i=e;t.events.emit("postcollision",new bi(i.target.owner,i.other.owner,i.side,i.intersection,i.contact)),t instanceof Xs&&t.onPostCollisionResolve(i.target,i.other,i.side,i.contact)}),this.events.on("collisionstart",e=>{const i=e;t.events.emit("collisionstart",new jn(i.target.owner,i.other.owner,i.side,i.contact)),t instanceof Xs&&t.onCollisionStart(i.target,i.other,i.side,i.contact)}),this.events.on("collisionend",e=>{const i=e;t.events.emit("collisionend",new Fs(i.target.owner,i.other.owner,i.side,i.lastContact)),t instanceof Xs&&t.onCollisionEnd(i.target,i.other,i.side,i.lastContact)})}onRemove(){this.events.clear(),this.$colliderRemoved.notifyAll(this._collider)}useBoxCollider(t,e,i=u.Half,n=u.Zero){const a=Gs.Box(t,e,i,n);return this.set(a)}usePolygonCollider(t,e=u.Zero){const i=Gs.Polygon(t,e);return this.set(i)}useCircleCollider(t,e=u.Zero){const i=Gs.Circle(t,e);return this.set(i)}useEdgeCollider(t,e){const i=Gs.Edge(t,e);return this.set(i)}useCompositeCollider(t){return this.set(new Ss(t))}}var Ws;(function(h){h.Rotation="rotation",h.X="x",h.Y="y"})(Ws||(Ws={}));class Hi extends ss{constructor(t){var e,i,n;super(),this.dependencies=[fi,us],this.id=H("body",Hi._ID++),this.events=new l,this.oldTransform=new os,this.__oldTransformCaptured=!1,this.enableFixedUpdateInterpolate=!0,this.collisionType=je.PreventCollision,this.group=_n.All,this._sleeping=!1,this.bounciness=.2,this.friction=.99,this.useGravity=!0,this.limitDegreeOfFreedom=[],this.oldVel=new u(0,0),this.oldAcc=u.Zero,t?(this.collisionType=(e=t.type)!==null&&e!==void 0?e:this.collisionType,this.group=(i=t.group)!==null&&i!==void 0?i:this.group,this.useGravity=(n=t.useGravity)!==null&&n!==void 0?n:this.useGravity,this._bodyConfig={...as.bodies,...t.config}):this._bodyConfig={...as.bodies},this.updatePhysicsConfig(this._bodyConfig),this._mass=Hi._DEFAULT_CONFIG.defaultMass}get matrix(){return this.transform.get().matrix}updatePhysicsConfig(t){this._bodyConfig={...as.bodies,...t},this.canSleep=this._bodyConfig.canSleepByDefault,this.sleepMotion=this._bodyConfig.sleepEpsilon*5,this.wakeThreshold=this._bodyConfig.wakeThreshold}static updateDefaultPhysicsConfig(t){Hi._DEFAULT_CONFIG=t}get mass(){return this._mass}set mass(t){this._mass=t,this._cachedInertia=void 0,this._cachedInverseInertia=void 0}get inverseMass(){return this.collisionType===je.Fixed?0:1/this.mass}get sleeping(){return this._sleeping}setSleeping(t){this._sleeping=t,t?(this.vel=u.Zero,this.acc=u.Zero,this.angularVelocity=0,this.sleepMotion=0):this.sleepMotion=this._bodyConfig.sleepEpsilon*5}updateMotion(){this._sleeping&&this.setSleeping(!0);const t=this.vel.size*this.vel.size+Math.abs(this.angularVelocity*this.angularVelocity),e=this._bodyConfig.sleepBias;this.sleepMotion=e*this.sleepMotion+(1-e)*t,this.sleepMotion=q(this.sleepMotion,0,10*this._bodyConfig.sleepEpsilon),this.canSleep&&this.sleepMotion<this._bodyConfig.sleepEpsilon&&this.setSleeping(!0)}get inertia(){if(this._cachedInertia)return this._cachedInertia;const t=this.owner.get(Cs);if(t){t.$colliderAdded.subscribe(()=>{this._cachedInertia=null}),t.$colliderRemoved.subscribe(()=>{this._cachedInertia=null});const e=t.get();if(e)return this._cachedInertia=e.getInertia(this.mass)}return 0}get inverseInertia(){return this._cachedInverseInertia?this._cachedInverseInertia:this._cachedInverseInertia=this.collisionType===je.Fixed?0:1/this.inertia}get active(){var t;return!!(!((t=this.owner)===null||t===void 0)&&t.active)}get center(){return this.globalPos}get transform(){var t;return(t=this.owner)===null||t===void 0?void 0:t.get(fi)}get motion(){var t;return(t=this.owner)===null||t===void 0?void 0:t.get(us)}get pos(){return this.transform.pos}set pos(t){this.transform.pos=t}get globalPos(){return this.transform.globalPos}set globalPos(t){this.transform.globalPos=t}get oldPos(){return this.oldTransform.pos}get vel(){return this.motion.vel}set vel(t){this.motion.vel=t}get acc(){return this.motion.acc}set acc(t){this.motion.acc=t}get torque(){return this.motion.torque}set torque(t){this.motion.torque=t}get oldRotation(){return this.oldTransform.rotation}get rotation(){return this.transform.globalRotation}set rotation(t){this.transform.globalRotation=t}get scale(){return this.transform.globalScale}set scale(t){this.transform.globalScale=t}get oldScale(){return this.oldTransform.scale}get scaleFactor(){return this.motion.scaleFactor}set scaleFactor(t){this.motion.scaleFactor=t}get angularVelocity(){return this.motion.angularVelocity}set angularVelocity(t){this.motion.angularVelocity=t}applyImpulse(t,e){if(this.collisionType!==je.Active)return;const i=e.scale(this.inverseMass);if(this.limitDegreeOfFreedom.includes(Ws.X)&&(i.x=0),this.limitDegreeOfFreedom.includes(Ws.Y)&&(i.y=0),this.vel.addEqual(i),!this.limitDegreeOfFreedom.includes(Ws.Rotation)){const n=t.sub(this.globalPos);this.angularVelocity+=this.inverseInertia*n.cross(e)}}applyLinearImpulse(t){if(this.collisionType!==je.Active)return;const e=t.scale(this.inverseMass);this.limitDegreeOfFreedom.includes(Ws.X)&&(e.x=0),this.limitDegreeOfFreedom.includes(Ws.Y)&&(e.y=0),this.vel=this.vel.add(e)}applyAngularImpulse(t,e){if(this.collisionType===je.Active&&!this.limitDegreeOfFreedom.includes(Ws.Rotation)){const i=t.sub(this.globalPos);this.angularVelocity+=this.inverseInertia*i.cross(e)}}captureOldTransform(){this.__oldTransformCaptured=!0;const t=this.transform.get();t.clone(this.oldTransform),this.oldTransform.parent=t.parent,this.oldVel.setTo(this.vel.x,this.vel.y),this.oldAcc.setTo(this.acc.x,this.acc.y)}clone(){return super.clone()}}Hi._ID=0,Hi._DEFAULT_CONFIG={...as.bodies};class ko{constructor(t){this.data=t,this.type="Component Added"}}function Bo(h){return!!h&&h.type==="Component Added"}class oo{constructor(t){this.data=t,this.type="Component Removed"}}function So(h){return!!h&&h.type==="Component Removed"}const To={Initialize:"initialize",PreUpdate:"preupdate",PostUpdate:"postupdate",Kill:"kill"};class js{constructor(t,e){this.id=js._ID++,this.name=`Entity#${this.id}`,this.events=new l,this._tags=new Set,this.componentAdded$=new ls,this.componentRemoved$=new ls,this.tagAdded$=new ls,this.tagRemoved$=new ls,this.components=new Map,this._componentsToRemove=[],this._instanceOfComponentCacheDirty=!0,this._instanceOfComponentCache=new Map,this.scene=null,this.active=!0,this._parent=null,this.childrenAdded$=new ls,this.childrenRemoved$=new ls,this._children=[],this._isInitialized=!1;let i,n;if(Array.isArray(t))i=t,n=e;else if(t&&typeof t=="object"){const{components:a,name:m}=t;i=a??[],n=m}if(n&&(this.name=n),i)for(const a of i)this.addComponent(a)}kill(){this.active&&(this.active=!1,this.unparent()),this.emit("kill",new ks(this))}isKilled(){return!this.active}get tags(){return this._tags}hasTag(t){return this._tags.has(t)}addTag(t){return this._tags.add(t),this.tagAdded$.notifyAll(t),this}removeTag(t){return this._tags.delete(t),this.tagRemoved$.notifyAll(t),this}get types(){return Array.from(this.components.keys())}getComponents(){return Array.from(this.components.values())}hasAll(t){for(let e=0;e<t.length;e++)if(!this.components.has(t[e]))return!1;return!0}hasAllTags(t){for(let e=0;e<t.length;e++)if(!this.tags.has(t[e]))return!1;return!0}_getCachedInstanceOfType(t){if(this._instanceOfComponentCacheDirty&&(this._instanceOfComponentCacheDirty=!1,this._instanceOfComponentCache.clear()),this._instanceOfComponentCache.has(t))return this._instanceOfComponentCache.get(t);for(const e of this.components.values())if(e instanceof t)return this._instanceOfComponentCache.set(t,e),e}get(t){const e=this._getCachedInstanceOfType(t);return e??this.components.get(t)}get parent(){return this._parent}get children(){return this._children}unparent(){this._parent&&(this._parent.removeChild(this),this._parent=null)}addChild(t){if(t.parent===null){if(this.getAncestors().includes(t))throw new Error("Cycle detected, cannot add entity");this._children.push(t),t._parent=this,this.childrenAdded$.notifyAll(t)}else throw new Error("Entity already has a parent, cannot add without unparenting");return this}removeChild(t){return t.parent===this&&(xt(t,this._children),t._parent=null,this.childrenRemoved$.notifyAll(t)),this}removeAllChildren(){for(let t=this.children.length-1;t>=0;t--)this.removeChild(this.children[t]);return this}getAncestors(){const t=[this];let e=this.parent;for(;e;)t.push(e),e=e.parent;return t.reverse()}getDescendants(){let t=[this],e=[this];for(;e.length>0;){const i=e.pop();i&&(e=e.concat(i.children),t=t.concat(i.children))}return t}clone(){const t=new js;for(const e of this.types){const i=this.get(e);i&&t.addComponent(i.clone())}for(const e of this.children)t.addChild(e.clone());return t}addTemplate(t,e=!1){for(const i of t.getComponents())this.addComponent(i.clone(),e);for(const i of t.children)this.addChild(i.clone().addTemplate(i));return this}addComponent(t,e=!1){if(this._instanceOfComponentCacheDirty=!0,this.has(t.constructor))if(e)this.removeComponent(t.constructor,!0);else return this;if(t.dependencies&&t.dependencies.length)for(const i of t.dependencies)this.addComponent(new i);return t.owner=this,this.components.set(t.constructor,t),t.onAdd&&t.onAdd(this),this.componentAdded$.notifyAll(t),this}removeComponent(t,e=!1){let i;if(Ts(t)?i=t:i=t.constructor,e){const n=this.components.get(i);n&&(this.componentRemoved$.notifyAll(n),n.owner=void 0,n.onRemove&&n.onRemove(this)),this.components.delete(i),this._instanceOfComponentCacheDirty=!0}else this._componentsToRemove.push(i);return this}clearComponents(){const t=this.types;for(const e of t)this.removeComponent(e)}processComponentRemoval(){for(const t of this._componentsToRemove)this.removeComponent(t,!0);this._componentsToRemove.length=0}has(t){return this.components.has(t)}get isInitialized(){return this._isInitialized}_initialize(t){this.isInitialized||(this.onInitialize(t),this.events.emit("initialize",new Rn(t,this)),this._isInitialized=!0)}_preupdate(t,e){this.events.emit("preupdate",new en(t,e,this)),this.onPreUpdate(t,e)}_postupdate(t,e){this.events.emit("postupdate",new ln(t,e,this)),this.onPostUpdate(t,e)}onInitialize(t){}onPreUpdate(t,e){}onPostUpdate(t,e){}update(t,e){this._initialize(t),this._preupdate(t,e);for(const i of this.children)i.update(t,e);this._postupdate(t,e)}emit(t,e){this.events.emit(t,e)}on(t,e){return this.events.on(t,e)}once(t,e){return this.events.once(t,e)}off(t,e){e?this.events.off(t,e):this.events.off(t)}}js._ID=0;var hr;(function(h){h.Forward="forward",h.Backward="backward"})(hr||(hr={}));var rn;(function(h){h.End="end",h.Loop="loop",h.PingPong="pingpong",h.Freeze="freeze"})(rn||(rn={}));const Do={Frame:"frame",Loop:"loop",End:"end"};class vn extends It{constructor(t){var e,i,n;super(t),this.events=new l,this.frames=[],this.strategy=rn.Loop,this.frameDuration=100,this._idempotencyToken=-1,this._firstTick=!0,this._currentFrame=0,this._timeLeftInFrame=0,this._pingPongDirection=1,this._done=!1,this._playing=!0,this._speed=1,this._reversed=!1,this.frames=t.frames,this.speed=(e=t.speed)!==null&&e!==void 0?e:this.speed,this.strategy=(i=t.strategy)!==null&&i!==void 0?i:this.strategy,this.frameDuration=t.totalDuration?t.totalDuration/this.frames.length:(n=t.frameDuration)!==null&&n!==void 0?n:this.frameDuration,t.reverse&&this.reverse(),this.goToFrame(0)}clone(){return new vn({frames:this.frames.map(t=>({...t})),frameDuration:this.frameDuration,speed:this.speed,reverse:this._reversed,strategy:this.strategy,...this.cloneGraphicOptions()})}get width(){const t=this.currentFrame;return t?Math.abs(t.graphic.width*this.scale.x):0}get height(){const t=this.currentFrame;return t?Math.abs(t.graphic.height*this.scale.y):0}static fromSpriteSheet(t,e,i,n=rn.Loop){const a=t.sprites.length-1,m=e.filter(U=>U<0||U>a);return m.length&&vn._LOGGER.warn(`Indices into SpriteSheet were provided that don't exist: ${m.join(",")} no frame will be shown`),new vn({frames:t.sprites.filter((U,mt)=>e.indexOf(mt)>-1).map(U=>({graphic:U,duration:i})),strategy:n})}static fromSpriteSheetCoordinates(t){const{spriteSheet:e,frameCoordinates:i,durationPerFrameMs:n,speed:a,strategy:m,reverse:U}=t,mt=n??100,Et=[];for(const St of i){const{x:Lt,y:Kt,duration:ne,options:ae}=St,ke=e.getSprite(Lt,Kt,ae);ke?Et.push({graphic:ke,duration:ne??mt}):vn._LOGGER.warn(`Skipping frame! SpriteSheet does not have coordinate (${Lt}, ${Kt}), please check your SpriteSheet to confirm that sprite exists`)}return new vn({frames:Et,strategy:m,speed:a,reverse:U})}get speed(){return this._speed}set speed(t){this._speed=q(Math.abs(t),0,1/0)}get currentFrame(){return this._currentFrame>=0&&this._currentFrame<this.frames.length?this.frames[this._currentFrame]:null}get currentFrameIndex(){return this._currentFrame}get currentFrameTimeLeft(){return this._timeLeftInFrame}get isPlaying(){return this._playing}reverse(){this.frames=this.frames.slice().reverse(),this._reversed=!this._reversed}get direction(){return!!(this._reversed&&this._pingPongDirection===1)?hr.Backward:hr.Forward}play(){this._playing=!0}pause(){this._playing=!1,this._firstTick=!0}reset(){this._done=!1,this._firstTick=!0,this._currentFrame=0,this._timeLeftInFrame=this.frameDuration;const t=this.frames[this._currentFrame];t&&(this._timeLeftInFrame=t?.duration||this.frameDuration)}get canFinish(){switch(this.strategy){case rn.End:case rn.Freeze:return!0;default:return!1}}get done(){return this._done}goToFrame(t,e){this._currentFrame=t,this._timeLeftInFrame=e??this.frameDuration;const i=this.frames[this._currentFrame];i&&!this._done&&(this._timeLeftInFrame=e??(i?.duration||this.frameDuration),this.events.emit("frame",{...i,frameIndex:this.currentFrameIndex}))}_nextFrame(){const t=this._currentFrame;if(this._done)return t;let e=-1;switch(this.strategy){case rn.Loop:{e=(t+1)%this.frames.length,e===0&&this.events.emit("loop",this);break}case rn.End:{e=t+1,e>=this.frames.length&&(this._done=!0,this._currentFrame=this.frames.length,this.events.emit("end",this));break}case rn.Freeze:{e=q(t+1,0,this.frames.length-1),e>=this.frames.length-1&&(this._done=!0,this.events.emit("end",this));break}case rn.PingPong:{t+this._pingPongDirection>=this.frames.length&&(this._pingPongDirection=-1,this.events.emit("loop",this)),t+this._pingPongDirection<0&&(this._pingPongDirection=1,this.events.emit("loop",this)),e=t+this._pingPongDirection%this.frames.length;break}}return e}tick(t,e=0){this._idempotencyToken!==e&&(this._idempotencyToken=e,this._playing&&(this._firstTick&&(this._firstTick=!1,this.events.emit("frame",{...this.currentFrame,frameIndex:this.currentFrameIndex})),this._timeLeftInFrame-=t*this._speed,this._timeLeftInFrame<=0&&this.goToFrame(this._nextFrame())))}_drawImage(t,e,i){this.currentFrame&&this.currentFrame.graphic.draw(t,e,i)}}vn._LOGGER=ft.getInstance();class hn extends It{constructor(t){var e;super(t),this._logger=ft.getInstance(),this.useAnchor=!0,this.members=[],this.members=t.members,this.useAnchor=(e=t.useAnchor)!==null&&e!==void 0?e:this.useAnchor,this._updateDimensions()}clone(){return new hn({members:[...this.members],...this.cloneGraphicOptions()})}_updateDimensions(){const t=this.localBounds;return this.width=t.width,this.height=t.height,t}get localBounds(){let t=new ut;for(const e of this.members)if(e instanceof It)t=e.localBounds.combine(t);else{const{graphic:i,offset:n,useBounds:a}=e;i?(a===void 0?!0:a)&&(t=i.localBounds.translate(n).combine(t)):this._logger.warnOnce(`Graphics group member has an null or undefined graphic, member definition: ${JSON.stringify(e)}.`)}return t}_isAnimationOrGroup(t){return t instanceof vn||t instanceof hn}tick(t,e){for(const i of this.members){let n;i instanceof It?n=i:n=i.graphic,this._isAnimationOrGroup(n)&&n.tick(t,e)}}reset(){for(const t of this.members){let e;t instanceof It?e=t:e=t.graphic,this._isAnimationOrGroup(e)&&e.reset()}}_preDraw(t,e,i){this._updateDimensions(),super._preDraw(t,this.useAnchor?e:0,this.useAnchor?i:0)}_drawImage(t,e,i){const n=u.Zero;for(const a of this.members){let m;a instanceof It?m=a:(m=a.graphic,a.offset.clone(n)),m&&(t.save(),t.translate(e,i),m.draw(t,n.x,n.y),this.showDebug&&t.debug.drawRect(0,0,this.width,this.height),t.restore())}}}function Yr(h){return!!h.tick}class Ms extends ss{get offset(){return new es(this._offset,()=>{this.recalculateBounds()})}set offset(t){this._offset=t,this.recalculateBounds()}get anchor(){return new es(this._anchor,()=>{this.recalculateBounds()})}set anchor(t){this._anchor=t,this.recalculateBounds()}constructor(t){super(),this._logger=ft.getInstance(),this._current="default",this._graphics={},this._options={},this.material=null,this.visible=!0,this.opacity=1,this._offset=u.Zero,this._anchor=u.Half,this.flipHorizontal=!1,this.flipVertical=!1,this.copyGraphics=!1,this._localBounds=null,t={visible:this.visible,graphics:{},...t};const{current:e,anchor:i,opacity:n,visible:a,graphics:m,offset:U,copyGraphics:mt,onPreDraw:Et,onPostDraw:St,onPreTransformDraw:Lt,onPostTransformDraw:Kt}=t;for(const[ne,ae]of Object.entries(m))ae instanceof It?this._graphics[ne]=ae:(this._graphics[ne]=ae.graphic,this._options[ne]=ae.options);this.offset=U??this.offset,this.opacity=n??this.opacity,this.anchor=i??this.anchor,this.copyGraphics=mt??this.copyGraphics,this.onPreDraw=Et??this.onPreDraw,this.onPostDraw=St??this.onPostDraw,this.onPreDraw=Lt??this.onPreTransformDraw,this.onPostTransformDraw=Kt??this.onPostTransformDraw,this.visible=!!a,this._current=e??this._current,e&&this._graphics[e]&&this.use(e)}getGraphic(t){return this._graphics[t]}getOptions(t){return this._options[t]}getNames(){return Object.keys(this._graphics)}get current(){return this._graphics[this._current]}get currentOptions(){return this._options[this._current]}get graphics(){return this._graphics}get options(){return this._options}add(t,e,i){let n="default",a=null,m;return typeof t=="string"&&e instanceof It&&(n=t,a=e,m=i),t instanceof It&&!(e instanceof It)&&(a=t,m=e),this._graphics[n]=this.copyGraphics?a.clone():a,this._options[n]=this.copyGraphics?{...m}:m,n==="default"&&this.use("default"),a}remove(t){delete this._graphics[t],delete this._options[t],this._current===t&&(this._current="default",this.recalculateBounds())}show(t,e){return this.use(t,e)}use(t,e){var i;if(t instanceof It){let n=t;this.copyGraphics&&(n=t.clone()),this._current="default",this._graphics[this._current]=n,this._options[this._current]=e}else this._current=t,this._options[this._current]=e,this._current in this._graphics||this._logger.warn(`Graphic ${this._current} is not registered with the graphics component owned by ${(i=this.owner)===null||i===void 0?void 0:i.name}. Nothing will be drawn.`);return this.recalculateBounds(),this.current}hide(){this._current="ex.none"}set localBounds(t){this._localBounds=t}recalculateBounds(){let t=new ut;const e=this._graphics[this._current],i=this._options[this._current];if(!e){this._localBounds=t;return}let n=this.anchor,a=this.offset;i?.anchor&&(n=i.anchor),i?.offset&&(a=i.offset);const m=e.localBounds,U=-m.width*n.x+a.x,mt=-m.height*n.y+a.y;e instanceof hn&&!e.useAnchor?t=e?.localBounds.combine(t):t=e?.localBounds.translate(O(U,mt)).combine(t),this._localBounds=t}get localBounds(){return(!this._localBounds||this._localBounds.hasZeroDimensions())&&this.recalculateBounds(),this._localBounds}get bounds(){let t=this.localBounds;if(this.owner){const e=this.owner.get(fi);e&&(t=t.transform(e.get().matrix))}return t}update(t,e=0){const i=this.current;i&&Yr(i)&&i.tick(t,e)}clone(){const t=new Ms;return t._graphics={...this._graphics},t._options={...this._options},t.offset=this.offset.clone(),t.opacity=this.opacity,t.anchor=this.anchor.clone(),t.copyGraphics=this.copyGraphics,t.onPreDraw=this.onPreDraw,t.onPostDraw=this.onPostDraw,t.visible=this.visible,t}}class dr extends Xi{constructor(t){super(t),this.width=t.width,this.height=t.height,this.rasterize()}clone(){return new dr({width:this.width,height:this.height,...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(t){this.color&&t.fillRect(0,0,this.width,this.height),this.strokeColor&&t.strokeRect(0,0,this.width,this.height)}}class Br extends Xi{get radius(){return this._radius}set radius(t){this._radius=t,this.width=this._radius*2,this.height=this._radius*2,this.flagDirty()}constructor(t){var e,i,n;super(t),this._radius=0;const a=(e=t.lineWidth)!==null&&e!==void 0?e:t.strokeColor?1:0;this.padding=(i=t.padding)!==null&&i!==void 0?i:2+a/2,this.radius=t.radius,this.filtering=(n=t.filtering)!==null&&n!==void 0?n:yt.Blended,this.rasterize()}clone(){return new Br({radius:this.radius,...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(t){this.radius>0&&(t.beginPath(),t.arc(this.radius,this.radius,this.radius,0,Math.PI*2),this.color&&t.fill(),this.strokeColor&&t.stroke())}}class Dn extends ss{constructor(t){var e,i;super(),this.useColliderShape=!0,this.useGraphicsBounds=!0,this.useColliderShape=(e=t?.useColliderShape)!==null&&e!==void 0?e:this.useColliderShape,this.useGraphicsBounds=(i=t?.useGraphicsBounds)!==null&&i!==void 0?i:this.useGraphicsBounds,this.localBounds=t?.localBounds}}class As{static CreateReversibleEasingFunction(t){return(e,i,n,a)=>n<i?i-(t(e,n,i,a)-n):t(e,i,n,a)}static CreateVectorEasingFunction(t){return(e,i,n,a)=>new u(t(e,i.x,n.x,a),t(e,i.y,n.y,a))}}As.Linear=As.CreateReversibleEasingFunction((h,t,e,i)=>(e=e-t,e*h/i+t)),As.EaseInQuad=As.CreateReversibleEasingFunction((h,t,e,i)=>(e=e-t,h/=i,e*h*h+t)),As.EaseOutQuad=As.CreateReversibleEasingFunction((h,t,e,i)=>(e=e-t,h/=i,-e*h*(h-2)+t)),As.EaseInOutQuad=As.CreateReversibleEasingFunction((h,t,e,i)=>(e=e-t,h/=i/2,h<1?e/2*h*h+t:(h--,-e/2*(h*(h-2)-1)+t))),As.EaseInCubic=As.CreateReversibleEasingFunction((h,t,e,i)=>(e=e-t,h/=i,e*h*h*h+t)),As.EaseOutCubic=As.CreateReversibleEasingFunction((h,t,e,i)=>(e=e-t,h/=i,h--,e*(h*h*h+1)+t)),As.EaseInOutCubic=As.CreateReversibleEasingFunction((h,t,e,i)=>(e=e-t,h/=i/2,h<1?e/2*h*h*h+t:(h-=2,e/2*(h*h*h+2)+t)));class ao{constructor(t){this._actions=[],this._currentAction=null,this._completedActions=[],this._entity=t}add(t){this._actions.push(t)}remove(t){const e=this._actions.indexOf(t);this._actions.splice(e,1)}clearActions(){this._actions.length=0,this._completedActions.length=0,this._currentAction&&this._currentAction.stop()}getActions(){return this._actions.concat(this._completedActions)}hasNext(){return this._actions.length>0}isComplete(){return this._actions.length===0}reset(){this._actions=this.getActions();const t=this._actions.length;for(let e=0;e<t;e++)this._actions[e].reset();this._completedActions=[]}update(t){if(this._actions.length>0&&(this._currentAction!==this._actions[0]&&(this._currentAction=this._actions[0],this._entity.emit("actionstart",new Pn(this._currentAction,this._entity))),this._currentAction.update(t),this._currentAction.isComplete(this._entity))){this._entity.emit("actioncomplete",new rr(this._currentAction,this._entity));const e=this._actions.shift();e&&this._completedActions.push(e)}}}class lo{constructor(t,e,i){this._stopped=!1,this._repeatBuilder=e,this._repeatContext=new $n(t),this._actionQueue=this._repeatContext.getQueue(),this._repeat=i,this._originalRepeat=i,this._repeatBuilder(this._repeatContext),this._repeat--}update(t){this._actionQueue.isComplete()&&(this._actionQueue.clearActions(),this._repeatBuilder(this._repeatContext),this._repeat--),this._actionQueue.update(t)}isComplete(){return this._stopped||this._repeat<=0&&this._actionQueue.isComplete()}stop(){this._stopped=!0}reset(){this._repeat=this._originalRepeat}}class Vr{constructor(t,e){this._stopped=!1,this._repeatBuilder=e,this._repeatContext=new $n(t),this._actionQueue=this._repeatContext.getQueue(),this._repeatBuilder(this._repeatContext)}update(t){this._stopped||(this._actionQueue.isComplete()&&(this._actionQueue.clearActions(),this._repeatBuilder(this._repeatContext)),this._actionQueue.update(t))}isComplete(){return this._stopped}stop(){this._stopped=!0,this._actionQueue.clearActions()}reset(){}}class co{constructor(t,e,i,n){if(this._started=!1,this._stopped=!1,this._entity=t,this._tx=t.get(fi),this._motion=t.get(us),this._speed=n,this._offset=new u(e,i),n<=0)throw ft.getInstance().error("Attempted to moveBy with speed less than or equal to zero : "+n),new Error("Speed must be greater than 0 pixels per second")}update(t){this._started||(this._started=!0,this._start=new u(this._tx.pos.x,this._tx.pos.y),this._end=this._start.add(this._offset),this._distance=this._offset.size,this._dir=this._end.sub(this._start).normalize()),this.isComplete(this._entity)?(this._tx.pos=O(this._end.x,this._end.y),this._motion.vel=O(0,0)):this._motion.vel=this._dir.scale(this._speed)}isComplete(t){const e=t.get(fi);return this._stopped||e.pos.distance(this._start)>=this._distance}stop(){this._motion.vel=O(0,0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class Sr{constructor(t,e,i,n){this.entity=t,this._started=!1,this._stopped=!1,this._tx=t.get(fi),this._motion=t.get(us),this._end=new u(e,i),this._speed=n}update(t){this._started||(this._started=!0,this._start=new u(this._tx.pos.x,this._tx.pos.y),this._distance=this._start.distance(this._end),this._dir=this._end.sub(this._start).normalize());const e=this._dir.scale(this._speed);this._motion.vel=O(e.x,e.y),this.isComplete(this.entity)&&(this._tx.pos=O(this._end.x,this._end.y),this._motion.vel=O(0,0))}isComplete(t){const e=t.get(fi);return this._stopped||new u(e.pos.x,e.pos.y).distance(this._start)>=this._distance}stop(){this._motion.vel=O(0,0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}var dn;(function(h){h[h.ShortestPath=0]="ShortestPath",h[h.LongestPath=1]="LongestPath",h[h.Clockwise=2]="Clockwise",h[h.CounterClockwise=3]="CounterClockwise"})(dn||(dn={}));class ho{constructor(t,e,i,n){this._started=!1,this._stopped=!1,this._tx=t.get(fi),this._motion=t.get(us),this._end=e,this._speed=i,this._rotationType=n||dn.ShortestPath}update(t){if(!this._started){this._started=!0,this._start=this._tx.rotation,this._currentNonCannonAngle=this._tx.rotation;const e=Math.abs(this._end-this._start),i=L-e;switch(e>i?(this._shortDistance=i,this._longDistance=e):(this._shortDistance=e,this._longDistance=i),this._shortestPathIsPositive=(this._start-this._end+L)%L>=Math.PI,this._rotationType){case dn.ShortestPath:this._distance=this._shortDistance,this._shortestPathIsPositive?this._direction=1:this._direction=-1;break;case dn.LongestPath:this._distance=this._longDistance,this._shortestPathIsPositive?this._direction=-1:this._direction=1;break;case dn.Clockwise:this._direction=1,this._shortestPathIsPositive?this._distance=this._shortDistance:this._distance=this._longDistance;break;case dn.CounterClockwise:this._direction=-1,this._shortestPathIsPositive?this._distance=this._longDistance:this._distance=this._shortDistance;break}}this._motion.angularVelocity=this._direction*this._speed,this._currentNonCannonAngle+=this._direction*this._speed*(t/1e3),this.isComplete()&&(this._tx.rotation=this._end,this._motion.angularVelocity=0,this._stopped=!0)}isComplete(){const t=Math.abs(this._currentNonCannonAngle-this._start);return this._stopped||t>=Math.abs(this._distance)}stop(){this._motion.angularVelocity=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class Jr{constructor(t,e,i,n){this._started=!1,this._stopped=!1,this._tx=t.get(fi),this._motion=t.get(us),this._speed=i,this._offset=e,this._rotationType=n||dn.ShortestPath}update(t){if(!this._started){this._started=!0,this._start=this._tx.rotation,this._currentNonCannonAngle=this._tx.rotation,this._end=this._start+this._offset;const e=Math.abs(this._end-this._start),i=L-e;switch(e>i?(this._shortDistance=i,this._longDistance=e):(this._shortDistance=e,this._longDistance=i),this._shortestPathIsPositive=(this._start-this._end+L)%L>=Math.PI,this._rotationType){case dn.ShortestPath:this._distance=this._shortDistance,this._shortestPathIsPositive?this._direction=1:this._direction=-1;break;case dn.LongestPath:this._distance=this._longDistance,this._shortestPathIsPositive?this._direction=-1:this._direction=1;break;case dn.Clockwise:this._direction=1,this._shortDistance>=0?this._distance=this._shortDistance:this._distance=this._longDistance;break;case dn.CounterClockwise:this._direction=-1,this._shortDistance<=0?this._distance=this._shortDistance:this._distance=this._longDistance;break}}this._motion.angularVelocity=this._direction*this._speed,this._currentNonCannonAngle+=this._direction*this._speed*(t/1e3),this.isComplete()&&(this._tx.rotation=this._end,this._motion.angularVelocity=0,this._stopped=!0)}isComplete(){const t=Math.abs(this._currentNonCannonAngle-this._start);return this._stopped||t>=Math.abs(this._distance)}stop(){this._motion.angularVelocity=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1,this._start=void 0,this._currentNonCannonAngle=void 0,this._distance=void 0}}class ur{constructor(t,e,i,n,a){this._started=!1,this._stopped=!1,this._tx=t.get(fi),this._motion=t.get(us),this._endX=e,this._endY=i,this._speedX=n,this._speedY=a}update(t){if(this._started||(this._started=!0,this._startX=this._tx.scale.x,this._startY=this._tx.scale.y,this._distanceX=Math.abs(this._endX-this._startX),this._distanceY=Math.abs(this._endY-this._startY)),Math.abs(this._tx.scale.x-this._startX)>=this._distanceX)this._motion.scaleFactor.x=0;else{const e=this._endY<this._startY?-1:1;this._motion.scaleFactor.x=this._speedX*e}if(Math.abs(this._tx.scale.y-this._startY)>=this._distanceY)this._motion.scaleFactor.y=0;else{const e=this._endY<this._startY?-1:1;this._motion.scaleFactor.y=this._speedY*e}this.isComplete()&&(this._tx.scale=O(this._endX,this._endY),this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0)}isComplete(){return this._stopped||Math.abs(this._tx.scale.x-this._startX)>=this._distanceX-.01&&Math.abs(this._tx.scale.y-this._startY)>=this._distanceY-.01}stop(){this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class pr{constructor(t,e,i,n){this._started=!1,this._stopped=!1,this._tx=t.get(fi),this._motion=t.get(us),this._offset=new u(e,i),this._speedX=this._speedY=n}update(t){this._started||(this._started=!0,this._startScale=this._tx.scale.clone(),this._endScale=this._startScale.add(this._offset),this._distanceX=Math.abs(this._endScale.x-this._startScale.x),this._distanceY=Math.abs(this._endScale.y-this._startScale.y),this._directionX=this._endScale.x<this._startScale.x?-1:1,this._directionY=this._endScale.y<this._startScale.y?-1:1),this._motion.scaleFactor.x=this._speedX*this._directionX,this._motion.scaleFactor.y=this._speedY*this._directionY,this.isComplete()&&(this._tx.scale=this._endScale,this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0)}isComplete(){return this._stopped||Math.abs(this._tx.scale.x-this._startScale.x)>=this._distanceX-.01&&Math.abs(this._tx.scale.y-this._startScale.y)>=this._distanceY-.01}stop(){this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class uo{constructor(t){this._method=null,this._hasBeenCalled=!1,this._method=t}update(t){this._method(),this._hasBeenCalled=!0}isComplete(){return this._hasBeenCalled}reset(){this._hasBeenCalled=!1}stop(){this._hasBeenCalled=!0}}class po{constructor(t,e,i,n,a){this.easingFcn=a,this._currentLerpTime=0,this._lerpDuration=1*1e3,this._lerpStart=new u(0,0),this._lerpEnd=new u(0,0),this._initialized=!1,this._stopped=!1,this._tx=t.get(fi),this._motion=t.get(us),this._lerpDuration=n,this._lerpEnd=new u(e,i)}_initialize(){this._lerpStart=new u(this._tx.pos.x,this._tx.pos.y),this._currentLerpTime=0}update(t){this._initialized||(this._initialize(),this._initialized=!0),this._currentLerpTime+=t;let e=this._tx.pos.x,i=this._tx.pos.y;this._currentLerpTime<this._lerpDuration?(this._lerpEnd.x<this._lerpStart.x?e=this._lerpStart.x-(this.easingFcn(this._currentLerpTime,this._lerpEnd.x,this._lerpStart.x,this._lerpDuration)-this._lerpEnd.x):e=this.easingFcn(this._currentLerpTime,this._lerpStart.x,this._lerpEnd.x,this._lerpDuration),this._lerpEnd.y<this._lerpStart.y?i=this._lerpStart.y-(this.easingFcn(this._currentLerpTime,this._lerpEnd.y,this._lerpStart.y,this._lerpDuration)-this._lerpEnd.y):i=this.easingFcn(this._currentLerpTime,this._lerpStart.y,this._lerpEnd.y,this._lerpDuration),this._motion.vel=O((e-this._tx.pos.x)/(t/1e3),(i-this._tx.pos.y)/(t/1e3))):(this._tx.pos=O(this._lerpEnd.x,this._lerpEnd.y),this._motion.vel=u.Zero)}isComplete(){return this._stopped||this._currentLerpTime>=this._lerpDuration}reset(){this._initialized=!1,this._stopped=!1,this._currentLerpTime=0}stop(){this._motion.vel=O(0,0),this._stopped=!0}}class $r{constructor(t,e,i,n,a){this.easingFcn=a,this._currentLerpTime=0,this._lerpDuration=1*1e3,this._lerpStart=new u(0,0),this._lerpEnd=new u(0,0),this._initialized=!1,this._stopped=!1,this._tx=t.get(fi),this._motion=t.get(us),this._lerpDuration=n,this._offset=new u(e,i)}_initialize(){this._lerpStart=new u(this._tx.pos.x,this._tx.pos.y),this._currentLerpTime=0,this._lerpEnd=this._lerpStart.add(this._offset)}update(t){this._initialized||(this._initialize(),this._initialized=!0),this._currentLerpTime+=t;let e=this._tx.pos.x,i=this._tx.pos.y;this._currentLerpTime<this._lerpDuration?(this._lerpEnd.x<this._lerpStart.x?e=this._lerpStart.x-(this.easingFcn(this._currentLerpTime,this._lerpEnd.x,this._lerpStart.x,this._lerpDuration)-this._lerpEnd.x):e=this.easingFcn(this._currentLerpTime,this._lerpStart.x,this._lerpEnd.x,this._lerpDuration),this._lerpEnd.y<this._lerpStart.y?i=this._lerpStart.y-(this.easingFcn(this._currentLerpTime,this._lerpEnd.y,this._lerpStart.y,this._lerpDuration)-this._lerpEnd.y):i=this.easingFcn(this._currentLerpTime,this._lerpStart.y,this._lerpEnd.y,this._lerpDuration),this._motion.vel=O((e-this._tx.pos.x)/(t/1e3),(i-this._tx.pos.y)/(t/1e3))):(this._tx.pos=O(this._lerpEnd.x,this._lerpEnd.y),this._motion.vel=u.Zero)}isComplete(){return this._stopped||this._currentLerpTime>=this._lerpDuration}reset(){this._initialized=!1,this._stopped=!1,this._currentLerpTime=0}stop(){this._motion.vel=O(0,0),this._stopped=!0}}class fo{constructor(t,e,i,n=1){this._timeVisible=0,this._timeNotVisible=0,this._elapsedTime=0,this._totalTime=0,this._stopped=!1,this._started=!1,this._graphics=t.get(Ms),this._timeVisible=e,this._timeNotVisible=i,this._duration=(e+i)*n}update(t){this._started||(this._started=!0,this._elapsedTime=0,this._totalTime=0),this._graphics&&(this._elapsedTime+=t,this._totalTime+=t,this._graphics.visible&&this._elapsedTime>=this._timeVisible&&(this._graphics.visible=!1,this._elapsedTime=0),!this._graphics.visible&&this._elapsedTime>=this._timeNotVisible&&(this._graphics.visible=!0,this._elapsedTime=0),this.isComplete()&&(this._graphics.visible=!0))}isComplete(){return this._stopped||this._totalTime>=this._duration}stop(){this._graphics&&(this._graphics.visible=!0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1,this._elapsedTime=0,this._totalTime=0}}class go{constructor(t,e,i){this._multiplier=1,this._started=!1,this._stopped=!1,this._graphics=t.get(Ms),this._endOpacity=e,this._speed=this._ogspeed=i}update(t){this._graphics&&(this._started||(this._started=!0,this._speed=this._ogspeed,this._endOpacity<this._graphics.opacity?this._multiplier=-1:this._multiplier=1),this._speed>0&&(this._graphics.opacity+=this._multiplier*(Math.abs(this._graphics.opacity-this._endOpacity)*t)/this._speed),this._speed-=t,this.isComplete()&&(this._graphics.opacity=this._endOpacity),ft.getInstance().debug("[Action fade] Actor opacity:",this._graphics.opacity))}isComplete(){return this._stopped||Math.abs(this._graphics.opacity-this._endOpacity)<.05}stop(){this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class _o{constructor(t){this._elapsedTime=0,this._started=!1,this._stopped=!1,this._delay=t}update(t){this._started||(this._started=!0),this._elapsedTime+=t}isComplete(){return this._stopped||this._elapsedTime>=this._delay}stop(){this._stopped=!0}reset(){this._elapsedTime=0,this._started=!1,this._stopped=!1}}class Ao{constructor(t){this._stopped=!1,this._entity=t}update(t){this._entity.get(Xn).clearActions(),this._entity.kill(),this._stopped=!0}isComplete(){return this._stopped}stop(){}reset(){}}class Xr{constructor(t,e,i){this._started=!1,this._stopped=!1,this._tx=t.get(fi),this._motion=t.get(us),this._followTx=e.get(fi),this._followMotion=e.get(us),this._current=new u(this._tx.pos.x,this._tx.pos.y),this._end=new u(this._followTx.pos.x,this._followTx.pos.y),this._maximumDistance=i!==void 0?i:this._current.distance(this._end),this._speed=0}update(t){this._started||(this._started=!0,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize());const e=Math.sqrt(Math.pow(this._followMotion.vel.x,2)+Math.pow(this._followMotion.vel.y,2));if(e!==0&&(this._speed=e),this._current=O(this._tx.pos.x,this._tx.pos.y),this._end=O(this._followTx.pos.x,this._followTx.pos.y),this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize(),this._distanceBetween>=this._maximumDistance){const i=this._dir.scale(this._speed);this._motion.vel=O(i.x,i.y)}else this._motion.vel=O(0,0);this.isComplete()&&(this._tx.pos=O(this._end.x,this._end.y),this._motion.vel=O(0,0))}stop(){this._motion.vel=O(0,0),this._stopped=!0}isComplete(){return this._stopped}reset(){this._started=!1,this._stopped=!1}}class Tr{constructor(t,e,i){this._started=!1,this._stopped=!1,this._speedWasSpecified=!1,this._tx=t.get(fi),this._motion=t.get(us),this._meetTx=e.get(fi),this._meetMotion=e.get(us),this._current=new u(this._tx.pos.x,this._tx.pos.y),this._end=new u(this._meetTx.pos.x,this._meetTx.pos.y),this._speed=i||0,i!==void 0&&(this._speedWasSpecified=!0)}update(t){this._started||(this._started=!0,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize());const e=Math.sqrt(Math.pow(this._meetMotion.vel.x,2)+Math.pow(this._meetMotion.vel.y,2));e!==0&&!this._speedWasSpecified&&(this._speed=e),this._current=O(this._tx.pos.x,this._tx.pos.y),this._end=O(this._meetTx.pos.x,this._meetTx.pos.y),this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize();const i=this._dir.scale(this._speed);this._motion.vel=O(i.x,i.y),this.isComplete()&&(this._tx.pos=O(this._end.x,this._end.y),this._motion.vel=O(0,0))}isComplete(){return this._stopped||this._distanceBetween<=1}stop(){this._motion.vel=O(0,0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1,this._distanceBetween=void 0}}class $n{constructor(t){this._entity=t,this._queue=new ao(t)}getQueue(){return this._queue}update(t){this._queue.update(t)}clearActions(){this._queue.clearActions()}runAction(t){return t.reset(),this._queue.add(t),this}easeTo(...t){var e,i;let n=0,a=0,m=0,U=As.Linear;return t[0]instanceof u?(n=t[0].x,a=t[0].y,m=t[1],U=(e=t[2])!==null&&e!==void 0?e:U):(n=t[0],a=t[1],m=t[2],U=(i=t[3])!==null&&i!==void 0?i:U),this._queue.add(new po(this._entity,n,a,m,U)),this}easeBy(...t){var e,i;let n=0,a=0,m=0,U=As.Linear;return t[0]instanceof u?(n=t[0].x,a=t[0].y,m=t[1],U=(e=t[2])!==null&&e!==void 0?e:U):(n=t[0],a=t[1],m=t[2],U=(i=t[3])!==null&&i!==void 0?i:U),this._queue.add(new $r(this._entity,n,a,m,U)),this}moveTo(t,e,i){let n=0,a=0,m=0;return t instanceof u?(n=t.x,a=t.y,m=e):(n=t,a=e,m=i),this._queue.add(new Sr(this._entity,n,a,m)),this}moveBy(t,e,i){let n=0,a=0,m=0;return t instanceof u?(n=t.x,a=t.y,m=e):(n=t,a=e,m=i),this._queue.add(new co(this._entity,n,a,m)),this}rotateTo(t,e,i){return this._queue.add(new ho(this._entity,t,e,i)),this}rotateBy(t,e,i){return this._queue.add(new Jr(this._entity,t,e,i)),this}scaleTo(t,e,i,n){let a=1,m=1,U=0,mt=0;return t instanceof u&&e instanceof u&&(a=t.x,m=t.y,U=e.x,mt=e.y),typeof t=="number"&&typeof e=="number"&&(a=t,m=e,U=i,mt=n),this._queue.add(new ur(this._entity,a,m,U,mt)),this}scaleBy(t,e,i){let n=1,a=1;return t instanceof u&&(n=t.x,a=t.y,i=e),typeof t=="number"&&typeof e=="number"&&(n=t,a=e),this._queue.add(new pr(this._entity,n,a,i)),this}blink(t,e,i=1){return this._queue.add(new fo(this._entity,t,e,i)),this}fade(t,e){return this._queue.add(new go(this._entity,t,e)),this}delay(t){return this._queue.add(new _o(t)),this}die(){return this._queue.add(new Ao(this._entity)),this}callMethod(t){return this._queue.add(new uo(t)),this}repeat(t,e){return e?(this._queue.add(new lo(this._entity,t,e)),this):(this.repeatForever(t),this)}repeatForever(t){return this._queue.add(new Vr(this._entity,t)),this}follow(t,e){return e===void 0?this._queue.add(new Xr(this._entity,t)):this._queue.add(new Xr(this._entity,t,e)),this}meet(t,e){return e===void 0?this._queue.add(new Tr(this._entity,t)):this._queue.add(new Tr(this._entity,t,e)),this}toPromise(){return new Promise(e=>{this._queue.add(new uo(()=>{e()}))})}}class Xn extends ss{constructor(){super(...arguments),this.dependencies=[fi,us],this._ctx=null}onAdd(t){this._ctx=new $n(t)}onRemove(){this._ctx=null}_getCtx(){if(!this._ctx)throw new Error("Actions component not attached to an entity, no context available");return this._ctx}getQueue(){if(!this._ctx)throw new Error("Actions component not attached to an entity, no queue available");return this._ctx.getQueue()}runAction(t){if(!this._ctx)throw new Error("Actions component not attached to an entity, cannot run action");return this._ctx.runAction(t)}update(t){var e;return(e=this._ctx)===null||e===void 0?void 0:e.update(t)}clearActions(){var t;(t=this._ctx)===null||t===void 0||t.clearActions()}easeTo(...t){return this._getCtx().easeTo.apply(this._ctx,t)}easeBy(...t){return this._getCtx().easeBy.apply(this._ctx,t)}moveTo(t,e,i){return this._getCtx().moveTo.apply(this._ctx,[t,e,i])}moveBy(t,e,i){return this._getCtx().moveBy.apply(this._ctx,[t,e,i])}rotateTo(t,e,i){return this._getCtx().rotateTo(t,e,i)}rotateBy(t,e,i){return this._getCtx().rotateBy(t,e,i)}scaleTo(t,e,i,n){return this._getCtx().scaleTo.apply(this._ctx,[t,e,i,n])}scaleBy(t,e,i){return this._getCtx().scaleBy.apply(this._ctx,[t,e,i])}blink(t,e,i){return this._getCtx().blink(t,e,i)}fade(t,e){return this._getCtx().fade(t,e)}delay(t){return this._getCtx().delay(t)}die(){return this._getCtx().die()}callMethod(t){return this._getCtx().callMethod(t)}repeat(t,e){return this._getCtx().repeat(t,e)}repeatForever(t){return this._getCtx().repeatForever(t)}follow(t,e){return this._getCtx().follow(t,e)}meet(t,e){return this._getCtx().meet(t,e)}toPromise(){return this._getCtx().toPromise()}}var Dr;(function(h){h.Em="em",h.Rem="rem",h.Px="px",h.Pt="pt",h.Percent="%"})(Dr||(Dr={}));var Pr;(function(h){h.Left="left",h.Right="right",h.Center="center",h.Start="start",h.End="end"})(Pr||(Pr={}));var Qr;(function(h){h.Top="top",h.Hanging="hanging",h.Middle="middle",h.Alphabetic="alphabetic",h.Ideographic="ideographic",h.Bottom="bottom"})(Qr||(Qr={}));var Mr;(function(h){h.Normal="normal",h.Italic="italic",h.Oblique="oblique"})(Mr||(Mr={}));var Lr;(function(h){h.LeftToRight="ltr",h.RightToLeft="rtl"})(Lr||(Lr={}));class Kn{constructor(t,e,i,n){this.font=t,this.text=e,this.color=i,this.maxWidth=n,this._textFragments=[],this.disposed=!1,this._dirty=!0,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.dimensions=this.measureText(e),this._setDimension(this.dimensions,this.ctx),this._lastHashCode=this.getHashCode()}measureText(t,e){if(this.disposed)throw Error("Accessing disposed text instance! "+this.text);let i=null;e!=null?i=this._getLinesFromText(t,e):i=t.split(`
`);const n=i.reduce((Kt,ne)=>Kt.length>ne.length?Kt:ne);this._applyFont(this.ctx);const a=this.ctx.measureText(n);let m=Math.abs(a.actualBoundingBoxAscent)+Math.abs(a.actualBoundingBoxDescent);const U=m*i.length;m=U;const mt=U-Math.abs(a.actualBoundingBoxAscent),Et=0,St=0;return new ut({left:Et-Math.abs(a.actualBoundingBoxLeft)-this.font.padding,top:St-Math.abs(a.actualBoundingBoxAscent)-this.font.padding,bottom:St+mt+this.font.padding,right:Et+Math.abs(a.actualBoundingBoxRight)+this.font.padding})}_setDimension(t,e){let i=1;this.font.lineHeight&&(i=this.font.lineHeight/this.font.size),e.canvas.width=(t.width+this.font.padding*2)*2*this.font.quality,e.canvas.height=(t.height+this.font.padding*2)*2*this.font.quality*i}static getHashCode(t,e,i){var n;return e+"__hashcode__"+t.fontString+t.showDebug+t.textAlign+t.baseAlign+t.direction+t.lineHeight+JSON.stringify(t.shadow)+(t.padding.toString()+t.smoothing.toString()+t.lineWidth.toString()+t.lineDash.toString()+((n=t.strokeColor)===null||n===void 0?void 0:n.toString())+(i?i.toString():t.color.toString()))}getHashCode(t=!0){return Kn.getHashCode(this.font,this.text,t?this.color:void 0)}_applyRasterProperties(t){var e,i;t.translate(this.font.padding,this.font.padding),t.imageSmoothingEnabled=this.font.smoothing,t.lineWidth=this.font.lineWidth,t.setLineDash((e=this.font.lineDash)!==null&&e!==void 0?e:t.getLineDash()),t.strokeStyle=(i=this.font.strokeColor)===null||i===void 0?void 0:i.toString(),t.fillStyle=this.color.toString()}_applyFont(t){t.resetTransform(),t.translate(this.font.padding+t.canvas.width/2,this.font.padding+t.canvas.height/2),t.scale(this.font.quality,this.font.quality),t.textAlign=this.font.textAlign,t.textBaseline=this.font.baseAlign,t.font=this.font.fontString,t.direction=this.font.direction,this.font.shadow&&(t.shadowColor=this.font.shadow.color.toString(),t.shadowBlur=this.font.shadow.blur,t.shadowOffsetX=this.font.shadow.offset.x,t.shadowOffsetY=this.font.shadow.offset.y)}_drawText(t,e,i){this._applyRasterProperties(t),this._applyFont(t);for(let n=0;n<e.length;n++){const a=e[n];this.color&&t.fillText(a,0,n*i),this.font.strokeColor&&t.strokeText(a,0,n*i)}this.font.showDebug&&(ki(t,X.Green,-t.canvas.width/2,0,t.canvas.width/2,0,2),ki(t,X.Red,0,-t.canvas.height/2,0,t.canvas.height/2,2))}_splitTextBitmap(t){const e=[];let i=0,n=0;const a=Math.min(4096,t.canvas.width),m=Math.min(4096,t.canvas.height);for(;i<t.canvas.width;){for(;n<t.canvas.height;){const U=document.createElement("canvas");U.width=a,U.height=m,U.getContext("2d").drawImage(t.canvas,i,n,a,m,0,0,a,m),e.push({x:i,y:n,canvas:U}),n+=m}i+=a,n=0}return e}flagDirty(){this._dirty=!0}render(t,e,i,n){var a;if(this.disposed)throw Error("Accessing disposed text instance! "+this.text);this._ex=t;const m=this.getHashCode();if(this._lastHashCode!==m&&(this._dirty=!0),this._dirty){this.dimensions=this.measureText(this.text,n),this._setDimension(this.dimensions,this.ctx);const U=this._getLinesFromText(this.text,n),mt=(a=this.font.lineHeight)!==null&&a!==void 0?a:this.dimensions.height/U.length;if(this._drawText(this.ctx,U,mt),t instanceof hi)for(const Et of this._textFragments)t.textureLoader.delete(Et.canvas);if(this._textFragments=this._splitTextBitmap(this.ctx),t instanceof hi)for(const Et of this._textFragments)t.textureLoader.load(Et.canvas,{filtering:this.font.filtering},!0);this._lastHashCode=m,this._dirty=!1}for(const U of this._textFragments)t.drawImage(U.canvas,0,0,U.canvas.width,U.canvas.height,U.x/this.font.quality+e-this.ctx.canvas.width/this.font.quality/2,U.y/this.font.quality+i-this.ctx.canvas.height/this.font.quality/2,U.canvas.width/this.font.quality,U.canvas.height/this.font.quality)}dispose(){if(this.disposed=!0,this.dimensions=void 0,this.canvas=void 0,this.ctx=void 0,this._ex instanceof hi)for(const t of this._textFragments)this._ex.textureLoader.delete(t.canvas);this._textFragments.length=0}_getLinesFromText(t,e){if(this._cachedText===t&&this._cachedRenderWidth===e)return this._cachedLines;const i=t.split(`
`);if(e==null)return i;for(let n=0;n<i.length;n++){let a=i[n],m="";if(this.measureText(a).width>e){for(;this.measureText(a).width>e;)m=a[a.length-1]+m,a=a.slice(0,-1);i[n]=a,i[n+1]=m}}return this._cachedText=t,this._cachedLines=i,this._cachedRenderWidth=e,i}}class ps{static measureText(t,e,i){const n=Kn.getHashCode(e,t);if(ps._MEASURE_CACHE.has(n))return ps._MEASURE_CACHE.get(n);ps._LOGGER.debug("Font text measurement cache miss");const a=e.measureTextWithoutCache(t,i);return ps._MEASURE_CACHE.set(n,a),a}static getTextInstance(t,e,i){const n=Kn.getHashCode(e,t,i);let a=ps._TEXT_CACHE.get(n);return a||(a=new Kn(e,t,i),ps._TEXT_CACHE.set(n,a),ps._LOGGER.debug("Font text instance cache miss")),ps._TEXT_USAGE.set(a,performance.now()),a}static checkAndClearCache(){const t=[],e=new Set;for(const[n,a]of ps._TEXT_USAGE.entries())if(a+ps.FONT_TIMEOUT<performance.now())ps._LOGGER.debug(`Text cache entry timed out ${n.text}`),t.push(n),n.dispose();else{const m=n.getHashCode(!1);e.add(m)}t.forEach(n=>{ps._TEXT_USAGE.delete(n)}),this._TEXT_CACHE.clear();for(const[n]of this._TEXT_USAGE.entries())this._TEXT_CACHE.set(n.getHashCode(),n);const i=new Map;for(const n of e)ps._MEASURE_CACHE.has(n)&&i.set(n,ps._MEASURE_CACHE.get(n));this._MEASURE_CACHE.clear(),this._MEASURE_CACHE=i}static get cacheSize(){return ps._TEXT_USAGE.size}static clearCache(){for(const[t]of ps._TEXT_USAGE.entries())t.dispose();ps._TEXT_USAGE.clear(),ps._TEXT_CACHE.clear(),ps._MEASURE_CACHE.clear()}}ps.FONT_TIMEOUT=500,ps._LOGGER=ft.getInstance(),ps._TEXT_USAGE=new Map,ps._TEXT_CACHE=new Map,ps._MEASURE_CACHE=new Map;class Zn extends It{constructor(t={}){var e,i,n,a,m,U,mt,Et,St,Lt,Kt,ne,ae,ke,ze,ye,we,He,Pe,vi;super(t),this.filtering=yt.Blended,this.quality=2,this.padding=2,this.smoothing=!1,this.lineWidth=1,this.lineDash=[],this.color=X.Black,this.family="sans-serif",this.style=Mr.Normal,this.bold=!1,this.unit=Dr.Px,this.textAlign=Pr.Left,this.baseAlign=Qr.Top,this.direction=Lr.LeftToRight,this.lineHeight=void 0,this.size=10,this.shadow=null,this._textBounds=new ut,this._textMeasurement=new Kn(this,"",X.Black),this.smoothing=(e=t?.smoothing)!==null&&e!==void 0?e:this.smoothing,this.padding=(i=t?.padding)!==null&&i!==void 0?i:this.padding,this.color=(n=t?.color)!==null&&n!==void 0?n:this.color,this.strokeColor=(a=t?.strokeColor)!==null&&a!==void 0?a:this.strokeColor,this.lineDash=(m=t?.lineDash)!==null&&m!==void 0?m:this.lineDash,this.lineWidth=(U=t?.lineWidth)!==null&&U!==void 0?U:this.lineWidth,this.filtering=(mt=t?.filtering)!==null&&mt!==void 0?mt:this.filtering,this.family=(Et=t?.family)!==null&&Et!==void 0?Et:this.family,this.style=(St=t?.style)!==null&&St!==void 0?St:this.style,this.bold=(Lt=t?.bold)!==null&&Lt!==void 0?Lt:this.bold,this.size=(Kt=t?.size)!==null&&Kt!==void 0?Kt:this.size,this.unit=(ne=t?.unit)!==null&&ne!==void 0?ne:this.unit,this.textAlign=(ae=t?.textAlign)!==null&&ae!==void 0?ae:this.textAlign,this.baseAlign=(ke=t?.baseAlign)!==null&&ke!==void 0?ke:this.baseAlign,this.direction=(ze=t?.direction)!==null&&ze!==void 0?ze:this.direction,this.lineHeight=(ye=t?.lineHeight)!==null&&ye!==void 0?ye:this.lineHeight,this.quality=(we=t?.quality)!==null&&we!==void 0?we:this.quality,t?.shadow&&(this.shadow={},this.shadow.blur=(He=t.shadow.blur)!==null&&He!==void 0?He:this.shadow.blur,this.shadow.offset=(Pe=t.shadow.offset)!==null&&Pe!==void 0?Pe:this.shadow.offset,this.shadow.color=(vi=t.shadow.color)!==null&&vi!==void 0?vi:this.shadow.color)}clone(){return new Zn({...this.cloneGraphicOptions(),size:this.size,unit:this.unit,family:this.family,style:this.style,bold:this.bold,textAlign:this.textAlign,baseAlign:this.baseAlign,direction:this.direction,shadow:this.shadow?{blur:this.shadow.blur,offset:this.shadow.offset,color:this.shadow.color}:null})}get fontString(){return`${this.style} ${this.bold?"bold":""} ${this.size}${this.unit} ${this.family}`}get localBounds(){return this._textBounds}_drawImage(t,e,i){}_rotate(t){var e;const i=(e=this.origin)!==null&&e!==void 0?e:this._textBounds.center;t.translate(i.x,i.y),t.rotate(this.rotation),t.translate(-i.x,-i.y)}_flip(t){this.flipHorizontal&&(t.translate(this._textBounds.width/this.scale.x,0),t.scale(-1,1)),this.flipVertical&&(t.translate(0,-this._textBounds.height/2/this.scale.y),t.scale(1,-1))}measureTextWithoutCache(t,e){return this._textMeasurement.measureText(t,e)}measureText(t,e){return ps.measureText(t,this,e)}_postDraw(t){t.restore()}render(t,e,i,n,a,m){const U=ps.getTextInstance(e,this,i);this._textBounds=U.dimensions,this._preDraw(t,n,a),U.render(t,n,a,m),this._postDraw(t)}}class fr extends It{constructor(t){var e,i;super(t),this._text="",this._textWidth=0,this._textHeight=0,this.font=(e=t.font)!==null&&e!==void 0?e:new Zn,this.color=(i=t.color)!==null&&i!==void 0?i:this.color,this.text=t.text,this.maxWidth=t.maxWidth}clone(){var t,e;return new fr({text:this.text.slice(),color:(e=(t=this.color)===null||t===void 0?void 0:t.clone())!==null&&e!==void 0?e:X.Black,font:this.font.clone(),maxWidth:this.maxWidth})}get text(){return this._text}set text(t){this._text=t,this._calculateDimension()}get font(){return this._font}set font(t){this._font=t}get width(){return this._textWidth===0&&this._calculateDimension(),this._textWidth*this.scale.x}get height(){return this._textHeight===0&&this._calculateDimension(),this._textHeight*this.scale.y}_calculateDimension(){const{width:t,height:e}=this.font.measureText(this._text,this.maxWidth);this._textWidth=t,this._textHeight=e}get localBounds(){return this.font.measureText(this._text,this.maxWidth).scale(this.scale)}_rotate(t){}_flip(t){}_preDraw(t,e,i){(this.isStale()||this.font.isStale())&&(this.font.flipHorizontal=this.flipHorizontal,this.font.flipVertical=this.flipVertical,this.font.rotation=this.rotation,this.font.origin=this.origin,this.font.opacity=this.opacity),this.font.tint=this.tint,super._preDraw(t,e,i)}_drawImage(t,e,i){var n;let a=X.Black;this.font instanceof Zn&&(a=(n=this.color)!==null&&n!==void 0?n:this.font.color);const{width:m,height:U}=this.font.measureText(this._text,this.maxWidth);this._textWidth=m,this._textHeight=U,this.font.render(t,this._text,a,e,i,this.maxWidth),this.font.showDebug&&(t.debug.drawRect(e-m,i-U,m*2,U*2),this.maxWidth!=null&&t.debug.drawRect(e,i,this.maxWidth,this.height,{color:X.Yellow}))}}class Xs extends js{get pos(){return this.transform.pos}set pos(t){this.transform.pos=t.clone()}get oldPos(){return this.body.oldPos}set oldPos(t){this.body.oldPos.setTo(t.x,t.y)}get vel(){return this.motion.vel}set vel(t){this.motion.vel=t.clone()}get oldVel(){return this.body.oldVel}set oldVel(t){this.body.oldVel.setTo(t.x,t.y)}get acc(){return this.motion.acc}set acc(t){this.motion.acc=t.clone()}set oldAcc(t){this.body.oldAcc.setTo(t.x,t.y)}get oldAcc(){return this.body.oldAcc}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angularVelocity(){return this.motion.angularVelocity}set angularVelocity(t){this.motion.angularVelocity=t}get scale(){return this.get(fi).scale}set scale(t){this.get(fi).scale=t}get anchor(){return this._anchor}set anchor(t){this._anchor=Ee(t,e=>this._handleAnchorChange(e)),this._handleAnchorChange(t)}_handleAnchorChange(t){this.graphics&&(this.graphics.anchor=t)}get offset(){return this._offset}set offset(t){this._offset=Ee(t,e=>this._handleOffsetChange(e)),this._handleOffsetChange(t)}_handleOffsetChange(t){this.graphics&&(this.graphics.offset=t)}get isOffScreen(){return this.hasTag("ex.offscreen")}get draggable(){return this._draggable}set draggable(t){t&&(t&&!this._draggable?(this.events.on("pointerdragstart",this._pointerDragStartHandler),this.events.on("pointerdragend",this._pointerDragEndHandler),this.events.on("pointerdragmove",this._pointerDragMoveHandler),this.events.on("pointerdragleave",this._pointerDragLeaveHandler)):!t&&this._draggable&&(this.events.off("pointerdragstart",this._pointerDragStartHandler),this.events.off("pointerdragend",this._pointerDragEndHandler),this.events.off("pointerdragmove",this._pointerDragMoveHandler),this.events.off("pointerdragleave",this._pointerDragLeaveHandler)),this._draggable=t)}get color(){return this._color}set color(t){this._color=t.clone();const e=this.graphics.current;(e instanceof Xi||e instanceof fr)&&(e.color=this._color)}constructor(t){super(),this.events=new l,this._anchor=Ee(u.Half,$i=>this._handleAnchorChange($i)),this._offset=Ee(u.Zero,$i=>this._handleOffsetChange($i)),this.logger=ft.getInstance(),this._draggable=!1,this._dragging=!1,this._pointerDragStartHandler=()=>{this._dragging=!0},this._pointerDragEndHandler=()=>{this._dragging=!1},this._pointerDragMoveHandler=$i=>{this._dragging&&(this.pos=$i.worldPos)},this._pointerDragLeaveHandler=$i=>{this._dragging&&(this.pos=$i.worldPos)};const{name:e,x:i,y:n,pos:a,coordPlane:m,scale:U,width:mt,height:Et,radius:St,collider:Lt,vel:Kt,acc:ne,rotation:ae,angularVelocity:ke,z:ze,color:ye,visible:we,opacity:He,anchor:Pe,offset:vi,collisionType:Ji,collisionGroup:Xe}={...t};this.name=e??this.name,this.anchor=Pe??Xs.defaults.anchor.clone(),this.offset=vi??u.Zero,this.transform=new fi,this.addComponent(this.transform),this.pos=a??O(i??0,n??0),this.rotation=ae??0,this.scale=U??O(1,1),this.z=ze??0,this.transform.coordPlane=m??mi.World,this.pointer=new Dn,this.addComponent(this.pointer),this.graphics=new Ms({anchor:this.anchor,offset:this.offset,opacity:He}),this.addComponent(this.graphics),this.motion=new us,this.addComponent(this.motion),this.vel=Kt??u.Zero,this.acc=ne??u.Zero,this.angularVelocity=ke??0,this.actions=new Xn,this.addComponent(this.actions),this.body=new Hi,this.addComponent(this.body),this.body.collisionType=Ji??je.Passive,Xe&&(this.body.group=Xe),Lt?(this.collider=new Cs(Lt),this.addComponent(this.collider)):St?(this.collider=new Cs(Gs.Circle(St)),this.addComponent(this.collider)):mt>0&&Et>0?(this.collider=new Cs(Gs.Box(mt,Et,this.anchor)),this.addComponent(this.collider)):(this.collider=new Cs,this.addComponent(this.collider)),this.graphics.visible=we??!0,ye&&(this.color=ye,mt&&Et?this.graphics.add(new dr({color:ye,width:mt,height:Et})):St&&this.graphics.add(new Br({color:ye,radius:St})))}clone(){const t=new Xs({color:this.color.clone(),anchor:this.anchor.clone(),offset:this.offset.clone()});t.clearComponents(),t.processComponentRemoval(),t.addComponent(t.transform=this.transform.clone(),!0),t.addComponent(t.pointer=this.pointer.clone(),!0),t.addComponent(t.graphics=this.graphics.clone(),!0),t.addComponent(t.motion=this.motion.clone(),!0),t.addComponent(t.actions=this.actions.clone(),!0),t.addComponent(t.body=this.body.clone(),!0),t.addComponent(t.collider=this.collider.clone(),!0);const e=[this.transform,this.pointer,this.graphics,this.motion,this.actions,this.body,this.collider],i=this.getComponents();for(const n of i)e.includes(n)||t.addComponent(n.clone(),!0);return t}onInitialize(t){}_initialize(t){super._initialize(t);for(const e of this.children)e._initialize(t)}emit(t,e){this.events.emit(t,e)}on(t,e){return this.events.on(t,e)}once(t,e){return this.events.once(t,e)}off(t,e){this.events.off(t,e)}_prekill(t){this.events.emit("prekill",new ms(this)),this.onPreKill(t)}onPreKill(t){}_postkill(t){this.events.emit("postkill",new Rs(this)),this.onPostKill(t)}onPostKill(t){}kill(){this.scene?(this._prekill(this.scene),this.events.emit("kill",new ks(this)),super.kill(),this._postkill(this.scene)):this.logger.warn(`Cannot kill actor named "${this.name}", it was never added to the Scene`)}unkill(){this.active=!0}isKilled(){return!this.active}get z(){return this.get(fi).z}set z(t){this.get(fi).z=t}get center(){const t=this.getGlobalPos();return new u(t.x+this.width/2-this.anchor.x*this.width,t.y+this.height/2-this.anchor.y*this.height)}get localCenter(){return new u(this.pos.x+this.width/2-this.anchor.x*this.width,this.pos.y+this.height/2-this.anchor.y*this.height)}get width(){return this.collider.localBounds.width*this.getGlobalScale().x}get height(){return this.collider.localBounds.height*this.getGlobalScale().y}getGlobalRotation(){return this.get(fi).globalRotation}getGlobalPos(){return this.get(fi).globalPos}getGlobalScale(){return this.get(fi).globalScale}contains(t,e,i=!1){const n=O(t,e),a=this.get(Cs);a.update();const m=a.get();if(!m)return!1;const U=m.contains(n);return i?U||this.children.some(mt=>mt.contains(t,e,!0)):U}within(t,e){const i=this.get(Cs),n=t.get(Cs),a=i.get(),m=n.get();return a&&m?a.getClosestLineBetween(m).getLength()<=e:!1}update(t,e){this._initialize(t),this._preupdate(t,e),this._postupdate(t,e)}onPreUpdate(t,e){}onPostUpdate(t,e){}onPreCollisionResolve(t,e,i,n){}onPostCollisionResolve(t,e,i,n){}onCollisionStart(t,e,i,n){}onCollisionEnd(t,e,i,n){}_preupdate(t,e){this.events.emit("preupdate",new en(t,e,this)),this.onPreUpdate(t,e)}_postupdate(t,e){this.events.emit("postupdate",new ln(t,e,this)),this.onPostUpdate(t,e)}}Xs.defaults={anchor:u.Half};function mo(h){return h instanceof Kr}class Kr extends Xs{constructor(t){var e,i;super({...t}),this.get(fi).coordPlane=mi.Screen,this.anchor=(e=t?.anchor)!==null&&e!==void 0?e:O(0,0),this.body.collisionType=(i=t?.collisionType)!==null&&i!==void 0?i:je.PreventCollision,this.pointer.useGraphicsBounds=!0,this.pointer.useColliderShape=!1,!t?.collider&&t?.width>0&&t?.height>0&&this.collider.useBoxCollider(this.width,this.height,this.anchor)}_initialize(t){this._engine=t,super._initialize(t)}contains(t,e,i=!0){if(i)return super.contains(t,e);const n=this._engine.worldToScreenCoordinates(new u(t,e));return super.contains(n.x,n.y)}}class Wn{get complete(){return this._complete}constructor(t,e,i,n,a,m){if(this._logger=ft.getInstance(),this.id=0,this._elapsedTime=0,this._totalTimeAlive=0,this._running=!1,this._numberOfTicks=0,this.interval=10,this.repeats=!1,this.maxNumberOfRepeats=-1,this.randomRange=[0,0],this._baseInterval=10,this._generateRandomInterval=()=>this._baseInterval+this.random.integer(this.randomRange[0],this.randomRange[1]),this._complete=!1,this.scene=null,typeof t!="function"){const U=t;t=U.fcn,e=U.interval,i=U.repeats,n=U.numberOfRepeats,a=U.randomRange,m=U.random}if(n&&n>=0&&(this.maxNumberOfRepeats=n,!i))throw new Error("repeats must be set to true if numberOfRepeats is set");if(this.id=Wn._MAX_ID++,this._callbacks=[],this._baseInterval=this.interval=e,a){if(a[0]>a[1])throw new Error("min value must be lower than max value for range");this.random=m??new T,this.randomRange=a,this.interval=this._generateRandomInterval(),this.on(()=>{this.interval=this._generateRandomInterval()})}this.repeats=i||this.repeats,t&&this.on(t)}on(t){this._callbacks.push(t)}off(t){const e=this._callbacks.indexOf(t);this._callbacks.splice(e,1)}update(t){this._running&&(this._totalTimeAlive+=t,this._elapsedTime+=t,this.maxNumberOfRepeats>-1&&this._numberOfTicks>=this.maxNumberOfRepeats&&(this._complete=!0,this._running=!1,this._elapsedTime=0),!this.complete&&this._elapsedTime>=this.interval&&(this._callbacks.forEach(e=>{e.call(this)}),this._numberOfTicks++,this.repeats?this._elapsedTime=0:(this._complete=!0,this._running=!1,this._elapsedTime=0)))}reset(t,e){if(t&&t>=0&&(this._baseInterval=this.interval=t),this.maxNumberOfRepeats&&this.maxNumberOfRepeats>=0&&(this.maxNumberOfRepeats=e,!this.repeats))throw new Error("repeats must be set to true if numberOfRepeats is set");this._complete=!1,this._elapsedTime=0,this._numberOfTicks=0}get timesRepeated(){return this._numberOfTicks}getTimeRunning(){return this._totalTimeAlive}get timeToNextAction(){return this.complete?0:this.interval-this._elapsedTime}get timeElapsedTowardNextAction(){return this._elapsedTime}get isRunning(){return this._running}pause(){return this._running=!1,this}resume(){return this._running=!0,this}start(){return this.scene||this._logger.warn("Cannot start a timer not part of a scene, timer wont start until added"),this._running=!0,this.complete&&(this._complete=!1,this._elapsedTime=0,this._numberOfTicks=0),this}stop(){return this._running=!1,this._elapsedTime=0,this._numberOfTicks=0,this}cancel(){this.pause(),this.scene&&this.scene.cancelTimer(this)}}Wn._MAX_ID=0;class gr extends ss{constructor(t){super(),this.parallaxFactor=O(1,1),this.parallaxFactor=t??this.parallaxFactor}}class qn extends ss{constructor(t,e=!0){super(),this.draw=t,this.useTransform=e}}const Po={PreUpdate:"preupdate",PostUpdate:"postupdate",PreDraw:"predraw",PostDraw:"postdraw",PointerUp:"pointerup",PointerDown:"pointerdown",PointerMove:"pointermove",PointerCancel:"pointercancel"};class vo extends js{flagCollidersDirty(){this._collidersDirty=!0}flagTilesDirty(){for(let t=0;t<this.tiles.length;t++)this.tiles[t]&&this.tiles[t].flagDirty()}get x(){var t;return(t=this.transform.pos.x)!==null&&t!==void 0?t:0}set x(t){var e;!((e=this.transform)===null||e===void 0)&&e.pos&&(this.get(fi).pos=O(t,this.y))}get y(){var t,e;return(e=(t=this.transform)===null||t===void 0?void 0:t.pos.y)!==null&&e!==void 0?e:0}set y(t){var e;!((e=this.transform)===null||e===void 0)&&e.pos&&(this.transform.pos=O(this.x,t))}get z(){var t;return(t=this.transform.z)!==null&&t!==void 0?t:0}set z(t){this.transform&&(this.transform.z=t)}get rotation(){var t,e;return(e=(t=this.transform)===null||t===void 0?void 0:t.rotation)!==null&&e!==void 0?e:0}set rotation(t){this.transform&&(this.transform.rotation=t)}get scale(){var t,e;return(e=(t=this.transform)===null||t===void 0?void 0:t.scale)!==null&&e!==void 0?e:u.One}set scale(t){var e;!((e=this.transform)===null||e===void 0)&&e.scale&&(this.transform.scale=t)}get pos(){return this.transform.pos}set pos(t){this.transform.pos=t}get vel(){return this._motion.vel}set vel(t){this._motion.vel=t}emit(t,e){this.events.emit(t,e)}on(t,e){return this.events.on(t,e)}once(t,e){return this.events.once(t,e)}off(t,e){this.events.off(t,e)}constructor(t){var e,i,n;super([],t.name),this.events=new l,this._token=0,this.logger=ft.getInstance(),this.tiles=[],this._rows=[],this._cols=[],this.renderFromTopOfGraphic=!1,this.meshingLookBehind=10,this._collidersDirty=!0,this._forwardPointerEventToTile=m=>U=>{const mt=this.getTileByPoint(U.worldPos);mt&&mt.events.emit(m,U)},this._originalOffsets=new WeakMap,this.meshingLookBehind=(e=t.meshingLookBehind)!==null&&e!==void 0?e:this.meshingLookBehind,this.addComponent(new fi),this.addComponent(new us),this.addComponent(new Hi({type:je.Fixed})),this.addComponent(new Ms({onPostDraw:(m,U)=>this.draw(m,U)})),this.addComponent(new qn((m,U)=>this.debug(m,U),!1)),this.addComponent(new Cs),this.addComponent(new Dn),this.pointer=this.get(Dn),this._graphics=this.get(Ms),this.transform=this.get(fi),this._motion=this.get(us),this.collider=this.get(Cs),this._composite=this.collider.useCompositeCollider([]),this.transform.pos=(i=t.pos)!==null&&i!==void 0?i:u.Zero,this._oldPos=this.transform.pos.clone(),this._oldScale=this.transform.scale.clone(),this.renderFromTopOfGraphic=(n=t.renderFromTopOfGraphic)!==null&&n!==void 0?n:this.renderFromTopOfGraphic,this.tileWidth=t.tileWidth,this.tileHeight=t.tileHeight,this.rows=t.rows,this.columns=t.columns,this.tiles=new Array(this.rows*this.columns),this._rows=new Array(this.rows),this._cols=new Array(this.columns);let a=[];for(let m=0;m<this.columns;m++){for(let U=0;U<this.rows;U++){const mt=new bo({x:m,y:U,map:this});mt.map=this,this.tiles[m+U*this.columns]=mt,a.push(mt),this._rows[U]||(this._rows[U]=[]),this._rows[U].push(mt)}this._cols[m]=a,a=[]}this._setupPointerToTile(),this._graphics.localBounds=new ut({left:0,top:0,right:this.columns*this.tileWidth*this.scale.x,bottom:this.rows*this.tileHeight*this.scale.y})}_initialize(t){super._initialize(t),this._engine=t}_setupPointerToTile(){this.events.on("pointerup",this._forwardPointerEventToTile("pointerup")),this.events.on("pointerdown",this._forwardPointerEventToTile("pointerdown")),this.events.on("pointermove",this._forwardPointerEventToTile("pointermove")),this.events.on("pointercancel",this._forwardPointerEventToTile("pointercancel"))}_getOrSetColliderOriginalOffset(t){if(this._originalOffsets.has(t))return this._originalOffsets.get(t);{const e=t.offset;return this._originalOffsets.set(t,e),e}}_updateColliders(){this.collider.$colliderRemoved.notifyAll(this._composite),this._composite.clearColliders();const t=[];this._composite=this.collider.useCompositeCollider([]);let e;const i=(a,m)=>a&&m?a.top===m.top&&a.bottom===m.bottom&&a.right===m.left:!1,n=(a,m,U=this.meshingLookBehind)=>{if(!a)return!1;for(let mt=m.length-1;mt>=0;mt--){if(U--<0)return!1;const Et=m[mt];if(i(Et,a))return m[mt]=Et.combine(a),!0}return!1};for(let a=0;a<this.columns;a++){for(let m=0;m<this.rows;m++){const U=this.tiles[a+m*this.columns];if(U.solid)if(U.getColliders().length>0){for(const mt of U.getColliders()){const Et=this._getOrSetColliderOriginalOffset(mt);mt.offset=O(U.x*this.tileWidth*this.scale.x,U.y*this.tileHeight*this.scale.y).add(Et),mt.owner=this,this._composite.addCollider(mt)}e&&!n(e,t)&&t.push(e),e=null}else e?e=e.combine(U.defaultGeometry):e=U.defaultGeometry;else e&&!n(e,t)&&t.push(e),e=null}e&&!n(e,t)&&t.push(e),e=null}for(const a of t){const m=Gs.Box(a.width,a.height,u.Zero,O(a.left-this.pos.x,a.top-this.pos.y));m.owner=this,this._composite.addCollider(m)}this.collider.update(),this.collider.$colliderAdded.notifyAll(this._composite)}getTileByIndex(t){return this.tiles[t]}getTile(t,e){return t<0||e<0||t>=this.columns||e>=this.rows?null:this.tiles[t+e*this.columns]}getTileByPoint(t){const{x:e,y:i}=this._getTileCoordinates(t),n=this.getTile(e,i);return e>=0&&i>=0&&e<this.columns&&i<this.rows&&n?n:null}_getTileCoordinates(t){t=this.transform.applyInverse(t);const e=Math.floor(t.x/this.tileWidth),i=Math.floor(t.y/this.tileHeight);return{x:e,y:i}}getRows(){return this._rows}getColumns(){return this._cols}getOnScreenTiles(){let t=this._engine.screen.getWorldBounds();const e=this.get(gr);if(e&&this.isInitialized){let ne=this.pos;const ae=u.One.sub(e.parallaxFactor),ke=this._engine.currentScene.camera.pos.scale(ae);ne=ne.sub(ke),t=t.translate(ne)}const i=this.transform.coordPlane===mi.Screen?this._engine.screen.getScreenBounds():t,n=this._getTileCoordinates(i.topLeft),a=this._getTileCoordinates(i.topRight),m=this._getTileCoordinates(i.bottomRight),U=this._getTileCoordinates(i.bottomLeft),mt=Math.min(q(n.x,0,this.columns-1),q(a.x,0,this.columns-1)),Et=Math.min(q(n.y,0,this.rows-1),q(a.y,0,this.rows-1)),St=Math.max(q(m.x,0,this.columns-1),q(U.x,0,this.columns-1)),Lt=Math.max(q(m.y,0,this.rows-1),q(U.y,0,this.rows-1)),Kt=[];for(let ne=mt;ne<=St;ne++)for(let ae=Et;ae<=Lt;ae++)Kt.push(this.getTile(ne,ae));return Kt}update(t,e){this._initialize(t),this.onPreUpdate(t,e),this.emit("preupdate",new en(t,e,this)),(!this._oldPos.equals(this.pos)||this._oldRotation!==this.rotation||!this._oldScale.equals(this.scale))&&(this.flagCollidersDirty(),this.flagTilesDirty()),this._collidersDirty&&(this._collidersDirty=!1,this._updateColliders()),this._token++,this.pos.clone(this._oldPos),this._oldRotation=this.rotation,this.scale.clone(this._oldScale),this.transform.pos=this.pos,this.onPostUpdate(t,e),this.emit("postupdate",new ln(t,e,this))}draw(t,e){if(!this.isInitialized)return;this.emit("predraw",new vs(t,e,this));let i,n,a;const m=this.getOnScreenTiles();for(let U=0;U<m.length;U++){const mt=m[U],Et=mt.getGraphicsOffsets();for(i=mt.getGraphics(),n=0,a=i.length;n<a;n++){const St=i[n],Lt=Et[n];if(St){Yr(St)&&St?.tick(e,this._token);const Kt=this.renderFromTopOfGraphic?0:St.height-this.tileHeight;St.draw(t,mt.x*this.tileWidth+Lt.x,mt.y*this.tileHeight-Kt+Lt.y)}}}this.emit("postdraw",new Bs(t,e,this))}debug(t,e){const{showAll:i,showGrid:n,gridColor:a,gridWidth:m,showSolidBounds:U,solidBoundsColor:mt,showColliderGeometry:Et}=e.tilemap,{geometryColor:St,geometryLineWidth:Lt,geometryPointSize:Kt}=e.collider,ne=this.tileWidth*this.columns*this.scale.x,ae=this.tileHeight*this.rows*this.scale.y,ke=this.pos;if(n||i){for(let ze=0;ze<this.rows+1;ze++){const ye=O(0,ze*this.tileHeight*this.scale.y);t.drawLine(ke.add(ye),ke.add(O(ne,ye.y)),a,m)}for(let ze=0;ze<this.columns+1;ze++){const ye=O(ze*this.tileWidth*this.scale.x,0);t.drawLine(ke.add(ye),ke.add(O(ye.x,ae)),a,m)}}if(i||U||Et){const ze=this._composite.getColliders();t.save(),t.translate(this.pos.x,this.pos.y),t.scale(this.scale.x,this.scale.y);for(const ye of ze){const we=ye.localBounds,He=ye.worldPos.sub(this.pos);U&&t.drawRectangle(He,we.width,we.height,mt)}if(t.restore(),Et)for(const ye of ze)ye.debug(t,St,{lineWidth:Lt,pointSize:Kt})}if(i||U){if(t.save(),t.z=999,U)for(let ze=0;ze<this.tiles.length;ze++)this.tiles[ze].bounds.draw(t);t.restore()}}}class bo{get pos(){return this._posDirty&&(this._recalculate(),this._posDirty=!1),this._pos}get width(){return this._width}get height(){return this._height}get solid(){return this._solid}set solid(t){var e;(e=this.map)===null||e===void 0||e.flagCollidersDirty(),this._solid=t}getGraphics(){return this._graphics}getGraphicsOffsets(){return this._offsets}addGraphic(t,e){this._graphics.push(t),e?.offset?this._offsets.push(e.offset):this._offsets.push(u.Zero)}removeGraphic(t){const e=this._graphics.indexOf(t);e>-1&&(this._graphics.splice(e,1),this._offsets.splice(e,1))}clearGraphics(){this._graphics.length=0,this._offsets.length=0}getColliders(){return this._colliders}addCollider(t){this._colliders.push(t),this.map.flagCollidersDirty()}removeCollider(t){const e=this._colliders.indexOf(t);e>-1&&this._colliders.splice(e,1),this.map.flagCollidersDirty()}clearColliders(){this._colliders.length=0,this.map.flagCollidersDirty()}constructor(t){var e,i;this._posDirty=!1,this.events=new l,this._solid=!1,this._graphics=[],this._offsets=[],this._colliders=[],this.data=new Map,this.x=t.x,this.y=t.y,this.map=t.map,this._width=t.map.tileWidth*this.map.scale.x,this._height=t.map.tileHeight*this.map.scale.y,this.solid=(e=t.solid)!==null&&e!==void 0?e:this.solid,this._graphics=(i=t.graphics)!==null&&i!==void 0?i:[],this._recalculate()}flagDirty(){return this._posDirty=!0}_recalculate(){const t=this.map.pos.add(O(this.x*this.map.tileWidth,this.y*this.map.tileHeight));this._geometry=new ut(t.x,t.y,t.x+this.map.tileWidth,t.y+this.map.tileHeight),this._width=this.map.tileWidth*this.map.scale.x,this._height=this.map.tileHeight*this.map.scale.y,this._pos=this.map.pos.add(O(this.x*this._width,this.y*this._height)),this._bounds=new ut(this._pos.x,this._pos.y,this._pos.x+this._width,this._pos.y+this._height),this.map.rotation&&(this._bounds=this._bounds.rotate(this.map.rotation,this.map.pos)),this._posDirty=!1}get bounds(){return this._posDirty&&this._recalculate(),this._bounds}get defaultGeometry(){return this._geometry}get center(){return this._posDirty&&this._recalculate(),new u(this._pos.x+this._width/2,this._pos.y+this._height/2)}emit(t,e){this.events.emit(t,e)}on(t,e){return this.events.on(t,e)}once(t,e){return this.events.once(t,e)}off(t,e){e?this.events.off(t,e):this.events.off(t)}}class yo{constructor(t){this.camera=t}lockToActor(t){this.camera.addStrategy(new jt(t))}lockToActorAxis(t,e){this.camera.addStrategy(new zt(t,e))}elasticToActor(t,e,i){this.camera.addStrategy(new Mt(t,e,i))}radiusAroundActor(t,e){this.camera.addStrategy(new K(t,e))}limitCameraBounds(t){this.camera.addStrategy(new wt(t))}}var Rr;(function(h){h[h.X=0]="X",h[h.Y=1]="Y"})(Rr||(Rr={}));class jt{constructor(t){this.target=t,this.action=(e,i,n,a)=>e.center}}class zt{constructor(t,e){this.target=t,this.axis=e,this.action=(i,n,a,m)=>{const U=i.center,mt=n.getFocus();return this.axis===Rr.X?new u(U.x,mt.y):new u(mt.x,U.y)}}}class Mt{constructor(t,e,i){this.target=t,this.cameraElasticity=e,this.cameraFriction=i,this.action=(n,a,m,U)=>{const mt=n.center;let Et=a.getFocus(),St=a.vel.clone();const Lt=mt.sub(Et).scale(this.cameraElasticity);St=St.add(Lt);const Kt=St.scale(-1).scale(this.cameraFriction);return St=St.add(Kt),Et=Et.add(St),Et}}}class K{constructor(t,e){this.target=t,this.radius=e,this.action=(i,n,a,m)=>{const U=i.center,mt=n.getFocus(),Et=U.sub(mt),St=Et.size;if(St>=this.radius){const Lt=St-this.radius;return mt.add(Et.normalize().scale(Lt))}return mt}}}class wt{constructor(t){this.target=t,this.boundSizeChecked=!1,this.action=(e,i,n,a)=>{const m=i.getFocus();this.boundSizeChecked||((e.bottom-e.top<n.drawHeight||e.right-e.left<n.drawWidth)&&ft.getInstance().warn("Camera bounds should not be smaller than the engine viewport"),this.boundSizeChecked=!0);let U=m.x,mt=m.y;return m.x<e.left+n.halfDrawWidth?U=e.left+n.halfDrawWidth:m.x>e.right-n.halfDrawWidth&&(U=e.right-n.halfDrawWidth),m.y<e.top+n.halfDrawHeight?mt=e.top+n.halfDrawHeight:m.y>e.bottom-n.halfDrawHeight&&(mt=e.bottom-n.halfDrawHeight),O(U,mt)}}}const Dt={Initialize:"initialize",PreUpdate:"preupdate",PostUpdate:"postupdate"};class Xt{constructor(){this.events=new l,this.transform=$t.identity(),this.inverse=$t.identity(),this._cameraStrategies=[],this.strategy=new yo(this),this._z=1,this.dz=0,this.az=0,this.rotation=0,this._angularVelocity=0,this._posChanged=!1,this._pos=ot(u.Zero,()=>this._posChanged=!0),this.drawPos=this.pos.clone(),this._oldPos=this.pos.clone(),this.vel=u.Zero,this.acc=u.Zero,this._cameraMoving=!1,this._currentLerpTime=0,this._lerpDuration=1e3,this._lerpStart=null,this._lerpEnd=null,this._isShaking=!1,this._shakeMagnitudeX=0,this._shakeMagnitudeY=0,this._shakeDuration=0,this._elapsedShakeTime=0,this._xShake=0,this._yShake=0,this._isZooming=!1,this._zoomStart=1,this._zoomEnd=1,this._currentZoomTime=0,this._zoomDuration=0,this._zoomEasing=As.EaseInOutCubic,this._easing=As.EaseInOutCubic,this._halfWidth=0,this._halfHeight=0,this._viewport=null,this._isInitialized=!1,this._snapPos=O(0,0)}get zoom(){return this._z}set zoom(t){this._z=t,this._engine&&(this._halfWidth=this._engine.halfDrawWidth,this._halfHeight=this._engine.halfDrawHeight)}get angularVelocity(){return this._angularVelocity}set angularVelocity(t){this._angularVelocity=t}get pos(){return this._pos}set pos(t){this._pos=ot(t,()=>this._posChanged=!0),this._posChanged=!0}get x(){return this.pos.x}set x(t){!this._follow&&!this._cameraMoving&&(this.pos=O(t,this.pos.y))}get y(){return this.pos.y}set y(t){!this._follow&&!this._cameraMoving&&(this.pos=O(this.pos.x,t))}get dx(){return this.vel.x}set dx(t){this.vel=O(t,this.vel.y)}get dy(){return this.vel.y}set dy(t){this.vel=O(this.vel.x,t)}get ax(){return this.acc.x}set ax(t){this.acc=O(t,this.acc.y)}get ay(){return this.acc.y}set ay(t){this.acc=O(this.acc.x,t)}getFocus(){return this.pos}move(t,e,i=As.EaseInOutCubic){if(typeof i!="function")throw"Please specify an EasingFunction";return this._follow?Promise.reject(t):(this._lerpPromise&&this._lerpResolve&&this._lerpResolve(t),this._lerpPromise=new Promise(n=>{this._lerpResolve=n}),this._lerpStart=this.getFocus().clone(),this._lerpDuration=e,this._lerpEnd=t,this._currentLerpTime=0,this._cameraMoving=!0,this._easing=i,this._lerpPromise)}shake(t,e,i){this._isShaking=!0,this._shakeMagnitudeX=t,this._shakeMagnitudeY=e,this._shakeDuration=i}zoomOverTime(t,e=0,i=As.EaseInOutCubic){if(this._zoomPromise=new Promise(n=>{this._zoomResolve=n}),e)this._isZooming=!0,this._zoomEasing=i,this._currentZoomTime=0,this._zoomDuration=e,this._zoomStart=this.zoom,this._zoomEnd=t;else return this._isZooming=!1,this.zoom=t,Promise.resolve(!0);return this._zoomPromise}get viewport(){return this._viewport?this._viewport:new ut(0,0,0,0)}addStrategy(t){this._cameraStrategies.push(t)}removeStrategy(t){xt(t,this._cameraStrategies)}clearAllStrategies(){this._cameraStrategies.length=0}_preupdate(t,e){this.events.emit("preupdate",new en(t,e,this)),this.onPreUpdate(t,e)}onPreUpdate(t,e){}_postupdate(t,e){this.events.emit("postupdate",new ln(t,e,this)),this.onPostUpdate(t,e)}onPostUpdate(t,e){}get isInitialized(){return this._isInitialized}_initialize(t){if(!this.isInitialized){this._engine=t,this._screen=t.screen;const e=this._screen.contentArea;let i=O(e.width/2,e.height/2);if(!this._engine.loadingComplete){const n=this._screen.peekResolution();n&&(i=O(n.width/2,n.height/2))}this._halfWidth=i.x,this._halfHeight=i.y,this._posChanged||(this.pos=i),this.pos.clone(this.drawPos),this.updateTransform(this.pos),this.runStrategies(t,t.clock.elapsed()),this.updateViewport(),this.updateTransform(this.pos),this.pos.clone(this._oldPos),this.onInitialize(t),this.events.emit("initialize",new Rn(t,this)),this._isInitialized=!0}}onInitialize(t){}emit(t,e){this.events.emit(t,e)}on(t,e){return this.events.on(t,e)}once(t,e){return this.events.once(t,e)}off(t,e){this.events.off(t,e)}runStrategies(t,e){for(const i of this._cameraStrategies)this.pos=i.action.call(i,i.target,this,t,e)}updateViewport(){this._viewport=new ut(this.x-this._halfWidth,this.y-this._halfHeight,this.x+this._halfWidth,this.y+this._halfHeight)}update(t,e){if(this._initialize(t),this._preupdate(t,e),this.pos.clone(this._oldPos),this.pos=this.pos.add(this.vel.scale(e/1e3)),this.zoom+=this.dz*e/1e3,this.vel=this.vel.add(this.acc.scale(e/1e3)),this.dz+=this.az*e/1e3,this.rotation+=this.angularVelocity*e/1e3,this._isZooming)if(this._currentZoomTime<this._zoomDuration){const i=this._zoomEasing,n=i(this._currentZoomTime,this._zoomStart,this._zoomEnd,this._zoomDuration);this.zoom=n,this._currentZoomTime+=e}else this._isZooming=!1,this.zoom=this._zoomEnd,this._currentZoomTime=0,this._zoomResolve(!0);if(this._cameraMoving)if(this._currentLerpTime<this._lerpDuration){const n=As.CreateVectorEasingFunction(this._easing)(this._currentLerpTime,this._lerpStart,this._lerpEnd,this._lerpDuration);this.pos=n,this._currentLerpTime+=e}else{this.pos=this._lerpEnd;const i=this._lerpEnd.clone();this._lerpStart=null,this._lerpEnd=null,this._currentLerpTime=0,this._cameraMoving=!1,this._lerpResolve(i)}this._isDoneShaking()?(this._isShaking=!1,this._elapsedShakeTime=0,this._shakeMagnitudeX=0,this._shakeMagnitudeY=0,this._shakeDuration=0,this._xShake=0,this._yShake=0):(this._elapsedShakeTime+=e,this._xShake=(Math.random()*this._shakeMagnitudeX|0)+1,this._yShake=(Math.random()*this._shakeMagnitudeY|0)+1),this.runStrategies(t,e),this.updateViewport(),this.updateTransform(this.pos),this._postupdate(t,e)}draw(t){if(this.pos.clone(this.drawPos),this._engine.fixedUpdateFps){const e=this._engine.currentFrameLagMs/(1e3/this._engine.fixedUpdateFps),i=this.pos.scale(e).add(this._oldPos.scale(1-e));i.clone(this.drawPos),this.updateTransform(i)}if(t.snapToPixel){const e=this.drawPos.clone(this._snapPos);e.x=~~(e.x+ti*P(e.x)),e.y=~~(e.y+ti*P(e.y)),e.clone(this.drawPos),this.updateTransform(e)}t.multiply(this.transform)}updateTransform(t){const e=this._screen.resolution.width/this.zoom,i=this._screen.resolution.height/this.zoom,n=O(-t.x+e/2+this._xShake,-t.y+i/2+this._yShake);this.transform.reset(),this.transform.scale(this.zoom,this.zoom),this.transform.translate(e/2,i/2),this.transform.rotate(this.rotation),this.transform.translate(-e/2,-i/2),this.transform.translate(n.x,n.y),this.transform.inverse(this.inverse)}_isDoneShaking(){return!this._isShaking||this._elapsedShakeTime>=this._shakeDuration}}const be={ExitTrigger:"exit",EnterTrigger:"enter"},Se={pos:u.Zero,width:10,height:10,visible:!1,action:()=>{},filter:()=>!0,repeat:-1};class ei extends Xs{constructor(t){super({x:t.pos.x,y:t.pos.y,width:t.width,height:t.height}),this.events=new l,this.action=()=>{},this.filter=()=>!0,this.repeat=-1,t={...Se,...t},this.filter=t.filter||this.filter,this.repeat=t.repeat||this.repeat,this.action=t.action||this.action,t.target&&(this.target=t.target),this.graphics.visible=t.visible,this.body.collisionType=je.Passive,this.events.on("collisionstart",e=>{this.filter(e.other)&&(this.events.emit("enter",new sr(this,e.other)),this._dispatchAction(),this.repeat===0&&this.kill())}),this.events.on("collisionend",e=>{this.filter(e.other)&&this.events.emit("exit",new nr(this,e.other))})}set target(t){this._target=t,this.filter=e=>e===t}get target(){return this._target}_initialize(t){super._initialize(t)}_dispatchAction(){this.repeat!==0&&(this.action.call(this),this.repeat--)}}const ui={Highest:-1/0,Higher:-5,Average:0,Lower:5,Lowest:1/0};var Di;(function(h){h.Update="update",h.Draw="draw"})(Di||(Di={}));class Wi{constructor(){this.priority=ui.Average}}class cs{constructor(t){this._world=t,this.entities=[],this._entityIndex={},this._entitiesToRemove=[]}updateEntities(t,e){for(const i of this.entities)i.update(t.engine,e),i.active||this.removeEntity(i)}findEntitiesForRemoval(){for(const t of this.entities)t.active||this.removeEntity(t)}addEntity(t){t.active=!0,t.scene=this._world.scene,t&&!this._entityIndex[t.id]&&(this._entityIndex[t.id]=t,this.entities.push(t),this._world.queryManager.addEntity(t),t.children.forEach(e=>{e.scene=t.scene,this.addEntity(e)}),t.childrenAdded$.register({notify:e=>{this.addEntity(e)}}),t.childrenRemoved$.register({notify:e=>{this.removeEntity(e,!1)}}))}removeEntity(t,e=!0){var i,n;let a=0;t instanceof js?a=t.id:a=t;const m=this._entityIndex[a];if(m&&m.active&&(m.active=!1),m&&e){this._entitiesToRemove.push(m);return}delete this._entityIndex[a],m&&(m.scene=null,xt(m,this.entities),this._world.queryManager.removeEntity(m),m.children.forEach(U=>{U.scene=null,this.removeEntity(U,e)}),m.childrenAdded$.clear(),m.childrenRemoved$.clear(),!((n=(i=this._world)===null||i===void 0?void 0:i.scene)===null||n===void 0)&&n.engine&&this._world.scene.engine.stats.currFrame.actors.killed++)}processEntityRemovals(){for(const t of this._entitiesToRemove)t.active||this.removeEntity(t,!1);this._entitiesToRemove.length=0}processComponentRemovals(){for(const t of this.entities)t.processComponentRemoval()}getById(t){return this._entityIndex[t]}getByName(t){return this.entities.filter(e=>e.name===t)}clear(){for(let t=this.entities.length-1;t>=0;t--)this.removeEntity(this.entities[t])}}class gs{constructor(t){if(this.requiredComponents=t,this.components=new Set,this.entities=[],this.entityAdded$=new ls,this.entityRemoved$=new ls,t.length===0)throw new Error("Cannot create query without components");for(const e of t)this.components.add(e);this.id=gs.createId(t)}static createId(t){return t.slice().map(e=>e.name).sort().join("-")}checkAndAdd(t){return!this.entities.includes(t)&&t.hasAll(Array.from(this.components))?(this.entities.push(t),this.entityAdded$.notifyAll(t),!0):!1}removeEntity(t){const e=this.entities.indexOf(t);e>-1&&(this.entities.splice(e,1),this.entityRemoved$.notifyAll(t))}getEntities(t){return t&&this.entities.sort(t),this.entities}}class bs{constructor(t){if(this.requiredTags=t,this.tags=new Set,this.entities=[],this.entityAdded$=new ls,this.entityRemoved$=new ls,t.length===0)throw new Error("Cannot create tag query without tags");for(const e of t)this.tags.add(e);this.id=bs.createId(t)}static createId(t){return t.slice().sort().join("-")}checkAndAdd(t){return!this.entities.includes(t)&&t.hasAllTags(Array.from(this.tags))?(this.entities.push(t),this.entityAdded$.notifyAll(t),!0):!1}removeEntity(t){const e=this.entities.indexOf(t);e>-1&&(this.entities.splice(e,1),this.entityRemoved$.notifyAll(t))}getEntities(t){return t&&this.entities.sort(t),this.entities}}class on{constructor(t){this._world=t,this._queries=new Map,this._addComponentHandlers=new Map,this._removeComponentHandlers=new Map,this._componentToQueriesIndex=new Map,this._tagQueries=new Map,this._addTagHandlers=new Map,this._removeTagHandlers=new Map,this._tagToQueriesIndex=new Map,this._createAddComponentHandler=e=>i=>{this.addComponent(e,i)},this._createRemoveComponentHandler=e=>i=>{this.removeComponent(e,i)},this._createAddTagHandler=e=>i=>{this.addTag(e,i)},this._createRemoveTagHandler=e=>i=>{this.removeTag(e,i)}}createQuery(t){const e=gs.createId(t);if(this._queries.has(e))return this._queries.get(e);const i=new gs(t);this._queries.set(i.id,i);for(const n of t){const a=this._componentToQueriesIndex.get(n);a?a.push(i):this._componentToQueriesIndex.set(n,[i])}for(const n of this._world.entities)this.addEntity(n);return i}createTagQuery(t){const e=bs.createId(t);if(this._tagQueries.has(e))return this._tagQueries.get(e);const i=new bs(t);this._tagQueries.set(i.id,i);for(const n of t){const a=this._tagToQueriesIndex.get(n);a?a.push(i):this._tagToQueriesIndex.set(n,[i])}for(const n of this._world.entities)this.addEntity(n);return i}addEntity(t){const e=this._addComponentHandlers.get(t),i=this._removeComponentHandlers.get(t),n=e??this._createAddComponentHandler(t),a=i??this._createRemoveComponentHandler(t);this._addComponentHandlers.set(t,n),this._removeComponentHandlers.set(t,a);const m=this._addTagHandlers.get(t),U=this._removeTagHandlers.get(t),mt=m??this._createAddTagHandler(t),Et=U??this._createRemoveTagHandler(t);this._addTagHandlers.set(t,mt),this._removeTagHandlers.set(t,Et);for(const St of this._queries.values())St.checkAndAdd(t);for(const St of this._tagQueries.values())St.checkAndAdd(t);t.componentAdded$.subscribe(n),t.componentRemoved$.subscribe(a),t.tagAdded$.subscribe(mt),t.tagRemoved$.subscribe(Et)}removeEntity(t){const e=this._addComponentHandlers.get(t),i=this._removeComponentHandlers.get(t);for(const m of this._queries.values())m.removeEntity(t);e&&t.componentAdded$.unsubscribe(e),i&&t.componentRemoved$.unsubscribe(i);const n=this._addTagHandlers.get(t),a=this._removeTagHandlers.get(t);for(const m of this._tagQueries.values())m.removeEntity(t);n&&t.tagAdded$.unsubscribe(n),a&&t.tagRemoved$.unsubscribe(a)}addComponent(t,e){var i;const n=(i=this._componentToQueriesIndex.get(e.constructor))!==null&&i!==void 0?i:[];for(const a of n)a.checkAndAdd(t)}removeComponent(t,e){var i;const n=(i=this._componentToQueriesIndex.get(e.constructor))!==null&&i!==void 0?i:[];for(const a of n)a.removeEntity(t)}addTag(t,e){var i;const n=(i=this._tagToQueriesIndex.get(e))!==null&&i!==void 0?i:[];for(const a of n)a.checkAndAdd(t)}removeTag(t,e){var i;const n=(i=this._tagToQueriesIndex.get(e))!==null&&i!==void 0?i:[];for(const a of n)a.removeEntity(t)}}function an(h){var t,e;return!!h?.prototype&&!!(!((e=(t=h?.prototype)===null||t===void 0?void 0:t.constructor)===null||e===void 0)&&e.name)}class _r{constructor(t){this._world=t,this.systems=[],this.initialized=!1}get(t){return this.systems.find(e=>e instanceof t)}addSystem(t){let e;t instanceof Wi?e=t:e=new t(this._world),this.systems.push(e),this.systems.sort((i,n)=>i.priority-n.priority),this.initialized&&e.initialize&&e.initialize(this._world,this._world.scene)}removeSystem(t){xt(t,this.systems)}initialize(){if(!this.initialized){this.initialized=!0;for(const t of this.systems)t.initialize&&t.initialize(this._world,this._world.scene)}}updateSystems(t,e,i){const n=this.systems.filter(a=>a.systemType===t);for(const a of n)a.preupdate&&a.preupdate(e,i);for(const a of n)a.update(i);for(const a of n)a.postupdate&&a.postupdate(e,i)}clear(){for(let t=this.systems.length-1;t>=0;t--)this.removeSystem(this.systems[t])}}class Ar{constructor(t){this.scene=t,this.queryManager=new on(this),this.entityManager=new cs(this),this.systemManager=new _r(this)}query(t){return this.queryManager.createQuery(t)}queryTags(t){return this.queryManager.createTagQuery(t)}update(t,e){t===Di.Update&&this.entityManager.updateEntities(this.scene,e),this.systemManager.updateSystems(t,this.scene,e),this.entityManager.findEntitiesForRemoval(),this.entityManager.processComponentRemovals(),this.entityManager.processEntityRemovals()}add(t){t instanceof js&&this.entityManager.addEntity(t),(t instanceof Wi||an(t))&&this.systemManager.addSystem(t)}get(t){return this.systemManager.get(t)}remove(t,e=!0){t instanceof js&&this.entityManager.removeEntity(t,e),t instanceof Wi&&this.systemManager.removeSystem(t)}get entities(){return this.entityManager.entities}clearEntities(){this.entityManager.clear()}clearSystems(){this.systemManager.clear()}}class un{static integrate(t,e,i,n){const a=n/1e3;e.vel.addEqual(i.scale(a,un._ACC)),t.pos.add(e.vel.scale(a,un._VEL),un._POS).addEqual(i.scale(.5*a*a,un._VEL_ACC)),e.angularVelocity+=e.torque*(1/e.inertia)*a;const m=t.rotation+e.angularVelocity*a;t.scale.add(e.scaleFactor.scale(a,this._SCALE_FACTOR),un._SCALE),t.get().setTransform(un._POS,m,un._SCALE)}}un._POS=new u(0,0),un._SCALE=new u(1,1),un._ACC=new u(0,0),un._VEL=new u(0,0),un._VEL_ACC=new u(0,0),un._SCALE_FACTOR=new u(0,0);class Vo extends Wi{constructor(t,e){super(),this.world=t,this.physics=e,this.systemType=Di.Update,this.priority=ui.Higher,this._physicsConfigDirty=!1,e.$configUpdate.subscribe(()=>this._physicsConfigDirty=!0),this.query=this.world.query([fi,us])}update(t){let e,i;const n=this.query.entities;for(let a=0;a<n.length;a++){e=n[a].get(fi),i=n[a].get(us);const m=n[a].get(Hi);if(this._physicsConfigDirty&&m&&m.updatePhysicsConfig(this.physics.config.bodies),m?.sleeping)continue;const U=i.acc.clone();m?.collisionType===je.Active&&m?.useGravity&&U.addEqual(this.physics.config.gravity),m?.captureOldTransform(),un.integrate(e,i,U,t)}this._physicsConfigDirty=!1}}class Qo{constructor(t){this.config=t,this.directionMap=new Map,this.distanceMap=new Map}solve(t){this.preSolve(t),t=t.filter(i=>!i.isCanceled());let e;switch(this.config.contactSolveBias){case mn.HorizontalFirst:{e=lr;break}case mn.VerticalFirst:{e=Jn;break}default:e=Un}t.sort((i,n)=>{const a=this.directionMap.get(i.id),m=this.directionMap.get(n.id),U=this.distanceMap.get(i.id),mt=this.distanceMap.get(n.id);return e[a]-e[m]||U-mt});for(const i of t)this.solvePosition(i),this.solveVelocity(i);return this.postSolve(t),t}preSolve(t){for(const i of t){if(Math.abs(i.mtv.x)<1e-4&&Math.abs(i.mtv.y)<1e-4){i.cancel();continue}const n=_t.fromDirection(i.mtv),a=i.mtv.negate(),m=i.colliderA.worldPos.squareDistance(i.colliderB.worldPos);this.distanceMap.set(i.id,m),this.directionMap.set(i.id,n===_t.Left||n===_t.Right?"horizontal":"vertical"),i.colliderA.events.emit("precollision",new _i(i.colliderA,i.colliderB,n,a,i)),i.colliderB.events.emit("precollision",new _i(i.colliderB,i.colliderA,_t.getOpposite(n),a.negate(),i))}}postSolve(t){var e,i;for(const n of t){if(n.isCanceled())continue;const a=n.colliderA,m=n.colliderB,U=(e=a.owner)===null||e===void 0?void 0:e.get(Hi),mt=(i=m.owner)===null||i===void 0?void 0:i.get(Hi);if(U&&mt&&(U.collisionType===je.Passive||mt.collisionType===je.Passive))continue;const Et=_t.fromDirection(n.mtv),St=n.mtv.negate();n.colliderA.events.emit("postcollision",new bi(n.colliderA,n.colliderB,Et,St,n)),n.colliderB.events.emit("postcollision",new bi(n.colliderB,n.colliderA,_t.getOpposite(Et),St.negate(),n))}}solvePosition(t){var e,i;if(!t.colliderA.bounds.overlaps(t.colliderB.bounds,1e-4)){t.cancel();return}if(Math.abs(t.mtv.x)<1e-4&&Math.abs(t.mtv.y)<1e-4){t.cancel();return}let a=t.mtv;const m=t.colliderA,U=t.colliderB,mt=(e=m.owner)===null||e===void 0?void 0:e.get(Hi),Et=(i=U.owner)===null||i===void 0?void 0:i.get(Hi);if(mt&&Et){if(mt.collisionType===je.Passive||Et.collisionType===je.Passive)return;mt.collisionType===je.Active&&Et.collisionType===je.Active&&(a=a.scale(.5)),mt.collisionType===je.Active&&(mt.globalPos.x-=a.x,mt.globalPos.y-=a.y,m.update(mt.transform.get())),Et.collisionType===je.Active&&(Et.globalPos.x+=a.x,Et.globalPos.y+=a.y,U.update(Et.transform.get()))}}solveVelocity(t){var e,i;if(t.isCanceled())return;const n=t.colliderA,a=t.colliderB,m=(e=n.owner)===null||e===void 0?void 0:e.get(Hi),U=(i=a.owner)===null||i===void 0?void 0:i.get(Hi);if(m&&U){if(m.collisionType===je.Passive||U.collisionType===je.Passive)return;const mt=t.normal,Et=mt.negate();if(m.collisionType===je.Active&&m.vel.normalize().dot(Et)<0){const St=mt.scale(mt.dot(m.vel.negate()));m.vel=m.vel.add(St)}if(U.collisionType===je.Active&&U.vel.normalize().dot(mt)<0){const St=Et.scale(Et.dot(U.vel.negate()));U.vel=U.vel.add(St)}}}}class Jo{constructor(t,e,i){this.point=t,this.local=e,this.contact=i,this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.aToContact=new u(0,0),this.bToContact=new u(0,0),this.originalVelocityAndRestitution=0,this.update()}update(){var t,e;const i=(t=this.contact.colliderA.owner)===null||t===void 0?void 0:t.get(Hi),n=(e=this.contact.colliderB.owner)===null||e===void 0?void 0:e.get(Hi);if(i&&n){const a=this.contact.normal,m=this.contact.tangent;this.aToContact=this.point.sub(i.globalPos),this.bToContact=this.point.sub(n.globalPos);const U=this.aToContact.cross(a),mt=this.bToContact.cross(a);this.normalMass=i.inverseMass+n.inverseMass+i.inverseInertia*U*U+n.inverseInertia*mt*mt;const Et=this.aToContact.cross(m),St=this.bToContact.cross(m);this.tangentMass=i.inverseMass+n.inverseMass+i.inverseInertia*Et*Et+n.inverseInertia*St*St}return this}getRelativeVelocity(){var t,e;const i=(t=this.contact.colliderA.owner)===null||t===void 0?void 0:t.get(Hi),n=(e=this.contact.colliderB.owner)===null||e===void 0?void 0:e.get(Hi);if(i&&n){const a=i.vel.add(u.cross(i.angularVelocity,this.aToContact));return n.vel.add(u.cross(n.angularVelocity,this.bToContact)).sub(a)}return u.Zero}}class Mo{constructor(t){this.config=t,this.lastFrameContacts=new Map,this.idToContactConstraint=new Map}getContactConstraints(t){var e;return(e=this.idToContactConstraint.get(t))!==null&&e!==void 0?e:[]}solve(t){return this.preSolve(t),t=t.filter(e=>!e.isCanceled()),this.solveVelocity(t),this.solvePosition(t),this.postSolve(t),t}preSolve(t){var e,i,n;for(const U of t){if(Math.abs(U.mtv.x)<1e-4&&Math.abs(U.mtv.y)<1e-4){U.cancel();continue}const mt=_t.fromDirection(U.mtv);U.colliderA.events.emit("precollision",new _i(U.colliderA,U.colliderB,mt,U.mtv,U)),U.colliderA.events.emit("beforecollisionresolve",new Bn(U.colliderA,U.colliderB,mt,U.mtv,U)),U.colliderB.events.emit("precollision",new _i(U.colliderB,U.colliderA,_t.getOpposite(mt),U.mtv.negate(),U)),U.colliderB.events.emit("beforecollisionresolve",new Bn(U.colliderB,U.colliderA,_t.getOpposite(mt),U.mtv.negate(),U)),U.matchAwake()}const m=Array.from(this.idToContactConstraint.keys());for(const U of t){const mt=m.indexOf(U.id);mt>-1&&m.splice(mt,1);const Et=(e=this.idToContactConstraint.get(U.id))!==null&&e!==void 0?e:[];let St=0;const Lt=U.colliderA.owner.get(Hi),Kt=U.colliderB.owner.get(Hi);if(Lt&&Kt)for(const ne of U.points){const ae=U.normal,ke=U.tangent,ze=ne.sub(Lt.globalPos),ye=ne.sub(Kt.globalPos),we=ze.cross(ae),He=ye.cross(ae),Pe=Lt.inverseMass+Kt.inverseMass+Lt.inverseInertia*we*we+Kt.inverseInertia*He*He,vi=ze.cross(ke),Ji=ye.cross(ke),Xe=Lt.inverseMass+Kt.inverseMass+Lt.inverseInertia*vi*vi+Kt.inverseInertia*Ji*Ji;Et[St]&&((n=(i=Et[St])===null||i===void 0?void 0:i.point)===null||n===void 0?void 0:n.squareDistance(ne))<4?(Et[St].point=ne,Et[St].local=U.localPoints[St]):Et[St]=new Jo(ne,U.localPoints[St],U),Et[St].aToContact=ze,Et[St].bToContact=ye,Et[St].normalMass=1/Pe,Et[St].tangentMass=1/Xe;const $i=Lt.bounciness>Kt.bounciness?Lt.bounciness:Kt.bounciness,Is=U.normal.dot(Et[St].getRelativeVelocity());Et[St].originalVelocityAndRestitution=0,Is<-.1&&(Et[St].originalVelocityAndRestitution=-$i*Is),St++}this.idToContactConstraint.set(U.id,Et)}for(const U of m)this.idToContactConstraint.delete(U);if(this.config.warmStart)this.warmStart(t);else for(const U of t){const mt=this.getContactConstraints(U.id);for(const Et of mt)Et.normalImpulse=0,Et.tangentImpulse=0}}postSolve(t){for(const e of t){const i=e.colliderA.owner.get(Hi),n=e.colliderB.owner.get(Hi);if(i&&n){if(i.collisionType===je.Passive||n.collisionType===je.Passive)continue;i.updateMotion(),n.updateMotion()}const a=_t.fromDirection(e.mtv);e.colliderA.events.emit("postcollision",new bi(e.colliderA,e.colliderB,a,e.mtv,e)),e.colliderA.events.emit("aftercollisionresolve",new Vn(e.colliderA,e.colliderB,a,e.mtv,e)),e.colliderB.events.emit("postcollision",new bi(e.colliderB,e.colliderA,_t.getOpposite(a),e.mtv.negate(),e)),e.colliderB.events.emit("aftercollisionresolve",new Vn(e.colliderB,e.colliderA,_t.getOpposite(a),e.mtv.negate(),e))}this.lastFrameContacts.clear();for(const e of t)this.lastFrameContacts.set(e.id,e)}warmStart(t){var e,i,n;for(const a of t){const m=(e=a.colliderA.owner)===null||e===void 0?void 0:e.get(Hi),U=(i=a.colliderB.owner)===null||i===void 0?void 0:i.get(Hi);if(m&&U){const mt=(n=this.idToContactConstraint.get(a.id))!==null&&n!==void 0?n:[];for(const Et of mt)if(this.config.warmStart){const St=a.normal.scale(Et.normalImpulse),Lt=a.tangent.scale(Et.tangentImpulse),Kt=St.add(Lt);m.applyImpulse(Et.point,Kt.negate()),U.applyImpulse(Et.point,Kt)}else Et.normalImpulse=0,Et.tangentImpulse=0}}}solvePosition(t){var e,i,n;for(let a=0;a<this.config.positionIterations;a++)for(const m of t){const U=(e=m.colliderA.owner)===null||e===void 0?void 0:e.get(Hi),mt=(i=m.colliderB.owner)===null||i===void 0?void 0:i.get(Hi);if(U&&mt){if(U.collisionType===je.Passive||mt.collisionType===je.Passive)continue;const Et=(n=this.idToContactConstraint.get(m.id))!==null&&n!==void 0?n:[];for(const St of Et){const Lt=m.normal,Kt=En.FindContactSeparation(m,St.local),ne=this.config.steeringFactor,ae=-5,ke=this.config.slop,ze=q(ne*(Kt+ke),ae,0),ye=Lt.scale(-ze*St.normalMass);if(U.collisionType===je.Active){const we=ye.negate().scale(U.inverseMass);U.limitDegreeOfFreedom.includes(Ws.X)&&(we.x=0),U.limitDegreeOfFreedom.includes(Ws.Y)&&(we.y=0),U.globalPos=U.globalPos.add(we),U.limitDegreeOfFreedom.includes(Ws.Rotation)||(U.rotation-=St.aToContact.cross(ye)*U.inverseInertia)}if(mt.collisionType===je.Active){const we=ye.scale(mt.inverseMass);mt.limitDegreeOfFreedom.includes(Ws.X)&&(we.x=0),mt.limitDegreeOfFreedom.includes(Ws.Y)&&(we.y=0),mt.globalPos=mt.globalPos.add(we),mt.limitDegreeOfFreedom.includes(Ws.Rotation)||(mt.rotation+=St.bToContact.cross(ye)*mt.inverseInertia)}}}}}solveVelocity(t){var e,i,n;for(let a=0;a<this.config.velocityIterations;a++)for(const m of t){const U=(e=m.colliderA.owner)===null||e===void 0?void 0:e.get(Hi),mt=(i=m.colliderB.owner)===null||i===void 0?void 0:i.get(Hi);if(U&&mt){if(U.collisionType===je.Passive||mt.collisionType===je.Passive)continue;const Et=Math.min(U.friction,mt.friction),St=(n=this.idToContactConstraint.get(m.id))!==null&&n!==void 0?n:[];for(const Lt of St){let ae=-Lt.getRelativeVelocity().dot(m.tangent)*Lt.tangentMass;const ke=Et*Lt.normalImpulse,ze=q(Lt.tangentImpulse+ae,-ke,ke);ae=ze-Lt.tangentImpulse,Lt.tangentImpulse=ze;const ye=m.tangent.scale(ae);U.applyImpulse(Lt.point,ye.negate()),mt.applyImpulse(Lt.point,ye)}for(const Lt of St){const ne=Lt.getRelativeVelocity().dot(m.normal);let ae=-Lt.normalMass*(ne-Lt.originalVelocityAndRestitution);const ke=Math.max(Lt.normalImpulse+ae,0);ae=ke-Lt.normalImpulse,Lt.normalImpulse=ke;const ze=m.normal.scale(ae);U.applyImpulse(Lt.point,ze.negate()),mt.applyImpulse(Lt.point,ze)}}}}}class Lo extends Wi{get _processor(){return this._physics.collisionProcessor}constructor(t,e){super(),this._physics=e,this.systemType=Di.Update,this.priority=ui.Higher,this._configDirty=!1,this._lastFrameContacts=new Map,this._currentFrameContacts=new Map,this._arcadeSolver=new Qo(e.config.arcade),this._realisticSolver=new Mo(e.config.realistic),this._physics.$configUpdate.subscribe(()=>this._configDirty=!0),this._trackCollider=i=>this._processor.track(i),this._untrackCollider=i=>this._processor.untrack(i),this.query=t.query([fi,us,Cs]),this.query.entityAdded$.subscribe(i=>{const n=i.get(Cs);n.$colliderAdded.subscribe(this._trackCollider),n.$colliderRemoved.subscribe(this._untrackCollider);const a=n.get();a&&this._processor.track(a)}),this.query.entityRemoved$.subscribe(i=>{const n=i.get(Cs),a=n.get();n&&a&&this._processor.untrack(a)})}initialize(t,e){this._engine=e.engine}update(t){var e,i,n,a;if(!this._physics.config.enabled)return;let m=[];for(const St of this.query.entities){const Lt=St.get(Cs),Kt=Lt?.get();if(Lt&&(!((e=Lt.owner)===null||e===void 0)&&e.active)&&Kt)if(Lt.update(),Kt instanceof Ss){const ne=Kt.getColliders();Kt.compositeStrategy||(Kt.compositeStrategy=this._physics.config.colliders.compositeStrategy),m=m.concat(ne)}else m.push(Kt)}this._processor.update(m);const U=this._processor.broadphase(m,t);this._currentFrameContacts.clear();let mt=this._processor.narrowphase(U,(a=(n=(i=this._engine)===null||i===void 0?void 0:i.debug)===null||n===void 0?void 0:n.stats)===null||a===void 0?void 0:a.currFrame);mt=this.getSolver().solve(mt);for(const St of mt){if(St.isCanceled())continue;const Lt=St.id.indexOf("|");if(Lt>0){const Kt=St.id.substring(Lt+1);this._currentFrameContacts.set(Kt,St)}else this._currentFrameContacts.set(St.id,St)}this.runContactStartEnd(),this._lastFrameContacts.clear(),this._lastFrameContacts=new Map(this._currentFrameContacts);for(const St of this.query.entities){const Lt=St.get(Cs);Lt&&Lt.processColliderRemoval()}}getSolver(){return this._configDirty&&(this._configDirty=!1,this._arcadeSolver=new Qo(this._physics.config.arcade),this._realisticSolver=new Mo(this._physics.config.realistic)),this._physics.config.solver===sn.Realistic?this._realisticSolver:this._arcadeSolver}debug(t){this._processor.debug(t)}runContactStartEnd(){for(const[t,e]of this._currentFrameContacts)if(!this._lastFrameContacts.has(t)){const i=e.colliderA,n=e.colliderB,a=_t.fromDirection(e.mtv),m=_t.getOpposite(a);i.events.emit("collisionstart",new jn(i,n,a,e)),i.events.emit("contactstart",new ds(i,n,a,e)),n.events.emit("collisionstart",new jn(n,i,m,e)),n.events.emit("contactstart",new ds(n,i,m,e))}for(const[t,e]of this._lastFrameContacts)if(!this._currentFrameContacts.has(t)){const i=e.colliderA,n=e.colliderB,a=_t.fromDirection(e.mtv),m=_t.getOpposite(a);i.events.emit("collisionend",new Fs(i,n,a,e)),i.events.emit("contactend",new Hs(i,n,a,e)),n.events.emit("collisionend",new Fs(n,i,m,e)),n.events.emit("contactend",new Hs(n,i,m,e))}}}function $o(h){return class extends h{assign(t){for(const e in t)typeof this[e]!="function"&&(this[e]=t[e])}constructor(...t){super(...t),t.filter(function(i){return i!==void 0}).length===1&&t[0]&&typeof t[0]=="object"&&!(t[0]instanceof Array)&&this.assign(t[0])}}}var Fr;(function(h){h[h.Circle=0]="Circle",h[h.Rectangle=1]="Rectangle"})(Fr||(Fr={}));class Sa extends js{constructor(t,e,i,n,a,m,U,mt,Et,St,Lt){super(),this.position=new u(0,0),this.velocity=new u(0,0),this.acceleration=new u(0,0),this.particleRotationalVelocity=0,this.currentRotation=0,this.focus=null,this.focusAccel=0,this.opacity=1,this.beginColor=X.White,this.endColor=X.White,this.life=300,this.fadeFlag=!1,this._rRate=1,this._gRate=1,this._bRate=1,this._aRate=0,this._currentColor=X.White,this.emitter=null,this.particleSize=5,this.particleSprite=null,this.sizeRate=0,this.elapsedMultiplier=0,this.visible=!0,this.isOffscreen=!1;let Kt=t;if(Kt&&!(t instanceof Xo)){const ne=t;Kt=ne.emitter,e=ne.life,i=ne.opacity,a=ne.endColor,n=ne.beginColor,m=ne.position,U=ne.velocity,mt=ne.acceleration,Et=ne.startSize,St=ne.endSize,Lt=ne.particleSprite}if(this.emitter=Kt,this.life=e||this.life,this.opacity=i||this.opacity,this.endColor=a||this.endColor.clone(),this.beginColor=n||this.beginColor.clone(),this._currentColor=this.beginColor.clone(),this.particleSprite=Lt,this.emitter.particleTransform===Nr.Global){const ne=this.emitter.transform.globalPos;this.position=(m||this.position).add(ne),this.velocity=(U||this.velocity).rotate(this.emitter.transform.globalRotation)}else this.velocity=U||this.velocity,this.position=m||this.position;this.acceleration=mt||this.acceleration,this._rRate=(this.endColor.r-this.beginColor.r)/this.life,this._gRate=(this.endColor.g-this.beginColor.g)/this.life,this._bRate=(this.endColor.b-this.beginColor.b)/this.life,this._aRate=this.opacity/this.life,this.startSize=Et||0,this.endSize=St||0,this.endSize>0&&this.startSize>0&&(this.sizeRate=(this.endSize-this.startSize)/this.life,this.particleSize=this.startSize),this.addComponent(this.transform=new fi),this.addComponent(this.graphics=new Ms),this.transform.pos=this.position,this.transform.rotation=this.currentRotation,this.transform.scale=O(1,1),this.transform.z=this.emitter.z,this.particleSprite?(this.graphics.opacity=this.opacity,this.graphics.use(this.particleSprite)):(this.graphics.localBounds=ut.fromDimension(this.particleSize,this.particleSize,u.Half),this.graphics.onPostDraw=ne=>{ne.save(),this.graphics.opacity=this.opacity;const ae=this._currentColor.clone();ae.a=1,ne.debug.drawPoint(O(0,0),{color:ae,size:this.particleSize}),ne.restore()})}kill(){this.emitter.removeParticle(this)}update(t,e){if(this.life=this.life-e,this.elapsedMultiplier=this.elapsedMultiplier+e,this.life<0&&this.kill(),this.fadeFlag&&(this.opacity=q(this._aRate*this.life,1e-4,1)),this.startSize>0&&this.endSize>0&&(this.particleSize=q(this.sizeRate*e+this.particleSize,Math.min(this.startSize,this.endSize),Math.max(this.startSize,this.endSize))),this._currentColor.r=q(this._currentColor.r+this._rRate*e,0,255),this._currentColor.g=q(this._currentColor.g+this._gRate*e,0,255),this._currentColor.b=q(this._currentColor.b+this._bRate*e,0,255),this._currentColor.a=q(this.opacity,1e-4,1),this.focus){const i=this.focus.sub(this.position).normalize().scale(this.focusAccel).scale(e/1e3);this.velocity=this.velocity.add(i)}else this.velocity=this.velocity.add(this.acceleration.scale(e/1e3));this.position=this.position.add(this.velocity.scale(e/1e3)),this.particleRotationalVelocity&&(this.currentRotation=(this.currentRotation+this.particleRotationalVelocity*e/1e3)%(2*Math.PI)),this.transform.pos=this.position,this.transform.rotation=this.currentRotation,this.transform.scale=O(1,1),this.graphics.opacity=this.opacity}}class wo extends $o(Sa){constructor(t,e,i,n,a,m,U,mt,Et,St,Lt){super(t,e,i,n,a,m,U,mt,Et,St,Lt)}}var Nr;(function(h){h.Global="global",h.Local="local"})(Nr||(Nr={}));class Xo extends Xs{get opacity(){return this.graphics.opacity}set opacity(t){this.graphics.opacity=t}get particleSprite(){return this._sprite}set particleSprite(t){t&&(this._sprite=t)}constructor(t){var e,i;super({width:(e=t.width)!==null&&e!==void 0?e:0,height:(i=t.height)!==null&&i!==void 0?i:0}),this._particlesToEmit=0,this.numParticles=0,this.isEmitting=!0,this.particles=[],this.deadParticles=[],this.minVel=0,this.maxVel=0,this.acceleration=new u(0,0),this.minAngle=0,this.maxAngle=0,this.emitRate=1,this.particleLife=2e3,this.fadeFlag=!1,this.focus=null,this.focusAccel=null,this.startSize=null,this.endSize=null,this.minSize=5,this.maxSize=5,this.beginColor=X.White,this.endColor=X.White,this._sprite=null,this.emitterType=Fr.Rectangle,this.radius=0,this.particleRotationalVelocity=0,this.randomRotation=!1,this.particleTransform=Nr.Global;const{x:n,y:a,z:m,pos:U,isEmitting:mt,minVel:Et,maxVel:St,acceleration:Lt,minAngle:Kt,maxAngle:ne,emitRate:ae,particleLife:ke,opacity:ze,fadeFlag:ye,focus:we,focusAccel:He,startSize:Pe,endSize:vi,minSize:Ji,maxSize:Xe,beginColor:$i,endColor:Is,particleSprite:qs,emitterType:bn,radius:yn,particleRotationalVelocity:wn,particleTransform:fn,randomRotation:Ks,random:tn}={...t};this.pos=U??O(n??0,a??0),this.z=m??0,this.isEmitting=mt??this.isEmitting,this.minVel=Et??this.minVel,this.maxVel=St??this.maxVel,this.acceleration=Lt??this.acceleration,this.minAngle=Kt??this.minAngle,this.maxAngle=ne??this.maxAngle,this.emitRate=ae??this.emitRate,this.particleLife=ke??this.particleLife,this.opacity=ze??this.opacity,this.fadeFlag=ye??this.fadeFlag,this.focus=we??this.focus,this.focusAccel=He??this.focusAccel,this.startSize=Pe??this.startSize,this.endSize=vi??this.endSize,this.minSize=Ji??this.minSize,this.maxSize=Xe??this.maxSize,this.beginColor=$i??this.beginColor,this.endColor=Is??this.endColor,this.particleSprite=qs??this.particleSprite,this.emitterType=bn??this.emitterType,this.radius=yn??this.radius,this.particleRotationalVelocity=wn??this.particleRotationalVelocity,this.randomRotation=Ks??this.randomRotation,this.particleTransform=fn??this.particleTransform,this.body.collisionType=je.PreventCollision,this.random=tn??new T}removeParticle(t){this.deadParticles.push(t)}emitParticles(t){var e;for(let i=0;i<t;i++){const n=this._createParticle();this.particles.push(n),!((e=this===null||this===void 0?void 0:this.scene)===null||e===void 0)&&e.world&&(this.particleTransform===Nr.Global?this.scene.world.add(n):this.addChild(n))}}clearParticles(){this.particles.length=0}_createParticle(){let t=0,e=0;const i=Y(this.minAngle,this.maxAngle,this.random),n=Y(this.minVel,this.maxVel,this.random),a=this.startSize||Y(this.minSize,this.maxSize,this.random),m=n*Math.cos(i),U=n*Math.sin(i);if(this.emitterType===Fr.Rectangle)t=Y(0,this.width,this.random),e=Y(0,this.height,this.random);else if(this.emitterType===Fr.Circle){const Et=Y(0,this.radius,this.random);t=Et*Math.cos(i),e=Et*Math.sin(i)}const mt=new wo(this,this.particleLife,this.opacity,this.beginColor,this.endColor,new u(t,e),new u(m,U),this.acceleration,this.startSize,this.endSize,this.particleSprite);return mt.fadeFlag=this.fadeFlag,mt.particleSize=a,mt.particleRotationalVelocity=this.particleRotationalVelocity,this.randomRotation&&(mt.currentRotation=Y(0,Math.PI*2,this.random)),this.focus&&(mt.focus=this.focus.add(new u(this.pos.x,this.pos.y)),mt.focusAccel=this.focusAccel),mt}update(t,e){var i;super.update(t,e),this.isEmitting&&(this._particlesToEmit+=this.emitRate*(e/1e3),this._particlesToEmit>1&&(this.emitParticles(Math.floor(this._particlesToEmit)),this._particlesToEmit=this._particlesToEmit-Math.floor(this._particlesToEmit)));for(let n=0;n<this.deadParticles.length;n++)xt(this.deadParticles[n],this.particles),!((i=this===null||this===void 0?void 0:this.scene)===null||i===void 0)&&i.world&&this.scene.world.remove(this.deadParticles[n],!1);this.deadParticles.length=0}}function Ta(h,t,e,i){if(h.parent!==t.parent){const St=h.clone(),Lt=h.globalPos.clone(),Kt=h.globalScale.clone(),ne=h.globalRotation;St.parent=t.parent,St.globalPos=Lt,St.globalScale=Kt,St.globalRotation=ne,h=St}let n=t.pos,a=t.scale,m=t.rotation;n=t.pos.scale(e).add(h.pos.scale(1-e)),a=t.scale.scale(e).add(h.scale.scale(1-e));const U=(1-e)*Math.cos(h.rotation)+e*Math.cos(t.rotation),mt=(1-e)*Math.sin(h.rotation)+e*Math.sin(t.rotation);m=Math.atan2(mt,U);const Et=i??new os;return Et.setTransform(n,m,a),Et}class Ko extends Wi{get sortedTransforms(){return this._sortedTransforms}constructor(t){super(),this.world=t,this.systemType=Di.Draw,this.priority=ui.Average,this._token=0,this._sortedTransforms=[],this._zHasChanged=!1,this._zIndexUpdate=()=>{this._zHasChanged=!0},this._targetInterpolationTransform=new os,this.query=this.world.query([fi,Ms]),this.query.entityAdded$.subscribe(e=>{const i=e.get(fi);this._sortedTransforms.push(i),i.zIndexChanged$.subscribe(this._zIndexUpdate),this._zHasChanged=!0}),this.query.entityRemoved$.subscribe(e=>{const i=e.get(fi);i.zIndexChanged$.unsubscribe(this._zIndexUpdate);const n=this._sortedTransforms.indexOf(i);n>-1&&this._sortedTransforms.splice(n,1)})}initialize(t,e){this._camera=e.camera,this._engine=e.engine}preupdate(){this._graphicsContext=this._engine.graphicsContext,this._zHasChanged&&(this._sortedTransforms.sort((t,e)=>t.z-e.z),this._zHasChanged=!1)}update(t){this._token++;let e;ps.checkAndClearCache(),this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext);for(const i of this._sortedTransforms){const n=i.owner;if(n.hasTag("ex.offscreen")||(e=n.get(Ms),!e.visible))continue;e.onPreTransformDraw&&e.onPreTransformDraw(this._graphicsContext,t),n.events.emit("pretransformdraw",new Vs(this._graphicsContext,t,n)),i.coordPlane===mi.Screen&&this._graphicsContext.restore(),this._graphicsContext.save(),i.coordPlane===mi.Screen&&this._graphicsContext.translate(this._engine.screen.contentArea.left,this._engine.screen.contentArea.top),e.update(t,this._token);const a=n.get(gr);if(a){const U=u.One.sub(a.parallaxFactor),mt=this._camera.drawPos.scale(U);this._graphicsContext.translate(mt.x,mt.y)}this._applyTransform(n),e.material&&(this._graphicsContext.material=e.material),e.onPreDraw&&e.onPreDraw(this._graphicsContext,t),n.events.emit("predraw",new vs(this._graphicsContext,t,n));const m=n instanceof wo?n.opacity:1;this._graphicsContext.opacity*=e.opacity*m,this._drawGraphicsComponent(e,i),e.onPostDraw&&e.onPostDraw(this._graphicsContext,t),n.events.emit("postdraw",new Bs(this._graphicsContext,t,n)),this._graphicsContext.restore(),i.coordPlane===mi.Screen&&(this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext)),e.onPostTransformDraw&&e.onPostTransformDraw(this._graphicsContext,t),n.events.emit("posttransformdraw",new xn(this._graphicsContext,t,n))}this._graphicsContext.restore()}_drawGraphicsComponent(t,e){var i,n;if(t.visible){const a=t.flipHorizontal,m=t.flipVertical,U=t.current,mt=(i=t.currentOptions)!==null&&i!==void 0?i:{};if(U){let Et=t.anchor,St=t.offset,Lt=1,Kt=1;mt?.anchor&&(Et=mt.anchor),mt?.offset&&(St=mt.offset);const ne=e.globalScale;Lt*=U.scale.x*ne.x,Kt*=U.scale.y*ne.y;const ae=-U.width*Et.x+St.x*Lt,ke=-U.height*Et.y+St.y*Kt,ze=U.flipHorizontal,ye=U.flipVertical;if((a||m)&&(U.flipHorizontal=a?!ze:ze,U.flipVertical=m?!ye:ye),U?.draw(this._graphicsContext,ae,ke),(a||m)&&(U.flipHorizontal=ze,U.flipVertical=ye),!((n=this._engine)===null||n===void 0)&&n.isDebug&&this._engine.debug.graphics.showBounds){const we=O(ae,ke);if(U instanceof hn)for(const He of U.members){let Pe,vi=u.Zero;He instanceof It?Pe=He:(Pe=He.graphic,vi=He.offset),U.useAnchor?Pe?.localBounds.translate(we.add(vi)).draw(this._graphicsContext,this._engine.debug.graphics.boundsColor):Pe?.localBounds.translate(vi).draw(this._graphicsContext,this._engine.debug.graphics.boundsColor)}else U?.localBounds.translate(we).draw(this._graphicsContext,this._engine.debug.graphics.boundsColor)}}}}_applyTransform(t){const e=t.getAncestors();for(const i of e){const n=i?.get(fi),a=i?.get(Hi);let m=n.get();if(a&&this._engine.fixedUpdateFps&&a.__oldTransformCaptured&&a.enableFixedUpdateInterpolate){const U=this._engine.currentFrameLagMs/(1e3/this._engine.fixedUpdateFps);m=Ta(a.oldTransform,n.get(),U,this._targetInterpolationTransform)}n&&(this._graphicsContext.z=n.z,this._graphicsContext.translate(m.pos.x,m.pos.y),this._graphicsContext.scale(m.scale.x,m.scale.y),this._graphicsContext.rotate(m.rotation))}}}class ta extends Wi{constructor(t){super(),this.world=t,this.systemType=Di.Draw,this.priority=ui.Lowest,this.query=this.world.query([fi])}initialize(t,e){this._graphicsContext=e.engine.graphicsContext,this._camera=e.camera,this._engine=e.engine,this._collisionSystem=t.systemManager.get(Lo)}update(){var t;if(!this._engine.isDebug)return;const e=this._engine.debug.filter;let i,n;const a=this._engine.debug.entity;let m;const U=this._engine.debug.transform;let mt;const Et=this._engine.debug.motion;let St;const Lt=this._engine.debug.collider,Kt=this._engine.debug.physics;let ne;const ae=this._engine.debug.graphics;let ke,ze;const ye=this._engine.debug.body,we=this._engine.debug.camera;for(const He of this.query.entities){if(He.hasTag("offscreen")||He instanceof wo||e.useFilter&&(!(e.ids.length===0||e.ids.includes(He.id))||!(e.nameQuery===""||He.name.includes(e.nameQuery))))continue;let Pe=u.Zero;const vi=O(0,16);if(i=He.id,n=He.name,m=He.get(fi),this._pushCameraTransform(m),this._graphicsContext.save(),m.coordPlane===mi.Screen&&this._graphicsContext.translate(this._engine.screen.contentArea.left,this._engine.screen.contentArea.top),this._graphicsContext.z=U.debugZIndex,this._applyTransform(He),m&&((U.showAll||U.showPosition)&&this._graphicsContext.debug.drawPoint(u.Zero,{size:4,color:U.positionColor}),(U.showAll||U.showPositionLabel)&&(this._graphicsContext.debug.drawText(`pos${m.pos.toString(2)}`,Pe),Pe=Pe.add(vi)),(U.showAll||U.showZIndex)&&(this._graphicsContext.debug.drawText(`z(${m.z.toFixed(1)})`,Pe),Pe=Pe.add(vi)),(a.showAll||a.showId)&&(this._graphicsContext.debug.drawText(`id(${i}) ${He.parent?"child of id("+((t=He.parent)===null||t===void 0?void 0:t.id)+")":""}`,Pe),Pe=Pe.add(vi)),(a.showAll||a.showName)&&(this._graphicsContext.debug.drawText(`name(${n})`,Pe),Pe=Pe.add(vi)),(U.showAll||U.showRotation)&&(this._graphicsContext.drawLine(u.Zero,u.fromAngle(m.rotation).scale(50).add(u.Zero),U.rotationColor,2),this._graphicsContext.debug.drawText(`rot deg(${Z(m.rotation).toFixed(2)})`,Pe),Pe=Pe.add(vi)),(U.showAll||U.showScale)&&this._graphicsContext.drawLine(u.Zero,m.scale.add(u.Zero),U.scaleColor,2)),ne=He.get(Ms),ne&&(ae.showAll||ae.showBounds)&&ne.localBounds.draw(this._graphicsContext,ae.boundsColor),ke=He.get(qn),ke&&(ke.useTransform||this._graphicsContext.restore(),ke.draw(this._graphicsContext,this._engine.debug),ke.useTransform||(this._graphicsContext.save(),this._applyTransform(He))),ze=He.get(Hi),ze&&((ye.showAll||ye.showCollisionGroup)&&(this._graphicsContext.debug.drawText(`collision group(${ze.group.name})`,Pe),Pe=Pe.add(vi)),(ye.showAll||ye.showCollisionType)&&(this._graphicsContext.debug.drawText(`collision type(${ze.collisionType})`,Pe),Pe=Pe.add(vi)),(ye.showAll||ye.showMass)&&(this._graphicsContext.debug.drawText(`mass(${ze.mass})`,Pe),Pe=Pe.add(vi)),(ye.showAll||ye.showMotion)&&(this._graphicsContext.debug.drawText(`motion(${ze.sleepMotion})`,Pe),Pe=Pe.add(vi)),(ye.showAll||ye.showSleeping)&&(this._graphicsContext.debug.drawText(`sleeping(${ze.canSleep?ze.sleeping:"cant sleep"})`,Pe),Pe=Pe.add(vi))),this._graphicsContext.restore(),this._graphicsContext.save(),m.coordPlane===mi.Screen&&this._graphicsContext.translate(this._engine.screen.contentArea.left,this._engine.screen.contentArea.top),this._graphicsContext.z=U.debugZIndex,mt=He.get(us),mt&&((Et.showAll||Et.showVelocity)&&(this._graphicsContext.debug.drawText(`vel${mt.vel.toString(2)}`,Pe.add(m.globalPos)),this._graphicsContext.drawLine(m.globalPos,m.globalPos.add(mt.vel),Et.velocityColor,2),Pe=Pe.add(vi)),(Et.showAll||Et.showAcceleration)&&this._graphicsContext.drawLine(m.globalPos,m.globalPos.add(mt.acc),Et.accelerationColor,2)),St=He.get(Cs),St){const Ji=St.get();if((Lt.showAll||Lt.showGeometry)&&Ji&&Ji.debug(this._graphicsContext,Lt.geometryColor,{lineWidth:Lt.geometryLineWidth,pointSize:Lt.geometryPointSize}),Lt.showAll||Lt.showBounds){if(Ji instanceof Ss){const Xe=Ji.getColliders();for(const $i of Xe){const Is=$i.bounds,qs=O(Is.left,Is.top);this._graphicsContext.debug.drawRect(qs.x,qs.y,Is.width,Is.height,{color:Lt.boundsColor}),(Lt.showAll||Lt.showOwner)&&this._graphicsContext.debug.drawText(`owner id(${$i.owner.id})`,qs)}St.bounds.draw(this._graphicsContext,Lt.boundsColor)}else if(Ji){const Xe=St.bounds,$i=O(Xe.left,Xe.top);this._graphicsContext.debug.drawRect($i.x,$i.y,Xe.width,Xe.height,{color:Lt.boundsColor}),(Lt.showAll||Lt.showOwner)&&this._graphicsContext.debug.drawText(`owner id(${St.owner.id})`,$i)}}}this._graphicsContext.restore(),this._popCameraTransform(m)}if(this._graphicsContext.save(),this._camera.draw(this._graphicsContext),(Kt.showAll||Kt.showBroadphaseSpacePartitionDebug)&&this._collisionSystem.debug(this._graphicsContext),Kt.showAll||Kt.showCollisionContacts||Kt.showCollisionNormals)for(const[He,Pe]of this._engine.debug.stats.currFrame.physics.contacts){if(Kt.showAll||Kt.showCollisionContacts)for(const vi of Pe.points)this._graphicsContext.debug.drawPoint(vi,{size:Kt.contactSize,color:Kt.collisionContactColor});if(Kt.showAll||Kt.showCollisionNormals)for(const vi of Pe.points)this._graphicsContext.debug.drawLine(vi,Pe.normal.scale(30).add(vi),{color:Kt.collisionNormalColor})}this._graphicsContext.restore(),we&&(this._graphicsContext.save(),this._camera.draw(this._graphicsContext),(we.showAll||we.showFocus)&&this._graphicsContext.drawCircle(this._camera.pos,4,we.focusColor),(we.showAll||we.showZoom)&&this._graphicsContext.debug.drawText(`zoom(${this._camera.zoom})`,this._camera.pos),this._graphicsContext.restore()),this._graphicsContext.flush()}postupdate(t,e){this._engine.isDebug&&(this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext),Ds.flush(this._graphicsContext),this._graphicsContext.restore())}_applyTransform(t){const e=t.getAncestors();for(const i of e){const n=i?.get(fi);n&&(this._graphicsContext.translate(n.pos.x,n.pos.y),this._graphicsContext.scale(n.scale.x,n.scale.y),this._graphicsContext.rotate(n.rotation))}}_pushCameraTransform(t){t.coordPlane===mi.World&&(this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext))}_popCameraTransform(t){t.coordPlane===mi.World&&this._graphicsContext.restore()}}class xo extends Wi{constructor(t){super(),this.world=t,this.systemType=Di.Update,this.priority=ui.Higher,this.overrideUseColliderShape=!1,this.overrideUseGraphicsBounds=!1,this.lastFrameEntityToPointers=new Map,this.currentFrameEntityToPointers=new Map,this._sortedTransforms=[],this._sortedEntities=[],this._zHasChanged=!1,this._zIndexUpdate=()=>{this._zHasChanged=!0},this.query=this.world.query([fi,Dn]),this.query.entityAdded$.subscribe(e=>{const i=e.get(fi);this._sortedTransforms.push(i),this._sortedEntities.push(i.owner),i.zIndexChanged$.subscribe(this._zIndexUpdate),this._zHasChanged=!0}),this.query.entityRemoved$.subscribe(e=>{const i=e.get(fi);i.zIndexChanged$.unsubscribe(this._zIndexUpdate);const n=this._sortedTransforms.indexOf(i);n>-1&&(this._sortedTransforms.splice(n,1),this._sortedEntities.splice(n,1))})}initialize(t,e){this._engine=e.engine,this._scene=e}preupdate(){this._receivers=[this._engine.input.pointers,this._scene.input.pointers],this._engineReceiver=this._engine.input.pointers,this._zHasChanged&&(this._sortedTransforms.sort((t,e)=>e.z-t.z),this._sortedEntities=this._sortedTransforms.map(t=>t.owner),this._zHasChanged=!1)}entityCurrentlyUnderPointer(t,e){return this.currentFrameEntityToPointers.has(t.id)&&this.currentFrameEntityToPointers.get(t.id).includes(e)}entityWasUnderPointer(t,e){return this.lastFrameEntityToPointers.has(t.id)&&this.lastFrameEntityToPointers.get(t.id).includes(e)}entered(t,e){return this.entityCurrentlyUnderPointer(t,e)&&!this.lastFrameEntityToPointers.has(t.id)}left(t,e){return!this.currentFrameEntityToPointers.has(t.id)&&this.entityWasUnderPointer(t,e)}addPointerToEntity(t,e){if(!this.currentFrameEntityToPointers.has(t.id)){this.currentFrameEntityToPointers.set(t.id,[e]);return}const i=this.currentFrameEntityToPointers.get(t.id);this.currentFrameEntityToPointers.set(t.id,i.concat(e))}update(){this._processPointerToEntity(this._sortedEntities),this._dispatchEvents(this._sortedEntities),this._receivers.forEach(t=>t.update()),this.lastFrameEntityToPointers.clear(),this.lastFrameEntityToPointers=new Map(this.currentFrameEntityToPointers),this.currentFrameEntityToPointers.clear(),this._receivers.forEach(t=>t.clear())}_processPointerToEntity(t){var e;let i,n,a,m;const U=this._engineReceiver;for(const mt of t){if(i=mt.get(fi),m=(e=mt.get(Dn))!==null&&e!==void 0?e:new Dn,m.localBounds){const Et=m.localBounds.transform(i.get().matrix);for(const[St,Lt]of U.currentFramePointerCoords.entries())Et.contains(i.coordPlane===mi.World?Lt.worldPos:Lt.screenPos)&&this.addPointerToEntity(mt,St)}if(n=mt.get(Cs),n&&(m.useColliderShape||this.overrideUseColliderShape)){n.update();const Et=n.get();if(Et)for(const[St,Lt]of U.currentFramePointerCoords.entries())Et.contains(i.coordPlane===mi.World?Lt.worldPos:Lt.screenPos)&&this.addPointerToEntity(mt,St)}if(a=mt.get(Ms),a&&(m.useGraphicsBounds||this.overrideUseGraphicsBounds)){const Et=a.localBounds.transform(i.get().matrix);for(const[St,Lt]of U.currentFramePointerCoords.entries())Et.contains(i.coordPlane===mi.World?Lt.worldPos:Lt.screenPos)&&this.addPointerToEntity(mt,St)}}}_processDownAndEmit(t){const e=this._engineReceiver,i=new Map;for(const n of e.currentFrameDown)n.active&&t.active&&this.entityCurrentlyUnderPointer(t,n.pointerId)&&(t.events.emit("pointerdown",n),e.isDragStart(n.pointerId)&&t.events.emit("pointerdragstart",n)),i.set(n.pointerId,n);return i}_processUpAndEmit(t){const e=this._engineReceiver,i=new Map;for(const n of e.currentFrameUp)n.active&&t.active&&this.entityCurrentlyUnderPointer(t,n.pointerId)&&(t.events.emit("pointerup",n),e.isDragEnd(n.pointerId)&&t.events.emit("pointerdragend",n)),i.set(n.pointerId,n);return i}_processMoveAndEmit(t){const e=this._engineReceiver,i=new Map;for(const n of e.currentFrameMove)n.active&&t.active&&this.entityCurrentlyUnderPointer(t,n.pointerId)&&(t.events.emit("pointermove",n),e.isDragging(n.pointerId)&&t.events.emit("pointerdragmove",n)),i.set(n.pointerId,n);return i}_processEnterLeaveAndEmit(t,e){const i=this._engineReceiver;for(const n of e){if(n.active&&t.active&&this.entered(t,n.pointerId)){t.events.emit("pointerenter",n),i.isDragging(n.pointerId)&&t.events.emit("pointerdragenter",n);break}if(n.active&&t.active&&(this.left(t,n.pointerId)||this.entityCurrentlyUnderPointer(t,n.pointerId)&&n.type==="up")){t.events.emit("pointerleave",n),i.isDragging(n.pointerId)&&t.events.emit("pointerdragleave",n);break}}}_processCancelAndEmit(t){const e=this._engineReceiver;for(const i of e.currentFrameCancel)i.active&&t.active&&this.entityCurrentlyUnderPointer(t,i.pointerId)&&t.events.emit("pointercancel",i)}_processWheelAndEmit(t){const e=this._engineReceiver;for(const i of e.currentFrameWheel)i.active&&t.active&&this.entityCurrentlyUnderPointer(t,0)&&t.events.emit("pointerwheel",i)}_dispatchEvents(t){const e=new Set(this.lastFrameEntityToPointers.keys()),i=new Set(this.currentFrameEntityToPointers.keys()),n=t.filter(mt=>e.has(mt.id)||i.has(mt.id));let a,m,U;for(const mt of n){U=this._processDownAndEmit(mt),m=this._processUpAndEmit(mt),a=this._processMoveAndEmit(mt);const Et=[...a.values(),...U.values(),...m.values()];this._processEnterLeaveAndEmit(mt,Et),this._processCancelAndEmit(mt),this._processWheelAndEmit(mt)}}}class ea extends Wi{constructor(t){super(),this.world=t,this.systemType=Di.Update,this.priority=ui.Higher,this._actions=[],this.query=this.world.query([Xn]),this.query.entityAdded$.subscribe(e=>this._actions.push(e.get(Xn))),this.query.entityRemoved$.subscribe(e=>{const i=e.get(Xn),n=this._actions.indexOf(i);n>-1&&this._actions.splice(n,1)})}update(t){for(const e of this._actions)e.update(t)}}class to extends ss{constructor(t){super(),this.elevation=0,this.columns=t.columns,this.rows=t.rows,this.tileWidth=t.tileWidth,this.tileHeight=t.tileHeight}}class ia extends Wi{constructor(t){super(),this.world=t,this.systemType=Di.Update,this.priority=ui.Lower,this.query=this.world.query([fi,to])}update(){let t,e;for(const i of this.query.entities){t=i.get(fi),e=i.get(to);const a=Math.max(e.columns*e.tileWidth,e.rows*e.tileHeight)*e.elevation+t.pos.y;t.z=a}}}class sa extends Wi{constructor(t){super(),this.world=t,this.systemType=Di.Draw,this.priority=ui.Higher,this.query=this.world.query([fi,Ms])}initialize(t,e){this._camera=e.camera,this._screen=e.engine.screen}update(){this._worldBounds=this._screen.getWorldBounds();let t,e,i;for(const n of this.query.entities){e=n.get(Ms),t=n.get(fi),i=n.get(gr);let a;if(i){const U=u.One.sub(i.parallaxFactor);a=this._camera.pos.scale(U)}const m=this._isOffscreen(t,e,a);m&&!n.hasTag("ex.offscreen")&&(n.events.emit("exitviewport",new Cn(n)),n.addTag("ex.offscreen")),!m&&n.hasTag("ex.offscreen")&&(n.events.emit("enterviewport",new ir(n)),n.removeTag("ex.offscreen"))}}_isOffscreen(t,e,i){if(t.coordPlane===mi.World){let n=e.localBounds;i&&(n=n.translate(i));const a=n.transform(t.get().matrix);return!this._worldBounds.overlaps(a)}else return!1}}class na{get config(){return Bt(this._config,t=>{this.$configUpdate.notifyAll(t)})}set config(t){this._config=t,this.$configUpdate.notifyAll(t)}get collisionProcessor(){if(this._configDirty){this._configDirty=!1;const t=this._collisionProcessor.getColliders();this._collisionProcessor=new Mn(this._config);for(const e of t)this._collisionProcessor.track(e)}return this._collisionProcessor}constructor(t){this.$configUpdate=new ls,this._configDirty=!1,this.config=t,this.$configUpdate.subscribe(e=>{this._configDirty=!0,Hi.updateDefaultPhysicsConfig(e.bodies)}),this._collisionProcessor=new Mn(this.config)}rayCast(t,e){return this.collisionProcessor.rayCast(t,e)}}class eo{constructor(){this.events=new l,this.enabled=!1,this.supported=!!navigator.getGamepads,this._gamePadTimeStamps=[0,0,0,0],this._oldPads=[],this._pads=[],this._initSuccess=!1,this._navigator=navigator,this._minimumConfiguration=null,this._enabled=!0}init(){this.supported&&(this._initSuccess||(this._oldPads=this._clonePads(this._navigator.getGamepads()),this._oldPads.length&&this._oldPads[0]&&(this._initSuccess=!0)))}toggleEnabled(t){this._enabled=t}setMinimumGamepadConfiguration(t){this._enableAndUpdate(),this._minimumConfiguration=t}_enableAndUpdate(){this.enabled||(this.enabled=!0,this.update())}_isGamepadValid(t){if(!this._minimumConfiguration)return!0;if(!t)return!1;const e=t.axes.filter(n=>typeof n!==void 0).length,i=t.buttons.filter(n=>typeof n!==void 0).length;return e>=this._minimumConfiguration.axis&&i>=this._minimumConfiguration.buttons&&t.connected}emit(t,e){this.events.emit(t,e)}on(t,e){return this._enableAndUpdate(),this.events.on(t,e)}once(t,e){return this.events.once(t,e)}off(t,e){this._enableAndUpdate(),this.events.off(t,e)}update(){if(!this.enabled||!this.supported||!this._enabled)return;this.init();const t=this._navigator.getGamepads();for(let e=0;e<t.length;e++){if(t[e])!this.at(e).connected&&this._isGamepadValid(t[e])&&this.events.emit("connect",new bt(e,this.at(e))),this.at(e).connected=!0;else{const mt=this.at(e);mt.connected&&this.events.emit("disconnect",new Pt(e,mt)),mt.connected=!1;continue}if(this.at(e).update(),t[e].timestamp&&t[e].timestamp===this._gamePadTimeStamps[e])continue;this._gamePadTimeStamps[e]=t[e].timestamp,this.at(e).navigatorGamepad=t[e];let i,n,a,m,U;for(i in Or)n=Or[i],typeof n=="number"&&t[e].buttons[n]&&(U=t[e].buttons[n].value,U!==this._oldPads[e].getButton(n)&&(t[e].buttons[n].pressed?(this.at(e).updateButton(n,U),this.at(e).events.emit("button",new ee(n,U,this.at(e)))):this.at(e).updateButton(n,0)));for(a in zr)m=zr[a],typeof m=="number"&&(U=t[e].axes[m],U!==this._oldPads[e].getAxes(m)&&(this.at(e).updateAxes(m,U),this.at(e).events.emit("axis",new ri(m,U,this.at(e)))));this._oldPads[e]=this._clonePad(t[e])}}at(t){if(this._enableAndUpdate(),t>=this._pads.length)for(let e=this._pads.length-1,i=t;e<i;e++)this._pads.push(new io),this._oldPads.push(new io);return this._pads[t]}getValidGamepads(){this._enableAndUpdate();const t=[];for(let e=0;e<this._pads.length;e++)this._isGamepadValid(this.at(e).navigatorGamepad)&&this.at(e).connected&&t.push(this.at(e));return t}count(){return this._pads.filter(t=>t.connected).length}_clonePads(t){const e=[];for(let i=0,n=t.length;i<n;i++)e.push(this._clonePad(t[i]));return e}_clonePad(t){let e,i;const n=new io;if(!t)return n;for(e=0,i=t.buttons.length;e<i;e++)t.buttons[e]&&n.updateButton(e,t.buttons[e].value);for(e=0,i=t.axes.length;e<i;e++)n.updateAxes(e,t.axes[e]);return n}}eo.MinAxisMoveThreshold=.05;class io{constructor(){this.events=new l,this.connected=!1,this._axes=new Array(4),this._buttons=new Array(16),this._buttonsUp=new Array(16),this._buttonsDown=new Array(16);for(let t=0;t<this._buttons.length;t++)this._buttons[t]=0;for(let t=0;t<this._axes.length;t++)this._axes[t]=0}update(){this._buttonsDown=new Array(16),this._buttonsUp=new Array(16)}isButtonPressed(t,e=1){return this._buttons[t]>=e}isButtonHeld(t,e=1){return this._buttons[t]>=e}wasButtonPressed(t,e=1){return this._buttonsDown[t]>=e}wasButtonReleased(t){return!!this._buttonsUp[t]}getButton(t){return this._buttons[t]}getAxes(t){const e=this._axes[t];return Math.abs(e)<eo.MinAxisMoveThreshold?0:e}updateButton(t,e){e===0&&this._buttons[t]?this._buttonsUp[t]=1:this._buttonsDown[t]=e,this._buttons[t]=e}updateAxes(t,e){this._axes[t]=e}emit(t,e){this.events.emit(t,e)}on(t,e){return this.events.on(t,e)}once(t,e){return this.events.once(t,e)}off(t,e){this.events.off(t,e)}}var Or;(function(h){h[h.Face1=0]="Face1",h[h.Face2=1]="Face2",h[h.Face3=2]="Face3",h[h.Face4=3]="Face4",h[h.LeftBumper=4]="LeftBumper",h[h.RightBumper=5]="RightBumper",h[h.LeftTrigger=6]="LeftTrigger",h[h.RightTrigger=7]="RightTrigger",h[h.Select=8]="Select",h[h.Start=9]="Start",h[h.LeftStick=10]="LeftStick",h[h.RightStick=11]="RightStick",h[h.DpadUp=12]="DpadUp",h[h.DpadDown=13]="DpadDown",h[h.DpadLeft=14]="DpadLeft",h[h.DpadRight=15]="DpadRight"})(Or||(Or={}));var zr;(function(h){h[h.LeftStickX=0]="LeftStickX",h[h.LeftStickY=1]="LeftStickY",h[h.RightStickX=2]="RightStickX",h[h.RightStickY=3]="RightStickY"})(zr||(zr={}));class ra{constructor(t){this.inputs=t,this._handlers=new Map}execute(){for(const[t,e]of this._handlers.entries()){const i=t(this.inputs);i&&e(i)}}on(t,e){this._handlers.set(t,e)}}function oa(){try{const h=()=>{};window.top.addEventListener("blur",h),window.top.removeEventListener("blur",h)}catch{return!0}return!1}var Gr;(function(h){h.Num0="Numpad0",h.Num1="Numpad1",h.Num2="Numpad2",h.Num3="Numpad3",h.Num4="Numpad4",h.Num5="Numpad5",h.Num6="Numpad6",h.Num7="Numpad7",h.Num8="Numpad8",h.Num9="Numpad9",h.NumAdd="NumpadAdd",h.NumSubtract="NumpadSubtract",h.NumMultiply="NumpadMultiply",h.NumDivide="NumpadDivide",h.NumDecimal="NumpadDecimal",h.Numpad0="Numpad0",h.Numpad1="Numpad1",h.Numpad2="Numpad2",h.Numpad3="Numpad3",h.Numpad4="Numpad4",h.Numpad5="Numpad5",h.Numpad6="Numpad6",h.Numpad7="Numpad7",h.Numpad8="Numpad8",h.Numpad9="Numpad9",h.NumpadAdd="NumpadAdd",h.NumpadSubtract="NumpadSubtract",h.NumpadMultiply="NumpadMultiply",h.NumpadDivide="NumpadDivide",h.NumpadDecimal="NumpadDecimal",h.NumLock="NumLock",h.ShiftLeft="ShiftLeft",h.ShiftRight="ShiftRight",h.AltLeft="AltLeft",h.AltRight="AltRight",h.ControlLeft="ControlLeft",h.ControlRight="ControlRight",h.MetaLeft="MetaLeft",h.MetaRight="MetaRight",h.Key0="Digit0",h.Key1="Digit1",h.Key2="Digit2",h.Key3="Digit3",h.Key4="Digit4",h.Key5="Digit5",h.Key6="Digit6",h.Key7="Digit7",h.Key8="Digit8",h.Key9="Digit9",h.Digit0="Digit0",h.Digit1="Digit1",h.Digit2="Digit2",h.Digit3="Digit3",h.Digit4="Digit4",h.Digit5="Digit5",h.Digit6="Digit6",h.Digit7="Digit7",h.Digit8="Digit8",h.Digit9="Digit9",h.F1="F1",h.F2="F2",h.F3="F3",h.F4="F4",h.F5="F5",h.F6="F6",h.F7="F7",h.F8="F8",h.F9="F9",h.F10="F10",h.F11="F11",h.F12="F12",h.A="KeyA",h.B="KeyB",h.C="KeyC",h.D="KeyD",h.E="KeyE",h.F="KeyF",h.G="KeyG",h.H="KeyH",h.I="KeyI",h.J="KeyJ",h.K="KeyK",h.L="KeyL",h.M="KeyM",h.N="KeyN",h.O="KeyO",h.P="KeyP",h.Q="KeyQ",h.R="KeyR",h.S="KeyS",h.T="KeyT",h.U="KeyU",h.V="KeyV",h.W="KeyW",h.X="KeyX",h.Y="KeyY",h.Z="KeyZ",h.KeyA="KeyA",h.KeyB="KeyB",h.KeyC="KeyC",h.KeyD="KeyD",h.KeyE="KeyE",h.KeyF="KeyF",h.KeyG="KeyG",h.KeyH="KeyH",h.KeyI="KeyI",h.KeyJ="KeyJ",h.KeyK="KeyK",h.KeyL="KeyL",h.KeyM="KeyM",h.KeyN="KeyN",h.KeyO="KeyO",h.KeyP="KeyP",h.KeyQ="KeyQ",h.KeyR="KeyR",h.KeyS="KeyS",h.KeyT="KeyT",h.KeyU="KeyU",h.KeyV="KeyV",h.KeyW="KeyW",h.KeyX="KeyX",h.KeyY="KeyY",h.KeyZ="KeyZ",h.Semicolon="Semicolon",h.Quote="Quote",h.Comma="Comma",h.Minus="Minus",h.Period="Period",h.Slash="Slash",h.Equal="Equal",h.BracketLeft="BracketLeft",h.Backslash="Backslash",h.BracketRight="BracketRight",h.Backquote="Backquote",h.Up="ArrowUp",h.Down="ArrowDown",h.Left="ArrowLeft",h.Right="ArrowRight",h.ArrowUp="ArrowUp",h.ArrowDown="ArrowDown",h.ArrowLeft="ArrowLeft",h.ArrowRight="ArrowRight",h.Space="Space",h.Backspace="Backspace",h.Delete="Delete",h.Esc="Escape",h.Escape="Escape",h.Enter="Enter",h.NumpadEnter="NumpadEnter",h.ContextMenu="ContextMenu"})(Gr||(Gr={}));class jr extends Ri{constructor(t,e,i){super(),this.key=t,this.value=e,this.originalEvent=i}}class Ro{constructor(){this.events=new l,this._enabled=!0,this._keys=[],this._keysUp=[],this._keysDown=[],this._releaseAllKeys=t=>{for(const e of this._keys){const i=new jr(e,t.key,t);this.events.emit("up",i),this.events.emit("release",i)}this._keysUp=Array.from(new Set(this._keys.concat(this._keysUp))),this._keys.length=0},this._handleKeyDown=t=>{if(!this._enabled)return;!t.metaKey&&(this._keys.includes(Gr.MetaLeft)||this._keys.includes(Gr.MetaRight))&&this._releaseAllKeys(t);const e=t.code;if(this._keys.indexOf(e)===-1){this._keys.push(e),this._keysDown.push(e);const i=new jr(e,t.key,t);this.events.emit("down",i),this.events.emit("press",i)}},this._handleKeyUp=t=>{if(!this._enabled)return;const e=t.code,i=this._keys.indexOf(e);this._keys.splice(i,1),this._keysUp.push(e);const n=new jr(e,t.key,t);this.events.emit("up",n),this.events.emit("release",n),t.key==="Meta"&&this._releaseAllKeys(t)}}emit(t,e){this.events.emit(t,e)}on(t,e){return this.events.on(t,e)}once(t,e){return this.events.once(t,e)}off(t,e){this.events.off(t,e)}init(t){let{global:e}=t;const{grabWindowFocus:i}=t;e||(oa()?(e=window,i&&window.focus(),ft.getInstance().warn("Excalibur might be in a cross-origin iframe, in order to receive keyboard events it must be in focus")):e=window.top),e.addEventListener("blur",()=>{this._keys.length=0}),e.addEventListener("keyup",this._handleKeyUp),e.addEventListener("keydown",this._handleKeyDown)}toggleEnabled(t){this._enabled=t}update(){this._keysDown.length=0,this._keysUp.length=0;for(let t=0;t<this._keys.length;t++)this.events.emit("hold",new jr(this._keys[t]))}getKeys(){return this._keys}wasPressed(t){return this._keysDown.indexOf(t)>-1}isHeld(t){return this._keys.indexOf(t)>-1}wasReleased(t){return this._keysUp.indexOf(t)>-1}triggerEvent(t,e,i){t==="down"&&this._handleKeyDown(new KeyboardEvent("keydown",{code:e,key:i??null})),t==="up"&&this._handleKeyUp(new KeyboardEvent("keyup",{code:e,key:i??null}))}}class so{static fromPagePosition(t,e,i){let n,a,m,U;arguments.length===3?(n=t,a=e,m=new u(n,a),U=i):(m=t,n=m.x,a=m.y,U=e);const mt=U.screen.pageToScreenCoordinates(m),Et=U.screen.screenToWorldCoordinates(mt);return new so(Et,m,mt)}constructor(t,e,i){this.worldPos=t,this.pagePos=e,this.screenPos=i}}class Ur{cancel(){this.active=!1}get pagePos(){return this.coordinates.pagePos}get screenPos(){return this.coordinates.screenPos}get worldPos(){return this.coordinates.worldPos}constructor(t,e,i,n,a,m){this.type=t,this.pointerId=e,this.button=i,this.pointerType=n,this.coordinates=a,this.nativeEvent=m,this.active=!0}}class Fo{cancel(){this.active=!1}constructor(t,e,i,n,a,m,U,mt,Et,St,Lt,Kt){this.x=t,this.y=e,this.pageX=i,this.pageY=n,this.screenX=a,this.screenY=m,this.index=U,this.deltaX=mt,this.deltaY=Et,this.deltaZ=St,this.deltaMode=Lt,this.ev=Kt,this.active=!0}}class No{constructor(){this.events=new l,this.lastPagePos=u.Zero,this.lastScreenPos=u.Zero,this.lastWorldPos=u.Zero,this._onPointerMove=t=>{this.lastPagePos=new u(t.pagePos.x,t.pagePos.y),this.lastScreenPos=new u(t.screenPos.x,t.screenPos.y),this.lastWorldPos=new u(t.worldPos.x,t.worldPos.y)},this._onPointerDown=t=>{this.lastPagePos=new u(t.pagePos.x,t.pagePos.y),this.lastScreenPos=new u(t.screenPos.x,t.screenPos.y),this.lastWorldPos=new u(t.worldPos.x,t.worldPos.y)},this.on("move",this._onPointerMove),this.on("down",this._onPointerDown)}emit(t,e){this.events.emit(t,e)}on(t,e){return this.events.on(t,e)}once(t,e){return this.events.once(t,e)}off(t,e){this.events.off(t,e)}}var mr;(function(h){h.Pixel="Pixel",h.Line="Line",h.Page="Page"})(mr||(mr={}));var Yn;(function(h){h[h.NoButton=-1]="NoButton",h[h.Left=0]="Left",h[h.Middle=1]="Middle",h[h.Right=2]="Right",h[h.Unknown=3]="Unknown"})(Yn||(Yn={}));var On;(function(h){h.Left="Left",h.Middle="Middle",h.Right="Right",h.Unknown="Unknown",h.NoButton="NoButton"})(On||(On={}));var zn;(function(h){h.Touch="Touch",h.Mouse="Mouse",h.Pen="Pen",h.Unknown="Unknown"})(zn||(zn={}));function Da(h){return globalThis.TouchEvent&&h instanceof globalThis.TouchEvent}function Pa(h){return globalThis.PointerEvent&&h instanceof globalThis.PointerEvent}class no{constructor(t,e){this.target=t,this.engine=e,this.events=new l,this.primary=new No,this._activeNativePointerIdsToNormalized=new Map,this.lastFramePointerCoords=new Map,this.currentFramePointerCoords=new Map,this.currentFramePointerDown=new Map,this.lastFramePointerDown=new Map,this.currentFrameDown=[],this.currentFrameUp=[],this.currentFrameMove=[],this.currentFrameCancel=[],this.currentFrameWheel=[],this._enabled=!0,this._pointers=[this.primary],this._boundHandle=this._handle.bind(this),this._boundWheel=this._handleWheel.bind(this)}toggleEnabled(t){this._enabled=t}recreate(t,e){const i=new no(t,e);return i.primary=this.primary,i._pointers=this._pointers,i}at(t){if(t>=this._pointers.length)for(let e=this._pointers.length-1,i=t;e<i;e++)this._pointers.push(new No);return this._pointers[t]}count(){return this._pointers.length}isDown(t){var e;return(e=this.currentFramePointerDown.get(t))!==null&&e!==void 0?e:!1}wasDown(t){var e;return(e=this.lastFramePointerDown.get(t))!==null&&e!==void 0?e:!1}isDragging(t){return this.isDown(t)}isDragStart(t){return this.isDown(t)&&!this.wasDown(t)}isDragEnd(t){return!this.isDown(t)&&this.wasDown(t)}emit(t,e){this.events.emit(t,e)}on(t,e){return this.events.on(t,e)}once(t,e){return this.events.once(t,e)}off(t,e){this.events.off(t,e)}update(){this.lastFramePointerDown=new Map(this.currentFramePointerDown),this.lastFramePointerCoords=new Map(this.currentFramePointerCoords);for(const t of this.currentFrameDown)this.emit("down",t),this.at(t.pointerId).emit("down",t),this.primary.emit("pointerdown",t);for(const t of this.currentFrameUp)this.emit("up",t),this.at(t.pointerId).emit("up",t);for(const t of this.currentFrameMove)this.emit("move",t),this.at(t.pointerId).emit("move",t);for(const t of this.currentFrameCancel)this.emit("cancel",t),this.at(t.pointerId).emit("cancel",t);for(const t of this.currentFrameWheel)this.emit("wheel",t),this.primary.emit("pointerwheel",t),this.primary.emit("wheel",t)}clear(){for(const t of this.currentFrameUp){this.currentFramePointerCoords.delete(t.pointerId);const e=this._activeNativePointerIdsToNormalized.entries();for(const[i,n]of e)n===t.pointerId&&this._activeNativePointerIdsToNormalized.delete(i)}this.currentFrameDown.length=0,this.currentFrameUp.length=0,this.currentFrameMove.length=0,this.currentFrameCancel.length=0,this.currentFrameWheel.length=0}init(t){var e;if(this.engine.isDisposed())return;this.target===this.engine.canvas?this.engine.canvas.style.touchAction="none":document.body.style.touchAction="none",window.PointerEvent?(this.target.addEventListener("pointerdown",this._boundHandle),this.target.addEventListener("pointerup",this._boundHandle),this.target.addEventListener("pointermove",this._boundHandle),this.target.addEventListener("pointercancel",this._boundHandle)):(this.target.addEventListener("touchstart",this._boundHandle),this.target.addEventListener("touchend",this._boundHandle),this.target.addEventListener("touchmove",this._boundHandle),this.target.addEventListener("touchcancel",this._boundHandle),this.target.addEventListener("mousedown",this._boundHandle),this.target.addEventListener("mouseup",this._boundHandle),this.target.addEventListener("mousemove",this._boundHandle));const i={passive:!(this.engine.pageScrollPreventionMode===tr.All||this.engine.pageScrollPreventionMode===tr.Canvas)};if("onwheel"in document.createElement("div")?this.target.addEventListener("wheel",this._boundWheel,i):document.onmousewheel!==void 0?this.target.addEventListener("mousewheel",this._boundWheel,i):this.target.addEventListener("MozMousePixelScroll",this._boundWheel,i),((e=t?.grabWindowFocus)!==null&&e!==void 0?e:!0)&&oa()){const a=()=>{window.focus()};window.PointerEvent?this.target.addEventListener("pointerdown",a):(this.target.addEventListener("touchstart",a),this.target.addEventListener("mousedown",a))}}detach(){window.PointerEvent?(this.target.removeEventListener("pointerdown",this._boundHandle),this.target.removeEventListener("pointerup",this._boundHandle),this.target.removeEventListener("pointermove",this._boundHandle),this.target.removeEventListener("pointercancel",this._boundHandle)):(this.target.removeEventListener("touchstart",this._boundHandle),this.target.removeEventListener("touchend",this._boundHandle),this.target.removeEventListener("touchmove",this._boundHandle),this.target.removeEventListener("touchcancel",this._boundHandle),this.target.removeEventListener("mousedown",this._boundHandle),this.target.removeEventListener("mouseup",this._boundHandle),this.target.removeEventListener("mousemove",this._boundHandle)),"onwheel"in document.createElement("div")?this.target.removeEventListener("wheel",this._boundWheel):document.onmousewheel!==void 0?this.target.addEventListener("mousewheel",this._boundWheel):this.target.addEventListener("MozMousePixelScroll",this._boundWheel)}_normalizePointerId(t){this._activeNativePointerIdsToNormalized.set(t,-1);const i=Array.from(this._activeNativePointerIdsToNormalized.keys()).sort((n,a)=>n-a).findIndex(n=>n===t);return this._activeNativePointerIdsToNormalized.set(t,i),i}_handle(t){if(!this._enabled)return;t.preventDefault();const e=new Map;let i,n;if(Da(t)){i=On.Unknown,n=zn.Touch;for(let a=0;a<t.changedTouches.length;a++){const m=t.changedTouches[a],U=so.fromPagePosition(m.pageX,m.pageY,this.engine),mt=a+1,Et=this._normalizePointerId(mt);this.currentFramePointerCoords.set(Et,U),e.set(Et,U)}}else{i=this._nativeButtonToPointerButton(t.button),n=zn.Mouse;const a=so.fromPagePosition(t.pageX,t.pageY,this.engine);let m=1;Pa(t)&&(m=t.pointerId,n=this._stringToPointerType(t.pointerType));const U=this._normalizePointerId(m);this.currentFramePointerCoords.set(U,a),e.set(U,a)}for(const[a,m]of e.entries())switch(t.type){case"mousedown":case"pointerdown":case"touchstart":this.currentFrameDown.push(new Ur("down",a,i,n,m,t)),this.currentFramePointerDown.set(a,!0);break;case"mouseup":case"pointerup":case"touchend":this.currentFrameUp.push(new Ur("up",a,i,n,m,t)),this.currentFramePointerDown.set(a,!1);break;case"mousemove":case"pointermove":case"touchmove":this.currentFrameMove.push(new Ur("move",a,i,n,m,t));break;case"touchcancel":case"pointercancel":this.currentFrameCancel.push(new Ur("cancel",a,i,n,m,t));break}}_handleWheel(t){if(!this._enabled)return;(this.engine.pageScrollPreventionMode===tr.All||this.engine.pageScrollPreventionMode===tr.Canvas&&t.target===this.engine.canvas)&&t.preventDefault();const e=this.engine.screen.pageToScreenCoordinates(O(t.pageX,t.pageY)),i=this.engine.screen.screenToWorldCoordinates(e),n=-1/40,a=t.deltaX||t.wheelDeltaX*n||0,m=t.deltaY||t.wheelDeltaY*n||t.wheelDelta*n||t.detail||0,U=t.deltaZ||0;let mt=mr.Pixel;t.deltaMode&&(t.deltaMode===1?mt=mr.Line:t.deltaMode===2&&(mt=mr.Page));const Et=new Fo(i.x,i.y,t.pageX,t.pageY,e.x,e.y,0,a,m,U,mt,t);this.currentFrameWheel.push(Et)}triggerEvent(t,e){const i=this.engine.screen.worldToPageCoordinates(e);window.PointerEvent?this._handle(new window.PointerEvent("pointer"+t,{pointerId:0,clientX:i.x,clientY:i.y})):this._handle(new window.MouseEvent("mouse"+t,{clientX:i.x,clientY:i.y}));const n=this.engine.currentScene.world.get(xo);n.preupdate(this.engine.currentScene,1),n.update(1)}_nativeButtonToPointerButton(t){switch(t){case Yn.NoButton:return On.NoButton;case Yn.Left:return On.Left;case Yn.Middle:return On.Middle;case Yn.Right:return On.Right;case Yn.Unknown:return On.Unknown;default:return kt(t)}}_stringToPointerType(t){switch(t){case"touch":return zn.Touch;case"mouse":return zn.Mouse;case"pen":return zn.Pen;default:return zn.Unknown}}}class Oo{constructor(t){this._enabled=!0;const{pointerTarget:e,grabWindowFocus:i,engine:n}=t;this.keyboard=new Ro,this.pointers=new no(e,n),this.gamepads=new eo,this.keyboard.init({grabWindowFocus:i}),this.pointers.init({grabWindowFocus:i}),this.gamepads.init(),this.inputMapper=new ra({keyboard:this.keyboard,pointers:this.pointers,gamepads:this.gamepads})}get enabled(){return this._enabled}toggleEnabled(t){this._enabled=t,this.keyboard.toggleEnabled(this._enabled),this.pointers.toggleEnabled(this._enabled),this.gamepads.toggleEnabled(this._enabled)}update(){this._enabled&&(this.inputMapper.execute(),this.keyboard.update(),this.gamepads.update())}}class Qa{}const Ma={Initialize:"initialize",Activate:"activate",Deactivate:"deactivate",PreUpdate:"preupdate",PostUpdate:"postupdate",PreDraw:"predraw",PostDraw:"postdraw",PreDebugDraw:"predebugdraw",PostDebugDraw:"postdebugdraw",PreLoad:"preload"};function Gn(h){var t,e;return!!h?.prototype&&!!(!((e=(t=h?.prototype)===null||t===void 0?void 0:t.constructor)===null||e===void 0)&&e.name)}class In{get actors(){return this.world.entityManager.entities.filter(t=>t instanceof Xs)}get entities(){return this.world.entityManager.entities}get triggers(){return this.world.entityManager.entities.filter(t=>t instanceof ei)}get tileMaps(){return this.world.entityManager.entities.filter(t=>t instanceof vo)}get timers(){return this._timers}constructor(){this._logger=ft.getInstance(),this.events=new l,this.camera=new Xt,this.world=new Ar(this),this.physics=new na(as),this._isInitialized=!1,this._timers=[],this._cancelQueue=[],this.world.add(ea),this.world.add(new Vo(this.world,this.physics)),this.world.add(new Lo(this.world,this.physics)),this.world.add(xo),this.world.add(ia),this.world.add(sa),this.world.add(Ko),this.world.add(ta)}emit(t,e){this.events.emit(t,e)}on(t,e){return this.events.on(t,e)}once(t,e){return this.events.once(t,e)}off(t,e){this.events.off(t,e)}onPreLoad(t){}onTransition(t){}onInitialize(t){}onActivate(t){}onDeactivate(t){}onPreUpdate(t,e){}onPostUpdate(t,e){}onPreDraw(t,e){}onPostDraw(t,e){}_initializeChildren(){for(const t of this.entities)t._initialize(this.engine)}get isInitialized(){return this._isInitialized}async _initialize(t){var e;if(!this.isInitialized){try{this.engine=t,this.physics.config=this.engine.physics,this.input=new Oo({pointerTarget:t.pointerScope===d.Canvas?t.canvas:document,grabWindowFocus:t.grabWindowFocus,engine:t}),this.camera._initialize(t),this.world.systemManager.initialize(),await this.onInitialize(t),this._initializeChildren(),this._logger.debug("Scene.onInitialize",this,t),this.events.emit("initialize",new Rn(t,this))}catch(i){throw this._logger.error(`Error during scene initialization for scene ${(e=t.director)===null||e===void 0?void 0:e.getSceneName(this)}!`),i}this._isInitialized=!0}}async _activate(t){var e,i;try{this._logger.debug("Scene.onActivate",this),this.input.toggleEnabled(!0),await this.onActivate(t)}catch(n){throw this._logger.error(`Error during scene activation for scene ${(i=(e=this.engine)===null||e===void 0?void 0:e.director)===null||i===void 0?void 0:i.getSceneName(this)}!`),n}}async _deactivate(t){this._logger.debug("Scene.onDeactivate",this),this.input.toggleEnabled(!1),await this.onDeactivate(t)}_preupdate(t,e){this.emit("preupdate",new en(t,e,this)),this.onPreUpdate(t,e)}_postupdate(t,e){this.emit("postupdate",new ln(t,e,this)),this.onPostUpdate(t,e)}_predraw(t,e){this.emit("predraw",new vs(t,e,this)),this.onPreDraw(t,e)}_postdraw(t,e){this.emit("postdraw",new Bs(t,e,this)),this.onPostDraw(t,e)}update(t,e){var i;if(!this.isInitialized){this._logger.warnOnce(`Scene update called before initialize for scene ${(i=t.director)===null||i===void 0?void 0:i.getSceneName(this)}!`);return}this._preupdate(t,e);let n,a;for(n=0,a=this._cancelQueue.length;n<a;n++)this.removeTimer(this._cancelQueue[n]);this._cancelQueue.length=0;for(const m of this._timers)m.update(e);this.world.update(Di.Update,e),this.camera&&this.camera.update(t,e),this._collectActorStats(t),this._postupdate(t,e),this.input.update()}draw(t,e){var i;if(!this.isInitialized){this._logger.warnOnce("Scene draw called before initialize!");return}this._predraw(t,e),this.world.update(Di.Draw,e),!((i=this.engine)===null||i===void 0)&&i.isDebug&&this.debugDraw(t),this._postdraw(t,e)}debugDraw(t){this.emit("predebugdraw",new kn(t,this)),this.emit("postdebugdraw",new Us(t,this))}contains(t){return this.actors.indexOf(t)>-1}add(t){if(this.emit("entityadded",{target:t}),this.world.add(t),t.scene=this,t instanceof Wn){lt(this._timers,t)||this.addTimer(t);return}}transfer(t){let e;t instanceof js&&t.scene&&t.scene!==this&&(e=t.scene,t.scene.world.remove(t,!1)),t instanceof Wn&&t.scene&&(e=t.scene,t.scene.removeTimer(t)),e?.emit("entityremoved",{target:t}),this.add(t)}remove(t){t instanceof js&&(this.emit("entityremoved",{target:t}),t.active&&t.kill(),this.world.remove(t)),t instanceof Wn&&this.removeTimer(t)}clear(t=!0){for(let e=this.entities.length-1;e>=0;e--)this.world.remove(this.entities[e],t);for(let e=this.timers.length-1;e>=0;e--)this.removeTimer(this.timers[e])}addTimer(t){return this._timers.push(t),t.scene=this,t}removeTimer(t){const e=this._timers.indexOf(t);return e!==-1&&this._timers.splice(e,1),t}cancelTimer(t){return this._cancelQueue.push(t),t}isTimerActive(t){return this._timers.indexOf(t)>-1&&!t.complete}isCurrentScene(){return this.engine?this.engine.currentScene===this:!1}_collectActorStats(t){const e=this.actors.filter(i=>i instanceof Kr);for(const i of e)t.stats.currFrame.actors.ui++;for(const i of this.actors){t.stats.currFrame.actors.alive++;for(const n of i.children)mo(n)?t.stats.currFrame.actors.ui++:t.stats.currFrame.actors.alive++}}}var vr;(function(h){h.Protanope="Protanope",h.Deuteranope="Deuteranope",h.Tritanope="Tritanope"})(vr||(vr={}));const La=`#version 300 es\r
precision mediump float;\r
// our texture\r
uniform sampler2D u_image;\r
// the texCoords passed in from the vertex shader.\r
in vec2 v_texcoord;\r
\r
// color blind type\r
uniform int u_type;\r
\r
// simulation?\r
uniform bool u_simulate;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  vec4 o =  texture(u_image, v_texcoord);\r
  // RGB to LMS matrix conversion\r
  float L = (17.8824 * o.r) + (43.5161 * o.g) + (4.11935 * o.b);\r
  float M = (3.45565 * o.r) + (27.1554 * o.g) + (3.86714 * o.b);\r
  float S = (0.0299566 * o.r) + (0.184309 * o.g) + (1.46709 * o.b);\r
  // Simulate color blindness\r
  float l;\r
  float m;\r
  float s;\r
  //MODE CODE//\r
  if (u_type == 0) {\r
    // Protanope\r
    l = 0.0 * L + 2.02344 * M + -2.52581 * S;\r
    m = 0.0 * L + 1.0 * M + 0.0 * S;\r
    s = 0.0 * L + 0.0 * M + 1.0 * S;;\r
  } else if (u_type == 1) {\r
    // Deuteranope\r
    l = 1.0 * L + 0.0 * M + 0.0 * S;\r
    m = 0.494207 * L + 0.0 * M + 1.24827 * S;\r
    s = 0.0 * L + 0.0 * M + 1.0 * S;\r
  } else if (u_type == 2) {\r
    // Tritanope\r
    l = 1.0 * L + 0.0 * M + 0.0 * S;\r
    m = 0.0 * L + 1.0 * M + 0.0 * S;\r
    s = -0.395913 * L + 0.801109 * M + 0.0 * S;\r
  }\r
\r
  // LMS to RGB matrix conversion\r
  vec4 error; // simulate the colors\r
  error.r = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s);\r
  error.g = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s);\r
  error.b = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);\r
  error.a = 1.0;\r
  vec4 diff = o - error;\r
  vec4 correction; // correct the colors\r
  correction.r = 0.0;\r
  correction.g =  (diff.r * 0.7) + (diff.g * 1.0);\r
  correction.b =  (diff.r * 0.7) + (diff.b * 1.0);\r
  correction = o + correction;\r
  correction.a = o.a;\r
  //SIMULATE//\r
\r
  // sim \r
  if (u_simulate) {\r
    fragColor = error.rgba;\r
  } else {\r
    fragColor = correction.rgba;\r
  }\r
}`;class aa{constructor(t,e){this._shader=new $e({gl:t,vertexSource:`#version 300 es
      in vec2 a_position;
      in vec2 a_texcoord;
      out vec2 v_texcoord;

      void main() {
        gl_Position = vec4(a_position, 0.0, 1.0);
        // Pass the texcoord to the fragment shader.
        v_texcoord = a_texcoord;
      }`,fragmentSource:e}),this._shader.compile(),this._buffer=new ii({gl:t,type:"static",data:new Float32Array([-1,-1,0,0,-1,1,0,1,1,-1,1,0,1,-1,1,0,-1,1,0,1,1,1,1,1])}),this._layout=new Le({gl:t,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_texcoord",2]]}),this._buffer.upload()}getShader(){return this._shader}getLayout(){return this._layout}}class la{constructor(t,e=!1){this._colorBlindnessMode=t,this._simulate=!1,this._simulate=e}initialize(t){this._shader=new aa(t,La),this.simulate=this._simulate,this.colorBlindnessMode=this._colorBlindnessMode}getShader(){return this._shader.getShader()}getLayout(){return this._shader.getLayout()}set colorBlindnessMode(t){if(this._colorBlindnessMode=t,this._shader){const e=this._shader.getShader();e.use(),this._colorBlindnessMode===vr.Protanope?e.setUniformInt("u_type",0):this._colorBlindnessMode===vr.Deuteranope?e.setUniformInt("u_type",1):this._colorBlindnessMode===vr.Tritanope&&e.setUniformInt("u_type",2)}}get colorBlindnessMode(){return this._colorBlindnessMode}set simulate(t){if(this._simulate=t,this._shader){const e=this._shader.getShader();e.use(),e.setUniformBoolean("u_simulate",t)}}get simulate(){return this._simulate}}class ca{constructor(t){this._engine=t,this._colorBlindPostProcessor=new la(vr.Protanope)}correct(t){this._engine.graphicsContext instanceof hi&&(this.clear(),this._colorBlindPostProcessor.colorBlindnessMode=t,this._colorBlindPostProcessor.simulate=!1,this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor))}simulate(t){this._engine.graphicsContext instanceof hi&&(this.clear(),this._colorBlindPostProcessor.colorBlindnessMode=t,this._colorBlindPostProcessor.simulate=!0,this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor))}clear(){this._engine.graphicsContext.removePostProcessor(this._colorBlindPostProcessor)}}class ha{constructor(t){this.stats={currFrame:new ro,prevFrame:new ro},this.filter={useFilter:!1,nameQuery:"",ids:[]},this.entity={showAll:!1,showId:!1,showName:!1},this.transform={showAll:!1,debugZIndex:1e7,showPosition:!1,showPositionLabel:!1,positionColor:X.Yellow,showZIndex:!1,showScale:!1,scaleColor:X.Green,showRotation:!1,rotationColor:X.Blue},this.graphics={showAll:!1,showBounds:!1,boundsColor:X.Yellow},this.collider={showAll:!1,showBounds:!1,boundsColor:X.Blue,showOwner:!1,showGeometry:!0,geometryColor:X.Green,geometryLineWidth:1,geometryPointSize:.5},this.physics={showAll:!1,showBroadphaseSpacePartitionDebug:!1,showCollisionNormals:!1,collisionNormalColor:X.Cyan,showCollisionContacts:!0,contactSize:2,collisionContactColor:X.Red},this.motion={showAll:!1,showVelocity:!1,velocityColor:X.Yellow,showAcceleration:!1,accelerationColor:X.Red},this.body={showAll:!1,showCollisionGroup:!1,showCollisionType:!1,showSleeping:!1,showMotion:!1,showMass:!1},this.camera={showAll:!1,showFocus:!1,focusColor:X.Red,showZoom:!1},this.tilemap={showAll:!1,showGrid:!1,gridColor:X.Red,gridWidth:.5,showSolidBounds:!1,solidBoundsColor:X.fromHex("#8080807F"),showColliderGeometry:!0},this.isometric={showAll:!1,showPosition:!1,positionColor:X.Yellow,positionSize:1,showGrid:!1,gridColor:X.Red,gridWidth:1,showColliderGeometry:!0},this._engine=t,this.colorBlindMode=new ca(this._engine)}useTestClock(){const t=this._engine.clock,e=t.isRunning();t.stop();const i=t.toTestClock();return e&&i.start(),this._engine.clock=i,i}useStandardClock(){const t=this._engine.clock,e=t.isRunning();t.stop();const i=t.toStandardClock();return e&&i.start(),this._engine.clock=i,i}}class ro{constructor(){this._id=0,this._delta=0,this._fps=0,this._actorStats={alive:0,killed:0,ui:0,get remaining(){return this.alive-this.killed},get total(){return this.remaining+this.ui}},this._durationStats={update:0,draw:0,get total(){return this.update+this.draw}},this._physicsStats=new Co,this._graphicsStats={drawCalls:0,drawnImages:0}}reset(t){t?(this.id=t.id,this.delta=t.delta,this.fps=t.fps,this.actors.alive=t.actors.alive,this.actors.killed=t.actors.killed,this.actors.ui=t.actors.ui,this.duration.update=t.duration.update,this.duration.draw=t.duration.draw,this._physicsStats.reset(t.physics),this.graphics.drawCalls=t.graphics.drawCalls,this.graphics.drawnImages=t.graphics.drawnImages):(this.id=this.delta=this.fps=0,this.actors.alive=this.actors.killed=this.actors.ui=0,this.duration.update=this.duration.draw=0,this._physicsStats.reset(),this.graphics.drawnImages=this.graphics.drawCalls=0)}clone(){const t=new ro;return t.reset(this),t}get id(){return this._id}set id(t){this._id=t}get delta(){return this._delta}set delta(t){this._delta=t}get fps(){return this._fps}set fps(t){this._fps=t}get actors(){return this._actorStats}get duration(){return this._durationStats}get physics(){return this._physicsStats}get graphics(){return this._graphicsStats}}class Co{constructor(){this._pairs=0,this._collisions=0,this._contacts=new Map,this._fastBodies=0,this._fastBodyCollisions=0,this._broadphase=0,this._narrowphase=0}reset(t){t?(this.pairs=t.pairs,this.collisions=t.collisions,this.contacts=t.contacts,this.fastBodies=t.fastBodies,this.fastBodyCollisions=t.fastBodyCollisions,this.broadphase=t.broadphase,this.narrowphase=t.narrowphase):(this.pairs=this.collisions=this.fastBodies=0,this.fastBodyCollisions=this.broadphase=this.narrowphase=0,this.contacts.clear())}clone(){const t=new Co;return t.reset(this),t}get pairs(){return this._pairs}set pairs(t){this._pairs=t}get collisions(){return this._collisions}set collisions(t){this._collisions=t}get contacts(){return this._contacts}set contacts(t){this._contacts=t}get fastBodies(){return this._fastBodies}set fastBodies(t){this._fastBodies=t}get fastBodyCollisions(){return this._fastBodyCollisions}set fastBodyCollisions(t){this._fastBodyCollisions=t}get broadphase(){return this._broadphase}set broadphase(t){this._broadphase=t}get narrowphase(){return this._narrowphase}set narrowphase(t){this._narrowphase=t}}class zo{on(t,e){this._nativeHandlers[t]&&this.off(t,this._nativeHandlers[t]),this._nativeHandlers[t]=this._decorate(e),this.nativeComponent.addEventListener(t,this._nativeHandlers[t])}off(t,e){e||(e=this._nativeHandlers[t]),this.nativeComponent.removeEventListener(t,e),this._nativeHandlers[t]=null}_decorate(t){return e=>{this._paused||t(e)}}pause(){this._paused=!0}resume(){this._paused=!1}clear(){for(const t in this._nativeHandlers)this.off(t)}constructor(t){this.nativeComponent=t,this._paused=!1,this._nativeHandlers={}}}class da{constructor(t,e){this._windowGlobal=t,this._documentGlobal=e,this._windowComponent=new zo(this._windowGlobal),this._documentComponent=new zo(this._documentGlobal)}get window(){return this._windowComponent}get document(){return this._documentComponent}pause(){this.window.pause(),this.document.pause()}resume(){this.window.resume(),this.document.resume()}clear(){this.window.clear(),this.document.clear()}}const ua={pixelArtSampler:!1,nativeContextAntialiasing:!1,multiSampleAntialiasing:!0,filtering:yt.Blended,canvasImageRendering:"auto"},pa={pixelArtSampler:!0,nativeContextAntialiasing:!1,multiSampleAntialiasing:!0,filtering:yt.Blended,canvasImageRendering:"auto"};class fa{constructor(t){var e;this._samplePeriod=100,this._currentFrameTime=0,this._frames=0,this._previousSampleTime=0,this._beginFrameTime=0,this._fps=t.initialFps,this._samplePeriod=(e=t.samplePeriod)!==null&&e!==void 0?e:this._samplePeriod,this._currentFrameTime=1e3/t.initialFps,this._nowFn=t.nowFn,this._previousSampleTime=this._nowFn()}start(){this._beginFrameTime=this._nowFn()}end(){this._frames++;const t=this._nowFn();this._currentFrameTime=t-this._beginFrameTime,t>=this._previousSampleTime+this._samplePeriod&&(this._fps=this._frames*1e3/(t-this._previousSampleTime),this._previousSampleTime=t,this._frames=0)}get fps(){return this._fps}get instant(){return 1e3/this._currentFrameTime}}class Go{constructor(t){var e,i,n;this._onFatalException=()=>{},this._maxFps=1/0,this._lastTime=0,this._elapsed=1,this._scheduledCbs=[],this._totalElapsed=0,this._options=t,this.tick=t.tick,this._lastTime=(e=this.now())!==null&&e!==void 0?e:0,this._maxFps=(i=t.maxFps)!==null&&i!==void 0?i:this._maxFps,this._onFatalException=(n=t.onFatalException)!==null&&n!==void 0?n:this._onFatalException,this.fpsSampler=new fa({initialFps:60,nowFn:()=>this.now()})}elapsed(){return this._elapsed}now(){return performance.now()}toTestClock(){return new ga({...this._options,defaultUpdateMs:16.6})}toStandardClock(){return new jo({...this._options})}setFatalExceptionHandler(t){this._onFatalException=t}schedule(t,e=0,i="preframe"){const n=this._totalElapsed+e;this._scheduledCbs.push([t,n,i])}__runScheduledCbs(t="preframe"){for(let e=this._scheduledCbs.length-1;e>-1;e--)t===this._scheduledCbs[e][2]&&this._scheduledCbs[e][1]<=this._totalElapsed&&(this._scheduledCbs[e][0](this._elapsed),this._scheduledCbs.splice(e,1))}update(t){try{this.fpsSampler.start();const e=this.now();let i=e-this._lastTime||1;const n=1e3/this._maxFps;if(i>=n){let a=0;n!==0&&(a=i%n,i=i-a),i>200&&(i=1),this._elapsed=t||i,this._totalElapsed+=this._elapsed,this.__runScheduledCbs("preframe"),this.tick(t||i),this.__runScheduledCbs("postframe"),n!==0?this._lastTime=e-a:this._lastTime=e,this.fpsSampler.end()}}catch(e){this._onFatalException(e),this.stop()}}}class jo extends Go{constructor(t){super(t),this._running=!1}isRunning(){return this._running}start(){if(this._running)return;this._running=!0;const t=()=>{if(this._running)try{this._requestId=window.requestAnimationFrame(t),this.update()}catch(e){throw window.cancelAnimationFrame(this._requestId),e}};t()}stop(){window.cancelAnimationFrame(this._requestId),this._running=!1}}class ga extends Go{constructor(t){super({...t}),this._logger=ft.getInstance(),this._running=!1,this._currentTime=0,this._updateMs=t.defaultUpdateMs}now(){var t;return(t=this._currentTime)!==null&&t!==void 0?t:0}isRunning(){return this._running}start(){this._running=!0}stop(){this._running=!1}step(t){const e=t??this._updateMs;this._running?(this.update(e),this._currentTime+=e):this._logger.warn("The clock is not running, no step will be performed")}run(t,e){for(let i=0;i<t;i++)this.step(e??this._updateMs)}}var Ra=__webpack_require__(4296);class _a{constructor(){this._toasterCss=Ra.A.toString(),this._isInitialized=!1}_initialize(){this._isInitialized||(this._container=document.createElement("div"),this._container.id="ex-toast-container",document.body.appendChild(this._container),this._isInitialized=!0,this._styleBlock=document.createElement("style"),this._styleBlock.textContent=this._toasterCss,document.head.appendChild(this._styleBlock))}dispose(){this._container.parentElement.removeChild(this._container),this._styleBlock.parentElement.removeChild(this._styleBlock),this._isInitialized=!1}_createFragment(t){const e=document.createElement("span");return e.innerText=t,e}toast(t,e,i){this._initialize();const n=document.createElement("div");n.className="ex-toast-message";const a=t.split("[LINK]").map(St=>this._createFragment(St));if(e){const St=document.createElement("a");St.href=e,i?St.innerText=i:St.innerText=e,a.splice(1,0,St)}const m=document.createElement("div");a.forEach(St=>{m.appendChild(St)}),n.appendChild(m);const U=document.createElement("button");U.innerText="x",U.addEventListener("click",()=>{this._container.removeChild(n)}),n.appendChild(U);const mt=St=>{if(St.key==="Escape")try{this._container.removeChild(n)}catch{}document.removeEventListener("keydown",mt)};document.addEventListener("keydown",mt);const Et=this._container.firstChild;this._container.insertBefore(n,Et)}}const Fa={NavigationStart:"navigationstart",Navigation:"navigation",NavigationEnd:"navigationend"};class Aa{get isTransitioning(){return this._isTransitioning}constructor(t,e){this._engine=t,this.events=new l,this._logger=ft.getInstance(),this._initialized=!1,this.scenes={},this._sceneToInstance=new Map,this._sceneToLoader=new Map,this._sceneToTransition=new Map,this._loadedScenes=new Set,this._isTransitioning=!1,this.rootScene=this.currentScene=new In,this.add("root",this.rootScene),this.currentScene=this.rootScene,this.currentSceneName="root";for(const i in e){const n=e[i];this.add(i,n),i==="root"&&(this.rootScene=this.getSceneInstance("root"),this.currentScene=this.rootScene)}}async onInitialize(){if(!this._initialized)if(this._initialized=!0,this._deferredGoto){const t=this._deferredGoto,e=this._deferredTransition;this._deferredGoto=null,this._deferredTransition=null,await this.swapScene(t),e&&await this.playTransition(e)}else await this.swapScene("root")}get isInitialized(){return this._initialized}configureStart(t,e){const i=e?.loader;i instanceof Qn?this.mainLoader=i:ar(i)?this.mainLoader=new i:this.mainLoader=new oi;let n;if(e){const{inTransition:a}=e;n=a}this.startScene=t,n?this.swapScene(this.startScene).then(()=>{this.playTransition(n)}):this.swapScene(this.startScene),this.currentSceneName=this.startScene}_getLoader(t){return this._sceneToLoader.get(t)}_getInTransition(t){var e;const i=this.scenes[t];return i instanceof In||Gn(i)?null:(e=i?.transitions)===null||e===void 0?void 0:e.in}_getOutTransition(t){var e;const i=this.scenes[t];return i instanceof In||Gn(i)?null:(e=i?.transitions)===null||e===void 0?void 0:e.out}getDeferredScene(){const t=this.getSceneDefinition(this._deferredGoto);return this._deferredGoto&&t?t:null}getSceneDefinition(t){const e=this.scenes[t];if(e instanceof In||Gn(e))return e;if(e)return e.scene}getSceneName(t){for(const[e,i]of Object.entries(this.scenes))if(i instanceof In){if(t===i)return e}else if(!Gn(i)&&t===i.scene)return e;for(const[e,i]of Object.entries(this.scenes))if(Gn(i)){if(t.constructor===i)return e}else if(!(i instanceof In)&&t.constructor===i.scene)return e;return null}assertAdded(t){return this}assertRemoved(t){return this}add(t,e){if(!(e instanceof In)&&!Gn(e)){const{loader:i,transitions:n}=e,{in:a,out:m}=n??{};this._sceneToTransition.set(t,{in:a,out:m}),ar(i)?this._sceneToLoader.set(t,new i):this._sceneToLoader.set(t,i)}return this.scenes[t]&&this._logger.warn("Scene",t,"already exists overwriting"),this.scenes[t]=e,this.assertAdded(t)}remove(t){if(t instanceof In||Gn(t)){const e=t;for(const i in this.scenes)if(this.scenes.hasOwnProperty(i)){const n=this.scenes[i];let a;if(n instanceof In||Gn(n)?a=n:a=n.scene,a===e){if(i===this.currentSceneName)throw new Error(`Cannot remove a currently active scene: ${i}`);this._sceneToInstance.delete(i),this._sceneToTransition.delete(i),this._sceneToLoader.delete(i),delete this.scenes[i]}}}if(typeof t=="string"){if(t===this.currentSceneName)throw new Error(`Cannot remove a currently active scene: ${t}`);this._sceneToInstance.delete(t),this._sceneToTransition.delete(t),this._sceneToLoader.delete(t),delete this.scenes[t]}}async goto(t,e){var i,n,a,m,U,mt;const Et=this.getSceneInstance(t);if(!Et){this._logger.warn(`Scene ${t} does not exist! Check the name, are you sure you added it?`);return}const St=this.currentSceneName,Lt=(n=(i=this._engine.input)===null||i===void 0?void 0:i.enabled)!==null&&n!==void 0?n:!0;this._isTransitioning=!0;const Kt=(a=this.getSceneInstance(St))===null||a===void 0?void 0:a.onTransition("out"),ne=Et?.onTransition("in");e={sourceOut:(m=this._getOutTransition(this.currentSceneName))!==null&&m!==void 0?m:Kt,destinationIn:(U=this._getInTransition(t))!==null&&U!==void 0?U:ne,...e};const{sourceOut:ae,destinationIn:ke,sceneActivationData:ze}=e,ye=ae??this._getOutTransition(this.currentSceneName),we=ke??this._getInTransition(t),He=ye?.hideLoader||we?.hideLoader;He&&this.maybeLoadScene(t,He),this._emitEvent("navigationstart",St,t),await this.playTransition(ye),await this.maybeLoadScene(t,He),await we?.onPreviousSceneDeactivate(this.currentScene),await this.swapScene(t,ze),this._emitEvent("navigation",St,t),await this.playTransition(we),this._emitEvent("navigationend",St,t),(mt=this._engine.input)===null||mt===void 0||mt.toggleEnabled(Lt),this._isTransitioning=!1}getSceneInstance(t){const e=this.getSceneDefinition(t);if(!e)return;if(this._sceneToInstance.has(t))return this._sceneToInstance.get(t);if(e instanceof In)return this._sceneToInstance.set(t,e),e;const i=new e;return this._sceneToInstance.set(t,i),i}async maybeLoadScene(t,e=!1){var i;const n=(i=this._getLoader(t))!==null&&i!==void 0?i:new Qn,a=this.getSceneDefinition(t),m=this.getSceneInstance(t);a&&m&&!this._loadedScenes.has(m)&&(m.onPreLoad(n),m.events.emit("preload",{loader:n}),e?this._engine.load(n,e):await this._engine.load(n),this._loadedScenes.add(m))}async playTransition(t){var e,i,n,a,m,U,mt;if(!this.isInitialized){this._deferredTransition=t;return}if(t){this.currentTransition=t;const Et=this._engine.currentScene,St=(i=(e=Et.input)===null||e===void 0?void 0:e.enabled)!==null&&i!==void 0?i:!0;(n=Et.input)===null||n===void 0||n.toggleEnabled(!t.blockInput),(a=this._engine.input)===null||a===void 0||a.toggleEnabled(!t.blockInput),await this.currentTransition.play(this._engine),(m=Et.input)===null||m===void 0||m.toggleEnabled(St)}(U=this.currentTransition)===null||U===void 0||U.kill(),(mt=this.currentTransition)===null||mt===void 0||mt.reset(),this.currentTransition=null}async swapScene(t,e){const i=this._engine;if(!this.isInitialized){this._deferredGoto=t;return}const n=this.getSceneInstance(t);if(n){const a=this.currentScene,m=n;if(this._logger.debug("Going to scene:",t),this.currentScene.isInitialized){const Et={engine:i,previousScene:a,nextScene:m};await this.currentScene._deactivate(Et),this.currentScene.events.emit("deactivate",new er(Et,this.currentScene))}const U=this._sceneToLoader.get(t);await U?.areResourcesLoaded(),this.currentScene=m,this.currentSceneName=t,i.screen.setCurrentCamera(m.camera),await this.currentScene._initialize(i);const mt={engine:i,previousScene:a,nextScene:m,data:e};await this.currentScene._activate(mt),this.currentScene.events.emit("activate",new is(mt,this.currentScene))}else this._logger.error("Scene",t,"does not exist!")}_emitEvent(t,e,i){const n=this.getSceneDefinition(e),a=this.getSceneDefinition(i);this.events.emit(t,{sourceScene:n,sourceName:e,destinationScene:a,destinationName:i})}}function Na(){const h={scope:(t,e)=>(h.value=t,e()),value:void 0};return h}function Oa(h){return h.value}I();const za={FallbackGraphicsContext:"fallbackgraphicscontext",Initialize:"initialize",Visible:"visible",Hidden:"hidden",Start:"start",Stop:"stop",PreUpdate:"preupdate",PostUpdate:"postupdate",PreFrame:"preframe",PostFrame:"postframe",PreDraw:"predraw",PostDraw:"postdraw"};var tr;(function(h){h[h.None=0]="None",h[h.Canvas=1]="Canvas",h[h.All=2]="All"})(tr||(tr={}));class pn{static useEngine(){const t=Oa(pn.Context);if(!t)throw new Error("Cannot inject engine with `useEngine()`, `useEngine()` was called outside of Engine lifecycle scope.");return t}get canvasWidth(){return this.screen.canvasWidth}get halfCanvasWidth(){return this.screen.halfCanvasWidth}get canvasHeight(){return this.screen.canvasHeight}get halfCanvasHeight(){return this.screen.halfCanvasHeight}get drawWidth(){return this.screen.drawWidth}get halfDrawWidth(){return this.screen.halfDrawWidth}get drawHeight(){return this.screen.drawHeight}get halfDrawHeight(){return this.screen.halfDrawHeight}get isHiDpi(){return this.screen.isHiDpi}get stats(){return this.debug.stats}get currentScene(){return this.director.currentScene}get currentSceneName(){return this.director.currentSceneName}get rootScene(){return this.director.rootScene}get scenes(){return this.director.scenes}get isFullscreen(){return this.screen.isFullScreen}get displayMode(){return this.screen.displayMode}get pixelRatio(){return this.screen.pixelRatio}get isDebug(){return this._isDebug}get snapToPixel(){return this.graphicsContext.snapToPixel}set snapToPixel(t){this.graphicsContext.snapToPixel=t}emit(t,e){this.events.emit(t,e)}on(t,e){return this.events.on(t,e)}once(t,e){return this.events.once(t,e)}off(t,e){this.events.off(t,e)}constructor(t){var e,i,n,a,m,U,mt,Et;this.scope=He=>pn.Context.scope(this,He),this.version=Yo,this.events=new l,this.maxFps=Number.POSITIVE_INFINITY,this._inputEnabled=!0,this._suppressPlayButton=!1,this.pauseAudioWhenHidden=!0,this._isDebug=!1,this.enableCanvasTransparency=!0,this.onFatalException=He=>{ft.getInstance().fatal(He,He.stack)},this._toaster=new _a,this._timescale=1,this._isInitialized=!1,this._originalOptions={},this._handleWebGLContextLost=He=>{var Pe;He.preventDefault(),this.clock.stop(),this._logger.fatalOnce("WebGL Graphics Lost",He);const vi=document.createElement("div");vi.id="ex-webgl-graphics-context-lost",vi.style.position="absolute",vi.style.zIndex="99",vi.style.left="50%",vi.style.top="50%",vi.style.display="flex",vi.style.flexDirection="column",vi.style.transform="translate(-50%, -50%)",vi.style.backgroundColor="white",vi.style.padding="10px",vi.style.borderStyle="solid 1px";const Ji=document.createElement("div");if(Ji.innerHTML=`
      <h1>There was an issue rendering, please refresh the page.</h1>
      <div>
        <p>WebGL Graphics Context Lost</p>

        <button id="ex-webgl-graphics-reload">Refresh Page</button>

        <p>There are a few reasons this might happen:</p>
        <ul>
          <li>Two or more pages are placing a high demand on the GPU</li>
          <li>Another page or operation has stalled the GPU and the browser has decided to reset the GPU</li>
          <li>The computer has multiple GPUs and the user has switched between them</li>
          <li>Graphics driver has crashed or restarted</li>
          <li>Graphics driver was updated</li>
        </ul>
      </div>
    `,vi.appendChild(Ji),!((Pe=this.canvas)===null||Pe===void 0)&&Pe.parentElement){this.canvas.parentElement.appendChild(vi);const Xe=Ji.querySelector("#ex-webgl-graphics-reload");Xe?.addEventListener("click",()=>location.reload())}},this._performanceThresholdTriggered=!1,this._fpsSamples=[],this._disposed=!1,this._isLoading=!1,this._hideLoader=!1,this._isReadyFuture=new N,this.currentFrameElapsedMs=0,this.currentFrameLagMs=0,this._lagMs=0,this._screenShotRequests=[],t={...pn._DEFAULT_ENGINE_OPTIONS,...t},this._originalOptions=t,B.freeze(),this.browser=new da(window,document);const St=new Ai;if(!t.suppressMinimumBrowserFeatureDetection&&!(this._compatible=St.test())){const He=document.createElement("div");if(He.innerText="Sorry, your browser does not support all the features needed for Excalibur",document.body.appendChild(He),St.failedTests.forEach(function(Pe){const vi=document.createElement("div");vi.innerText="Browser feature missing "+Pe,document.body.appendChild(vi)}),t.canvasElementId){const Pe=document.getElementById(t.canvasElementId);Pe&&Pe.parentElement.removeChild(Pe)}return}else this._compatible=!0;if(console.log&&!t.suppressConsoleBootMessage&&(console.log(`%cPowered by Excalibur.js (v${Yo})`,"background: #176BAA; color: white; border-radius: 5px; padding: 15px; font-size: 1.5em; line-height: 80px;"),console.log(`
      /| ________________
O|===|* >________________>
      \\|`),console.log("Visit","http://excaliburjs.com","for more information")),t.suppressPlayButton&&(this._suppressPlayButton=!0),this._logger=ft.getInstance(),this._logger.defaultLevel===pt.Debug&&St.logBrowserFeatures(),this._logger.debug("Building engine..."),this.canvasElementId=t.canvasElementId,t.canvasElementId){if(this._logger.debug("Using Canvas element specified: "+t.canvasElementId),document.getElementById(t.canvasElementId)===null)throw new Error("Cannot find existing element in the DOM, please ensure element is created prior to engine creation.");this.canvas=document.getElementById(t.canvasElementId)}else t.canvasElement?(this._logger.debug("Using Canvas element specified:",t.canvasElement),this.canvas=t.canvasElement):(this._logger.debug("Using generated canvas element"),this.canvas=document.createElement("canvas"));let Lt=(e=t.displayMode)!==null&&e!==void 0?e:wi.Fixed;t.width&&t.height||t.viewport?(t.displayMode===void 0&&(Lt=wi.Fixed),this._logger.debug("Engine viewport is size "+t.width+" x "+t.height)):t.displayMode||(this._logger.debug("Engine viewport is fit"),Lt=wi.FitScreen),this._originalDisplayMode=Lt;let Kt,ne,ae,ke,ze,ye;typeof t.antialiasing=="object"?{pixelArtSampler:Kt,nativeContextAntialiasing:ae,multiSampleAntialiasing:ye,filtering:ze,canvasImageRendering:ke}={...t.pixelArt?pa:ua,...t.antialiasing}:(Kt=!!t.pixelArt,ae=!1,ye=t.antialiasing,ke=t.antialiasing?"auto":"pixelated",ze=t.antialiasing?yt.Blended:yt.Pixel),ae&&ye&&this._logger.warnOnce("Cannot use antialias setting nativeContextAntialiasing and multiSampleAntialiasing at the same time, they are incompatible settings. If you aren't sure use multiSampleAntialiasing"),t.pixelArt&&(ne=.25),(!t.antialiasing||ze===yt.Pixel)&&(ne=0),ne=(n=(i=t.uvPadding)!==null&&i!==void 0?i:ne)!==null&&n!==void 0?n:.01;let we=B.isEnabled("use-canvas-context");if(!we)try{this.graphicsContext=new hi({canvasElement:this.canvas,enableTransparency:this.enableCanvasTransparency,pixelArtSampler:Kt,antialiasing:ae,multiSampleAntialiasing:ye,uvPadding:ne,powerPreference:t.powerPreference,backgroundColor:t.backgroundColor,snapToPixel:t.snapToPixel,useDrawSorting:t.useDrawSorting,handleContextLost:(a=t.handleContextLost)!==null&&a!==void 0?a:this._handleWebGLContextLost,handleContextRestored:t.handleContextRestored})}catch(He){this._logger.warn(`Excalibur could not load webgl for some reason (${He.message}) and loaded a Canvas 2D fallback. Some features of Excalibur will not work in this mode. 

Read more about this issue at https://excaliburjs.com/docs/performance`),we=!0}we&&(this.graphicsContext=new ai({canvasElement:this.canvas,enableTransparency:this.enableCanvasTransparency,antialiasing:ae,backgroundColor:t.backgroundColor,snapToPixel:t.snapToPixel,useDrawSorting:t.useDrawSorting})),this.screen=new xi({canvas:this.canvas,context:this.graphicsContext,antialiasing:ae,canvasImageRendering:ke,browser:this.browser,viewport:(m=t.viewport)!==null&&m!==void 0?m:t.width&&t.height?{width:t.width,height:t.height}:Qi.SVGA,resolution:t.resolution,displayMode:Lt,pixelRatio:t.suppressHiDPIScaling?1:(U=t.pixelRatio)!==null&&U!==void 0?U:null}),Tt.filtering=ze,t.backgroundColor&&(this.backgroundColor=t.backgroundColor.clone()),this.grabWindowFocus=t.grabWindowFocus,this.pointerScope=t.pointerScope,this.maxFps=(mt=t.maxFps)!==null&&mt!==void 0?mt:this.maxFps,this.fixedUpdateFps=(Et=t.fixedUpdateFps)!==null&&Et!==void 0?Et:this.fixedUpdateFps,this.clock=new jo({maxFps:this.maxFps,tick:this._mainloop.bind(this),onFatalException:He=>this.onFatalException(He)}),this.enableCanvasTransparency=t.enableCanvasTransparency,typeof t.physics=="boolean"?this.physics={...as,...Nn(),enabled:t.physics}:this.physics={...as,...Nn(),...t.physics},this.debug=new ha(this),this.director=new Aa(this,t.scenes),this._initialize(t),window.___EXCALIBUR_DEVTOOL=this,pn.InstanceCount++}_monitorPerformanceThresholdAndTriggerFallback(){const{allow:t}=this._originalOptions.configurePerformanceCanvas2DFallback;let{threshold:e,showPlayerMessage:i}=this._originalOptions.configurePerformanceCanvas2DFallback;if(e===void 0&&(e=pn._DEFAULT_ENGINE_OPTIONS.configurePerformanceCanvas2DFallback.threshold),i===void 0&&(i=pn._DEFAULT_ENGINE_OPTIONS.configurePerformanceCanvas2DFallback.showPlayerMessage),!B.isEnabled("use-canvas-context")&&t&&this.ready&&!this._performanceThresholdTriggered){this._fpsSamples.length===e.numberOfFrames&&this._fpsSamples.splice(0,1),this._fpsSamples.push(this.clock.fpsSampler.fps);let n=0;for(let m=0;m<this._fpsSamples.length;m++)n+=this._fpsSamples[m];const a=n/this._fpsSamples.length;this._fpsSamples.length===e.numberOfFrames&&a<=e.fps&&(this._performanceThresholdTriggered=!0,this._logger.warn(`Switching to browser 2D Canvas fallback due to performance. Some features of Excalibur will not work in this mode.
this might mean your browser doesn't have webgl enabled or hardware acceleration is unavailable.

If in Chrome:
  * Visit Settings > Advanced > System, and ensure "Use Hardware Acceleration" is checked.
  * Visit chrome://flags/#ignore-gpu-blocklist and ensure "Override software rendering list" is "enabled"
If in Firefox, visit about:config
  * Ensure webgl.disabled = false
  * Ensure webgl.force-enabled = true
  * Ensure layers.acceleration.force-enabled = true

Read more about this issue at https://excaliburjs.com/docs/performance`),i&&this._toaster.toast("Excalibur is encountering performance issues. It's possible that your browser doesn't have hardware acceleration enabled. Visit [LINK] for more information and potential solutions.","https://excaliburjs.com/docs/performance"),this.useCanvas2DFallback(),this.emit("fallbackgraphicscontext",this.graphicsContext))}}useCanvas2DFallback(){var t,e,i;const n=this.canvas.cloneNode(!1);this.canvas.parentNode.replaceChild(n,this.canvas),this.canvas=n;const a={...this._originalOptions,antialiasing:this.getAntialiasing()},m=this._originalDisplayMode;this.graphicsContext=new ai({canvasElement:this.canvas,enableTransparency:this.enableCanvasTransparency,antialiasing:a.antialiasing,backgroundColor:a.backgroundColor,snapToPixel:a.snapToPixel,useDrawSorting:a.useDrawSorting}),this.screen&&this.screen.dispose(),this.screen=new xi({canvas:this.canvas,context:this.graphicsContext,antialiasing:(t=a.antialiasing)!==null&&t!==void 0?t:!0,browser:this.browser,viewport:(e=a.viewport)!==null&&e!==void 0?e:a.width&&a.height?{width:a.width,height:a.height}:Qi.SVGA,resolution:a.resolution,displayMode:m,pixelRatio:a.suppressHiDPIScaling?1:(i=a.pixelRatio)!==null&&i!==void 0?i:null}),this.screen.setCurrentCamera(this.currentScene.camera),this.input.pointers.detach();const U=a&&a.pointerScope===d.Document?document:this.canvas;this.input.pointers=this.input.pointers.recreate(U,this),this.input.pointers.init()}dispose(){this._disposed||(this._disposed=!0,this.stop(),this.input.toggleEnabled(!1),this.canvas.parentNode.removeChild(this.canvas),this.canvas=null,this.screen.dispose(),this.graphicsContext.dispose(),this.graphicsContext=null,pn.InstanceCount--)}isDisposed(){return this._disposed}getWorldBounds(){return this.screen.getWorldBounds()}get timescale(){return this._timescale}set timescale(t){if(t<=0){ft.getInstance().error("Cannot set engine.timescale to a value of 0 or less than 0.");return}this._timescale=t}addTimer(t){return this.currentScene.addTimer(t)}removeTimer(t){return this.currentScene.removeTimer(t)}addScene(t,e){return this.director.add(t,e),this}removeScene(t){this.director.remove(t)}add(t){if(arguments.length===2){this.director.add(arguments[0],arguments[1]);return}const e=this.director.getDeferredScene();e instanceof In?e.add(t):this.currentScene.add(t)}remove(t){t instanceof js&&this.currentScene.remove(t),(t instanceof In||Gn(t))&&this.removeScene(t),typeof t=="string"&&this.removeScene(t)}async goto(t,e){await this.scope(async()=>{await this.director.goto(t,e)})}async goToScene(t,e){await this.scope(async()=>{await this.director.goto(t,e)})}screenToWorldCoordinates(t){return this.screen.screenToWorldCoordinates(t)}worldToScreenCoordinates(t){return this.screen.worldToScreenCoordinates(t)}_initialize(t){var e,i;this.pageScrollPreventionMode=t.scrollPreventionMode;const n=t&&t.pointerScope===d.Document?document:this.canvas,a=(i=(e=this._originalOptions)===null||e===void 0?void 0:e.grabWindowFocus)!==null&&i!==void 0?i:!0;this.input=new Oo({pointerTarget:n,grabWindowFocus:a,engine:this}),this.inputMapper=this.input.inputMapper,this.browser.document.on("visibilitychange",()=>{document.visibilityState==="hidden"?(this.events.emit("hidden",new ve(this)),this._logger.debug("Window hidden")):document.visibilityState==="visible"&&(this.events.emit("visible",new Ne(this)),this._logger.debug("Window visible"))}),!this.canvasElementId&&!t.canvasElement&&document.body.appendChild(this.canvas)}toggleInputEnabled(t){this._inputEnabled=t,this.input.toggleEnabled(this._inputEnabled)}onInitialize(t){}setAntialiasing(t){this.screen.antialiasing=t}getAntialiasing(){return this.screen.antialiasing}get isInitialized(){return this._isInitialized}async _overrideInitialize(t){this.isInitialized||(await this.director.onInitialize(),await this.onInitialize(t),this.events.emit("initialize",new Rn(t,this)),this._isInitialized=!0)}_update(t){var e;if(this._isLoading){(e=this._loader)===null||e===void 0||e.onUpdate(this,t),this.input.update();return}this.clock.__runScheduledCbs("preupdate"),this._preupdate(t),this.currentScene.update(this,t),this.graphicsContext.updatePostProcessors(t),this.clock.__runScheduledCbs("postupdate"),this._postupdate(t),this.input.update()}_preupdate(t){this.emit("preupdate",new en(this,t,this)),this.onPreUpdate(this,t)}onPreUpdate(t,e){}_postupdate(t){this.emit("postupdate",new ln(this,t,this)),this.onPostUpdate(this,t)}onPostUpdate(t,e){}_draw(t){var e,i;if(this.graphicsContext.beginDrawLifecycle(),this.graphicsContext.clear(),this.clock.__runScheduledCbs("predraw"),this._predraw(this.graphicsContext,t),this._isLoading){this._hideLoader||((e=this._loader)===null||e===void 0||e.canvas.draw(this.graphicsContext,0,0),this.clock.__runScheduledCbs("postdraw"),this.graphicsContext.flush(),this.graphicsContext.endDrawLifecycle());return}this.graphicsContext.backgroundColor=(i=this.currentScene.backgroundColor)!==null&&i!==void 0?i:this.backgroundColor,this.currentScene.draw(this.graphicsContext,t),this.clock.__runScheduledCbs("postdraw"),this._postdraw(this.graphicsContext,t),this.graphicsContext.flush(),this.graphicsContext.endDrawLifecycle(),this._checkForScreenShots()}_predraw(t,e){this.emit("predraw",new vs(t,e,this)),this.onPreDraw(t,e)}onPreDraw(t,e){}_postdraw(t,e){this.emit("postdraw",new Bs(t,e,this)),this.onPostDraw(t,e)}onPostDraw(t,e){}showDebug(t){this._isDebug=t}toggleDebug(){return this._isDebug=!this._isDebug,this._isDebug}get loadingComplete(){return!this._isLoading}get ready(){return this._isReadyFuture.isCompleted}isReady(){return this._isReadyFuture.promise}async start(t,e){await this.scope(async()=>{if(!this._compatible)throw new Error("Excalibur is incompatible with your browser");this._isLoading=!0;let i;return t instanceof Qn?i=t:typeof t=="string"&&(this.director.configureStart(t,e),i=this.director.mainLoader),this._logger.debug("Starting game clock..."),this.browser.resume(),this.clock.start(),this._logger.debug("Game clock started"),await this.load(i??new oi),await this._overrideInitialize(this),this._isReadyFuture.resolve(),this.emit("start",new Es(this)),this._isReadyFuture.promise})}_mainloop(t){this.scope(()=>{this.emit("preframe",new Ft(this,this.stats.prevFrame));const e=t*this.timescale;this.currentFrameElapsedMs=e;const i=this.stats.prevFrame.id+1;this.stats.currFrame.reset(),this.stats.currFrame.id=i,this.stats.currFrame.delta=e,this.stats.currFrame.fps=this.clock.fpsSampler.fps,me.clear();const n=this.clock.now(),a=1e3/this.fixedUpdateFps;if(this.fixedUpdateFps)for(this._lagMs+=e;this._lagMs>=a;)this._update(a),this._lagMs-=a;else this._update(e);const m=this.clock.now();this.currentFrameLagMs=this._lagMs,this._draw(e);const U=this.clock.now();this.stats.currFrame.duration.update=m-n,this.stats.currFrame.duration.draw=U-m,this.stats.currFrame.graphics.drawnImages=me.DrawnImagesCount,this.stats.currFrame.graphics.drawCalls=me.DrawCallCount,this.emit("postframe",new gt(this,this.stats.currFrame)),this.stats.prevFrame.reset(this.stats.currFrame),this._monitorPerformanceThresholdAndTriggerFallback()})}stop(){this.clock.isRunning()&&(this.emit("stop",new gn(this)),this.browser.pause(),this.clock.stop(),this._logger.debug("Game stopped"))}isRunning(){return this.clock.isRunning()}screenshot(t=!1){return new Promise(i=>{this._screenShotRequests.push({preserveHiDPIResolution:t,resolve:i})})}_checkForScreenShots(){for(const t of this._screenShotRequests){const e=t.preserveHiDPIResolution?this.canvas.width:this.screen.resolution.width,i=t.preserveHiDPIResolution?this.canvas.height:this.screen.resolution.height,n=document.createElement("canvas");n.width=e,n.height=i;const a=n.getContext("2d");a.imageSmoothingEnabled=this.screen.antialiasing,a.drawImage(this.canvas,0,0,e,i);const m=new Image,U=n.toDataURL("image/png");m.src=U,t.resolve(m)}this._screenShotRequests.length=0}async load(t,e=!1){await this.scope(async()=>{try{if(t.isLoaded())return;this._loader=t,this._isLoading=!0,this._hideLoader=e,t instanceof oi&&(t.suppressPlayButton=t.suppressPlayButton||this._suppressPlayButton),this._loader.onInitialize(this),await t.load()}catch(i){this._logger.error("Error loading resources, things may not behave properly",i),await Promise.resolve()}finally{this._isLoading=!1,this._hideLoader=!1,this._loader=null}})}}pn.Context=Na(),pn.InstanceCount=0,pn._DEFAULT_ENGINE_OPTIONS={width:0,height:0,enableCanvasTransparency:!0,useDrawSorting:!0,configurePerformanceCanvas2DFallback:{allow:!1,showPlayerMessage:!1,threshold:{fps:20,numberOfFrames:100}},canvasElementId:"",canvasElement:void 0,snapToPixel:!1,antialiasing:!0,pixelArt:!1,powerPreference:"high-performance",pointerScope:d.Canvas,suppressConsoleBootMessage:null,suppressMinimumBrowserFeatureDetection:null,suppressHiDPIScaling:null,suppressPlayButton:null,grabWindowFocus:!0,scrollPreventionMode:tr.Canvas,backgroundColor:X.fromHex("#2185d0")};class Ga{constructor(){this._handlers={},this._wiredEventDispatchers=[],this._deferedHandlerRemovals=[]}clear(){this._handlers={},this._wiredEventDispatchers=[]}_processDeferredHandlerRemovals(){for(const t of this._deferedHandlerRemovals)this._removeHandler(t.name,t.handler);this._deferedHandlerRemovals.length=0}emit(t,e){if(this._processDeferredHandlerRemovals(),!t)return;t=t.toLowerCase(),(typeof e>"u"||e===null)&&(e=new Ri);let i,n;if(this._handlers[t])for(i=0,n=this._handlers[t].length,i;i<n;i++)this._handlers[t][i](e);for(i=0,n=this._wiredEventDispatchers.length,i;i<n;i++)this._wiredEventDispatchers[i].emit(t,e)}on(t,e){this._processDeferredHandlerRemovals(),t=t.toLowerCase(),this._handlers[t]||(this._handlers[t]=[]),this._handlers[t].push(e)}off(t,e){this._deferedHandlerRemovals.push({name:t,handler:e})}_removeHandler(t,e){t=t.toLowerCase();const i=this._handlers[t];if(i)if(!e)this._handlers[t].length=0;else{const n=i.indexOf(e);n>-1&&this._handlers[t].splice(n,1)}}once(t,e){this._processDeferredHandlerRemovals();const i=n=>{const a=n||new Ri;this.off(t,i),e(a)};this.on(t,i)}wire(t){t._wiredEventDispatchers.push(this)}unwire(t){const e=t._wiredEventDispatchers.indexOf(this);e>-1&&t._wiredEventDispatchers.splice(e,1)}}class ja extends Xs{get font(){return this._font}set font(t){this._font=t,this._text.font=t}get text(){return this._text.text}set text(t){this._text.text=t}get color(){return this._text.color}set color(t){this._text&&(this._text.color=t)}get opacity(){return this._text.opacity}set opacity(t){this._text.opacity=t}get spriteFont(){return this._spriteFont}set spriteFont(t){t&&(this._spriteFont=t,this._text.font=this._spriteFont)}constructor(t){super(t),this._font=new Zn,this._text=new fr({text:"",font:this._font});const{text:e,pos:i,x:n,y:a,spriteFont:m,font:U,color:mt}={text:"",...t};this.pos=i??(n&&a?O(n,a):this.pos),this.text=e??this.text,this.font=U??this.font,this.spriteFont=m??this.spriteFont,this._text.color=mt??this.color;const Et=this.get(Ms);Et.anchor=u.Zero,Et.use(this._text)}_initialize(t){super._initialize(t)}getTextWidth(){return this._text.width}}class ma extends js{getGraphics(){return this._graphics}addGraphic(t,e){this._graphics.push(t),this._gfx.visible=this.map.visible,this._gfx.opacity=this.map.opacity,e?.offset&&(this._gfx.offset=e.offset),this._gfx.localBounds=this._recalculateBounds()}_recalculateBounds(){let t=this._tileBounds.clone();for(const e of this._graphics){const i=O(this.map.graphicsOffset.x-this.map.tileWidth/2,this.map.graphicsOffset.y-(this.map.renderFromTopOfGraphic?0:e.height-this.map.tileHeight));t=t.combine(e.localBounds.translate(i))}return t}removeGraphic(t){const e=this._graphics.indexOf(t);e>-1&&this._graphics.splice(e,1),this._gfx.localBounds=this._recalculateBounds()}clearGraphics(){this._graphics.length=0,this._gfx.visible=!1,this._gfx.localBounds=this._recalculateBounds()}getColliders(){return this._colliders}addCollider(t){this._colliders.push(t),this.map.flagCollidersDirty()}removeCollider(t){const e=this._colliders.indexOf(t);e>-1&&this._colliders.splice(e,1),this.map.flagCollidersDirty()}clearColliders(){this._colliders.length=0,this.map.flagCollidersDirty()}get pos(){return this.map.tileToWorld(O(this.x,this.y))}get center(){return this.pos.add(O(0,this.map.tileHeight/2))}constructor(t,e,i,n){super([new fi,new Ms({offset:i??u.Zero,onPostDraw:(Kt,ne)=>this.draw(Kt,ne)}),new to(n)]),this.solid=!1,this.events=new l,this._tileBounds=new ut,this._graphics=[],this._colliders=[],this.data=new Map,this.x=t,this.y=e,this.map=n,this._transform=this.get(fi),this._isometricEntityComponent=this.get(to);const a=this.map.tileWidth/2,m=this.map.tileHeight/2,U=(this.x-this.y)*a,mt=(this.x+this.y)*m;this._transform.pos=O(U,mt),this._isometricEntityComponent.elevation=n.elevation,this._gfx=this.get(Ms),this._gfx.visible=!1;const Et=this.map.tileWidth,St=this.map.tileHeight,Lt=O(0,this.map.renderFromTopOfGraphic?St:0);this._gfx.localBounds=this._tileBounds=new ut({left:-Et/2,top:-St,right:Et/2,bottom:St}).translate(Lt)}draw(t,e){const i=this.map.tileWidth/2;t.save(),t.translate(-i,0);for(const n of this._graphics)n.draw(t,this.map.graphicsOffset.x,this.map.graphicsOffset.y-(this.map.renderFromTopOfGraphic?0:n.height-this.map.tileHeight));t.restore()}}class Ua extends js{constructor(t){super([new fi,new Hi({type:je.Fixed}),new Cs,new Dn,new qn((St,Lt)=>this.debug(St,Lt),!1)],t.name),this.elevation=0,this.visible=!0,this.opacity=1,this.renderFromTopOfGraphic=!1,this.graphicsOffset=O(0,0),this._forwardPointerEventToTile=St=>Lt=>{const Kt=this.getTileByPoint(Lt.worldPos);Kt&&Kt.events.emit(St,Lt)},this._collidersDirty=!1,this._originalOffsets=new WeakMap;const{pos:e,tileWidth:i,tileHeight:n,columns:a,rows:m,renderFromTopOfGraphic:U,graphicsOffset:mt,elevation:Et}=t;this.transform=this.get(fi),e&&(this.transform.pos=e),this.collider=this.get(Cs),this.collider&&this.collider.set(this._composite=new Ss([])),this.pointer=this.get(Dn),this.renderFromTopOfGraphic=U??this.renderFromTopOfGraphic,this.graphicsOffset=mt??this.graphicsOffset,this.elevation=Et??this.elevation,this.tileWidth=i,this.tileHeight=n,this.columns=a,this.rows=m,this.tiles=new Array(a*m);for(let St=0;St<m;St++)for(let Lt=0;Lt<a;Lt++){const Kt=new ma(Lt,St,this.graphicsOffset,this);this.tiles[Lt+St*a]=Kt,this.addChild(Kt)}this.pointer.localBounds=ut.fromDimension(i*a*this.transform.scale.x,n*m*this.transform.scale.y,O(.5,0)),this._setupPointerToTile()}_setupPointerToTile(){this.events.on("pointerup",this._forwardPointerEventToTile("pointerup")),this.events.on("pointerdown",this._forwardPointerEventToTile("pointerdown")),this.events.on("pointermove",this._forwardPointerEventToTile("pointermove")),this.events.on("pointercancel",this._forwardPointerEventToTile("pointercancel"))}update(){this._collidersDirty&&(this.updateColliders(),this._collidersDirty=!1)}flagCollidersDirty(){this._collidersDirty=!0}_getOrSetColliderOriginalOffset(t){if(this._originalOffsets.has(t))return this._originalOffsets.get(t);{const e=t.offset;return this._originalOffsets.set(t,e),e}}updateColliders(){this._composite.clearColliders();const t=this.get(fi).pos;for(const e of this.tiles)if(e.solid)for(const i of e.getColliders()){const n=this._getOrSetColliderOriginalOffset(i);i.offset=this.tileToWorld(O(e.x,e.y)).sub(t).add(n).sub(O(this.tileWidth/2,this.tileHeight)),i.owner=this,this._composite.addCollider(i)}this.collider.update()}worldToTile(t){t=t.sub(this.transform.globalPos);const e=this.tileWidth/2,i=this.tileHeight/2;return O(~~((t.x/e+t.y/i)/2),~~((t.y/i-t.x/e)/2))}tileToWorld(t){const e=this.tileWidth/2,i=this.tileHeight/2,n=(t.x-t.y)*e,a=(t.x+t.y)*i;return O(n,a).add(this.transform.pos)}getTile(t,e){return t<0||e<0||t>=this.columns||e>=this.rows?null:this.tiles[t+e*this.columns]}getTileByPoint(t){const e=this.worldToTile(t);return this.getTile(e.x,e.y)}_getMaxZIndex(){let t=Number.NEGATIVE_INFINITY;for(const e of this.tiles){const i=e.get(fi).z;i>t&&(t=i)}return t}debug(t,e){const{showAll:i,showPosition:n,positionColor:a,positionSize:m,showGrid:U,gridColor:mt,gridWidth:Et,showColliderGeometry:St}=e.isometric,{geometryColor:Lt,geometryLineWidth:Kt,geometryPointSize:ne}=e.collider;if(t.save(),t.z=this._getMaxZIndex()+.5,i||U){for(let ae=0;ae<this.rows+1;ae++){const ke=this.tileToWorld(O(0,ae)),ze=this.tileToWorld(O(this.columns,ae));t.drawLine(ke,ze,mt,Et)}for(let ae=0;ae<this.columns+1;ae++){const ke=this.tileToWorld(O(ae,0)),ze=this.tileToWorld(O(ae,this.rows));t.drawLine(ke,ze,mt,Et)}}if(i||n)for(const ae of this.tiles)t.drawCircle(this.tileToWorld(O(ae.x,ae.y)),m,a);if(i||St){for(const ae of this.tiles)if(ae.solid)for(const ke of ae.getColliders())ke.debug(t,Lt,{lineWidth:Kt,pointSize:ne})}t.restore()}}class Uo{constructor(t,e){this._stopped=!1,this._sequenceBuilder=e,this._sequenceContext=new $n(t),this._actionQueue=this._sequenceContext.getQueue(),this._sequenceBuilder(this._sequenceContext)}update(t){this._actionQueue.update(t)}isComplete(){return this._stopped||this._actionQueue.isComplete()}stop(){this._stopped=!0}reset(){this._stopped=!1,this._actionQueue.reset()}clone(t){return new Uo(t,this._sequenceBuilder)}}class Ha{constructor(t){this._actions=t}update(t){for(let e=0;e<this._actions.length;e++)this._actions[e].update(t)}isComplete(t){return this._actions.every(e=>e.isComplete(t))}reset(){this._actions.forEach(t=>t.reset())}stop(){this._actions.forEach(t=>t.stop())}}class Hr{constructor(t,e){this.bounds=t,this.options=e,this._defaultOptions={maxDepth:10,capacity:10,level:0},this.items=[],this._isDivided=!1,this.topLeft=null,this.topRight=null,this.bottomLeft=null,this.bottomRight=null,this.options={...this._defaultOptions,...e},this.halfWidth=t.width/2,this.halfHeight=t.height/2}_split(){this._isDivided=!0;const t={maxDepth:this.options.maxDepth,capacity:this.options.capacity,level:this.options.level+1};this.topLeft=new Hr(new ut({left:this.bounds.left,top:this.bounds.top,right:this.bounds.left+this.halfWidth,bottom:this.bounds.top+this.halfHeight}),t),this.topRight=new Hr(new ut({left:this.bounds.left+this.halfWidth,top:this.bounds.top,right:this.bounds.right,bottom:this.bounds.top+this.halfHeight}),t),this.bottomLeft=new Hr(new ut({left:this.bounds.left,top:this.bounds.top+this.halfHeight,right:this.bounds.left+this.halfWidth,bottom:this.bounds.bottom}),t),this.bottomRight=new Hr(new ut({left:this.bounds.left+this.halfWidth,top:this.bounds.top+this.halfHeight,right:this.bounds.right,bottom:this.bounds.bottom}),t)}_insertIntoSubNodes(t){var e,i,n,a;!((e=this.topLeft)===null||e===void 0)&&e.bounds.overlaps(t.bounds)&&this.topLeft.insert(t),!((i=this.topRight)===null||i===void 0)&&i.bounds.overlaps(t.bounds)&&this.topRight.insert(t),!((n=this.bottomLeft)===null||n===void 0)&&n.bounds.overlaps(t.bounds)&&this.bottomLeft.insert(t),!((a=this.bottomRight)===null||a===void 0)&&a.bounds.overlaps(t.bounds)&&this.bottomRight.insert(t)}insert(t){if(this._isDivided){this._insertIntoSubNodes(t);return}if(this.items.push(t),this.items.length>this.options.capacity&&this.options.level<this.options.maxDepth){this._isDivided||this._split();for(const e of this.items)this._insertIntoSubNodes(e);this.items.length=0}}remove(t){var e,i,n,a;if(this.bounds.overlaps(t.bounds)){if(!this._isDivided){const m=this.items.indexOf(t);m>-1&&this.items.splice(m,1);return}!((e=this.topLeft)===null||e===void 0)&&e.bounds.overlaps(t.bounds)&&this.topLeft.remove(t),!((i=this.topRight)===null||i===void 0)&&i.bounds.overlaps(t.bounds)&&this.topRight.remove(t),!((n=this.bottomLeft)===null||n===void 0)&&n.bounds.overlaps(t.bounds)&&this.bottomLeft.remove(t),!((a=this.bottomRight)===null||a===void 0)&&a.bounds.overlaps(t.bounds)&&this.bottomRight.remove(t)}}query(t){let e=this.items;return this._isDivided&&(this.topLeft.bounds.overlaps(t)&&(e=e.concat(this.topLeft.query(t))),this.topRight.bounds.overlaps(t)&&(e=e.concat(this.topRight.query(t))),this.bottomLeft.bounds.overlaps(t)&&(e=e.concat(this.bottomLeft.query(t))),this.bottomRight.bounds.overlaps(t)&&(e=e.concat(this.bottomRight.query(t)))),e=e.filter((i,n)=>e.indexOf(i)>=n),e}clear(){this.items=[],this._isDivided=!1,this.topLeft=null,this.topRight=null,this.bottomLeft=null,this.bottomRight=null}getAllItems(){let t=this.items;return this._isDivided&&(t=t.concat(this.topLeft.getAllItems()),t=t.concat(this.topRight.getAllItems()),t=t.concat(this.bottomLeft.getAllItems()),t=t.concat(this.bottomRight.getAllItems())),t=t.filter((e,i)=>t.indexOf(e)>=i),t}getTreeDepth(){return this._isDivided?1+Math.max(this.topLeft.getTreeDepth(),this.topRight.getTreeDepth(),this.bottomLeft.getTreeDepth(),this.bottomRight.getTreeDepth()):0}debug(t){this.bounds.draw(t,X.Yellow),this._isDivided&&(this.topLeft.bounds.draw(t,X.Yellow),this.topRight.bounds.draw(t,X.Yellow),this.bottomLeft.bounds.draw(t,X.Yellow),this.bottomRight.bounds.draw(t,X.Yellow))}}function Za(h){return!!h._initialize}function Wa(h){return!!h.onInitialize}function qa(h){return!!h._preupdate}function Ya(h){return!!h.onPreUpdate}function Va(h){return!!h.onPostUpdate}function Ja(h){return!!h.onPostUpdate}function $a(h){return!!h.onPreDraw}function Xa(h){return!!h.onPostDraw}class Ka{constructor(t,e=X.Magenta,i=!1){this.path=t,this.color=e,this._stream=null,this._gif=null,this._textures=[],this._animation=null,this._transparentColor=null,this._resource=new xe(t,"arraybuffer",i),this._transparentColor=e}get bustCache(){return this._resource.bustCache}set bustCache(t){this._resource.bustCache=t}async load(){const t=await this._resource.load();this._stream=new va(t),this._gif=new ba(this._stream,this._transparentColor);const e=this._gif.images.map(i=>new Gt(i.src,!1));return await Promise.all(e.map(i=>i.load())),this.data=this._textures=e}isLoaded(){return!!this.data}toSprite(t=0){return this._textures[t].toSprite()}toSpriteSheet(){const t=this._textures.map(e=>e.toSprite());return new te({sprites:t})}toAnimation(t){const e=this.toSpriteSheet(),i=e.sprites.length;return this._animation=vn.fromSpriteSheet(e,dt(0,i),t),this._animation}get readCheckBytes(){return this._gif.checkBytes}}const Eo=h=>h.reduce(function(t,e){return t*2+e},0),Ho=h=>{const t=[];for(let e=7;e>=0;e--)t.push(!!(h&1<<e));return t};class va{constructor(t){if(this.data=null,this.len=0,this.position=0,this.readByte=()=>{if(this.position>=this.data.byteLength)throw new Error("Attempted to read past end of stream.");return this.data[this.position++]},this.readBytes=e=>{const i=[];for(let n=0;n<e;n++)i.push(this.readByte());return i},this.read=e=>{let i="";for(let n=0;n<e;n++)i+=String.fromCharCode(this.readByte());return i},this.readUnsigned=()=>{const e=this.readBytes(2);return(e[1]<<8)+e[0]},this.data=new Uint8Array(t),this.len=this.data.byteLength,this.len===0)throw new Error("No data loaded from file")}}const tl=function(h,t){let e=0;const i=function(Kt){let ne=0;for(let ae=0;ae<Kt;ae++)t.charCodeAt(e>>3)&1<<(e&7)&&(ne|=1<<ae),e++;return ne},n=[],a=1<<h,m=a+1;let U=h+1,mt=[];const Et=function(){mt=[],U=h+1;for(let Kt=0;Kt<a;Kt++)mt[Kt]=[Kt];mt[a]=[],mt[m]=null};let St,Lt;for(;;){if(Lt=St,St=i(U),St===a){Et();continue}if(St===m)break;if(St<mt.length)Lt!==a&&mt.push(mt[Lt].concat(mt[St][0]));else{if(St!==mt.length)throw new Error("Invalid LZW code.");mt.push(mt[Lt].concat(mt[Lt][0]))}n.push.apply(n,mt[St]),mt.length===1<<U&&U<12&&U++}return n};class ba{constructor(t,e=X.Magenta){this._st=null,this._handler={},this._transparentColor=null,this.frames=[],this.images=[],this.globalColorTable=[],this.checkBytes=[],this.parseColorTable=i=>{const n=[];for(let a=0;a<i;a++){const U="#"+this._st.readBytes(3).map(mt=>{const Et=mt.toString(16);return Et.length===1?"0"+Et:Et}).join("");n.push(U)}return n},this.readSubBlocks=()=>{let i,n;n="";do i=this._st.readByte(),n+=this._st.read(i);while(i!==0);return n},this.parseHeader=()=>{const i={sig:null,ver:null,width:null,height:null,colorRes:null,globalColorTableSize:null,gctFlag:null,sorted:null,globalColorTable:[],bgColor:null,pixelAspectRatio:null};if(i.sig=this._st.read(3),i.ver=this._st.read(3),i.sig!=="GIF")throw new Error("Not a GIF file.");i.width=this._st.readUnsigned(),i.height=this._st.readUnsigned();const n=Ho(this._st.readByte());i.gctFlag=n.shift(),i.colorRes=Eo(n.splice(0,3)),i.sorted=n.shift(),i.globalColorTableSize=Eo(n.splice(0,3)),i.bgColor=this._st.readByte(),i.pixelAspectRatio=this._st.readByte(),i.gctFlag&&(i.globalColorTable=this.parseColorTable(1<<i.globalColorTableSize+1),this.globalColorTable=i.globalColorTable),this._handler.hdr&&this._handler.hdr(i)&&this.checkBytes.push(this._handler.hdr)},this.parseExt=i=>{const n=Et=>{this.checkBytes.push(this._st.readByte());const St=Ho(this._st.readByte());Et.reserved=St.splice(0,3),Et.disposalMethod=Eo(St.splice(0,3)),Et.userInput=St.shift(),Et.transparencyGiven=St.shift(),Et.delayTime=this._st.readUnsigned(),Et.transparencyIndex=this._st.readByte(),Et.terminator=this._st.readByte(),this._handler.gce&&this._handler.gce(Et)&&this.checkBytes.push(this._handler.gce)},a=Et=>{Et.comment=this.readSubBlocks(),this._handler.com&&this._handler.com(Et)&&this.checkBytes.push(this._handler.com)},m=Et=>{this.checkBytes.push(this._st.readByte()),Et.ptHeader=this._st.readBytes(12),Et.ptData=this.readSubBlocks(),this._handler.pte&&this._handler.pte(Et)&&this.checkBytes.push(this._handler.pte)},U=Et=>{const St=Kt=>{this.checkBytes.push(this._st.readByte()),Kt.unknown=this._st.readByte(),Kt.iterations=this._st.readUnsigned(),Kt.terminator=this._st.readByte(),this._handler.app&&this._handler.app.NETSCAPE&&this._handler.app.NETSCAPE(Kt)&&this.checkBytes.push(this._handler.app)},Lt=Kt=>{Kt.appData=this.readSubBlocks(),this._handler.app&&this._handler.app[Kt.identifier]&&this._handler.app[Kt.identifier](Kt)&&this.checkBytes.push(this._handler.app[Kt.identifier])};switch(this.checkBytes.push(this._st.readByte()),Et.identifier=this._st.read(8),Et.authCode=this._st.read(3),Et.identifier){case"NETSCAPE":St(Et);break;default:Lt(Et);break}},mt=Et=>{Et.data=this.readSubBlocks(),this._handler.unknown&&this._handler.unknown(Et)&&this.checkBytes.push(this._handler.unknown)};switch(i.label=this._st.readByte(),i.label){case 249:i.extType="gce",n(i);break;case 254:i.extType="com",a(i);break;case 1:i.extType="pte",m(i);break;case 255:i.extType="app",U(i);break;default:i.extType="unknown",mt(i);break}},this.parseImg=i=>{const n=(U,mt)=>{const Et=new Array(U.length),St=U.length/mt,Lt=(ke,ze)=>{const ye=U.slice(ze*mt,(ze+1)*mt);Et.splice.apply(Et,[ke*mt,mt].concat(ye))},Kt=[0,4,2,1],ne=[8,8,4,2];let ae=0;for(let ke=0;ke<4;ke++)for(let ze=Kt[ke];ze<St;ze+=ne[ke])Lt(ze,ae),ae++;return Et};i.leftPos=this._st.readUnsigned(),i.topPos=this._st.readUnsigned(),i.width=this._st.readUnsigned(),i.height=this._st.readUnsigned();const a=Ho(this._st.readByte());i.lctFlag=a.shift(),i.interlaced=a.shift(),i.sorted=a.shift(),i.reserved=a.splice(0,2),i.lctSize=Eo(a.splice(0,3)),i.lctFlag&&(i.lct=this.parseColorTable(1<<i.lctSize+1)),i.lzwMinCodeSize=this._st.readByte();const m=this.readSubBlocks();i.pixels=tl(i.lzwMinCodeSize,m),i.interlaced&&(i.pixels=n(i.pixels,i.width)),this.frames.push(i),this.arrayToImage(i),this._handler.img&&this._handler.img(i)&&this.checkBytes.push(this._handler)},this.parseBlock=()=>{const i={sentinel:this._st.readByte(),type:""};switch(String.fromCharCode(i.sentinel)){case"!":i.type="ext",this.parseExt(i);break;case",":i.type="img",this.parseImg(i);break;case";":i.type="eof",this._handler.eof&&this._handler.eof(i)&&this.checkBytes.push(this._handler.eof);break;default:throw new Error("Unknown block: 0x"+i.sentinel.toString(16))}i.type!=="eof"&&this.parseBlock()},this.arrayToImage=i=>{let n=0;const a=document.createElement("canvas");a.id=n.toString(),a.width=i.width,a.height=i.height,n++;const m=a.getContext("2d"),U=1;let mt=0,Et=0;for(let Lt=0;Lt<i.pixels.length;Lt++)Et%i.width===0&&(mt++,Et=0),this.globalColorTable[i.pixels[Lt]]===this._transparentColor.toHex()?m.fillStyle="rgba(0, 0, 0, 0)":m.fillStyle=this.globalColorTable[i.pixels[Lt]],m.fillRect(Et,mt,U,U),Et++;const St=new Image;St.src=a.toDataURL(),this.images.push(St)},this._st=t,this._handler={},this._transparentColor=e,this.parseHeader(),this.parseBlock()}}class el{constructor(t,e,{bustCache:i,...n}={}){this.path=t,this.family=e,this._isLoaded=!1,this._resource=new xe(t,"blob",i),this._options=n}async load(){if(this.isLoaded())return this.data;try{const t=await this._resource.load(),e=URL.createObjectURL(t);this.data||(this.data=new FontFace(this.family,`url(${e})`),document.fonts.add(this.data)),await this.data.load(),this._isLoaded=!0}catch(t){throw`Error loading FontSource from path '${this.path}' with error [${t.message}]`}return this.data}isLoaded(){return this._isLoaded}toFont(t){return new Zn({family:this.family,...this._options,...t})}}const il=/^\s*(?:function)?\*/;function ya(h){return typeof h!="function"?!1:il.test(Function.prototype.toString.call(h))?!0:Object.getPrototypeOf?Object.getPrototypeOf(h)===Object.getPrototypeOf(new Function("return function * () {}")()):!1}function wa(...h){let t,e,i,n;ya(h[0])&&(e=globalThis,t=h[0],i=h[1]),ya(h[1])&&(e=h[0],t=h[1],i=h[2]),h[1]instanceof pn&&(e=h[0],n=h[1],t=h[2],i=h[3]),h[0]instanceof pn&&(e=globalThis,n=h[0],t=h[1],i=h[2]);const a=i?.timing;let m;try{m=n??pn.useEngine()}catch{throw Error(`Cannot run coroutine without engine parameter outside of an excalibur lifecycle method.
Pass an engine parameter to ex.coroutine(engine, function * {...})`)}const U=t.bind(e);return new Promise((mt,Et)=>{const St=U(),Lt=Kt=>{try{const{done:ne,value:ae}=St.next(Kt);ne&&mt(),ae instanceof Promise?ae.then(()=>{m.clock.schedule(Lt,0,a)}):ae===void 0||ae===void 0?m.clock.schedule(Lt,0,a):m.clock.schedule(Lt,ae||0,a)}catch(ne){Et(ne)}};Lt(m.clock.elapsed())})}class Zo extends js{get progress(){return this._currentProgress}get complete(){return this.direction==="out"?this.progress>=1:this.progress<=0}constructor(t){var e,i,n,a;super(),this._logger=ft.getInstance(),this.transform=new fi,this.graphics=new Ms,this._completeFuture=new N,this.started=!1,this._currentDistance=0,this._currentProgress=0,this.done=this._completeFuture.promise,this.name=`Transition#${this.id}`,this.duration=t.duration,this.easing=(e=t.easing)!==null&&e!==void 0?e:As.Linear,this.direction=(i=t.direction)!==null&&i!==void 0?i:"out",this.hideLoader=(n=t.hideLoader)!==null&&n!==void 0?n:!1,this.blockInput=(a=t.blockInput)!==null&&a!==void 0?a:!1,this.transform.coordPlane=mi.Screen,this.transform.pos=u.Zero,this.transform.z=1/0,this.graphics.anchor=u.Zero,this.addComponent(this.transform),this.addComponent(this.graphics),this.direction==="out"?this._currentProgress=0:this._currentProgress=1}updateTransition(t,e){this.complete||(this._currentDistance+=q(e/this.duration,0,1),this._currentDistance>=1&&(this._currentDistance=1),this.direction==="out"?this._currentProgress=q(this.easing(this._currentDistance,0,1,1),0,1):this._currentProgress=q(this.easing(this._currentDistance,1,0,1),0,1))}async onPreviousSceneDeactivate(t){}onStart(t){}onUpdate(t){}onEnd(t){}onReset(){}reset(){this.started=!1,this._completeFuture=new N,this.done=this._completeFuture.promise,this._currentDistance=0,this.direction==="out"?this._currentProgress=0:this._currentProgress=1,this.onReset()}play(t,e){this.started&&(this.reset(),this._logger.warn(`Attempted to play a transition ${this.name} that is already playing, reset transition.`)),(e??t.currentScene).add(this);const n=this;return wa(t,function*(){for(;!n.complete;){const a=yield;n.updateTransition(t,a),n.execute()}})}execute(){this.isInitialized&&(this.started||(this.started=!0,this.onStart(this.progress)),this.onUpdate(this.progress),this.complete&&!this._completeFuture.isCompleted&&(this.onEnd(this.progress),this._completeFuture.resolve()))}}class sl extends Zo{constructor(t){var e,i;super({...t,duration:(e=t.duration)!==null&&e!==void 0?e:2e3}),this.name=`FadeInOut#${this.id}`,this.color=(i=t.color)!==null&&i!==void 0?i:X.Black}onInitialize(t){this.transform.pos=t.screen.unsafeArea.topLeft,this.screenCover=new dr({width:t.screen.resolution.width,height:t.screen.resolution.height,color:this.color}),this.graphics.add(this.screenCover),this.graphics.opacity=this.progress}onReset(){this.graphics.opacity=this.progress}onStart(t){this.graphics.opacity=t}onEnd(t){this.graphics.opacity=t}onUpdate(t){this.graphics.opacity=t}}class nl extends Zo{constructor(t){super({direction:"in",...t}),this.name=`CrossFade#${this.id}`}async onPreviousSceneDeactivate(t){this.image=await t.engine.screenshot(!0),await this.image.decode()}onInitialize(t){this.engine=t,this.transform.pos=t.screen.unsafeArea.topLeft,this.screenCover=Gt.fromHtmlImageElement(this.image).toSprite(),this.graphics.add(this.screenCover),this.transform.scale=O(1/t.screen.pixelRatio,1/t.screen.pixelRatio),this.graphics.opacity=this.progress}onStart(t){this.graphics.opacity=this.progress}onReset(){this.graphics.opacity=this.progress}onEnd(t){this.graphics.opacity=t}onUpdate(t){this.graphics.opacity=t}}class Wo extends It{constructor(t){super(),this.color=X.Black,this.thickness=1;const{start:e,end:i,color:n,thickness:a}=t;this.start=e,this.end=i,this.color=n??this.color,this.thickness=a??this.thickness,this._localBounds=this._calculateBounds();const{width:m,height:U}=this._localBounds;this.width=m,this.height=U}get localBounds(){return this._localBounds}_calculateBounds(){const t=this.end.sub(this.start).normal(),e=this.thickness/2,i=[this.start.add(t.scale(e)),this.end.add(t.scale(e)),this.end.add(t.scale(-e)),this.start.add(t.scale(-e))];return ut.fromPoints(i)}_drawImage(t,e,i){t.drawLine(this.start,this.end,this.color,this.thickness)}clone(){return new Wo({start:this.start,end:this.end,color:this.color,thickness:this.thickness})}}class qo extends Xi{get points(){return this._points}set points(t){this._points=t;const e=this.minPoint;this.width=this._points.reduce((i,n)=>Math.max(n.x,i),0)-e.x,this.height=this._points.reduce((i,n)=>Math.max(n.y,i),0)-e.y,this.flagDirty()}get minPoint(){const t=this._points.reduce((i,n)=>Math.min(n.x,i),1/0),e=this._points.reduce((i,n)=>Math.min(n.y,i),1/0);return O(t,e)}constructor(t){super(t),this.points=t.points,this.filtering=yt.Blended,this.rasterize()}clone(){return new qo({points:this.points.map(t=>t.clone()),...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(t){if(this.points&&this.points.length){t.beginPath();const e=this.minPoint.negate(),i=this.points[0].add(e);t.moveTo(i.x,i.y),this.points.forEach(n=>{t.lineTo(n.x+e.x,n.y+e.y)}),t.lineTo(i.x,i.y),t.closePath(),this.color&&t.fill(),this.strokeColor&&t.stroke()}}}const xa=5,Zr={},rl=()=>{for(const h in Zr)Zr[h]=0},Io=(h,t)=>{const e=B.isEnabled("suppress-obsolete-message");Zr[h]<xa&&!e&&(ft.getInstance().warn(h),console.trace&&t.showStackTrace&&console.trace()),Zr[h]++};function ol(h){return h={message:"This feature will be removed in future versions of Excalibur.",alternateMethod:null,showStackTrace:!1,...h},function(t,e,i){if(i&&!(typeof i.value=="function"||typeof i.get=="function"||typeof i.set=="function"))throw new SyntaxError("Only classes/functions/getters/setters can be marked as obsolete");const a=`${`${t.name||""}${t.name&&e?".":""}${e||""}`} is marked obsolete: ${h.message}`+(h.alternateMethod?` Use ${h.alternateMethod} instead`:"");Zr[a]||(Zr[a]=0);const m=i?{...i}:t;if(!i){class U extends m{constructor(...Et){Io(a,h),super(...Et)}}return U}return i&&i.value?(m.value=function(){return Io(a,h),i.value.apply(this,arguments)},m):(i&&i.get&&(m.get=function(){return Io(a,h),i.get.apply(this,arguments)}),i&&i.set&&(m.set=function(){return Io(a,h),i.set.apply(this,arguments)}),m)}}class al{constructor(){this._queue=[]}get length(){return this._queue.length}enqueue(){const t=new N;return this._queue.push(t),t.promise}dequeue(t){this._queue.shift().resolve(t)}}class ll{constructor(t){this._count=t,this._waitQueue=new al}get count(){return this._count}get waiting(){return this._waitQueue.length}async enter(){return this._count!==0?(this._count--,Promise.resolve()):this._waitQueue.enqueue()}exit(t=1){if(t!==0){for(;t!==0&&this._waitQueue.length!==0;)this._waitQueue.dequeue(null),t--;this._count+=t}}}const Yo="0.29.3";I()})();var __webpack_exports__ActionCompleteEvent=__webpack_exports__.eKr,__webpack_exports__ActionContext=__webpack_exports__.yVm,__webpack_exports__ActionQueue=__webpack_exports__.a7j,__webpack_exports__ActionSequence=__webpack_exports__.U_w,__webpack_exports__ActionStartEvent=__webpack_exports__.JF2,__webpack_exports__ActionsComponent=__webpack_exports__.htg,__webpack_exports__ActionsSystem=__webpack_exports__.HXL,__webpack_exports__ActivateEvent=__webpack_exports__.mcg,__webpack_exports__Actor=__webpack_exports__.Agj,__webpack_exports__AddedComponent=__webpack_exports__.u6S,__webpack_exports__AffineMatrix=__webpack_exports__.x7M,__webpack_exports__Animation=__webpack_exports__.X55,__webpack_exports__AnimationDirection=__webpack_exports__.m3M,__webpack_exports__AnimationEvents=__webpack_exports__.aE5,__webpack_exports__AnimationStrategy=__webpack_exports__.YJU,__webpack_exports__ArcadeSolver=__webpack_exports__.eZi,__webpack_exports__AudioContextFactory=__webpack_exports__.GNv,__webpack_exports__Axes=__webpack_exports__.Y56,__webpack_exports__Axis=__webpack_exports__._0v,__webpack_exports__BaseAlign=__webpack_exports__.vhs,__webpack_exports__Blink=__webpack_exports__.Z8b,__webpack_exports__BodyComponent=__webpack_exports__.Yfw,__webpack_exports__BoundingBox=__webpack_exports__.IcQ,__webpack_exports__BroadphaseStrategy=__webpack_exports__.Rl2,__webpack_exports__BrowserComponent=__webpack_exports__.kgJ,__webpack_exports__BrowserEvents=__webpack_exports__.GTT,__webpack_exports__Buttons=__webpack_exports__.ypY,__webpack_exports__Camera=__webpack_exports__.i7d,__webpack_exports__CameraEvents=__webpack_exports__.fQ3,__webpack_exports__Canvas=__webpack_exports__.HlI,__webpack_exports__Circle=__webpack_exports__.jlt,__webpack_exports__CircleCollider=__webpack_exports__.VQc,__webpack_exports__Clock=__webpack_exports__.zD7,__webpack_exports__ClosestLine=__webpack_exports__.I0I,__webpack_exports__ClosestLineJumpTable=__webpack_exports__.AUF,__webpack_exports__Collider=__webpack_exports__.JoF,__webpack_exports__ColliderComponent=__webpack_exports__.MlA,__webpack_exports__CollisionContact=__webpack_exports__.PZh,__webpack_exports__CollisionEndEvent=__webpack_exports__.qA,__webpack_exports__CollisionGroup=__webpack_exports__.CrD,__webpack_exports__CollisionGroupManager=__webpack_exports__.dQK,__webpack_exports__CollisionJumpTable=__webpack_exports__.D3r,__webpack_exports__CollisionPostSolveEvent=__webpack_exports__.Qpo,__webpack_exports__CollisionPreSolveEvent=__webpack_exports__.D9n,__webpack_exports__CollisionStartEvent=__webpack_exports__.b6v,__webpack_exports__CollisionSystem=__webpack_exports__.mvh,__webpack_exports__CollisionType=__webpack_exports__.Bpo,__webpack_exports__Color=__webpack_exports__.Q1f,__webpack_exports__ColorBlindFlags=__webpack_exports__.IKv,__webpack_exports__ColorBlindnessMode=__webpack_exports__.fcV,__webpack_exports__ColorBlindnessPostProcessor=__webpack_exports__.Glf,__webpack_exports__Component=__webpack_exports__.uAl,__webpack_exports__CompositeCollider=__webpack_exports__.ElT,__webpack_exports__Configurable=__webpack_exports__.MPu,__webpack_exports__ConsoleAppender=__webpack_exports__.Z8r,__webpack_exports__ContactConstraintPoint=__webpack_exports__.QSL,__webpack_exports__ContactEndEvent=__webpack_exports__.sPV,__webpack_exports__ContactSolveBias=__webpack_exports__.nAn,__webpack_exports__ContactStartEvent=__webpack_exports__.zCU,__webpack_exports__CoordPlane=__webpack_exports__.QrV,__webpack_exports__CrossFade=__webpack_exports__.fF9,__webpack_exports__DeactivateEvent=__webpack_exports__.xI8,__webpack_exports__Debug=__webpack_exports__.yar,__webpack_exports__DebugConfig=__webpack_exports__.SP7,__webpack_exports__DebugGraphicsComponent=__webpack_exports__.oRy,__webpack_exports__DebugSystem=__webpack_exports__.f5X,__webpack_exports__DebugText=__webpack_exports__.V1c,__webpack_exports__DefaultAntialiasOptions=__webpack_exports__.Mlx,__webpack_exports__DefaultLoader=__webpack_exports__.ZCo,__webpack_exports__DefaultPhysicsConfig=__webpack_exports__.Vy3,__webpack_exports__DefaultPixelArtOptions=__webpack_exports__.J5p,__webpack_exports__DegreeOfFreedom=__webpack_exports__.mL_,__webpack_exports__Delay=__webpack_exports__.Guw,__webpack_exports__DeprecatedStaticToConfig=__webpack_exports__.VKx,__webpack_exports__Detector=__webpack_exports__.N5j,__webpack_exports__Die=__webpack_exports__.pgY,__webpack_exports__Direction=__webpack_exports__.OP3,__webpack_exports__Director=__webpack_exports__.rl5,__webpack_exports__DirectorEvents=__webpack_exports__.eod,__webpack_exports__DisplayMode=__webpack_exports__.q5Z,__webpack_exports__DynamicTree=__webpack_exports__.YUC,__webpack_exports__DynamicTreeCollisionProcessor=__webpack_exports__.saR,__webpack_exports__EX_VERSION=__webpack_exports__.hvr,__webpack_exports__EaseBy=__webpack_exports__.Qol,__webpack_exports__EaseTo=__webpack_exports__.Wf4,__webpack_exports__EasingFunctions=__webpack_exports__.JCs,__webpack_exports__EdgeCollider=__webpack_exports__.gJV,__webpack_exports__ElasticToActorStrategy=__webpack_exports__.fWD,__webpack_exports__EmitterType=__webpack_exports__.Va_,__webpack_exports__Engine=__webpack_exports__.N$8,__webpack_exports__EngineEvents=__webpack_exports__._jQ,__webpack_exports__EnterTriggerEvent=__webpack_exports__.rxj,__webpack_exports__EnterViewPortEvent=__webpack_exports__.rhv,__webpack_exports__Entity=__webpack_exports__.wCu,__webpack_exports__EntityEvents=__webpack_exports__.HAp,__webpack_exports__EntityManager=__webpack_exports__.Zy1,__webpack_exports__EventDispatcher=__webpack_exports__.Qev,__webpack_exports__EventEmitter=__webpack_exports__.bkB,__webpack_exports__EventTypes=__webpack_exports__.wfL,__webpack_exports__Events=__webpack_exports__.sVA,__webpack_exports__ExResponse=__webpack_exports__.$Gs,__webpack_exports__ExcaliburGraphicsContext2DCanvas=__webpack_exports__.CJ0,__webpack_exports__ExcaliburGraphicsContextWebGL=__webpack_exports__.NWh,__webpack_exports__ExitTriggerEvent=__webpack_exports__.tWi,__webpack_exports__ExitViewPortEvent=__webpack_exports__.xAj,__webpack_exports__Fade=__webpack_exports__.zWh,__webpack_exports__FadeInOut=__webpack_exports__.i_4,__webpack_exports__Flags=__webpack_exports__.iIx,__webpack_exports__Follow=__webpack_exports__.c9e,__webpack_exports__Font=__webpack_exports__.KQV,__webpack_exports__FontCache=__webpack_exports__.weH,__webpack_exports__FontSource=__webpack_exports__.jXp,__webpack_exports__FontStyle=__webpack_exports__.zzY,__webpack_exports__FontUnit=__webpack_exports__.yRQ,__webpack_exports__FpsSampler=__webpack_exports__.MtE,__webpack_exports__FrameStats=__webpack_exports__.rPj,__webpack_exports__Future=__webpack_exports__.KLc,__webpack_exports__GameEvent=__webpack_exports__.Fir,__webpack_exports__GameStartEvent=__webpack_exports__.V5f,__webpack_exports__GameStopEvent=__webpack_exports__.Xj7,__webpack_exports__Gamepad=__webpack_exports__.Wud,__webpack_exports__GamepadAxisEvent=__webpack_exports__.FVg,__webpack_exports__GamepadButtonEvent=__webpack_exports__.g5Y,__webpack_exports__GamepadConnectEvent=__webpack_exports__.YQB,__webpack_exports__GamepadDisconnectEvent=__webpack_exports__.KPb,__webpack_exports__Gamepads=__webpack_exports__.nHK,__webpack_exports__Gif=__webpack_exports__.TX_,__webpack_exports__GlobalCoordinates=__webpack_exports__.r3n,__webpack_exports__Graphic=__webpack_exports__.vYh,__webpack_exports__GraphicsComponent=__webpack_exports__.hnk,__webpack_exports__GraphicsGroup=__webpack_exports__.D2R,__webpack_exports__GraphicsSystem=__webpack_exports__.n1o,__webpack_exports__HiddenEvent=__webpack_exports__.RLG,__webpack_exports__HorizontalFirst=__webpack_exports__.fBU,__webpack_exports__ImageFiltering=__webpack_exports__.Adb,__webpack_exports__ImageSource=__webpack_exports__.bEs,__webpack_exports__ImageSourceAttributeConstants=__webpack_exports__.wCy,__webpack_exports__ImageWrapping=__webpack_exports__.CbD,__webpack_exports__InitializeEvent=__webpack_exports__.x_C,__webpack_exports__Input=__webpack_exports__.pde,__webpack_exports__InputHost=__webpack_exports__.pGf,__webpack_exports__InputMapper=__webpack_exports__.ibQ,__webpack_exports__Integrator=__webpack_exports__.QlN,__webpack_exports__IsometricEntityComponent=__webpack_exports__.shR,__webpack_exports__IsometricEntitySystem=__webpack_exports__.Yjk,__webpack_exports__IsometricMap=__webpack_exports__._u1,__webpack_exports__IsometricTile=__webpack_exports__.OBI,__webpack_exports__KeyEvent=__webpack_exports__.klh,__webpack_exports__Keyboard=__webpack_exports__.s3S,__webpack_exports__Keys=__webpack_exports__.D$R,__webpack_exports__KillEvent=__webpack_exports__.xth,__webpack_exports__Label=__webpack_exports__.JU7,__webpack_exports__LimitCameraBoundsStrategy=__webpack_exports__.h9x,__webpack_exports__Line=__webpack_exports__.N1A,__webpack_exports__LineSegment=__webpack_exports__.e_k,__webpack_exports__Loader=__webpack_exports__.aHM,__webpack_exports__LoaderEvents=__webpack_exports__.tlv,__webpack_exports__LockCameraToActorAxisStrategy=__webpack_exports__.Vi9,__webpack_exports__LockCameraToActorStrategy=__webpack_exports__.ieR,__webpack_exports__LogLevel=__webpack_exports__.$bb,__webpack_exports__Logger=__webpack_exports__.VyI,__webpack_exports__Material=__webpack_exports__.imn,__webpack_exports__Matrix=__webpack_exports__.uqu,__webpack_exports__MatrixLocations=__webpack_exports__.QnL,__webpack_exports__MediaEvent=__webpack_exports__.vnc,__webpack_exports__Meet=__webpack_exports__.wk_,__webpack_exports__MotionComponent=__webpack_exports__.GH0,__webpack_exports__MotionSystem=__webpack_exports__._1r,__webpack_exports__MoveBy=__webpack_exports__.l0X,__webpack_exports__MoveTo=__webpack_exports__.HHX,__webpack_exports__NativePointerButton=__webpack_exports__.tjk,__webpack_exports__NativeSoundEvent=__webpack_exports__.rWe,__webpack_exports__NativeSoundProcessedEvent=__webpack_exports__.j9l,__webpack_exports__None=__webpack_exports__.NVp,__webpack_exports__Observable=__webpack_exports__.cPK,__webpack_exports__OffscreenSystem=__webpack_exports__.XoL,__webpack_exports__Pair=__webpack_exports__.RmF,__webpack_exports__ParallaxComponent=__webpack_exports__.DXI,__webpack_exports__ParallelActions=__webpack_exports__.tCD,__webpack_exports__ParseGif=__webpack_exports__.oGn,__webpack_exports__Particle=__webpack_exports__.J3D,__webpack_exports__ParticleEmitter=__webpack_exports__.vCJ,__webpack_exports__ParticleTransform=__webpack_exports__.f9l,__webpack_exports__Physics=__webpack_exports__.AQx,__webpack_exports__PhysicsStats=__webpack_exports__.v9m,__webpack_exports__PhysicsWorld=__webpack_exports__.yRJ,__webpack_exports__PointerAbstraction=__webpack_exports__.EU6,__webpack_exports__PointerButton=__webpack_exports__.m3O,__webpack_exports__PointerComponent=__webpack_exports__.Ryz,__webpack_exports__PointerEvent=__webpack_exports__.OxP,__webpack_exports__PointerEventReceiver=__webpack_exports__.LEs,__webpack_exports__PointerScope=__webpack_exports__.Ec,__webpack_exports__PointerSystem=__webpack_exports__.Pi5,__webpack_exports__PointerType=__webpack_exports__.gmH,__webpack_exports__Polygon=__webpack_exports__.tS,__webpack_exports__PolygonCollider=__webpack_exports__.XxX,__webpack_exports__Pool=__webpack_exports__.bCz,__webpack_exports__PostCollisionEvent=__webpack_exports__.nYS,__webpack_exports__PostDebugDrawEvent=__webpack_exports__.yiT,__webpack_exports__PostDrawEvent=__webpack_exports__.NHl,__webpack_exports__PostFrameEvent=__webpack_exports__.mO8,__webpack_exports__PostKillEvent=__webpack_exports__.PXI,__webpack_exports__PostTransformDrawEvent=__webpack_exports__.bn5,__webpack_exports__PostUpdateEvent=__webpack_exports__.Ywr,__webpack_exports__PreCollisionEvent=__webpack_exports__.cMd,__webpack_exports__PreDebugDrawEvent=__webpack_exports__.Bs6,__webpack_exports__PreDrawEvent=__webpack_exports__.G0k,__webpack_exports__PreFrameEvent=__webpack_exports__.pyn,__webpack_exports__PreKillEvent=__webpack_exports__.QeM,__webpack_exports__PreLoadEvent=__webpack_exports__.aPX,__webpack_exports__PreTransformDrawEvent=__webpack_exports__.ITP,__webpack_exports__PreUpdateEvent=__webpack_exports__.BY0,__webpack_exports__Projection=__webpack_exports__.MFw,__webpack_exports__QuadIndexBuffer=__webpack_exports__.sBn,__webpack_exports__QuadTree=__webpack_exports__.S3L,__webpack_exports__Query=__webpack_exports__.XKQ,__webpack_exports__QueryManager=__webpack_exports__.ESI,__webpack_exports__RadiusAroundActorStrategy=__webpack_exports__.uxz,__webpack_exports__Random=__webpack_exports__.o8N,__webpack_exports__Raster=__webpack_exports__.u_r,__webpack_exports__Ray=__webpack_exports__.RlV,__webpack_exports__RealisticSolver=__webpack_exports__.gVA,__webpack_exports__Rectangle=__webpack_exports__.M_G,__webpack_exports__RemovedComponent=__webpack_exports__.GRB,__webpack_exports__Repeat=__webpack_exports__.kM6,__webpack_exports__RepeatForever=__webpack_exports__.dO8,__webpack_exports__Resolution=__webpack_exports__.jgM,__webpack_exports__Resource=__webpack_exports__.FWq,__webpack_exports__ResourceEvents=__webpack_exports__.s3j,__webpack_exports__RotateBy=__webpack_exports__.hlw,__webpack_exports__RotateTo=__webpack_exports__.B7e,__webpack_exports__RotationType=__webpack_exports__.H_X,__webpack_exports__ScaleBy=__webpack_exports__.S_d,__webpack_exports__ScaleTo=__webpack_exports__.U7E,__webpack_exports__Scene=__webpack_exports__.Z58,__webpack_exports__SceneEvents=__webpack_exports__.yh2,__webpack_exports__Screen=__webpack_exports__.ff$,__webpack_exports__ScreenAppender=__webpack_exports__.cWi,__webpack_exports__ScreenElement=__webpack_exports__.NBt,__webpack_exports__ScreenEvents=__webpack_exports__.oNz,__webpack_exports__ScreenShader=__webpack_exports__.QlU,__webpack_exports__ScrollPreventionMode=__webpack_exports__.Xey,__webpack_exports__Semaphore=__webpack_exports__.jft,__webpack_exports__Shader=__webpack_exports__.Mtr,__webpack_exports__Shape=__webpack_exports__.ypk,__webpack_exports__Side=__webpack_exports__.mnM,__webpack_exports__SolverStrategy=__webpack_exports__.bAZ,__webpack_exports__Sound=__webpack_exports__.ABN,__webpack_exports__SoundEvents=__webpack_exports__.VK6,__webpack_exports__Sprite=__webpack_exports__.kxk,__webpack_exports__SpriteFont=__webpack_exports__.DT1,__webpack_exports__SpriteSheet=__webpack_exports__.FLG,__webpack_exports__StandardClock=__webpack_exports__.qN_,__webpack_exports__StateMachine=__webpack_exports__.Z37,__webpack_exports__StrategyContainer=__webpack_exports__.FtL,__webpack_exports__Stream=__webpack_exports__.Z6X,__webpack_exports__System=__webpack_exports__.iQT,__webpack_exports__SystemManager=__webpack_exports__.ziO,__webpack_exports__SystemPriority=__webpack_exports__.OEF,__webpack_exports__SystemType=__webpack_exports__.uuE,__webpack_exports__TagQuery=__webpack_exports__.tiv,__webpack_exports__TestClock=__webpack_exports__.T$Y,__webpack_exports__Text=__webpack_exports__.EYj,__webpack_exports__TextAlign=__webpack_exports__.nOB,__webpack_exports__TextureLoader=__webpack_exports__.Tap,__webpack_exports__Tile=__webpack_exports__.FAs,__webpack_exports__TileMap=__webpack_exports__.B_P,__webpack_exports__TileMapEvents=__webpack_exports__.aA5,__webpack_exports__Timer=__webpack_exports__.M4G,__webpack_exports__Toaster=__webpack_exports__.l$l,__webpack_exports__Transform=__webpack_exports__.dLy,__webpack_exports__TransformComponent=__webpack_exports__.WZP,__webpack_exports__Transition=__webpack_exports__.eB6,__webpack_exports__TreeNode=__webpack_exports__.nFK,__webpack_exports__Trigger=__webpack_exports__.l9z,__webpack_exports__TriggerEvents=__webpack_exports__.YOF,__webpack_exports__TwoPI=__webpack_exports__.yhB,__webpack_exports__Util=__webpack_exports__.J0N,__webpack_exports__Vector=__webpack_exports__.Miz,__webpack_exports__VectorView=__webpack_exports__.Bj4,__webpack_exports__VertexBuffer=__webpack_exports__.Rcs,__webpack_exports__VertexLayout=__webpack_exports__.vJ4,__webpack_exports__VerticalFirst=__webpack_exports__.TqC,__webpack_exports__VisibleEvent=__webpack_exports__.nM0,__webpack_exports__WebAudio=__webpack_exports__.X1u,__webpack_exports__WebAudioInstance=__webpack_exports__.SpZ,__webpack_exports__WheelDeltaMode=__webpack_exports__.DX8,__webpack_exports__WheelEvent=__webpack_exports__.Yx$,__webpack_exports__World=__webpack_exports__.HK4,__webpack_exports__canonicalizeAngle=__webpack_exports__.SE$,__webpack_exports__clamp=__webpack_exports__.qE8,__webpack_exports__coroutine=__webpack_exports__.Pz7,__webpack_exports__createId=__webpack_exports__.sX_,__webpack_exports__frac=__webpack_exports__.JuI,__webpack_exports__hasGraphicsTick=__webpack_exports__.Nl$,__webpack_exports__hasOnInitialize=__webpack_exports__.OwT,__webpack_exports__hasOnPostUpdate=__webpack_exports__.P$G,__webpack_exports__hasOnPreUpdate=__webpack_exports__.mHV,__webpack_exports__hasPostDraw=__webpack_exports__.Fx_,__webpack_exports__hasPreDraw=__webpack_exports__.WFC,__webpack_exports__has_initialize=__webpack_exports__.aDq,__webpack_exports__has_postupdate=__webpack_exports__.jIg,__webpack_exports__has_preupdate=__webpack_exports__.UH3,__webpack_exports__isAddedComponent=__webpack_exports__.K6X,__webpack_exports__isComponentCtor=__webpack_exports__.C1Y,__webpack_exports__isLoaderConstructor=__webpack_exports__.Aw1,__webpack_exports__isRemovedComponent=__webpack_exports__.A8$,__webpack_exports__isSceneConstructor=__webpack_exports__.hsx,__webpack_exports__isScreenElement=__webpack_exports__.l9E,__webpack_exports__isSystemConstructor=__webpack_exports__.aSf,__webpack_exports__maxMessages=__webpack_exports__.Zex,__webpack_exports__obsolete=__webpack_exports__.mXP,__webpack_exports__parseImageFiltering=__webpack_exports__.vt$,__webpack_exports__parseImageWrapping=__webpack_exports__.hCA,__webpack_exports__pixelSnapEpsilon=__webpack_exports__.pjR,__webpack_exports__randomInRange=__webpack_exports__.U43,__webpack_exports__randomIntInRange=__webpack_exports__.pSZ,__webpack_exports__range=__webpack_exports__.y17,__webpack_exports__resetObsoleteCounter=__webpack_exports__.jVr,__webpack_exports__sign=__webpack_exports__._SZ,__webpack_exports__toDegrees=__webpack_exports__.xWn,__webpack_exports__toRadians=__webpack_exports__.ehJ,__webpack_exports__vec=__webpack_exports__.t6s,__webpack_exports__webgl=__webpack_exports__.Eyn;const excalibur=Object.freeze(Object.defineProperty({__proto__:null,ActionCompleteEvent:__webpack_exports__ActionCompleteEvent,ActionContext:__webpack_exports__ActionContext,ActionQueue:__webpack_exports__ActionQueue,ActionSequence:__webpack_exports__ActionSequence,ActionStartEvent:__webpack_exports__ActionStartEvent,ActionsComponent:__webpack_exports__ActionsComponent,ActionsSystem:__webpack_exports__ActionsSystem,ActivateEvent:__webpack_exports__ActivateEvent,Actor:__webpack_exports__Actor,AddedComponent:__webpack_exports__AddedComponent,AffineMatrix:__webpack_exports__AffineMatrix,Animation:__webpack_exports__Animation,AnimationDirection:__webpack_exports__AnimationDirection,AnimationEvents:__webpack_exports__AnimationEvents,AnimationStrategy:__webpack_exports__AnimationStrategy,ArcadeSolver:__webpack_exports__ArcadeSolver,AudioContextFactory:__webpack_exports__AudioContextFactory,Axes:__webpack_exports__Axes,Axis:__webpack_exports__Axis,BaseAlign:__webpack_exports__BaseAlign,Blink:__webpack_exports__Blink,BodyComponent:__webpack_exports__BodyComponent,BoundingBox:__webpack_exports__BoundingBox,BroadphaseStrategy:__webpack_exports__BroadphaseStrategy,BrowserComponent:__webpack_exports__BrowserComponent,BrowserEvents:__webpack_exports__BrowserEvents,Buttons:__webpack_exports__Buttons,Camera:__webpack_exports__Camera,CameraEvents:__webpack_exports__CameraEvents,Canvas:__webpack_exports__Canvas,Circle:__webpack_exports__Circle,CircleCollider:__webpack_exports__CircleCollider,Clock:__webpack_exports__Clock,ClosestLine:__webpack_exports__ClosestLine,ClosestLineJumpTable:__webpack_exports__ClosestLineJumpTable,Collider:__webpack_exports__Collider,ColliderComponent:__webpack_exports__ColliderComponent,CollisionContact:__webpack_exports__CollisionContact,CollisionEndEvent:__webpack_exports__CollisionEndEvent,CollisionGroup:__webpack_exports__CollisionGroup,CollisionGroupManager:__webpack_exports__CollisionGroupManager,CollisionJumpTable:__webpack_exports__CollisionJumpTable,CollisionPostSolveEvent:__webpack_exports__CollisionPostSolveEvent,CollisionPreSolveEvent:__webpack_exports__CollisionPreSolveEvent,CollisionStartEvent:__webpack_exports__CollisionStartEvent,CollisionSystem:__webpack_exports__CollisionSystem,CollisionType:__webpack_exports__CollisionType,Color:__webpack_exports__Color,ColorBlindFlags:__webpack_exports__ColorBlindFlags,ColorBlindnessMode:__webpack_exports__ColorBlindnessMode,ColorBlindnessPostProcessor:__webpack_exports__ColorBlindnessPostProcessor,Component:__webpack_exports__Component,CompositeCollider:__webpack_exports__CompositeCollider,Configurable:__webpack_exports__Configurable,ConsoleAppender:__webpack_exports__ConsoleAppender,ContactConstraintPoint:__webpack_exports__ContactConstraintPoint,ContactEndEvent:__webpack_exports__ContactEndEvent,ContactSolveBias:__webpack_exports__ContactSolveBias,ContactStartEvent:__webpack_exports__ContactStartEvent,CoordPlane:__webpack_exports__CoordPlane,CrossFade:__webpack_exports__CrossFade,DeactivateEvent:__webpack_exports__DeactivateEvent,Debug:__webpack_exports__Debug,DebugConfig:__webpack_exports__DebugConfig,DebugGraphicsComponent:__webpack_exports__DebugGraphicsComponent,DebugSystem:__webpack_exports__DebugSystem,DebugText:__webpack_exports__DebugText,DefaultAntialiasOptions:__webpack_exports__DefaultAntialiasOptions,DefaultLoader:__webpack_exports__DefaultLoader,DefaultPhysicsConfig:__webpack_exports__DefaultPhysicsConfig,DefaultPixelArtOptions:__webpack_exports__DefaultPixelArtOptions,DegreeOfFreedom:__webpack_exports__DegreeOfFreedom,Delay:__webpack_exports__Delay,DeprecatedStaticToConfig:__webpack_exports__DeprecatedStaticToConfig,Detector:__webpack_exports__Detector,Die:__webpack_exports__Die,Direction:__webpack_exports__Direction,Director:__webpack_exports__Director,DirectorEvents:__webpack_exports__DirectorEvents,DisplayMode:__webpack_exports__DisplayMode,DynamicTree:__webpack_exports__DynamicTree,DynamicTreeCollisionProcessor:__webpack_exports__DynamicTreeCollisionProcessor,EX_VERSION:__webpack_exports__EX_VERSION,EaseBy:__webpack_exports__EaseBy,EaseTo:__webpack_exports__EaseTo,EasingFunctions:__webpack_exports__EasingFunctions,EdgeCollider:__webpack_exports__EdgeCollider,ElasticToActorStrategy:__webpack_exports__ElasticToActorStrategy,EmitterType:__webpack_exports__EmitterType,Engine:__webpack_exports__Engine,EngineEvents:__webpack_exports__EngineEvents,EnterTriggerEvent:__webpack_exports__EnterTriggerEvent,EnterViewPortEvent:__webpack_exports__EnterViewPortEvent,Entity:__webpack_exports__Entity,EntityEvents:__webpack_exports__EntityEvents,EntityManager:__webpack_exports__EntityManager,EventDispatcher:__webpack_exports__EventDispatcher,EventEmitter:__webpack_exports__EventEmitter,EventTypes:__webpack_exports__EventTypes,Events:__webpack_exports__Events,ExResponse:__webpack_exports__ExResponse,ExcaliburGraphicsContext2DCanvas:__webpack_exports__ExcaliburGraphicsContext2DCanvas,ExcaliburGraphicsContextWebGL:__webpack_exports__ExcaliburGraphicsContextWebGL,ExitTriggerEvent:__webpack_exports__ExitTriggerEvent,ExitViewPortEvent:__webpack_exports__ExitViewPortEvent,Fade:__webpack_exports__Fade,FadeInOut:__webpack_exports__FadeInOut,Flags:__webpack_exports__Flags,Follow:__webpack_exports__Follow,Font:__webpack_exports__Font,FontCache:__webpack_exports__FontCache,FontSource:__webpack_exports__FontSource,FontStyle:__webpack_exports__FontStyle,FontUnit:__webpack_exports__FontUnit,FpsSampler:__webpack_exports__FpsSampler,FrameStats:__webpack_exports__FrameStats,Future:__webpack_exports__Future,GameEvent:__webpack_exports__GameEvent,GameStartEvent:__webpack_exports__GameStartEvent,GameStopEvent:__webpack_exports__GameStopEvent,Gamepad:__webpack_exports__Gamepad,GamepadAxisEvent:__webpack_exports__GamepadAxisEvent,GamepadButtonEvent:__webpack_exports__GamepadButtonEvent,GamepadConnectEvent:__webpack_exports__GamepadConnectEvent,GamepadDisconnectEvent:__webpack_exports__GamepadDisconnectEvent,Gamepads:__webpack_exports__Gamepads,Gif:__webpack_exports__Gif,GlobalCoordinates:__webpack_exports__GlobalCoordinates,Graphic:__webpack_exports__Graphic,GraphicsComponent:__webpack_exports__GraphicsComponent,GraphicsGroup:__webpack_exports__GraphicsGroup,GraphicsSystem:__webpack_exports__GraphicsSystem,HiddenEvent:__webpack_exports__HiddenEvent,HorizontalFirst:__webpack_exports__HorizontalFirst,ImageFiltering:__webpack_exports__ImageFiltering,ImageSource:__webpack_exports__ImageSource,ImageSourceAttributeConstants:__webpack_exports__ImageSourceAttributeConstants,ImageWrapping:__webpack_exports__ImageWrapping,InitializeEvent:__webpack_exports__InitializeEvent,Input:__webpack_exports__Input,InputHost:__webpack_exports__InputHost,InputMapper:__webpack_exports__InputMapper,Integrator:__webpack_exports__Integrator,IsometricEntityComponent:__webpack_exports__IsometricEntityComponent,IsometricEntitySystem:__webpack_exports__IsometricEntitySystem,IsometricMap:__webpack_exports__IsometricMap,IsometricTile:__webpack_exports__IsometricTile,KeyEvent:__webpack_exports__KeyEvent,Keyboard:__webpack_exports__Keyboard,Keys:__webpack_exports__Keys,KillEvent:__webpack_exports__KillEvent,Label:__webpack_exports__Label,LimitCameraBoundsStrategy:__webpack_exports__LimitCameraBoundsStrategy,Line:__webpack_exports__Line,LineSegment:__webpack_exports__LineSegment,Loader:__webpack_exports__Loader,LoaderEvents:__webpack_exports__LoaderEvents,LockCameraToActorAxisStrategy:__webpack_exports__LockCameraToActorAxisStrategy,LockCameraToActorStrategy:__webpack_exports__LockCameraToActorStrategy,LogLevel:__webpack_exports__LogLevel,Logger:__webpack_exports__Logger,Material:__webpack_exports__Material,Matrix:__webpack_exports__Matrix,MatrixLocations:__webpack_exports__MatrixLocations,MediaEvent:__webpack_exports__MediaEvent,Meet:__webpack_exports__Meet,MotionComponent:__webpack_exports__MotionComponent,MotionSystem:__webpack_exports__MotionSystem,MoveBy:__webpack_exports__MoveBy,MoveTo:__webpack_exports__MoveTo,NativePointerButton:__webpack_exports__NativePointerButton,NativeSoundEvent:__webpack_exports__NativeSoundEvent,NativeSoundProcessedEvent:__webpack_exports__NativeSoundProcessedEvent,None:__webpack_exports__None,Observable:__webpack_exports__Observable,OffscreenSystem:__webpack_exports__OffscreenSystem,Pair:__webpack_exports__Pair,ParallaxComponent:__webpack_exports__ParallaxComponent,ParallelActions:__webpack_exports__ParallelActions,ParseGif:__webpack_exports__ParseGif,Particle:__webpack_exports__Particle,ParticleEmitter:__webpack_exports__ParticleEmitter,ParticleTransform:__webpack_exports__ParticleTransform,Physics:__webpack_exports__Physics,PhysicsStats:__webpack_exports__PhysicsStats,PhysicsWorld:__webpack_exports__PhysicsWorld,PointerAbstraction:__webpack_exports__PointerAbstraction,PointerButton:__webpack_exports__PointerButton,PointerComponent:__webpack_exports__PointerComponent,PointerEvent:__webpack_exports__PointerEvent,PointerEventReceiver:__webpack_exports__PointerEventReceiver,PointerScope:__webpack_exports__PointerScope,PointerSystem:__webpack_exports__PointerSystem,PointerType:__webpack_exports__PointerType,Polygon:__webpack_exports__Polygon,PolygonCollider:__webpack_exports__PolygonCollider,Pool:__webpack_exports__Pool,PostCollisionEvent:__webpack_exports__PostCollisionEvent,PostDebugDrawEvent:__webpack_exports__PostDebugDrawEvent,PostDrawEvent:__webpack_exports__PostDrawEvent,PostFrameEvent:__webpack_exports__PostFrameEvent,PostKillEvent:__webpack_exports__PostKillEvent,PostTransformDrawEvent:__webpack_exports__PostTransformDrawEvent,PostUpdateEvent:__webpack_exports__PostUpdateEvent,PreCollisionEvent:__webpack_exports__PreCollisionEvent,PreDebugDrawEvent:__webpack_exports__PreDebugDrawEvent,PreDrawEvent:__webpack_exports__PreDrawEvent,PreFrameEvent:__webpack_exports__PreFrameEvent,PreKillEvent:__webpack_exports__PreKillEvent,PreLoadEvent:__webpack_exports__PreLoadEvent,PreTransformDrawEvent:__webpack_exports__PreTransformDrawEvent,PreUpdateEvent:__webpack_exports__PreUpdateEvent,Projection:__webpack_exports__Projection,QuadIndexBuffer:__webpack_exports__QuadIndexBuffer,QuadTree:__webpack_exports__QuadTree,Query:__webpack_exports__Query,QueryManager:__webpack_exports__QueryManager,RadiusAroundActorStrategy:__webpack_exports__RadiusAroundActorStrategy,Random:__webpack_exports__Random,Raster:__webpack_exports__Raster,Ray:__webpack_exports__Ray,RealisticSolver:__webpack_exports__RealisticSolver,Rectangle:__webpack_exports__Rectangle,RemovedComponent:__webpack_exports__RemovedComponent,Repeat:__webpack_exports__Repeat,RepeatForever:__webpack_exports__RepeatForever,Resolution:__webpack_exports__Resolution,Resource:__webpack_exports__Resource,ResourceEvents:__webpack_exports__ResourceEvents,RotateBy:__webpack_exports__RotateBy,RotateTo:__webpack_exports__RotateTo,RotationType:__webpack_exports__RotationType,ScaleBy:__webpack_exports__ScaleBy,ScaleTo:__webpack_exports__ScaleTo,Scene:__webpack_exports__Scene,SceneEvents:__webpack_exports__SceneEvents,Screen:__webpack_exports__Screen,ScreenAppender:__webpack_exports__ScreenAppender,ScreenElement:__webpack_exports__ScreenElement,ScreenEvents:__webpack_exports__ScreenEvents,ScreenShader:__webpack_exports__ScreenShader,ScrollPreventionMode:__webpack_exports__ScrollPreventionMode,Semaphore:__webpack_exports__Semaphore,Shader:__webpack_exports__Shader,Shape:__webpack_exports__Shape,Side:__webpack_exports__Side,SolverStrategy:__webpack_exports__SolverStrategy,Sound:__webpack_exports__Sound,SoundEvents:__webpack_exports__SoundEvents,Sprite:__webpack_exports__Sprite,SpriteFont:__webpack_exports__SpriteFont,SpriteSheet:__webpack_exports__SpriteSheet,StandardClock:__webpack_exports__StandardClock,StateMachine:__webpack_exports__StateMachine,StrategyContainer:__webpack_exports__StrategyContainer,Stream:__webpack_exports__Stream,System:__webpack_exports__System,SystemManager:__webpack_exports__SystemManager,SystemPriority:__webpack_exports__SystemPriority,SystemType:__webpack_exports__SystemType,TagQuery:__webpack_exports__TagQuery,TestClock:__webpack_exports__TestClock,Text:__webpack_exports__Text,TextAlign:__webpack_exports__TextAlign,TextureLoader:__webpack_exports__TextureLoader,Tile:__webpack_exports__Tile,TileMap:__webpack_exports__TileMap,TileMapEvents:__webpack_exports__TileMapEvents,Timer:__webpack_exports__Timer,Toaster:__webpack_exports__Toaster,Transform:__webpack_exports__Transform,TransformComponent:__webpack_exports__TransformComponent,Transition:__webpack_exports__Transition,TreeNode:__webpack_exports__TreeNode,Trigger:__webpack_exports__Trigger,TriggerEvents:__webpack_exports__TriggerEvents,TwoPI:__webpack_exports__TwoPI,Util:__webpack_exports__Util,Vector:__webpack_exports__Vector,VectorView:__webpack_exports__VectorView,VertexBuffer:__webpack_exports__VertexBuffer,VertexLayout:__webpack_exports__VertexLayout,VerticalFirst:__webpack_exports__VerticalFirst,VisibleEvent:__webpack_exports__VisibleEvent,WebAudio:__webpack_exports__WebAudio,WebAudioInstance:__webpack_exports__WebAudioInstance,WheelDeltaMode:__webpack_exports__WheelDeltaMode,WheelEvent:__webpack_exports__WheelEvent,World:__webpack_exports__World,canonicalizeAngle:__webpack_exports__canonicalizeAngle,clamp:__webpack_exports__clamp,coroutine:__webpack_exports__coroutine,createId:__webpack_exports__createId,frac:__webpack_exports__frac,hasGraphicsTick:__webpack_exports__hasGraphicsTick,hasOnInitialize:__webpack_exports__hasOnInitialize,hasOnPostUpdate:__webpack_exports__hasOnPostUpdate,hasOnPreUpdate:__webpack_exports__hasOnPreUpdate,hasPostDraw:__webpack_exports__hasPostDraw,hasPreDraw:__webpack_exports__hasPreDraw,has_initialize:__webpack_exports__has_initialize,has_postupdate:__webpack_exports__has_postupdate,has_preupdate:__webpack_exports__has_preupdate,isAddedComponent:__webpack_exports__isAddedComponent,isComponentCtor:__webpack_exports__isComponentCtor,isLoaderConstructor:__webpack_exports__isLoaderConstructor,isRemovedComponent:__webpack_exports__isRemovedComponent,isSceneConstructor:__webpack_exports__isSceneConstructor,isScreenElement:__webpack_exports__isScreenElement,isSystemConstructor:__webpack_exports__isSystemConstructor,maxMessages:__webpack_exports__maxMessages,obsolete:__webpack_exports__obsolete,parseImageFiltering:__webpack_exports__parseImageFiltering,parseImageWrapping:__webpack_exports__parseImageWrapping,pixelSnapEpsilon:__webpack_exports__pixelSnapEpsilon,randomInRange:__webpack_exports__randomInRange,randomIntInRange:__webpack_exports__randomIntInRange,range:__webpack_exports__range,resetObsoleteCounter:__webpack_exports__resetObsoleteCounter,sign:__webpack_exports__sign,toDegrees:__webpack_exports__toDegrees,toRadians:__webpack_exports__toRadians,vec:__webpack_exports__vec,webgl:__webpack_exports__webgl},Symbol.toStringTag,{value:"Module"}));function getDefaultExportFromCjs(v){return v&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v}function getAugmentedNamespace(v){if(v.__esModule)return v;var r=v.default;if(typeof r=="function"){var s=function _(){return this instanceof _?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};s.prototype=r.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(v).forEach(function(_){var x=Object.getOwnPropertyDescriptor(v,_);Object.defineProperty(s,_,x.get?x:{enumerable:!0,get:function(){return v[_]}})}),s}var excaliburTiled_min={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1),require$$1=getAugmentedNamespace(excalibur);/*! For license information please see excalibur-tiled.min.js.LICENSE.txt */(function(v,r){(function(s,_){v.exports=_(function(){try{return require$$0}catch{}}(),require$$1)})(self,(s,_)=>(()=>{var x={"./node_modules/compare-versions/lib/esm/compare.js":(N,l,d)=>{d.r(l),d.d(l,{compare:()=>T});var o=d("./node_modules/compare-versions/lib/esm/compareVersions.js");const T=(q,C,Z)=>{P(Z);const j=(0,o.compareVersions)(q,C);return L[Z].includes(j)},L={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},Q=Object.keys(L),P=q=>{if(typeof q!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof q);if(Q.indexOf(q)===-1)throw new Error(`Invalid operator, expected one of ${Q.join("|")}`)}},"./node_modules/compare-versions/lib/esm/compareVersions.js":(N,l,d)=>{d.r(l),d.d(l,{compareVersions:()=>T});var o=d("./node_modules/compare-versions/lib/esm/utils.js");const T=(L,Q)=>{const P=(0,o.validateAndParse)(L),q=(0,o.validateAndParse)(Q),C=P.pop(),Z=q.pop(),j=(0,o.compareSegments)(P,q);return j!==0?j:C&&Z?(0,o.compareSegments)(C.split("."),Z.split(".")):C||Z?C?-1:1:0}},"./node_modules/compare-versions/lib/esm/utils.js":(N,l,d)=>{d.r(l),d.d(l,{compareSegments:()=>q,semver:()=>o,validateAndParse:()=>T});const o=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,T=C=>{if(typeof C!="string")throw new TypeError("Invalid argument expected string");const Z=C.match(o);if(!Z)throw new Error(`Invalid argument not valid semver ('${C}' received)`);return Z.shift(),Z},L=C=>C==="*"||C==="x"||C==="X",Q=C=>{const Z=parseInt(C,10);return isNaN(Z)?C:Z},P=(C,Z)=>{if(L(C)||L(Z))return 0;const[j,dt]=((Y,W)=>typeof Y!=typeof W?[String(Y),String(W)]:[Y,W])(Q(C),Q(Z));return j>dt?1:j<dt?-1:0},q=(C,Z)=>{for(let j=0;j<Math.max(C.length,Z.length);j++){const dt=P(C[j]||"0",Z[j]||"0");if(dt!==0)return dt}return 0}},"./node_modules/fast-xml-parser/src/json2xml.js":(N,l,d)=>{const o=d("./node_modules/fast-xml-parser/src/util.js").buildOptions,T={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(X){return X},attrValueProcessor:function(X){return X}},L=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor","rootNodeName"];function Q(X){this.options=o(X,T,L),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=u),this.options.cdataTagName?this.isCDATA=O:this.isCDATA=function(){return!1},this.replaceCDATAstr=q,this.replaceCDATAarr=C,this.processTextOrObjNode=P,this.options.format?(this.indentate=W,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=Y,this.buildObjNode=j):(this.buildTextNode=dt,this.buildObjNode=Z),this.buildTextValNode=dt,this.buildObjectNode=Z}function P(X,ht,pt){const ft=this.j2x(X,pt+1);return X[this.options.textNodeName]!==void 0&&Object.keys(X).length===1?this.buildTextNode(ft.val,ht,ft.attrStr,pt):this.buildObjNode(ft.val,ht,ft.attrStr,pt)}function q(X,ht){return X=this.options.tagValueProcessor(""+X),this.options.cdataPositionChar===""||X===""?X+"<![CDATA["+ht+"]]"+this.tagEndChar:X.replace(this.options.cdataPositionChar,"<![CDATA["+ht+"]]"+this.tagEndChar)}function C(X,ht){if(X=this.options.tagValueProcessor(""+X),this.options.cdataPositionChar===""||X==="")return X+"<![CDATA["+ht.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let pt in ht)X=X.replace(this.options.cdataPositionChar,"<![CDATA["+ht[pt]+"]]>");return X+this.newLine}function Z(X,ht,pt,ft){return pt&&X.indexOf("<")===-1?this.indentate(ft)+"<"+ht+pt+">"+X+"</"+ht+this.tagEndChar:this.indentate(ft)+"<"+ht+pt+this.tagEndChar+X+this.indentate(ft)+"</"+ht+this.tagEndChar}function j(X,ht,pt,ft){return X!==""?this.buildObjectNode(X,ht,pt,ft):this.indentate(ft)+"<"+ht+pt+"/"+this.tagEndChar}function dt(X,ht,pt,ft){return this.indentate(ft)+"<"+ht+pt+">"+this.options.tagValueProcessor(X)+"</"+ht+this.tagEndChar}function Y(X,ht,pt,ft){return X!==""?this.buildTextValNode(X,ht,pt,ft):this.indentate(ft)+"<"+ht+pt+"/"+this.tagEndChar}function W(X){return this.options.indentBy.repeat(X)}function u(X){return!!X.startsWith(this.options.attributeNamePrefix)&&X.substr(this.attrPrefixLen)}function O(X){return X===this.options.cdataTagName}Q.prototype.parse=function(X){return Array.isArray(X)&&this.options.rootNodeName&&this.options.rootNodeName.length>1&&(X={[this.options.rootNodeName]:X}),this.j2x(X,0).val},Q.prototype.j2x=function(X,ht){let pt="",ft="";for(let $ in X)if(X[$]!==void 0)if(X[$]===null)ft+=this.indentate(ht)+"<"+$+"/"+this.tagEndChar;else if(X[$]instanceof Date)ft+=this.buildTextNode(X[$],$,"",ht);else if(typeof X[$]!="object"){const At=this.isAttribute($);At?pt+=" "+At+'="'+this.options.attrValueProcessor(""+X[$])+'"':this.isCDATA($)?X[this.options.textNodeName]?ft+=this.replaceCDATAstr(X[this.options.textNodeName],X[$]):ft+=this.replaceCDATAstr("",X[$]):$===this.options.textNodeName?X[this.options.cdataTagName]||(ft+=this.options.tagValueProcessor(""+X[$])):ft+=this.buildTextNode(X[$],$,"",ht)}else if(Array.isArray(X[$]))if(this.isCDATA($))ft+=this.indentate(ht),X[this.options.textNodeName]?ft+=this.replaceCDATAarr(X[this.options.textNodeName],X[$]):ft+=this.replaceCDATAarr("",X[$]);else{const At=X[$].length;for(let _t=0;_t<At;_t++){const ut=X[$][_t];ut===void 0||(ft+=ut===null?this.indentate(ht)+"<"+$+"/"+this.tagEndChar:typeof ut=="object"?this.processTextOrObjNode(ut,$,ht):this.buildTextNode(ut,$,"",ht))}}else if(this.options.attrNodeName&&$===this.options.attrNodeName){const At=Object.keys(X[$]),_t=At.length;for(let ut=0;ut<_t;ut++)pt+=" "+At[ut]+'="'+this.options.attrValueProcessor(""+X[$][At[ut]])+'"'}else ft+=this.processTextOrObjNode(X[$],$,ht);return{attrStr:pt,val:ft}},N.exports=Q},"./node_modules/fast-xml-parser/src/nimndata.js":(N,l,d)=>{const o=function(dt){return String.fromCharCode(dt)},T={nilChar:o(176),missingChar:o(201),nilPremitive:o(175),missingPremitive:o(200),emptyChar:o(178),emptyValue:o(177),boundryChar:o(179),objStart:o(198),arrStart:o(204),arrayEnd:o(185)},L=[T.nilChar,T.nilPremitive,T.missingChar,T.missingPremitive,T.boundryChar,T.emptyChar,T.emptyValue,T.arrayEnd,T.objStart,T.arrStart],Q=function(dt,Y,W){if(typeof Y=="string")return dt&&dt[0]&&dt[0].val!==void 0?P(dt[0].val):P(dt);{const O=(u=dt)===void 0?T.missingChar:u===null?T.nilChar:!(u.child&&Object.keys(u.child).length===0&&(!u.attrsMap||Object.keys(u.attrsMap).length===0))||T.emptyChar;if(O===!0){let X="";if(Array.isArray(Y)){X+=T.arrStart;const ht=Y[0],pt=dt.length;if(typeof ht=="string")for(let ft=0;ft<pt;ft++){const $=P(dt[ft].val);X=q(X,$)}else for(let ft=0;ft<pt;ft++){const $=Q(dt[ft],ht,W);X=q(X,$)}X+=T.arrayEnd}else{X+=T.objStart;const ht=Object.keys(Y);Array.isArray(dt)&&(dt=dt[0]);for(let pt in ht){const ft=ht[pt];let $;$=!W.ignoreAttributes&&dt.attrsMap&&dt.attrsMap[ft]?Q(dt.attrsMap[ft],Y[ft],W):ft===W.textNodeName?Q(dt.val,Y[ft],W):Q(dt.child[ft],Y[ft],W),X=q(X,$)}}return X}return O}var u},P=function(dt){switch(dt){case void 0:return T.missingPremitive;case null:return T.nilPremitive;case"":return T.emptyValue;default:return dt}},q=function(dt,Y){return C(Y[0])||C(dt[dt.length-1])||(dt+=T.boundryChar),dt+Y},C=function(dt){return L.indexOf(dt)!==-1},Z=d("./node_modules/fast-xml-parser/src/xmlstr2xmlnode.js"),j=d("./node_modules/fast-xml-parser/src/util.js").buildOptions;l.convert2nimn=function(dt,Y,W){return W=j(W,Z.defaultOptions,Z.props),Q(dt,Y,W)}},"./node_modules/fast-xml-parser/src/node2json.js":(N,l,d)=>{const o=d("./node_modules/fast-xml-parser/src/util.js"),T=function(L,Q,P){const q={};if(!Q.alwaysCreateTextNode&&(!L.child||o.isEmptyObject(L.child))&&(!L.attrsMap||o.isEmptyObject(L.attrsMap)))return o.isExist(L.val)?L.val:"";if(o.isExist(L.val)&&(typeof L.val!="string"||L.val!==""&&L.val!==Q.cdataPositionChar)){const Z=o.isTagNameInArrayMode(L.tagname,Q.arrayMode,P);q[Q.textNodeName]=Z?[L.val]:L.val}o.merge(q,L.attrsMap,Q.arrayMode);const C=Object.keys(L.child);for(let Z=0;Z<C.length;Z++){const j=C[Z];if(L.child[j]&&L.child[j].length>1){q[j]=[];for(let dt in L.child[j])L.child[j].hasOwnProperty(dt)&&q[j].push(T(L.child[j][dt],Q,j))}else{const dt=T(L.child[j][0],Q,j),Y=Q.arrayMode===!0&&typeof dt=="object"||o.isTagNameInArrayMode(j,Q.arrayMode,P);q[j]=Y?[dt]:dt}}return q};l.convertToJson=T},"./node_modules/fast-xml-parser/src/node2json_str.js":(N,l,d)=>{const o=d("./node_modules/fast-xml-parser/src/util.js"),T=d("./node_modules/fast-xml-parser/src/util.js").buildOptions,L=d("./node_modules/fast-xml-parser/src/xmlstr2xmlnode.js"),Q=function(P,q,C){let Z="{";const j=Object.keys(P.child);for(let Y=0;Y<j.length;Y++){const W=j[Y];if(P.child[W]&&P.child[W].length>1){Z+='"'+W+'" : [ ';for(let u in P.child[W])Z+=Q(P.child[W][u],q)+" , ";Z=Z.substr(0,Z.length-1)+" ] "}else Z+='"'+W+'" : '+Q(P.child[W][0],q)+" ,"}return o.merge(Z,P.attrsMap),o.isEmptyObject(Z)?o.isExist(P.val)?P.val:"":(o.isExist(P.val)&&(typeof P.val!="string"||P.val!==""&&P.val!==q.cdataPositionChar)&&(Z+='"'+q.textNodeName+'" : '+((dt=P.val)!==!0&&dt!==!1&&isNaN(dt)?'"'+dt+'"':dt)),Z[Z.length-1]===","&&(Z=Z.substr(0,Z.length-2)),Z+"}");var dt};l.convertToJsonString=function(P,q){return(q=T(q,L.defaultOptions,L.props)).indentBy=q.indentBy||"",Q(P,q)}},"./node_modules/fast-xml-parser/src/parser.js":(N,l,d)=>{const o=d("./node_modules/fast-xml-parser/src/node2json.js"),T=d("./node_modules/fast-xml-parser/src/xmlstr2xmlnode.js"),L=d("./node_modules/fast-xml-parser/src/xmlstr2xmlnode.js"),Q=d("./node_modules/fast-xml-parser/src/util.js").buildOptions,P=d("./node_modules/fast-xml-parser/src/validator.js");l.parse=function(q,C={},Z){if(Z){Z===!0&&(Z={});const Y=P.validate(q,Z);if(Y!==!0)throw Error(Y.err.msg)}C.parseTrueNumberOnly&&C.parseNodeValue!==!1&&!C.numParseOptions&&(C.numParseOptions={leadingZeros:!1});let j=Q(C,L.defaultOptions,L.props);const dt=T.getTraversalObj(q,j);return o.convertToJson(dt,j)},l.convertTonimn=d("./node_modules/fast-xml-parser/src/nimndata.js").convert2nimn,l.getTraversalObj=T.getTraversalObj,l.convertToJson=o.convertToJson,l.convertToJsonString=d("./node_modules/fast-xml-parser/src/node2json_str.js").convertToJsonString,l.validate=P.validate,l.j2xParser=d("./node_modules/fast-xml-parser/src/json2xml.js"),l.parseToNimn=function(q,C,Z){return l.convertTonimn(l.getTraversalObj(q,Z),C,Z)}},"./node_modules/fast-xml-parser/src/util.js":(N,l)=>{const d=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",o="["+d+"]["+d+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",T=new RegExp("^"+o+"$");l.isExist=function(L){return L!==void 0},l.isEmptyObject=function(L){return Object.keys(L).length===0},l.merge=function(L,Q,P){if(Q){const q=Object.keys(Q),C=q.length;for(let Z=0;Z<C;Z++)L[q[Z]]=P==="strict"?[Q[q[Z]]]:Q[q[Z]]}},l.getValue=function(L){return l.isExist(L)?L:""},l.buildOptions=function(L,Q,P){let q={};if(!L)return Q;for(let C=0;C<P.length;C++)L[P[C]]!==void 0?q[P[C]]=L[P[C]]:q[P[C]]=Q[P[C]];return q},l.isTagNameInArrayMode=function(L,Q,P){return Q!==!1&&(Q instanceof RegExp?Q.test(L):typeof Q=="function"?!!Q(L,P):Q==="strict")},l.isName=function(L){return T.exec(L)!=null},l.getAllMatches=function(L,Q){const P=[];let q=Q.exec(L);for(;q;){const C=[];C.startIndex=Q.lastIndex-q[0].length;const Z=q.length;for(let j=0;j<Z;j++)C.push(q[j]);P.push(C),q=Q.exec(L)}return P},l.nameRegexp=o},"./node_modules/fast-xml-parser/src/validator.js":(N,l,d)=>{const o=d("./node_modules/fast-xml-parser/src/util.js"),T={allowBooleanAttributes:!1},L=["allowBooleanAttributes"];function Q(ht,pt){const ft=pt;for(;pt<ht.length;pt++)if(!(ht[pt]!="?"&&ht[pt]!=" ")){const $=ht.substr(ft,pt-ft);if(pt>5&&$==="xml")return W("InvalidXml","XML declaration allowed only at the start of the document.",O(ht,pt));if(ht[pt]=="?"&&ht[pt+1]==">"){pt++;break}}return pt}function P(ht,pt){if(ht.length>pt+5&&ht[pt+1]==="-"&&ht[pt+2]==="-"){for(pt+=3;pt<ht.length;pt++)if(ht[pt]==="-"&&ht[pt+1]==="-"&&ht[pt+2]===">"){pt+=2;break}}else if(ht.length>pt+8&&ht[pt+1]==="D"&&ht[pt+2]==="O"&&ht[pt+3]==="C"&&ht[pt+4]==="T"&&ht[pt+5]==="Y"&&ht[pt+6]==="P"&&ht[pt+7]==="E"){let ft=1;for(pt+=8;pt<ht.length;pt++)if(ht[pt]==="<")ft++;else if(ht[pt]===">"&&(ft--,ft===0))break}else if(ht.length>pt+9&&ht[pt+1]==="["&&ht[pt+2]==="C"&&ht[pt+3]==="D"&&ht[pt+4]==="A"&&ht[pt+5]==="T"&&ht[pt+6]==="A"&&ht[pt+7]==="["){for(pt+=8;pt<ht.length;pt++)if(ht[pt]==="]"&&ht[pt+1]==="]"&&ht[pt+2]===">"){pt+=2;break}}return pt}l.validate=function(ht,pt){pt=o.buildOptions(pt,T,L);const ft=[];let $=!1,At=!1;ht[0]==="\uFEFF"&&(ht=ht.substr(1));for(let ut=0;ut<ht.length;ut++)if(ht[ut]==="<"&&ht[ut+1]==="?"){if(ut+=2,ut=Q(ht,ut),ut.err)return ut}else{if(ht[ut]!=="<"){if(ht[ut]===" "||ht[ut]==="	"||ht[ut]===`
`||ht[ut]==="\r")continue;return W("InvalidChar","char '"+ht[ut]+"' is not expected.",O(ht,ut))}{let Ct=ut;if(ut++,ht[ut]==="!"){ut=P(ht,ut);continue}{let vt=!1;ht[ut]==="/"&&(vt=!0,ut++);let xt="";for(;ut<ht.length&&ht[ut]!==">"&&ht[ut]!==" "&&ht[ut]!=="	"&&ht[ut]!==`
`&&ht[ut]!=="\r";ut++)xt+=ht[ut];if(xt=xt.trim(),xt[xt.length-1]==="/"&&(xt=xt.substring(0,xt.length-1),ut--),_t=xt,!o.isName(_t)){let Jt;return Jt=xt.trim().length===0?"Invalid space after '<'.":"Tag '"+xt+"' is an invalid name.",W("InvalidTag",Jt,O(ht,ut))}const lt=Z(ht,ut);if(lt===!1)return W("InvalidAttr","Attributes for '"+xt+"' have open quote.",O(ht,ut));let kt=lt.value;if(ut=lt.index,kt[kt.length-1]==="/"){const Jt=ut-kt.length;kt=kt.substring(0,kt.length-1);const Ut=dt(kt,pt);if(Ut!==!0)return W(Ut.err.code,Ut.err.msg,O(ht,Jt+Ut.err.line));$=!0}else if(vt){if(!lt.tagClosed)return W("InvalidTag","Closing tag '"+xt+"' doesn't have proper closing.",O(ht,ut));if(kt.trim().length>0)return W("InvalidTag","Closing tag '"+xt+"' can't have attributes or invalid starting.",O(ht,Ct));{const Jt=ft.pop();if(xt!==Jt.tagName){let Ut=O(ht,Jt.tagStartPos);return W("InvalidTag","Expected closing tag '"+Jt.tagName+"' (opened in line "+Ut.line+", col "+Ut.col+") instead of closing tag '"+xt+"'.",O(ht,Ct))}ft.length==0&&(At=!0)}}else{const Jt=dt(kt,pt);if(Jt!==!0)return W(Jt.err.code,Jt.err.msg,O(ht,ut-kt.length+Jt.err.line));if(At===!0)return W("InvalidXml","Multiple possible root nodes found.",O(ht,ut));ft.push({tagName:xt,tagStartPos:Ct}),$=!0}for(ut++;ut<ht.length;ut++)if(ht[ut]==="<"){if(ht[ut+1]==="!"){ut++,ut=P(ht,ut);continue}if(ht[ut+1]!=="?")break;if(ut=Q(ht,++ut),ut.err)return ut}else if(ht[ut]==="&"){const Jt=Y(ht,ut);if(Jt==-1)return W("InvalidChar","char '&' is not expected.",O(ht,ut));ut=Jt}ht[ut]==="<"&&ut--}}}var _t;return $?ft.length==1?W("InvalidTag","Unclosed tag '"+ft[0].tagName+"'.",O(ht,ft[0].tagStartPos)):!(ft.length>0)||W("InvalidXml","Invalid '"+JSON.stringify(ft.map(ut=>ut.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):W("InvalidXml","Start tag expected.",1)};const q='"',C="'";function Z(ht,pt){let ft="",$="",At=!1;for(;pt<ht.length;pt++){if(ht[pt]===q||ht[pt]===C)$===""?$=ht[pt]:$!==ht[pt]||($="");else if(ht[pt]===">"&&$===""){At=!0;break}ft+=ht[pt]}return $===""&&{value:ft,index:pt,tagClosed:At}}const j=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function dt(ht,pt){const ft=o.getAllMatches(ht,j),$={};for(let At=0;At<ft.length;At++){if(ft[At][1].length===0)return W("InvalidAttr","Attribute '"+ft[At][2]+"' has no space in starting.",X(ft[At]));if(ft[At][3]===void 0&&!pt.allowBooleanAttributes)return W("InvalidAttr","boolean attribute '"+ft[At][2]+"' is not allowed.",X(ft[At]));const _t=ft[At][2];if(!u(_t))return W("InvalidAttr","Attribute '"+_t+"' is an invalid name.",X(ft[At]));if($.hasOwnProperty(_t))return W("InvalidAttr","Attribute '"+_t+"' is repeated.",X(ft[At]));$[_t]=1}return!0}function Y(ht,pt){if(ht[++pt]===";")return-1;if(ht[pt]==="#")return function($,At){let _t=/\d/;for($[At]==="x"&&(At++,_t=/[\da-fA-F]/);At<$.length;At++){if($[At]===";")return At;if(!$[At].match(_t))break}return-1}(ht,++pt);let ft=0;for(;pt<ht.length;pt++,ft++)if(!(ht[pt].match(/\w/)&&ft<20)){if(ht[pt]===";")break;return-1}return pt}function W(ht,pt,ft){return{err:{code:ht,msg:pt,line:ft.line||ft,col:ft.col}}}function u(ht){return o.isName(ht)}function O(ht,pt){const ft=ht.substring(0,pt).split(/\r?\n/);return{line:ft.length,col:ft[ft.length-1].length+1}}function X(ht){return ht.startIndex+ht[1].length}},"./node_modules/fast-xml-parser/src/xmlNode.js":N=>{N.exports=function(l,d,o){this.tagname=l,this.parent=d,this.child={},this.attrsMap={},this.val=o,this.addChild=function(T){Array.isArray(this.child[T.tagname])?this.child[T.tagname].push(T):this.child[T.tagname]=[T]}}},"./node_modules/fast-xml-parser/src/xmlstr2xmlnode.js":(N,l,d)=>{const o=d("./node_modules/fast-xml-parser/src/util.js"),T=d("./node_modules/fast-xml-parser/src/util.js").buildOptions,L=d("./node_modules/fast-xml-parser/src/xmlNode.js"),Q=d("./node_modules/strnum/strnum.js");"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,o.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const P={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",numParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(O,X){return O},attrValueProcessor:function(O,X){return O},stopNodes:[],alwaysCreateTextNode:!1};l.defaultOptions=P;const q=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","numParseOptions","stopNodes","alwaysCreateTextNode"];function C(O,X,ht){return X&&(ht.trimValues&&(X=X.trim()),X=j(X=ht.tagValueProcessor(X,O),ht.parseNodeValue,ht.numParseOptions)),X}function Z(O,X){if(X.ignoreNameSpace){const ht=O.split(":"),pt=O.charAt(0)==="/"?"/":"";if(ht[0]==="xmlns")return"";ht.length===2&&(O=pt+ht[1])}return O}function j(O,X,ht){if(X&&typeof O=="string"){const pt=O.trim();return pt==="true"||pt!=="false"&&Q(O,ht)}return o.isExist(O)?O:""}l.props=q;const dt=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])(.*?)\\3)?`,"g");function Y(O,X){if(!X.ignoreAttributes&&typeof O=="string"){O=O.replace(/\r?\n/g," ");const ht=o.getAllMatches(O,dt),pt=ht.length,ft={};for(let $=0;$<pt;$++){const At=Z(ht[$][1],X);At.length&&(ht[$][4]!==void 0?(X.trimValues&&(ht[$][4]=ht[$][4].trim()),ht[$][4]=X.attrValueProcessor(ht[$][4],At),ft[X.attributeNamePrefix+At]=j(ht[$][4],X.parseAttributeValue,X.numParseOptions)):X.allowBooleanAttributes&&(ft[X.attributeNamePrefix+At]=!0))}if(!Object.keys(ft).length)return;if(X.attrNodeName){const $={};return $[X.attrNodeName]=ft,$}return ft}}function W(O,X){let ht,pt="";for(let ft=X;ft<O.length;ft++){let $=O[ft];if(ht)$===ht&&(ht="");else if($==='"'||$==="'")ht=$;else{if($===">")return{data:pt,index:ft};$==="	"&&($=" ")}pt+=$}}function u(O,X,ht,pt){const ft=O.indexOf(X,ht);if(ft===-1)throw new Error(pt);return ft+X.length-1}l.getTraversalObj=function(O,X){O=O.replace(/\r\n?/g,`
`),X=T(X,P,q);const ht=new L("!xml");let pt=ht,ft="";for(let $=0;$<O.length;$++)if(O[$]==="<")if(O[$+1]==="/"){const At=u(O,">",$,"Closing Tag is not closed.");let _t=O.substring($+2,At).trim();if(X.ignoreNameSpace){const ut=_t.indexOf(":");ut!==-1&&(_t=_t.substr(ut+1))}pt&&(pt.val?pt.val=o.getValue(pt.val)+""+C(_t,ft,X):pt.val=C(_t,ft,X)),X.stopNodes.length&&X.stopNodes.includes(pt.tagname)&&(pt.child=[],pt.attrsMap==null&&(pt.attrsMap={}),pt.val=O.substr(pt.startIndex+1,$-pt.startIndex-1)),pt=pt.parent,ft="",$=At}else if(O[$+1]==="?")$=u(O,"?>",$,"Pi Tag is not closed.");else if(O.substr($+1,3)==="!--")$=u(O,"-->",$,"Comment is not closed.");else if(O.substr($+1,2)==="!D"){const At=u(O,">",$,"DOCTYPE is not closed.");$=O.substring($,At).indexOf("[")>=0?O.indexOf("]>",$)+1:At}else if(O.substr($+1,2)==="!["){const At=u(O,"]]>",$,"CDATA is not closed.")-2,_t=O.substring($+9,At);if(ft&&(pt.val=o.getValue(pt.val)+""+C(pt.tagname,ft,X),ft=""),X.cdataTagName){const ut=new L(X.cdataTagName,pt,_t);pt.addChild(ut),pt.val=o.getValue(pt.val)+X.cdataPositionChar,_t&&(ut.val=_t)}else pt.val=(pt.val||"")+(_t||"");$=At+2}else{const At=W(O,$+1);let _t=At.data;const ut=At.index,Ct=_t.indexOf(" ");let vt=_t,xt=!0;if(Ct!==-1&&(vt=_t.substr(0,Ct).replace(/\s\s*$/,""),_t=_t.substr(Ct+1)),X.ignoreNameSpace){const lt=vt.indexOf(":");lt!==-1&&(vt=vt.substr(lt+1),xt=vt!==At.data.substr(lt+1))}if(pt&&ft&&pt.tagname!=="!xml"&&(pt.val=o.getValue(pt.val)+""+C(pt.tagname,ft,X)),_t.length>0&&_t.lastIndexOf("/")===_t.length-1){vt[vt.length-1]==="/"?(vt=vt.substr(0,vt.length-1),_t=vt):_t=_t.substr(0,_t.length-1);const lt=new L(vt,pt,"");vt!==_t&&(lt.attrsMap=Y(_t,X)),pt.addChild(lt)}else{const lt=new L(vt,pt);X.stopNodes.length&&X.stopNodes.includes(lt.tagname)&&(lt.startIndex=ut),vt!==_t&&xt&&(lt.attrsMap=Y(_t,X)),pt.addChild(lt),pt=lt}ft="",$=ut}else ft+=O[$];return ht}},"./node_modules/pako/index.js":(N,l,d)=>{var o={};(0,d("./node_modules/pako/lib/utils/common.js").assign)(o,d("./node_modules/pako/lib/deflate.js"),d("./node_modules/pako/lib/inflate.js"),d("./node_modules/pako/lib/zlib/constants.js")),N.exports=o},"./node_modules/pako/lib/deflate.js":(N,l,d)=>{var o=d("./node_modules/pako/lib/zlib/deflate.js"),T=d("./node_modules/pako/lib/utils/common.js"),L=d("./node_modules/pako/lib/utils/strings.js"),Q=d("./node_modules/pako/lib/zlib/messages.js"),P=d("./node_modules/pako/lib/zlib/zstream.js"),q=Object.prototype.toString,C=0,Z=-1,j=0,dt=8;function Y(u){if(!(this instanceof Y))return new Y(u);this.options=T.assign({level:Z,method:dt,chunkSize:16384,windowBits:15,memLevel:8,strategy:j,to:""},u||{});var O=this.options;O.raw&&O.windowBits>0?O.windowBits=-O.windowBits:O.gzip&&O.windowBits>0&&O.windowBits<16&&(O.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new P,this.strm.avail_out=0;var X=o.deflateInit2(this.strm,O.level,O.method,O.windowBits,O.memLevel,O.strategy);if(X!==C)throw new Error(Q[X]);if(O.header&&o.deflateSetHeader(this.strm,O.header),O.dictionary){var ht;if(ht=typeof O.dictionary=="string"?L.string2buf(O.dictionary):q.call(O.dictionary)==="[object ArrayBuffer]"?new Uint8Array(O.dictionary):O.dictionary,(X=o.deflateSetDictionary(this.strm,ht))!==C)throw new Error(Q[X]);this._dict_set=!0}}function W(u,O){var X=new Y(O);if(X.push(u,!0),X.err)throw X.msg||Q[X.err];return X.result}Y.prototype.push=function(u,O){var X,ht,pt=this.strm,ft=this.options.chunkSize;if(this.ended)return!1;ht=O===~~O?O:O===!0?4:0,typeof u=="string"?pt.input=L.string2buf(u):q.call(u)==="[object ArrayBuffer]"?pt.input=new Uint8Array(u):pt.input=u,pt.next_in=0,pt.avail_in=pt.input.length;do{if(pt.avail_out===0&&(pt.output=new T.Buf8(ft),pt.next_out=0,pt.avail_out=ft),(X=o.deflate(pt,ht))!==1&&X!==C)return this.onEnd(X),this.ended=!0,!1;pt.avail_out!==0&&(pt.avail_in!==0||ht!==4&&ht!==2)||(this.options.to==="string"?this.onData(L.buf2binstring(T.shrinkBuf(pt.output,pt.next_out))):this.onData(T.shrinkBuf(pt.output,pt.next_out)))}while((pt.avail_in>0||pt.avail_out===0)&&X!==1);return ht===4?(X=o.deflateEnd(this.strm),this.onEnd(X),this.ended=!0,X===C):ht!==2||(this.onEnd(C),pt.avail_out=0,!0)},Y.prototype.onData=function(u){this.chunks.push(u)},Y.prototype.onEnd=function(u){u===C&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=T.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},l.Deflate=Y,l.deflate=W,l.deflateRaw=function(u,O){return(O=O||{}).raw=!0,W(u,O)},l.gzip=function(u,O){return(O=O||{}).gzip=!0,W(u,O)}},"./node_modules/pako/lib/inflate.js":(N,l,d)=>{var o=d("./node_modules/pako/lib/zlib/inflate.js"),T=d("./node_modules/pako/lib/utils/common.js"),L=d("./node_modules/pako/lib/utils/strings.js"),Q=d("./node_modules/pako/lib/zlib/constants.js"),P=d("./node_modules/pako/lib/zlib/messages.js"),q=d("./node_modules/pako/lib/zlib/zstream.js"),C=d("./node_modules/pako/lib/zlib/gzheader.js"),Z=Object.prototype.toString;function j(Y){if(!(this instanceof j))return new j(Y);this.options=T.assign({chunkSize:16384,windowBits:0,to:""},Y||{});var W=this.options;W.raw&&W.windowBits>=0&&W.windowBits<16&&(W.windowBits=-W.windowBits,W.windowBits===0&&(W.windowBits=-15)),!(W.windowBits>=0&&W.windowBits<16)||Y&&Y.windowBits||(W.windowBits+=32),W.windowBits>15&&W.windowBits<48&&!(15&W.windowBits)&&(W.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new q,this.strm.avail_out=0;var u=o.inflateInit2(this.strm,W.windowBits);if(u!==Q.Z_OK)throw new Error(P[u]);if(this.header=new C,o.inflateGetHeader(this.strm,this.header),W.dictionary&&(typeof W.dictionary=="string"?W.dictionary=L.string2buf(W.dictionary):Z.call(W.dictionary)==="[object ArrayBuffer]"&&(W.dictionary=new Uint8Array(W.dictionary)),W.raw&&(u=o.inflateSetDictionary(this.strm,W.dictionary))!==Q.Z_OK))throw new Error(P[u])}function dt(Y,W){var u=new j(W);if(u.push(Y,!0),u.err)throw u.msg||P[u.err];return u.result}j.prototype.push=function(Y,W){var u,O,X,ht,pt,ft=this.strm,$=this.options.chunkSize,At=this.options.dictionary,_t=!1;if(this.ended)return!1;O=W===~~W?W:W===!0?Q.Z_FINISH:Q.Z_NO_FLUSH,typeof Y=="string"?ft.input=L.binstring2buf(Y):Z.call(Y)==="[object ArrayBuffer]"?ft.input=new Uint8Array(Y):ft.input=Y,ft.next_in=0,ft.avail_in=ft.input.length;do{if(ft.avail_out===0&&(ft.output=new T.Buf8($),ft.next_out=0,ft.avail_out=$),(u=o.inflate(ft,Q.Z_NO_FLUSH))===Q.Z_NEED_DICT&&At&&(u=o.inflateSetDictionary(this.strm,At)),u===Q.Z_BUF_ERROR&&_t===!0&&(u=Q.Z_OK,_t=!1),u!==Q.Z_STREAM_END&&u!==Q.Z_OK)return this.onEnd(u),this.ended=!0,!1;ft.next_out&&(ft.avail_out!==0&&u!==Q.Z_STREAM_END&&(ft.avail_in!==0||O!==Q.Z_FINISH&&O!==Q.Z_SYNC_FLUSH)||(this.options.to==="string"?(X=L.utf8border(ft.output,ft.next_out),ht=ft.next_out-X,pt=L.buf2string(ft.output,X),ft.next_out=ht,ft.avail_out=$-ht,ht&&T.arraySet(ft.output,ft.output,X,ht,0),this.onData(pt)):this.onData(T.shrinkBuf(ft.output,ft.next_out)))),ft.avail_in===0&&ft.avail_out===0&&(_t=!0)}while((ft.avail_in>0||ft.avail_out===0)&&u!==Q.Z_STREAM_END);return u===Q.Z_STREAM_END&&(O=Q.Z_FINISH),O===Q.Z_FINISH?(u=o.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===Q.Z_OK):O!==Q.Z_SYNC_FLUSH||(this.onEnd(Q.Z_OK),ft.avail_out=0,!0)},j.prototype.onData=function(Y){this.chunks.push(Y)},j.prototype.onEnd=function(Y){Y===Q.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=T.flattenChunks(this.chunks)),this.chunks=[],this.err=Y,this.msg=this.strm.msg},l.Inflate=j,l.inflate=dt,l.inflateRaw=function(Y,W){return(W=W||{}).raw=!0,dt(Y,W)},l.ungzip=dt},"./node_modules/pako/lib/utils/common.js":(N,l)=>{var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function o(Q,P){return Object.prototype.hasOwnProperty.call(Q,P)}l.assign=function(Q){for(var P=Array.prototype.slice.call(arguments,1);P.length;){var q=P.shift();if(q){if(typeof q!="object")throw new TypeError(q+"must be non-object");for(var C in q)o(q,C)&&(Q[C]=q[C])}}return Q},l.shrinkBuf=function(Q,P){return Q.length===P?Q:Q.subarray?Q.subarray(0,P):(Q.length=P,Q)};var T={arraySet:function(Q,P,q,C,Z){if(P.subarray&&Q.subarray)Q.set(P.subarray(q,q+C),Z);else for(var j=0;j<C;j++)Q[Z+j]=P[q+j]},flattenChunks:function(Q){var P,q,C,Z,j,dt;for(C=0,P=0,q=Q.length;P<q;P++)C+=Q[P].length;for(dt=new Uint8Array(C),Z=0,P=0,q=Q.length;P<q;P++)j=Q[P],dt.set(j,Z),Z+=j.length;return dt}},L={arraySet:function(Q,P,q,C,Z){for(var j=0;j<C;j++)Q[Z+j]=P[q+j]},flattenChunks:function(Q){return[].concat.apply([],Q)}};l.setTyped=function(Q){Q?(l.Buf8=Uint8Array,l.Buf16=Uint16Array,l.Buf32=Int32Array,l.assign(l,T)):(l.Buf8=Array,l.Buf16=Array,l.Buf32=Array,l.assign(l,L))},l.setTyped(d)},"./node_modules/pako/lib/utils/strings.js":(N,l,d)=>{var o=d("./node_modules/pako/lib/utils/common.js"),T=!0,L=!0;try{String.fromCharCode.apply(null,[0])}catch{T=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{L=!1}for(var Q=new o.Buf8(256),P=0;P<256;P++)Q[P]=P>=252?6:P>=248?5:P>=240?4:P>=224?3:P>=192?2:1;function q(C,Z){if(Z<65534&&(C.subarray&&L||!C.subarray&&T))return String.fromCharCode.apply(null,o.shrinkBuf(C,Z));for(var j="",dt=0;dt<Z;dt++)j+=String.fromCharCode(C[dt]);return j}Q[254]=Q[254]=1,l.string2buf=function(C){var Z,j,dt,Y,W,u=C.length,O=0;for(Y=0;Y<u;Y++)(64512&(j=C.charCodeAt(Y)))==55296&&Y+1<u&&(64512&(dt=C.charCodeAt(Y+1)))==56320&&(j=65536+(j-55296<<10)+(dt-56320),Y++),O+=j<128?1:j<2048?2:j<65536?3:4;for(Z=new o.Buf8(O),W=0,Y=0;W<O;Y++)(64512&(j=C.charCodeAt(Y)))==55296&&Y+1<u&&(64512&(dt=C.charCodeAt(Y+1)))==56320&&(j=65536+(j-55296<<10)+(dt-56320),Y++),j<128?Z[W++]=j:j<2048?(Z[W++]=192|j>>>6,Z[W++]=128|63&j):j<65536?(Z[W++]=224|j>>>12,Z[W++]=128|j>>>6&63,Z[W++]=128|63&j):(Z[W++]=240|j>>>18,Z[W++]=128|j>>>12&63,Z[W++]=128|j>>>6&63,Z[W++]=128|63&j);return Z},l.buf2binstring=function(C){return q(C,C.length)},l.binstring2buf=function(C){for(var Z=new o.Buf8(C.length),j=0,dt=Z.length;j<dt;j++)Z[j]=C.charCodeAt(j);return Z},l.buf2string=function(C,Z){var j,dt,Y,W,u=Z||C.length,O=new Array(2*u);for(dt=0,j=0;j<u;)if((Y=C[j++])<128)O[dt++]=Y;else if((W=Q[Y])>4)O[dt++]=65533,j+=W-1;else{for(Y&=W===2?31:W===3?15:7;W>1&&j<u;)Y=Y<<6|63&C[j++],W--;W>1?O[dt++]=65533:Y<65536?O[dt++]=Y:(Y-=65536,O[dt++]=55296|Y>>10&1023,O[dt++]=56320|1023&Y)}return q(O,dt)},l.utf8border=function(C,Z){var j;for((Z=Z||C.length)>C.length&&(Z=C.length),j=Z-1;j>=0&&(192&C[j])==128;)j--;return j<0||j===0?Z:j+Q[C[j]]>Z?j:Z}},"./node_modules/pako/lib/zlib/adler32.js":N=>{N.exports=function(l,d,o,T){for(var L=65535&l|0,Q=l>>>16&65535|0,P=0;o!==0;){o-=P=o>2e3?2e3:o;do Q=Q+(L=L+d[T++]|0)|0;while(--P);L%=65521,Q%=65521}return L|Q<<16|0}},"./node_modules/pako/lib/zlib/constants.js":N=>{N.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},"./node_modules/pako/lib/zlib/crc32.js":N=>{var l=function(){for(var d,o=[],T=0;T<256;T++){d=T;for(var L=0;L<8;L++)d=1&d?3988292384^d>>>1:d>>>1;o[T]=d}return o}();N.exports=function(d,o,T,L){var Q=l,P=L+T;d^=-1;for(var q=L;q<P;q++)d=d>>>8^Q[255&(d^o[q])];return-1^d}},"./node_modules/pako/lib/zlib/deflate.js":(N,l,d)=>{var o,T=d("./node_modules/pako/lib/utils/common.js"),L=d("./node_modules/pako/lib/zlib/trees.js"),Q=d("./node_modules/pako/lib/zlib/adler32.js"),P=d("./node_modules/pako/lib/zlib/crc32.js"),q=d("./node_modules/pako/lib/zlib/messages.js"),C=0,Z=0,j=-2,dt=2,Y=8,W=286,u=30,O=19,X=2*W+1,ht=15,pt=3,ft=258,$=ft+pt+1,At=42,_t=103,ut=113,Ct=666;function vt(ot,It){return ot.msg=q[It],It}function xt(ot){return(ot<<1)-(ot>4?9:0)}function lt(ot){for(var It=ot.length;--It>=0;)ot[It]=0}function kt(ot){var It=ot.state,Nt=It.pending;Nt>ot.avail_out&&(Nt=ot.avail_out),Nt!==0&&(T.arraySet(ot.output,It.pending_buf,It.pending_out,Nt,ot.next_out),ot.next_out+=Nt,It.pending_out+=Nt,ot.total_out+=Nt,ot.avail_out-=Nt,It.pending-=Nt,It.pending===0&&(It.pending_out=0))}function Jt(ot,It){L._tr_flush_block(ot,ot.block_start>=0?ot.block_start:-1,ot.strstart-ot.block_start,It),ot.block_start=ot.strstart,kt(ot.strm)}function Ut(ot,It){ot.pending_buf[ot.pending++]=It}function Ae(ot,It){ot.pending_buf[ot.pending++]=It>>>8&255,ot.pending_buf[ot.pending++]=255&It}function Ot(ot,It){var Nt,yt,re=ot.max_chain_length,Wt=ot.strstart,Vt=ot.prev_length,Tt=ot.nice_match,qt=ot.strstart>ot.w_size-$?ot.strstart-(ot.w_size-$):0,Gt=ot.window,se=ot.w_mask,te=ot.prev,ge=ot.strstart+ft,Me=Gt[Wt+Vt-1],Ie=Gt[Wt+Vt];ot.prev_length>=ot.good_match&&(re>>=2),Tt>ot.lookahead&&(Tt=ot.lookahead);do if(Gt[(Nt=It)+Vt]===Ie&&Gt[Nt+Vt-1]===Me&&Gt[Nt]===Gt[Wt]&&Gt[++Nt]===Gt[Wt+1]){Wt+=2,Nt++;do;while(Gt[++Wt]===Gt[++Nt]&&Gt[++Wt]===Gt[++Nt]&&Gt[++Wt]===Gt[++Nt]&&Gt[++Wt]===Gt[++Nt]&&Gt[++Wt]===Gt[++Nt]&&Gt[++Wt]===Gt[++Nt]&&Gt[++Wt]===Gt[++Nt]&&Gt[++Wt]===Gt[++Nt]&&Wt<ge);if(yt=ft-(ge-Wt),Wt=ge-ft,yt>Vt){if(ot.match_start=It,Vt=yt,yt>=Tt)break;Me=Gt[Wt+Vt-1],Ie=Gt[Wt+Vt]}}while((It=te[It&se])>qt&&--re!=0);return Vt<=ot.lookahead?Vt:ot.lookahead}function $t(ot){var It,Nt,yt,re,Wt,Vt,Tt,qt,Gt,se,te=ot.w_size;do{if(re=ot.window_size-ot.lookahead-ot.strstart,ot.strstart>=te+(te-$)){T.arraySet(ot.window,ot.window,te,te,0),ot.match_start-=te,ot.strstart-=te,ot.block_start-=te,It=Nt=ot.hash_size;do yt=ot.head[--It],ot.head[It]=yt>=te?yt-te:0;while(--Nt);It=Nt=te;do yt=ot.prev[--It],ot.prev[It]=yt>=te?yt-te:0;while(--Nt);re+=te}if(ot.strm.avail_in===0)break;if(Vt=ot.strm,Tt=ot.window,qt=ot.strstart+ot.lookahead,Gt=re,se=void 0,(se=Vt.avail_in)>Gt&&(se=Gt),Nt=se===0?0:(Vt.avail_in-=se,T.arraySet(Tt,Vt.input,Vt.next_in,se,qt),Vt.state.wrap===1?Vt.adler=Q(Vt.adler,Tt,se,qt):Vt.state.wrap===2&&(Vt.adler=P(Vt.adler,Tt,se,qt)),Vt.next_in+=se,Vt.total_in+=se,se),ot.lookahead+=Nt,ot.lookahead+ot.insert>=pt)for(Wt=ot.strstart-ot.insert,ot.ins_h=ot.window[Wt],ot.ins_h=(ot.ins_h<<ot.hash_shift^ot.window[Wt+1])&ot.hash_mask;ot.insert&&(ot.ins_h=(ot.ins_h<<ot.hash_shift^ot.window[Wt+pt-1])&ot.hash_mask,ot.prev[Wt&ot.w_mask]=ot.head[ot.ins_h],ot.head[ot.ins_h]=Wt,Wt++,ot.insert--,!(ot.lookahead+ot.insert<pt)););}while(ot.lookahead<$&&ot.strm.avail_in!==0)}function Zt(ot,It){for(var Nt,yt;;){if(ot.lookahead<$){if($t(ot),ot.lookahead<$&&It===C)return 1;if(ot.lookahead===0)break}if(Nt=0,ot.lookahead>=pt&&(ot.ins_h=(ot.ins_h<<ot.hash_shift^ot.window[ot.strstart+pt-1])&ot.hash_mask,Nt=ot.prev[ot.strstart&ot.w_mask]=ot.head[ot.ins_h],ot.head[ot.ins_h]=ot.strstart),Nt!==0&&ot.strstart-Nt<=ot.w_size-$&&(ot.match_length=Ot(ot,Nt)),ot.match_length>=pt)if(yt=L._tr_tally(ot,ot.strstart-ot.match_start,ot.match_length-pt),ot.lookahead-=ot.match_length,ot.match_length<=ot.max_lazy_match&&ot.lookahead>=pt){ot.match_length--;do ot.strstart++,ot.ins_h=(ot.ins_h<<ot.hash_shift^ot.window[ot.strstart+pt-1])&ot.hash_mask,Nt=ot.prev[ot.strstart&ot.w_mask]=ot.head[ot.ins_h],ot.head[ot.ins_h]=ot.strstart;while(--ot.match_length!=0);ot.strstart++}else ot.strstart+=ot.match_length,ot.match_length=0,ot.ins_h=ot.window[ot.strstart],ot.ins_h=(ot.ins_h<<ot.hash_shift^ot.window[ot.strstart+1])&ot.hash_mask;else yt=L._tr_tally(ot,0,ot.window[ot.strstart]),ot.lookahead--,ot.strstart++;if(yt&&(Jt(ot,!1),ot.strm.avail_out===0))return 1}return ot.insert=ot.strstart<pt-1?ot.strstart:pt-1,It===4?(Jt(ot,!0),ot.strm.avail_out===0?3:4):ot.last_lit&&(Jt(ot,!1),ot.strm.avail_out===0)?1:2}function Yt(ot,It){for(var Nt,yt,re;;){if(ot.lookahead<$){if($t(ot),ot.lookahead<$&&It===C)return 1;if(ot.lookahead===0)break}if(Nt=0,ot.lookahead>=pt&&(ot.ins_h=(ot.ins_h<<ot.hash_shift^ot.window[ot.strstart+pt-1])&ot.hash_mask,Nt=ot.prev[ot.strstart&ot.w_mask]=ot.head[ot.ins_h],ot.head[ot.ins_h]=ot.strstart),ot.prev_length=ot.match_length,ot.prev_match=ot.match_start,ot.match_length=pt-1,Nt!==0&&ot.prev_length<ot.max_lazy_match&&ot.strstart-Nt<=ot.w_size-$&&(ot.match_length=Ot(ot,Nt),ot.match_length<=5&&(ot.strategy===1||ot.match_length===pt&&ot.strstart-ot.match_start>4096)&&(ot.match_length=pt-1)),ot.prev_length>=pt&&ot.match_length<=ot.prev_length){re=ot.strstart+ot.lookahead-pt,yt=L._tr_tally(ot,ot.strstart-1-ot.prev_match,ot.prev_length-pt),ot.lookahead-=ot.prev_length-1,ot.prev_length-=2;do++ot.strstart<=re&&(ot.ins_h=(ot.ins_h<<ot.hash_shift^ot.window[ot.strstart+pt-1])&ot.hash_mask,Nt=ot.prev[ot.strstart&ot.w_mask]=ot.head[ot.ins_h],ot.head[ot.ins_h]=ot.strstart);while(--ot.prev_length!=0);if(ot.match_available=0,ot.match_length=pt-1,ot.strstart++,yt&&(Jt(ot,!1),ot.strm.avail_out===0))return 1}else if(ot.match_available){if((yt=L._tr_tally(ot,0,ot.window[ot.strstart-1]))&&Jt(ot,!1),ot.strstart++,ot.lookahead--,ot.strm.avail_out===0)return 1}else ot.match_available=1,ot.strstart++,ot.lookahead--}return ot.match_available&&(yt=L._tr_tally(ot,0,ot.window[ot.strstart-1]),ot.match_available=0),ot.insert=ot.strstart<pt-1?ot.strstart:pt-1,It===4?(Jt(ot,!0),ot.strm.avail_out===0?3:4):ot.last_lit&&(Jt(ot,!1),ot.strm.avail_out===0)?1:2}function Ve(ot,It,Nt,yt,re){this.good_length=ot,this.max_lazy=It,this.nice_length=Nt,this.max_chain=yt,this.func=re}function xe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new T.Buf16(2*X),this.dyn_dtree=new T.Buf16(2*(2*u+1)),this.bl_tree=new T.Buf16(2*(2*O+1)),lt(this.dyn_ltree),lt(this.dyn_dtree),lt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new T.Buf16(ht+1),this.heap=new T.Buf16(2*W+1),lt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new T.Buf16(2*W+1),lt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ee(ot){var It;return ot&&ot.state?(ot.total_in=ot.total_out=0,ot.data_type=dt,(It=ot.state).pending=0,It.pending_out=0,It.wrap<0&&(It.wrap=-It.wrap),It.status=It.wrap?At:ut,ot.adler=It.wrap===2?0:1,It.last_flush=C,L._tr_init(It),Z):vt(ot,j)}function Qe(ot){var It,Nt=Ee(ot);return Nt===Z&&((It=ot.state).window_size=2*It.w_size,lt(It.head),It.max_lazy_match=o[It.level].max_lazy,It.good_match=o[It.level].good_length,It.nice_match=o[It.level].nice_length,It.max_chain_length=o[It.level].max_chain,It.strstart=0,It.block_start=0,It.lookahead=0,It.insert=0,It.match_length=It.prev_length=pt-1,It.match_available=0,It.ins_h=0),Nt}function Bt(ot,It,Nt,yt,re,Wt){if(!ot)return j;var Vt=1;if(It===-1&&(It=6),yt<0?(Vt=0,yt=-yt):yt>15&&(Vt=2,yt-=16),re<1||re>9||Nt!==Y||yt<8||yt>15||It<0||It>9||Wt<0||Wt>4)return vt(ot,j);yt===8&&(yt=9);var Tt=new xe;return ot.state=Tt,Tt.strm=ot,Tt.wrap=Vt,Tt.gzhead=null,Tt.w_bits=yt,Tt.w_size=1<<Tt.w_bits,Tt.w_mask=Tt.w_size-1,Tt.hash_bits=re+7,Tt.hash_size=1<<Tt.hash_bits,Tt.hash_mask=Tt.hash_size-1,Tt.hash_shift=~~((Tt.hash_bits+pt-1)/pt),Tt.window=new T.Buf8(2*Tt.w_size),Tt.head=new T.Buf16(Tt.hash_size),Tt.prev=new T.Buf16(Tt.w_size),Tt.lit_bufsize=1<<re+6,Tt.pending_buf_size=4*Tt.lit_bufsize,Tt.pending_buf=new T.Buf8(Tt.pending_buf_size),Tt.d_buf=1*Tt.lit_bufsize,Tt.l_buf=3*Tt.lit_bufsize,Tt.level=It,Tt.strategy=Wt,Tt.method=Nt,Qe(ot)}o=[new Ve(0,0,0,0,function(ot,It){var Nt=65535;for(Nt>ot.pending_buf_size-5&&(Nt=ot.pending_buf_size-5);;){if(ot.lookahead<=1){if($t(ot),ot.lookahead===0&&It===C)return 1;if(ot.lookahead===0)break}ot.strstart+=ot.lookahead,ot.lookahead=0;var yt=ot.block_start+Nt;if((ot.strstart===0||ot.strstart>=yt)&&(ot.lookahead=ot.strstart-yt,ot.strstart=yt,Jt(ot,!1),ot.strm.avail_out===0)||ot.strstart-ot.block_start>=ot.w_size-$&&(Jt(ot,!1),ot.strm.avail_out===0))return 1}return ot.insert=0,It===4?(Jt(ot,!0),ot.strm.avail_out===0?3:4):(ot.strstart>ot.block_start&&(Jt(ot,!1),ot.strm.avail_out),1)}),new Ve(4,4,8,4,Zt),new Ve(4,5,16,8,Zt),new Ve(4,6,32,32,Zt),new Ve(4,4,16,16,Yt),new Ve(8,16,32,32,Yt),new Ve(8,16,128,128,Yt),new Ve(8,32,128,256,Yt),new Ve(32,128,258,1024,Yt),new Ve(32,258,258,4096,Yt)],l.deflateInit=function(ot,It){return Bt(ot,It,Y,15,8,0)},l.deflateInit2=Bt,l.deflateReset=Qe,l.deflateResetKeep=Ee,l.deflateSetHeader=function(ot,It){return ot&&ot.state?ot.state.wrap!==2?j:(ot.state.gzhead=It,Z):j},l.deflate=function(ot,It){var Nt,yt,re,Wt;if(!ot||!ot.state||It>5||It<0)return ot?vt(ot,j):j;if(yt=ot.state,!ot.output||!ot.input&&ot.avail_in!==0||yt.status===Ct&&It!==4)return vt(ot,ot.avail_out===0?-5:j);if(yt.strm=ot,Nt=yt.last_flush,yt.last_flush=It,yt.status===At)if(yt.wrap===2)ot.adler=0,Ut(yt,31),Ut(yt,139),Ut(yt,8),yt.gzhead?(Ut(yt,(yt.gzhead.text?1:0)+(yt.gzhead.hcrc?2:0)+(yt.gzhead.extra?4:0)+(yt.gzhead.name?8:0)+(yt.gzhead.comment?16:0)),Ut(yt,255&yt.gzhead.time),Ut(yt,yt.gzhead.time>>8&255),Ut(yt,yt.gzhead.time>>16&255),Ut(yt,yt.gzhead.time>>24&255),Ut(yt,yt.level===9?2:yt.strategy>=2||yt.level<2?4:0),Ut(yt,255&yt.gzhead.os),yt.gzhead.extra&&yt.gzhead.extra.length&&(Ut(yt,255&yt.gzhead.extra.length),Ut(yt,yt.gzhead.extra.length>>8&255)),yt.gzhead.hcrc&&(ot.adler=P(ot.adler,yt.pending_buf,yt.pending,0)),yt.gzindex=0,yt.status=69):(Ut(yt,0),Ut(yt,0),Ut(yt,0),Ut(yt,0),Ut(yt,0),Ut(yt,yt.level===9?2:yt.strategy>=2||yt.level<2?4:0),Ut(yt,3),yt.status=ut);else{var Vt=Y+(yt.w_bits-8<<4)<<8;Vt|=(yt.strategy>=2||yt.level<2?0:yt.level<6?1:yt.level===6?2:3)<<6,yt.strstart!==0&&(Vt|=32),Vt+=31-Vt%31,yt.status=ut,Ae(yt,Vt),yt.strstart!==0&&(Ae(yt,ot.adler>>>16),Ae(yt,65535&ot.adler)),ot.adler=1}if(yt.status===69)if(yt.gzhead.extra){for(re=yt.pending;yt.gzindex<(65535&yt.gzhead.extra.length)&&(yt.pending!==yt.pending_buf_size||(yt.gzhead.hcrc&&yt.pending>re&&(ot.adler=P(ot.adler,yt.pending_buf,yt.pending-re,re)),kt(ot),re=yt.pending,yt.pending!==yt.pending_buf_size));)Ut(yt,255&yt.gzhead.extra[yt.gzindex]),yt.gzindex++;yt.gzhead.hcrc&&yt.pending>re&&(ot.adler=P(ot.adler,yt.pending_buf,yt.pending-re,re)),yt.gzindex===yt.gzhead.extra.length&&(yt.gzindex=0,yt.status=73)}else yt.status=73;if(yt.status===73)if(yt.gzhead.name){re=yt.pending;do{if(yt.pending===yt.pending_buf_size&&(yt.gzhead.hcrc&&yt.pending>re&&(ot.adler=P(ot.adler,yt.pending_buf,yt.pending-re,re)),kt(ot),re=yt.pending,yt.pending===yt.pending_buf_size)){Wt=1;break}Wt=yt.gzindex<yt.gzhead.name.length?255&yt.gzhead.name.charCodeAt(yt.gzindex++):0,Ut(yt,Wt)}while(Wt!==0);yt.gzhead.hcrc&&yt.pending>re&&(ot.adler=P(ot.adler,yt.pending_buf,yt.pending-re,re)),Wt===0&&(yt.gzindex=0,yt.status=91)}else yt.status=91;if(yt.status===91)if(yt.gzhead.comment){re=yt.pending;do{if(yt.pending===yt.pending_buf_size&&(yt.gzhead.hcrc&&yt.pending>re&&(ot.adler=P(ot.adler,yt.pending_buf,yt.pending-re,re)),kt(ot),re=yt.pending,yt.pending===yt.pending_buf_size)){Wt=1;break}Wt=yt.gzindex<yt.gzhead.comment.length?255&yt.gzhead.comment.charCodeAt(yt.gzindex++):0,Ut(yt,Wt)}while(Wt!==0);yt.gzhead.hcrc&&yt.pending>re&&(ot.adler=P(ot.adler,yt.pending_buf,yt.pending-re,re)),Wt===0&&(yt.status=_t)}else yt.status=_t;if(yt.status===_t&&(yt.gzhead.hcrc?(yt.pending+2>yt.pending_buf_size&&kt(ot),yt.pending+2<=yt.pending_buf_size&&(Ut(yt,255&ot.adler),Ut(yt,ot.adler>>8&255),ot.adler=0,yt.status=ut)):yt.status=ut),yt.pending!==0){if(kt(ot),ot.avail_out===0)return yt.last_flush=-1,Z}else if(ot.avail_in===0&&xt(It)<=xt(Nt)&&It!==4)return vt(ot,-5);if(yt.status===Ct&&ot.avail_in!==0)return vt(ot,-5);if(ot.avail_in!==0||yt.lookahead!==0||It!==C&&yt.status!==Ct){var Tt=yt.strategy===2?function(qt,Gt){for(var se;;){if(qt.lookahead===0&&($t(qt),qt.lookahead===0)){if(Gt===C)return 1;break}if(qt.match_length=0,se=L._tr_tally(qt,0,qt.window[qt.strstart]),qt.lookahead--,qt.strstart++,se&&(Jt(qt,!1),qt.strm.avail_out===0))return 1}return qt.insert=0,Gt===4?(Jt(qt,!0),qt.strm.avail_out===0?3:4):qt.last_lit&&(Jt(qt,!1),qt.strm.avail_out===0)?1:2}(yt,It):yt.strategy===3?function(qt,Gt){for(var se,te,ge,Me,Ie=qt.window;;){if(qt.lookahead<=ft){if($t(qt),qt.lookahead<=ft&&Gt===C)return 1;if(qt.lookahead===0)break}if(qt.match_length=0,qt.lookahead>=pt&&qt.strstart>0&&(te=Ie[ge=qt.strstart-1])===Ie[++ge]&&te===Ie[++ge]&&te===Ie[++ge]){Me=qt.strstart+ft;do;while(te===Ie[++ge]&&te===Ie[++ge]&&te===Ie[++ge]&&te===Ie[++ge]&&te===Ie[++ge]&&te===Ie[++ge]&&te===Ie[++ge]&&te===Ie[++ge]&&ge<Me);qt.match_length=ft-(Me-ge),qt.match_length>qt.lookahead&&(qt.match_length=qt.lookahead)}if(qt.match_length>=pt?(se=L._tr_tally(qt,1,qt.match_length-pt),qt.lookahead-=qt.match_length,qt.strstart+=qt.match_length,qt.match_length=0):(se=L._tr_tally(qt,0,qt.window[qt.strstart]),qt.lookahead--,qt.strstart++),se&&(Jt(qt,!1),qt.strm.avail_out===0))return 1}return qt.insert=0,Gt===4?(Jt(qt,!0),qt.strm.avail_out===0?3:4):qt.last_lit&&(Jt(qt,!1),qt.strm.avail_out===0)?1:2}(yt,It):o[yt.level].func(yt,It);if(Tt!==3&&Tt!==4||(yt.status=Ct),Tt===1||Tt===3)return ot.avail_out===0&&(yt.last_flush=-1),Z;if(Tt===2&&(It===1?L._tr_align(yt):It!==5&&(L._tr_stored_block(yt,0,0,!1),It===3&&(lt(yt.head),yt.lookahead===0&&(yt.strstart=0,yt.block_start=0,yt.insert=0))),kt(ot),ot.avail_out===0))return yt.last_flush=-1,Z}return It!==4?Z:yt.wrap<=0?1:(yt.wrap===2?(Ut(yt,255&ot.adler),Ut(yt,ot.adler>>8&255),Ut(yt,ot.adler>>16&255),Ut(yt,ot.adler>>24&255),Ut(yt,255&ot.total_in),Ut(yt,ot.total_in>>8&255),Ut(yt,ot.total_in>>16&255),Ut(yt,ot.total_in>>24&255)):(Ae(yt,ot.adler>>>16),Ae(yt,65535&ot.adler)),kt(ot),yt.wrap>0&&(yt.wrap=-yt.wrap),yt.pending!==0?Z:1)},l.deflateEnd=function(ot){var It;return ot&&ot.state?(It=ot.state.status)!==At&&It!==69&&It!==73&&It!==91&&It!==_t&&It!==ut&&It!==Ct?vt(ot,j):(ot.state=null,It===ut?vt(ot,-3):Z):j},l.deflateSetDictionary=function(ot,It){var Nt,yt,re,Wt,Vt,Tt,qt,Gt,se=It.length;if(!ot||!ot.state||(Wt=(Nt=ot.state).wrap)===2||Wt===1&&Nt.status!==At||Nt.lookahead)return j;for(Wt===1&&(ot.adler=Q(ot.adler,It,se,0)),Nt.wrap=0,se>=Nt.w_size&&(Wt===0&&(lt(Nt.head),Nt.strstart=0,Nt.block_start=0,Nt.insert=0),Gt=new T.Buf8(Nt.w_size),T.arraySet(Gt,It,se-Nt.w_size,Nt.w_size,0),It=Gt,se=Nt.w_size),Vt=ot.avail_in,Tt=ot.next_in,qt=ot.input,ot.avail_in=se,ot.next_in=0,ot.input=It,$t(Nt);Nt.lookahead>=pt;){yt=Nt.strstart,re=Nt.lookahead-(pt-1);do Nt.ins_h=(Nt.ins_h<<Nt.hash_shift^Nt.window[yt+pt-1])&Nt.hash_mask,Nt.prev[yt&Nt.w_mask]=Nt.head[Nt.ins_h],Nt.head[Nt.ins_h]=yt,yt++;while(--re);Nt.strstart=yt,Nt.lookahead=pt-1,$t(Nt)}return Nt.strstart+=Nt.lookahead,Nt.block_start=Nt.strstart,Nt.insert=Nt.lookahead,Nt.lookahead=0,Nt.match_length=Nt.prev_length=pt-1,Nt.match_available=0,ot.next_in=Tt,ot.input=qt,ot.avail_in=Vt,Nt.wrap=Wt,Z},l.deflateInfo="pako deflate (from Nodeca project)"},"./node_modules/pako/lib/zlib/gzheader.js":N=>{N.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},"./node_modules/pako/lib/zlib/inffast.js":N=>{N.exports=function(l,d){var o,T,L,Q,P,q,C,Z,j,dt,Y,W,u,O,X,ht,pt,ft,$,At,_t,ut,Ct,vt,xt;o=l.state,T=l.next_in,vt=l.input,L=T+(l.avail_in-5),Q=l.next_out,xt=l.output,P=Q-(d-l.avail_out),q=Q+(l.avail_out-257),C=o.dmax,Z=o.wsize,j=o.whave,dt=o.wnext,Y=o.window,W=o.hold,u=o.bits,O=o.lencode,X=o.distcode,ht=(1<<o.lenbits)-1,pt=(1<<o.distbits)-1;t:do{u<15&&(W+=vt[T++]<<u,u+=8,W+=vt[T++]<<u,u+=8),ft=O[W&ht];e:for(;;){if(W>>>=$=ft>>>24,u-=$,($=ft>>>16&255)==0)xt[Q++]=65535&ft;else{if(!(16&$)){if(!(64&$)){ft=O[(65535&ft)+(W&(1<<$)-1)];continue e}if(32&$){o.mode=12;break t}l.msg="invalid literal/length code",o.mode=30;break t}At=65535&ft,($&=15)&&(u<$&&(W+=vt[T++]<<u,u+=8),At+=W&(1<<$)-1,W>>>=$,u-=$),u<15&&(W+=vt[T++]<<u,u+=8,W+=vt[T++]<<u,u+=8),ft=X[W&pt];i:for(;;){if(W>>>=$=ft>>>24,u-=$,!(16&($=ft>>>16&255))){if(!(64&$)){ft=X[(65535&ft)+(W&(1<<$)-1)];continue i}l.msg="invalid distance code",o.mode=30;break t}if(_t=65535&ft,u<($&=15)&&(W+=vt[T++]<<u,(u+=8)<$&&(W+=vt[T++]<<u,u+=8)),(_t+=W&(1<<$)-1)>C){l.msg="invalid distance too far back",o.mode=30;break t}if(W>>>=$,u-=$,_t>($=Q-P)){if(($=_t-$)>j&&o.sane){l.msg="invalid distance too far back",o.mode=30;break t}if(ut=0,Ct=Y,dt===0){if(ut+=Z-$,$<At){At-=$;do xt[Q++]=Y[ut++];while(--$);ut=Q-_t,Ct=xt}}else if(dt<$){if(ut+=Z+dt-$,($-=dt)<At){At-=$;do xt[Q++]=Y[ut++];while(--$);if(ut=0,dt<At){At-=$=dt;do xt[Q++]=Y[ut++];while(--$);ut=Q-_t,Ct=xt}}}else if(ut+=dt-$,$<At){At-=$;do xt[Q++]=Y[ut++];while(--$);ut=Q-_t,Ct=xt}for(;At>2;)xt[Q++]=Ct[ut++],xt[Q++]=Ct[ut++],xt[Q++]=Ct[ut++],At-=3;At&&(xt[Q++]=Ct[ut++],At>1&&(xt[Q++]=Ct[ut++]))}else{ut=Q-_t;do xt[Q++]=xt[ut++],xt[Q++]=xt[ut++],xt[Q++]=xt[ut++],At-=3;while(At>2);At&&(xt[Q++]=xt[ut++],At>1&&(xt[Q++]=xt[ut++]))}break}}break}}while(T<L&&Q<q);T-=At=u>>3,W&=(1<<(u-=At<<3))-1,l.next_in=T,l.next_out=Q,l.avail_in=T<L?L-T+5:5-(T-L),l.avail_out=Q<q?q-Q+257:257-(Q-q),o.hold=W,o.bits=u}},"./node_modules/pako/lib/zlib/inflate.js":(N,l,d)=>{var o=d("./node_modules/pako/lib/utils/common.js"),T=d("./node_modules/pako/lib/zlib/adler32.js"),L=d("./node_modules/pako/lib/zlib/crc32.js"),Q=d("./node_modules/pako/lib/zlib/inffast.js"),P=d("./node_modules/pako/lib/zlib/inftrees.js"),q=0,C=-2,Z=1,j=12,dt=30,Y=852,W=592;function u(vt){return(vt>>>24&255)+(vt>>>8&65280)+((65280&vt)<<8)+((255&vt)<<24)}function O(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function X(vt){var xt;return vt&&vt.state?(xt=vt.state,vt.total_in=vt.total_out=xt.total=0,vt.msg="",xt.wrap&&(vt.adler=1&xt.wrap),xt.mode=Z,xt.last=0,xt.havedict=0,xt.dmax=32768,xt.head=null,xt.hold=0,xt.bits=0,xt.lencode=xt.lendyn=new o.Buf32(Y),xt.distcode=xt.distdyn=new o.Buf32(W),xt.sane=1,xt.back=-1,q):C}function ht(vt){var xt;return vt&&vt.state?((xt=vt.state).wsize=0,xt.whave=0,xt.wnext=0,X(vt)):C}function pt(vt,xt){var lt,kt;return vt&&vt.state?(kt=vt.state,xt<0?(lt=0,xt=-xt):(lt=1+(xt>>4),xt<48&&(xt&=15)),xt&&(xt<8||xt>15)?C:(kt.window!==null&&kt.wbits!==xt&&(kt.window=null),kt.wrap=lt,kt.wbits=xt,ht(vt))):C}function ft(vt,xt){var lt,kt;return vt?(kt=new O,vt.state=kt,kt.window=null,(lt=pt(vt,xt))!==q&&(vt.state=null),lt):C}var $,At,_t=!0;function ut(vt){if(_t){var xt;for($=new o.Buf32(512),At=new o.Buf32(32),xt=0;xt<144;)vt.lens[xt++]=8;for(;xt<256;)vt.lens[xt++]=9;for(;xt<280;)vt.lens[xt++]=7;for(;xt<288;)vt.lens[xt++]=8;for(P(1,vt.lens,0,288,$,0,vt.work,{bits:9}),xt=0;xt<32;)vt.lens[xt++]=5;P(2,vt.lens,0,32,At,0,vt.work,{bits:5}),_t=!1}vt.lencode=$,vt.lenbits=9,vt.distcode=At,vt.distbits=5}function Ct(vt,xt,lt,kt){var Jt,Ut=vt.state;return Ut.window===null&&(Ut.wsize=1<<Ut.wbits,Ut.wnext=0,Ut.whave=0,Ut.window=new o.Buf8(Ut.wsize)),kt>=Ut.wsize?(o.arraySet(Ut.window,xt,lt-Ut.wsize,Ut.wsize,0),Ut.wnext=0,Ut.whave=Ut.wsize):((Jt=Ut.wsize-Ut.wnext)>kt&&(Jt=kt),o.arraySet(Ut.window,xt,lt-kt,Jt,Ut.wnext),(kt-=Jt)?(o.arraySet(Ut.window,xt,lt-kt,kt,0),Ut.wnext=kt,Ut.whave=Ut.wsize):(Ut.wnext+=Jt,Ut.wnext===Ut.wsize&&(Ut.wnext=0),Ut.whave<Ut.wsize&&(Ut.whave+=Jt))),0}l.inflateReset=ht,l.inflateReset2=pt,l.inflateResetKeep=X,l.inflateInit=function(vt){return ft(vt,15)},l.inflateInit2=ft,l.inflate=function(vt,xt){var lt,kt,Jt,Ut,Ae,Ot,$t,Zt,Yt,Ve,xe,Ee,Qe,Bt,ot,It,Nt,yt,re,Wt,Vt,Tt,qt,Gt,se=0,te=new o.Buf8(4),ge=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!vt||!vt.state||!vt.output||!vt.input&&vt.avail_in!==0)return C;(lt=vt.state).mode===j&&(lt.mode=13),Ae=vt.next_out,Jt=vt.output,$t=vt.avail_out,Ut=vt.next_in,kt=vt.input,Ot=vt.avail_in,Zt=lt.hold,Yt=lt.bits,Ve=Ot,xe=$t,Tt=q;t:for(;;)switch(lt.mode){case Z:if(lt.wrap===0){lt.mode=13;break}for(;Yt<16;){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}if(2&lt.wrap&&Zt===35615){lt.check=0,te[0]=255&Zt,te[1]=Zt>>>8&255,lt.check=L(lt.check,te,2,0),Zt=0,Yt=0,lt.mode=2;break}if(lt.flags=0,lt.head&&(lt.head.done=!1),!(1&lt.wrap)||(((255&Zt)<<8)+(Zt>>8))%31){vt.msg="incorrect header check",lt.mode=dt;break}if((15&Zt)!=8){vt.msg="unknown compression method",lt.mode=dt;break}if(Yt-=4,Vt=8+(15&(Zt>>>=4)),lt.wbits===0)lt.wbits=Vt;else if(Vt>lt.wbits){vt.msg="invalid window size",lt.mode=dt;break}lt.dmax=1<<Vt,vt.adler=lt.check=1,lt.mode=512&Zt?10:j,Zt=0,Yt=0;break;case 2:for(;Yt<16;){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}if(lt.flags=Zt,(255&lt.flags)!=8){vt.msg="unknown compression method",lt.mode=dt;break}if(57344&lt.flags){vt.msg="unknown header flags set",lt.mode=dt;break}lt.head&&(lt.head.text=Zt>>8&1),512&lt.flags&&(te[0]=255&Zt,te[1]=Zt>>>8&255,lt.check=L(lt.check,te,2,0)),Zt=0,Yt=0,lt.mode=3;case 3:for(;Yt<32;){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}lt.head&&(lt.head.time=Zt),512&lt.flags&&(te[0]=255&Zt,te[1]=Zt>>>8&255,te[2]=Zt>>>16&255,te[3]=Zt>>>24&255,lt.check=L(lt.check,te,4,0)),Zt=0,Yt=0,lt.mode=4;case 4:for(;Yt<16;){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}lt.head&&(lt.head.xflags=255&Zt,lt.head.os=Zt>>8),512&lt.flags&&(te[0]=255&Zt,te[1]=Zt>>>8&255,lt.check=L(lt.check,te,2,0)),Zt=0,Yt=0,lt.mode=5;case 5:if(1024&lt.flags){for(;Yt<16;){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}lt.length=Zt,lt.head&&(lt.head.extra_len=Zt),512&lt.flags&&(te[0]=255&Zt,te[1]=Zt>>>8&255,lt.check=L(lt.check,te,2,0)),Zt=0,Yt=0}else lt.head&&(lt.head.extra=null);lt.mode=6;case 6:if(1024&lt.flags&&((Ee=lt.length)>Ot&&(Ee=Ot),Ee&&(lt.head&&(Vt=lt.head.extra_len-lt.length,lt.head.extra||(lt.head.extra=new Array(lt.head.extra_len)),o.arraySet(lt.head.extra,kt,Ut,Ee,Vt)),512&lt.flags&&(lt.check=L(lt.check,kt,Ee,Ut)),Ot-=Ee,Ut+=Ee,lt.length-=Ee),lt.length))break t;lt.length=0,lt.mode=7;case 7:if(2048&lt.flags){if(Ot===0)break t;Ee=0;do Vt=kt[Ut+Ee++],lt.head&&Vt&&lt.length<65536&&(lt.head.name+=String.fromCharCode(Vt));while(Vt&&Ee<Ot);if(512&lt.flags&&(lt.check=L(lt.check,kt,Ee,Ut)),Ot-=Ee,Ut+=Ee,Vt)break t}else lt.head&&(lt.head.name=null);lt.length=0,lt.mode=8;case 8:if(4096&lt.flags){if(Ot===0)break t;Ee=0;do Vt=kt[Ut+Ee++],lt.head&&Vt&&lt.length<65536&&(lt.head.comment+=String.fromCharCode(Vt));while(Vt&&Ee<Ot);if(512&lt.flags&&(lt.check=L(lt.check,kt,Ee,Ut)),Ot-=Ee,Ut+=Ee,Vt)break t}else lt.head&&(lt.head.comment=null);lt.mode=9;case 9:if(512&lt.flags){for(;Yt<16;){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}if(Zt!==(65535&lt.check)){vt.msg="header crc mismatch",lt.mode=dt;break}Zt=0,Yt=0}lt.head&&(lt.head.hcrc=lt.flags>>9&1,lt.head.done=!0),vt.adler=lt.check=0,lt.mode=j;break;case 10:for(;Yt<32;){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}vt.adler=lt.check=u(Zt),Zt=0,Yt=0,lt.mode=11;case 11:if(lt.havedict===0)return vt.next_out=Ae,vt.avail_out=$t,vt.next_in=Ut,vt.avail_in=Ot,lt.hold=Zt,lt.bits=Yt,2;vt.adler=lt.check=1,lt.mode=j;case j:if(xt===5||xt===6)break t;case 13:if(lt.last){Zt>>>=7&Yt,Yt-=7&Yt,lt.mode=27;break}for(;Yt<3;){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}switch(lt.last=1&Zt,Yt-=1,3&(Zt>>>=1)){case 0:lt.mode=14;break;case 1:if(ut(lt),lt.mode=20,xt===6){Zt>>>=2,Yt-=2;break t}break;case 2:lt.mode=17;break;case 3:vt.msg="invalid block type",lt.mode=dt}Zt>>>=2,Yt-=2;break;case 14:for(Zt>>>=7&Yt,Yt-=7&Yt;Yt<32;){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}if((65535&Zt)!=(Zt>>>16^65535)){vt.msg="invalid stored block lengths",lt.mode=dt;break}if(lt.length=65535&Zt,Zt=0,Yt=0,lt.mode=15,xt===6)break t;case 15:lt.mode=16;case 16:if(Ee=lt.length){if(Ee>Ot&&(Ee=Ot),Ee>$t&&(Ee=$t),Ee===0)break t;o.arraySet(Jt,kt,Ut,Ee,Ae),Ot-=Ee,Ut+=Ee,$t-=Ee,Ae+=Ee,lt.length-=Ee;break}lt.mode=j;break;case 17:for(;Yt<14;){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}if(lt.nlen=257+(31&Zt),Zt>>>=5,Yt-=5,lt.ndist=1+(31&Zt),Zt>>>=5,Yt-=5,lt.ncode=4+(15&Zt),Zt>>>=4,Yt-=4,lt.nlen>286||lt.ndist>30){vt.msg="too many length or distance symbols",lt.mode=dt;break}lt.have=0,lt.mode=18;case 18:for(;lt.have<lt.ncode;){for(;Yt<3;){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}lt.lens[ge[lt.have++]]=7&Zt,Zt>>>=3,Yt-=3}for(;lt.have<19;)lt.lens[ge[lt.have++]]=0;if(lt.lencode=lt.lendyn,lt.lenbits=7,qt={bits:lt.lenbits},Tt=P(0,lt.lens,0,19,lt.lencode,0,lt.work,qt),lt.lenbits=qt.bits,Tt){vt.msg="invalid code lengths set",lt.mode=dt;break}lt.have=0,lt.mode=19;case 19:for(;lt.have<lt.nlen+lt.ndist;){for(;It=(se=lt.lencode[Zt&(1<<lt.lenbits)-1])>>>16&255,Nt=65535&se,!((ot=se>>>24)<=Yt);){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}if(Nt<16)Zt>>>=ot,Yt-=ot,lt.lens[lt.have++]=Nt;else{if(Nt===16){for(Gt=ot+2;Yt<Gt;){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}if(Zt>>>=ot,Yt-=ot,lt.have===0){vt.msg="invalid bit length repeat",lt.mode=dt;break}Vt=lt.lens[lt.have-1],Ee=3+(3&Zt),Zt>>>=2,Yt-=2}else if(Nt===17){for(Gt=ot+3;Yt<Gt;){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}Yt-=ot,Vt=0,Ee=3+(7&(Zt>>>=ot)),Zt>>>=3,Yt-=3}else{for(Gt=ot+7;Yt<Gt;){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}Yt-=ot,Vt=0,Ee=11+(127&(Zt>>>=ot)),Zt>>>=7,Yt-=7}if(lt.have+Ee>lt.nlen+lt.ndist){vt.msg="invalid bit length repeat",lt.mode=dt;break}for(;Ee--;)lt.lens[lt.have++]=Vt}}if(lt.mode===dt)break;if(lt.lens[256]===0){vt.msg="invalid code -- missing end-of-block",lt.mode=dt;break}if(lt.lenbits=9,qt={bits:lt.lenbits},Tt=P(1,lt.lens,0,lt.nlen,lt.lencode,0,lt.work,qt),lt.lenbits=qt.bits,Tt){vt.msg="invalid literal/lengths set",lt.mode=dt;break}if(lt.distbits=6,lt.distcode=lt.distdyn,qt={bits:lt.distbits},Tt=P(2,lt.lens,lt.nlen,lt.ndist,lt.distcode,0,lt.work,qt),lt.distbits=qt.bits,Tt){vt.msg="invalid distances set",lt.mode=dt;break}if(lt.mode=20,xt===6)break t;case 20:lt.mode=21;case 21:if(Ot>=6&&$t>=258){vt.next_out=Ae,vt.avail_out=$t,vt.next_in=Ut,vt.avail_in=Ot,lt.hold=Zt,lt.bits=Yt,Q(vt,xe),Ae=vt.next_out,Jt=vt.output,$t=vt.avail_out,Ut=vt.next_in,kt=vt.input,Ot=vt.avail_in,Zt=lt.hold,Yt=lt.bits,lt.mode===j&&(lt.back=-1);break}for(lt.back=0;It=(se=lt.lencode[Zt&(1<<lt.lenbits)-1])>>>16&255,Nt=65535&se,!((ot=se>>>24)<=Yt);){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}if(It&&!(240&It)){for(yt=ot,re=It,Wt=Nt;It=(se=lt.lencode[Wt+((Zt&(1<<yt+re)-1)>>yt)])>>>16&255,Nt=65535&se,!(yt+(ot=se>>>24)<=Yt);){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}Zt>>>=yt,Yt-=yt,lt.back+=yt}if(Zt>>>=ot,Yt-=ot,lt.back+=ot,lt.length=Nt,It===0){lt.mode=26;break}if(32&It){lt.back=-1,lt.mode=j;break}if(64&It){vt.msg="invalid literal/length code",lt.mode=dt;break}lt.extra=15&It,lt.mode=22;case 22:if(lt.extra){for(Gt=lt.extra;Yt<Gt;){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}lt.length+=Zt&(1<<lt.extra)-1,Zt>>>=lt.extra,Yt-=lt.extra,lt.back+=lt.extra}lt.was=lt.length,lt.mode=23;case 23:for(;It=(se=lt.distcode[Zt&(1<<lt.distbits)-1])>>>16&255,Nt=65535&se,!((ot=se>>>24)<=Yt);){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}if(!(240&It)){for(yt=ot,re=It,Wt=Nt;It=(se=lt.distcode[Wt+((Zt&(1<<yt+re)-1)>>yt)])>>>16&255,Nt=65535&se,!(yt+(ot=se>>>24)<=Yt);){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}Zt>>>=yt,Yt-=yt,lt.back+=yt}if(Zt>>>=ot,Yt-=ot,lt.back+=ot,64&It){vt.msg="invalid distance code",lt.mode=dt;break}lt.offset=Nt,lt.extra=15&It,lt.mode=24;case 24:if(lt.extra){for(Gt=lt.extra;Yt<Gt;){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}lt.offset+=Zt&(1<<lt.extra)-1,Zt>>>=lt.extra,Yt-=lt.extra,lt.back+=lt.extra}if(lt.offset>lt.dmax){vt.msg="invalid distance too far back",lt.mode=dt;break}lt.mode=25;case 25:if($t===0)break t;if(Ee=xe-$t,lt.offset>Ee){if((Ee=lt.offset-Ee)>lt.whave&&lt.sane){vt.msg="invalid distance too far back",lt.mode=dt;break}Ee>lt.wnext?(Ee-=lt.wnext,Qe=lt.wsize-Ee):Qe=lt.wnext-Ee,Ee>lt.length&&(Ee=lt.length),Bt=lt.window}else Bt=Jt,Qe=Ae-lt.offset,Ee=lt.length;Ee>$t&&(Ee=$t),$t-=Ee,lt.length-=Ee;do Jt[Ae++]=Bt[Qe++];while(--Ee);lt.length===0&&(lt.mode=21);break;case 26:if($t===0)break t;Jt[Ae++]=lt.length,$t--,lt.mode=21;break;case 27:if(lt.wrap){for(;Yt<32;){if(Ot===0)break t;Ot--,Zt|=kt[Ut++]<<Yt,Yt+=8}if(xe-=$t,vt.total_out+=xe,lt.total+=xe,xe&&(vt.adler=lt.check=lt.flags?L(lt.check,Jt,xe,Ae-xe):T(lt.check,Jt,xe,Ae-xe)),xe=$t,(lt.flags?Zt:u(Zt))!==lt.check){vt.msg="incorrect data check",lt.mode=dt;break}Zt=0,Yt=0}lt.mode=28;case 28:if(lt.wrap&&lt.flags){for(;Yt<32;){if(Ot===0)break t;Ot--,Zt+=kt[Ut++]<<Yt,Yt+=8}if(Zt!==(4294967295&lt.total)){vt.msg="incorrect length check",lt.mode=dt;break}Zt=0,Yt=0}lt.mode=29;case 29:Tt=1;break t;case dt:Tt=-3;break t;case 31:return-4;default:return C}return vt.next_out=Ae,vt.avail_out=$t,vt.next_in=Ut,vt.avail_in=Ot,lt.hold=Zt,lt.bits=Yt,(lt.wsize||xe!==vt.avail_out&&lt.mode<dt&&(lt.mode<27||xt!==4))&&Ct(vt,vt.output,vt.next_out,xe-vt.avail_out)?(lt.mode=31,-4):(Ve-=vt.avail_in,xe-=vt.avail_out,vt.total_in+=Ve,vt.total_out+=xe,lt.total+=xe,lt.wrap&&xe&&(vt.adler=lt.check=lt.flags?L(lt.check,Jt,xe,vt.next_out-xe):T(lt.check,Jt,xe,vt.next_out-xe)),vt.data_type=lt.bits+(lt.last?64:0)+(lt.mode===j?128:0)+(lt.mode===20||lt.mode===15?256:0),(Ve===0&&xe===0||xt===4)&&Tt===q&&(Tt=-5),Tt)},l.inflateEnd=function(vt){if(!vt||!vt.state)return C;var xt=vt.state;return xt.window&&(xt.window=null),vt.state=null,q},l.inflateGetHeader=function(vt,xt){var lt;return vt&&vt.state&&2&(lt=vt.state).wrap?(lt.head=xt,xt.done=!1,q):C},l.inflateSetDictionary=function(vt,xt){var lt,kt=xt.length;return vt&&vt.state?(lt=vt.state).wrap!==0&&lt.mode!==11?C:lt.mode===11&&T(1,xt,kt,0)!==lt.check?-3:Ct(vt,xt,kt,kt)?(lt.mode=31,-4):(lt.havedict=1,q):C},l.inflateInfo="pako inflate (from Nodeca project)"},"./node_modules/pako/lib/zlib/inftrees.js":(N,l,d)=>{var o=d("./node_modules/pako/lib/utils/common.js"),T=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],L=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],P=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];N.exports=function(q,C,Z,j,dt,Y,W,u){var O,X,ht,pt,ft,$,At,_t,ut,Ct=u.bits,vt=0,xt=0,lt=0,kt=0,Jt=0,Ut=0,Ae=0,Ot=0,$t=0,Zt=0,Yt=null,Ve=0,xe=new o.Buf16(16),Ee=new o.Buf16(16),Qe=null,Bt=0;for(vt=0;vt<=15;vt++)xe[vt]=0;for(xt=0;xt<j;xt++)xe[C[Z+xt]]++;for(Jt=Ct,kt=15;kt>=1&&xe[kt]===0;kt--);if(Jt>kt&&(Jt=kt),kt===0)return dt[Y++]=20971520,dt[Y++]=20971520,u.bits=1,0;for(lt=1;lt<kt&&xe[lt]===0;lt++);for(Jt<lt&&(Jt=lt),Ot=1,vt=1;vt<=15;vt++)if(Ot<<=1,(Ot-=xe[vt])<0)return-1;if(Ot>0&&(q===0||kt!==1))return-1;for(Ee[1]=0,vt=1;vt<15;vt++)Ee[vt+1]=Ee[vt]+xe[vt];for(xt=0;xt<j;xt++)C[Z+xt]!==0&&(W[Ee[C[Z+xt]]++]=xt);if(q===0?(Yt=Qe=W,$=19):q===1?(Yt=T,Ve-=257,Qe=L,Bt-=257,$=256):(Yt=Q,Qe=P,$=-1),Zt=0,xt=0,vt=lt,ft=Y,Ut=Jt,Ae=0,ht=-1,pt=($t=1<<Jt)-1,q===1&&$t>852||q===2&&$t>592)return 1;for(;;){At=vt-Ae,W[xt]<$?(_t=0,ut=W[xt]):W[xt]>$?(_t=Qe[Bt+W[xt]],ut=Yt[Ve+W[xt]]):(_t=96,ut=0),O=1<<vt-Ae,lt=X=1<<Ut;do dt[ft+(Zt>>Ae)+(X-=O)]=At<<24|_t<<16|ut|0;while(X!==0);for(O=1<<vt-1;Zt&O;)O>>=1;if(O!==0?(Zt&=O-1,Zt+=O):Zt=0,xt++,--xe[vt]==0){if(vt===kt)break;vt=C[Z+W[xt]]}if(vt>Jt&&(Zt&pt)!==ht){for(Ae===0&&(Ae=Jt),ft+=lt,Ot=1<<(Ut=vt-Ae);Ut+Ae<kt&&!((Ot-=xe[Ut+Ae])<=0);)Ut++,Ot<<=1;if($t+=1<<Ut,q===1&&$t>852||q===2&&$t>592)return 1;dt[ht=Zt&pt]=Jt<<24|Ut<<16|ft-Y|0}}return Zt!==0&&(dt[ft+Zt]=vt-Ae<<24|4194304|0),u.bits=Jt,0}},"./node_modules/pako/lib/zlib/messages.js":N=>{N.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},"./node_modules/pako/lib/zlib/trees.js":(N,l,d)=>{var o=d("./node_modules/pako/lib/utils/common.js");function T(Bt){for(var ot=Bt.length;--ot>=0;)Bt[ot]=0}var L=256,Q=286,P=30,q=15,C=16,Z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],dt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=new Array(576);T(W);var u=new Array(60);T(u);var O=new Array(512);T(O);var X=new Array(256);T(X);var ht=new Array(29);T(ht);var pt,ft,$,At=new Array(P);function _t(Bt,ot,It,Nt,yt){this.static_tree=Bt,this.extra_bits=ot,this.extra_base=It,this.elems=Nt,this.max_length=yt,this.has_stree=Bt&&Bt.length}function ut(Bt,ot){this.dyn_tree=Bt,this.max_code=0,this.stat_desc=ot}function Ct(Bt){return Bt<256?O[Bt]:O[256+(Bt>>>7)]}function vt(Bt,ot){Bt.pending_buf[Bt.pending++]=255&ot,Bt.pending_buf[Bt.pending++]=ot>>>8&255}function xt(Bt,ot,It){Bt.bi_valid>C-It?(Bt.bi_buf|=ot<<Bt.bi_valid&65535,vt(Bt,Bt.bi_buf),Bt.bi_buf=ot>>C-Bt.bi_valid,Bt.bi_valid+=It-C):(Bt.bi_buf|=ot<<Bt.bi_valid&65535,Bt.bi_valid+=It)}function lt(Bt,ot,It){xt(Bt,It[2*ot],It[2*ot+1])}function kt(Bt,ot){var It=0;do It|=1&Bt,Bt>>>=1,It<<=1;while(--ot>0);return It>>>1}function Jt(Bt,ot,It){var Nt,yt,re=new Array(q+1),Wt=0;for(Nt=1;Nt<=q;Nt++)re[Nt]=Wt=Wt+It[Nt-1]<<1;for(yt=0;yt<=ot;yt++){var Vt=Bt[2*yt+1];Vt!==0&&(Bt[2*yt]=kt(re[Vt]++,Vt))}}function Ut(Bt){var ot;for(ot=0;ot<Q;ot++)Bt.dyn_ltree[2*ot]=0;for(ot=0;ot<P;ot++)Bt.dyn_dtree[2*ot]=0;for(ot=0;ot<19;ot++)Bt.bl_tree[2*ot]=0;Bt.dyn_ltree[512]=1,Bt.opt_len=Bt.static_len=0,Bt.last_lit=Bt.matches=0}function Ae(Bt){Bt.bi_valid>8?vt(Bt,Bt.bi_buf):Bt.bi_valid>0&&(Bt.pending_buf[Bt.pending++]=Bt.bi_buf),Bt.bi_buf=0,Bt.bi_valid=0}function Ot(Bt,ot,It,Nt){var yt=2*ot,re=2*It;return Bt[yt]<Bt[re]||Bt[yt]===Bt[re]&&Nt[ot]<=Nt[It]}function $t(Bt,ot,It){for(var Nt=Bt.heap[It],yt=It<<1;yt<=Bt.heap_len&&(yt<Bt.heap_len&&Ot(ot,Bt.heap[yt+1],Bt.heap[yt],Bt.depth)&&yt++,!Ot(ot,Nt,Bt.heap[yt],Bt.depth));)Bt.heap[It]=Bt.heap[yt],It=yt,yt<<=1;Bt.heap[It]=Nt}function Zt(Bt,ot,It){var Nt,yt,re,Wt,Vt=0;if(Bt.last_lit!==0)do Nt=Bt.pending_buf[Bt.d_buf+2*Vt]<<8|Bt.pending_buf[Bt.d_buf+2*Vt+1],yt=Bt.pending_buf[Bt.l_buf+Vt],Vt++,Nt===0?lt(Bt,yt,ot):(lt(Bt,(re=X[yt])+L+1,ot),(Wt=Z[re])!==0&&xt(Bt,yt-=ht[re],Wt),lt(Bt,re=Ct(--Nt),It),(Wt=j[re])!==0&&xt(Bt,Nt-=At[re],Wt));while(Vt<Bt.last_lit);lt(Bt,256,ot)}function Yt(Bt,ot){var It,Nt,yt,re=ot.dyn_tree,Wt=ot.stat_desc.static_tree,Vt=ot.stat_desc.has_stree,Tt=ot.stat_desc.elems,qt=-1;for(Bt.heap_len=0,Bt.heap_max=573,It=0;It<Tt;It++)re[2*It]!==0?(Bt.heap[++Bt.heap_len]=qt=It,Bt.depth[It]=0):re[2*It+1]=0;for(;Bt.heap_len<2;)re[2*(yt=Bt.heap[++Bt.heap_len]=qt<2?++qt:0)]=1,Bt.depth[yt]=0,Bt.opt_len--,Vt&&(Bt.static_len-=Wt[2*yt+1]);for(ot.max_code=qt,It=Bt.heap_len>>1;It>=1;It--)$t(Bt,re,It);yt=Tt;do It=Bt.heap[1],Bt.heap[1]=Bt.heap[Bt.heap_len--],$t(Bt,re,1),Nt=Bt.heap[1],Bt.heap[--Bt.heap_max]=It,Bt.heap[--Bt.heap_max]=Nt,re[2*yt]=re[2*It]+re[2*Nt],Bt.depth[yt]=(Bt.depth[It]>=Bt.depth[Nt]?Bt.depth[It]:Bt.depth[Nt])+1,re[2*It+1]=re[2*Nt+1]=yt,Bt.heap[1]=yt++,$t(Bt,re,1);while(Bt.heap_len>=2);Bt.heap[--Bt.heap_max]=Bt.heap[1],function(Gt,se){var te,ge,Me,Ie,gi,Ei,li=se.dyn_tree,yi=se.max_code,ci=se.stat_desc.static_tree,De=se.stat_desc.has_stree,Ke=se.stat_desc.extra_bits,pi=se.stat_desc.extra_base,$e=se.stat_desc.max_length,ii=0;for(Ie=0;Ie<=q;Ie++)Gt.bl_count[Ie]=0;for(li[2*Gt.heap[Gt.heap_max]+1]=0,te=Gt.heap_max+1;te<573;te++)(Ie=li[2*li[2*(ge=Gt.heap[te])+1]+1]+1)>$e&&(Ie=$e,ii++),li[2*ge+1]=Ie,ge>yi||(Gt.bl_count[Ie]++,gi=0,ge>=pi&&(gi=Ke[ge-pi]),Ei=li[2*ge],Gt.opt_len+=Ei*(Ie+gi),De&&(Gt.static_len+=Ei*(ci[2*ge+1]+gi)));if(ii!==0){do{for(Ie=$e-1;Gt.bl_count[Ie]===0;)Ie--;Gt.bl_count[Ie]--,Gt.bl_count[Ie+1]+=2,Gt.bl_count[$e]--,ii-=2}while(ii>0);for(Ie=$e;Ie!==0;Ie--)for(ge=Gt.bl_count[Ie];ge!==0;)(Me=Gt.heap[--te])>yi||(li[2*Me+1]!==Ie&&(Gt.opt_len+=(Ie-li[2*Me+1])*li[2*Me],li[2*Me+1]=Ie),ge--)}}(Bt,ot),Jt(re,qt,Bt.bl_count)}function Ve(Bt,ot,It){var Nt,yt,re=-1,Wt=ot[1],Vt=0,Tt=7,qt=4;for(Wt===0&&(Tt=138,qt=3),ot[2*(It+1)+1]=65535,Nt=0;Nt<=It;Nt++)yt=Wt,Wt=ot[2*(Nt+1)+1],++Vt<Tt&&yt===Wt||(Vt<qt?Bt.bl_tree[2*yt]+=Vt:yt!==0?(yt!==re&&Bt.bl_tree[2*yt]++,Bt.bl_tree[32]++):Vt<=10?Bt.bl_tree[34]++:Bt.bl_tree[36]++,Vt=0,re=yt,Wt===0?(Tt=138,qt=3):yt===Wt?(Tt=6,qt=3):(Tt=7,qt=4))}function xe(Bt,ot,It){var Nt,yt,re=-1,Wt=ot[1],Vt=0,Tt=7,qt=4;for(Wt===0&&(Tt=138,qt=3),Nt=0;Nt<=It;Nt++)if(yt=Wt,Wt=ot[2*(Nt+1)+1],!(++Vt<Tt&&yt===Wt)){if(Vt<qt)do lt(Bt,yt,Bt.bl_tree);while(--Vt!=0);else yt!==0?(yt!==re&&(lt(Bt,yt,Bt.bl_tree),Vt--),lt(Bt,16,Bt.bl_tree),xt(Bt,Vt-3,2)):Vt<=10?(lt(Bt,17,Bt.bl_tree),xt(Bt,Vt-3,3)):(lt(Bt,18,Bt.bl_tree),xt(Bt,Vt-11,7));Vt=0,re=yt,Wt===0?(Tt=138,qt=3):yt===Wt?(Tt=6,qt=3):(Tt=7,qt=4)}}T(At);var Ee=!1;function Qe(Bt,ot,It,Nt){xt(Bt,0+(Nt?1:0),3),function(yt,re,Wt,Vt){Ae(yt),vt(yt,Wt),vt(yt,~Wt),o.arraySet(yt.pending_buf,yt.window,re,Wt,yt.pending),yt.pending+=Wt}(Bt,ot,It)}l._tr_init=function(Bt){Ee||(function(){var ot,It,Nt,yt,re,Wt=new Array(q+1);for(Nt=0,yt=0;yt<28;yt++)for(ht[yt]=Nt,ot=0;ot<1<<Z[yt];ot++)X[Nt++]=yt;for(X[Nt-1]=yt,re=0,yt=0;yt<16;yt++)for(At[yt]=re,ot=0;ot<1<<j[yt];ot++)O[re++]=yt;for(re>>=7;yt<P;yt++)for(At[yt]=re<<7,ot=0;ot<1<<j[yt]-7;ot++)O[256+re++]=yt;for(It=0;It<=q;It++)Wt[It]=0;for(ot=0;ot<=143;)W[2*ot+1]=8,ot++,Wt[8]++;for(;ot<=255;)W[2*ot+1]=9,ot++,Wt[9]++;for(;ot<=279;)W[2*ot+1]=7,ot++,Wt[7]++;for(;ot<=287;)W[2*ot+1]=8,ot++,Wt[8]++;for(Jt(W,287,Wt),ot=0;ot<P;ot++)u[2*ot+1]=5,u[2*ot]=kt(ot,5);pt=new _t(W,Z,257,Q,q),ft=new _t(u,j,0,P,q),$=new _t(new Array(0),dt,0,19,7)}(),Ee=!0),Bt.l_desc=new ut(Bt.dyn_ltree,pt),Bt.d_desc=new ut(Bt.dyn_dtree,ft),Bt.bl_desc=new ut(Bt.bl_tree,$),Bt.bi_buf=0,Bt.bi_valid=0,Ut(Bt)},l._tr_stored_block=Qe,l._tr_flush_block=function(Bt,ot,It,Nt){var yt,re,Wt=0;Bt.level>0?(Bt.strm.data_type===2&&(Bt.strm.data_type=function(Vt){var Tt,qt=4093624447;for(Tt=0;Tt<=31;Tt++,qt>>>=1)if(1&qt&&Vt.dyn_ltree[2*Tt]!==0)return 0;if(Vt.dyn_ltree[18]!==0||Vt.dyn_ltree[20]!==0||Vt.dyn_ltree[26]!==0)return 1;for(Tt=32;Tt<L;Tt++)if(Vt.dyn_ltree[2*Tt]!==0)return 1;return 0}(Bt)),Yt(Bt,Bt.l_desc),Yt(Bt,Bt.d_desc),Wt=function(Vt){var Tt;for(Ve(Vt,Vt.dyn_ltree,Vt.l_desc.max_code),Ve(Vt,Vt.dyn_dtree,Vt.d_desc.max_code),Yt(Vt,Vt.bl_desc),Tt=18;Tt>=3&&Vt.bl_tree[2*Y[Tt]+1]===0;Tt--);return Vt.opt_len+=3*(Tt+1)+5+5+4,Tt}(Bt),yt=Bt.opt_len+3+7>>>3,(re=Bt.static_len+3+7>>>3)<=yt&&(yt=re)):yt=re=It+5,It+4<=yt&&ot!==-1?Qe(Bt,ot,It,Nt):Bt.strategy===4||re===yt?(xt(Bt,2+(Nt?1:0),3),Zt(Bt,W,u)):(xt(Bt,4+(Nt?1:0),3),function(Vt,Tt,qt,Gt){var se;for(xt(Vt,Tt-257,5),xt(Vt,qt-1,5),xt(Vt,Gt-4,4),se=0;se<Gt;se++)xt(Vt,Vt.bl_tree[2*Y[se]+1],3);xe(Vt,Vt.dyn_ltree,Tt-1),xe(Vt,Vt.dyn_dtree,qt-1)}(Bt,Bt.l_desc.max_code+1,Bt.d_desc.max_code+1,Wt+1),Zt(Bt,Bt.dyn_ltree,Bt.dyn_dtree)),Ut(Bt),Nt&&Ae(Bt)},l._tr_tally=function(Bt,ot,It){return Bt.pending_buf[Bt.d_buf+2*Bt.last_lit]=ot>>>8&255,Bt.pending_buf[Bt.d_buf+2*Bt.last_lit+1]=255&ot,Bt.pending_buf[Bt.l_buf+Bt.last_lit]=255&It,Bt.last_lit++,ot===0?Bt.dyn_ltree[2*It]++:(Bt.matches++,ot--,Bt.dyn_ltree[2*(X[It]+L+1)]++,Bt.dyn_dtree[2*Ct(ot)]++),Bt.last_lit===Bt.lit_bufsize-1},l._tr_align=function(Bt){xt(Bt,2,3),lt(Bt,256,W),function(ot){ot.bi_valid===16?(vt(ot,ot.bi_buf),ot.bi_buf=0,ot.bi_valid=0):ot.bi_valid>=8&&(ot.pending_buf[ot.pending++]=255&ot.bi_buf,ot.bi_buf>>=8,ot.bi_valid-=8)}(Bt)}},"./node_modules/pako/lib/zlib/zstream.js":N=>{N.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},"./node_modules/strnum/strnum.js":N=>{const l=/^[-+]?0x[a-fA-F0-9]+$/,d=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const o={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};N.exports=function(T,L={}){if(L=Object.assign({},o,L),!T||typeof T!="string")return T;let Q=T.trim();if(L.skipLike!==void 0&&L.skipLike.test(Q))return T;if(L.hex&&l.test(Q))return Number.parseInt(Q,16);{const q=d.exec(Q);if(q){const C=q[1],Z=q[2];let j=((P=q[3])&&P.indexOf(".")!==-1&&((P=P.replace(/0+$/,""))==="."?P="0":P[0]==="."?P="0"+P:P[P.length-1]==="."&&(P=P.substr(0,P.length-1))),P);const dt=q[4]||q[6];if(!L.leadingZeros&&Z.length>0&&C&&Q[2]!=="."||!L.leadingZeros&&Z.length>0&&!C&&Q[1]!==".")return T;{const Y=Number(Q),W=""+Y;return W.search(/[eE]/)!==-1||dt?L.eNotation?Y:T:Q.indexOf(".")!==-1?W==="0"&&j===""||W===j||C&&W==="-"+j?Y:T:Z?j===W||C+j===W?Y:T:Q===W||Q===C+W?Y:T}}return T}var P}},"./src/deprecated.ts":(N,l,d)=>{d.r(l),d.d(l,{FLIPPED_DIAGONALLY_FLAG:()=>o.FLIPPED_DIAGONALLY_FLAG,FLIPPED_HORIZONTALLY_FLAG:()=>o.FLIPPED_HORIZONTALLY_FLAG,FLIPPED_VERTICALLY_FLAG:()=>o.FLIPPED_VERTICALLY_FLAG,TiledEntity:()=>o.TiledEntity,TiledLayer:()=>o.TiledLayer,TiledLayerComponent:()=>o.TiledLayerComponent,TiledMap:()=>o.TiledMap,TiledMapFormat:()=>o.TiledMapFormat,TiledMapResource:()=>o.TiledMapResource,TiledObject:()=>o.TiledObject,TiledObjectComponent:()=>o.TiledObjectComponent,TiledObjectGroup:()=>o.TiledObjectGroup,TiledTileset:()=>o.TiledTileset,TiledTilesetTile:()=>o.TiledTilesetTile,getCanonicalGid:()=>o.getCanonicalGid,getProperty:()=>o.getProperty,isFlippedDiagonally:()=>o.isFlippedDiagonally,isFlippedHorizontally:()=>o.isFlippedHorizontally,isFlippedVertically:()=>o.isFlippedVertically,parseExternalJson:()=>o.parseExternalJson,parseExternalTsx:()=>o.parseExternalTsx});var o=d("./src/deprecated/index.ts")},"./src/deprecated/index.ts":(N,l,d)=>{d.r(l),d.d(l,{FLIPPED_DIAGONALLY_FLAG:()=>Q.FLIPPED_DIAGONALLY_FLAG,FLIPPED_HORIZONTALLY_FLAG:()=>Q.FLIPPED_HORIZONTALLY_FLAG,FLIPPED_VERTICALLY_FLAG:()=>Q.FLIPPED_VERTICALLY_FLAG,TiledEntity:()=>L.TiledEntity,TiledLayer:()=>Q.TiledLayer,TiledLayerComponent:()=>Z.TiledLayerComponent,TiledMap:()=>T.TiledMap,TiledMapFormat:()=>o.TiledMapFormat,TiledMapResource:()=>o.TiledMapResource,TiledObject:()=>P.TiledObject,TiledObjectComponent:()=>C.TiledObjectComponent,TiledObjectGroup:()=>P.TiledObjectGroup,TiledTileset:()=>q.TiledTileset,TiledTilesetTile:()=>q.TiledTilesetTile,getCanonicalGid:()=>Q.getCanonicalGid,getProperty:()=>L.getProperty,isFlippedDiagonally:()=>Q.isFlippedDiagonally,isFlippedHorizontally:()=>Q.isFlippedHorizontally,isFlippedVertically:()=>Q.isFlippedVertically,parseExternalJson:()=>q.parseExternalJson,parseExternalTsx:()=>q.parseExternalTsx}),d("./src/deprecated/tiled-types.ts");var o=d("./src/deprecated/tiled-map-resource.ts"),T=d("./src/deprecated/tiled-map-parser.ts"),L=d("./src/deprecated/tiled-entity.ts"),Q=d("./src/deprecated/tiled-layer.ts"),P=d("./src/deprecated/tiled-object.ts"),q=d("./src/deprecated/tiled-tileset.ts"),C=d("./src/deprecated/tiled-object-component.ts"),Z=d("./src/deprecated/tiled-layer-component.ts");d("./src/deprecated/raw-tiled-layer.ts"),d("./src/deprecated/raw-tiled-map.ts"),d("./src/deprecated/raw-tiled-object.ts"),d("./src/deprecated/raw-tiled-text.ts"),d("./src/deprecated/raw-tiled-tileset.ts"),d("./src/deprecated/raw-tileset-tile.ts")},"./src/deprecated/raw-tiled-layer.ts":(N,l,d)=>{d.r(l)},"./src/deprecated/raw-tiled-map.ts":(N,l,d)=>{d.r(l)},"./src/deprecated/raw-tiled-object.ts":(N,l,d)=>{d.r(l)},"./src/deprecated/raw-tiled-text.ts":(N,l,d)=>{d.r(l)},"./src/deprecated/raw-tiled-tileset.ts":(N,l,d)=>{d.r(l)},"./src/deprecated/raw-tileset-tile.ts":(N,l,d)=>{d.r(l)},"./src/deprecated/tiled-entity.ts":(N,l,d)=>{d.r(l),d.d(l,{TiledEntity:()=>T,getProperty:()=>o});const o=(L,Q)=>{if(Array.isArray(L))return L?.filter(P=>{var q;return((q=P.name)===null||q===void 0?void 0:q.toLocaleLowerCase())===Q.toLocaleLowerCase()})[0]};class T{constructor(){this.properties=[]}getProperty(Q){return o(this.properties,Q)}}},"./src/deprecated/tiled-layer-component.ts":(N,l,d)=>{d.r(l),d.d(l,{TiledLayerComponent:()=>T});var o=d("excalibur");class T extends o.Component{constructor(Q){super(),this.layer=Q,this.type="ex.tiledlayer"}}},"./src/deprecated/tiled-layer.ts":(N,l,d)=>{d.r(l),d.d(l,{FLIPPED_DIAGONALLY_FLAG:()=>P,FLIPPED_HORIZONTALLY_FLAG:()=>L,FLIPPED_VERTICALLY_FLAG:()=>Q,TiledLayer:()=>dt,getCanonicalGid:()=>j,isFlippedDiagonally:()=>Z,isFlippedHorizontally:()=>q,isFlippedVertically:()=>C});var o=d("./src/deprecated/tiled-entity.ts"),T=d("excalibur");const L=2147483648,Q=1073741824,P=536870912,q=Y=>!!(Y&L),C=Y=>!!(Y&Q),Z=Y=>!!(Y&P),j=Y=>Y&~(L|Q|P);class dt extends o.TiledEntity{constructor(){super(...arguments),this.offset=T.Vector.Zero,this.parallaxFactor=null,this.encoding="csv"}static parse(W){var u,O,X,ht,pt,ft;if(W.type!=="tilelayer")throw Error("Cannot parse a non tilelayer type layer");const $=new dt;return $.id=+W.id,$.name=W.name,$.data=W.data,$.offset=(0,T.vec)((u=W.offsetx)!==null&&u!==void 0?u:0,(O=W.offsety)!==null&&O!==void 0?O:0),$.parallaxFactor=W.parallaxx||W.parallaxy?(0,T.vec)((X=W.parallaxx)!==null&&X!==void 0?X:1,(ht=W.parallaxy)!==null&&ht!==void 0?ht:1):null,$.width=W.width,$.height=W.height,$.encoding=(pt=W.encoding)!==null&&pt!==void 0?pt:"csv",$.compression=W.compression,$.order=W.order,$.properties=(ft=W.properties)!==null&&ft!==void 0?ft:[],$.rawLayer=W,$}}},"./src/deprecated/tiled-map-parser.ts":(N,l,d)=>{d.r(l),d.d(l,{TiledMap:()=>C});var o=d("./node_modules/fast-xml-parser/src/parser.js"),T=d("./node_modules/pako/index.js"),L=d("./node_modules/zstddec/dist/zstddec.modern.js"),Q=d("./src/deprecated/tiled-layer.ts"),P=d("./src/deprecated/tiled-object.ts"),q=d("./src/deprecated/tiled-tileset.ts");class C{constructor(){this.layers=[],this.tileSets=[],this.objectGroups=[]}getExcaliburObjects(){return this.getObjectLayerByProperty("excalibur",!0)}getObjects(){var Y;return(Y=this.objectGroups.filter(W=>{var u;return!(!((u=W.getProperty("excalibur-exclude"))===null||u===void 0)&&u.value)}))!==null&&Y!==void 0?Y:[]}getObjectLayerByName(Y){return this.objectGroups.filter(W=>W.name===Y)[0]}getObjectLayerByProperty(Y,W){return this.objectGroups.filter(u=>{var O;return((O=u.getProperty(Y))===null||O===void 0?void 0:O.value)===W})}getTileLayerByName(Y){return this.layers.filter(W=>W.name===Y)[0]}getTileLayersByProperty(Y,W){return this.layers.filter(u=>{var O;return((O=u.getProperty(Y))===null||O===void 0?void 0:O.value)===W})}static async fromTmx(Y){var W,u,O,X,ht,pt,ft,$,At,_t,ut,Ct,vt,xt,lt,kt;const Jt=(Ot,$t,Zt=!1)=>{Ot[$t]?(Ot[$t+(Zt?"s":"")]=Array.isArray(Ot[$t])?Ot[$t]:[Ot[$t]],Zt&&delete Ot[$t]):Ot[$t+(Zt?"s":"")]=[]},Ut=o.parse(Y,{attributeNamePrefix:"",textNodeName:"#text",ignoreAttributes:!1,ignoreNameSpace:!1,allowBooleanAttributes:!0,parseNodeValue:!0,parseAttributeValue:!0,trimValues:!0,parseTrueNumberOnly:!1,arrayMode:!1,stopNodes:["parse-me-as-string"]}).map;Jt(Ut,"layer",!0);for(let Ot of Ut.layers)Ot.type=(W=Ot.type)!==null&&W!==void 0?W:"tilelayer",Ot.encoding=Ot.data.encoding,Ot.compression=Ot.data.compression,Ot.encoding==="csv"?Ot.data=Ot.data["#text"].split(",").map($t=>+$t):Ot.data=Ot.data["#text"],Ot.properties=(O=(u=Ot.properties)===null||u===void 0?void 0:u.property)!==null&&O!==void 0?O:[],Jt(Ot,"properties");Ut.objectgroup=(X=Ut.objectgroup)!==null&&X!==void 0?X:[];let Ae=Array.isArray(Ut.objectgroup)?Ut.objectgroup:[Ut.objectgroup];for(let Ot of Ae)if(Ot.type=(ht=Ot.type)!==null&&ht!==void 0?ht:"objectgroup",Ot.properties=(ft=(pt=Ot.properties)===null||pt===void 0?void 0:pt.property)!==null&&ft!==void 0?ft:[],Jt(Ot,"properties"),Ot.object){Ot.objects=Array.isArray(Ot.object)?Ot.object:[Ot.object],Ot.objects.forEach($t=>{var Zt,Yt;return $t.properties=(Yt=(Zt=$t.properties)===null||Zt===void 0?void 0:Zt.property)!==null&&Yt!==void 0?Yt:[]}),Ot.objects.forEach($t=>Jt($t,"properties")),delete Ot.object;for(let $t of Ot.objects)$t.text&&($t.text.text=$t.text["#text"],$t.text.halign=($=$t.text.halign)!==null&&$!==void 0?$:"left",$t.text.valign=(At=$t.text.valign)!==null&&At!==void 0?At:"top",$t.text.fontfamily=(_t=$t.text.fontfamily)!==null&&_t!==void 0?_t:"sans-serif",$t.text.pixelsize=+((ut=$t.text.pixelsize)!==null&&ut!==void 0?ut:16),$t.text.kerning=!!$t.text.kerning,$t.text.italic=!!$t.text.italic,$t.text.bold=!!$t.text.bold,$t.text.underline=!!$t.text.underline,$t.text.strikeout=!!$t.text.strikeout,$t.text.color=(Ct=$t.text.color)!==null&&Ct!==void 0?Ct:"#000000"),$t.point===""&&($t.point=!0),$t.ellipse===""&&($t.ellipse=!0),$t.polyline&&($t.polyline=$t.polyline.points.split(" ").map(Zt=>{const Yt=Zt.split(",");return{x:+Yt[0],y:+Yt[1]}})),$t.polygon&&($t.polygon=$t.polygon.points.split(" ").map(Zt=>{const Yt=Zt.split(",");return{x:+Yt[0],y:+Yt[1]}}));Ut.layers.push(Ot)}delete Ut.objectgroup,Jt(Ut,"imagelayer",!0);for(let Ot of Ut.imagelayers)Ot.type=(vt=Ot.type)!==null&&vt!==void 0?vt:"imagelayer",Ot.image=Ot.image.source,Ot.properties=(lt=(xt=Ot.properties)===null||xt===void 0?void 0:xt.property)!==null&&lt!==void 0?lt:[],Jt(Ot,"properties"),Ut.layers.push(Ot);delete Ut.imagelayer,Jt(Ut,"tileset",!0);for(let Ot of Ut.tilesets)Ot.source||(Ot.image&&(Ot.imagewidth=Ot.image.width,Ot.imageheight=Ot.image.height,Ot.image=Ot.image.source),Ot.objectalignment=(kt=Ot.objectalignment)!==null&&kt!==void 0?kt:"unspecified",Jt(Ot,"tile",!0),Ot.tiles.forEach($t=>{var Zt;!((Zt=$t.image)===null||Zt===void 0)&&Zt.source&&($t.image=$t.image.source),$t.objectgroup&&($t.objectgroup.type="objectgroup",Jt($t.objectgroup,"object",!0))}));return await C._fromRawTiledMap(Ut)}static async fromJson(Y){return await C._fromRawTiledMap(Y)}static async _fromRawTiledMap(Y){await C._decompresslayers(Y);const W=new C;W.orientation=Y.orientation,W.rawMap=Y,W.width=+Y.width,W.height=+Y.height,W.tileWidth=+Y.tilewidth,W.tileHeight=+Y.tileheight,Z(Y);for(let u of Y.layers)u.type=="tilelayer"&&W.layers.push(Q.TiledLayer.parse(u)),u.type=="objectgroup"&&W.objectGroups.push(P.TiledObjectGroup.parse(u));for(let u of Y.tilesets)u.source||W.tileSets.push(q.TiledTileset.parse(u));return W}static async _decompresslayers(Y){var W;if(Y.layers)for(var u of Y.layers)typeof u.data=="string"?u.encoding==="base64"&&(u.data=await j.decompressBase64(u.data,u.encoding,(W=u.compression)!==null&&W!==void 0?W:"")):u.data=j.decompressCsv(u.data);return Y}}const Z=dt=>{let Y=0;for(let W of dt.layers)W.order=Y++},j={decompressCsv:dt=>dt,decompressBase64:(dt,Y,W)=>{var u,O,X,ht,pt,ft;if(dt.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var $=43,At=47,_t=48,ut=97,Ct=65,vt=45,xt=95;function lt(Ae){var Ot=Ae.charCodeAt(0);if(Ot===$||Ot===vt)return 62;if(Ot===At||Ot===xt)return 63;if(Ot<_t)return-1;if(Ot<_t+10)return Ot-_t+26+26;if(Ot<Ct+26)return Ot-Ct;if(Ot<ut+26)return Ot-ut+26;throw Error("Could not decode elt")}var kt=dt.length;pt=dt.charAt(kt-2)==="="?2:dt.charAt(kt-1)==="="?1:0,ft=new Uint8Array(3*dt.length/4-pt),X=pt>0?dt.length-4:dt.length;var Jt=0;function Ut(Ae){ft[Jt++]=Ae}for(u=0,O=0;u<X;u+=4,O+=3)Ut((16711680&(ht=lt(dt.charAt(u))<<18|lt(dt.charAt(u+1))<<12|lt(dt.charAt(u+2))<<6|lt(dt.charAt(u+3))))>>16),Ut((65280&ht)>>8),Ut(255&ht);return pt===2?Ut(255&(ht=lt(dt.charAt(u))<<2|lt(dt.charAt(u+1))>>4)):pt===1&&(Ut((ht=lt(dt.charAt(u))<<10|lt(dt.charAt(u+1))<<4|lt(dt.charAt(u+2))>>2)>>8&255),Ut(255&ht)),new Promise(Ae=>{const Ot=function(Yt){for(var Ve=0,xe=Yt.length-1;xe>=0;xe--)Ve=256*Ve+1*Yt[xe];return Ve};if(W==="zlib"||W==="gzip"){var $t=(ft=(0,T.inflate)(ft)).length/4,Zt=new Array($t);for(u=0;u<$t;u++)Zt[u]=Ot(ft.slice(4*u,4*u+4));Ae(Zt)}if(W==="zstd"){const Yt=new L.ZSTDDecoder;Yt.init().then(()=>{var Ve=(ft=Yt.decode(ft)).length/4,xe=new Array(Ve);for(u=0;u<Ve;u++)xe[u]=Ot(ft.slice(4*u,4*u+4));Ae(xe)})}if(!W){for($t=ft.length/4,Zt=new Array($t),u=0;u<$t;u++)Zt[u]=Ot(ft.slice(4*u,4*u+4));Ae(Zt)}})}}},"./src/deprecated/tiled-map-resource.ts":(N,l,d)=>{d.r(l),d.d(l,{TiledMapFormat:()=>o,TiledMapResource:()=>j});var o,T=d("excalibur"),L=d("./src/deprecated/tiled-map-parser.ts"),Q=d("./src/deprecated/tiled-tileset.ts"),P=d("./src/deprecated/tiled-layer.ts"),q=d("./src/deprecated/tiled-entity.ts"),C=d("./src/deprecated/tiled-object-component.ts"),Z=d("./src/deprecated/tiled-layer-component.ts");(function(dt){dt.TMX="TMX",dt.JSON="JSON"})(o||(o={}));class j{constructor(Y,W){this.path=Y,this.layers=[],this.isoLayers=[],this._layerZIndexStart=-1,this._mapToRawLayer=new Map;const{mapFormatOverride:u,startingLayerZIndex:O}={...W};this._layerZIndexStart=O??this._layerZIndexStart;const X=u??(Y.includes(".tmx")?o.TMX:o.JSON);switch(X){case o.TMX:this._resource=new T.Resource(Y,"text");break;case o.JSON:this._resource=new T.Resource(Y,"json");break;default:throw`The format ${X} is not currently supported. Please export Tiled map as JSON.`}this.mapFormat=X,this.ex={},this.imageMap={},this.sheetMap={},this.tileImageMap={},this.convertPath=(ht,pt)=>{if(pt.indexOf("/")===0)return pt;const ft=ht.split("/"),$=pt.split("/");return ft[ft.length-1].includes(".")&&ft.pop(),ft.concat($).join("/")}}_addTiledCamera(Y){const W=this.ex.camera;if(W){let u=(0,T.vec)(W.x,W.y);this.isIsometric()&&(u=this._isoTileToScreenCoords(W.x,W.y)),Y.camera.x=u.x,Y.camera.y=u.y,Y.camera.zoom=W.zoom}}_addTiledColliders(Y){var W;const u=this.ex.colliders;if(u)for(let O of u){const X=new T.Actor({pos:(0,T.vec)(O.x,O.y),name:O.name,collisionType:(W=O.collisionType)!==null&&W!==void 0?W:T.CollisionType.Fixed});if(O.color&&(X.color=T.Color.fromHex(O.color.value)),O.type==="box")if(this.isIsometric()){X.pos=this._isoTileToScreenCoords(O.x,O.y);const ht=new T.BoundingBox({left:0,top:0,right:O.width,bottom:O.height}).getPoints().map(pt=>this._isoTileToScreenCoords(pt.x,pt.y));X.collider.usePolygonCollider(ht,T.Vector.Zero)}else X.collider.useBoxCollider(O.width,O.height,T.Vector.Zero);O.type==="circle"&&X.collider.useCircleCollider(O.radius),X.addComponent(new C.TiledObjectComponent(O.tiled)),Y.add(X),O.zIndex&&(X.z=O.zIndex)}}_isoTileToScreenCoords(Y,W){if(this.isIsometric()){const u=this.isoLayers[0],O=u.tileWidth,X=u.tileHeight,ht=0,pt=W/X,ft=Y/X;return(0,T.vec)((ft-pt)*O/2+ht,(ft+pt)*X/2)}return(0,T.vec)(Y,W)}_addTiledText(Y){var W,u,O,X,ht,pt,ft,$,At,_t,ut,Ct;const vt=(W=this.data)===null||W===void 0?void 0:W.getObjects();if(vt&&vt.length>0)for(const xt of vt){const lt=xt.getText();for(const kt of lt){let Jt=(0,T.vec)(kt.x,kt.y+(((u=kt.height)!==null&&u!==void 0?u:0)-((X=(O=kt.text)===null||O===void 0?void 0:O.pixelSize)!==null&&X!==void 0?X:0)));this.isIsometric()&&(Jt=this._isoTileToScreenCoords(kt.x,kt.y));const Ut=new T.Label({anchor:T.Vector.Zero,x:Jt.x,y:Jt.y,text:(pt=(ht=kt.text)===null||ht===void 0?void 0:ht.text)!==null&&pt!==void 0?pt:"",name:this._getEntityName(kt),font:new T.Font({family:(ft=kt.text)===null||ft===void 0?void 0:ft.fontFamily,size:($=kt.text)===null||$===void 0?void 0:$.pixelSize,unit:T.FontUnit.Px})});if(Ut.font.textAlign=T.TextAlign.Left,Ut.font.baseAlign=T.BaseAlign.Top,Ut.rotation=kt.rotation,Ut.color=T.Color.fromHex((_t=(At=kt.text)===null||At===void 0?void 0:At.color)!==null&&_t!==void 0?_t:"#000000"),Ut.collider.set(T.Shape.Box((ut=kt.width)!==null&&ut!==void 0?ut:0,(Ct=kt.height)!==null&&Ct!==void 0?Ct:0)),Ut.body.collisionType=T.CollisionType.PreventCollision,Ut.addComponent(new C.TiledObjectComponent(kt)),Ut.z=this._calculateZIndex(kt,xt),this.isIsometric()){const Ae=new T.IsometricEntityComponent(this.isoLayers[0]);Ut.addComponent(Ae),Ae.elevation=xt.order}Y.add(Ut)}}}_addTiledInsertedTiles(Y){var W,u,O;const X=(W=this.data)===null||W===void 0?void 0:W.getObjects();if(X&&X.length>0)for(const ht of X){const pt=ht.getInsertedTiles();for(const ft of pt){const $=ft.getProperty("collisionType");let At=T.CollisionType.PreventCollision;$&&(At=$.value);let _t=(0,T.vec)(ft.x,ft.y);if(this.isIsometric()&&(_t=this._isoTileToScreenCoords(ft.x,ft.y)),ft.gid){const ut=this.getSpriteForGid(ft.gid),Ct=this.getCollidersForGid(ft.gid),vt=new T.Actor({x:_t.x,y:_t.y,width:ft.width,height:ft.height,anchor:this.isIsometric()?(0,T.vec)(.5,1):(0,T.vec)(0,1),rotation:ft.rotation,collisionType:At,name:this._getEntityName(ft)});if(this.isIsometric()){const xt=this.isoLayers[0];for(let lt of Ct)lt.offset=(0,T.vec)(-xt.tileWidth/2,2*-xt.tileHeight)}if(Ct.length&&(vt.collider.clear(),vt.collider.set(new T.CompositeCollider(Ct))),vt.addComponent(new C.TiledObjectComponent(ft)),vt.graphics.anchor=this.isIsometric()?(0,T.vec)(.5,1):(0,T.vec)(0,1),ut.destSize.width=(u=ft.width)!==null&&u!==void 0?u:ut.destSize.width,ut.destSize.height=(O=ft.height)!==null&&O!==void 0?O:ut.destSize.height,vt.graphics.use(ut),this.isIsometric()){const xt=new T.IsometricEntityComponent(this.isoLayers[0]);vt.addComponent(xt),xt.elevation=ht.order}Y.add(vt),vt.z=this._calculateZIndex(ft,ht)}}}}useSolidLayers(){var Y,W,u;let O=this.getTileMapLayers();O=O.concat(this.isoLayers);for(const X of O){const ht=this._mapToRawLayer.get(X);if(ht&&(W=(Y=(0,q.getProperty)(ht.properties,"solid"))===null||Y===void 0?void 0:Y.value)!==null&&W!==void 0&&W)for(let pt=0;pt<ht.data.length;pt++)(u=X.tiles[pt]).solid||(u.solid=!!ht.data[pt])}}addTiledMapToScene(Y){const W=this.getTileMapLayers();for(const u of W)Y.add(u);for(const u of this.isoLayers)Y.add(u);this._addTiledCamera(Y),this._addTiledColliders(Y),this._addTiledText(Y),this._addTiledInsertedTiles(Y),this.useSolidLayers()}_parseExcaliburInfo(){var Y,W,u,O,X,ht,pt,ft,$,At;const _t=(Y=this.data)===null||Y===void 0?void 0:Y.getObjects(),ut={};if(_t.length>0){ut.camera=(W=_t.find(Ct=>Ct.getObjectByClass("camera")))===null||W===void 0?void 0:W.getCamera(),ut.colliders=[];for(let Ct of _t){const vt=Ct.getObjectsByClass("boxcollider");for(let lt of vt){const kt=lt.getProperty("collisiontype"),Jt=lt.getProperty("color"),Ut=this._calculateZIndex(lt,Ct);ut.colliders.push({...lt,width:+((u=lt.width)!==null&&u!==void 0?u:0),height:+((O=lt.height)!==null&&O!==void 0?O:0),collisionType:(X=kt?.value)!==null&&X!==void 0?X:T.CollisionType.Fixed,color:Jt,zIndex:Ut,radius:0,type:"box",tiled:lt,name:this._getEntityName(lt)})}const xt=Ct.getObjectsByClass("circlecollider");for(let lt of xt){const kt=lt.getProperty("collisiontype"),Jt=lt.getProperty("color"),Ut=this._calculateZIndex(lt,Ct);ut.colliders.push({x:lt.x,y:lt.y,radius:Math.max((ht=lt.width)!==null&&ht!==void 0?ht:0,(pt=lt.height)!==null&&pt!==void 0?pt:0),collisionType:(ft=kt?.value)!==null&&ft!==void 0?ft:T.CollisionType.Fixed,color:Jt,zIndex:Ut,width:($=lt.width)!==null&&$!==void 0?$:0,height:(At=lt.height)!==null&&At!==void 0?At:0,type:"circle",tiled:lt,name:this._getEntityName(lt)})}}}this.ex=ut}isLoaded(){return!!this.data}isIsometric(){return!!this.isoLayers.length}async load(){const Y=await this._resource.load(),W=await this._importMapData(Y);let u=[];return W.rawMap.tilesets.forEach(O=>{if(O.source){const ht=O.source.includes(".tsx")?"text":"json";var X=new T.Resource(this.convertPath(this.path,O.source),ht);u.push(X.load().then(pt=>{pt=ht==="text"?(0,Q.parseExternalTsx)(pt,O.firstgid,O.source):(0,Q.parseExternalJson)(pt,O.firstgid,O.source),Object.assign(O,pt),W.tileSets.push(pt)},()=>{T.Logger.getInstance().error(`[Tiled] Error loading external tileset file ${X.path}`)}))}}),await Promise.all(u).then(()=>{let O=[];return W.rawMap.tilesets.forEach(X=>{let ht=[];if(X.image){ht=X.source?[this.convertPath(X.source,X.image)]:[this.convertPath(this.path,X.image)];for(let pt of ht){const ft=new T.ImageSource(pt);this.imageMap[X.firstgid]=ft,O.push(ft.load()),T.Logger.getInstance().debug("[Tiled] Loading associated tileset image: "+X.image)}}else for(let pt of X.tiles){let ft;ft=X.source?this.convertPath(X.source,pt.image):this.convertPath(this.path,pt.image);const $=new T.ImageSource(ft);O.push($.load()),this.tileImageMap[X.firstgid]||(this.tileImageMap[X.firstgid]=[]),this.tileImageMap[X.firstgid].push([pt,$]),T.Logger.getInstance().debug("[Tiled] Loading associated tileset image: "+ft)}}),Promise.all(O).then(()=>{this._createTileMap()},()=>{T.Logger.getInstance().error("[Tiled] Error loading tileset images")})}),this._parseExcaliburInfo(),W}async _importMapData(Y){if(Y===void 0)throw`Tiled map resource ${this.path} is empty`;switch(this.mapFormat){case o.TMX:return this.data=await L.TiledMap.fromTmx(Y);case o.JSON:return this.data=await L.TiledMap.fromJson(Y);default:throw new Error("Unknown map format: "+this.mapFormat)}}getTilesetForTile(Y){if(this.data)for(var W=this.data.tileSets.length-1;W>=0;W--){var u=this.data.tileSets[W];if(Y>=u.firstGid&&Y<=u.firstGid+u.tileCount-1)return u}throw Error(`No tileset exists for tiled gid [${Y}]!`)}getSpriteForGid(Y){const W=(0,P.isFlippedHorizontally)(Y),u=(0,P.isFlippedVertically)(Y),O=(0,P.isFlippedDiagonally)(Y),X=(0,P.getCanonicalGid)(Y),ht=this.getTilesetForTile(X),pt=X-ht.firstGid,ft=this.sheetMap[ht.firstGid.toString()];if(ft){let $=ft.sprites[pt];return(O||W||u)&&($=$.clone()),O&&($.rotation=-Math.PI/2,$.scale=(0,T.vec)(-1,1)),W&&($.scale=(0,T.vec)((O?1:-1)*$.scale.x,(O?-1:1)*$.scale.y)),u&&($.scale=(0,T.vec)((O?-1:1)*$.scale.x,(O?1:-1)*$.scale.y)),$}throw new Error(`Could not find sprite for gid: [${Y}] normalized gid: [${X}]`)}_transformPoints(Y,W,u){const O=(0,P.isFlippedHorizontally)(u),X=(0,P.isFlippedVertically)(u);return(0,P.isFlippedDiagonally)(u)&&(Y=Y.map(ht=>W.diagonalFlipTransform.multiply(ht))),O&&(Y=Y.map(ht=>W.horizontalFlipTransform.multiply(ht))),X&&(Y=Y.map(ht=>W.verticalFlipTransform.multiply(ht))),Y}getCollidersForGid(Y){const W=(0,P.getCanonicalGid)(Y),u=this.getTilesetForTile(W),O=W-u.firstGid,X=u.tiles.find(ht=>ht.id===O);if(X&&X.objectgroup){const ht=[];for(const pt of X.objectgroup.getPolygons()){const ft=(0,T.vec)(pt.x,pt.y),$=pt.polygon.points.split(" ").map(_t=>{const ut=_t.split(",");return(0,T.vec)(Number.parseFloat(ut[0]),Number.parseFloat(ut[1])).add(ft)}),At=T.Shape.Polygon($);At.points=this._transformPoints(At.points,u,Y),ht.push(At)}for(const pt of X.objectgroup.getBoxes()){const ft=T.Shape.Box(pt.width,pt.height,T.Vector.Zero);ft.points=ft.points.map($=>$.add((0,T.vec)(pt.x,pt.y))),ft.points=this._transformPoints(ft.points,u,Y),ht.push(ft)}for(const pt of X.objectgroup.getEllipses()){const ft=T.Shape.Circle(Math.min(pt.width/2,pt.height/2),(0,T.vec)(pt.width/2,pt.height/2).add((0,T.vec)(pt.x,pt.y)));ht.push(ft)}return ht}return[]}getAnimationForGid(Y){const W=(0,P.getCanonicalGid)(Y),u=this.getTilesetForTile(W),O=W-u.firstGid,X=u.tiles.find(ht=>ht.id===O);return X&&X.hasAnimation()?X.getAnimation(this):null}_calculateZIndex(Y,W){var u,O,X;let ht=(O=(u=Y.getProperty("z"))===null||u===void 0?void 0:u.value)!==null&&O!==void 0?O:(X=Y.getProperty("zindex"))===null||X===void 0?void 0:X.value;return ht!=null||(ht=W.order+this._layerZIndexStart),+ht}_getEntityName(Y){return Y.name}_createTileMap(){var Y,W,u,O,X,ht,pt,ft,$;for(const _t of this.data.rawMap.tilesets){const ut=(Y=_t.spacing)!==null&&Y!==void 0?Y:0,Ct=Math.floor((_t.imagewidth+ut)/(_t.tilewidth+ut)),vt=Math.floor((_t.imageheight+ut)/(_t.tileheight+ut));if(this.imageMap[_t.firstgid]){const xt=T.SpriteSheet.fromImageSource({image:this.imageMap[_t.firstgid],grid:{columns:Ct,rows:vt,spriteWidth:_t.tilewidth,spriteHeight:_t.tileheight},spacing:{originOffset:{x:(W=_t.margin)!==null&&W!==void 0?W:0,y:(u=_t.margin)!==null&&u!==void 0?u:0},margin:{x:(O=_t.spacing)!==null&&O!==void 0?O:0,y:(X=_t.spacing)!==null&&X!==void 0?X:0}}});this.sheetMap[_t.firstgid.toString()]=xt}else{const xt=this.tileImageMap[_t.firstgid].map(([kt,Jt])=>Jt.toSprite()),lt=new T.SpriteSheet({sprites:xt});this.sheetMap[_t.firstgid.toString()]=lt}}for(var At of this.data.layers)if(At.rawLayer.type==="tilelayer"){if(this.data.orientation==="orthogonal"){const _t=At.rawLayer,ut=new T.TileMap({name:At.rawLayer.name,pos:(0,T.vec)(At.offset.x,At.offset.y),tileWidth:this.data.rawMap.tilewidth,tileHeight:this.data.rawMap.tileheight,columns:this.data.width,rows:this.data.height});if(ut.addComponent(new Z.TiledLayerComponent(At)),At.rawLayer.parallaxx||At.rawLayer.parallaxy){const Ct=(0,T.vec)((ht=At.rawLayer.parallaxx)!==null&&ht!==void 0?ht:1,(pt=At.rawLayer.parallaxy)!==null&&pt!==void 0?pt:1);ut.addComponent(new T.ParallaxComponent(Ct))}ut.z=this._calculateZIndex(At,At);for(let Ct=0;Ct<_t.data.length;Ct++){let vt=_t.data[Ct];if(vt!==0){const xt=this.getSpriteForGid(vt);ut.tiles[Ct].addGraphic(xt);const lt=this.getCollidersForGid(vt);for(let Jt of lt)ut.tiles[Ct].addCollider(Jt);const kt=this.getAnimationForGid(vt);kt&&(ut.tiles[Ct].clearGraphics(),ut.tiles[Ct].addGraphic(kt))}}this._mapToRawLayer.set(ut,_t),(ft=this.layers)===null||ft===void 0||ft.push(ut)}if(this.data.orientation==="isometric"){const _t=At.rawLayer,ut=new T.IsometricMap({name:At.rawLayer.name,pos:(0,T.vec)(At.offset.x,At.offset.y),columns:this.data.width,rows:this.data.height,tileWidth:this.data.tileWidth,tileHeight:this.data.tileHeight}),Ct=ut.get(T.TransformComponent);Ct&&(Ct.z=this._calculateZIndex(At,At));for(let vt=0;vt<_t.data.length;vt++){let xt=_t.data[vt];if(xt!==0){const lt=this.getSpriteForGid(xt);ut.tiles[vt].addGraphic(lt);const kt=this.getCollidersForGid(xt);for(let Ut of kt)ut.tiles[vt].addCollider(Ut);const Jt=ut.tiles[vt].get(T.IsometricEntityComponent);Jt&&(Jt.elevation=At.order)}}ut.updateColliders(),this._mapToRawLayer.set(ut,_t),($=this.isoLayers)===null||$===void 0||$.push(ut)}}}getTileMapLayers(){var Y;return!((Y=this.layers)===null||Y===void 0)&&Y.length?this.layers:[]}getIsometricMapLayers(){var Y;return!((Y=this.isoLayers)===null||Y===void 0)&&Y.length?this.isoLayers:[]}_lookupTile(Y,W,u){const O=Y.tiles.indexOf(W),X=this.data.getTileLayerByName(u),ht=(0,P.getCanonicalGid)(X.data[O]);if(ht===0)return null;const pt=this.getTilesetForTile(ht);return pt.tiles.find(ft=>ft.id===ht-1)||{id:ht-1,tileset:pt,properties:{}}}getTileByPoint(Y,W){const u=this.getTileMapLayers().find(O=>O.name===Y);if(u){const O=u.getTileByPoint(W);return O?this._lookupTile(u,O,Y):null}return null}getTileByCoordinate(Y,W,u){const O=this.getTileMapLayers().find(X=>X.name===Y);if(O){const X=O.getTile(W,u);return this._lookupTile(O,X,Y)}return null}}},"./src/deprecated/tiled-object-component.ts":(N,l,d)=>{d.r(l),d.d(l,{TiledObjectComponent:()=>T});var o=d("excalibur");class T extends o.Component{constructor(Q){super(),this.object=Q,this.type="ex.tiledobject"}}},"./src/deprecated/tiled-object.ts":(N,l,d)=>{d.r(l),d.d(l,{TiledObject:()=>Q,TiledObjectGroup:()=>L});var o=d("./src/deprecated/tiled-entity.ts"),T=d("excalibur");class L extends o.TiledEntity{constructor(){super(...arguments),this.objects=[]}getCamera(){var q;const C=this.getObjectByClass("camera");if(C){const Z=C.getProperty("zoom");return{x:C.x,y:C.y,zoom:Z?+((q=Z?.value)!==null&&q!==void 0?q:1):1}}}getObjectByType(q){return this.getObjectsByType(q)[0]}getObjectByClass(q){return this.getObjectsByClass(q)[0]}getObjectsByType(q){return this.objects.filter(C=>{var Z;return((Z=C.type)===null||Z===void 0?void 0:Z.toLocaleLowerCase())===q.toLocaleLowerCase()})}getObjectsByClass(q){return this.objects.filter(C=>{var Z,j;return((Z=C.class)===null||Z===void 0?void 0:Z.toLocaleLowerCase())===q.toLocaleLowerCase()||((j=C.type)===null||j===void 0?void 0:j.toLocaleLowerCase())===q.toLocaleLowerCase()})}getObjectByName(q){return this.getObjectsByName(q)[0]}getObjectsByName(q){return this.objects.filter(C=>{var Z;return((Z=C.name)===null||Z===void 0?void 0:Z.toString().toLocaleLowerCase())===q.toString().toLocaleLowerCase()})}getPoints(){return this.objects.filter(q=>!!q.point)}getEllipses(){return this.objects.filter(q=>!!q.ellipse)}getText(){return this.objects.filter(q=>!!q.text)}getPolyLines(){return this.objects.filter(q=>!!q.polyline)}getPolygons(){return this.objects.filter(q=>!!q.polygon)}getBoxes(){return this.objects.filter(q=>!!q.width&&!!q.height&&!q.ellipse)}getInsertedTiles(){return this.objects.filter(q=>!!q.gid)}static parse(q){var C;if(q.type!=="objectgroup")throw Error("Cannot parse non objectgroup type layer");const Z=new L;Z.id=+q.id,Z.name=q.name,Z.properties=(C=q.properties)!==null&&C!==void 0?C:[],Z.rawObjectGroup=q,Z.order=q.order;for(let j of q.objects)Z.objects.push(Q.parse(j));return Z}}class Q extends o.TiledEntity{static parse(q){var C,Z,j,dt;const Y=new Q;return Y.id=+q.id,Y.gid=q.gid,Y.visible=(C=q.visible)===null||C===void 0||C,Y.name=q.name,Y.type=q.type,Y.class=q.class,Y.x=+q.x,Y.y=+q.y,Y.rotation=q.rotation?(0,T.toRadians)(q.rotation):0,Y.width=(Z=q.width)!==null&&Z!==void 0?Z:0,Y.height=(j=q.height)!==null&&j!==void 0?j:0,Y.point=q.point,Y.ellipse=q.ellipse===!0||q.ellipse==="",Y.polyline=q.polyline,Y.polygon=q.polygon,Y.rawObject=q,q.text&&(Y.text={...q.text,pixelSize:q.text.pixelsize,fontFamily:q.text.fontfamily}),Y.properties=(dt=q.properties)!==null&&dt!==void 0?dt:[],Y}}},"./src/deprecated/tiled-tileset.ts":(N,l,d)=>{d.r(l),d.d(l,{TiledTileset:()=>P,TiledTilesetTile:()=>q,parseExternalJson:()=>Z,parseExternalTsx:()=>C});var o=d("excalibur"),T=d("./node_modules/fast-xml-parser/src/parser.js"),L=d("./src/deprecated/tiled-object.ts"),Q=d("./src/deprecated/tiled-entity.ts");class P{constructor(){this.tiles=[]}static parse(dt){var Y,W;const u=new P;let O=[];if(Array.isArray(dt.tiles))O=((Y=dt.tiles)!==null&&Y!==void 0?Y:[]).map(X=>q.parse(X,u));else for(let X in dt.tiles)O.push(q.parse({...dt.tiles[X],id:+X},u));return u.tiles=O,u.firstGid=dt.firstgid,u.tileWidth=dt.tilewidth,u.tileHeight=dt.tileheight,u.tileCount=dt.tilecount,u.tileOffset=dt.tileoffset,u.tiledVersion=dt.tiledversion,u.backgroundColor=dt.backgroundcolor,u.transparentColor=dt.transparentcolor,u.wangSets=dt.wangsets,u.imageWidth=dt.imagewidth,u.imageHeight=dt.imageheight,u.objectAlignment=(W=dt.objectalignment)!==null&&W!==void 0?W:"unspecified",u.image=dt.image,u.spacing=isNaN(dt.spacing)?0:dt.spacing,u.horizontalFlipTransform=o.Matrix.identity().translate(u.tileWidth,0).scale(-1,1),u.verticalFlipTransform=o.Matrix.identity().translate(0,u.tileHeight).scale(1,-1),u.diagonalFlipTransform=o.Matrix.identity().translate(0,0).rotate(-Math.PI/2).scale(-1,1),u}}class q{hasAnimation(){return!!this.animation}getAnimation(dt){var Y;if(this.animation){let W=[];for(let u of this.animation)W.push({graphic:dt.getSpriteForGid(u.tileid+this.tileset.firstGid),duration:u.duration});return new o.Animation({frames:W,strategy:(Y=this.animationStrategy)!==null&&Y!==void 0?Y:o.AnimationStrategy.Loop})}return null}static parse(dt,Y){var W,u,O;const X=new q;if(X.id=+dt.id,X.image=dt.image,X.tileset=Y,X.properties=Array.isArray(dt.properties)?dt.properties:(u=(W=dt.properties)===null||W===void 0?void 0:W.property)!==null&&u!==void 0?u:[],dt.objectgroup&&(X.objectgroup=L.TiledObjectGroup.parse(dt.objectgroup)),dt.terrain&&(X.terrain=dt.terrain),dt.animation&&(X.animation=Array.isArray(dt.animation)?dt.animation:[...dt.animation.frame],X.properties)){const ht=(O=(0,Q.getProperty)(X.properties,"animationstrategy"))===null||O===void 0?void 0:O.value;switch(ht?.toLowerCase()){case o.AnimationStrategy.End.toLowerCase():X.animationStrategy=o.AnimationStrategy.End;break;case o.AnimationStrategy.Freeze.toLowerCase():X.animationStrategy=o.AnimationStrategy.Freeze;break;case o.AnimationStrategy.Loop.toLowerCase():X.animationStrategy=o.AnimationStrategy.Loop;break;case o.AnimationStrategy.PingPong.toLowerCase():X.animationStrategy=o.AnimationStrategy.PingPong;break;default:X.animationStrategy=o.AnimationStrategy.Loop}}return X}}const C=(j,dt,Y)=>{var W,u,O,X,ht;const pt=(_t,ut,Ct=!1)=>{_t[ut]?(_t[ut+(Ct?"s":"")]=Array.isArray(_t[ut])?_t[ut]:[_t[ut]],Ct&&delete _t[ut]):_t[ut+(Ct?"s":"")]=[]},ft=T.parse(j,{attributeNamePrefix:"",textNodeName:"#text",ignoreAttributes:!1,ignoreNameSpace:!1,allowBooleanAttributes:!0,parseNodeValue:!0,parseAttributeValue:!0,trimValues:!0,parseTrueNumberOnly:!1,arrayMode:!1,stopNodes:["parse-me-as-string"]}).tileset,$=ft;$.firstgid=dt,$.source=Y,$.imagewidth=(W=ft.image)===null||W===void 0?void 0:W.width,$.imageheight=(u=ft.image)===null||u===void 0?void 0:u.height,$.objectalignment=(O=ft.objectalignment)!==null&&O!==void 0?O:"unspecified",$.image=(X=ft.image)===null||X===void 0?void 0:X.source,$.spacing=isNaN(ft.spacing)?0:ft.spacing,pt(ft,"tile",!0),ft.tiles.forEach(_t=>{var ut;!((ut=_t.image)===null||ut===void 0)&&ut.source&&(_t.image=_t.image.source),_t.objectgroup&&(_t.objectgroup.type="objectgroup",pt(_t.objectgroup,"object",!0))}),$.tiles=ft.tiles;const At={...$,tiles:[],firstGid:$.firstgid,tileWidth:$.tilewidth,tileHeight:$.tileheight,tileCount:$.tilecount,tileOffset:$.tileoffset,tiledVersion:$.tiledversion,backgroundColor:$.backgroundcolor,transparentColor:$.transparentcolor,wangSets:$.wangsets,imageWidth:$.imagewidth,imageHeight:$.imageheight,objectAlignment:(ht=$.objectalignment)!==null&&ht!==void 0?ht:"unspecified",image:$.image,spacing:isNaN($.spacing)?0:$.spacing,horizontalFlipTransform:o.Matrix.identity().translate($.tilewidth,0).scale(-1,1),verticalFlipTransform:o.Matrix.identity().translate(0,$.tileheight).scale(1,-1),diagonalFlipTransform:o.Matrix.identity().translate($.tilewidth,$.tileheight).rotate(-Math.PI/2).scale(-1,1)};return At.tiles=$.tiles.map(_t=>q.parse(_t,At)),At},Z=(j,dt,Y)=>{var W,u;let O=[];j.tiles=(W=j.tiles)!==null&&W!==void 0?W:[],(0,o.vec)(j.tilewidth/2,j.tileheight/2);const X={...j,source:Y,tiles:O,firstGid:dt,tileWidth:j.tilewidth,tileHeight:j.tileheight,tileCount:j.tilecount,tileOffset:j.tileoffset,tiledVersion:j.tiledversion,backgroundColor:j.backgroundcolor,transparentColor:j.transparentcolor,wangSets:j.wangsets,imageWidth:j.imagewidth,imageHeight:j.imageheight,spacing:isNaN(j.spacing)?0:j.spacing,objectAlignment:(u=j.objectalignment)!==null&&u!==void 0?u:"unspecified",image:j.image,horizontalFlipTransform:o.Matrix.identity().translate(j.tilewidth,0).scale(-1,1),verticalFlipTransform:o.Matrix.identity().translate(0,j.tileheight).scale(1,-1),diagonalFlipTransform:o.Matrix.identity().translate(j.tilewidth,j.tileheight).rotate(-Math.PI/2).scale(-1,1)};for(let ht in j.tiles)O.push(q.parse({...j.tiles[ht],id:+ht},X));return X}},"./src/deprecated/tiled-types.ts":(N,l,d)=>{d.r(l)},"./src/parser/tiled-parser.ts":(N,l,d)=>{d.r(l),d.d(l,{TiledMap:()=>Qe,TiledParser:()=>yt,TiledTemplate:()=>Ee,TiledText:()=>Ct,TiledTile:()=>Ae,TiledTileLayer:()=>ft,TiledTileLayerInfinite:()=>pt,TiledTileset:()=>xe,TiledTilesetFile:()=>Yt,isCSV:()=>At,isInfiniteLayer:()=>Bt,isTiledTilesetCollectionOfImages:()=>Zt,isTiledTilesetEmbedded:()=>ot,isTiledTilesetExternal:()=>It,isTiledTilesetSingleImage:()=>$t,needsDecoding:()=>$});var o=d("./node_modules/zod/lib/index.mjs");const T=o.z.object({name:o.z.string(),type:o.z.literal("int"),value:o.z.number().int()}),L=o.z.object({name:o.z.string(),type:o.z.literal("bool"),value:o.z.boolean()}),Q=o.z.object({name:o.z.string(),type:o.z.literal("float"),value:o.z.number()}),P=o.z.object({name:o.z.string(),type:o.z.literal("string"),value:o.z.string()}),q=o.z.object({name:o.z.string(),type:o.z.literal("file"),value:o.z.string()}),C=o.z.object({name:o.z.string(),type:o.z.literal("color"),value:o.z.string()}),Z=o.z.object({name:o.z.string(),type:o.z.literal("object"),value:o.z.number()}),j=o.z.discriminatedUnion("type",[T,L,Q,P,q,C,Z]),dt=o.z.object({name:o.z.string(),type:o.z.literal("tilelayer"),class:o.z.string().optional(),height:o.z.number(),width:o.z.number(),x:o.z.number(),y:o.z.number(),id:o.z.number(),opacity:o.z.number(),properties:o.z.array(j).optional(),visible:o.z.boolean(),tintcolor:o.z.string().optional(),parallaxx:o.z.number().optional(),parallaxy:o.z.number().optional(),offsetx:o.z.number().optional(),offsety:o.z.number().optional()}),Y=dt.extend({data:o.z.array(o.z.number()),encoding:o.z.literal("csv")}),W=dt.extend({data:o.z.array(o.z.number()),encoding:o.z.literal("base64"),compression:o.z.literal("gzip")}),u=dt.extend({data:o.z.array(o.z.number()),encoding:o.z.literal("base64"),compression:o.z.literal("zlib")}),O=dt.extend({data:o.z.array(o.z.number()),encoding:o.z.literal("base64"),compression:o.z.literal("zstandard")}),X=dt.extend({data:o.z.string(),encoding:o.z.literal("base64"),compression:o.z.string()}),ht=o.z.object({x:o.z.number(),y:o.z.number(),width:o.z.number(),height:o.z.number(),data:o.z.array(o.z.number())}),pt=dt.extend({startx:o.z.number(),starty:o.z.number(),chunks:o.z.array(ht)}),ft=o.z.union([X,Y,W,u,O,pt]);function $(re){return re.encoding==="base64"}function At(re){return re.encoding==="csv"||Array.isArray(re.data)}const _t=o.z.object({x:o.z.number(),y:o.z.number()}),ut=o.z.array(_t),Ct=o.z.object({text:o.z.string(),color:o.z.string().optional(),fontfamily:o.z.string().optional(),pixelsize:o.z.number().optional(),wrap:o.z.boolean().optional(),halign:o.z.union([o.z.literal("left"),o.z.literal("center"),o.z.literal("right"),o.z.literal("justify")]).optional(),valign:o.z.union([o.z.literal("top"),o.z.literal("center"),o.z.literal("bottom")]).optional()}),vt=o.z.object({id:o.z.number().optional(),name:o.z.string().optional(),type:o.z.string().optional(),x:o.z.number().optional(),y:o.z.number().optional(),rotation:o.z.number().optional(),height:o.z.number().optional(),width:o.z.number().optional(),visible:o.z.boolean().optional(),gid:o.z.number().optional(),text:Ct.optional(),point:o.z.boolean().optional(),ellipse:o.z.boolean().optional(),polyline:o.z.array(_t).optional(),polygon:ut.optional(),template:o.z.string().optional(),properties:o.z.array(j).optional()}),xt=o.z.object({duration:o.z.number(),tileid:o.z.number()}),lt=o.z.object({name:o.z.string(),draworder:o.z.string(),type:o.z.literal("objectgroup"),class:o.z.string().optional(),x:o.z.number(),y:o.z.number(),id:o.z.number(),color:o.z.string().optional(),tintcolor:o.z.string().optional(),parallaxx:o.z.number().optional(),parallaxy:o.z.number().optional(),offsetx:o.z.number().optional(),offsety:o.z.number().optional(),opacity:o.z.number(),properties:o.z.array(j).optional(),visible:o.z.boolean(),objects:o.z.array(vt)}),kt=o.z.object({name:o.z.string(),x:o.z.number(),y:o.z.number(),id:o.z.number(),type:o.z.literal("imagelayer"),class:o.z.string().optional(),image:o.z.string().optional(),opacity:o.z.number(),properties:o.z.array(j).optional(),visible:o.z.boolean(),tintcolor:o.z.string().optional(),repeatx:o.z.boolean().optional(),repeaty:o.z.boolean().optional(),parallaxx:o.z.number().optional(),parallaxy:o.z.number().optional(),offsetx:o.z.number().optional(),offsety:o.z.number().optional(),transparentcolor:o.z.string().optional()}),Jt=o.z.union([kt,ft,lt]),Ut=o.z.object({draworder:o.z.string(),id:o.z.number().optional(),name:o.z.string(),x:o.z.number(),y:o.z.number(),opacity:o.z.number(),tintcolor:o.z.string().optional(),type:o.z.literal("objectgroup"),visible:o.z.boolean(),objects:o.z.array(vt),properties:o.z.array(j).optional()}),Ae=o.z.object({id:o.z.number(),type:o.z.string().optional(),animation:o.z.array(xt).optional(),objectgroup:Ut.optional(),probability:o.z.number().optional(),properties:o.z.array(j).optional(),image:o.z.string().optional(),imageheight:o.z.number().optional(),imagewidth:o.z.number().optional()}),Ot=o.z.object({name:o.z.string(),firstgid:o.z.number().optional(),class:o.z.string().optional(),objectalignment:o.z.union([o.z.literal("topleft"),o.z.literal("top"),o.z.literal("topright"),o.z.literal("left"),o.z.literal("center"),o.z.literal("right"),o.z.literal("bottomleft"),o.z.literal("bottom"),o.z.literal("bottomright")]).optional(),image:o.z.string().optional(),imagewidth:o.z.number().optional(),imageheight:o.z.number().optional(),columns:o.z.number(),tileheight:o.z.number(),tilewidth:o.z.number(),tilecount:o.z.number(),grid:o.z.object({height:o.z.number(),width:o.z.number(),orientation:o.z.union([o.z.literal("isometric"),o.z.literal("orthogonal")])}).optional(),tileoffset:_t.optional(),spacing:o.z.number(),margin:o.z.number(),tiles:o.z.array(Ae).optional(),properties:o.z.array(j).optional()});function $t(re){return!!re.image}function Zt(re){return!re.image}const Yt=Ot.extend({tiledversion:o.z.string().optional(),type:o.z.literal("tileset"),version:o.z.string().optional()}),Ve=o.z.object({firstgid:o.z.number(),source:o.z.string()}),xe=o.z.union([Ot,Ve]),Ee=o.z.object({object:vt.extend({id:o.z.number().optional()}),tileset:Ve.optional(),type:o.z.literal("template")}),Qe=o.z.object({type:o.z.string(),class:o.z.string().optional(),tiledversion:o.z.string(),version:o.z.string(),width:o.z.number(),height:o.z.number(),tilewidth:o.z.number(),tileheight:o.z.number(),compressionlevel:o.z.number().optional(),infinite:o.z.boolean(),nextlayerid:o.z.number(),nextobjectid:o.z.number(),parallaxoriginx:o.z.number().optional(),parallaxoriginy:o.z.number().optional(),hexsidelength:o.z.number().optional(),staggeraxis:o.z.literal("y").or(o.z.literal("x")).optional(),staggerindex:o.z.literal("odd").or(o.z.literal("even")).optional(),orientation:o.z.union([o.z.literal("isometric"),o.z.literal("orthogonal"),o.z.literal("staggered"),o.z.literal("hexagonal")]),renderorder:o.z.union([o.z.literal("right-down"),o.z.literal("right-up"),o.z.literal("left-down"),o.z.literal("left-up")]),backgroundcolor:o.z.string().optional(),layers:o.z.array(Jt),tilesets:o.z.array(xe),properties:o.z.array(j).optional()});function Bt(re){return!!re.chunks}function ot(re){return!re.source}function It(re){return!!re.source}class Nt{constructor(Wt,Vt,Tt,qt){this.x=Wt,this.y=Vt,this.width=Tt,this.height=qt}combine(Wt){const Vt=this.x+this.width,Tt=this.y+this.height,qt=Wt.x+Wt.width,Gt=Wt.y+Wt.height,se=Math.max(Vt,qt),te=Math.max(Tt,Gt);return new Nt(Math.min(this.x,Wt.x),Math.min(this.y,Wt.y),se-Math.min(this.x,Wt.x),te-Math.min(this.y,Wt.y))}}class yt{constructor(){this._largestBounds=new Nt(0,0,0,0)}_coerceNumber(Wt){return+Wt}_coerceBoolean(Wt){switch(Wt){case"0":case"false":return!1;case"true":return!0;default:return!!Wt}}_coerceType(Wt,Vt){return Wt==="bool"?this._coerceBoolean(Vt):Wt==="int"||Wt==="float"||Wt==="object"?this._coerceNumber(Vt):Vt}_parsePropertiesNode(Wt,Vt){var Tt;const qt=[];if(Wt)for(let Gt of Wt.children){const se=(Tt=Gt.getAttribute("type"))!==null&&Tt!==void 0?Tt:"string";let te=Gt.getAttribute("value");te||(te=Gt.innerHTML),qt.push({name:Gt.getAttribute("name"),type:se,value:this._coerceType(se,te)})}Vt.properties=qt}_parseAttributes(Wt,Vt){const Tt=["width","height","columns","firstgid","spacing","margin","tilecount","tilewidth","tileheight","opacity","compressionlevel","nextlayerid","nextobjectid","parallaxoriginx","parallaxoriginy","parallaxx","parallaxy","hexsidelength","offsetx","offsety","id","gid","x","y","rotation","probability"],qt=["infinite","visible","repeatx","repeaty"];for(let Gt of Wt.attributes)Tt.indexOf(Gt.name)>-1?Vt[Gt.name]=this._coerceNumber(Gt.value):qt.indexOf(Gt.name)>-1?Vt[Gt.name]=this._coerceBoolean(Gt.value):Vt[Gt.name]=Gt.value}_parseToDocument(Wt){if(typeof DOMParser<"u")return new DOMParser().parseFromString(Wt,"application/xml");try{const{JSDOM:Tt}=d("jsdom");return new Tt(Wt,{contentType:"application/xml",encoding:"utf-8"}).window.document}catch{}const Vt=new Error("Could not find DOM parser");throw console.error(Vt.message,Vt),Vt}parseObject(Wt,Vt=!0){var Tt,qt;const Gt={type:"",x:0,y:0};Wt.getAttribute("template")||(Gt.visible=!0,Gt.name="",Gt.rotation=0,Gt.height=0,Gt.width=0),this._parseAttributes(Wt,Gt);const se=Wt.querySelector("properties");se&&this._parsePropertiesNode(se,Gt);const te=Wt.querySelector("text");if(te){Gt.text={text:te.textContent};const Ie=te.getAttribute("fontfamily");Ie&&(Gt.text.fontfamily=Ie);const gi=te.getAttribute("color");gi&&(Gt.text.color=gi);const Ei=te.getAttribute("pixelsize");Ei&&(Gt.text.pixelsize=this._coerceNumber(Ei));const li=te.getAttribute("wrap");li&&(Gt.text.wrap=this._coerceBoolean(li));const yi=te.getAttribute("valign");yi&&(Gt.text.valign=yi);const ci=te.getAttribute("halign");ci&&(Gt.text.halign=ci)}Wt.querySelector("point")&&(Gt.point=!0),Wt.querySelector("ellipse")&&(Gt.ellipse=!0);const ge=Wt.querySelector("polygon");if(ge){const Ie=(Tt=ge.getAttribute("points"))===null||Tt===void 0?void 0:Tt.split(" ");Gt.polygon=[],Ie&&Ie.forEach(gi=>{const Ei=gi.split(",");Gt.polygon.push({x:+Ei[0],y:+Ei[1]})})}const Me=Wt.querySelector("polyline");if(Me){const Ie=(qt=Me.getAttribute("points"))===null||qt===void 0?void 0:qt.split(" ");Gt.polyline=[],Ie&&Ie.forEach(gi=>{const Ei=gi.split(",");Gt.polyline.push({x:+Ei[0],y:+Ei[1]})})}if(Vt)try{return vt.parse(Gt)}catch(Ie){throw console.error("Could not parse object",Gt,Ie),Ie}return Gt}parseTileset(Wt,Vt=!0){const Tt={spacing:0,margin:0};if(this._parseAttributes(Wt,Tt),Tt.source)try{return xe.parse(Tt)}catch(qt){console.error("Could not parse external tileset",Tt,qt)}for(let qt of Wt.children)switch(qt.tagName){case"properties":this._parsePropertiesNode(qt,Tt);break;case"tileoffset":{const Gt={};this._parseAttributes(qt,Gt),Tt.tileoffset=Gt;break}case"grid":{const Gt={};this._parseAttributes(qt,Gt),Tt.grid=Gt;break}case"image":Tt.image=qt.getAttribute("source"),Tt.imagewidth=this._coerceNumber(qt.getAttribute("width")),Tt.imageheight=this._coerceNumber(qt.getAttribute("height"));break;case"tile":{Tt.tiles||(Tt.tiles=[]);const Gt={};this._parseAttributes(qt,Gt);for(let se of qt.children)switch(se.tagName){case"image":Gt.image=se.getAttribute("source"),Gt.imagewidth=this._coerceNumber(se.getAttribute("width")),Gt.imageheight=this._coerceNumber(se.getAttribute("height"));break;case"objectgroup":{const te={type:"objectgroup",name:"",visible:!0,x:0,y:0,opacity:1,objects:[]};this._parseAttributes(se,te),Gt.objectgroup=te;for(let ge of se.children){const Me=this.parseObject(ge,Vt);te.objects.push(Me)}break}case"animation":{const te=[];for(let ge of se.children)te.push({duration:this._coerceNumber(ge.getAttribute("duration")),tileid:this._coerceNumber(ge.getAttribute("tileid"))});Gt.animation=te;break}case"properties":this._parsePropertiesNode(se,Gt)}if(Vt)try{Tt.tiles.push(Ae.parse(Gt))}catch(se){throw console.error("Could not parse Tile",Gt,se),se}else Tt.tiles.push(Gt);break}}if(Vt)try{return xe.parse(Tt)}catch(qt){throw console.error("Could not parse Tileset",Tt,qt),qt}return Tt}parseTileLayer(Wt,Vt,Tt=!0){var qt,Gt,se;const te={type:"tilelayer",compression:"",x:0,y:0,opacity:1,visible:!0};this._parseAttributes(Wt,te);for(let ge of Wt.children)switch(ge.tagName){case"properties":this._parsePropertiesNode(ge,te);break;case"data":if(Vt){te.width=0,te.height=0,te.chunks=[];let Me=new Nt(0,0,0,0);for(let Ie of ge.children)if(Ie.tagName==="chunk"){const gi={};this._parseAttributes(Ie,gi),gi.data=(qt=Ie.textContent)===null||qt===void 0?void 0:qt.split(",").map(li=>+li);const Ei=new Nt(gi.x,gi.y,gi.width,gi.height);Me=Me.combine(Ei),te.chunks.push(gi)}te.width=Me.width,te.height=Me.height,te.startx=Me.x,te.starty=Me.y,this._largestBounds=this._largestBounds.combine(new Nt(te.startx,te.starty,te.width,te.height))}else{const Me=ge.getAttribute("encoding");te.encoding=Me;const Ie=ge.getAttribute("compression");switch(Ie&&(te.compression=Ie),te.encoding){case"base64":te.data=(Gt=ge.textContent)===null||Gt===void 0?void 0:Gt.trim();break;case"csv":te.data=(se=ge.textContent)===null||se===void 0?void 0:se.split(",").map(gi=>+gi)}}}if(Tt)try{return Jt.parse(te)}catch(ge){throw console.error("Could not parse tiled tile layer",te,ge),ge}return te}parseObjectGroup(Wt,Vt=!0){const Tt={type:"objectgroup",draworder:"topdown",visible:!0,x:0,y:0,opacity:1,objects:[]};this._parseAttributes(Wt,Tt);for(let qt of Wt.children)switch(qt.tagName){case"properties":this._parsePropertiesNode(qt,Tt);break;case"object":{const Gt=this.parseObject(qt,Vt);Tt.objects.push(Gt);break}}if(Vt)try{return Jt.parse(Tt)}catch(qt){throw console.error("Could not parse object group",Tt,qt),qt}return Tt}parseImageLayer(Wt,Vt=!0){const Tt={type:"imagelayer",visible:!0,x:0,y:0,opacity:1},qt=Wt.querySelector("image");Tt.image=qt?.getAttribute("source");const Gt=Wt.querySelector("properties");Gt&&this._parsePropertiesNode(Gt,Tt);const se=qt?.getAttribute("trans");if(se&&(Tt.transparentcolor="#"+se),this._parseAttributes(Wt,Tt),Vt)try{return Jt.parse(Tt)}catch(te){throw console.error("Could not parse layer",Tt,te),te}return Tt}parseExternalTemplate(Wt,Vt=!0){const Tt=this._parseToDocument(Wt).querySelector("template"),qt={type:"template"},Gt=Tt.querySelector("object");Gt&&(qt.object=this.parseObject(Gt,Vt));const se=Tt.querySelector("tileset");if(se&&(qt.tileset=this.parseTileset(se,Vt)),Vt)try{return Ee.parse(qt)}catch(te){throw console.error("Could not parse template",qt,te),te}return qt}parseExternalTileset(Wt,Vt=!0){const Tt=this._parseToDocument(Wt).querySelector("tileset"),qt=this.parseTileset(Tt,Vt);if(qt.type="tileset",this._parseAttributes(Tt,qt),Vt)try{return Yt.parse(qt)}catch(Gt){throw console.error("Could not parse tileset file",qt,Gt),Gt}return qt}parse(Wt,Vt=!0){const Tt=this._parseToDocument(Wt).querySelector("map"),qt={type:"map",compressionlevel:-1,layers:[],tilesets:[]};this._parseAttributes(Tt,qt);const Gt=(se,te=!0)=>{switch(se.tagName){case"group":for(let ge of se.children)Gt(ge,te);break;case"layer":{const ge=this.parseTileLayer(se,qt.infinite,te);qt.layers.push(ge);break}case"properties":this._parsePropertiesNode(se,qt);break;case"tileset":{const ge=this.parseTileset(se,te);qt.tilesets.push(ge);break}case"objectgroup":{const ge=this.parseObjectGroup(se,te);qt.layers.push(ge);break}case"imagelayer":{const ge=this.parseImageLayer(se,te);qt.layers.push(ge);break}}};for(let se of Tt.children)Gt(se,Vt);if(Vt)try{return Qe.parse(qt)}catch(se){throw console.error("Could not parse Tiled map",se),se}return qt}}},"./src/resource/decoder.ts":(N,l,d)=>{d.r(l),d.d(l,{Decoder:()=>L});var o=d("./node_modules/pako/index.js"),T=d("./node_modules/zstddec/dist/zstddec.modern.js");class L{static decode(P,q){var C,Z,j,dt,Y,W;if(P.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=43,O=47,X=48,ht=97,pt=65,ft=45,$=95;function At(vt){var xt=vt.charCodeAt(0);if(xt===u||xt===ft)return 62;if(xt===O||xt===$)return 63;if(xt<X)return-1;if(xt<X+10)return xt-X+26+26;if(xt<pt+26)return xt-pt;if(xt<ht+26)return xt-ht+26;throw Error("Could not decode elt")}var _t=P.length;Y=P.charAt(_t-2)==="="?2:P.charAt(_t-1)==="="?1:0,W=new Uint8Array(3*P.length/4-Y),j=Y>0?P.length-4:P.length;var ut=0;function Ct(vt){W[ut++]=vt}for(C=0,Z=0;C<j;C+=4,Z+=3)Ct((16711680&(dt=At(P.charAt(C))<<18|At(P.charAt(C+1))<<12|At(P.charAt(C+2))<<6|At(P.charAt(C+3))))>>16),Ct((65280&dt)>>8),Ct(255&dt);return Y===2?Ct(255&(dt=At(P.charAt(C))<<2|At(P.charAt(C+1))>>4)):Y===1&&(Ct((dt=At(P.charAt(C))<<10|At(P.charAt(C+1))<<4|At(P.charAt(C+2))>>2)>>8&255),Ct(255&dt)),new Promise(vt=>{const xt=function(Jt){for(var Ut=0,Ae=Jt.length-1;Ae>=0;Ae--)Ut=256*Ut+1*Jt[Ae];return Ut};if(q==="zlib"||q==="gzip"){var lt=(W=(0,o.inflate)(W)).length/4,kt=new Array(lt);for(C=0;C<lt;C++)kt[C]=xt(W.slice(4*C,4*C+4));vt(kt)}if(q==="zstd"){const Jt=new T.ZSTDDecoder;Jt.init().then(()=>{var Ut=(W=Jt.decode(W)).length/4,Ae=new Array(Ut);for(C=0;C<Ut;C++)Ae[C]=xt(W.slice(4*C,4*C+4));vt(Ae)})}if(!q){for(lt=W.length/4,kt=new Array(lt),C=0;C<lt;C++)kt[C]=xt(W.slice(4*C,4*C+4));vt(kt)}})}}},"./src/resource/excalibur-properties.ts":(N,l,d)=>{d.r(l),d.d(l,{ExcaliburTiledProperties:()=>o});const o={TileData:{Tiled:"ex-tiled"},ZIndex:{ZIndex:"zindex"},Camera:{Camera:"camera",Zoom:"zoom"},Animation:{Strategy:"animationstrategy"},Layer:{Solid:"solid"},Collision:{Type:"collisiontype"}}},"./src/resource/file-loader.ts":(N,l,d)=>{d.r(l),d.d(l,{FetchLoader:()=>o});const o=async(T,L)=>{const Q=await fetch(T);switch(L.toLowerCase()){case"xml":default:return await Q.text();case"json":return await Q.json()}}},"./src/resource/filter-util.ts":(N,l,d)=>{d.r(l),d.d(l,{byClassCaseInsensitive:()=>T,byNameCaseInsensitive:()=>o,byPropertyCaseInsensitive:()=>L});const o=Q=>P=>P?.name&&Q?P.name.toLocaleLowerCase().localeCompare(Q.toLocaleLowerCase())===0:P?.name===Q,T=Q=>P=>P?.class&&Q?P.class.toLocaleLowerCase().localeCompare(Q.toLocaleLowerCase())===0:P?.class===Q,L=(Q,P)=>q=>{const C=(Z=>{const j=new Map;for(let[dt,Y]of Z){let W=Y;typeof Y=="string"&&(W=Y.toLocaleLowerCase()),j.set(dt.toLocaleLowerCase(),W)}return j})(q.properties);if(P!==void 0){let Z=P;return typeof P=="string"&&(Z=P.toLocaleLowerCase()),C.get(Q.toLocaleLowerCase())===Z}return C.has(Q.toLocaleLowerCase())}},"./src/resource/gid-util.ts":(N,l,d)=>{d.r(l),d.d(l,{FLIPPED_DIAGONALLY_FLAG:()=>L,FLIPPED_HORIZONTALLY_FLAG:()=>o,FLIPPED_VERTICALLY_FLAG:()=>T,getCanonicalGid:()=>C,isFlippedDiagonally:()=>q,isFlippedHorizontally:()=>Q,isFlippedVertically:()=>P});const o=2147483648,T=1073741824,L=536870912,Q=Z=>!!(Z&o),P=Z=>!!(Z&T),q=Z=>!!(Z&L),C=Z=>Z&~(o|T|L)},"./src/resource/image-layer.ts":(N,l,d)=>{d.r(l),d.d(l,{ImageLayer:()=>Q});var o=d("excalibur"),T=d("./src/resource/properties.ts"),L=d("./src/resource/path-util.ts");class Q{constructor(q,C,Z){this.tiledImageLayer=q,this.resource=C,this.order=Z,this.properties=new Map,this.image=null,this.imageActor=null,this.name=q.name,this.class=q.class,(0,T.mapProps)(this,q.properties),q.image&&(this.image=new o.ImageSource((0,L.pathRelativeToBase)(this.resource.path,q.image,this.resource.pathMap)))}async load(){var q,C,Z,j;const dt=this.tiledImageLayer.opacity,Y=!!this.tiledImageLayer.tintcolor,W=this.tiledImageLayer.tintcolor?o.Color.fromHex(this.tiledImageLayer.tintcolor):o.Color.White,u=(0,o.vec)((q=this.tiledImageLayer.offsetx)!==null&&q!==void 0?q:0,(C=this.tiledImageLayer.offsety)!==null&&C!==void 0?C:0),O=(Z=this.tiledImageLayer.parallaxx)!==null&&Z!==void 0?Z:1,X=(j=this.tiledImageLayer.parallaxy)!==null&&j!==void 0?j:1;if(this.image){this.resource.headless||await this.image.load(),this.imageActor=new o.Actor({name:this.tiledImageLayer.name,pos:u,anchor:o.Vector.Zero,z:this.order}),this.imageActor.addComponent(new o.ParallaxComponent((0,o.vec)(O,X)));const ht=this.image.toSprite();this.imageActor.graphics.use(ht),this.imageActor.graphics.visible=this.tiledImageLayer.visible,this.imageActor.graphics.opacity=dt,Y&&(ht.tint=W)}}}},"./src/resource/iso-tile-layer.ts":(N,l,d)=>{d.r(l),d.d(l,{IsoTileLayer:()=>j});var o=d("excalibur"),T=d("./src/resource/properties.ts"),L=d("./src/parser/tiled-parser.ts"),Q=d("./src/resource/decoder.ts"),P=d("./src/resource/gid-util.ts"),q=d("./src/resource/excalibur-properties.ts"),C=d("./src/resource/tiled-layer-component.ts"),Z=d("./src/resource/filter-util.ts");class j{constructor(Y,W,u){this.tiledTileLayer=Y,this.resource=W,this.order=u,this.logger=o.Logger.getInstance(),this.width=0,this.height=0,this.properties=new Map,this.data=[],this._gidToTileInfo=new Map,this.name=Y.name,this.class=Y.class,this.width=Y.width,this.height=Y.height,(0,T.mapProps)(this,Y.properties)}getTilesByGid(Y){var W;return(W=this._gidToTileInfo.get(Y))!==null&&W!==void 0?W:[]}getTilesByClassName(Y){return this.isometricMap.tiles.filter(W=>{const u=W.data.get(q.ExcaliburTiledProperties.TileData.Tiled);return!!u&&(0,Z.byClassCaseInsensitive)(Y)(u)}).map(W=>({exTile:W,tiledTile:W.data.get(q.ExcaliburTiledProperties.TileData.Tiled)}))}getTilesByProperty(Y,W){return this.isometricMap.tiles.filter(u=>{const O=u.data.get(q.ExcaliburTiledProperties.TileData.Tiled);return!!O&&(0,Z.byPropertyCaseInsensitive)(Y,W)(O)}).map(u=>({exTile:u,tiledTile:u.data.get(q.ExcaliburTiledProperties.TileData.Tiled)}))}getTileByPoint(Y){if(!this.isometricMap)return this.logger.warn("IsometricMap has not yet been loaded! getTileByPoint() will only return null"),null;if(this.isometricMap){const W=this.isometricMap.getTileByPoint(Y);if(!W)return null;const u=this.isometricMap.tiles.indexOf(W),O=(0,P.getCanonicalGid)(this.data[u]);return O<=0?null:{tiledTile:this.resource.getTilesetForTileGid(O).getTileByGid(O),exTile:W}}return null}_recordTileData(Y,W){let u=this._gidToTileInfo.get(Y),O=this.resource.getTilesetForTileGid(Y).getTileByGid(Y);u?u.push({exTile:W,tiledTile:O}):u=[{exTile:W,tiledTile:O}],this._gidToTileInfo.set(Y,u),W.data.set(q.ExcaliburTiledProperties.TileData.Tiled,O)}updateTile(Y,W,u,O,X){this._recordTileData(W,Y),this.resource.useExcaliburWiring&&X&&(Y.solid=!0);const ht=Y.get(o.IsometricEntityComponent);ht&&(ht.elevation=this.order);const pt=this.resource.getTilesetForTileGid(W);let ft=pt.getSpriteForGid(W);u&&(ft=ft.clone(),ft.tint=O),Y.addGraphic(ft,{offset:pt.tileOffset});let $=Y.pos;if(pt.orientation==="orthogonal")$=(0,o.vec)(0,0);else{const ut=this.resource.map.tilewidth/2,Ct=this.resource.map.tileheight;$=(0,o.vec)(ut,Ct)}const At=pt.getCollidersForGid(W,{offset:$});for(let ut of At)Y.addCollider(ut);let _t=pt.getAnimationForGid(W);if(_t&&(u&&(_t=_t.clone(),_t.tint=O),Y.clearGraphics(),Y.addGraphic(_t,{offset:pt.tileOffset}),this.resource.useExcaliburWiring)){const ut=pt.getTileByGid(W),Ct=ut?.properties.get(q.ExcaliburTiledProperties.Animation.Strategy);if(Ct&&typeof Ct=="string")switch(Ct.toLowerCase()){case o.AnimationStrategy.End.toLowerCase():_t.strategy=o.AnimationStrategy.End;break;case o.AnimationStrategy.Freeze.toLowerCase():_t.strategy=o.AnimationStrategy.Freeze;break;case o.AnimationStrategy.Loop.toLowerCase():_t.strategy=o.AnimationStrategy.Loop;break;case o.AnimationStrategy.PingPong.toLowerCase():_t.strategy=o.AnimationStrategy.PingPong;break;default:this.logger.warn(`Unknown animation strategy in tileset ${pt.name} on tile gid ${W}: ${Ct}`)}}}async load(){var Y,W,u,O;const X=this.tiledTileLayer,ht=!!this.properties.get(q.ExcaliburTiledProperties.Layer.Solid),pt=(this.tiledTileLayer.opacity,!!this.tiledTileLayer.tintcolor),ft=this.tiledTileLayer.tintcolor?o.Color.fromHex(this.tiledTileLayer.tintcolor):o.Color.Transparent,$=(0,o.vec)((Y=X.offsetx)!==null&&Y!==void 0?Y:0,(W=X.offsety)!==null&&W!==void 0?W:0);(0,L.needsDecoding)(this.tiledTileLayer)?this.data=await Q.Decoder.decode(this.tiledTileLayer.data,this.tiledTileLayer.compression):(0,L.isCSV)(this.tiledTileLayer)&&(this.data=this.tiledTileLayer.data);let At=this.order,_t=this.properties.get(q.ExcaliburTiledProperties.ZIndex.ZIndex);if(typeof _t=="number"&&(At=_t),this.resource.map.infinite&&(0,L.isInfiniteLayer)(this.tiledTileLayer)){const ut=this.resource.isometricTiledCoordToWorld(this.tiledTileLayer.startx,this.tiledTileLayer.starty),Ct=(0,o.vec)(ut.x*this.resource.map.tilewidth,ut.y*this.resource.map.tileheight);this.isometricMap=new o.IsometricMap({name:this.name,pos:$.add(Ct),tileHeight:this.resource.map.tileheight,tileWidth:this.resource.map.tilewidth,columns:X.width,rows:X.height,elevation:At})}else this.isometricMap=new o.IsometricMap({name:this.name,pos:$,tileWidth:this.resource.map.tilewidth,tileHeight:this.resource.map.tileheight,columns:X.width,rows:X.height,elevation:At});if(this.isometricMap.visible=this.tiledTileLayer.visible,this.isometricMap.opacity=this.tiledTileLayer.opacity,this.isometricMap.addComponent(new C.TiledLayerDataComponent({tiledTileLayer:X})),X.parallaxx||X.parallaxy){const ut=(0,o.vec)((u=X.parallaxx)!==null&&u!==void 0?u:1,(O=X.parallaxy)!==null&&O!==void 0?O:1);this.isometricMap.addComponent(new o.ParallaxComponent(ut))}if(this.resource.map.infinite&&(0,L.isInfiniteLayer)(this.tiledTileLayer))for(let ut of this.tiledTileLayer.chunks)for(let Ct=0;Ct<ut.data.length;Ct++){const vt=ut.data[Ct];if(vt!=0){const xt=Ct%ut.width+(ut.x-this.tiledTileLayer.startx),lt=Math.floor(Ct/ut.width)+(ut.y-this.tiledTileLayer.starty),kt=this.isometricMap.tiles[xt+lt*X.width];this.updateTile(kt,vt,pt,ft,ht)}}else for(let ut=0;ut<this.data.length;ut++){let Ct=this.data[ut];if(Ct!==0){const vt=this.isometricMap.tiles[ut];this.updateTile(vt,Ct,pt,ft,ht)}}}}},"./src/resource/layer.ts":(N,l,d)=>{d.r(l)},"./src/resource/loader-cache.ts":(N,l,d)=>{d.r(l),d.d(l,{LoaderCache:()=>o});class o{constructor(L){this.type=L,this._loaded=!1,this.cache=new Map}getOrAdd(...L){let Q=this.cache.get(L.join("+"));return Q||(Q=new this.type(...L),this.cache.set(L.join("+"),Q),Q)}values(){if(this._loaded)return Array.from(this.cache.values());throw new Error("Read through cache not yet loaded! No values to return!")}async load(){const L=Array.from(this.cache.entries()),Q=await Promise.allSettled(L.map(q=>q[1].load()));let P=0;for(let q=0;q<Q.length;q++){const C=Q[q];C.status==="rejected"&&(console.error(`Error loading resource at ${L[q][0]}, is your pathMap correct? or your Tiled map corrupted?`,C.reason),P++)}if(P)throw new Error(`Error loading ${P} resources`);this._loaded=!0}}},"./src/resource/object-layer.ts":(N,l,d)=>{d.r(l),d.d(l,{ObjectLayer:()=>C});var o=d("excalibur"),T=d("./src/resource/objects.ts"),L=d("./src/resource/properties.ts"),Q=d("./src/resource/filter-util.ts"),P=d("./src/resource/excalibur-properties.ts"),q=d("./src/resource/tiled-data-component.ts");class C{constructor(j,dt,Y){this.tiledObjectLayer=j,this.resource=dt,this.order=Y,this.logger=o.Logger.getInstance(),this.properties=new Map,this.objects=[],this.entities=[],this._objectToEntity=new Map,this._entityToObject=new Map,this._loaded=!1,this.name=j.name,this.class=j.class,(0,L.mapProps)(this,j.properties)}_logLoadedWarning(j){this.logger.warn(`ObjectLayer ${this.name} is not yet loaded, ${j}() will always be empty!`)}getObjectsByName(j){return this._loaded||this._logLoadedWarning("getObjectsByName"),this.objects.filter((0,Q.byNameCaseInsensitive)(j))}getEntitiesByName(j){return this._loaded||this._logLoadedWarning("getEntitiesByName"),this.entities.filter((0,Q.byNameCaseInsensitive)(j))}getEntityByObject(j){return this._loaded||this._logLoadedWarning("getEntityByObject"),this._objectToEntity.get(j)}getObjectByEntity(j){return this._loaded||this._logLoadedWarning("getObjectByEntity"),this._entityToObject.get(j)}getObjectsByProperty(j,dt){return this._loaded||this._logLoadedWarning("getObjectsByProperty"),this.objects.filter((0,Q.byPropertyCaseInsensitive)(j,dt))}getEntitiesByProperty(j,dt){return this._loaded||this._logLoadedWarning("getEntitiesByProperty"),this.getObjectsByProperty(j,dt).map(Y=>this._objectToEntity.get(Y)).filter(Y=>!!Y)}getObjectsByClassName(j){return this._loaded||this._logLoadedWarning("getObjectsByClassName"),this.objects.filter((0,Q.byClassCaseInsensitive)(j))}getEntitiesByClassName(j){return this._loaded||this._logLoadedWarning("getEntitiesByClassName"),this.getObjectsByClassName(j).map(dt=>this._objectToEntity.get(dt)).filter(dt=>!!dt)}getTemplates(){return this._loaded||this._logLoadedWarning("getTemplates"),this.objects.filter(j=>j instanceof T.TemplateObject)}runFactory(j){var dt,Y,W,u;const O=(0,o.vec)((dt=this.tiledObjectLayer.offsetx)!==null&&dt!==void 0?dt:0,(Y=this.tiledObjectLayer.offsety)!==null&&Y!==void 0?Y:0),X=this.objects.slice();for(let ht of X){let pt=ht.class;if(ht instanceof T.TemplateObject&&(pt=pt||ht.template.object.class),j!==pt)continue;let ft=(0,o.vec)(((W=ht.x)!==null&&W!==void 0?W:0)+O.x,((u=ht.y)!==null&&u!==void 0?u:0)+O.y);this.resource.map.orientation==="isometric"&&(ft=this.resource.isometricTiledCoordToWorld(ft.x,ft.y));const $=this.resource.factories.get(j);if($){const At=$({worldPos:ft,name:ht.name,class:pt,layer:this,object:ht,properties:ht.properties});At&&this._recordObjectEntityMapping(ht,At)}}}_actorFromObject(j,dt,Y){var W,u,O,X,ht,pt;const ft=this.resource.headless,$=!!this.tiledObjectLayer.tintcolor,At=this.tiledObjectLayer.tintcolor?o.Color.fromHex(this.tiledObjectLayer.tintcolor):o.Color.White;if(j instanceof T.InsertedTile&&Y){const _t=this.resource.map.orientation==="isometric"&&Y.orientation==="orthogonal"?"bottom":void 0,ut=Y.getTilesetAlignmentAnchor(_t);dt.anchor=ut;const Ct=((W=j.tiledObject.width)!==null&&W!==void 0?W:this.resource.map.tilewidth)/this.resource.map.tilewidth,vt=((u=j.tiledObject.width)!==null&&u!==void 0?u:this.resource.map.tilewidth)/this.resource.map.tilewidth,xt=(0,o.vec)(Ct,vt);if(!ft){const Yt=Y.getSpriteForGid(j.gid).clone();Yt.destSize.width=(O=j.tiledObject.width)!==null&&O!==void 0?O:Yt.width,Yt.destSize.height=(X=j.tiledObject.height)!==null&&X!==void 0?X:Yt.height,$&&(Yt.tint=At),dt.graphics.use(Yt),dt.graphics.offset=Y.tileOffset;const Ve=Y.getAnimationForGid(j.gid);if(Ve){const xe=Ve.clone();xe.scale=xt,$&&(xe.tint=At),dt.graphics.use(xe),dt.graphics.offset=Y.tileOffset}}const lt=(ht=j.tiledObject.width)!==null&&ht!==void 0?ht:0,kt=(pt=j.tiledObject.height)!==null&&pt!==void 0?pt:0,Jt=-lt*ut.x,Ut=-kt*ut.y,Ae=this.resource.map.tilewidth/2,Ot=this.resource.map.tileheight;let $t=(0,o.vec)(Jt,Ut);this.resource.map.orientation==="isometric"&&($t=(0,o.vec)(Jt+Ae,Ut+Ot),Y.orientation==="orthogonal"&&($t=$t.sub((0,o.vec)(Ae,Ot))));const Zt=Y.getCollidersForGid(j.gid,{anchor:o.Vector.Zero,scale:xt,offset:$t});if(Zt.length)dt.collider.useCompositeCollider(Zt);else{let Yt=j.width,Ve=j.height;if(this.resource.map.orientation==="isometric"){const Ee=j.height/2;Yt=Ee,Ve=Ee}let xe=o.Shape.Box(Yt,Ve,this.resource.map.orientation==="isometric"?(0,o.vec)(1,1):(0,o.vec)(0,1));this.resource.map.orientation==="isometric"&&(xe.points=xe.points.map(Ee=>this.resource.isometricTiledCoordToWorld(Ee.x,Ee.y))),dt.collider.set(xe)}}if(j instanceof T.Text&&dt.graphics.use(j.text),j instanceof T.Polygon){let _t=(0,o.vec)(j.x,j.y),ut=j.localPoints;this.resource.map.orientation==="isometric"&&(_t=this.resource.isometricTiledCoordToWorld(_t.x,_t.y),ut=ut.map(vt=>this.resource.isometricTiledCoordToWorld(vt.x,vt.y))),dt.anchor=(0,o.vec)(0,1),dt.pos=_t;const Ct=o.Shape.Polygon(ut,o.Vector.Zero,!0);Ct.isConvex()?dt.collider.set(Ct):dt.collider.set(Ct.triangulate())}if(j instanceof T.Rectangle){dt.anchor=j.anchor;let _t=o.Shape.Box(j.width,j.height,j.anchor);this.resource.map.orientation==="isometric"&&(_t.points=_t.points.map(ut=>this.resource.isometricTiledCoordToWorld(ut.x,ut.y))),dt.collider.set(_t)}j instanceof T.Ellipse&&dt.collider.useCircleCollider(Math.min(j.width,j.height)/2)}async load(){var j,dt,Y,W,u;const O=this.tiledObjectLayer.opacity,X=(0,o.vec)((j=this.tiledObjectLayer.offsetx)!==null&&j!==void 0?j:0,(dt=this.tiledObjectLayer.offsety)!==null&&dt!==void 0?dt:0),ht=(0,T.parseObjects)(this.tiledObjectLayer,this.resource);for(let pt of ht){let ft=(0,o.vec)(((Y=pt.x)!==null&&Y!==void 0?Y:0)+X.x,((W=pt.y)!==null&&W!==void 0?W:0)+X.y);this.resource.map.orientation==="isometric"&&(ft=this.resource.isometricTiledCoordToWorld(ft.x,ft.y));let $,At=pt.class;if(pt instanceof T.TemplateObject&&(At=At||pt.template.object.class),At){const vt=this.resource.factories.get(At);if(vt){const xt=vt({worldPos:ft,name:pt.name,class:At,layer:this,object:pt,properties:pt.properties});xt&&this._recordObjectEntityMapping(pt,xt);continue}}let _t=this.properties.get(P.ExcaliburTiledProperties.ZIndex.ZIndex);typeof _t=="number"&&($=_t);const ut=new o.Actor({name:pt.tiledObject.name,pos:ft,anchor:o.Vector.Zero,rotation:(0,o.toRadians)((u=pt.tiledObject.rotation)!==null&&u!==void 0?u:0),z:$}),Ct=ut.get(o.GraphicsComponent);if(Ct&&(Ct.visible=this.tiledObjectLayer.visible&&(pt.tiledObject.visible===void 0||!!pt.tiledObject.visible),Ct.opacity=O),this.resource.map.orientation==="isometric"){const vt=new o.IsometricEntityComponent({rows:this.resource.map.height,columns:this.resource.map.width,tileWidth:this.resource.map.tilewidth,tileHeight:this.resource.map.tileheight});vt.elevation=$??this.order,ut.addComponent(vt)}if(this.resource.useExcaliburWiring){const vt=pt.properties.get(P.ExcaliburTiledProperties.Collision.Type);if(vt&&typeof vt=="string")switch(vt.toLowerCase()){case o.CollisionType.Active.toLowerCase():ut.body.collisionType=o.CollisionType.Active;break;case o.CollisionType.Fixed.toLowerCase():ut.body.collisionType=o.CollisionType.Fixed;break;case o.CollisionType.Passive.toLowerCase():ut.body.collisionType=o.CollisionType.Passive;break;case o.CollisionType.PreventCollision.toLowerCase():ut.body.collisionType=o.CollisionType.PreventCollision;break;default:this.logger.warn(`Unknown collision type in layer ${this.name}, for object id ${pt.id} and name ${pt.name}: ${vt}`)}}if(pt instanceof T.TemplateObject){const vt=pt.template.tileset;pt.template.object&&this._actorFromObject(pt.template.object,ut,vt)}else{let vt;pt instanceof T.InsertedTile&&(vt=this.resource.getTilesetForTileGid(pt.gid)),this._actorFromObject(pt,ut,vt)}this._recordObjectEntityMapping(pt,ut)}this._loaded=!0}_recordObjectEntityMapping(j,dt){dt.addComponent(new q.TiledDataComponent({tiledObject:j})),this.objects.push(j),this.entities.push(dt),this._objectToEntity.set(j,dt),this._entityToObject.set(dt,j)}}},"./src/resource/objects.ts":(N,l,d)=>{d.r(l),d.d(l,{Ellipse:()=>j,InsertedTile:()=>q,PluginObject:()=>Q,Point:()=>C,Polygon:()=>Y,Polyline:()=>W,Rectangle:()=>dt,TemplateObject:()=>P,Text:()=>Z,parseObject:()=>u,parseObjects:()=>O});var o=d("excalibur"),T=d("./src/resource/properties.ts"),L=d("./src/resource/path-util.ts");class Q{constructor(ht){var pt,ft,$;this.properties=new Map,this.tiledObject=ht.tiledObject,this.name=this.tiledObject.name,this.class=this.tiledObject.type,this.id=(pt=this.tiledObject.id)!==null&&pt!==void 0?pt:-1,this.x=(ft=this.tiledObject.x)!==null&&ft!==void 0?ft:0,this.y=($=this.tiledObject.y)!==null&&$!==void 0?$:0}}class P extends Q{constructor(ht,pt){if(super({tiledObject:ht}),!ht.template)throw new Error("Invalid template");if(this.source=ht.template,this.tiledTemplate=ht,this.template=pt,pt.object){this.name=this.name||pt.object.name,this.class=this.class||pt.object.class;for(const[ft,$]of pt.object.properties.entries())this.properties.has(ft)||this.properties.set(ft,$)}if(pt.tileset&&pt.object.tiledObject.gid){const ft=pt.tileset.getTileByGid(pt.object.tiledObject.gid);if(ft){this.class=this.class||ft.class;for(const[$,At]of ft.properties.entries())this.properties.has($)||this.properties.set($,At)}}}}class q extends Q{constructor(ht,pt,ft,$){super({tiledObject:ht}),this.gid=pt,this.width=ft,this.height=$}}class C extends Q{}class Z extends Q{constructor(ht,pt,ft,$){var At,_t,ut;super({tiledObject:ht}),this.font=new o.Font({family:(At=pt.fontfamily)!==null&&At!==void 0?At:"sans-serif",color:pt.color?o.Color.fromHex(pt.color):o.Color.Black,size:(_t=pt.pixelsize)!==null&&_t!==void 0?_t:16,unit:o.FontUnit.Px,textAlign:this._textAlignFromTiled(pt.halign),baseAlign:this._textBaselineFromTiled(pt.valign),quality:$});const Ct=(ut=pt.wrap)!==null&&ut!==void 0&&ut;this.text=new o.Text({text:pt.text,font:this.font,...Ct?{maxWidth:ft+10}:{}})}_textBaselineFromTiled(ht){switch(ht){case"bottom":return o.BaseAlign.Bottom;case"center":return o.BaseAlign.Middle;default:return o.BaseAlign.Top}}_textAlignFromTiled(ht){switch(ht){case"left":default:return o.TextAlign.Left;case"center":return o.TextAlign.Center;case"right":return o.TextAlign.Right;case"justify":return o.TextAlign.Start}}}class j extends Q{constructor(ht,pt,ft){super({tiledObject:ht}),this.width=pt,this.height=ft}}class dt extends Q{constructor(ht,pt,ft,$){super({tiledObject:ht}),this.width=pt,this.height=ft,this.anchor=$}}class Y extends Q{constructor(ht,pt){super({tiledObject:ht}),this.points=[],this.localPoints=[],this.localPoints=pt.map(ft=>(0,o.vec)(ft.x,ft.y)),this.points=pt.map(ft=>(0,o.vec)(ft.x,ft.y).add((0,o.vec)(this.x,this.y)))}}class W extends Q{constructor(ht,pt){super({tiledObject:ht}),this.points=[],this.points=pt.map(ft=>(0,o.vec)(ft.x,ft.y))}}function u(X,ht){var pt,ft,$,At;let _t;if(X.point)_t=new C({tiledObject:X});else if(X.ellipse)X.width&&X.height?(_t=new j(X,X.width,X.height),_t.x+=X.width/2,_t.y+=X.height/2):_t=new j(X,20,20);else if(X.polygon)_t=new Y(X,X.polygon);else if(X.polyline)_t=new W(X,X.polyline);else if(X.text)_t=new Z(X,X.text,(pt=X.width)!==null&&pt!==void 0?pt:0,(ft=ht?.textQuality)!==null&&ft!==void 0?ft:4);else if(X.gid){_t=new q(X,X.gid,($=X.width)!==null&&$!==void 0?$:0,(At=X.height)!==null&&At!==void 0?At:0);const ut=ht?.getTilesetForTileGid(X.gid);let Ct=X.type;if(ut){const vt=ut?.getTileByGid(X.gid);if(Ct=Ct||vt?.class,vt?.properties)for(const[xt,lt]of vt.properties.entries())_t.properties.has(xt)||_t.properties.set(xt,lt)}_t.class=Ct}else if(X.template&&ht){const ut=ht.templates.find(Ct=>(0,L.filenameFromPath)(Ct.templatePath)===(0,L.filenameFromPath)(X.template));if(!ut)throw new Error(`Template object id ${X.id} with name ${X.name} is missing a loaded template file, there should be one loaded from ${X.template}! Is your tiled map or template corrupted?`);_t=new P(X,ut)}else _t=X.width&&X.height?new dt(X,X.width,X.height,o.Vector.Zero):new dt(X,20,20,o.Vector.Half);return(0,T.mapProps)(_t,X.properties),_t}function O(X,ht){const pt=[];for(const ft of X.objects){let $=u(ft,ht);pt.push($)}return pt}},"./src/resource/path-util.ts":(N,l,d)=>{function o(P){const q=P.match(/[^/\\&\?]+\.\w{2,4}(?=([\#\?&].*$|$))/gi);if(q)return q[0];throw new Error(`Could not locate filename from path: ${P}`)}function T(P,q){for(const{path:C,output:Z}of q)if(typeof C=="string"){if(P.includes(C))return Z}else{const j=P.match(C);if(j)return Z.replace("[match]",j[0])}return P}function L(P,q){if(!q)return!1;for(const{path:C,output:Z}of q)if(typeof C=="string"){if(P.includes(C))return!0}else if(P.match(C))return!0;return!1}function Q(P,q,C){if(L(q,C)&&C)return T(q,C);if(q.indexOf("/")===0)return q;const Z=P.split("/"),j=q.split("/");return Z[Z.length-1].includes(".")&&Z.pop(),Z.concat(j).join("/")}d.r(l),d.d(l,{filenameFromPath:()=>o,mapPath:()=>T,pathInMap:()=>L,pathRelativeToBase:()=>Q})},"./src/resource/properties.ts":(N,l,d)=>{function o(T,L){try{if(L)for(const Q of L){let P=Q.value;typeof Q.value=="string"&&(P=Q.value.toLocaleLowerCase()),T.properties.set(Q.name.toLocaleLowerCase(),P)}}catch(Q){console.error(`Unable to map properties onto ${T}`,Q)}}d.r(l),d.d(l,{mapProps:()=>o})},"./src/resource/template-resource.ts":(N,l,d)=>{d.r(l),d.d(l,{TemplateResource:()=>j});var o=d("excalibur"),T=d("./src/parser/tiled-parser.ts"),L=d("./src/resource/file-loader.ts"),Q=d("./src/resource/loader-cache.ts"),P=d("./src/resource/objects.ts"),q=d("./src/resource/path-util.ts"),C=d("./src/resource/template.ts"),Z=d("./src/resource/tileset-resource.ts");class j{constructor(Y,W){this.templatePath=Y,this.headless=!1,this.strict=!0,this.fileLoader=L.FetchLoader;const{fileLoader:u,parser:O,pathMap:X,imageLoader:ht,strict:pt,headless:ft}={...W};this.headless=ft??this.headless,this.strict=pt??this.strict,this.fileLoader=u??this.fileLoader,this.imageLoader=ht??new Q.LoaderCache(o.ImageSource),this.parser=O??new T.TiledParser,this.pathMap=X}isLoaded(){return!!this.data}async load(){const Y=this.templatePath.includes(".tx")?"xml":"json";try{const W=await this.fileLoader(this.templatePath,Y);let u;u=Y==="xml"?this.parser.parseExternalTemplate(W,this.strict):this.strict?T.TiledTemplate.parse(W):W;const O=u,X=(0,P.parseObject)(u.object);let ht;if(u.tileset){const pt=(0,q.pathRelativeToBase)(this.templatePath,u.tileset.source,this.pathMap);ht=await new Z.TilesetResource(pt,u.tileset.firstgid,{headless:this.headless,strict:this.strict,fileLoader:this.fileLoader,imageLoader:this.imageLoader,parser:this.parser,pathMap:this.pathMap}).load()}return this.data=new C.Template({templatePath:this.templatePath,tiledTemplate:O,object:X,tileset:ht})}catch(W){throw console.error(`Could not load template at ${this.templatePath}, check to see if your pathMap is correct or if you're Tiled map is corrupted`),W}}}},"./src/resource/template.ts":(N,l,d)=>{d.r(l),d.d(l,{Template:()=>o});class o{constructor(L){const{templatePath:Q,object:P,tiledTemplate:q,tileset:C}=L;this.templatePath=Q,this.object=P,this.tiledTemplate=q,this.tileset=C}}},"./src/resource/tile-layer.ts":(N,l,d)=>{d.r(l),d.d(l,{TileLayer:()=>j});var o=d("excalibur"),T=d("./src/resource/properties.ts"),L=d("./src/parser/tiled-parser.ts"),Q=d("./src/resource/decoder.ts"),P=d("./src/resource/gid-util.ts"),q=d("./src/resource/excalibur-properties.ts"),C=d("./src/resource/tiled-layer-component.ts"),Z=d("./src/resource/filter-util.ts");class j{getTilesByGid(Y){var W;return(W=this._gidToTileInfo.get(Y))!==null&&W!==void 0?W:[]}getTilesByClassName(Y){return this.tilemap.tiles.filter(W=>{const u=W.data.get(q.ExcaliburTiledProperties.TileData.Tiled);return!!u&&(0,Z.byClassCaseInsensitive)(Y)(u)}).map(W=>({exTile:W,tiledTile:W.data.get(q.ExcaliburTiledProperties.TileData.Tiled)}))}getTilesByProperty(Y,W){return this.tilemap.tiles.filter(u=>{const O=u.data.get(q.ExcaliburTiledProperties.TileData.Tiled);return!!O&&(0,Z.byPropertyCaseInsensitive)(Y,W)(O)}).map(u=>({exTile:u,tiledTile:u.data.get(q.ExcaliburTiledProperties.TileData.Tiled)}))}getTileByPoint(Y){if(!this.tilemap)return this.logger.warn("Tilemap has not yet been loaded! getTileByPoint() will only return null"),null;if(this.tilemap){const W=this.tilemap.getTileByPoint(Y);if(!W)return null;const u=this.tilemap.tiles.indexOf(W),O=(0,P.getCanonicalGid)(this.data[u]);return O<=0?null:{tiledTile:this.resource.getTilesetForTileGid(O).getTileByGid(O),exTile:W}}return null}getTileByCoordinate(Y,W){if(!this.tilemap)return this.logger.warn("Tilemap has not yet been loaded! getTileByCoordinate() will only return null"),null;if(this.tilemap){const u=this.tilemap.getTile(Y,W),O=this.tilemap.tiles.indexOf(u),X=(0,P.getCanonicalGid)(this.data[O]);return X<=0?null:{tiledTile:this.resource.getTilesetForTileGid(X).getTileByGid(X),exTile:u}}return null}constructor(Y,W,u){this.tiledTileLayer=Y,this.resource=W,this.order=u,this.logger=o.Logger.getInstance(),this.width=0,this.height=0,this.properties=new Map,this.data=[],this._gidToTileInfo=new Map,this.name=Y.name,this.class=Y.class,this.width=Y.width,this.height=Y.height,(0,T.mapProps)(this,Y.properties)}_recordTileData(Y,W){let u=this._gidToTileInfo.get(Y),O=this.resource.getTilesetForTileGid(Y).getTileByGid(Y);u?u.push({exTile:W,tiledTile:O}):u=[{exTile:W,tiledTile:O}],this._gidToTileInfo.set(Y,u),W.data.set(q.ExcaliburTiledProperties.TileData.Tiled,O)}updateTile(Y,W,u,O,X){this._recordTileData(W,Y),this.resource.useExcaliburWiring&&X&&(Y.solid=!0);const ht=this.resource.getTilesetForTileGid(W),pt=this.resource.headless;if(!pt){let At=ht.getSpriteForGid(W);u&&(At=At.clone(),At.tint=O),Y.addGraphic(At,{offset:ht.tileOffset})}const ft=ht.getCollidersForGid(W);for(let At of ft)Y.addCollider(At);let $=pt?null:ht.getAnimationForGid(W);if($&&(u&&($=$.clone(),$.tint=O),Y.clearGraphics(),Y.addGraphic($,{offset:ht.tileOffset}),this.resource.useExcaliburWiring)){const At=ht.getTileByGid(W),_t=At?.properties.get(q.ExcaliburTiledProperties.Animation.Strategy);if(_t&&typeof _t=="string")switch(_t.toLowerCase()){case o.AnimationStrategy.End.toLowerCase():$.strategy=o.AnimationStrategy.End;break;case o.AnimationStrategy.Freeze.toLowerCase():$.strategy=o.AnimationStrategy.Freeze;break;case o.AnimationStrategy.Loop.toLowerCase():$.strategy=o.AnimationStrategy.Loop;break;case o.AnimationStrategy.PingPong.toLowerCase():$.strategy=o.AnimationStrategy.PingPong;break;default:this.logger.warn(`Unknown animation strategy in tileset ${ht.name} on tile gid ${W}: ${_t}`)}}}async load(){var Y,W,u,O;const X=this.tiledTileLayer.opacity,ht=!!this.tiledTileLayer.tintcolor,pt=this.tiledTileLayer.tintcolor?o.Color.fromHex(this.tiledTileLayer.tintcolor):o.Color.Transparent,ft=!!this.properties.get(q.ExcaliburTiledProperties.Layer.Solid),$=this.tiledTileLayer,At=(0,o.vec)((Y=$.offsetx)!==null&&Y!==void 0?Y:0,(W=$.offsety)!==null&&W!==void 0?W:0);if((0,L.needsDecoding)(this.tiledTileLayer)?this.data=await Q.Decoder.decode(this.tiledTileLayer.data,this.tiledTileLayer.compression):(0,L.isCSV)(this.tiledTileLayer)&&(this.data=this.tiledTileLayer.data),this.resource.map.infinite&&(0,L.isInfiniteLayer)(this.tiledTileLayer)){const Ct=(0,o.vec)(this.tiledTileLayer.startx*this.resource.map.tilewidth,this.tiledTileLayer.starty*this.resource.map.tileheight);this.tilemap=new o.TileMap({name:this.name,pos:At.add(Ct),tileHeight:this.resource.map.tileheight,tileWidth:this.resource.map.tilewidth,columns:$.width,rows:$.height})}else this.tilemap=new o.TileMap({name:this.name,pos:At,tileWidth:this.resource.map.tilewidth,tileHeight:this.resource.map.tileheight,columns:$.width,rows:$.height});this.tilemap.addComponent(new C.TiledLayerDataComponent({tiledTileLayer:$}));const _t=this.tilemap.get(o.TransformComponent);if(_t){_t.z=this.order;let Ct=this.properties.get(q.ExcaliburTiledProperties.ZIndex.ZIndex);typeof Ct=="number"&&(_t.z=Ct)}const ut=this.tilemap.get(o.GraphicsComponent);if(ut&&(ut.visible=this.tiledTileLayer.visible,ut.opacity=X),$.parallaxx||$.parallaxy){const Ct=(0,o.vec)((u=$.parallaxx)!==null&&u!==void 0?u:1,(O=$.parallaxy)!==null&&O!==void 0?O:1);this.tilemap.addComponent(new o.ParallaxComponent(Ct))}if(this.resource.map.infinite&&(0,L.isInfiniteLayer)(this.tiledTileLayer))for(let Ct of this.tiledTileLayer.chunks)for(let vt=0;vt<Ct.data.length;vt++){const xt=Ct.data[vt];if(xt!=0){const lt=vt%Ct.width+(Ct.x-this.tiledTileLayer.startx),kt=Math.floor(vt/Ct.width)+(Ct.y-this.tiledTileLayer.starty),Jt=this.tilemap.tiles[lt+kt*$.width];this.updateTile(Jt,xt,ht,pt,ft)}}else for(let Ct=0;Ct<this.data.length;Ct++){let vt=this.data[Ct];if(vt!==0){const xt=this.tilemap.tiles[Ct];this.updateTile(xt,vt,ht,pt,ft)}}}}},"./src/resource/tiled-data-component.ts":(N,l,d)=>{d.r(l),d.d(l,{TiledDataComponent:()=>T});var o=d("excalibur");class T extends o.Component{constructor(Q){super();const{tiledObject:P}=Q;this.tiledObject=P}}},"./src/resource/tiled-layer-component.ts":(N,l,d)=>{d.r(l),d.d(l,{TiledLayerDataComponent:()=>T});var o=d("excalibur");class T extends o.Component{constructor(Q){super();const{tiledTileLayer:P}=Q;this.tiledTileLayer=P}}},"./src/resource/tiled-resource.ts":(N,l,d)=>{d.r(l),d.d(l,{TiledResource:()=>pt});var o=d("excalibur"),T=d("./src/parser/tiled-parser.ts"),L=d("./src/resource/tileset.ts"),Q=d("./src/resource/iso-tile-layer.ts"),P=d("./src/resource/tile-layer.ts"),q=d("./src/resource/object-layer.ts"),C=d("./node_modules/compare-versions/lib/esm/compare.js"),Z=d("./src/resource/gid-util.ts"),j=d("./src/resource/path-util.ts"),dt=d("./src/resource/filter-util.ts"),Y=d("./src/resource/excalibur-properties.ts"),W=d("./src/resource/file-loader.ts"),u=d("./src/resource/tileset-resource.ts"),O=d("./src/resource/loader-cache.ts"),X=d("./src/resource/template-resource.ts"),ht=d("./src/resource/image-layer.ts");class pt{constructor($,At){this.path=$,this.logger=o.Logger.getInstance(),this.tilesets=[],this.templates=[],this.layers=[],this.mapFormat="TMX",this.strict=!0,this.factories=new Map,this.parser=new T.TiledParser,this.fileLoader=W.FetchLoader,this.startZIndex=0,this.textQuality=4,this.useExcaliburWiring=!0,this.useMapBackgroundColor=!1,this.useTilemapCameraStrategy=!1,this.headless=!1,this._imageLoader=new O.LoaderCache(o.ImageSource),this._tilesetLoader=new O.LoaderCache(u.TilesetResource),this._templateLoader=new O.LoaderCache(X.TemplateResource);const{mapFormatOverride:_t,textQuality:ut,entityClassNameFactories:Ct,useExcaliburWiring:vt,useTilemapCameraStrategy:xt,useMapBackgroundColor:lt,pathMap:kt,fileLoader:Jt,strict:Ut,headless:Ae,startZIndex:Ot}={...At};this.strict=Ut??this.strict,this.headless=Ae??this.headless,this.useExcaliburWiring=vt??this.useExcaliburWiring,this.useTilemapCameraStrategy=xt??this.useTilemapCameraStrategy,this.useMapBackgroundColor=lt??this.useMapBackgroundColor,this.textQuality=ut??this.textQuality,this.startZIndex=Ot??this.startZIndex,this.fileLoader=Jt??this.fileLoader,this.pathMap=kt;for(const $t in Ct)this.registerEntityFactory($t,Ct[$t]);this.mapFormat=_t??($.includes(".tmx")?"TMX":"TMJ")}registerEntityFactory($,At){if(this.factories.has($)&&console.warn(`Another factory has already been registered for tiled class/type "${$}", this is probably a bug.`),this.factories.set($,At),this.isLoaded())for(let _t of this.getObjectLayers())_t.runFactory($)}unregisterEntityFactory($){this.factories.has($)||console.warn(`No factory has been registered for tiled class/type "${$}", cannot unregister!`),this.factories.delete($)}getTilesetForTileGid($){const At=(0,Z.getCanonicalGid)($);if(this.tilesets){for(let _t of this.tilesets)if(At>=_t.firstGid&&At<=_t.firstGid+_t.tileCount-1)return _t}throw Error(`No tileset exists for tiled gid [${$}] normalized [${At}]!`)}getTilesetByName($){return this.tilesets.filter((0,dt.byNameCaseInsensitive)($))}getTilesetByClassName($){return this.tilesets.filter((0,dt.byClassCaseInsensitive)($))}getTilesetByProperty($,At){return this.tilesets.filter((0,dt.byPropertyCaseInsensitive)($,At))}getTileMetadataByClassName($){let At=[];for(let _t of this.tilesets)At=At.concat(_t.tiles.filter((0,dt.byClassCaseInsensitive)($)));return At}getTileMetadataByProperty($,At){let _t=[];for(let ut of this.tilesets)_t=_t.concat(ut.tiles.filter((0,dt.byPropertyCaseInsensitive)($,At)));return _t}getTilesByGid($){if(this.map.orientation==="orthogonal"){let At=[];for(let _t of this.getTileLayers())At=At.concat(_t.getTilesByGid($));return At}{let At=[];for(let _t of this.getIsoTileLayers())At=At.concat(_t.getTilesByGid($));return At}}getTilesByClassName($){if(this.map.orientation==="orthogonal"){let At=[];for(let _t of this.getTileLayers())At=At.concat(_t.getTilesByClassName($));return At}{let At=[];for(let _t of this.getIsoTileLayers())At=At.concat(_t.getTilesByClassName($));return At}}getTilesByProperty($,At){if(this.map.orientation==="orthogonal"){let _t=[];for(let ut of this.getTileLayers())_t=_t.concat(ut.getTilesByProperty($,At));return _t}{let _t=[];for(let ut of this.getIsoTileLayers())_t=_t.concat(ut.getTilesByProperty($,At));return _t}}getTileByPoint($,At){if(this.map.orientation==="isometric"){const _t=this.getIsoTileLayers().find((0,dt.byNameCaseInsensitive)($));if(_t)return _t.getTileByPoint(At)}else{const _t=this.getTileLayers().find((0,dt.byNameCaseInsensitive)($));if(_t)return _t.getTileByPoint(At)}return null}getTilesByPoint($){if(this.map.orientation==="orthogonal"){let At=[];for(let _t of this.getTileLayers()){const ut=_t.getTileByPoint($);ut&&At.push(ut)}return At}{let At=[];for(let _t of this.getIsoTileLayers()){const ut=_t.getTileByPoint($);ut&&At.push(ut)}return At}}getObjectsByName($){let At=[];for(let _t of this.getObjectLayers())At=At.concat(_t.getObjectsByName($));return At}getEntitiesByName($){let At=[];for(let _t of this.getObjectLayers())At=At.concat(_t.getEntitiesByName($));return At}getEntityByObject($){for(let At of this.getObjectLayers()){const _t=At.getEntityByObject($);if(_t)return _t}}getObjectByEntity($){for(let At of this.getObjectLayers()){const _t=At.getObjectByEntity($);if(_t)return _t}}getObjectsByProperty($,At){let _t=[];for(let ut of this.getObjectLayers())_t=_t.concat(ut.getObjectsByProperty($,At));return _t}getEntitiesByProperty($,At){let _t=[];for(let ut of this.getObjectLayers())_t=_t.concat(ut.getEntitiesByProperty($,At));return _t}getObjectsByClassName($){let At=[];for(let _t of this.getObjectLayers())At=At.concat(_t.getObjectsByClassName($));return At}getEntitiesByClassName($){let At=[];for(let _t of this.getObjectLayers())At=At.concat(_t.getEntitiesByClassName($));return At}getTileByCoordinate($,At,_t){const ut=this.getTileLayers().find((0,dt.byNameCaseInsensitive)($));return ut?ut.getTileByCoordinate(At,_t):null}getImageLayers($){const At=this.layers.filter(_t=>_t instanceof ht.ImageLayer);return $?At.filter((0,dt.byNameCaseInsensitive)($)):At}getTileLayers($){const At=this.layers.filter(_t=>_t instanceof P.TileLayer);return $?At.filter((0,dt.byNameCaseInsensitive)($)):At}getIsoTileLayers($){const At=this.layers.filter(_t=>_t instanceof Q.IsoTileLayer);return $?At.filter((0,dt.byNameCaseInsensitive)($)):At}getObjectLayers($){const At=this.layers.filter(_t=>_t instanceof q.ObjectLayer);return $?At.filter((0,dt.byNameCaseInsensitive)($)):At}getLayersByName($){return this.layers.filter((0,dt.byNameCaseInsensitive)($))}getLayersByClassName($){return this.layers.filter((0,dt.byClassCaseInsensitive)($))}getLayersByProperty($,At){return this.layers.filter((0,dt.byPropertyCaseInsensitive)($,At))}_parseMap($){return this.mapFormat==="TMX"?this.parser.parse($,this.strict):$}async load(){var $;const At=await this.fileLoader(this.path,this.mapFormat==="TMX"?"xml":"json");let _t;if(this.strict)try{_t=this._parseMap(At)}catch(vt){throw console.error(`Could not parse tiled map from location ${this.path}, attempted to interpret as ${this.mapFormat}.
Excalibur only supports the latest version of Tiled formats as of the plugin's release.`),console.error("Is your map file corrupted or being interpreted as the wrong type?"),vt}else _t=this._parseMap(At);(0,C.compare)(pt.supportedTiledVersion,($=_t.tiledversion)!==null&&$!==void 0?$:"0.0.0",">")&&console.warn(`The excalibur tiled plugin officially supports ${pt.supportedTiledVersion}+, the current map has tiled version ${_t.tiledversion}`),this.map=_t,this._collectTilesets(),this._collectTemplates(),await Promise.all([this._tilesetLoader.load(),this.headless?Promise.resolve():this._imageLoader.load(),this._templateLoader.load()]),this.tilesets=[...this.tilesets,...this._tilesetLoader.values().map(vt=>vt.data)],this.templates=this._templateLoader.values().map(vt=>vt.data);let ut=[],Ct=this.startZIndex;for(const vt of this.map.layers){if(vt.type==="tilelayer"){if(this.map.orientation==="isometric"){const xt=new Q.IsoTileLayer(vt,this,Ct);ut.push(xt)}if(this.map.orientation==="orthogonal"){const xt=new P.TileLayer(vt,this,Ct);ut.push(xt)}}if(vt.type==="objectgroup"){const xt=new q.ObjectLayer(vt,this,Ct);ut.push(xt)}if(vt.type==="imagelayer"){const xt=new ht.ImageLayer(vt,this,Ct);ut.push(xt)}Ct++}await Promise.all(ut.map(vt=>vt.load())),this.layers=ut}_collectTilesets(){for(const $ of this.map.tilesets){if((0,T.isTiledTilesetEmbedded)($)){if((0,T.isTiledTilesetSingleImage)($)){const At=(0,j.pathRelativeToBase)(this.path,$.image,this.pathMap),_t=this._imageLoader.getOrAdd(At),ut=new L.Tileset({name:$.name,tiledTileset:$,image:_t,firstGid:$.firstgid});this.tilesets.push(ut)}if((0,T.isTiledTilesetCollectionOfImages)($)){const At=new Map;if($.tiles){for(let ut of $.tiles)if(ut.image){const Ct=(0,j.pathRelativeToBase)(this.path,ut.image,this.pathMap),vt=this._imageLoader.getOrAdd(Ct);At.set(ut,vt)}}const _t=new L.Tileset({name:$.name,tiledTileset:$,tileToImage:At,firstGid:$.firstgid});this.tilesets.push(_t)}}if((0,T.isTiledTilesetExternal)($)){const At=(0,j.pathRelativeToBase)(this.path,$.source,this.pathMap);this._tilesetLoader.getOrAdd(At,$.firstgid,{strict:this.strict,headless:this.headless,parser:this.parser,fileLoader:this.fileLoader,imageLoader:this._imageLoader,pathMap:this.pathMap})}}}_collectTemplates(){let $=[];for(const _t of this.map.layers)if(_t.type==="objectgroup"){let ut=_t.objects.filter(Ct=>Ct.template).map(Ct=>Ct.template);$=$.concat(ut)}const At=$.filter((_t,ut,Ct)=>Ct.findIndex(vt=>vt===_t)===ut);for(const _t of At){const ut=(0,j.pathRelativeToBase)(this.path,_t,this.pathMap);this._templateLoader.getOrAdd(ut,{strict:this.strict,headless:this.headless,parser:this.parser,fileLoader:this.fileLoader,imageLoader:this._imageLoader,pathMap:this.pathMap})}}addToScene($,At){if(!this.isLoaded())return void this.logger.warn(`TiledResource ${this.path} is not loaded! Nothing will be wired into excalibur!`);const _t={pos:(0,o.vec)(0,0)},{pos:ut}={..._t,...At};for(const Ct of this.layers){if(Ct instanceof P.TileLayer&&(Ct.tilemap.pos=Ct.tilemap.pos.add(ut),$.add(Ct.tilemap)),Ct instanceof Q.IsoTileLayer&&$.add(Ct.isometricMap),Ct instanceof q.ObjectLayer)for(const vt of Ct.entities){const xt=vt.get(o.TransformComponent);xt&&(xt.pos=xt.pos.add(ut)),$.add(vt)}Ct instanceof ht.ImageLayer&&Ct.imageActor&&(Ct.imageActor.pos=Ct.imageActor.pos.add(ut),$.add(Ct.imageActor))}if(this.useExcaliburWiring){const Ct=this.getObjectsByProperty(Y.ExcaliburTiledProperties.Camera.Camera,!0);if(Ct&&Ct.length){const vt=Ct[0];let xt=1;const lt=vt.properties.get(Y.ExcaliburTiledProperties.Camera.Zoom);lt&&typeof lt=="number"&&(xt=lt),this.map.orientation==="isometric"?$.camera.pos=this.isometricTiledCoordToWorld(vt.x,vt.y):$.camera.pos=(0,o.vec)(vt.x,vt.y),$.camera.zoom=xt}}if(this.useTilemapCameraStrategy){const Ct=this.getTileLayers()[0];if(Ct){const vt=o.BoundingBox.fromDimension(this.map.width*this.map.tilewidth,this.map.height*this.map.tileheight,o.Vector.Zero,ut.add(Ct.tilemap.pos));$.camera.strategy.limitCameraBounds(vt)}}this.useMapBackgroundColor&&this.map.backgroundcolor&&($.backgroundColor=o.Color.fromHex(this.map.backgroundcolor))}isometricTiledCoordToWorld($,At){const _t=this.map.tilewidth,ut=this.map.tileheight,Ct=At/ut,vt=$/ut;return(0,o.vec)((vt-Ct)*_t/2+0,(vt+Ct)*ut/2)}isLoaded(){return!!this.map}}pt.supportedTiledVersion="1.10.1"},"./src/resource/tileset-resource.ts":(N,l,d)=>{d.r(l),d.d(l,{TilesetResource:()=>C});var o=d("excalibur"),T=d("./src/resource/tileset.ts"),L=d("./src/parser/tiled-parser.ts"),Q=d("./src/resource/file-loader.ts"),P=d("./src/resource/path-util.ts"),q=d("./src/resource/loader-cache.ts");class C{constructor(j,dt,Y){this.path=j,this.strict=!0,this.headless=!1,this.orientation="orthogonal",this.fileLoader=Q.FetchLoader;const{fileLoader:W,parser:u,pathMap:O,imageLoader:X,strict:ht,headless:pt,orientation:ft}={...Y};this.headless=pt??this.headless,this.orientation=ft??this.orientation,this.strict=ht??this.strict,this.fileLoader=W??this.fileLoader,this.imageLoader=X??new q.LoaderCache(o.ImageSource),this.parser=u??new L.TiledParser,this.firstGid=dt,this.pathMap=O}async load(){const j=this.path.includes(".tsx")?"xml":"json";try{const dt=await this.fileLoader(this.path,j);let Y;if(Y=j==="json"?this.strict?L.TiledTilesetFile.parse(dt):dt:this.parser.parseExternalTileset(dt,this.strict),(0,L.isTiledTilesetSingleImage)(Y)){const W=(0,P.pathRelativeToBase)(this.path,Y.image,this.pathMap),u=this.headless?void 0:this.imageLoader.getOrAdd(W);this.data=new T.Tileset({name:Y.name,tiledTileset:Y,firstGid:this.firstGid,image:u})}if((0,L.isTiledTilesetCollectionOfImages)(Y)){const W=this.headless?void 0:new Map;if(W){const u=[];if(Y.tiles){for(let O of Y.tiles)if(O.image){const X=(0,P.pathRelativeToBase)(this.path,O.image,this.pathMap),ht=this.imageLoader.getOrAdd(X);W.set(O,ht),u.push(ht)}}}Y.firstgid=this.firstGid,this.data=new T.Tileset({name:Y.name,tiledTileset:Y,firstGid:this.firstGid,tileToImage:W})}if(this.headless||await this.imageLoader.load(),this.data)return this.data}catch(dt){throw console.error(`Could not load tileset at path ${this.path}`),dt}throw new Error(`No tileset at path ${this.path}`)}isLoaded(){return!!this.data}}},"./src/resource/tileset.ts":(N,l,d)=>{d.r(l),d.d(l,{Tile:()=>C,Tileset:()=>Z});var o=d("excalibur"),T=d("./src/resource/gid-util.ts"),L=d("./src/parser/tiled-parser.ts"),Q=d("./src/resource/objects.ts"),P=d("./src/resource/properties.ts"),q=d("./src/resource/filter-util.ts");class C{constructor(dt){this.objects=[],this.colliders=[],this.animation=[],this.properties=new Map;const{id:Y,tileset:W,tiledTile:u}=dt;this.id=Y,this.tileset=W,this.tiledTile=u,this.class=u.type,(0,P.mapProps)(this,u.properties),u.objectgroup&&u.objectgroup.objects&&(this.objects=(0,Q.parseObjects)(u.objectgroup)),u.animation&&(this.animation=u.animation)}}class Z{constructor(dt){var Y,W,u,O,X,ht,pt,ft,$,At;this.firstGid=-1,this.tileCount=0,this.tileWidth=0,this.tileHeight=0,this.tileOffset=(0,o.vec)(0,0),this.tiles=[],this.objectalignment="bottomleft",this.orientation="orthogonal",this.properties=new Map;const{name:_t,tiledTileset:ut,image:Ct,tileToImage:vt,firstGid:xt}=dt;if(this.name=_t,this.tiledTileset=ut,this.firstGid=xt,(0,L.isTiledTilesetSingleImage)(ut)){(0,P.mapProps)(this,ut.properties);const lt=ut.spacing,kt=Math.floor((ut.imagewidth+lt)/(ut.tilewidth+lt)),Jt=Math.floor((ut.imageheight+lt)/(ut.tileheight+lt));if(this.class=ut.class,this.orientation=(W=(Y=ut.grid)===null||Y===void 0?void 0:Y.orientation)!==null&&W!==void 0?W:"orthogonal",this.horizontalFlipTransform=o.AffineMatrix.identity().translate(ut.tilewidth,0).scale(-1,1),this.verticalFlipTransform=o.AffineMatrix.identity().translate(0,ut.tileheight).scale(1,-1),this.diagonalFlipTransform=o.AffineMatrix.identity().translate(0,0).rotate(-Math.PI/2).scale(-1,1),this.objectalignment=(u=ut.objectalignment)!==null&&u!==void 0?u:this.orientation==="orthogonal"?"bottomleft":"bottom",Ct&&(this.spritesheet=o.SpriteSheet.fromImageSource({image:Ct,grid:{rows:Jt,columns:kt,spriteWidth:ut.tilewidth,spriteHeight:ut.tileheight},spacing:{originOffset:{x:(O=ut.margin)!==null&&O!==void 0?O:0,y:(X=ut.margin)!==null&&X!==void 0?X:0},margin:{x:(ht=ut.spacing)!==null&&ht!==void 0?ht:0,y:(pt=ut.spacing)!==null&&pt!==void 0?pt:0}}})),this.tileCount=ut.tilecount,this.tileWidth=ut.tilewidth,this.tileHeight=ut.tileheight,ut.tileoffset&&(this.tileOffset=(0,o.vec)(ut.tileoffset.x,ut.tileoffset.y)),ut.tiles)for(const Ut of ut.tiles)this.tiles.push(new C({id:Ut.id,tileset:this,tiledTile:Ut,image:Ct}))}if((0,L.isTiledTilesetCollectionOfImages)(ut)&&ut.firstgid!==void 0){this.horizontalFlipTransform=o.AffineMatrix.identity().translate(ut.tilewidth,0).scale(-1,1),this.verticalFlipTransform=o.AffineMatrix.identity().translate(0,ut.tileheight).scale(1,-1),this.diagonalFlipTransform=o.AffineMatrix.identity().translate(0,0).rotate(-Math.PI/2).scale(-1,1),this.objectalignment=(ft=ut.objectalignment)!==null&&ft!==void 0?ft:this.orientation==="orthogonal"?"bottomleft":"bottom",this.orientation=(At=($=ut.grid)===null||$===void 0?void 0:$.orientation)!==null&&At!==void 0?At:"orthogonal",this.tileCount=ut.tilecount,this.tileWidth=ut.tilewidth,this.tileHeight=ut.tileheight,ut.tileoffset&&(this.tileOffset=(0,o.vec)(ut.tileoffset.x,ut.tileoffset.y));let lt=[];if(ut.tiles)for(const kt of ut.tiles){const Jt=vt?.get(kt);Jt&&lt.push(Jt.toSprite()),this.tiles.push(new C({id:kt.id,tileset:this,tiledTile:kt,image:Jt}))}vt&&(this.spritesheet=new o.SpriteSheet({sprites:lt}))}}getTilesetAlignmentAnchor(dt){switch(dt??this.objectalignment){case"topleft":return(0,o.vec)(0,0);case"top":return(0,o.vec)(.5,0);case"topright":return(0,o.vec)(1,0);case"left":return(0,o.vec)(0,.5);case"center":return(0,o.vec)(.5,.5);case"right":return(0,o.vec)(1,.5);case"bottomleft":default:return(0,o.vec)(0,1);case"bottom":return(0,o.vec)(.5,1);case"bottomright":return(0,o.vec)(1,1)}}getTileByGid(dt){const Y=(0,T.getCanonicalGid)(dt)-this.firstGid;return this.tiles.find(W=>W.id===Y)}getTilesByClassName(dt){return this.tiles.filter((0,q.byClassCaseInsensitive)(dt))}getTilesByProperty(dt,Y){return this.tiles.filter((0,q.byPropertyCaseInsensitive)(dt,Y))}getSpriteForGid(dt){const Y=(0,T.isFlippedHorizontally)(dt),W=(0,T.isFlippedVertically)(dt),u=(0,T.isFlippedDiagonally)(dt),O=(0,T.getCanonicalGid)(dt),X=O-this.firstGid;if(this.spritesheet){let ht=this.spritesheet.sprites[X];return(u||Y||W)&&(ht=ht.clone()),u&&(ht.rotation=-Math.PI/2,ht.scale=(0,o.vec)(-1,1)),Y&&(ht.scale=(0,o.vec)((u?1:-1)*ht.scale.x,(u?-1:1)*ht.scale.y)),W&&(ht.scale=(0,o.vec)((u?-1:1)*ht.scale.x,(u?1:-1)*ht.scale.y)),ht}throw new Error(`Tileset: [${this.name}] Could not find sprite for gid: [${dt}] normalized gid: [${O}]`)}_isometricTiledCoordToWorld(dt){const Y=this.tileWidth,W=this.tileHeight/2,u=dt.y/W,O=dt.x/W;return(0,o.vec)((O-u)*Y/2+0,(O+u)*W/2)}getCollidersForGid(dt,Y){let{anchor:W,scale:u,orientationOverride:O,offset:X}={anchor:o.Vector.Zero,scale:o.Vector.One,offset:o.Vector.Zero,orientationOverride:void 0,...Y};const ht=O??this.orientation,pt=this.getTileByGid(dt),ft=[];if(pt&&pt.objects)for(let $ of pt.objects){if($ instanceof Q.Polygon){let At=$.points.map(ut=>ut.scale(u));At=this._applyFlipsToPoints(At,dt),ht==="isometric"&&(At=At.map(ut=>this._isometricTiledCoordToWorld(ut))),At=At.map(ut=>ut.add(X));let _t=o.Shape.Polygon(At,o.Vector.Zero,!0);_t.isConvex()?ft.push(_t):ft.push(_t.triangulate())}if($ instanceof Q.Rectangle){let At=o.BoundingBox.fromDimension($.width*u.x,$.height*u.y,W).getPoints().map(ut=>ut.add((0,o.vec)($.x,$.y)));ht==="isometric"&&(At=At.map(ut=>this._isometricTiledCoordToWorld(ut))),At=this._applyFlipsToPoints(At,dt),At=At.map(ut=>ut.add(X));const _t=o.Shape.Polygon(At);ft.push(_t)}if($ instanceof Q.Ellipse){let At=(0,o.vec)($.x,$.y);ht==="isometric"&&(At=this._isometricTiledCoordToWorld(At)),At=At.add(X);const _t=Math.min($.width/2,$.height/2),ut=o.Shape.Circle(_t,At.scale(u));ft.push(ut)}}return ft}_applyFlipsToPoints(dt,Y){const W=(0,T.isFlippedHorizontally)(Y),u=(0,T.isFlippedVertically)(Y);return(0,T.isFlippedDiagonally)(Y)&&(dt=dt.map(O=>this.diagonalFlipTransform.multiply(O))),W&&(dt=dt.map(O=>this.horizontalFlipTransform.multiply(O))),u&&(dt=dt.map(O=>this.verticalFlipTransform.multiply(O))),dt}getAnimationForGid(dt){var Y;const W=this.getTileByGid(dt);if(W&&(!((Y=W.animation)===null||Y===void 0)&&Y.length)){let u=[];for(let O of W.animation)u.push({graphic:this.getSpriteForGid(O.tileid+this.firstGid),duration:O.duration});return new o.Animation({frames:u,strategy:o.AnimationStrategy.Loop})}return null}}},excalibur:N=>{N.exports=_},jsdom:N=>{if(s===void 0){var l=new Error("Cannot find module 'jsdom'");throw l.code="MODULE_NOT_FOUND",l}N.exports=s},"./node_modules/zod/lib/index.mjs":(N,l,d)=>{var o,T;d.r(l),d.d(l,{BRAND:()=>Ui,DIRTY:()=>pt,EMPTY_PATH:()=>u,INVALID:()=>ht,NEVER:()=>en,OK:()=>ft,ParseStatus:()=>X,Schema:()=>kt,ZodAny:()=>Wt,ZodArray:()=>Gt,ZodBigInt:()=>Bt,ZodBoolean:()=>ot,ZodBranded:()=>hs,ZodCatch:()=>Oi,ZodDate:()=>It,ZodDefault:()=>Ti,ZodDiscriminatedUnion:()=>Ie,ZodEffects:()=>Ge,ZodEnum:()=>Le,ZodError:()=>C,ZodFirstPartyTypeKind:()=>ni,ZodFunction:()=>Ke,ZodIntersection:()=>Ei,ZodIssueCode:()=>P,ZodLazy:()=>pi,ZodLiteral:()=>$e,ZodMap:()=>ci,ZodNaN:()=>qi,ZodNativeEnum:()=>me,ZodNever:()=>Tt,ZodNull:()=>re,ZodNullable:()=>Pi,ZodNumber:()=>Qe,ZodObject:()=>te,ZodOptional:()=>di,ZodParsedType:()=>L,ZodPipeline:()=>ns,ZodPromise:()=>Je,ZodReadonly:()=>ys,ZodRecord:()=>yi,ZodSchema:()=>kt,ZodSet:()=>De,ZodString:()=>xe,ZodSymbol:()=>Nt,ZodTransformer:()=>Ge,ZodTuple:()=>li,ZodType:()=>kt,ZodUndefined:()=>yt,ZodUnion:()=>ge,ZodUnknown:()=>Vt,ZodVoid:()=>qt,addIssueToContext:()=>O,any:()=>hi,array:()=>wi,bigint:()=>Ht,boolean:()=>Mi,coerce:()=>Us,custom:()=>Ys,date:()=>Yi,default:()=>ln,defaultErrorMap:()=>Z,discriminatedUnion:()=>Fi,effect:()=>Rs,enum:()=>Ri,function:()=>_s,getErrorMap:()=>Y,getParsedType:()=>Q,instanceof:()=>Bi,intersection:()=>Li,isAborted:()=>$,isAsync:()=>ut,isDirty:()=>At,isValid:()=>_t,late:()=>ji,lazy:()=>Ls,literal:()=>ws,makeIssue:()=>W,map:()=>rs,nan:()=>Te,nativeEnum:()=>ks,never:()=>qe,null:()=>Ii,nullable:()=>gn,number:()=>si,object:()=>Qi,objectUtil:()=>T,oboolean:()=>kn,onumber:()=>xn,optional:()=>Es,ostring:()=>Vs,pipeline:()=>Bs,preprocess:()=>vs,promise:()=>ms,quotelessJson:()=>q,record:()=>Xi,set:()=>fs,setErrorMap:()=>dt,strictObject:()=>Si,string:()=>Re,symbol:()=>Zi,transformer:()=>Rs,tuple:()=>Gi,undefined:()=>ti,union:()=>xi,unknown:()=>Be,util:()=>o,void:()=>ai,z:()=>ln}),function(Ft){Ft.assertEqual=gt=>gt,Ft.assertIs=function(gt){},Ft.assertNever=function(gt){throw new Error},Ft.arrayToEnum=gt=>{const bt={};for(const Pt of gt)bt[Pt]=Pt;return bt},Ft.getValidEnumValues=gt=>{const bt=Ft.objectKeys(gt).filter(ee=>typeof gt[gt[ee]]!="number"),Pt={};for(const ee of bt)Pt[ee]=gt[ee];return Ft.objectValues(Pt)},Ft.objectValues=gt=>Ft.objectKeys(gt).map(function(bt){return gt[bt]}),Ft.objectKeys=typeof Object.keys=="function"?gt=>Object.keys(gt):gt=>{const bt=[];for(const Pt in gt)Object.prototype.hasOwnProperty.call(gt,Pt)&&bt.push(Pt);return bt},Ft.find=(gt,bt)=>{for(const Pt of gt)if(bt(Pt))return Pt},Ft.isInteger=typeof Number.isInteger=="function"?gt=>Number.isInteger(gt):gt=>typeof gt=="number"&&isFinite(gt)&&Math.floor(gt)===gt,Ft.joinValues=function(gt,bt=" | "){return gt.map(Pt=>typeof Pt=="string"?`'${Pt}'`:Pt).join(bt)},Ft.jsonStringifyReplacer=(gt,bt)=>typeof bt=="bigint"?bt.toString():bt}(o||(o={})),function(Ft){Ft.mergeShapes=(gt,bt)=>({...gt,...bt})}(T||(T={}));const L=o.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Q=Ft=>{switch(typeof Ft){case"undefined":return L.undefined;case"string":return L.string;case"number":return isNaN(Ft)?L.nan:L.number;case"boolean":return L.boolean;case"function":return L.function;case"bigint":return L.bigint;case"symbol":return L.symbol;case"object":return Array.isArray(Ft)?L.array:Ft===null?L.null:Ft.then&&typeof Ft.then=="function"&&Ft.catch&&typeof Ft.catch=="function"?L.promise:typeof Map<"u"&&Ft instanceof Map?L.map:typeof Set<"u"&&Ft instanceof Set?L.set:typeof Date<"u"&&Ft instanceof Date?L.date:L.object;default:return L.unknown}},P=o.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),q=Ft=>JSON.stringify(Ft,null,2).replace(/"([^"]+)":/g,"$1:");class C extends Error{constructor(gt){super(),this.issues=[],this.addIssue=Pt=>{this.issues=[...this.issues,Pt]},this.addIssues=(Pt=[])=>{this.issues=[...this.issues,...Pt]};const bt=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,bt):this.__proto__=bt,this.name="ZodError",this.issues=gt}get errors(){return this.issues}format(gt){const bt=gt||function(ri){return ri.message},Pt={_errors:[]},ee=ri=>{for(const Ne of ri.issues)if(Ne.code==="invalid_union")Ne.unionErrors.map(ee);else if(Ne.code==="invalid_return_type")ee(Ne.returnTypeError);else if(Ne.code==="invalid_arguments")ee(Ne.argumentsError);else if(Ne.path.length===0)Pt._errors.push(bt(Ne));else{let ve=Pt,_i=0;for(;_i<Ne.path.length;){const bi=Ne.path[_i];_i===Ne.path.length-1?(ve[bi]=ve[bi]||{_errors:[]},ve[bi]._errors.push(bt(Ne))):ve[bi]=ve[bi]||{_errors:[]},ve=ve[bi],_i++}}};return ee(this),Pt}toString(){return this.message}get message(){return JSON.stringify(this.issues,o.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(gt=bt=>bt.message){const bt={},Pt=[];for(const ee of this.issues)ee.path.length>0?(bt[ee.path[0]]=bt[ee.path[0]]||[],bt[ee.path[0]].push(gt(ee))):Pt.push(gt(ee));return{formErrors:Pt,fieldErrors:bt}}get formErrors(){return this.flatten()}}C.create=Ft=>new C(Ft);const Z=(Ft,gt)=>{let bt;switch(Ft.code){case P.invalid_type:bt=Ft.received===L.undefined?"Required":`Expected ${Ft.expected}, received ${Ft.received}`;break;case P.invalid_literal:bt=`Invalid literal value, expected ${JSON.stringify(Ft.expected,o.jsonStringifyReplacer)}`;break;case P.unrecognized_keys:bt=`Unrecognized key(s) in object: ${o.joinValues(Ft.keys,", ")}`;break;case P.invalid_union:bt="Invalid input";break;case P.invalid_union_discriminator:bt=`Invalid discriminator value. Expected ${o.joinValues(Ft.options)}`;break;case P.invalid_enum_value:bt=`Invalid enum value. Expected ${o.joinValues(Ft.options)}, received '${Ft.received}'`;break;case P.invalid_arguments:bt="Invalid function arguments";break;case P.invalid_return_type:bt="Invalid function return type";break;case P.invalid_date:bt="Invalid date";break;case P.invalid_string:typeof Ft.validation=="object"?"includes"in Ft.validation?(bt=`Invalid input: must include "${Ft.validation.includes}"`,typeof Ft.validation.position=="number"&&(bt=`${bt} at one or more positions greater than or equal to ${Ft.validation.position}`)):"startsWith"in Ft.validation?bt=`Invalid input: must start with "${Ft.validation.startsWith}"`:"endsWith"in Ft.validation?bt=`Invalid input: must end with "${Ft.validation.endsWith}"`:o.assertNever(Ft.validation):bt=Ft.validation!=="regex"?`Invalid ${Ft.validation}`:"Invalid";break;case P.too_small:bt=Ft.type==="array"?`Array must contain ${Ft.exact?"exactly":Ft.inclusive?"at least":"more than"} ${Ft.minimum} element(s)`:Ft.type==="string"?`String must contain ${Ft.exact?"exactly":Ft.inclusive?"at least":"over"} ${Ft.minimum} character(s)`:Ft.type==="number"?`Number must be ${Ft.exact?"exactly equal to ":Ft.inclusive?"greater than or equal to ":"greater than "}${Ft.minimum}`:Ft.type==="date"?`Date must be ${Ft.exact?"exactly equal to ":Ft.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(Ft.minimum))}`:"Invalid input";break;case P.too_big:bt=Ft.type==="array"?`Array must contain ${Ft.exact?"exactly":Ft.inclusive?"at most":"less than"} ${Ft.maximum} element(s)`:Ft.type==="string"?`String must contain ${Ft.exact?"exactly":Ft.inclusive?"at most":"under"} ${Ft.maximum} character(s)`:Ft.type==="number"?`Number must be ${Ft.exact?"exactly":Ft.inclusive?"less than or equal to":"less than"} ${Ft.maximum}`:Ft.type==="bigint"?`BigInt must be ${Ft.exact?"exactly":Ft.inclusive?"less than or equal to":"less than"} ${Ft.maximum}`:Ft.type==="date"?`Date must be ${Ft.exact?"exactly":Ft.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(Ft.maximum))}`:"Invalid input";break;case P.custom:bt="Invalid input";break;case P.invalid_intersection_types:bt="Intersection results could not be merged";break;case P.not_multiple_of:bt=`Number must be a multiple of ${Ft.multipleOf}`;break;case P.not_finite:bt="Number must be finite";break;default:bt=gt.defaultError,o.assertNever(Ft)}return{message:bt}};let j=Z;function dt(Ft){j=Ft}function Y(){return j}const W=Ft=>{const{data:gt,path:bt,errorMaps:Pt,issueData:ee}=Ft,ri=[...bt,...ee.path||[]],Ne={...ee,path:ri};let ve="";const _i=Pt.filter(bi=>!!bi).slice().reverse();for(const bi of _i)ve=bi(Ne,{data:gt,defaultError:ve}).message;return{...ee,path:ri,message:ee.message||ve}},u=[];function O(Ft,gt){const bt=W({issueData:gt,data:Ft.data,path:Ft.path,errorMaps:[Ft.common.contextualErrorMap,Ft.schemaErrorMap,Y(),Z].filter(Pt=>!!Pt)});Ft.common.issues.push(bt)}class X{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(gt,bt){const Pt=[];for(const ee of bt){if(ee.status==="aborted")return ht;ee.status==="dirty"&&gt.dirty(),Pt.push(ee.value)}return{status:gt.value,value:Pt}}static async mergeObjectAsync(gt,bt){const Pt=[];for(const ee of bt)Pt.push({key:await ee.key,value:await ee.value});return X.mergeObjectSync(gt,Pt)}static mergeObjectSync(gt,bt){const Pt={};for(const ee of bt){const{key:ri,value:Ne}=ee;if(ri.status==="aborted"||Ne.status==="aborted")return ht;ri.status==="dirty"&&gt.dirty(),Ne.status==="dirty"&&gt.dirty(),ri.value==="__proto__"||Ne.value===void 0&&!ee.alwaysSet||(Pt[ri.value]=Ne.value)}return{status:gt.value,value:Pt}}}const ht=Object.freeze({status:"aborted"}),pt=Ft=>({status:"dirty",value:Ft}),ft=Ft=>({status:"valid",value:Ft}),$=Ft=>Ft.status==="aborted",At=Ft=>Ft.status==="dirty",_t=Ft=>Ft.status==="valid",ut=Ft=>typeof Promise<"u"&&Ft instanceof Promise;var Ct;(function(Ft){Ft.errToObj=gt=>typeof gt=="string"?{message:gt}:gt||{},Ft.toString=gt=>typeof gt=="string"?gt:gt?.message})(Ct||(Ct={}));class vt{constructor(gt,bt,Pt,ee){this._cachedPath=[],this.parent=gt,this.data=bt,this._path=Pt,this._key=ee}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const xt=(Ft,gt)=>{if(_t(gt))return{success:!0,data:gt.value};if(!Ft.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const bt=new C(Ft.common.issues);return this._error=bt,this._error}}};function lt(Ft){if(!Ft)return{};const{errorMap:gt,invalid_type_error:bt,required_error:Pt,description:ee}=Ft;if(gt&&(bt||Pt))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return gt?{errorMap:gt,description:ee}:{errorMap:(ri,Ne)=>ri.code!=="invalid_type"?{message:Ne.defaultError}:Ne.data===void 0?{message:Pt??Ne.defaultError}:{message:bt??Ne.defaultError},description:ee}}class kt{constructor(gt){this.spa=this.safeParseAsync,this._def=gt,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(gt){return Q(gt.data)}_getOrReturnCtx(gt,bt){return bt||{common:gt.parent.common,data:gt.data,parsedType:Q(gt.data),schemaErrorMap:this._def.errorMap,path:gt.path,parent:gt.parent}}_processInputParams(gt){return{status:new X,ctx:{common:gt.parent.common,data:gt.data,parsedType:Q(gt.data),schemaErrorMap:this._def.errorMap,path:gt.path,parent:gt.parent}}}_parseSync(gt){const bt=this._parse(gt);if(ut(bt))throw new Error("Synchronous parse encountered promise.");return bt}_parseAsync(gt){const bt=this._parse(gt);return Promise.resolve(bt)}parse(gt,bt){const Pt=this.safeParse(gt,bt);if(Pt.success)return Pt.data;throw Pt.error}safeParse(gt,bt){var Pt;const ee={common:{issues:[],async:(Pt=bt?.async)!==null&&Pt!==void 0&&Pt,contextualErrorMap:bt?.errorMap},path:bt?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:gt,parsedType:Q(gt)},ri=this._parseSync({data:gt,path:ee.path,parent:ee});return xt(ee,ri)}async parseAsync(gt,bt){const Pt=await this.safeParseAsync(gt,bt);if(Pt.success)return Pt.data;throw Pt.error}async safeParseAsync(gt,bt){const Pt={common:{issues:[],contextualErrorMap:bt?.errorMap,async:!0},path:bt?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:gt,parsedType:Q(gt)},ee=this._parse({data:gt,path:Pt.path,parent:Pt}),ri=await(ut(ee)?ee:Promise.resolve(ee));return xt(Pt,ri)}refine(gt,bt){const Pt=ee=>typeof bt=="string"||bt===void 0?{message:bt}:typeof bt=="function"?bt(ee):bt;return this._refinement((ee,ri)=>{const Ne=gt(ee),ve=()=>ri.addIssue({code:P.custom,...Pt(ee)});return typeof Promise<"u"&&Ne instanceof Promise?Ne.then(_i=>!!_i||(ve(),!1)):!!Ne||(ve(),!1)})}refinement(gt,bt){return this._refinement((Pt,ee)=>!!gt(Pt)||(ee.addIssue(typeof bt=="function"?bt(Pt,ee):bt),!1))}_refinement(gt){return new Ge({schema:this,typeName:ni.ZodEffects,effect:{type:"refinement",refinement:gt}})}superRefine(gt){return this._refinement(gt)}optional(){return di.create(this,this._def)}nullable(){return Pi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Gt.create(this,this._def)}promise(){return Je.create(this,this._def)}or(gt){return ge.create([this,gt],this._def)}and(gt){return Ei.create(this,gt,this._def)}transform(gt){return new Ge({...lt(this._def),schema:this,typeName:ni.ZodEffects,effect:{type:"transform",transform:gt}})}default(gt){const bt=typeof gt=="function"?gt:()=>gt;return new Ti({...lt(this._def),innerType:this,defaultValue:bt,typeName:ni.ZodDefault})}brand(){return new hs({typeName:ni.ZodBranded,type:this,...lt(this._def)})}catch(gt){const bt=typeof gt=="function"?gt:()=>gt;return new Oi({...lt(this._def),innerType:this,catchValue:bt,typeName:ni.ZodCatch})}describe(gt){return new this.constructor({...this._def,description:gt})}pipe(gt){return ns.create(this,gt)}readonly(){return ys.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Jt=/^c[^\s-]{8,}$/i,Ut=/^[a-z][a-z0-9]*$/,Ae=/^[0-9A-HJKMNP-TV-Z]{26}$/,Ot=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,$t=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Zt;const Yt=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Ve=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;class xe extends kt{_parse(gt){if(this._def.coerce&&(gt.data=String(gt.data)),this._getType(gt)!==L.string){const ve=this._getOrReturnCtx(gt);return O(ve,{code:P.invalid_type,expected:L.string,received:ve.parsedType}),ht}const bt=new X;let Pt;for(const ve of this._def.checks)if(ve.kind==="min")gt.data.length<ve.value&&(Pt=this._getOrReturnCtx(gt,Pt),O(Pt,{code:P.too_small,minimum:ve.value,type:"string",inclusive:!0,exact:!1,message:ve.message}),bt.dirty());else if(ve.kind==="max")gt.data.length>ve.value&&(Pt=this._getOrReturnCtx(gt,Pt),O(Pt,{code:P.too_big,maximum:ve.value,type:"string",inclusive:!0,exact:!1,message:ve.message}),bt.dirty());else if(ve.kind==="length"){const _i=gt.data.length>ve.value,bi=gt.data.length<ve.value;(_i||bi)&&(Pt=this._getOrReturnCtx(gt,Pt),_i?O(Pt,{code:P.too_big,maximum:ve.value,type:"string",inclusive:!0,exact:!0,message:ve.message}):bi&&O(Pt,{code:P.too_small,minimum:ve.value,type:"string",inclusive:!0,exact:!0,message:ve.message}),bt.dirty())}else if(ve.kind==="email")$t.test(gt.data)||(Pt=this._getOrReturnCtx(gt,Pt),O(Pt,{validation:"email",code:P.invalid_string,message:ve.message}),bt.dirty());else if(ve.kind==="emoji")Zt||(Zt=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Zt.test(gt.data)||(Pt=this._getOrReturnCtx(gt,Pt),O(Pt,{validation:"emoji",code:P.invalid_string,message:ve.message}),bt.dirty());else if(ve.kind==="uuid")Ot.test(gt.data)||(Pt=this._getOrReturnCtx(gt,Pt),O(Pt,{validation:"uuid",code:P.invalid_string,message:ve.message}),bt.dirty());else if(ve.kind==="cuid")Jt.test(gt.data)||(Pt=this._getOrReturnCtx(gt,Pt),O(Pt,{validation:"cuid",code:P.invalid_string,message:ve.message}),bt.dirty());else if(ve.kind==="cuid2")Ut.test(gt.data)||(Pt=this._getOrReturnCtx(gt,Pt),O(Pt,{validation:"cuid2",code:P.invalid_string,message:ve.message}),bt.dirty());else if(ve.kind==="ulid")Ae.test(gt.data)||(Pt=this._getOrReturnCtx(gt,Pt),O(Pt,{validation:"ulid",code:P.invalid_string,message:ve.message}),bt.dirty());else if(ve.kind==="url")try{new URL(gt.data)}catch{Pt=this._getOrReturnCtx(gt,Pt),O(Pt,{validation:"url",code:P.invalid_string,message:ve.message}),bt.dirty()}else ve.kind==="regex"?(ve.regex.lastIndex=0,ve.regex.test(gt.data)||(Pt=this._getOrReturnCtx(gt,Pt),O(Pt,{validation:"regex",code:P.invalid_string,message:ve.message}),bt.dirty())):ve.kind==="trim"?gt.data=gt.data.trim():ve.kind==="includes"?gt.data.includes(ve.value,ve.position)||(Pt=this._getOrReturnCtx(gt,Pt),O(Pt,{code:P.invalid_string,validation:{includes:ve.value,position:ve.position},message:ve.message}),bt.dirty()):ve.kind==="toLowerCase"?gt.data=gt.data.toLowerCase():ve.kind==="toUpperCase"?gt.data=gt.data.toUpperCase():ve.kind==="startsWith"?gt.data.startsWith(ve.value)||(Pt=this._getOrReturnCtx(gt,Pt),O(Pt,{code:P.invalid_string,validation:{startsWith:ve.value},message:ve.message}),bt.dirty()):ve.kind==="endsWith"?gt.data.endsWith(ve.value)||(Pt=this._getOrReturnCtx(gt,Pt),O(Pt,{code:P.invalid_string,validation:{endsWith:ve.value},message:ve.message}),bt.dirty()):ve.kind==="datetime"?((Ne=ve).precision?Ne.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${Ne.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${Ne.precision}}Z$`):Ne.precision===0?Ne.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):Ne.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(gt.data)||(Pt=this._getOrReturnCtx(gt,Pt),O(Pt,{code:P.invalid_string,validation:"datetime",message:ve.message}),bt.dirty()):ve.kind==="ip"?(ee=gt.data,((ri=ve.version)!=="v4"&&ri||!Yt.test(ee))&&(ri!=="v6"&&ri||!Ve.test(ee))&&(Pt=this._getOrReturnCtx(gt,Pt),O(Pt,{validation:"ip",code:P.invalid_string,message:ve.message}),bt.dirty())):o.assertNever(ve);var ee,ri,Ne;return{status:bt.value,value:gt.data}}_regex(gt,bt,Pt){return this.refinement(ee=>gt.test(ee),{validation:bt,code:P.invalid_string,...Ct.errToObj(Pt)})}_addCheck(gt){return new xe({...this._def,checks:[...this._def.checks,gt]})}email(gt){return this._addCheck({kind:"email",...Ct.errToObj(gt)})}url(gt){return this._addCheck({kind:"url",...Ct.errToObj(gt)})}emoji(gt){return this._addCheck({kind:"emoji",...Ct.errToObj(gt)})}uuid(gt){return this._addCheck({kind:"uuid",...Ct.errToObj(gt)})}cuid(gt){return this._addCheck({kind:"cuid",...Ct.errToObj(gt)})}cuid2(gt){return this._addCheck({kind:"cuid2",...Ct.errToObj(gt)})}ulid(gt){return this._addCheck({kind:"ulid",...Ct.errToObj(gt)})}ip(gt){return this._addCheck({kind:"ip",...Ct.errToObj(gt)})}datetime(gt){var bt;return typeof gt=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:gt}):this._addCheck({kind:"datetime",precision:gt?.precision===void 0?null:gt?.precision,offset:(bt=gt?.offset)!==null&&bt!==void 0&&bt,...Ct.errToObj(gt?.message)})}regex(gt,bt){return this._addCheck({kind:"regex",regex:gt,...Ct.errToObj(bt)})}includes(gt,bt){return this._addCheck({kind:"includes",value:gt,position:bt?.position,...Ct.errToObj(bt?.message)})}startsWith(gt,bt){return this._addCheck({kind:"startsWith",value:gt,...Ct.errToObj(bt)})}endsWith(gt,bt){return this._addCheck({kind:"endsWith",value:gt,...Ct.errToObj(bt)})}min(gt,bt){return this._addCheck({kind:"min",value:gt,...Ct.errToObj(bt)})}max(gt,bt){return this._addCheck({kind:"max",value:gt,...Ct.errToObj(bt)})}length(gt,bt){return this._addCheck({kind:"length",value:gt,...Ct.errToObj(bt)})}nonempty(gt){return this.min(1,Ct.errToObj(gt))}trim(){return new xe({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new xe({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new xe({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(gt=>gt.kind==="datetime")}get isEmail(){return!!this._def.checks.find(gt=>gt.kind==="email")}get isURL(){return!!this._def.checks.find(gt=>gt.kind==="url")}get isEmoji(){return!!this._def.checks.find(gt=>gt.kind==="emoji")}get isUUID(){return!!this._def.checks.find(gt=>gt.kind==="uuid")}get isCUID(){return!!this._def.checks.find(gt=>gt.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(gt=>gt.kind==="cuid2")}get isULID(){return!!this._def.checks.find(gt=>gt.kind==="ulid")}get isIP(){return!!this._def.checks.find(gt=>gt.kind==="ip")}get minLength(){let gt=null;for(const bt of this._def.checks)bt.kind==="min"&&(gt===null||bt.value>gt)&&(gt=bt.value);return gt}get maxLength(){let gt=null;for(const bt of this._def.checks)bt.kind==="max"&&(gt===null||bt.value<gt)&&(gt=bt.value);return gt}}function Ee(Ft,gt){const bt=(Ft.toString().split(".")[1]||"").length,Pt=(gt.toString().split(".")[1]||"").length,ee=bt>Pt?bt:Pt;return parseInt(Ft.toFixed(ee).replace(".",""))%parseInt(gt.toFixed(ee).replace(".",""))/Math.pow(10,ee)}xe.create=Ft=>{var gt;return new xe({checks:[],typeName:ni.ZodString,coerce:(gt=Ft?.coerce)!==null&&gt!==void 0&&gt,...lt(Ft)})};class Qe extends kt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(gt){if(this._def.coerce&&(gt.data=Number(gt.data)),this._getType(gt)!==L.number){const ee=this._getOrReturnCtx(gt);return O(ee,{code:P.invalid_type,expected:L.number,received:ee.parsedType}),ht}let bt;const Pt=new X;for(const ee of this._def.checks)ee.kind==="int"?o.isInteger(gt.data)||(bt=this._getOrReturnCtx(gt,bt),O(bt,{code:P.invalid_type,expected:"integer",received:"float",message:ee.message}),Pt.dirty()):ee.kind==="min"?(ee.inclusive?gt.data<ee.value:gt.data<=ee.value)&&(bt=this._getOrReturnCtx(gt,bt),O(bt,{code:P.too_small,minimum:ee.value,type:"number",inclusive:ee.inclusive,exact:!1,message:ee.message}),Pt.dirty()):ee.kind==="max"?(ee.inclusive?gt.data>ee.value:gt.data>=ee.value)&&(bt=this._getOrReturnCtx(gt,bt),O(bt,{code:P.too_big,maximum:ee.value,type:"number",inclusive:ee.inclusive,exact:!1,message:ee.message}),Pt.dirty()):ee.kind==="multipleOf"?Ee(gt.data,ee.value)!==0&&(bt=this._getOrReturnCtx(gt,bt),O(bt,{code:P.not_multiple_of,multipleOf:ee.value,message:ee.message}),Pt.dirty()):ee.kind==="finite"?Number.isFinite(gt.data)||(bt=this._getOrReturnCtx(gt,bt),O(bt,{code:P.not_finite,message:ee.message}),Pt.dirty()):o.assertNever(ee);return{status:Pt.value,value:gt.data}}gte(gt,bt){return this.setLimit("min",gt,!0,Ct.toString(bt))}gt(gt,bt){return this.setLimit("min",gt,!1,Ct.toString(bt))}lte(gt,bt){return this.setLimit("max",gt,!0,Ct.toString(bt))}lt(gt,bt){return this.setLimit("max",gt,!1,Ct.toString(bt))}setLimit(gt,bt,Pt,ee){return new Qe({...this._def,checks:[...this._def.checks,{kind:gt,value:bt,inclusive:Pt,message:Ct.toString(ee)}]})}_addCheck(gt){return new Qe({...this._def,checks:[...this._def.checks,gt]})}int(gt){return this._addCheck({kind:"int",message:Ct.toString(gt)})}positive(gt){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ct.toString(gt)})}negative(gt){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ct.toString(gt)})}nonpositive(gt){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ct.toString(gt)})}nonnegative(gt){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ct.toString(gt)})}multipleOf(gt,bt){return this._addCheck({kind:"multipleOf",value:gt,message:Ct.toString(bt)})}finite(gt){return this._addCheck({kind:"finite",message:Ct.toString(gt)})}safe(gt){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ct.toString(gt)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ct.toString(gt)})}get minValue(){let gt=null;for(const bt of this._def.checks)bt.kind==="min"&&(gt===null||bt.value>gt)&&(gt=bt.value);return gt}get maxValue(){let gt=null;for(const bt of this._def.checks)bt.kind==="max"&&(gt===null||bt.value<gt)&&(gt=bt.value);return gt}get isInt(){return!!this._def.checks.find(gt=>gt.kind==="int"||gt.kind==="multipleOf"&&o.isInteger(gt.value))}get isFinite(){let gt=null,bt=null;for(const Pt of this._def.checks){if(Pt.kind==="finite"||Pt.kind==="int"||Pt.kind==="multipleOf")return!0;Pt.kind==="min"?(bt===null||Pt.value>bt)&&(bt=Pt.value):Pt.kind==="max"&&(gt===null||Pt.value<gt)&&(gt=Pt.value)}return Number.isFinite(bt)&&Number.isFinite(gt)}}Qe.create=Ft=>new Qe({checks:[],typeName:ni.ZodNumber,coerce:Ft?.coerce||!1,...lt(Ft)});class Bt extends kt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(gt){if(this._def.coerce&&(gt.data=BigInt(gt.data)),this._getType(gt)!==L.bigint){const ee=this._getOrReturnCtx(gt);return O(ee,{code:P.invalid_type,expected:L.bigint,received:ee.parsedType}),ht}let bt;const Pt=new X;for(const ee of this._def.checks)ee.kind==="min"?(ee.inclusive?gt.data<ee.value:gt.data<=ee.value)&&(bt=this._getOrReturnCtx(gt,bt),O(bt,{code:P.too_small,type:"bigint",minimum:ee.value,inclusive:ee.inclusive,message:ee.message}),Pt.dirty()):ee.kind==="max"?(ee.inclusive?gt.data>ee.value:gt.data>=ee.value)&&(bt=this._getOrReturnCtx(gt,bt),O(bt,{code:P.too_big,type:"bigint",maximum:ee.value,inclusive:ee.inclusive,message:ee.message}),Pt.dirty()):ee.kind==="multipleOf"?gt.data%ee.value!==BigInt(0)&&(bt=this._getOrReturnCtx(gt,bt),O(bt,{code:P.not_multiple_of,multipleOf:ee.value,message:ee.message}),Pt.dirty()):o.assertNever(ee);return{status:Pt.value,value:gt.data}}gte(gt,bt){return this.setLimit("min",gt,!0,Ct.toString(bt))}gt(gt,bt){return this.setLimit("min",gt,!1,Ct.toString(bt))}lte(gt,bt){return this.setLimit("max",gt,!0,Ct.toString(bt))}lt(gt,bt){return this.setLimit("max",gt,!1,Ct.toString(bt))}setLimit(gt,bt,Pt,ee){return new Bt({...this._def,checks:[...this._def.checks,{kind:gt,value:bt,inclusive:Pt,message:Ct.toString(ee)}]})}_addCheck(gt){return new Bt({...this._def,checks:[...this._def.checks,gt]})}positive(gt){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ct.toString(gt)})}negative(gt){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ct.toString(gt)})}nonpositive(gt){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ct.toString(gt)})}nonnegative(gt){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ct.toString(gt)})}multipleOf(gt,bt){return this._addCheck({kind:"multipleOf",value:gt,message:Ct.toString(bt)})}get minValue(){let gt=null;for(const bt of this._def.checks)bt.kind==="min"&&(gt===null||bt.value>gt)&&(gt=bt.value);return gt}get maxValue(){let gt=null;for(const bt of this._def.checks)bt.kind==="max"&&(gt===null||bt.value<gt)&&(gt=bt.value);return gt}}Bt.create=Ft=>{var gt;return new Bt({checks:[],typeName:ni.ZodBigInt,coerce:(gt=Ft?.coerce)!==null&&gt!==void 0&&gt,...lt(Ft)})};class ot extends kt{_parse(gt){if(this._def.coerce&&(gt.data=!!gt.data),this._getType(gt)!==L.boolean){const bt=this._getOrReturnCtx(gt);return O(bt,{code:P.invalid_type,expected:L.boolean,received:bt.parsedType}),ht}return ft(gt.data)}}ot.create=Ft=>new ot({typeName:ni.ZodBoolean,coerce:Ft?.coerce||!1,...lt(Ft)});class It extends kt{_parse(gt){if(this._def.coerce&&(gt.data=new Date(gt.data)),this._getType(gt)!==L.date){const ee=this._getOrReturnCtx(gt);return O(ee,{code:P.invalid_type,expected:L.date,received:ee.parsedType}),ht}if(isNaN(gt.data.getTime()))return O(this._getOrReturnCtx(gt),{code:P.invalid_date}),ht;const bt=new X;let Pt;for(const ee of this._def.checks)ee.kind==="min"?gt.data.getTime()<ee.value&&(Pt=this._getOrReturnCtx(gt,Pt),O(Pt,{code:P.too_small,message:ee.message,inclusive:!0,exact:!1,minimum:ee.value,type:"date"}),bt.dirty()):ee.kind==="max"?gt.data.getTime()>ee.value&&(Pt=this._getOrReturnCtx(gt,Pt),O(Pt,{code:P.too_big,message:ee.message,inclusive:!0,exact:!1,maximum:ee.value,type:"date"}),bt.dirty()):o.assertNever(ee);return{status:bt.value,value:new Date(gt.data.getTime())}}_addCheck(gt){return new It({...this._def,checks:[...this._def.checks,gt]})}min(gt,bt){return this._addCheck({kind:"min",value:gt.getTime(),message:Ct.toString(bt)})}max(gt,bt){return this._addCheck({kind:"max",value:gt.getTime(),message:Ct.toString(bt)})}get minDate(){let gt=null;for(const bt of this._def.checks)bt.kind==="min"&&(gt===null||bt.value>gt)&&(gt=bt.value);return gt!=null?new Date(gt):null}get maxDate(){let gt=null;for(const bt of this._def.checks)bt.kind==="max"&&(gt===null||bt.value<gt)&&(gt=bt.value);return gt!=null?new Date(gt):null}}It.create=Ft=>new It({checks:[],coerce:Ft?.coerce||!1,typeName:ni.ZodDate,...lt(Ft)});class Nt extends kt{_parse(gt){if(this._getType(gt)!==L.symbol){const bt=this._getOrReturnCtx(gt);return O(bt,{code:P.invalid_type,expected:L.symbol,received:bt.parsedType}),ht}return ft(gt.data)}}Nt.create=Ft=>new Nt({typeName:ni.ZodSymbol,...lt(Ft)});class yt extends kt{_parse(gt){if(this._getType(gt)!==L.undefined){const bt=this._getOrReturnCtx(gt);return O(bt,{code:P.invalid_type,expected:L.undefined,received:bt.parsedType}),ht}return ft(gt.data)}}yt.create=Ft=>new yt({typeName:ni.ZodUndefined,...lt(Ft)});class re extends kt{_parse(gt){if(this._getType(gt)!==L.null){const bt=this._getOrReturnCtx(gt);return O(bt,{code:P.invalid_type,expected:L.null,received:bt.parsedType}),ht}return ft(gt.data)}}re.create=Ft=>new re({typeName:ni.ZodNull,...lt(Ft)});class Wt extends kt{constructor(){super(...arguments),this._any=!0}_parse(gt){return ft(gt.data)}}Wt.create=Ft=>new Wt({typeName:ni.ZodAny,...lt(Ft)});class Vt extends kt{constructor(){super(...arguments),this._unknown=!0}_parse(gt){return ft(gt.data)}}Vt.create=Ft=>new Vt({typeName:ni.ZodUnknown,...lt(Ft)});class Tt extends kt{_parse(gt){const bt=this._getOrReturnCtx(gt);return O(bt,{code:P.invalid_type,expected:L.never,received:bt.parsedType}),ht}}Tt.create=Ft=>new Tt({typeName:ni.ZodNever,...lt(Ft)});class qt extends kt{_parse(gt){if(this._getType(gt)!==L.undefined){const bt=this._getOrReturnCtx(gt);return O(bt,{code:P.invalid_type,expected:L.void,received:bt.parsedType}),ht}return ft(gt.data)}}qt.create=Ft=>new qt({typeName:ni.ZodVoid,...lt(Ft)});class Gt extends kt{_parse(gt){const{ctx:bt,status:Pt}=this._processInputParams(gt),ee=this._def;if(bt.parsedType!==L.array)return O(bt,{code:P.invalid_type,expected:L.array,received:bt.parsedType}),ht;if(ee.exactLength!==null){const Ne=bt.data.length>ee.exactLength.value,ve=bt.data.length<ee.exactLength.value;(Ne||ve)&&(O(bt,{code:Ne?P.too_big:P.too_small,minimum:ve?ee.exactLength.value:void 0,maximum:Ne?ee.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:ee.exactLength.message}),Pt.dirty())}if(ee.minLength!==null&&bt.data.length<ee.minLength.value&&(O(bt,{code:P.too_small,minimum:ee.minLength.value,type:"array",inclusive:!0,exact:!1,message:ee.minLength.message}),Pt.dirty()),ee.maxLength!==null&&bt.data.length>ee.maxLength.value&&(O(bt,{code:P.too_big,maximum:ee.maxLength.value,type:"array",inclusive:!0,exact:!1,message:ee.maxLength.message}),Pt.dirty()),bt.common.async)return Promise.all([...bt.data].map((Ne,ve)=>ee.type._parseAsync(new vt(bt,Ne,bt.path,ve)))).then(Ne=>X.mergeArray(Pt,Ne));const ri=[...bt.data].map((Ne,ve)=>ee.type._parseSync(new vt(bt,Ne,bt.path,ve)));return X.mergeArray(Pt,ri)}get element(){return this._def.type}min(gt,bt){return new Gt({...this._def,minLength:{value:gt,message:Ct.toString(bt)}})}max(gt,bt){return new Gt({...this._def,maxLength:{value:gt,message:Ct.toString(bt)}})}length(gt,bt){return new Gt({...this._def,exactLength:{value:gt,message:Ct.toString(bt)}})}nonempty(gt){return this.min(1,gt)}}function se(Ft){if(Ft instanceof te){const gt={};for(const bt in Ft.shape){const Pt=Ft.shape[bt];gt[bt]=di.create(se(Pt))}return new te({...Ft._def,shape:()=>gt})}return Ft instanceof Gt?new Gt({...Ft._def,type:se(Ft.element)}):Ft instanceof di?di.create(se(Ft.unwrap())):Ft instanceof Pi?Pi.create(se(Ft.unwrap())):Ft instanceof li?li.create(Ft.items.map(gt=>se(gt))):Ft}Gt.create=(Ft,gt)=>new Gt({type:Ft,minLength:null,maxLength:null,exactLength:null,typeName:ni.ZodArray,...lt(gt)});class te extends kt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const gt=this._def.shape(),bt=o.objectKeys(gt);return this._cached={shape:gt,keys:bt}}_parse(gt){if(this._getType(gt)!==L.object){const _i=this._getOrReturnCtx(gt);return O(_i,{code:P.invalid_type,expected:L.object,received:_i.parsedType}),ht}const{status:bt,ctx:Pt}=this._processInputParams(gt),{shape:ee,keys:ri}=this._getCached(),Ne=[];if(!(this._def.catchall instanceof Tt&&this._def.unknownKeys==="strip"))for(const _i in Pt.data)ri.includes(_i)||Ne.push(_i);const ve=[];for(const _i of ri){const bi=ee[_i],ds=Pt.data[_i];ve.push({key:{status:"valid",value:_i},value:bi._parse(new vt(Pt,ds,Pt.path,_i)),alwaysSet:_i in Pt.data})}if(this._def.catchall instanceof Tt){const _i=this._def.unknownKeys;if(_i==="passthrough")for(const bi of Ne)ve.push({key:{status:"valid",value:bi},value:{status:"valid",value:Pt.data[bi]}});else if(_i==="strict")Ne.length>0&&(O(Pt,{code:P.unrecognized_keys,keys:Ne}),bt.dirty());else if(_i!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const _i=this._def.catchall;for(const bi of Ne){const ds=Pt.data[bi];ve.push({key:{status:"valid",value:bi},value:_i._parse(new vt(Pt,ds,Pt.path,bi)),alwaysSet:bi in Pt.data})}}return Pt.common.async?Promise.resolve().then(async()=>{const _i=[];for(const bi of ve){const ds=await bi.key;_i.push({key:ds,value:await bi.value,alwaysSet:bi.alwaysSet})}return _i}).then(_i=>X.mergeObjectSync(bt,_i)):X.mergeObjectSync(bt,ve)}get shape(){return this._def.shape()}strict(gt){return Ct.errToObj,new te({...this._def,unknownKeys:"strict",...gt!==void 0?{errorMap:(bt,Pt)=>{var ee,ri,Ne,ve;const _i=(Ne=(ri=(ee=this._def).errorMap)===null||ri===void 0?void 0:ri.call(ee,bt,Pt).message)!==null&&Ne!==void 0?Ne:Pt.defaultError;return bt.code==="unrecognized_keys"?{message:(ve=Ct.errToObj(gt).message)!==null&&ve!==void 0?ve:_i}:{message:_i}}}:{}})}strip(){return new te({...this._def,unknownKeys:"strip"})}passthrough(){return new te({...this._def,unknownKeys:"passthrough"})}extend(gt){return new te({...this._def,shape:()=>({...this._def.shape(),...gt})})}merge(gt){return new te({unknownKeys:gt._def.unknownKeys,catchall:gt._def.catchall,shape:()=>({...this._def.shape(),...gt._def.shape()}),typeName:ni.ZodObject})}setKey(gt,bt){return this.augment({[gt]:bt})}catchall(gt){return new te({...this._def,catchall:gt})}pick(gt){const bt={};return o.objectKeys(gt).forEach(Pt=>{gt[Pt]&&this.shape[Pt]&&(bt[Pt]=this.shape[Pt])}),new te({...this._def,shape:()=>bt})}omit(gt){const bt={};return o.objectKeys(this.shape).forEach(Pt=>{gt[Pt]||(bt[Pt]=this.shape[Pt])}),new te({...this._def,shape:()=>bt})}deepPartial(){return se(this)}partial(gt){const bt={};return o.objectKeys(this.shape).forEach(Pt=>{const ee=this.shape[Pt];gt&&!gt[Pt]?bt[Pt]=ee:bt[Pt]=ee.optional()}),new te({...this._def,shape:()=>bt})}required(gt){const bt={};return o.objectKeys(this.shape).forEach(Pt=>{if(gt&&!gt[Pt])bt[Pt]=this.shape[Pt];else{let ee=this.shape[Pt];for(;ee instanceof di;)ee=ee._def.innerType;bt[Pt]=ee}}),new te({...this._def,shape:()=>bt})}keyof(){return ii(o.objectKeys(this.shape))}}te.create=(Ft,gt)=>new te({shape:()=>Ft,unknownKeys:"strip",catchall:Tt.create(),typeName:ni.ZodObject,...lt(gt)}),te.strictCreate=(Ft,gt)=>new te({shape:()=>Ft,unknownKeys:"strict",catchall:Tt.create(),typeName:ni.ZodObject,...lt(gt)}),te.lazycreate=(Ft,gt)=>new te({shape:Ft,unknownKeys:"strip",catchall:Tt.create(),typeName:ni.ZodObject,...lt(gt)});class ge extends kt{_parse(gt){const{ctx:bt}=this._processInputParams(gt),Pt=this._def.options;if(bt.common.async)return Promise.all(Pt.map(async ee=>{const ri={...bt,common:{...bt.common,issues:[]},parent:null};return{result:await ee._parseAsync({data:bt.data,path:bt.path,parent:ri}),ctx:ri}})).then(function(ee){for(const Ne of ee)if(Ne.result.status==="valid")return Ne.result;for(const Ne of ee)if(Ne.result.status==="dirty")return bt.common.issues.push(...Ne.ctx.common.issues),Ne.result;const ri=ee.map(Ne=>new C(Ne.ctx.common.issues));return O(bt,{code:P.invalid_union,unionErrors:ri}),ht});{let ee;const ri=[];for(const ve of Pt){const _i={...bt,common:{...bt.common,issues:[]},parent:null},bi=ve._parseSync({data:bt.data,path:bt.path,parent:_i});if(bi.status==="valid")return bi;bi.status!=="dirty"||ee||(ee={result:bi,ctx:_i}),_i.common.issues.length&&ri.push(_i.common.issues)}if(ee)return bt.common.issues.push(...ee.ctx.common.issues),ee.result;const Ne=ri.map(ve=>new C(ve));return O(bt,{code:P.invalid_union,unionErrors:Ne}),ht}}get options(){return this._def.options}}ge.create=(Ft,gt)=>new ge({options:Ft,typeName:ni.ZodUnion,...lt(gt)});const Me=Ft=>Ft instanceof pi?Me(Ft.schema):Ft instanceof Ge?Me(Ft.innerType()):Ft instanceof $e?[Ft.value]:Ft instanceof Le?Ft.options:Ft instanceof me?Object.keys(Ft.enum):Ft instanceof Ti?Me(Ft._def.innerType):Ft instanceof yt?[void 0]:Ft instanceof re?[null]:null;class Ie extends kt{_parse(gt){const{ctx:bt}=this._processInputParams(gt);if(bt.parsedType!==L.object)return O(bt,{code:P.invalid_type,expected:L.object,received:bt.parsedType}),ht;const Pt=this.discriminator,ee=bt.data[Pt],ri=this.optionsMap.get(ee);return ri?bt.common.async?ri._parseAsync({data:bt.data,path:bt.path,parent:bt}):ri._parseSync({data:bt.data,path:bt.path,parent:bt}):(O(bt,{code:P.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[Pt]}),ht)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(gt,bt,Pt){const ee=new Map;for(const ri of bt){const Ne=Me(ri.shape[gt]);if(!Ne)throw new Error(`A discriminator value for key \`${gt}\` could not be extracted from all schema options`);for(const ve of Ne){if(ee.has(ve))throw new Error(`Discriminator property ${String(gt)} has duplicate value ${String(ve)}`);ee.set(ve,ri)}}return new Ie({typeName:ni.ZodDiscriminatedUnion,discriminator:gt,options:bt,optionsMap:ee,...lt(Pt)})}}function gi(Ft,gt){const bt=Q(Ft),Pt=Q(gt);if(Ft===gt)return{valid:!0,data:Ft};if(bt===L.object&&Pt===L.object){const ee=o.objectKeys(gt),ri=o.objectKeys(Ft).filter(ve=>ee.indexOf(ve)!==-1),Ne={...Ft,...gt};for(const ve of ri){const _i=gi(Ft[ve],gt[ve]);if(!_i.valid)return{valid:!1};Ne[ve]=_i.data}return{valid:!0,data:Ne}}if(bt===L.array&&Pt===L.array){if(Ft.length!==gt.length)return{valid:!1};const ee=[];for(let ri=0;ri<Ft.length;ri++){const Ne=gi(Ft[ri],gt[ri]);if(!Ne.valid)return{valid:!1};ee.push(Ne.data)}return{valid:!0,data:ee}}return bt===L.date&&Pt===L.date&&+Ft==+gt?{valid:!0,data:Ft}:{valid:!1}}class Ei extends kt{_parse(gt){const{status:bt,ctx:Pt}=this._processInputParams(gt),ee=(ri,Ne)=>{if($(ri)||$(Ne))return ht;const ve=gi(ri.value,Ne.value);return ve.valid?((At(ri)||At(Ne))&&bt.dirty(),{status:bt.value,value:ve.data}):(O(Pt,{code:P.invalid_intersection_types}),ht)};return Pt.common.async?Promise.all([this._def.left._parseAsync({data:Pt.data,path:Pt.path,parent:Pt}),this._def.right._parseAsync({data:Pt.data,path:Pt.path,parent:Pt})]).then(([ri,Ne])=>ee(ri,Ne)):ee(this._def.left._parseSync({data:Pt.data,path:Pt.path,parent:Pt}),this._def.right._parseSync({data:Pt.data,path:Pt.path,parent:Pt}))}}Ei.create=(Ft,gt,bt)=>new Ei({left:Ft,right:gt,typeName:ni.ZodIntersection,...lt(bt)});class li extends kt{_parse(gt){const{status:bt,ctx:Pt}=this._processInputParams(gt);if(Pt.parsedType!==L.array)return O(Pt,{code:P.invalid_type,expected:L.array,received:Pt.parsedType}),ht;if(Pt.data.length<this._def.items.length)return O(Pt,{code:P.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ht;!this._def.rest&&Pt.data.length>this._def.items.length&&(O(Pt,{code:P.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),bt.dirty());const ee=[...Pt.data].map((ri,Ne)=>{const ve=this._def.items[Ne]||this._def.rest;return ve?ve._parse(new vt(Pt,ri,Pt.path,Ne)):null}).filter(ri=>!!ri);return Pt.common.async?Promise.all(ee).then(ri=>X.mergeArray(bt,ri)):X.mergeArray(bt,ee)}get items(){return this._def.items}rest(gt){return new li({...this._def,rest:gt})}}li.create=(Ft,gt)=>{if(!Array.isArray(Ft))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new li({items:Ft,typeName:ni.ZodTuple,rest:null,...lt(gt)})};class yi extends kt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(gt){const{status:bt,ctx:Pt}=this._processInputParams(gt);if(Pt.parsedType!==L.object)return O(Pt,{code:P.invalid_type,expected:L.object,received:Pt.parsedType}),ht;const ee=[],ri=this._def.keyType,Ne=this._def.valueType;for(const ve in Pt.data)ee.push({key:ri._parse(new vt(Pt,ve,Pt.path,ve)),value:Ne._parse(new vt(Pt,Pt.data[ve],Pt.path,ve))});return Pt.common.async?X.mergeObjectAsync(bt,ee):X.mergeObjectSync(bt,ee)}get element(){return this._def.valueType}static create(gt,bt,Pt){return new yi(bt instanceof kt?{keyType:gt,valueType:bt,typeName:ni.ZodRecord,...lt(Pt)}:{keyType:xe.create(),valueType:gt,typeName:ni.ZodRecord,...lt(bt)})}}class ci extends kt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(gt){const{status:bt,ctx:Pt}=this._processInputParams(gt);if(Pt.parsedType!==L.map)return O(Pt,{code:P.invalid_type,expected:L.map,received:Pt.parsedType}),ht;const ee=this._def.keyType,ri=this._def.valueType,Ne=[...Pt.data.entries()].map(([ve,_i],bi)=>({key:ee._parse(new vt(Pt,ve,Pt.path,[bi,"key"])),value:ri._parse(new vt(Pt,_i,Pt.path,[bi,"value"]))}));if(Pt.common.async){const ve=new Map;return Promise.resolve().then(async()=>{for(const _i of Ne){const bi=await _i.key,ds=await _i.value;if(bi.status==="aborted"||ds.status==="aborted")return ht;bi.status!=="dirty"&&ds.status!=="dirty"||bt.dirty(),ve.set(bi.value,ds.value)}return{status:bt.value,value:ve}})}{const ve=new Map;for(const _i of Ne){const bi=_i.key,ds=_i.value;if(bi.status==="aborted"||ds.status==="aborted")return ht;bi.status!=="dirty"&&ds.status!=="dirty"||bt.dirty(),ve.set(bi.value,ds.value)}return{status:bt.value,value:ve}}}}ci.create=(Ft,gt,bt)=>new ci({valueType:gt,keyType:Ft,typeName:ni.ZodMap,...lt(bt)});class De extends kt{_parse(gt){const{status:bt,ctx:Pt}=this._processInputParams(gt);if(Pt.parsedType!==L.set)return O(Pt,{code:P.invalid_type,expected:L.set,received:Pt.parsedType}),ht;const ee=this._def;ee.minSize!==null&&Pt.data.size<ee.minSize.value&&(O(Pt,{code:P.too_small,minimum:ee.minSize.value,type:"set",inclusive:!0,exact:!1,message:ee.minSize.message}),bt.dirty()),ee.maxSize!==null&&Pt.data.size>ee.maxSize.value&&(O(Pt,{code:P.too_big,maximum:ee.maxSize.value,type:"set",inclusive:!0,exact:!1,message:ee.maxSize.message}),bt.dirty());const ri=this._def.valueType;function Ne(_i){const bi=new Set;for(const ds of _i){if(ds.status==="aborted")return ht;ds.status==="dirty"&&bt.dirty(),bi.add(ds.value)}return{status:bt.value,value:bi}}const ve=[...Pt.data.values()].map((_i,bi)=>ri._parse(new vt(Pt,_i,Pt.path,bi)));return Pt.common.async?Promise.all(ve).then(_i=>Ne(_i)):Ne(ve)}min(gt,bt){return new De({...this._def,minSize:{value:gt,message:Ct.toString(bt)}})}max(gt,bt){return new De({...this._def,maxSize:{value:gt,message:Ct.toString(bt)}})}size(gt,bt){return this.min(gt,bt).max(gt,bt)}nonempty(gt){return this.min(1,gt)}}De.create=(Ft,gt)=>new De({valueType:Ft,minSize:null,maxSize:null,typeName:ni.ZodSet,...lt(gt)});class Ke extends kt{constructor(){super(...arguments),this.validate=this.implement}_parse(gt){const{ctx:bt}=this._processInputParams(gt);if(bt.parsedType!==L.function)return O(bt,{code:P.invalid_type,expected:L.function,received:bt.parsedType}),ht;function Pt(ve,_i){return W({data:ve,path:bt.path,errorMaps:[bt.common.contextualErrorMap,bt.schemaErrorMap,Y(),Z].filter(bi=>!!bi),issueData:{code:P.invalid_arguments,argumentsError:_i}})}function ee(ve,_i){return W({data:ve,path:bt.path,errorMaps:[bt.common.contextualErrorMap,bt.schemaErrorMap,Y(),Z].filter(bi=>!!bi),issueData:{code:P.invalid_return_type,returnTypeError:_i}})}const ri={errorMap:bt.common.contextualErrorMap},Ne=bt.data;if(this._def.returns instanceof Je){const ve=this;return ft(async function(..._i){const bi=new C([]),ds=await ve._def.args.parseAsync(_i,ri).catch(Bn=>{throw bi.addIssue(Pt(_i,Bn)),bi}),Hs=await Reflect.apply(Ne,this,ds);return await ve._def.returns._def.type.parseAsync(Hs,ri).catch(Bn=>{throw bi.addIssue(ee(Hs,Bn)),bi})})}{const ve=this;return ft(function(..._i){const bi=ve._def.args.safeParse(_i,ri);if(!bi.success)throw new C([Pt(_i,bi.error)]);const ds=Reflect.apply(Ne,this,bi.data),Hs=ve._def.returns.safeParse(ds,ri);if(!Hs.success)throw new C([ee(ds,Hs.error)]);return Hs.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...gt){return new Ke({...this._def,args:li.create(gt).rest(Vt.create())})}returns(gt){return new Ke({...this._def,returns:gt})}implement(gt){return this.parse(gt)}strictImplement(gt){return this.parse(gt)}static create(gt,bt,Pt){return new Ke({args:gt||li.create([]).rest(Vt.create()),returns:bt||Vt.create(),typeName:ni.ZodFunction,...lt(Pt)})}}class pi extends kt{get schema(){return this._def.getter()}_parse(gt){const{ctx:bt}=this._processInputParams(gt);return this._def.getter()._parse({data:bt.data,path:bt.path,parent:bt})}}pi.create=(Ft,gt)=>new pi({getter:Ft,typeName:ni.ZodLazy,...lt(gt)});class $e extends kt{_parse(gt){if(gt.data!==this._def.value){const bt=this._getOrReturnCtx(gt);return O(bt,{received:bt.data,code:P.invalid_literal,expected:this._def.value}),ht}return{status:"valid",value:gt.data}}get value(){return this._def.value}}function ii(Ft,gt){return new Le({values:Ft,typeName:ni.ZodEnum,...lt(gt)})}$e.create=(Ft,gt)=>new $e({value:Ft,typeName:ni.ZodLiteral,...lt(gt)});class Le extends kt{_parse(gt){if(typeof gt.data!="string"){const bt=this._getOrReturnCtx(gt),Pt=this._def.values;return O(bt,{expected:o.joinValues(Pt),received:bt.parsedType,code:P.invalid_type}),ht}if(this._def.values.indexOf(gt.data)===-1){const bt=this._getOrReturnCtx(gt),Pt=this._def.values;return O(bt,{received:bt.data,code:P.invalid_enum_value,options:Pt}),ht}return ft(gt.data)}get options(){return this._def.values}get enum(){const gt={};for(const bt of this._def.values)gt[bt]=bt;return gt}get Values(){const gt={};for(const bt of this._def.values)gt[bt]=bt;return gt}get Enum(){const gt={};for(const bt of this._def.values)gt[bt]=bt;return gt}extract(gt){return Le.create(gt)}exclude(gt){return Le.create(this.options.filter(bt=>!gt.includes(bt)))}}Le.create=ii;class me extends kt{_parse(gt){const bt=o.getValidEnumValues(this._def.values),Pt=this._getOrReturnCtx(gt);if(Pt.parsedType!==L.string&&Pt.parsedType!==L.number){const ee=o.objectValues(bt);return O(Pt,{expected:o.joinValues(ee),received:Pt.parsedType,code:P.invalid_type}),ht}if(bt.indexOf(gt.data)===-1){const ee=o.objectValues(bt);return O(Pt,{received:Pt.data,code:P.invalid_enum_value,options:ee}),ht}return ft(gt.data)}get enum(){return this._def.values}}me.create=(Ft,gt)=>new me({values:Ft,typeName:ni.ZodNativeEnum,...lt(gt)});class Je extends kt{unwrap(){return this._def.type}_parse(gt){const{ctx:bt}=this._processInputParams(gt);if(bt.parsedType!==L.promise&&bt.common.async===!1)return O(bt,{code:P.invalid_type,expected:L.promise,received:bt.parsedType}),ht;const Pt=bt.parsedType===L.promise?bt.data:Promise.resolve(bt.data);return ft(Pt.then(ee=>this._def.type.parseAsync(ee,{path:bt.path,errorMap:bt.common.contextualErrorMap})))}}Je.create=(Ft,gt)=>new Je({type:Ft,typeName:ni.ZodPromise,...lt(gt)});class Ge extends kt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ni.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(gt){const{status:bt,ctx:Pt}=this._processInputParams(gt),ee=this._def.effect||null,ri={addIssue:Ne=>{O(Pt,Ne),Ne.fatal?bt.abort():bt.dirty()},get path(){return Pt.path}};if(ri.addIssue=ri.addIssue.bind(ri),ee.type==="preprocess"){const Ne=ee.transform(Pt.data,ri);return Pt.common.issues.length?{status:"dirty",value:Pt.data}:Pt.common.async?Promise.resolve(Ne).then(ve=>this._def.schema._parseAsync({data:ve,path:Pt.path,parent:Pt})):this._def.schema._parseSync({data:Ne,path:Pt.path,parent:Pt})}if(ee.type==="refinement"){const Ne=ve=>{const _i=ee.refinement(ve,ri);if(Pt.common.async)return Promise.resolve(_i);if(_i instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return ve};if(Pt.common.async===!1){const ve=this._def.schema._parseSync({data:Pt.data,path:Pt.path,parent:Pt});return ve.status==="aborted"?ht:(ve.status==="dirty"&&bt.dirty(),Ne(ve.value),{status:bt.value,value:ve.value})}return this._def.schema._parseAsync({data:Pt.data,path:Pt.path,parent:Pt}).then(ve=>ve.status==="aborted"?ht:(ve.status==="dirty"&&bt.dirty(),Ne(ve.value).then(()=>({status:bt.value,value:ve.value}))))}if(ee.type==="transform"){if(Pt.common.async===!1){const Ne=this._def.schema._parseSync({data:Pt.data,path:Pt.path,parent:Pt});if(!_t(Ne))return Ne;const ve=ee.transform(Ne.value,ri);if(ve instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:bt.value,value:ve}}return this._def.schema._parseAsync({data:Pt.data,path:Pt.path,parent:Pt}).then(Ne=>_t(Ne)?Promise.resolve(ee.transform(Ne.value,ri)).then(ve=>({status:bt.value,value:ve})):Ne)}o.assertNever(ee)}}Ge.create=(Ft,gt,bt)=>new Ge({schema:Ft,typeName:ni.ZodEffects,effect:gt,...lt(bt)}),Ge.createWithPreprocess=(Ft,gt,bt)=>new Ge({schema:gt,effect:{type:"preprocess",transform:Ft},typeName:ni.ZodEffects,...lt(bt)});class di extends kt{_parse(gt){return this._getType(gt)===L.undefined?ft(void 0):this._def.innerType._parse(gt)}unwrap(){return this._def.innerType}}di.create=(Ft,gt)=>new di({innerType:Ft,typeName:ni.ZodOptional,...lt(gt)});class Pi extends kt{_parse(gt){return this._getType(gt)===L.null?ft(null):this._def.innerType._parse(gt)}unwrap(){return this._def.innerType}}Pi.create=(Ft,gt)=>new Pi({innerType:Ft,typeName:ni.ZodNullable,...lt(gt)});class Ti extends kt{_parse(gt){const{ctx:bt}=this._processInputParams(gt);let Pt=bt.data;return bt.parsedType===L.undefined&&(Pt=this._def.defaultValue()),this._def.innerType._parse({data:Pt,path:bt.path,parent:bt})}removeDefault(){return this._def.innerType}}Ti.create=(Ft,gt)=>new Ti({innerType:Ft,typeName:ni.ZodDefault,defaultValue:typeof gt.default=="function"?gt.default:()=>gt.default,...lt(gt)});class Oi extends kt{_parse(gt){const{ctx:bt}=this._processInputParams(gt),Pt={...bt,common:{...bt.common,issues:[]}},ee=this._def.innerType._parse({data:Pt.data,path:Pt.path,parent:{...Pt}});return ut(ee)?ee.then(ri=>({status:"valid",value:ri.status==="valid"?ri.value:this._def.catchValue({get error(){return new C(Pt.common.issues)},input:Pt.data})})):{status:"valid",value:ee.status==="valid"?ee.value:this._def.catchValue({get error(){return new C(Pt.common.issues)},input:Pt.data})}}removeCatch(){return this._def.innerType}}Oi.create=(Ft,gt)=>new Oi({innerType:Ft,typeName:ni.ZodCatch,catchValue:typeof gt.catch=="function"?gt.catch:()=>gt.catch,...lt(gt)});class qi extends kt{_parse(gt){if(this._getType(gt)!==L.nan){const bt=this._getOrReturnCtx(gt);return O(bt,{code:P.invalid_type,expected:L.nan,received:bt.parsedType}),ht}return{status:"valid",value:gt.data}}}qi.create=Ft=>new qi({typeName:ni.ZodNaN,...lt(Ft)});const Ui=Symbol("zod_brand");class hs extends kt{_parse(gt){const{ctx:bt}=this._processInputParams(gt),Pt=bt.data;return this._def.type._parse({data:Pt,path:bt.path,parent:bt})}unwrap(){return this._def.type}}class ns extends kt{_parse(gt){const{status:bt,ctx:Pt}=this._processInputParams(gt);if(Pt.common.async)return(async()=>{const ee=await this._def.in._parseAsync({data:Pt.data,path:Pt.path,parent:Pt});return ee.status==="aborted"?ht:ee.status==="dirty"?(bt.dirty(),pt(ee.value)):this._def.out._parseAsync({data:ee.value,path:Pt.path,parent:Pt})})();{const ee=this._def.in._parseSync({data:Pt.data,path:Pt.path,parent:Pt});return ee.status==="aborted"?ht:ee.status==="dirty"?(bt.dirty(),{status:"dirty",value:ee.value}):this._def.out._parseSync({data:ee.value,path:Pt.path,parent:Pt})}}static create(gt,bt){return new ns({in:gt,out:bt,typeName:ni.ZodPipeline})}}class ys extends kt{_parse(gt){const bt=this._def.innerType._parse(gt);return _t(bt)&&(bt.value=Object.freeze(bt.value)),bt}}ys.create=(Ft,gt)=>new ys({innerType:Ft,typeName:ni.ZodReadonly,...lt(gt)});const Ys=(Ft,gt={},bt)=>Ft?Wt.create().superRefine((Pt,ee)=>{var ri,Ne;if(!Ft(Pt)){const ve=typeof gt=="function"?gt(Pt):typeof gt=="string"?{message:gt}:gt,_i=(Ne=(ri=ve.fatal)!==null&&ri!==void 0?ri:bt)===null||Ne===void 0||Ne,bi=typeof ve=="string"?{message:ve}:ve;ee.addIssue({code:"custom",...bi,fatal:_i})}}):Wt.create(),ji={object:te.lazycreate};var ni;(function(Ft){Ft.ZodString="ZodString",Ft.ZodNumber="ZodNumber",Ft.ZodNaN="ZodNaN",Ft.ZodBigInt="ZodBigInt",Ft.ZodBoolean="ZodBoolean",Ft.ZodDate="ZodDate",Ft.ZodSymbol="ZodSymbol",Ft.ZodUndefined="ZodUndefined",Ft.ZodNull="ZodNull",Ft.ZodAny="ZodAny",Ft.ZodUnknown="ZodUnknown",Ft.ZodNever="ZodNever",Ft.ZodVoid="ZodVoid",Ft.ZodArray="ZodArray",Ft.ZodObject="ZodObject",Ft.ZodUnion="ZodUnion",Ft.ZodDiscriminatedUnion="ZodDiscriminatedUnion",Ft.ZodIntersection="ZodIntersection",Ft.ZodTuple="ZodTuple",Ft.ZodRecord="ZodRecord",Ft.ZodMap="ZodMap",Ft.ZodSet="ZodSet",Ft.ZodFunction="ZodFunction",Ft.ZodLazy="ZodLazy",Ft.ZodLiteral="ZodLiteral",Ft.ZodEnum="ZodEnum",Ft.ZodEffects="ZodEffects",Ft.ZodNativeEnum="ZodNativeEnum",Ft.ZodOptional="ZodOptional",Ft.ZodNullable="ZodNullable",Ft.ZodDefault="ZodDefault",Ft.ZodCatch="ZodCatch",Ft.ZodPromise="ZodPromise",Ft.ZodBranded="ZodBranded",Ft.ZodPipeline="ZodPipeline",Ft.ZodReadonly="ZodReadonly"})(ni||(ni={}));const Bi=(Ft,gt={message:`Input not instance of ${Ft.name}`})=>Ys(bt=>bt instanceof Ft,gt),Re=xe.create,si=Qe.create,Te=qi.create,Ht=Bt.create,Mi=ot.create,Yi=It.create,Zi=Nt.create,ti=yt.create,Ii=re.create,hi=Wt.create,Be=Vt.create,qe=Tt.create,ai=qt.create,wi=Gt.create,Qi=te.create,Si=te.strictCreate,xi=ge.create,Fi=Ie.create,Li=Ei.create,Gi=li.create,Xi=yi.create,rs=ci.create,fs=De.create,_s=Ke.create,Ls=pi.create,ws=$e.create,Ri=Le.create,ks=me.create,ms=Je.create,Rs=Ge.create,Es=di.create,gn=Pi.create,vs=Ge.createWithPreprocess,Bs=ns.create,Vs=()=>Re().optional(),xn=()=>si().optional(),kn=()=>Mi().optional(),Us={string:Ft=>xe.create({...Ft,coerce:!0}),number:Ft=>Qe.create({...Ft,coerce:!0}),boolean:Ft=>ot.create({...Ft,coerce:!0}),bigint:Ft=>Bt.create({...Ft,coerce:!0}),date:Ft=>It.create({...Ft,coerce:!0})},en=ht;var ln=Object.freeze({__proto__:null,defaultErrorMap:Z,setErrorMap:dt,getErrorMap:Y,makeIssue:W,EMPTY_PATH:u,addIssueToContext:O,ParseStatus:X,INVALID:ht,DIRTY:pt,OK:ft,isAborted:$,isDirty:At,isValid:_t,isAsync:ut,get util(){return o},get objectUtil(){return T},ZodParsedType:L,getParsedType:Q,ZodType:kt,ZodString:xe,ZodNumber:Qe,ZodBigInt:Bt,ZodBoolean:ot,ZodDate:It,ZodSymbol:Nt,ZodUndefined:yt,ZodNull:re,ZodAny:Wt,ZodUnknown:Vt,ZodNever:Tt,ZodVoid:qt,ZodArray:Gt,ZodObject:te,ZodUnion:ge,ZodDiscriminatedUnion:Ie,ZodIntersection:Ei,ZodTuple:li,ZodRecord:yi,ZodMap:ci,ZodSet:De,ZodFunction:Ke,ZodLazy:pi,ZodLiteral:$e,ZodEnum:Le,ZodNativeEnum:me,ZodPromise:Je,ZodEffects:Ge,ZodTransformer:Ge,ZodOptional:di,ZodNullable:Pi,ZodDefault:Ti,ZodCatch:Oi,ZodNaN:qi,BRAND:Ui,ZodBranded:hs,ZodPipeline:ns,ZodReadonly:ys,custom:Ys,Schema:kt,ZodSchema:kt,late:ji,get ZodFirstPartyTypeKind(){return ni},coerce:Us,any:hi,array:wi,bigint:Ht,boolean:Mi,date:Yi,discriminatedUnion:Fi,effect:Rs,enum:Ri,function:_s,instanceof:Bi,intersection:Li,lazy:Ls,literal:ws,map:rs,nan:Te,nativeEnum:ks,never:qe,null:Ii,nullable:gn,number:si,object:Qi,oboolean:kn,onumber:xn,optional:Es,ostring:Vs,pipeline:Bs,preprocess:vs,promise:ms,record:Xi,set:fs,strictObject:Si,string:Re,symbol:Zi,transformer:Rs,tuple:Gi,undefined:ti,union:xi,unknown:Be,void:ai,NEVER:en,ZodIssueCode:P,quotelessJson:q,ZodError:C})},"./node_modules/zstddec/dist/zstddec.modern.js":(N,l,d)=>{let o,T,L;d.r(l),d.d(l,{ZSTDDecoder:()=>P});const Q={env:{emscripten_notify_memory_growth:function(C){L=new Uint8Array(T.exports.memory.buffer)}}};class P{init(){return o||(o=typeof fetch<"u"?fetch("data:application/wasm;base64,"+q).then(Z=>Z.arrayBuffer()).then(Z=>WebAssembly.instantiate(Z,Q)).then(this._init):WebAssembly.instantiate(Buffer.from(q,"base64"),Q).then(this._init),o)}_init(Z){T=Z.instance,Q.env.emscripten_notify_memory_growth(0)}decode(Z,j=0){if(!T)throw new Error("ZSTDDecoder: Await .init() before decoding.");const dt=Z.byteLength,Y=T.exports.malloc(dt);L.set(Z,Y),j=j||Number(T.exports.ZSTD_findDecompressedSize(Y,dt));const W=T.exports.malloc(j),u=T.exports.ZSTD_decompress(W,j,Y,dt),O=L.slice(W,W+u);return T.exports.free(Y),T.exports.free(W),O}}const q="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ"}},I={};function B(N){var l=I[N];if(l!==void 0)return l.exports;var d=I[N]={exports:{}};return x[N](d,d.exports,B),d.exports}B.n=N=>{var l=N&&N.__esModule?()=>N.default:()=>N;return B.d(l,{a:l}),l},B.d=(N,l)=>{for(var d in l)B.o(l,d)&&!B.o(N,d)&&Object.defineProperty(N,d,{enumerable:!0,get:l[d]})},B.o=(N,l)=>Object.prototype.hasOwnProperty.call(N,l),B.r=N=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(N,"__esModule",{value:!0})};var H={};return(()=>{B.r(H),B.d(H,{Decoder:()=>l.Decoder,Deprecated:()=>X,Ellipse:()=>P.Ellipse,ExcaliburTiledProperties:()=>d.ExcaliburTiledProperties,FLIPPED_DIAGONALLY_FLAG:()=>L.FLIPPED_DIAGONALLY_FLAG,FLIPPED_HORIZONTALLY_FLAG:()=>L.FLIPPED_HORIZONTALLY_FLAG,FLIPPED_VERTICALLY_FLAG:()=>L.FLIPPED_VERTICALLY_FLAG,FetchLoader:()=>o.FetchLoader,InsertedTile:()=>P.InsertedTile,LoaderCache:()=>Q.LoaderCache,PluginObject:()=>P.PluginObject,Point:()=>P.Point,Polygon:()=>P.Polygon,Polyline:()=>P.Polyline,Rectangle:()=>P.Rectangle,Template:()=>j.Template,TemplateObject:()=>P.TemplateObject,TemplateResource:()=>Z.TemplateResource,Text:()=>P.Text,Tile:()=>O.Tile,TiledDataComponent:()=>dt.TiledDataComponent,TiledLayerDataComponent:()=>Y.TiledLayerDataComponent,TiledMap:()=>N.TiledMap,TiledParser:()=>N.TiledParser,TiledResource:()=>W.TiledResource,TiledTemplate:()=>N.TiledTemplate,TiledText:()=>N.TiledText,TiledTile:()=>N.TiledTile,TiledTileLayer:()=>N.TiledTileLayer,TiledTileLayerInfinite:()=>N.TiledTileLayerInfinite,TiledTileset:()=>N.TiledTileset,TiledTilesetFile:()=>N.TiledTilesetFile,Tileset:()=>O.Tileset,TilesetResource:()=>u.TilesetResource,byClassCaseInsensitive:()=>T.byClassCaseInsensitive,byNameCaseInsensitive:()=>T.byNameCaseInsensitive,byPropertyCaseInsensitive:()=>T.byPropertyCaseInsensitive,filenameFromPath:()=>q.filenameFromPath,getCanonicalGid:()=>L.getCanonicalGid,isCSV:()=>N.isCSV,isFlippedDiagonally:()=>L.isFlippedDiagonally,isFlippedHorizontally:()=>L.isFlippedHorizontally,isFlippedVertically:()=>L.isFlippedVertically,isInfiniteLayer:()=>N.isInfiniteLayer,isTiledTilesetCollectionOfImages:()=>N.isTiledTilesetCollectionOfImages,isTiledTilesetEmbedded:()=>N.isTiledTilesetEmbedded,isTiledTilesetExternal:()=>N.isTiledTilesetExternal,isTiledTilesetSingleImage:()=>N.isTiledTilesetSingleImage,mapPath:()=>q.mapPath,mapProps:()=>C.mapProps,needsDecoding:()=>N.needsDecoding,parseObject:()=>P.parseObject,parseObjects:()=>P.parseObjects,pathInMap:()=>q.pathInMap,pathRelativeToBase:()=>q.pathRelativeToBase});var N=B("./src/parser/tiled-parser.ts"),l=B("./src/resource/decoder.ts"),d=B("./src/resource/excalibur-properties.ts"),o=B("./src/resource/file-loader.ts"),T=B("./src/resource/filter-util.ts"),L=B("./src/resource/gid-util.ts"),Q=(B("./src/resource/layer.ts"),B("./src/resource/loader-cache.ts")),P=B("./src/resource/objects.ts"),q=B("./src/resource/path-util.ts"),C=B("./src/resource/properties.ts"),Z=B("./src/resource/template-resource.ts"),j=B("./src/resource/template.ts"),dt=B("./src/resource/tiled-data-component.ts"),Y=B("./src/resource/tiled-layer-component.ts"),W=B("./src/resource/tiled-resource.ts"),u=B("./src/resource/tileset-resource.ts"),O=B("./src/resource/tileset.ts"),X=B("./src/deprecated.ts")})(),H})())})(excaliburTiled_min);var excaliburTiled_minExports=excaliburTiled_min.exports;const map="data:application/octet-stream;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPG1hcCB2ZXJzaW9uPSIxLjEwIiB0aWxlZHZlcnNpb249IjEuMTEuMCIgb3JpZW50YXRpb249InN0YWdnZXJlZCIgcmVuZGVyb3JkZXI9InJpZ2h0LWRvd24iIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgdGlsZXdpZHRoPSIxMDI0IiB0aWxlaGVpZ2h0PSIxMDI0IiBpbmZpbml0ZT0iMCIgc3RhZ2dlcmF4aXM9IngiIHN0YWdnZXJpbmRleD0iZXZlbiIgbmV4dGxheWVyaWQ9IjMiIG5leHRvYmplY3RpZD0iMSI+CiA8dGlsZXNldCBmaXJzdGdpZD0iMSIgbmFtZT0iYmFzZV90aWxlIiB0aWxld2lkdGg9IjEwMjQiIHRpbGVoZWlnaHQ9IjEwMjQiIHRpbGVjb3VudD0iMSIgY29sdW1ucz0iMSI+CiAgPGltYWdlIHNvdXJjZT0iLi4vLi4vLi4vdGlsZW1hcC92aWtpbmdzLW91dGRvb3ItbWFwL2Jhc2VfdGlsZS5wbmciIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjEwMjQiLz4KIDwvdGlsZXNldD4KIDxsYXllciBpZD0iMSIgbmFtZT0iVGlsZSBMYXllciAxIiB3aWR0aD0iMzAiIGhlaWdodD0iMzAiPgogIDxkYXRhIGVuY29kaW5nPSJjc3YiPgoxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwKMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsCjEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLAoxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwKMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsCjEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLAoxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwKMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsCjEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLAoxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwKMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsCjEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLAoxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwKMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsCjEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLAoxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwKMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsCjEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLAoxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwKMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsCjEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLAoxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwKMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsCjEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLAoxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwKMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsCjEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLAoxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwKMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsCjEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxCjwvZGF0YT4KIDwvbGF5ZXI+CjwvbWFwPgo=",tilesetPath="/tma_research/assets/base_tile-8mgpXKAg.png",vikingsMap="/tma_research/assets/vikings_map-bJEEirLb.png";class MyLoader extends __webpack_exports__DefaultLoader{}const Resources={MapSprite:new __webpack_exports__ImageSource(vikingsMap,!1),TiledMap:new excaliburTiled_minExports.TiledResource(map,{pathMap:[{path:"map.tmx",output:map},{path:"base_tile.png",output:tilesetPath}]})},loader=new MyLoader;for(const v of Object.values(Resources))loader.addResource(v);var eruda$1={exports:{}};/*! eruda v3.0.1 https://eruda.liriliri.io/ */(function(module,exports){(function(v,r){module.exports=r()})(self,function(){return function(){var __webpack_modules__={422:function(v,r,s){s.d(r,{Z:function(){return Yt}});var _=s(5671),x=s(3144),I=s(9340),B=s(2963),H=s(1120),N=s(2461),l=s.n(N),d=s(3990),o=s.n(d),T=s(6768),L=s.n(T),Q=s(4331),P=s.n(Q),q=s(5610),C=s.n(q),Z=s(7483),j=s.n(Z),dt=s(6341),Y=s.n(dt),W=s(3875),u=s.n(W),O=s(6954),X=s.n(O);s(9585);function ht(xe){var Ee="luna-".concat(xe,"-");function Qe(Bt){return l()(P()(Bt).split(/\s+/),function(ot){return Y()(ot,Ee)?ot:ot.replace(/[\w-]+/,function(It){return"".concat(Ee).concat(It)})}).join(" ")}return function(Bt){if(/<[^>]*>/g.test(Bt))try{var ot=j().parse(Bt);return pt(ot,function(It){It.attrs&&It.attrs.class&&(It.attrs.class=Qe(It.attrs.class))}),j().stringify(ot)}catch{return Qe(Bt)}return Qe(Bt)}}function pt(xe,Ee){for(var Qe=0,Bt=xe.length;Qe<Bt;Qe++){var ot=xe[Qe];Ee(ot),ot.content&&pt(ot.content,Ee)}}C();function ft(){var xe=X()();return xe==="os x"?"mac":xe}var $=s(1443),At=s.n($),_t=s(1512),ut=s.n(_t),Ct=s(3783),vt=s.n(Ct),xt=s(6329),lt=s.n(xt),kt=s(4193),Jt=s.n(kt),Ut=s(5852),Ae=s.n(Ut);function Ot(xe){var Ee=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Qe,Bt=(0,H.Z)(xe);if(Ee){var ot=(0,H.Z)(this).constructor;Qe=Reflect.construct(Bt,arguments,ot)}else Qe=Bt.apply(this,arguments);return(0,B.Z)(this,Qe)}}var $t=function(xe){(0,I.Z)(Qe,xe);var Ee=Ot(Qe);function Qe(Bt,ot){var It,Nt=ot.compName,yt=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,re=yt===void 0?"light":yt;return(0,_.Z)(this,Qe),(It=Ee.call(this)).subComponents=[],It.compName=Nt,It.c=ht(Nt),It.options={},It.container=Bt,It.$container=ut()(Bt),It.$container.addClass(["luna-".concat(Nt),It.c("platform-".concat(ft()))]),It.on("optionChange",function(Wt,Vt,Tt){var qt=It.c;Wt==="theme"&&(It.$container.rmClass(qt("theme-".concat(Tt))).addClass(qt("theme-".concat(Vt))),vt()(It.subComponents,function(Gt){return Gt.setOption("theme",Vt)}))}),It.setOption("theme",re),It}return(0,x.Z)(Qe,[{key:"destroy",value:function(){this.destroySubComponents();var Bt=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Bt("platform-".concat(ft()))).rmClass(Bt("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(Bt,ot){var It=this,Nt=this.options,yt={};typeof Bt=="string"?yt[Bt]=ot:yt=Bt,vt()(yt,function(re,Wt){var Vt=Nt[Wt];Nt[Wt]=re,It.emit("optionChange",Wt,re,Vt)})}},{key:"getOption",value:function(Bt){return this.options[Bt]}},{key:"addSubComponent",value:function(Bt){Bt.setOption("theme",this.options.theme),this.subComponents.push(Bt)}},{key:"removeSubComponent",value:function(Bt){Ae()(this.subComponents,function(ot){return ot===Bt})}},{key:"destroySubComponents",value:function(){vt()(this.subComponents,function(Bt){return Bt.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Bt){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Jt()(Bt,ot),lt()(this.options,Bt)}},{key:"find",value:function(Bt){return this.$container.find(this.c(Bt))}}]),Qe}(At());function Zt(xe){var Ee=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Qe,Bt=(0,H.Z)(xe);if(Ee){var ot=(0,H.Z)(this).constructor;Qe=Reflect.construct(Bt,arguments,ot)}else Qe=Bt.apply(this,arguments);return(0,B.Z)(this,Qe)}}v=s.hmd(v);var Yt=function(xe){(0,I.Z)(Qe,xe);var Ee=Zt(Qe);function Qe(Bt){var ot,It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,_.Z)(this,Qe),(ot=Ee.call(this,Bt,{compName:"box-model"})).initOptions(It),ot.options.element&&ot.render(),ot.bindEvent(),ot}return(0,x.Z)(Qe,[{key:"bindEvent",value:function(){var Bt=this;this.on("optionChange",function(ot){ot==="element"&&Bt.render()})}},{key:"render",value:function(){var Bt=this.c,ot=this.getBoxModelData();this.$container.html(['<div class="'.concat(Bt("box-model"),'">'),ot.position?'<div class="'.concat(Bt("position"),'">'):"",ot.position?'<div class="'.concat(Bt("label"),'">position</div><div class="').concat(Bt("top"),'">').concat(ot.position.top,'</div><br><div class="').concat(Bt("left"),'">').concat(ot.position.left,"</div>"):"",'<div class="'.concat(Bt("margin"),'">'),'<div class="'.concat(Bt("label"),'">margin</div><div class="').concat(Bt("top"),'">').concat(ot.margin.top,'</div><br><div class="').concat(Bt("left"),'">').concat(ot.margin.left,"</div>"),'<div class="'.concat(Bt("border"),'">'),'<div class="'.concat(Bt("label"),'">border</div><div class="').concat(Bt("top"),'">').concat(ot.border.top,'</div><br><div class="').concat(Bt("left"),'">').concat(ot.border.left,"</div>"),'<div class="'.concat(Bt("padding"),'">'),'<div class="'.concat(Bt("label"),'">padding</div><div class="').concat(Bt("top"),'">').concat(ot.padding.top,'</div><br><div class="').concat(Bt("left"),'">').concat(ot.padding.left,"</div>"),'<div class="'.concat(Bt("content"),'">'),"<span>".concat(ot.content.width,"</span>&nbsp;Ã&nbsp;<span>").concat(ot.content.height,"</span>"),"</div>",'<div class="'.concat(Bt("right"),'">').concat(ot.padding.right,'</div><br><div class="').concat(Bt("bottom"),'">').concat(ot.padding.bottom,"</div>"),"</div>",'<div class="'.concat(Bt("right"),'">').concat(ot.border.right,'</div><br><div class="').concat(Bt("bottom"),'">').concat(ot.border.bottom,"</div>"),"</div>",'<div class="'.concat(Bt("right"),'">').concat(ot.margin.right,'</div><br><div class="').concat(Bt("bottom"),'">').concat(ot.margin.bottom,"</div>"),"</div>",ot.position?'<div class="'.concat(Bt("right"),'">').concat(ot.position.right,'</div><br><div class="').concat(Bt("bottom"),'">').concat(ot.position.bottom,"</div>"):"",ot.position?"</div>":"","</div>"].join(""))}},{key:"getBoxModelData",value:function(){var Bt=this.options.element,ot=window.getComputedStyle(Bt);function It(yt){var re=["top","left","right","bottom"];return yt!=="position"&&(re=l()(re,function(Wt){return"".concat(yt,"-").concat(Wt)})),yt==="border"&&(re=l()(re,function(Wt){return"".concat(Wt,"-width")})),{top:Ve(ot[re[0]],yt),left:Ve(ot[re[1]],yt),right:Ve(ot[re[2]],yt),bottom:Ve(ot[re[3]],yt)}}var Nt={margin:It("margin"),border:It("border"),padding:It("padding"),content:{width:Ve(ot.width),height:Ve(ot.height)}};return ot.position!=="static"&&(Nt.position=It("position")),Nt}}]),Qe}($t);function Ve(xe,Ee){if(o()(xe))return xe;if(!L()(xe))return"â";var Qe,Bt=(Qe=xe,u()(Qe.replace("px","")));return isNaN(Bt)?xe:Ee==="position"?Bt:Bt===0?"â":Bt}(function(xe,Ee){try{xe.exports=Ee,xe.exports.default=Ee}catch{}})(v,Yt)},8816:function(v,r,s){s.d(r,{Z:function(){return Ir}});var _=s(168),x=s(181);function I(ki,Vi){return function(Ci){if(Array.isArray(Ci))return Ci}(ki)||function(Ci,Rt){var Qt=Ci==null?null:typeof Symbol<"u"&&Ci[Symbol.iterator]||Ci["@@iterator"];if(Qt!=null){var ie,Ce,oi,Ze,Ai=[],je=!0,mi=!1;try{if(oi=(Qt=Qt.call(Ci)).next,Rt===0){if(Object(Qt)!==Qt)return;je=!1}else for(;!(je=(ie=oi.call(Qt)).done)&&(Ai.push(ie.value),Ai.length!==Rt);je=!0);}catch(Ki){mi=!0,Ce=Ki}finally{try{if(!je&&Qt.return!=null&&(Ze=Qt.return(),Object(Ze)!==Ze))return}finally{if(mi)throw Ce}}return Ai}}(ki,Vi)||(0,x.Z)(ki,Vi)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var B=s(5671),H=s(3144),N=s(1752),l=s(9340),d=s(2963),o=s(1120),T=s(7326),L=s(8901),Q=s.n(L),P=s(3367),q=s.n(P),C=s(6341),Z=s.n(C),j=s(6930),dt=s.n(j),Y=s(4187),W=s.n(Y),u=s(3783),O=s.n(u),X=s(4858),ht=s.n(X),pt=s(8887),ft=s.n(pt),$=s(7756),At=s.n($),_t=s(3023),ut=s.n(_t);function Ct(ki){return ki.constructor&&ki.constructor.name?ki.constructor.name:ut()({}.toString.call(ki).replace(/(\[object )|]/g,""))}var vt=s(2461),xt=s.n(vt),lt=s(4331),kt=s.n(lt),Jt=s(5610),Ut=s.n(Jt),Ae=s(7483),Ot=s.n(Ae),$t=s(3990),Zt=s.n($t),Yt=s(3875),Ve=s.n(Yt),xe=s(6954),Ee=s.n(xe),Qe=s(9585),Bt=s.n(Qe);function ot(ki){var Vi="luna-".concat(ki,"-");function Ci(Rt){return xt()(kt()(Rt).split(/\s+/),function(Qt){return Z()(Qt,Vi)?Qt:Qt.replace(/[\w-]+/,function(ie){return"".concat(Vi).concat(ie)})}).join(" ")}return function(Rt){if(/<[^>]*>/g.test(Rt))try{var Qt=Ot().parse(Rt);return It(Qt,function(ie){ie.attrs&&ie.attrs.class&&(ie.attrs.class=Ci(ie.attrs.class))}),Ot().stringify(Qt)}catch{return Ci(Rt)}return Ci(Rt)}}function It(ki,Vi){for(var Ci=0,Rt=ki.length;Ci<Rt;Ci++){var Qt=ki[Ci];Vi(Qt),Qt.content&&It(Qt.content,Vi)}}Ut();var Nt=ot("console");function yt(ki){var Vi,Ci=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Rt=Ci.topObj,Qt=Ci.level,ie=Qt===void 0?0:Qt,Ce=Ci.getterVal,oi=Ce!==void 0&&Ce,Ze=Ci.unenumerable,Ai=Ze===void 0||Ze,je="",mi="",Ki=[],es=[],os="";Rt=Rt||ki;var Ts={getterVal:oi,unenumerable:Ai,level:ie+1},ts=ie===0,ss='<span class="'.concat(Nt("key"),'">'),ls='<span class="'.concat(Nt("number"),'">'),fi='<span class="'.concat(Nt("null"),'">'),us='<span class="'.concat(Nt("string"),'">'),Js='<span class="'.concat(Nt("boolean"),'">'),_n='<span class="'.concat(Nt("special"),'">'),xs=function(as){return Q()(as).replace(/\\n/g,"âµ").replace(/\\f|\\r|\\t/g,"").replace(/\\/g,"")},Os="</span>";function $s(as){return as=q()(as),Z()(re,as)||dt()(as,"Array[")?_n+xs(as)+Os:(as.length>100&&(as=At()(as,100,{separator:" ",ellipsis:"â¦"})),us+xs('"'.concat(as,'"'))+Os)}function An(as){if(Vi>5)os=", â¦";else{var Nn=function(zs){return ss+xs(zs)+Os}(Vt(as));if(!oi){var Ss=Object.getOwnPropertyDescriptor(ki,as);if(Ss&&Ss.get)return Ki.push("".concat(Nn,": ").concat($s("(...)"))),void Vi++}Ki.push("".concat(Nn,": ").concat(yt(Rt[as],Ts))),Vi++}}try{mi={}.toString.call(ki)}catch{mi="[object Object]"}var Zs,Mn=mi=="[object Array]",cn=mi=="[object Object]",sn=mi=="[object Number]",Ln=mi=="[object RegExp]",Fn=mi=="[object Symbol]",zi=mi=="[object Function]",mn=mi=="[object Boolean]";if(mi=="[object String]")je=$s(Vt(ki));else if(Ln)Zs=Vt(ki.toString()),je=us+Zs+Os;else if(zi)je=$s("Æ");else if(Mn)if(ts){je="[";var Jn=ki.length,lr="";Jn>100&&(Jn=100,lr=", â¦");for(var Un=0;Un<Jn;Un++)Ki.push("".concat(yt(ki[Un],Ts)));je+=Ki.join(", ")+lr+"]"}else je="Array(".concat(ki.length,")");else if(cn)Wt(ki)&&(ki=Object.getPrototypeOf(ki)),es=Ai?Object.getOwnPropertyNames(ki):Object.keys(ki),ts?(Vi=1,je="{",O()(es,An),je+=Ki.join(", ")+os+"}"):(je=Ct(ki))==="Object"&&(je="{â¦}");else if(sn)je=ki+"",je=ht()(je,"Infinity")||je==="NaN"?'"'.concat(je,'"'):ls+je+Os;else if(mn)je=Js+(ki?"true":"false")+Os;else if(ki===null)je=function(as){return fi+as+Os}("null");else if(Fn)je=$s("Symbol");else if(ki===void 0)je=$s("undefined");else try{Wt(ki)&&(ki=Object.getPrototypeOf(ki)),ts?(Vi=1,je="{",es=Ai?Object.getOwnPropertyNames(ki):Object.keys(ki),O()(es,An),je+=Ki.join(", ")+os+"}"):(je=Ct(ki))==="Object"&&(je="{â¦}")}catch{je=$s(ki)}return je}var re=["(...)","undefined","Symbol","Object","Æ"];function Wt(ki){var Vi=ft()(Object.getOwnPropertyNames(ki)),Ci=Object.getPrototypeOf(ki);return Vi&&Ci&&Ci!==Object.prototype}function Vt(ki){return W()(ki).replace(/\\'/g,"'").replace(/\t/g,"\\t")}var Tt,qt=s(8299),Gt=s(5564),se=s(8209),te=s(242),ge=s.n(te),Me=s(5166),Ie=s.n(Me),gi=s(6768),Ei=s.n(gi),li=s(2749),yi=s.n(li),ci=s(6997),De=s.n(ci),Ke=s(4193),pi=s.n(Ke),$e=s(9833),ii=s.n($e),Le=s(9296),me=s.n(Le),Je=s(8099),Ge=s.n(Je),di=s(6156),Pi=s.n(di),Ti=s(1286),Oi=s.n(Ti),qi=s(4777),Ui=s.n(qi),hs=s(1352),ns=s.n(hs),ys=s(6472),Ys=s.n(ys),ji=s(42),ni=s.n(ji),Bi=s(4675),Re=s.n(Bi),si=s(3063),Te=s.n(si),Ht=s(2533),Mi=s.n(Ht),Yi=s(1512),Zi=s.n(Yi),ti=s(8613),Ii=s.n(ti),hi=s(1443),Be=s.n(hi),qe=s(6049),ai=s.n(qe),wi=s(4400),Qi=s.n(wi),Si=s(2327),xi=s.n(Si),Fi=s(9963),Li=s.n(Fi),Gi=s(6837),Xi=s.n(Gi),rs=s(3988),fs=s.n(rs),_s=s(3651),Ls=s.n(_s),ws=s(6053),Ri=s.n(ws),ks=s(1907),ms=s.n(ks),Rs=s(4891),Es=s.n(Rs),gn=s(5229),vs=s.n(gn),Bs=s(4696),Vs=s.n(Bs),xn=s(9804),kn=s.n(xn),Us=s(1754),en=s.n(Us);function ln(ki){var Vi=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Ci,Rt=(0,o.Z)(ki);if(Vi){var Qt=(0,o.Z)(this).constructor;Ci=Reflect.construct(Rt,arguments,Qt)}else Ci=Rt.apply(this,arguments);return(0,d.Z)(this,Ci)}}var Ft=/https?:\/\/([0-9.\-A-Za-z]+)(?::(\d+))?\/[A-Z.a-z0-9/]*\.js/g,gt={comment:"",string:"",number:"",keyword:"",operator:""},bt=function(ki){(0,l.Z)(Ci,ki);var Vi=ln(Ci);function Ci(Rt,Qt){var ie,Ce=Qt.type,oi=Ce===void 0?"log":Ce,Ze=Qt.args,Ai=Ze===void 0?[]:Ze,je=Qt.id,mi=Qt.group,Ki=Qt.targetGroup,es=Qt.header,os=Qt.ignoreFilter,Ts=os!==void 0&&os,ts=Qt.accessGetter,ss=Qt.unenumerable,ls=Qt.lazyEvaluation;(0,B.Z)(this,Ci),(ie=Vi.call(this)).container=Ii()("div"),ie.count=1,ie.width=0,ie.height=0,ie.isHidden=!1,ie.columns=[],ie.elements={},ie.objects={},ie.console=Rt,ie.type=oi,ie.group=mi,ie.targetGroup=Ki,ie.args=Ai,ie.id=je,ie.header=es,ie.ignoreFilter=Ts,ie.collapsed=!1,ie.container.log=(0,T.Z)(ie),ie.height=0,ie.width=0,ie.$container=Zi()(ie.container),ie.accessGetter=ts,ie.unenumerable=ss,ie.lazyEvaluation=ls;var fi="info";switch(oi){case"debug":fi="verbose";break;case"error":fi="error";break;case"warn":fi="warning"}return ie.level=fi,ie.resizeSensor=new(ge())(ie.container),ie.onResize=ai()(function(){Bt()(ie.container)?ie.isHidden=!0:(ie.isHidden||ie.updateSize(!1),ie.isHidden=!1)},16),ie.formatMsg(),ie.group&&ie.checkGroup(),ie.bindEvent(),ie}return(0,H.Z)(Ci,[{key:"checkGroup",value:function(){for(var Rt=this.group,Qt=!1;Rt;){if(Rt.collapsed){Qt=!0;break}Rt=Rt.parent}return Qt!==this.collapsed&&(this.collapsed=Qt,!0)}},{key:"updateIcon",value:function(Rt){var Qt=this.console.c;return this.$container.find(Qt(".icon-container")).find(Qt(".icon")).rmAttr("class").addClass([Qt("icon"),Qt("icon-".concat(Rt))]),this}},{key:"addCount",value:function(){this.count++;var Rt=this.$container,Qt=this.count,ie=this.console.c,Ce=Rt.find(ie(".count-container")),oi=Rt.find(ie(".icon-container")),Ze=Ce.find(ie(".count"));return Qt===2&&Ce.rmClass(ie("hidden")),Ze.text(q()(Qt)),oi.addClass(ie("hidden")),this}},{key:"groupEnd",value:function(){var Rt=this.$container,Qt=this.console.c;return Rt.find(".".concat(Qt("nesting-level"),":not(.").concat(Qt("group-closed"),")")).last().addClass(Qt("group-closed")),this}},{key:"updateTime",value:function(Rt){var Qt=this.$container.find(this.console.c(".time-container"));return this.header&&(Qt.find("span").eq(0).text(Rt),this.header.time=Rt),this}},{key:"isAttached",value:function(){return!!this.container.parentNode}},{key:"isSimple",value:function(){return!Ri()(this.args,function(Rt){return Ie()(Rt)})}},{key:"updateSize",value:function(){var Rt=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],Qt=this.container.getBoundingClientRect(),ie=Qt.width,Ce=Qt.height-1;this.height!==Ce&&(this.height=Ce,Rt||this.emit("updateHeight")),this.width!==ie&&(this.width=ie)}},{key:"html",value:function(){return this.container.outerHTML}},{key:"text",value:function(){return this.content.textContent||""}},{key:"select",value:function(){this.$container.addClass(this.console.c("selected"))}},{key:"deselect",value:function(){this.$container.rmClass(this.console.c("selected"))}},{key:"copy",value:function(){var Rt=this.args,Qt="";O()(Rt,function(ie,Ce){Ce!==0&&(Qt+=" "),Ie()(ie)?Qt+=Qi()(ie):Qt+=q()(ie)}),xi()(Qt)}},{key:"bindEvent",value:function(){var Rt=this,Qt=this.console.c,ie=this;this.resizeSensor.addListener(this.onResize),this.$container.on("click",Qt(".dom-viewer"),function(Ce){return Ce.stopPropagation()}).on("click",Qt(".preview"),function(Ce){Ce.stopPropagation();var oi=Zi()(this).find(Qt(".preview-icon-container")).find(Qt(".icon")),Ze="caret-down";oi.hasClass(Qt("icon-caret-down"))&&(Ze="caret-right"),oi.rmAttr("class").addClass([Qt("icon"),Qt("icon-".concat(Ze))]),ie.renderObjectViewer(this)}).on("click",function(){return Rt.click()})}},{key:"renderEl",value:function(){var Rt=this.elements,Qt=this.console.c,ie=this;this.$container.find(Qt(".dom-viewer")).each(function(){var Ce=Zi()(this).data("id");new se.Z(this,{node:Rt[Ce],theme:ie.console.getOption("theme")})})}},{key:"renderObjectViewer",value:function(Rt){var Qt=this.console,ie=this.unenumerable,Ce=this.accessGetter,oi=this.lazyEvaluation,Ze=Qt.c,Ai=Zi()(Rt),je=Ai.data("id");if(je){var mi=this.objects[je],Ki=Ai.find(Ze(".json"));if(Ki.hasClass(Ze("hidden"))){if(Ki.data("init")!=="true"){if(oi){var es=new qt.Z(Ki.get(0),{unenumerable:ie,accessGetter:Ce});es.setOption("theme",Qt.getOption("theme")),es.set(mi)}else{var os=new qt.q(Ki.get(0));os.setOption("theme",Qt.getOption("theme")),os.set(mi)}Ki.data("init","true")}Ki.rmClass(Ze("hidden"))}else Ki.addClass(Ze("hidden"))}}},{key:"renderTable",value:function(Rt){var Qt=this,ie="__LunaConsoleValue",Ce=this.columns,oi=this.$container,Ze=this.console,Ai=Ze.c,je=oi.find(Ai(".data-grid")),mi=Rt[0],Ki=new Gt.Z(je.get(0),{columns:Ge()([{id:"(index)",title:"(index)",sortable:!0}],xt()(Ce,function(es){return{id:es,title:es===ie?"Value":es,sortable:!0}})),theme:Ze.getOption("theme")});O()(mi,function(es,os){var Ts={"(index)":q()(os)};Ce.forEach(function(ts){Ie()(es)?Ts[ts]=ts===ie?"":Qt.formatTableVal(es[ts]):De()(es)&&(Ts[ts]=ts===ie?Qt.formatTableVal(es):"")}),Ki.append(Ts)})}},{key:"extractObj",value:function(Rt){var Qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ie=arguments.length>2?arguments[2]:void 0,Ce=this.accessGetter,oi=this.unenumerable;pi()(Qt,{accessGetter:Ce,unenumerable:oi,symbol:oi,timeout:1e3}),function(Ze,Ai,je){var mi=Li()(Ze,Ai);Xi()(function(){return je(mi)})}(Rt,Qt,function(Ze){return ie(JSON.parse(Ze))})}},{key:"click",value:function(){var Rt=this.type,Qt=this.$container,ie=this.console,Ce=ie.c;switch(Rt){case"log":case"warn":case"info":case"debug":case"output":case"table":case"dir":break;case"group":case"groupCollapsed":ie.toggleGroup(this);break;case"error":Qt.find(Ce(".stack")).toggleClass(Ce("hidden"))}}},{key:"formatMsg",value:function(){var Rt=this.args,Qt=this.type,ie=this.id,Ce=this.header,oi=this.group,Ze=this.console.c;Rt=Re()(Rt);var Ai,je,mi="";switch(Qt!=="group"&&Qt!=="groupCollapsed"||Rt.length===0&&(Rt=["console.group"]),Qt){case"log":case"info":case"debug":mi=this.formatCommon(Rt);break;case"dir":mi=this.formatDir(Rt);break;case"warn":Ai="warn",mi=this.formatCommon(Rt);break;case"error":Ei()(Rt[0])&&Rt.length!==1&&(Rt=this.substituteStr(Rt)),je=Rt[0],Ai="error",je=yi()(je)?je:new Error(this.formatCommon(Rt)),mi=this.formatErr(je);break;case"table":mi=this.formatTable(Rt);break;case"html":mi=Rt[0];break;case"input":mi=this.formatJs(Rt[0]),Ai="input";break;case"output":mi=this.formatCommon(Rt),Ai="output";break;case"groupCollapsed":mi=this.formatCommon(Rt),Ai="caret-right";break;case"group":mi=this.formatCommon(Rt),Ai="caret-down"}Z()(["log","debug","warn"],Qt)&&this.isSimple()&&(mi=fs()(mi,function(Ki){return'<a href="'.concat(Ki,'" target="_blank">').concat(Ki,"</a>")})),mi=this.render({msg:mi,type:Qt,icon:Ai,id:ie,header:Ce,group:oi}),this.$container.addClass("".concat(Ze("log-container"))).html(mi),Qt==="table"&&(ft()(this.columns)||this.renderTable(Rt)),ft()(this.elements)||this.renderEl(),this.$content=this.$container.find(Ze(".log-content")),this.content=this.$content.get(0)}},{key:"render",value:function(Rt){var Qt=this.console.c,ie="",Ce="";if(Rt.group)for(var oi=Rt.group.indentLevel,Ze=0;Ze<oi;Ze++)Ce+='<div class="'.concat(Qt("nesting-level"),'"></div>');Rt.header&&(ie+=ms()(Tt||(Tt=(0,_.Z)([`
      <div class="`,`">
        `,`
        <div class="`,`">
          <span>`,"</span> <span>",`</span>
        </div>
      </div>`])),Qt("header"),Ce,Qt("time-from-container"),Rt.header.time,Rt.header.from));var Ai="";return Rt.icon&&(Ai='<div class="'.concat(Qt("icon-container"),'"><span class="').concat(Qt("icon icon-"+Rt.icon),'"></span></div>')),ie+=`
    <div class="`.concat(Qt(Rt.type+" log-item"),`">
      `).concat(Ce,`
      `).concat(Ai,`
      <div class="`).concat(Qt("count-container hidden"),`">
        <div class="`).concat(Qt("count"),`"></div>
      </div>    
      <div class="`).concat(Qt("log-content-wrapper"),`">
        <div class="`).concat(Qt("log-content"),'">').concat(Rt.msg,`</div>
      </div>
    </div>`)}},{key:"formatTable",value:function(Rt){var Qt=Rt[0],ie=Rt[1],Ce=[];return Ei()(ie)&&(ie=ns()(ie)),Ys()(ie)||(ie=null),Ie()(Qt)?(O()(Qt,function(oi){De()(oi)?Ce.push("__LunaConsoleValue"):Ie()(oi)&&(Ce=Ce.concat(Mi()(oi)))}),(Ce=ni()(Ce)).sort(),ie&&(Ce=Ce.filter(function(oi){return Z()(ie,oi)})),Ce.length>20&&(Ce=Ce.slice(0,20)),ft()(Ce)?this.formatCommon(Rt):(this.columns=Ce,this.console.c('<div class="data-grid"></div>')+this.formatPreview(Qt))):this.formatCommon(Rt)}},{key:"formatErr",value:function(Rt){var Qt=Rt.stack?Rt.stack.split(`
`):[],ie="".concat(Rt.message||Qt[0],"<br/>");return Qt=Qt.map(function(Ce){return Q()(Ce)}),ie+'<div class="'.concat(this.console.c("stack hidden"),'">').concat(Qt.slice(1).join("<br/>"),"</div>").replace(Ft,function(Ce){return'<a href="'.concat(Ce,'" target="_blank">').concat(Ce,"</a>")})}},{key:"formatCommon",value:function(Rt){var Qt=this.console.c,ie=Ei()(Rt[0])&&Rt.length!==1;ie&&(Rt=this.substituteStr(Rt));for(var Ce=0,oi=Rt.length;Ce<oi;Ce++){var Ze=Rt[Ce];ii()(Ze)?Rt[Ce]=this.formatEl(Ze):Ui()(Ze)?Rt[Ce]=this.formatFn(Ze):en()(Ze)?Rt[Ce]='<span class="'.concat(Qt("regexp"),'">').concat(Q()(q()(Ze)),"</span>"):Ie()(Ze)?Rt[Ce]=this.formatPreview(Ze):Oi()(Ze)?Rt[Ce]='<span class="'.concat(Qt("undefined"),'">undefined</span>'):Pi()(Ze)?Rt[Ce]='<span class="'.concat(Qt("null"),'">null</span>'):Zt()(Ze)?Rt[Ce]='<span class="'.concat(Qt("number"),'">').concat(q()(Ze),"</span>"):typeof Ze=="bigint"?Rt[Ce]='<span class="'.concat(Qt("number"),'">').concat(q()(Ze),"n</span>"):Vs()(Ze)?Rt[Ce]='<span class="'.concat(Qt("boolean"),'">').concat(q()(Ze),"</span>"):kn()(Ze)?Rt[Ce]='<span class="'.concat(Qt("symbol"),'">').concat(Q()(q()(Ze)),"</span>"):(Ze=q()(Ze),Ce===0&&ie||(Ze=Q()(Ze)),Ze.length>5e3&&(Ze=At()(Ze,5e3,{separator:" ",ellipsis:"â¦"})),Rt[Ce]=Ze)}return Rt.join(" ")}},{key:"formatDir",value:function(Rt){return Ie()(Rt[0])?this.formatPreview(Rt[0]):this.formatCommon(Rt)}},{key:"formatTableVal",value:function(Rt){var Qt=this.console.c;return Ie()(Rt)?"{â¦}":De()(Rt)?Es()('<div class="'.concat(Qt("preview"),'">').concat(yt(Rt),"</div>")):q()(Rt)}},{key:"formatPreview",value:function(Rt){var Qt=this,ie=this.console.c,Ce=vs()();this.lazyEvaluation?this.objects[Ce]=Rt:this.extractObj(Rt,{},function(Ai){Qt.objects[Ce]=Ai});var oi=Z()(["dir","table"],this.type),Ze=Ct(Rt);return Ze==="Array"&&Rt.length>1?(Ze="(".concat(Rt.length,")"),oi&&(Ze="Array".concat(Ze))):Ze==="RegExp"?Ze=q()(Rt):ii()(Rt)&&(Ze=this.formatElName(Rt)),'<div class="'.concat(ie("preview"),'" data-id="').concat(Ce,'">')+'<div class="'.concat(ie("preview-container"),'">')+'<div class="'.concat(ie("preview-icon-container"),'"><span class="').concat(ie("icon icon-caret-right"),'"></span></div>')+'<span class="'.concat(ie("preview-content-container"),'">')+'<span class="'.concat(ie("descriptor"),'">').concat(Q()(Ze),"</span> ")+'<span class="'.concat(ie("object-preview"),'">').concat(oi?"":yt(Rt,{getterVal:this.accessGetter,unenumerable:!1}),"</span>")+"</span></div>"+'<div class="'.concat(ie("json hidden"),'"></div></div>')}},{key:"substituteStr",value:function(Rt){var Qt=Q()(Rt[0]),ie=!1,Ce="";Rt.shift();for(var oi=0,Ze=Qt.length;oi<Ze;oi++){var Ai=Qt[oi];if(Ai==="%"&&Rt.length!==0){oi++;var je=Rt.shift();switch(Qt[oi]){case"i":case"d":Ce+=me()(je);break;case"f":Ce+=Ve()(je);break;case"s":Ce+=q()(je);break;case"O":Ie()(je)?Ce+=this.formatPreview(je):Ce+=q()(je);break;case"o":ii()(je)?Ce+=this.formatEl(je):Ie()(je)?Ce+=this.formatPreview(je):Ce+=q()(je);break;case"c":if(Qt.length<=oi+1)break;ie&&(Ce+="</span>"),ie=!0,Ce+='<span style="'.concat(Pt(je),'">');break;default:oi--,Rt.unshift(je),Ce+=Ai}}else Ce+=Ai}return ie&&(Ce+="</span>"),Rt.unshift(Ce),Rt}},{key:"formatJs",value:function(Rt){return'<pre class="'.concat(this.console.c("code"),'">').concat(this.console.c(Ls()(Rt,"js",gt)),"</pre>")}},{key:"formatFn",value:function(Rt){return'<pre style="display:inline">'.concat(this.formatJs(Rt.toString()),"</pre>")}},{key:"formatElName",value:function(Rt){var Qt=Rt.id,ie=Rt.className,Ce=Rt.tagName.toLowerCase();if(Qt!==""&&(Ce+="#".concat(Qt)),Ei()(ie)){var oi="";O()(ie.split(/\s+/g),function(Ze){Ze.trim()!==""&&(oi+=".".concat(Ze))}),Ce+=oi}return Ce}},{key:"formatEl",value:function(Rt){var Qt=vs()();return this.elements[Qt]=Rt,this.console.c('<div class="dom-viewer" data-id="'.concat(Qt,'"></div>'))}}]),Ci}(Be());function Pt(ki){var Vi=(ki=Te()(ki)).split(";"),Ci={};O()(Vi,function(Qt){if(Z()(Qt,":")){var ie=I(Qt.split(":"),2),Ce=ie[0],oi=ie[1];Ci[kt()(Ce)]=kt()(oi)}}),Ci.display="inline-block",Ci["max-width"]="100%",delete Ci.width,delete Ci.height;var Rt="";return O()(Ci,function(Qt,ie){Rt+="".concat(ie,":").concat(Qt,";")}),Rt}var ee=s(1194),ri=s.n(ee),Ne=s(8847),ve=s.n(Ne),_i=s(6329),bi=s.n(_i),ds=s(9001),Hs=s.n(ds),Bn=s(9702),Vn=s.n(Bn),jn=s(2439),Fs=s.n(jn),Rn=s(8933),is=s.n(Rn),er=s(4407),Cn=s.n(er),ir=s(5852),sr=s.n(ir);function nr(ki){var Vi=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Ci,Rt=(0,o.Z)(ki);if(Vi){var Qt=(0,o.Z)(this).constructor;Ci=Reflect.construct(Rt,arguments,Qt)}else Ci=Rt.apply(this,arguments);return(0,d.Z)(this,Ci)}}var Pn,rr=function(ki){(0,l.Z)(Ci,ki);var Vi=nr(Ci);function Ci(Rt,Qt){var ie,Ce,oi=Qt.compName,Ze=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Ai=Ze===void 0?"light":Ze;return(0,B.Z)(this,Ci),(ie=Vi.call(this)).subComponents=[],ie.compName=oi,ie.c=ot(oi),ie.options={},ie.container=Rt,ie.$container=Zi()(Rt),ie.$container.addClass(["luna-".concat(oi),ie.c("platform-".concat((Ce=Ee()(),Ce==="os x"?"mac":Ce)))]),ie.on("optionChange",function(je,mi,Ki){var es=ie.c;je==="theme"&&(ie.$container.rmClass(es("theme-".concat(Ki))).addClass(es("theme-".concat(mi))),O()(ie.subComponents,function(os){return os.setOption("theme",mi)}))}),ie.setOption("theme",Ai),ie}return(0,H.Z)(Ci,[{key:"destroy",value:function(){var Rt=this;this.destroySubComponents();var Qt=this.$container,ie=Qt.attr("class");O()(ie.split(/\s+/),function(Ce){dt()(Ce,"luna-".concat(Rt.compName))&&Qt.rmClass(Ce)}),Qt.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(Rt,Qt){var ie=this,Ce=this.options,oi={};typeof Rt=="string"?oi[Rt]=Qt:oi=Rt,O()(oi,function(Ze,Ai){var je=Ce[Ai];Ce[Ai]=Ze,ie.emit("optionChange",Ai,Ze,je)})}},{key:"getOption",value:function(Rt){return this.options[Rt]}},{key:"addSubComponent",value:function(Rt){Rt.setOption("theme",this.options.theme),this.subComponents.push(Rt)}},{key:"removeSubComponent",value:function(Rt){sr()(this.subComponents,function(Qt){return Qt===Rt})}},{key:"destroySubComponents",value:function(){O()(this.subComponents,function(Rt){return Rt.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Rt){var Qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};pi()(Rt,Qt),bi()(this.options,Rt)}},{key:"find",value:function(Rt){return this.$container.find(this.c(Rt))}}]),Ci}(Be()),or=s(1571),Sn=s.n(or);function xr(ki){var Vi=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Ci,Rt=(0,o.Z)(ki);if(Vi){var Qt=(0,o.Z)(this).constructor;Ci=Reflect.construct(Rt,arguments,Qt)}else Ci=Rt.apply(this,arguments);return(0,d.Z)(this,Ci)}}v=s.hmd(v);var Cr=navigator.userAgent,qr=Cr.indexOf("Android")>-1||Cr.indexOf("Adr")>-1,Er=0,Ir=function(ki){(0,l.Z)(Ci,ki);var Vi=xr(Ci);function Ci(Rt){var Qt,ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,B.Z)(this,Ci),(Qt=Vi.call(this,Rt,{compName:"console"},ie)).spaceHeight=0,Qt.topSpaceHeight=0,Qt.bottomSpaceHeight=0,Qt.lastScrollTop=0,Qt.lastTimestamp=0,Qt.speedToleranceFactor=100,Qt.maxSpeedTolerance=2e3,Qt.minSpeedTolerance=100,Qt.logs=[],Qt.displayLogs=[],Qt.timer={},Qt.counter={},Qt.asyncList=[],Qt.asyncTimer=null,Qt.isAtBottom=!0,Qt.groupStack=new(Hs()),Qt.selectedLog=null,Qt.onScroll=function(){var Ce=Qt.container,oi=Ce.scrollHeight,Ze=Ce.offsetHeight,Ai=Ce.scrollTop;if(!(Ai<=0||Ze+Ai>oi)){var je=!1;(oi===Ze||Ai===oi-Ze)&&(je=!0),Qt.isAtBottom=je;var mi=Qt.lastScrollTop,Ki=Qt.lastTimestamp,es=ve()(),os=es-Ki,Ts=Ai-mi,ts=Math.abs(Ts/os)*Qt.speedToleranceFactor;os>1e3&&(ts=1e3),ts>Qt.maxSpeedTolerance&&(ts=Qt.maxSpeedTolerance),ts<Qt.minSpeedTolerance&&(ts=Qt.minSpeedTolerance),Qt.lastScrollTop=Ai,Qt.lastTimestamp=es;var ss=0,ls=0;mi<Ai?(ss=Qt.minSpeedTolerance,ls=ts):(ss=ts,ls=Qt.minSpeedTolerance),Qt.topSpaceHeight<Ai-ss&&Qt.topSpaceHeight+Qt.el.offsetHeight>Ai+Ze+ls||Qt.renderViewport({topTolerance:2*ss,bottomTolerance:2*ls})}},Qt.initTpl(),Qt.initOptions(ie,{maxNum:0,asyncRender:!0,showHeader:!1,filter:"",level:["verbose","info","warning","error"],accessGetter:!1,unenumerable:!0,lazyEvaluation:!0}),Qt.$el=Qt.find(".logs"),Qt.el=Qt.$el.get(0),Qt.$fakeEl=Qt.find(".fake-logs"),Qt.fakeEl=Qt.$fakeEl.get(0),Qt.$space=Qt.find(".logs-space"),Qt.space=Qt.$space.get(0),qr&&(Qt.speedToleranceFactor=800,Qt.maxSpeedTolerance=3e3,Qt.minSpeedTolerance=800),Qt.resizeSensor=new(ge())(Rt),Qt.renderViewport=Fs()(function(Ce){Qt._renderViewport(Ce)},16),Qt.global={copy:function(Ce){Ei()(Ce)||(Ce=JSON.stringify(Ce,null,2)),xi()(Ce)},$:function(Ce){return document.querySelector(Ce)},$$:function(Ce){return ns()(document.querySelectorAll(Ce))},$x:function(Ce){return is()(Ce)},clear:function(){Qt.clear()},dir:function(Ce){Qt.dir(Ce)},table:function(Ce,oi){Qt.table(Ce,oi)},keys:Mi()},Qt.bindEvent(),Qt}return(0,H.Z)(Ci,[{key:"setGlobal",value:function(Rt,Qt){this.global[Rt]=Qt}},{key:"destroy",value:function(){this.$container.off("scroll",this.onScroll),this.resizeSensor.destroy(),(0,N.Z)((0,o.Z)(Ci.prototype),"destroy",this).call(this)}},{key:"count",value:function(){var Rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default",Qt=this.counter;Oi()(Qt[Rt])?Qt[Rt]=1:Qt[Rt]++,this.info("".concat(Rt,": ").concat(Qt[Rt]))}},{key:"countReset",value:function(){var Rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";this.counter[Rt]=0}},{key:"assert",value:function(){for(var Rt=arguments.length,Qt=new Array(Rt),ie=0;ie<Rt;ie++)Qt[ie]=arguments[ie];ft()(Qt)||Qt.shift()||(Qt.length===0&&Qt.unshift("console.assert"),Qt.unshift("Assertion failed: "),this.insert("error",Qt))}},{key:"log",value:function(){for(var Rt=arguments.length,Qt=new Array(Rt),ie=0;ie<Rt;ie++)Qt[ie]=arguments[ie];ft()(Qt)||this.insert("log",Qt)}},{key:"debug",value:function(){for(var Rt=arguments.length,Qt=new Array(Rt),ie=0;ie<Rt;ie++)Qt[ie]=arguments[ie];ft()(Qt)||this.insert("debug",Qt)}},{key:"dir",value:function(Rt){Oi()(Rt)||this.insert("dir",[Rt])}},{key:"table",value:function(){for(var Rt=arguments.length,Qt=new Array(Rt),ie=0;ie<Rt;ie++)Qt[ie]=arguments[ie];ft()(Qt)||this.insert("table",Qt)}},{key:"time",value:function(){var Rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";if(this.timer[Rt])return this.insert("warn",["Timer '".concat(Rt,"' already exists")]);this.timer[Rt]=ri()()}},{key:"timeLog",value:function(){var Rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default",Qt=this.timer[Rt];if(!Qt)return this.insert("warn",["Timer '".concat(Rt,"' does not exist")]);this.info("".concat(Rt,": ").concat(ri()()-Qt,"ms"))}},{key:"timeEnd",value:function(){var Rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";this.timeLog(Rt),delete this.timer[Rt]}},{key:"clear",value:function(){var Rt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.logs=[],this.displayLogs=[],this.selectLog(null),this.lastLog=void 0,this.counter={},this.timer={},this.groupStack=new(Hs()),this.asyncList=[],this.asyncTimer&&(clearTimeout(this.asyncTimer),this.asyncTimer=null),Rt?this.render():this.insert("log",["%cConsole was cleared","color:#808080;font-style:italic;"])}},{key:"info",value:function(){for(var Rt=arguments.length,Qt=new Array(Rt),ie=0;ie<Rt;ie++)Qt[ie]=arguments[ie];ft()(Qt)||this.insert("info",Qt)}},{key:"error",value:function(){for(var Rt=arguments.length,Qt=new Array(Rt),ie=0;ie<Rt;ie++)Qt[ie]=arguments[ie];ft()(Qt)||this.insert("error",Qt)}},{key:"warn",value:function(){for(var Rt=arguments.length,Qt=new Array(Rt),ie=0;ie<Rt;ie++)Qt[ie]=arguments[ie];ft()(Qt)||this.insert("warn",Qt)}},{key:"group",value:function(){for(var Rt=arguments.length,Qt=new Array(Rt),ie=0;ie<Rt;ie++)Qt[ie]=arguments[ie];this.insert({type:"group",args:Qt,ignoreFilter:!0})}},{key:"groupCollapsed",value:function(){for(var Rt=arguments.length,Qt=new Array(Rt),ie=0;ie<Rt;ie++)Qt[ie]=arguments[ie];this.insert({type:"groupCollapsed",args:Qt,ignoreFilter:!0})}},{key:"groupEnd",value:function(){this.insert("groupEnd")}},{key:"evaluate",value:function(Rt){this.insert({type:"input",args:[Rt],ignoreFilter:!0});try{this.output(this.evalJs(Rt))}catch(Qt){this.insert({type:"error",ignoreFilter:!0,args:[Qt]})}}},{key:"html",value:function(){for(var Rt=arguments.length,Qt=new Array(Rt),ie=0;ie<Rt;ie++)Qt[ie]=arguments[ie];this.insert("html",Qt)}},{key:"toggleGroup",value:function(Rt){Rt.targetGroup.collapsed?this.openGroup(Rt):this.collapseGroup(Rt)}},{key:"output",value:function(Rt){this.insert({type:"output",args:[Rt],ignoreFilter:!0})}},{key:"render",value:function(){var Rt=this.logs,Qt=this.selectedLog;this.$el.html(""),this.isAtBottom=!0,this.updateBottomSpace(0),this.updateTopSpace(0),this.displayLogs=[];for(var ie=0,Ce=Rt.length;ie<Ce;ie++)this.attachLog(Rt[ie]);Qt&&(Z()(this.displayLogs,Qt)||this.selectLog(null))}},{key:"insert",value:function(Rt,Qt){var ie,Ce=this.options,oi=Ce.showHeader,Ze=Ce.asyncRender;if(oi&&(ie={time:ar(),from:Qn()}),Ze)return this.insertAsync(Rt,Qt,ie);this.insertSync(Rt,Qt,ie)}},{key:"insertAsync",value:function(Rt,Qt,ie){this.asyncList.push([Rt,Qt,ie]),this.handleAsyncList()}},{key:"insertSync",value:function(Rt,Qt,ie){var Ce,oi=this,Ze=this.logs,Ai=this.groupStack,je=this.options,mi=je.maxNum,Ki=je.accessGetter,es=je.unenumerable,os=je.lazyEvaluation;if((Ce=Ei()(Rt)?{type:Rt,args:Qt,header:ie}:Rt).type==="groupEnd")return this.lastLog.groupEnd(),void this.groupStack.pop();if(Ai.size>0&&(Ce.group=Ai.peek()),bi()(Ce,{id:++Er,accessGetter:Ki,unenumerable:es,lazyEvaluation:os}),Ce.type==="group"||Ce.type==="groupCollapsed"){var Ts={id:vs()("group"),collapsed:!1,parent:Ai.peek(),indentLevel:Ai.size+1};Ce.type==="groupCollapsed"&&(Ts.collapsed=!0),Ce.targetGroup=Ts,Ai.push(Ts)}var ts=new bt(this,Ce);ts.on("updateHeight",function(){oi.isAtBottom=!1,oi.renderViewport()});var ss=this.lastLog;if(ss&&!Z()(["html","group","groupCollapsed"],ts.type)&&ss.type===ts.type&&ts.isSimple()&&ss.text()===ts.text()?(ss.addCount(),ts.header&&ss.updateTime(ts.header.time),ts=ss,this.detachLog(ss)):(Ze.push(ts),this.lastLog=ts),mi!==0&&Ze.length>mi){var ls=Ze[0];this.detachLog(ls),Ze.shift()}this.attachLog(ts),this.emit("insert",ts)}},{key:"updateTopSpace",value:function(Rt){this.topSpaceHeight=Rt,this.el.style.top=Rt+"px"}},{key:"updateBottomSpace",value:function(Rt){this.bottomSpaceHeight=Rt}},{key:"updateSpace",value:function(Rt){this.spaceHeight!==Rt&&(this.spaceHeight=Rt,this.space.style.height=Rt+"px")}},{key:"detachLog",value:function(Rt){var Qt=this.displayLogs,ie=Qt.indexOf(Rt);ie>-1&&(Qt.splice(ie,1),this.renderViewport())}},{key:"attachLog",value:function(Rt){if(this.filterLog(Rt)&&!Rt.collapsed){var Qt=this.displayLogs;if(Qt.length===0)return Qt.push(Rt),void this.renderViewport();var ie=Vn()(Qt);if(Rt.id>ie.id)return Qt.push(Rt),void this.renderViewport();for(var Ce,oi=0,Ze=Qt.length-1,Ai=0;oi<=Ze;){if((Ce=Qt[Ai=oi+Math.floor((Ze-oi)/2)]).id===Rt.id)return;Ce.id<Rt.id?oi=Ai+1:Ze=Ai-1}Ce.id<Rt.id?Qt.splice(Ai+1,0,Rt):Qt.splice(Ai,0,Rt),this.renderViewport()}}},{key:"handleAsyncList",value:function(){var Rt=this,Qt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,ie=this.asyncList;this.asyncTimer||(this.asyncTimer=setTimeout(function(){Rt.asyncTimer=null;var Ce,oi,Ze=!1,Ai=ie.length;Ai<1e3?(oi=200,Ce=400):Ai<5e3?(oi=500,Ce=800):Ai<1e4?(oi=800,Ce=1e3):Ai<25e3?(oi=1e3,Ce=1200):Ai<5e4?(oi=1500,Ce=1500):(oi=2e3,Ce=2500),oi>Ai&&(oi=Ai,Ze=!0);for(var je=0;je<oi;je++){var mi=I(ie.shift(),3),Ki=mi[0],es=mi[1],os=mi[2];Rt.insertSync(Ki,es,os)}Ze||Sn()(function(){return Rt.handleAsyncList(Ce)})},Qt))}},{key:"injectGlobal",value:function(){O()(this.global,function(Rt,Qt){window[Qt]||(window[Qt]=Rt)})}},{key:"clearGlobal",value:function(){O()(this.global,function(Rt,Qt){window[Qt]&&window[Qt]===Rt&&delete window[Qt]})}},{key:"evalJs",value:function(Rt){var Qt;this.injectGlobal();try{Qt=eval.call(window,"(".concat(Rt,")"))}catch{Qt=eval.call(window,Rt)}return this.setGlobal("$_",Qt),this.clearGlobal(),Qt}},{key:"filterLog",value:function(Rt){var Qt=this.options.level,ie=this.options.filter;if(Rt.ignoreFilter)return!0;if(!Z()(Qt,Rt.level))return!1;if(ie){if(Ui()(ie))return ie(Rt);if(en()(ie))return ie.test(Te()(Rt.text()));if(Ei()(ie)&&(ie=kt()(ie)))return Z()(Te()(Rt.text()),Te()(ie))}return!0}},{key:"collapseGroup",value:function(Rt){Rt.targetGroup.collapsed=!0,Rt.updateIcon("caret-right"),this.updateGroup(Rt)}},{key:"openGroup",value:function(Rt){Rt.targetGroup.collapsed=!1,Rt.updateIcon("caret-down"),this.updateGroup(Rt)}},{key:"updateGroup",value:function(Rt){for(var Qt=Rt.targetGroup,ie=this.logs,Ce=ie.length,oi=ie.indexOf(Rt)+1;oi<Ce;){var Ze=ie[oi];if(!Ze.checkGroup()&&Ze.group===Qt)break;Ze.collapsed?this.detachLog(Ze):this.attachLog(Ze),oi++}}},{key:"selectLog",value:function(Rt){var Qt;this.selectedLog&&(this.selectedLog.deselect(),this.selectedLog=null),Pi()(Rt)?this.emit("deselect"):(this.selectedLog=Rt,(Qt=this.selectedLog)===null||Qt===void 0||Qt.select(),this.emit("select",Rt))}},{key:"bindEvent",value:function(){var Rt=this,Qt=this.$el,ie=this.c;this.resizeSensor.addListener(this.renderViewport);var Ce=this;Qt.on("click",ie(".log-container"),function(){Ce.selectLog(this.log)}),this.on("optionChange",function(oi,Ze){var Ai=Rt.logs;switch(oi){case"maxNum":Ze>0&&Ai.length>Ze&&(Rt.logs=Ai.slice(Ai.length-Ze),Rt.render());break;case"filter":Rt.render();break;case"level":Rt.options.level=ns()(Ze),Rt.render()}}),this.$container.on("scroll",this.onScroll)}},{key:"_renderViewport",value:function(){var Rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Qt=Rt.topTolerance,ie=Qt===void 0?500:Qt,Ce=Rt.bottomTolerance,oi=Ce===void 0?500:Ce,Ze=this.el,Ai=this.container,je=this.space;if(!Bt()(Ai)){for(var mi=Ai.scrollTop,Ki=Ai.offsetHeight,es=je.getBoundingClientRect().width,os=mi-ie,Ts=mi+Ki+oi,ts=this.displayLogs,ss=0,ls=0,fi=0,us=ts.length,Js=this.fakeEl,_n=document.createDocumentFragment(),xs=[],Os=0;Os<us;Os++){var $s=ts[Os],An=$s.width;$s.height!==0&&An===es||(_n.appendChild($s.container),xs.push($s))}if(xs.length>0){Js.appendChild(_n);for(var Zs=0,Mn=xs.length;Zs<Mn;Zs++)xs[Zs].updateSize();Js.textContent=""}for(var cn=document.createDocumentFragment(),sn=0;sn<us;sn++){var Ln=ts[sn],Fn=Ln.container,zi=Ln.height;fi>Ts?ls+=zi:fi+zi>os?cn.appendChild(Fn):fi<os&&(ss+=zi),fi+=zi}for(this.updateSpace(fi),this.updateTopSpace(ss),this.updateBottomSpace(ls);Ze.firstChild;)Ze.lastChild&&Ze.removeChild(Ze.lastChild);Ze.appendChild(cn);var mn=Ai.scrollHeight;this.isAtBottom&&mi<=mn-Ki&&(Ai.scrollTop=1e7)}}},{key:"initTpl",value:function(){this.$container.html(this.c(ms()(Pn||(Pn=(0,_.Z)([`
      <div class="logs-space">
        <div class="fake-logs"></div>
        <div class="logs"></div>
      </div>
    `])))))}}]),Ci}(rr),ar=function(){return Cn()("HH:MM:ss ")};function Qn(){for(var ki=new Error,Vi="",Ci=ki.stack?ki.stack.split(`
`):"",Rt=0,Qt=Ci.length;Rt<Qt;Rt++)if((Vi=Ci[Rt]).indexOf("winConsole")>-1&&Rt<Qt-1){Vi=Ci[Rt+1];break}return Vi}(function(ki,Vi){try{ki.exports=Vi,ki.exports.default=Vi}catch{}})(v,Ir)},5564:function(v,r,s){s.d(r,{Z:function(){return ns}});var _=s(168),x=s(5671),I=s(3144),B=s(7326),H=s(1752),N=s(9340),l=s(2963),d=s(1120),o=s(1512),T=s.n(o),L=s(1907),Q=s.n(L),P=s(1443),q=s.n(P),C=s(2461),Z=s.n(C),j=s(4331),dt=s.n(j),Y=s(5610),W=s.n(Y),u=s(7483),O=s.n(u),X=(s(3990),s(6341)),ht=s.n(X),pt=s(3875),ft=s.n(pt),$=s(6954),At=s.n($);s(9585);function _t(ji){var ni="luna-".concat(ji,"-");function Bi(Re){return Z()(dt()(Re).split(/\s+/),function(si){return ht()(si,ni)?si:si.replace(/[\w-]+/,function(Te){return"".concat(ni).concat(Te)})}).join(" ")}return function(Re){if(/<[^>]*>/g.test(Re))try{var si=O().parse(Re);return ut(si,function(Te){Te.attrs&&Te.attrs.class&&(Te.attrs.class=Bi(Te.attrs.class))}),O().stringify(si)}catch{return Bi(Re)}return Bi(Re)}}function ut(ji,ni){for(var Bi=0,Re=ji.length;Bi<Re;Bi++){var si=ji[Bi];ni(si),si.content&&ut(si.content,ni)}}var Ct="ontouchstart"in W(),vt="PointerEvent"in W(),xt={start:"touchstart",move:"touchmove",end:"touchend"},lt={start:"mousedown",move:"mousemove",end:"mouseup"},kt={start:"pointerdown",move:"pointermove",end:"pointerup"};function Jt(ji){return vt?kt[ji]:Ct?xt[ji]:lt[ji]}function Ut(ji,ni){var Bi="clientX";return ni[Bi]?ni[Bi]:ni.changedTouches?ni.changedTouches[0][Bi]:0}function Ae(ji){return ft()(ji.replace("px",""))}var Ot=s(3783),$t=s.n(Ot),Zt=s(6329),Yt=s.n(Zt),Ve=s(4193),xe=s.n(Ve),Ee=s(5852),Qe=s.n(Ee),Bt=s(6930),ot=s.n(Bt);function It(ji){var ni=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Bi,Re=(0,d.Z)(ji);if(ni){var si=(0,d.Z)(this).constructor;Bi=Reflect.construct(Re,arguments,si)}else Bi=Re.apply(this,arguments);return(0,l.Z)(this,Bi)}}var Nt,yt=function(ji){(0,N.Z)(Bi,ji);var ni=It(Bi);function Bi(Re,si){var Te,Ht,Mi=si.compName,Yi=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Zi=Yi===void 0?"light":Yi;return(0,x.Z)(this,Bi),(Te=ni.call(this)).subComponents=[],Te.compName=Mi,Te.c=_t(Mi),Te.options={},Te.container=Re,Te.$container=T()(Re),Te.$container.addClass(["luna-".concat(Mi),Te.c("platform-".concat((Ht=At()(),Ht==="os x"?"mac":Ht)))]),Te.on("optionChange",function(ti,Ii,hi){var Be=Te.c;ti==="theme"&&(Te.$container.rmClass(Be("theme-".concat(hi))).addClass(Be("theme-".concat(Ii))),$t()(Te.subComponents,function(qe){return qe.setOption("theme",Ii)}))}),Te.setOption("theme",Zi),Te}return(0,I.Z)(Bi,[{key:"destroy",value:function(){var Re=this;this.destroySubComponents();var si=this.$container,Te=si.attr("class");$t()(Te.split(/\s+/),function(Ht){ot()(Ht,"luna-".concat(Re.compName))&&si.rmClass(Ht)}),si.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(Re,si){var Te=this,Ht=this.options,Mi={};typeof Re=="string"?Mi[Re]=si:Mi=Re,$t()(Mi,function(Yi,Zi){var ti=Ht[Zi];Ht[Zi]=Yi,Te.emit("optionChange",Zi,Yi,ti)})}},{key:"getOption",value:function(Re){return this.options[Re]}},{key:"addSubComponent",value:function(Re){Re.setOption("theme",this.options.theme),this.subComponents.push(Re)}},{key:"removeSubComponent",value:function(Re){Qe()(this.subComponents,function(si){return si===Re})}},{key:"destroySubComponents",value:function(){$t()(this.subComponents,function(Re){return Re.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Re){var si=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xe()(Re,si),Yt()(this.options,Re)}},{key:"find",value:function(Re){return this.$container.find(this.c(Re))}}]),Bi}(q()),re=s(8901),Wt=s.n(re),Vt=s(8613),Tt=s.n(Vt),qt=s(3367),Gt=s.n(qt),se=s(9833),te=s.n(se),ge=s(1286),Me=s.n(ge),Ie=s(242),gi=s.n(Ie),Ei=s(2439),li=s.n(Ei),yi=s(6156),ci=s.n(yi),De=s(4777),Ke=s.n(De),pi=s(1754),$e=s.n(pi),ii=s(6768),Le=s.n(ii),me=s(3063),Je=s.n(me),Ge=s(9882),di=s.n(Ge),Pi=s(9853),Ti=s.n(Pi),Oi=s(6435),qi=s.n(Oi);function Ui(ji){var ni=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Bi,Re=(0,d.Z)(ji);if(ni){var si=(0,d.Z)(this).constructor;Bi=Reflect.construct(Re,arguments,si)}else Bi=Re.apply(this,arguments);return(0,l.Z)(this,Bi)}}v=s.hmd(v);var hs=T()(document),ns=function(ji){(0,N.Z)(Bi,ji);var ni=Ui(Bi);function Bi(Re,si){var Te;(0,x.Z)(this,Bi),(Te=ni.call(this,Re,{compName:"data-grid"},si)).resizeIdx=0,Te.resizeStartX=0,Te.resizeStartLeft=0,Te.resizeDeltaX=0,Te.nodes=[],Te.colWidthsInitialized=!1,Te.colMap={},Te.selectedNode=null,Te.isAscending=!0,Te.colWidths=[],Te.onResizeColMove=function(ti){var Ii=(0,B.Z)(Te),hi=Ii.resizeIdx,Be=Ii.$resizers,qe=Ii.colWidths,ai=Ii.$colgroup,wi=Ut("x",ti=ti.origEvent)-Te.resizeStartX,Qi=qe[hi],Si=qe[hi+1],xi=qi()(24-Qi,0),Fi=Ti()(Si-24,0);wi=di()(wi,xi,Fi),ai.each(function(){var Gi=T()(this).find("col");Gi.eq(hi).css("width",Qi+wi+"px"),Gi.eq(hi+1).css("width",Si-wi+"px")}),Te.resizeDeltaX=wi;var Li=Te.resizeStartLeft+wi;Be.eq(hi).css("left","".concat(Li,"px"))},Te.onResizeColEnd=function(ti){Te.onResizeColMove(ti);var Ii=(0,B.Z)(Te),hi=Ii.c,Be=Ii.colWidths,qe=Ii.resizeIdx,ai=Ii.resizeDeltaX,wi=Te.options.columns,Qi=wi[qe],Si=wi[qe+1],xi=Be[qe]+ai,Fi=xi+(Be[qe+1]-ai),Li=Qi.weight+Si.weight,Gi=Li*(xi/Fi),Xi=Li-Gi;Qi.weight=Gi,Si.weight=Xi,Te.applyColWeights(),T()(document.body).rmClass(hi("resizing")),hs.off(Jt("move"),Te.onResizeColMove),hs.off(Jt("end"),Te.onResizeColEnd)},Te.$container.attr("tabindex","0"),Te.resizeSensor=new(gi())(Re),Te.onResize=li()(function(){Te.updateHeight(),Te.updateWeights()},16),si.height&&(si.maxHeight=si.height,si.minHeight=si.height),Te.initOptions(si,{minHeight:41,maxHeight:1/0,filter:""});var Ht=Te.options,Mi=Ht.columns,Yi=Ht.minHeight,Zi=Ht.maxHeight;return $t()(Mi,function(ti){xe()(ti,{sortable:!1}),Te.colMap[ti.id]=ti}),Zi<Yi&&Te.setOption("maxHeight",Yi),Te.initTpl(),Te.$headerRow=Te.find(".header").find("tr"),Te.$fillerRow=Te.find(".filler-row"),Te.fillerRow=Te.$fillerRow.get(0),Te.$tableBody=Te.find(".data").find("tbody"),Te.tableBody=Te.$tableBody.get(0),Te.$colgroup=Te.$container.find("colgroup"),Te.$dataContainer=Te.find(".data-container"),Te.renderHeader(),Te.renderResizers(),Te.updateWeights(),Te.updateHeight(),Te.bindEvent(),Te}return(0,I.Z)(Bi,[{key:"destroy",value:function(){(0,H.Z)((0,d.Z)(Bi.prototype),"destroy",this).call(this),this.resizeSensor.destroy(),this.$container.rmAttr("tabindex")}},{key:"remove",value:function(Re){var si=this.nodes,Te=si.indexOf(Re);Te>-1&&(Re.detach(),si.splice(Te,1),Re===this.selectedNode&&this.selectNode(si[Te]||si[Te-1]||null),this.updateHeight())}},{key:"append",value:function(Re,si){var Te=new ys(this,Re,si);return this.nodes.push(Te),this.sortId?this.sortNodes(this.sortId,this.isAscending):this.filterNode(Te)&&(this.tableBody.insertBefore(Te.container,this.fillerRow),this.updateHeight()),Te}},{key:"clear",value:function(){$t()(this.nodes,function(Re){return Re.detach()}),this.nodes=[],this.selectNode(null),this.updateHeight()}},{key:"updateHeight",value:function(){var Re=this.$fillerRow,si=this.c,Te=this.$container,Ht=this.options,Mi=Ht.maxHeight,Yi=Ht.minHeight;this.$dataContainer.css({height:"auto"});var Zi=this.$headerRow.offset().height+Ae(Te.css("border-top-width"))+Ae(Te.css("border-bottom-width"));(Yi-=Zi)<0&&(Yi=0),Mi-=Zi;var ti=this.$dataContainer.find(si(".node")),Ii=ti.length,hi=0;Ii>0&&(hi=ti.offset().height*Ii),hi>Yi?Re.hide():Re.show(),hi<Yi?hi=Yi:hi>=Mi&&(hi=Mi),this.$dataContainer.css({height:hi})}},{key:"selectNode",value:function(Re){var si;(ci()(Re)||Re!=null&&Re.selectable)&&(this.selectedNode&&(this.selectedNode.deselect(),this.selectedNode=null),ci()(Re)?this.emit("deselect"):(this.selectedNode=Re,(si=this.selectedNode)===null||si===void 0||si.select(),this.emit("select",Re)))}},{key:"onResizeColStart",value:function(Re){var si=this.c,Te=this.resizeIdx,Ht=this.$resizers;Re.stopPropagation(),Re.preventDefault(),Re=Re.origEvent,this.resizeStartX=Ut("x",Re),this.resizeStartLeft=Ae(Ht.eq(Te).css("left")),T()(document.body).addClass(si("resizing")),hs.on(Jt("move"),this.onResizeColMove),hs.on(Jt("end"),this.onResizeColEnd)}},{key:"bindEvent",value:function(){var Re=this,si=this.c,Te=this.$headerRow,Ht=this.$tableBody,Mi=this.$resizers;this.resizeSensor.addListener(this.onResize);var Yi=this;Ht.on("click",si(".node"),function(){Yi.selectNode(this.dataGridNode)}),Te.on("click",si(".sortable"),function(Zi){Zi.stopPropagation();var ti=T()(this),Ii=ti.data("id"),hi=ti.data("order")!=="descending";ti.data("order",hi?"descending":"ascending"),Yi.sortNodes(Ii,hi),Te.find("th").each(function(){var Be=T()(this);Be.data("id")!==Ii&&Be.rmAttr("data-order")})}),Mi.on(Jt("start"),function(Zi){var ti=T()(this);Yi.resizeIdx=ft()(ti.data("idx")),Yi.onResizeColStart(Zi)}),this.on("optionChange",function(Zi){switch(Zi){case"minHeight":case"maxHeight":Re.updateHeight();break;case"filter":Re.renderData()}})}},{key:"sortNodes",value:function(Re,si){var Te=this.colMap[Re].comparator||Ys;this.nodes.sort(function(Ht,Mi){var Yi=Ht.data[Re],Zi=Mi.data[Re];return te()(Yi)&&(Yi=Yi.innerText),te()(Zi)&&(Zi=Zi.innerText),si?Te(Yi,Zi):Te(Zi,Yi)}),this.renderData(),this.sortId=Re,this.isAscending=si}},{key:"updateWeights",value:function(){var Re=this.container,si=this.$headerRow,Te=this.options.columns,Ht=Re.offsetWidth;if(!this.colWidthsInitialized&&Ht){for(var Mi=0,Yi=Te.length;Mi<Yi;Mi++){var Zi=Te[Mi];if(!Zi.weight){var ti=si.find("th").get(Mi).offsetWidth;Zi.weight=100*ti/Ht}}this.colWidthsInitialized=!0}this.applyColWeights()}},{key:"applyColWeights",value:function(){var Re=this.container,si=this.$colgroup,Te=this.options.columns,Ht=Re.offsetWidth;if(!(Ht<=0)){for(var Mi=0,Yi=Te.length,Zi=0;Zi<Yi;Zi++)Mi+=Te[Zi].weight;var ti="",Ii=0,hi=0;this.colWidths=[];for(var Be=0;Be<Yi;Be++){var qe=(Ii+=Te[Be].weight)*Ht/Mi|0,ai=Math.max(qe-hi,14);hi=qe,ti+='<col style="width:'.concat(ai,'px"></col>'),this.colWidths[Be]=ai}si.html(ti),this.positionResizers()}}},{key:"positionResizers",value:function(){for(var Re=this.colWidths,si=[],Te=Re.length-1,Ht=0;Ht<Te;Ht++)si[Ht]=(si[Ht-1]||0)+Re[Ht];for(var Mi=0;Mi<Te;Mi++)this.$resizers.eq(Mi).css("left",si[Mi]+"px")}},{key:"renderData",value:function(){var Re=this,si=this.tableBody,Te=this.nodes,Ht=this.fillerRow;$t()(Te,function(Mi){return Mi.detach()}),$t()(Te,function(Mi){Re.filterNode(Mi)&&si.insertBefore(Mi.container,Ht)}),this.selectedNode&&!this.filterNode(this.selectedNode)&&this.selectNode(null),this.updateHeight()}},{key:"filterNode",value:function(Re){var si=this.options.filter;if(si){if(Ke()(si))return si(Re);if($e()(si))return si.test(Re.text());if(Le()(si)&&(si=dt()(si)))return ht()(Je()(Re.text()),Je()(si))}return!0}},{key:"renderHeader",value:function(){var Re=this.c,si="",Te="";$t()(this.options.columns,function(Ht){var Mi=Wt()(Ht.title);Ht.sortable?si+=Re('<th class="sortable" data-id="'.concat(Ht.id,'">').concat(Mi,"</th>")):si+="<th>".concat(Mi,"</th>"),Te+="<td></td>"}),this.$headerRow.html(si),this.$fillerRow.html(Te)}},{key:"renderResizers",value:function(){for(var Re="",si=this.options.columns.length-1,Te=0;Te<si;Te++)Re+=this.c('<div class="resizer" data-idx="'.concat(Te,'"></div>'));this.$container.append(Re),this.$resizers=this.find(".resizer")}},{key:"initTpl",value:function(){this.$container.html(this.c(Q()(Nt||(Nt=(0,_.Z)([`
        <div class="header-container">
          <table class="header">
            <colgroup></colgroup>
            <tbody>
              <tr></tr>
            </tbody>
          </table>
        </div>
        <div class="data-container">
          <table class="data">
            <colgroup></colgroup>
            <tbody>
              <tr class="filler-row"></tr>
            </tbody>
          </table>
        </div>
      `])))))}}]),Bi}(yt),ys=function(){function ji(ni,Bi){var Re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{selectable:!1};(0,x.Z)(this,ji),this.container=Tt()("tr"),this.selectable=!1,this.container.dataGridNode=this,this.$container=T()(this.container),this.$container.addClass(ni.c("node")),this.dataGrid=ni,this.data=Bi,Re.selectable&&(this.selectable=Re.selectable),this.render()}return(0,I.Z)(ji,[{key:"text",value:function(){return this.$container.text()}},{key:"detach",value:function(){this.$container.remove()}},{key:"select",value:function(){this.$container.addClass(this.dataGrid.c("selected"))}},{key:"deselect",value:function(){this.$container.rmClass(this.dataGrid.c("selected"))}},{key:"render",value:function(){var ni=this.data,Bi=this.$container,Re=this.container,si=this.dataGrid.getOption("columns");Bi.html(""),$t()(si,function(Te){var Ht=Tt()("td"),Mi=ni[Te.id];Me()(Mi)||(te()(Mi)?Ht.appendChild(Mi):Ht.innerText=Gt()(Mi)),Re.appendChild(Ht)})}}]),ji}();function Ys(ji,ni){if(ji=Gt()(ji),ni=Gt()(ni),ot()(ji,"_")&&!ot()(ni,"_"))return 1;if(ot()(ni,"_")&&!ot()(ji,"_"))return-1;for(var Bi,Re,si,Te,Ht=/^\d+|^\D+/;;){if(!ji)return ni?-1:0;if(!ni)return 1;if(Bi=ji.match(Ht)[0],Re=ni.match(Ht)[0],si=!isNaN(Bi),Te=!isNaN(Re),si&&!Te)return-1;if(Te&&!si)return 1;if(si&&Te){var Mi=Bi-Re;if(Mi)return Mi;if(Bi.length!==Re.length)return+Bi||+Re?Re.length-Bi.length:Bi.length-Re.length}else if(Bi!==Re)return Bi<Re?-1:1;ji=ji.substring(Bi.length),ni=ni.substring(Re.length)}}(function(ji,ni){try{ji.exports=ni,ji.exports.default=ni}catch{}})(v,ns)},8209:function(v,r,s){s.d(r,{Z:function(){return Ie}});var _=s(168),x=s(4942),I=s(5671),B=s(3144),H=s(7326),N=s(9340),l=s(2963),d=s(1120),o=s(1443),T=s.n(o),L=s(1512),Q=s.n(L),P=s(2461),q=s.n(P),C=s(4331),Z=s.n(C),j=s(5610),dt=s.n(j),Y=s(7483),W=s.n(Y),u=(s(3990),s(6341)),O=s.n(u),X=(s(3875),s(6954)),ht=s.n(X);s(9585);function pt(li){var yi="luna-".concat(li,"-");function ci(De){return q()(Z()(De).split(/\s+/),function(Ke){return O()(Ke,yi)?Ke:Ke.replace(/[\w-]+/,function(pi){return"".concat(yi).concat(pi)})}).join(" ")}return function(De){if(/<[^>]*>/g.test(De))try{var Ke=W().parse(De);return ft(Ke,function(pi){pi.attrs&&pi.attrs.class&&(pi.attrs.class=ci(pi.attrs.class))}),W().stringify(Ke)}catch{return ci(De)}return ci(De)}}function ft(li,yi){for(var ci=0,De=li.length;ci<De;ci++){var Ke=li[ci];yi(Ke),Ke.content&&ft(Ke.content,yi)}}var $="ontouchstart"in dt();function At(){var li=ht()();return li==="os x"?"mac":li}var _t=s(3783),ut=s.n(_t),Ct=s(6329),vt=s.n(Ct),xt=s(4193),lt=s.n(xt),kt=s(5852),Jt=s.n(kt);function Ut(li){var yi=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ci,De=(0,d.Z)(li);if(yi){var Ke=(0,d.Z)(this).constructor;ci=Reflect.construct(De,arguments,Ke)}else ci=De.apply(this,arguments);return(0,l.Z)(this,ci)}}var Ae,Ot=function(li){(0,N.Z)(ci,li);var yi=Ut(ci);function ci(De,Ke){var pi,$e=Ke.compName,ii=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Le=ii===void 0?"light":ii;return(0,I.Z)(this,ci),(pi=yi.call(this)).subComponents=[],pi.compName=$e,pi.c=pt($e),pi.options={},pi.container=De,pi.$container=Q()(De),pi.$container.addClass(["luna-".concat($e),pi.c("platform-".concat(At()))]),pi.on("optionChange",function(me,Je,Ge){var di=pi.c;me==="theme"&&(pi.$container.rmClass(di("theme-".concat(Ge))).addClass(di("theme-".concat(Je))),ut()(pi.subComponents,function(Pi){return Pi.setOption("theme",Je)}))}),pi.setOption("theme",Le),pi}return(0,B.Z)(ci,[{key:"destroy",value:function(){this.destroySubComponents();var De=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(De("platform-".concat(At()))).rmClass(De("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(De,Ke){var pi=this,$e=this.options,ii={};typeof De=="string"?ii[De]=Ke:ii=De,ut()(ii,function(Le,me){var Je=$e[me];$e[me]=Le,pi.emit("optionChange",me,Le,Je)})}},{key:"getOption",value:function(De){return this.options[De]}},{key:"addSubComponent",value:function(De){De.setOption("theme",this.options.theme),this.subComponents.push(De)}},{key:"removeSubComponent",value:function(De){Jt()(this.subComponents,function(Ke){return Ke===De})}},{key:"destroySubComponents",value:function(){ut()(this.subComponents,function(De){return De.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(De){var Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};lt()(De,Ke),vt()(this.options,De)}},{key:"find",value:function(De){return this.$container.find(this.c(De))}}]),ci}(T()),$t=s(8613),Zt=s.n($t),Yt=s(5972),Ve=s.n(Yt),xe=s(1907),Ee=s.n(xe),Qe=s(1352),Bt=s.n(Qe),ot=s(2289),It=s.n(ot),Nt=s(3651),yt=s.n(Nt),re=s(7756),Wt=s.n(re),Vt=s(8901),Tt=s.n(Vt),qt=s(1672),Gt=s.n(qt);function se(li,yi){var ci=Object.keys(li);if(Object.getOwnPropertySymbols){var De=Object.getOwnPropertySymbols(li);yi&&(De=De.filter(function(Ke){return Object.getOwnPropertyDescriptor(li,Ke).enumerable})),ci.push.apply(ci,De)}return ci}function te(li){for(var yi=1;yi<arguments.length;yi++){var ci=arguments[yi]!=null?arguments[yi]:{};yi%2?se(Object(ci),!0).forEach(function(De){(0,x.Z)(li,De,ci[De])}):Object.getOwnPropertyDescriptors?Object.defineProperties(li,Object.getOwnPropertyDescriptors(ci)):se(Object(ci)).forEach(function(De){Object.defineProperty(li,De,Object.getOwnPropertyDescriptor(ci,De))})}return li}function ge(li){var yi=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ci,De=(0,d.Z)(li);if(yi){var Ke=(0,d.Z)(this).constructor;ci=Reflect.construct(De,arguments,Ke)}else ci=De.apply(this,arguments);return(0,l.Z)(this,ci)}}v=s.hmd(v);var Me={comment:"",string:"",number:"",keyword:"",operator:""},Ie=function(li){(0,N.Z)(ci,li);var yi=ge(ci);function ci(De){var Ke,pi=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,I.Z)(this,ci),(Ke=yi.call(this,De,{compName:"dom-viewer"},pi)).isExpanded=!1,Ke.childNodes=[],Ke.childNodeDomViewers=[],Ke.toggle=function(){Ke.isExpanded?Ke.collapse():Ke.expand()},Ke.initOptions(pi,{node:document.documentElement,parent:null,isEndTag:!1,rootContainer:De,rootDomViewer:(0,H.Z)(Ke),ignore:function(){return!1}}),Ke.initTpl(),Ke.bindEvent(),Ke.options.isEndTag||Ke.initObserver(),Ke}return(0,B.Z)(ci,[{key:"select",value:function(De){var Ke=this.c,pi=this.options;if(!De||De&&pi.node===De)return this.$tag.hasClass(Ke("selected"))?void 0:(Q()(this.options.rootContainer).find(Ke(".selected")).rmClass(Ke("selected")).rmAttr("tabindex"),this.$tag.attr("tabindex","0").get(0).focus(),this.$tag.addClass(Ke("selected")),void pi.rootDomViewer.emit("select",pi.node));if(De.nodeType===Node.ELEMENT_NODE)for(var $e=De,ii=De.parentElement;ii;){if(ii===pi.node){this.expand(),this.childNodeDomViewers[this.childNodes.indexOf($e)].select(De);break}$e=ii,ii=ii.parentElement}}},{key:"attach",value:function(){this.container.appendChild(this.$tag.get(0)),this.$children&&this.container.appendChild(this.$children.get(0))}},{key:"isAttached",value:function(){return!!this.$tag.get(0).parentNode}},{key:"detach",value:function(){this.$tag.remove(),this.$children&&this.$children.remove()}},{key:"expand",value:function(){this.isExpandable()&&!this.isExpanded&&(this.isExpanded=!0,this.renderExpandTag(),this.renderChildNodes())}},{key:"collapse",value:function(){this.isExpandable()&&this.isExpanded&&(this.isExpanded=!1,this.renderCollapseTag())}},{key:"destroy",value:function(){var De=this.c;this.$tag.hasClass(De("selected"))&&this.options.rootDomViewer.emit("deselect"),this.detach(),this.observer&&this.observer.disconnect(),this.destroySubComponents(),this.options.rootDomViewer===this&&this.$container.rmClass("luna-dom-viewer").rmClass(De("platform-".concat(At()))).rmClass(De("theme-".concat(this.options.theme))),this.emit("destroy"),this.removeAllListeners()}},{key:"renderExpandTag",value:function(){var De=this.$tag,Ke=this.c,pi=this.options.node;De.html(this.renderHtmlTag(te(te({},gi(pi)),{},{hasTail:!1,hasToggleButton:!0}))),De.addClass(Ke("expanded")),this.$children.rmClass(Ke("hidden"))}},{key:"renderCollapseTag",value:function(){var De=this.$tag,Ke=this.c,pi=this.options.node;this.$children.addClass(Ke("hidden")),this.$tag.html(this.renderHtmlTag(te(te({},gi(pi)),{},{hasTail:!0,hasToggleButton:!0}))),De.rmClass(Ke("expanded"))}},{key:"initObserver",value:function(){var De=this;this.observer=new(It())(function(Ke){ut()(Ke,function(pi){De.handleMutation(pi)})}),this.observer.observe(this.options.node,{attributes:!0,childList:!0,characterData:!0})}},{key:"handleMutation",value:function(De){var Ke=this.$tag,pi=this.c,$e=this.options,ii=$e.node,Le=$e.ignore;if(O()(["attributes","childList"],De.type)){if(De.type==="childList"){if(Gt()(De.addedNodes,Le)&&Gt()(De.removedNodes,Le))return;this.renderChildNodes()}this.isExpandable()?this.isExpanded?this.renderExpandTag():this.renderCollapseTag():(this.$children.addClass(pi("hidden")),Ke.html(this.renderHtmlTag(te(te({},gi(ii)),{},{hasTail:!1}))))}else De.type==="characterData"&&(ii.nodeType===Node.TEXT_NODE?Ke.html(this.renderTextNode(ii)):ii.nodeType===Node.COMMENT_NODE&&Ke.html(this.renderHtmlComment(ii.nodeValue)))}},{key:"bindEvent",value:function(){var De=this,Ke=this.c,pi=this.$tag;this.options.node.nodeType===Node.ELEMENT_NODE&&pi.on("click",Ke(".toggle"),function($e){$e.stopPropagation(),De.toggle()}),$?pi.on("click",function(){return De.select()}):pi.on("mousedown",function(){return De.select()})}},{key:"isExpandable",value:function(){return this.options.node.nodeType===Node.ELEMENT_NODE&&this.getChildNodes().length>0}},{key:"getChildNodes",value:function(){var De=this.options,Ke=De.rootContainer,pi=De.ignore,$e=this.options.node,ii=Bt()($e.childNodes);return ii=Ve()(ii,function(Le){if(Le.nodeType===Node.TEXT_NODE||Le.nodeType===Node.COMMENT_NODE){var me=Le.nodeValue;if(Z()(me)==="")return!1}return Le!==Ke&&!pi(Le)})}},{key:"initTpl",value:function(){var De=this.container,Ke=this.c,pi=this.options,$e=pi.node,ii=pi.isEndTag,Le=Q()(Zt()("li"));if(Le.addClass(Ke("tree-item")),this.$tag=Le,ii)Le.html(Ke('<span class="html-tag" style="margin-left: -15px;">&lt;<span class="tag-name">/'.concat($e.tagName.toLocaleLowerCase(),'</span>&gt;</span><span class="selection"></span>')));else if($e.nodeType===Node.ELEMENT_NODE){var me=this.isExpandable(),Je=te(te({},gi($e)),{},{hasTail:me,hasToggleButton:me});Le.html(this.renderHtmlTag(Je))}else if($e.nodeType===Node.TEXT_NODE)Le.html(this.renderTextNode($e));else{if($e.nodeType!==Node.COMMENT_NODE)return;var Ge=$e.nodeValue;if(Ge.trim()==="")return;Le.html(this.renderHtmlComment(Ge))}if(De.appendChild(Le.get(0)),$e.nodeType===$e.ELEMENT_NODE){var di=Q()(Zt()("ul"));di.addClass([Ke("children"),Ke("hidden")]),De.appendChild(di.get(0)),this.$children=di}}},{key:"renderChildNodes",value:function(){var De=this,Ke=this.options.node,pi=this.options,$e=pi.rootContainer,ii=pi.ignore,Le=pi.rootDomViewer,me=this.$children.get(0),Je=this.childNodes,Ge=this.childNodeDomViewers;ut()(Ge,function(Ti){Ti.detach(),De.removeSubComponent(Ti)}),this.endTagDomViewer&&this.endTagDomViewer.detach();var di=this.getChildNodes();this.childNodes=di;var Pi=[];this.childNodeDomViewers=Pi,ut()(di,function(Ti,Oi){var qi,Ui=Je.indexOf(Ti);(qi=Ui>-1?Ge[Ui]:new ci(me,{node:Ti,parent:De,rootContainer:$e,rootDomViewer:Le,ignore:ii})).attach(),Pi[Oi]=qi,De.addSubComponent(qi)}),ut()(Ge,function(Ti){Ti.isAttached()||Ti.destroy()}),Ke&&(this.endTagDomViewer?this.endTagDomViewer.attach():(this.endTagDomViewer=new ci(me,{node:Ke,parent:this,isEndTag:!0,rootContainer:$e,rootDomViewer:Le,ignore:ii}),this.addSubComponent(this.endTagDomViewer)))}},{key:"renderHtmlTag",value:function(De){var Ke=q()(De.attributes,function(ii){var Le=ii.name,me=ii.value,Je=ii.isLink;return`<span class="attribute">
          <span class="attribute-name">`.concat(Tt()(Le),"</span>").concat(me?'="<span class="attribute-value'.concat(Je?" attribute-underline":"",'">').concat(Tt()(me),'</span>"'):"","</span>")}).join(""),pi="";De.hasTail?pi="".concat(De.hasTail?"â¦":"",'<span class="html-tag">&lt;<span class="tag-name">/').concat(De.tagName,"</span>&gt;</span>"):this.isExpandable()||(pi='<span class="html-tag">&lt;<span class="tag-name">/'.concat(De.tagName,"</span>&gt;</span>"));var $e="";return De.hasToggleButton&&($e='<div class="toggle "><span class="icon icon-arrow-right"></span><span class="icon icon-arrow-down"></span></div>'),this.c(Ee()(Ae||(Ae=(0,_.Z)([`
      `,`
      <span class="html-tag">&lt;<span class="tag-name">`,"</span>","&gt;</span>",`
      <span class="selection"></span>`])),$e,De.tagName,Ke,pi))}},{key:"renderTextNode",value:function(De){var Ke=this.c,pi=De.nodeValue,$e=De.parentElement,ii='<span class="text-node">',Le='</span><span class="selection"></span>';if($e&&pi.length<1e4){if($e.tagName==="STYLE")return Ke("".concat(ii).concat(yt()(pi,"css",Me)).concat(Le));if($e.tagName==="SCRIPT")return Ke("".concat(ii).concat(yt()(pi,"js",Me)).concat(Le))}return Ke('"'.concat(ii).concat(Tt()(Wt()(pi,1e4,{separator:" ",ellipsis:"â¦"}))).concat(Le,'"'))}},{key:"renderHtmlComment",value:function(De){return this.c('<span class="html-comment">&lt;!-- '.concat(Tt()(De),' --&gt;</span><span class="selection"></span>'))}}]),ci}(Ot);function gi(li){var yi={tagName:"",attributes:[]};yi.tagName=li.tagName.toLocaleLowerCase();var ci=[];return ut()(li.attributes,function(De){var Ke=De.name,pi=De.value;ci.push({name:Ke,value:pi,isLink:Ei(li,Ke)})}),yi.attributes=ci,yi}function Ei(li,yi){var ci=li.tagName;return(ci==="SCRIPT"||ci==="IMAGE"||ci==="VIDEO"||ci==="AUDIO")&&yi==="src"||ci==="LINK"&&yi==="href"}(function(li,yi){try{li.exports=yi,li.exports.default=yi}catch{}})(v,Ie)},129:function(v,r,s){s.d(r,{Z:function(){return ot}});var _=s(907),x=s(181);function I(Vt){return function(Tt){if(Array.isArray(Tt))return(0,_.Z)(Tt)}(Vt)||function(Tt){if(typeof Symbol<"u"&&Tt[Symbol.iterator]!=null||Tt["@@iterator"]!=null)return Array.from(Tt)}(Vt)||(0,x.Z)(Vt)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var B=s(168),H=s(5671),N=s(3144),l=s(7326),d=s(1752),o=s(9340),T=s(2963),L=s(1120),Q=s(1443),P=s.n(Q),q=s(1512),C=s.n(q),Z=s(2461),j=s.n(Z),dt=s(4331),Y=s.n(dt),W=s(5610),u=s.n(W),O=s(7483),X=s.n(O),ht=(s(3990),s(6341)),pt=s.n(ht),ft=(s(3875),s(6954)),$=s.n(ft);s(9585);function At(Vt){var Tt="luna-".concat(Vt,"-");function qt(Gt){return j()(Y()(Gt).split(/\s+/),function(se){return pt()(se,Tt)?se:se.replace(/[\w-]+/,function(te){return"".concat(Tt).concat(te)})}).join(" ")}return function(Gt){if(/<[^>]*>/g.test(Gt))try{var se=X().parse(Gt);return _t(se,function(te){te.attrs&&te.attrs.class&&(te.attrs.class=qt(te.attrs.class))}),X().stringify(se)}catch{return qt(Gt)}return qt(Gt)}}function _t(Vt,Tt){for(var qt=0,Gt=Vt.length;qt<Gt;qt++){var se=Vt[qt];Tt(se),se.content&&_t(se.content,Tt)}}u();var ut=s(3783),Ct=s.n(ut),vt=s(6329),xt=s.n(vt),lt=s(4193),kt=s.n(lt),Jt=s(5852),Ut=s.n(Jt),Ae=s(6930),Ot=s.n(Ae);function $t(Vt){var Tt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var qt,Gt=(0,L.Z)(Vt);if(Tt){var se=(0,L.Z)(this).constructor;qt=Reflect.construct(Gt,arguments,se)}else qt=Gt.apply(this,arguments);return(0,T.Z)(this,qt)}}var Zt,Yt=function(Vt){(0,o.Z)(qt,Vt);var Tt=$t(qt);function qt(Gt,se){var te,ge,Me=se.compName,Ie=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,gi=Ie===void 0?"light":Ie;return(0,H.Z)(this,qt),(te=Tt.call(this)).subComponents=[],te.compName=Me,te.c=At(Me),te.options={},te.container=Gt,te.$container=C()(Gt),te.$container.addClass(["luna-".concat(Me),te.c("platform-".concat((ge=$()(),ge==="os x"?"mac":ge)))]),te.on("optionChange",function(Ei,li,yi){var ci=te.c;Ei==="theme"&&(te.$container.rmClass(ci("theme-".concat(yi))).addClass(ci("theme-".concat(li))),Ct()(te.subComponents,function(De){return De.setOption("theme",li)}))}),te.setOption("theme",gi),te}return(0,N.Z)(qt,[{key:"destroy",value:function(){var Gt=this;this.destroySubComponents();var se=this.$container,te=se.attr("class");Ct()(te.split(/\s+/),function(ge){Ot()(ge,"luna-".concat(Gt.compName))&&se.rmClass(ge)}),se.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(Gt,se){var te=this,ge=this.options,Me={};typeof Gt=="string"?Me[Gt]=se:Me=Gt,Ct()(Me,function(Ie,gi){var Ei=ge[gi];ge[gi]=Ie,te.emit("optionChange",gi,Ie,Ei)})}},{key:"getOption",value:function(Gt){return this.options[Gt]}},{key:"addSubComponent",value:function(Gt){Gt.setOption("theme",this.options.theme),this.subComponents.push(Gt)}},{key:"removeSubComponent",value:function(Gt){Ut()(this.subComponents,function(se){return se===Gt})}},{key:"destroySubComponents",value:function(){Ct()(this.subComponents,function(Gt){return Gt.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Gt){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};kt()(Gt,se),xt()(this.options,Gt)}},{key:"find",value:function(Gt){return this.$container.find(this.c(Gt))}}]),qt}(P()),Ve=s(1907),xe=s.n(Ve),Ee=s(8613),Qe=s.n(Ee);function Bt(Vt){var Tt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var qt,Gt=(0,L.Z)(Vt);if(Tt){var se=(0,L.Z)(this).constructor;qt=Reflect.construct(Gt,arguments,se)}else qt=Gt.apply(this,arguments);return(0,T.Z)(this,qt)}}v=s.hmd(v);var ot=function(Vt){(0,o.Z)(qt,Vt);var Tt=Bt(qt);function qt(Gt){var se,te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,H.Z)(this,qt),(se=Tt.call(this,Gt,{compName:"modal"},te)).render=function(){var ge=(0,l.Z)(se),Me=ge.options,Ie=ge.c,gi=ge.$body;Me.title?(gi.rmClass(Ie("no-title")),se.$title.text(Me.title)):gi.addClass(Ie("no-title")),Me.footer?(gi.rmClass(Ie("no-footer")),se.$footer.html("").append(Me.footer)):gi.addClass(Ie("no-footer")),Me.showClose?se.$close.show():se.$close.hide(),se.$body.css("width",Me.width+"px"),se.$content.html("").append(Me.content)},se.hide(),se.initOptions(te,{title:"",content:"",footer:"",showClose:!0,width:Wt()}),se.initTpl(),se.$title=se.find(".title"),se.$content=se.find(".content"),se.$body=se.find(".body"),se.$footer=se.find(".footer"),se.$close=se.find(".icon-close"),se.bindEvent(),se}return(0,N.Z)(qt,[{key:"show",value:function(){this.render(),this.$container.rmClass(this.c("hidden"))}},{key:"hide",value:function(){this.$container.addClass(this.c("hidden"))}},{key:"destroy",value:function(){(0,d.Z)((0,L.Z)(qt.prototype),"destroy",this).call(this),this.$container.rmClass(this.c("hidden"))}},{key:"bindEvent",value:function(){var Gt=this;this.$body.on("click",this.c(".icon-close"),function(){return Gt.hide()}),this.on("optionChange",this.render)}},{key:"initTpl",value:function(){this.$container.html(this.c(xe()(Zt||(Zt=(0,B.Z)([`
      <div class="body">
        <span class="icon icon-close"></span>
        <div class="title"></div>
        <div class="content"></div>
        <div class="footer"></div>
      </div>
      `])))))}}],[{key:"alert",value:function(Gt){var se=yt(),te=se.c;se.setOption({title:"",content:Gt,width:Wt(),footer:re({OK:{type:"primary",onclick:function(){se.hide()}}},te)}),se.show()}},{key:"confirm",value:function(Gt){return new Promise(function(se){var te=yt(),ge=te.c;te.setOption({title:"",content:Gt,width:Wt(),footer:re({Cancel:{type:"secondary",onclick:function(){te.hide(),se(!1)}},OK:{type:"primary",onclick:function(){te.hide(),se(!0)}}},ge)}),te.show()})}},{key:"prompt",value:function(){var Gt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise(function(te){var ge=yt(),Me=ge.c,Ie=Qe()("input"+Me(".input"),{value:se});function gi(){ge.hide(),te(Ie.value)}C()(Ie).on("keypress",function(li){(li=li.origEvent).key==="Enter"&&gi()}),ge.setOption({title:Gt,content:Ie,width:Wt(),footer:re({Cancel:{type:"secondary",onclick:function(){ge.hide(),te(null)}},OK:{type:"primary",onclick:gi}},Me)}),ge.show();var Ei=Ie.value.length;Ie.setSelectionRange(Ei,Ei),Ie.focus()})}},{key:"setContainer",value:function(Gt){Nt=Gt}}]),qt}(Yt),It=null,Nt=null;function yt(){return Nt||(Nt=Qe()("div"),document.body.append(Nt)),It||(It=new ot(Nt,{showClose:!1})),It}function re(Vt,Tt){var qt=j()(Vt,function(Gt,se){return Qe()(Tt(".button")+Tt("."+Gt.type),{onclick:Gt.onclick},se)});return Qe().apply(void 0,[Tt(".button-group"),{}].concat(I(qt)))}function Wt(){return window.innerWidth<500?window.innerWidth-32:500}(function(Vt,Tt){try{Vt.exports=Tt,Vt.exports.default=Tt}catch{}})(v,ot)},8299:function(v,r,s){s.d(r,{q:function(){return Ht},Z:function(){return Zi}});var _=s(1002),x=s(5671),I=s(3144),B=s(7326),H=s(1752),N=s(9340),l=s(2963),d=s(1120),o=s(415),T=s.n(o),L=s(3990),Q=s.n(L),P=s(4696),q=s.n(P),C=s(3063),Z=s.n(C),j=s(5166),dt=s.n(j),Y=s(6472),W=s.n(Y),u=s(3023),O=s.n(u),X=s(2533),ht=s.n(X),pt=s(3783),ft=s.n(pt),$=s(300),At=s.n($),_t=s(4321),ut=s.n(_t),Ct=s(3085),vt=s.n(Ct),xt=s(1512),lt=s.n(xt),kt=s(801),Jt=s.n(kt),Ut=s(7756),Ae=s.n(Ut),Ot=s(6768),$t=s.n(Ot),Zt=s(1116),Yt=s.n(Zt),Ve=s(5972),xe=s.n(Ve),Ee=s(996),Qe=s.n(Ee),Bt=s(3367),ot=s.n(Bt),It=s(1214),Nt=s.n(It),yt=s(6339),re=s.n(yt),Wt=s(6329),Vt=s.n(Wt),Tt=function(){function ti(){(0,x.Z)(this,ti),this.id=0,this.visited=[]}return(0,I.Z)(ti,[{key:"set",value:function(Ii,hi){var Be=this.visited,qe=this.id,ai={id:qe,val:Ii};return Vt()(ai,hi),Be.push(ai),this.id++,qe}},{key:"get",value:function(Ii){for(var hi=this.visited,Be=0,qe=hi.length;Be<qe;Be++){var ai=hi[Be];if(Ii===ai.val)return ai}return!1}}]),ti}(),qt=s(4331),Gt=s.n(qt),se=s(8901),te=s.n(se),ge=function(ti){return te()(ot()(ti)).replace(/\n/g,"âµ").replace(/\f|\r|\t/g,"")};function Me(ti){return ti.length>500&&(ti=ti.slice(0,500)+"..."),"Æ "+Gt()(function(Ii){var hi=Ii.match(Ie);return hi?hi[0]:Ii}(ti).replace("function",""))}var Ie=/function(.*?)\((.*?)\)/,gi=s(6930),Ei=s.n(gi),li=s(5229),yi=s.n(li),ci=s(3875),De=s.n(ci),Ke=s(9433),pi=s.n(Ke),$e=s(1443),ii=s.n($e),Le=s(2461),me=s.n(Le),Je=s(5610),Ge=s.n(Je),di=s(7483),Pi=s.n(di),Ti=s(6341),Oi=s.n(Ti),qi=s(6954),Ui=s.n(qi);s(9585);function hs(ti){var Ii="luna-".concat(ti,"-");function hi(Be){return me()(Gt()(Be).split(/\s+/),function(qe){return Oi()(qe,Ii)?qe:qe.replace(/[\w-]+/,function(ai){return"".concat(Ii).concat(ai)})}).join(" ")}return function(Be){if(/<[^>]*>/g.test(Be))try{var qe=Pi().parse(Be);return ns(qe,function(ai){ai.attrs&&ai.attrs.class&&(ai.attrs.class=hi(ai.attrs.class))}),Pi().stringify(qe)}catch{return hi(Be)}return hi(Be)}}function ns(ti,Ii){for(var hi=0,Be=ti.length;hi<Be;hi++){var qe=ti[hi];Ii(qe),qe.content&&ns(qe.content,Ii)}}Ge();function ys(){var ti=Ui()();return ti==="os x"?"mac":ti}var Ys=s(4193),ji=s.n(Ys),ni=s(5852),Bi=s.n(ni);function Re(ti){var Ii=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var hi,Be=(0,d.Z)(ti);if(Ii){var qe=(0,d.Z)(this).constructor;hi=Reflect.construct(Be,arguments,qe)}else hi=Be.apply(this,arguments);return(0,l.Z)(this,hi)}}var si=function(ti){(0,N.Z)(hi,ti);var Ii=Re(hi);function hi(Be,qe){var ai,wi=qe.compName,Qi=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Si=Qi===void 0?"light":Qi;return(0,x.Z)(this,hi),(ai=Ii.call(this)).subComponents=[],ai.compName=wi,ai.c=hs(wi),ai.options={},ai.container=Be,ai.$container=lt()(Be),ai.$container.addClass(["luna-".concat(wi),ai.c("platform-".concat(ys()))]),ai.on("optionChange",function(xi,Fi,Li){var Gi=ai.c;xi==="theme"&&(ai.$container.rmClass(Gi("theme-".concat(Li))).addClass(Gi("theme-".concat(Fi))),ft()(ai.subComponents,function(Xi){return Xi.setOption("theme",Fi)}))}),ai.setOption("theme",Si),ai}return(0,I.Z)(hi,[{key:"destroy",value:function(){this.destroySubComponents();var Be=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Be("platform-".concat(ys()))).rmClass(Be("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(Be,qe){var ai=this,wi=this.options,Qi={};typeof Be=="string"?Qi[Be]=qe:Qi=Be,ft()(Qi,function(Si,xi){var Fi=wi[xi];wi[xi]=Si,ai.emit("optionChange",xi,Si,Fi)})}},{key:"getOption",value:function(Be){return this.options[Be]}},{key:"addSubComponent",value:function(Be){Be.setOption("theme",this.options.theme),this.subComponents.push(Be)}},{key:"removeSubComponent",value:function(Be){Bi()(this.subComponents,function(qe){return qe===Be})}},{key:"destroySubComponents",value:function(){ft()(this.subComponents,function(Be){return Be.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Be){var qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ji()(Be,qe),Vt()(this.options,Be)}},{key:"find",value:function(Be){return this.$container.find(this.c(Be))}}]),hi}(ii());function Te(ti){var Ii=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var hi,Be=(0,d.Z)(ti);if(Ii){var qe=(0,d.Z)(this).constructor;hi=Reflect.construct(Be,arguments,qe)}else hi=Be.apply(this,arguments);return(0,l.Z)(this,hi)}}var Ht=function(ti){(0,N.Z)(hi,ti);var Ii=Te(hi);function hi(Be){var qe;return(0,x.Z)(this,hi),(qe=Ii.call(this,Be,{compName:"object-viewer"})).onItemClick=function(ai){var wi=(0,B.Z)(qe),Qi=wi.map,Si=wi.c,xi=lt()(ai.curTarget),Fi=xi.data("object-id"),Li=xi.find("span").eq(0);if(!xi.data("first-level")&&(Fi&&(xi.find("ul").html(qe.objToHtml(Qi[Fi],!1)),xi.rmAttr("data-object-id")),ai.stopImmediatePropagation(),Li.hasClass(Si("expanded")))){var Gi=xi.find("ul").eq(0);Li.hasClass(Si("collapsed"))?(Li.rmClass(Si("collapsed")),Gi.show()):(Li.addClass(Si("collapsed")),Gi.hide()),qe.emit("change")}},qe.bindEvent(),qe}return(0,I.Z)(hi,[{key:"set",value:function(Be){$t()(Be)&&(Be=JSON.parse(Be)),this.data={id:yi()("json"),enumerable:{0:Be}},this.map={},Mi(this.map,this.data),this.render()}},{key:"destroy",value:function(){(0,H.Z)((0,d.Z)(hi.prototype),"destroy",this).call(this),this.$container.off("click","li",this.onItemClick)}},{key:"objToHtml",value:function(Be,qe){var ai=this,wi="";return ft()(["enumerable","unenumerable","symbol"],function(Qi){if(Be[Qi]){var Si=ht()(Be[Qi]);re()(Si);for(var xi=0,Fi=Si.length;xi<Fi;xi++){var Li=Si[xi];wi+=ai.createEl(Li,Be[Qi][Li],Qi,qe)}}}),Be.proto&&(wi===""?wi=this.objToHtml(Be.proto):wi+=this.createEl("[[Prototype]]",Be.proto,"proto")),wi}},{key:"createEl",value:function(Be,qe,ai){var wi=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Qi=this.c,Si=(0,_.Z)(qe);if(qe===null)return"<li>".concat(rs(Be),'<span class="').concat(Qi("null"),'">null</span></li>');if(Q()(qe)||q()(qe))return"<li>".concat(rs(Be),'<span class="').concat(Qi(Si),'">').concat(ge(qe),"</span></li>");if(qe.type==="RegExp"&&(Si="regexp"),qe.type==="Number"&&(Si="number"),qe.type==="Number"||qe.type==="RegExp")return"<li>".concat(rs(Be),'<span class="').concat(Qi(Si),'">').concat(ge(qe.value),"</span></li>");if(qe.type==="Undefined"||qe.type==="Symbol")return"<li>".concat(rs(Be),'<span class="').concat(Qi("special"),'">').concat(Z()(qe.type),"</span></li>");if(qe==="(...)")return"<li>".concat(rs(Be),'<span class="').concat(Qi("special"),'">').concat(qe,"</span></li>");if(dt()(qe)){var xi=qe.id,Fi=qe.reference,Li=function(fs){var _s=fs.type,Ls=fs.value;if(_s)return _s==="Function"?Me(Ls):_s==="Array"&&fs.unenumerable?"Array(".concat(fs.unenumerable.length,")"):fs.type}(qe)||O()(Si),Gi=wi?"":'<span class="'.concat(Qi("expanded collapsed"),'"><span class="').concat(Qi("icon icon-caret-right"),'"></span><span class="').concat(Qi("icon icon-caret-down"),'"></span></span>'),Xi="<li ".concat(wi?'data-first-level="true"':""," ").concat('data-object-id="'+(Fi||xi)+'"',">").concat(Gi).concat(rs(Be),'<span class="').concat(Qi("open"),'">').concat(wi?"":Li,'</span><ul class="').concat(Qi(Si),'" ').concat(wi?"":'style="display:none"',">");return wi&&(Xi+=this.objToHtml(this.map[xi])),Xi+'</ul><span class="'.concat(Qi("close"),'"></span></li>')}function rs(fs){if(wi||dt()(qe)&&qe.jsonSplitArr)return"";var _s=Qi("key");return ai==="unenumerable"||ai==="symbol"?_s=Qi("key-lighter"):ai==="proto"&&(_s=Qi("key-special")),'<span class="'.concat(_s,'">').concat(ge(fs),"</span>: ")}return $t()(qe)&&qe.length>1e4&&(qe=Ae()(qe,50,{separator:" ",ellipsis:"â¦"})),"<li>".concat(rs(Be),'<span class="').concat(Qi((0,_.Z)(qe)),'">"').concat(ge(qe),'"</span></li>')}},{key:"render",value:function(){var Be=this.map[this.data.id];this.$container.html(this.objToHtml(Be,!0))}},{key:"bindEvent",value:function(){this.$container.on("click","li",this.onItemClick)}}]),hi}(si);function Mi(ti,Ii){var hi=Ii.id;if(hi||hi===0){if(Ii.type&&Ei()(Ii.type,"Array")&&Ii.enumerable){var Be=function(Si,xi,Fi){var Li=[],Gi={};return ft()(Si.enumerable,function(Xi,rs){var fs=De()(rs);pi()(fs)?Gi[rs]=Xi:Li[fs]=Xi}),Li.enumerable=Gi,Li.type=Fi,Li.id=xi,Si.unenumerable&&(Li.unenumerable=Si.unenumerable),Si.symbol&&(Li.symbol=Si.symbol),Si.proto&&(Li.proto=Si.proto),Li}(Ii,hi,Ii.type);Be.length>100&&(Ii=function(Si){var xi=0,Fi={};ft()(Qe()(Si,100),function(Gi){var Xi={},rs=xi;Xi.type="["+rs,Xi.enumerable={},ft()(Gi,function(_s){Xi.enumerable[xi]=_s,xi+=1});var fs=xi-1;Xi.type+=(fs-rs>0?" â¦ "+fs:"")+"]",Xi.id=yi()("json"),Xi.jsonSplitArr=!0,Fi[xi]=Xi});var Li={};return Li.enumerable=Fi,Li.id=Si.id,Li.type=Si.type,Si.unenumerable&&(Li.unenumerable=Si.unenumerable),Si.symbol&&(Li.symbol=Si.symbol),Si.proto&&(Li.proto=Si.proto),Li}(Be))}ti[hi]=Ii;var qe=[];ft()(["enumerable","unenumerable","symbol"],function(Si){if(Ii[Si])for(var xi in Ii[Si])qe.push(Ii[Si][xi])}),Ii.proto&&qe.push(Ii.proto);for(var ai=0,wi=qe.length;ai<wi;ai++){var Qi=qe[ai];dt()(Qi)&&Mi(ti,Qi)}}}function Yi(ti){var Ii=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var hi,Be=(0,d.Z)(ti);if(Ii){var qe=(0,d.Z)(this).constructor;hi=Reflect.construct(Be,arguments,qe)}else hi=Be.apply(this,arguments);return(0,l.Z)(this,hi)}}v=s.hmd(v);var Zi=function(ti){(0,N.Z)(hi,ti);var Ii=Yi(hi);function hi(Be){var qe,ai=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,x.Z)(this,hi),(qe=Ii.call(this,Be,{compName:"object-viewer"})).onItemClick=function(wi){var Qi=(0,B.Z)(qe),Si=Qi.map,xi=Qi.c,Fi=lt()(wi.curTarget),Li=Fi.data("object-id"),Gi=Fi.find("span").eq(0);if(!Fi.data("first-level")&&(Li&&(Fi.find("ul").html(qe.objToHtml(Si[Li],!1)),Fi.rmAttr("data-object-id")),wi.stopImmediatePropagation(),Gi.hasClass(xi("expanded")))){var Xi=Fi.find("ul").eq(0);Gi.hasClass(xi("collapsed"))?(Gi.rmClass(xi("collapsed")),Xi.show()):(Gi.addClass(xi("collapsed")),Xi.hide()),qe.emit("change")}},qe.initOptions(ai,{unenumerable:!1,accessGetter:!1}),qe.bindEvent(),qe}return(0,I.Z)(hi,[{key:"set",value:function(Be){this.data=[Be],this.visitor=new Tt,this.map={},this.render()}},{key:"destroy",value:function(){(0,H.Z)((0,d.Z)(hi.prototype),"destroy",this).call(this),this.$container.off("click","li",this.onItemClick)}},{key:"objToHtml",value:function(Be,qe){var ai=this,wi=this.visitor,Qi=Be,Si=!1,xi=wi.get(Be);xi&&xi.self&&(Qi=xi.self);var Fi="",Li=["enumerable"],Gi=ht()(Be),Xi=[],rs=[],fs=[],_s={};if(this.options.unenumerable&&!qe&&(Li.push("unenumerable"),Li.push("symbol"),Xi=Jt()(Yt()(Be,{prototype:!1,unenumerable:!0}),Gi),rs=xe()(Yt()(Be,{prototype:!1,symbol:!0}),function(ms){return(0,_.Z)(ms)==="symbol"})),W()(Be)&&Be.length>100){Li.unshift("virtual"),Si=!0;var Ls=0,ws={};ft()(Qe()(Be,100),function(ms){var Rs=Object.create(null),Es=Ls,gn="["+Es;ft()(ms,function(Bs){Rs[Ls]=Bs,ws[Ls]=!0,Ls++});var vs=Ls-1;_s[gn+=(vs-Es>0?" â¦ "+vs:"")+"]"]=Rs}),fs=ht()(_s),Gi=xe()(Gi,function(ms){return!ws[ms]})}ft()(Li,function(ms){var Rs=[];Rs=ms==="symbol"?rs:ms==="unenumerable"?Xi:ms==="virtual"?fs:Gi,Si||re()(Rs);for(var Es=0,gn=Rs.length;Es<gn;Es++){var vs=ot()(Rs[Es]),Bs="",Vs=Object.getOwnPropertyDescriptor(Be,vs),xn=Vs&&Vs.get,kn=Vs&&Vs.set;if(xn&&!ai.options.accessGetter)Bs="(...)";else try{Bs=ms==="virtual"?_s[vs]:Qi[vs],ut()(Bs)&&Bs.catch(Nt())}catch(Us){Bs=Us instanceof Error?Us.message:ot()(Us)}Fi+=ai.createEl(vs,Be,Bs,ms,qe),xn&&(Fi+=ai.createEl("get ".concat(vs),Be,Vs.get,ms,qe)),kn&&(Fi+=ai.createEl("set ".concat(vs),Be,Vs.set,ms,qe))}});var Ri=T()(Be);if(!qe&&Ri)if(Fi===""){var ks=wi.set(Ri,{self:Be});this.map[ks]=Ri,Fi=this.objToHtml(Ri)}else Fi+=this.createEl("[[Prototype]]",Qi||Be,Ri,"proto");return Fi}},{key:"createEl",value:function(Be,qe,ai,wi){var Qi=arguments.length>4&&arguments[4]!==void 0&&arguments[4],Si=this.visitor,xi=this.c,Fi=(0,_.Z)(ai),Li=vt()(ai,!1);if(wi==="virtual"&&(Li=Be),ai===null)return"<li>".concat(ws(Be),'<span class="').concat(xi("null"),'">null</span></li>');if(Q()(ai)||q()(ai))return"<li>".concat(ws(Be),'<span class="').concat(xi(Fi),'">').concat(ge(ai),"</span></li>");if(Li==="RegExp"&&(Fi="regexp"),Li==="Number"&&(Fi="number"),Li==="Undefined"||Li==="Symbol")return"<li>".concat(ws(Be),'<span class="').concat(xi("special"),'">').concat(Z()(Li),"</span></li>");if(ai==="(...)")return"<li>".concat(ws(Be),'<span class="').concat(xi("special"),'">').concat(ai,"</span></li>");if(dt()(ai)){var Gi,Xi=Si.get(ai);if(Xi)Gi=Xi.id;else{var rs={};wi==="proto"&&(rs.self=qe),Gi=Si.set(ai,rs),this.map[Gi]=ai}var fs="Object";fs=Fi==="regexp"?'<span class="'.concat(xi(Fi),'">').concat(ge(ai)):ge(function(Ri,ks){if(ks)return ks==="Function"?Me(At()(Ri)):ks==="Array"?"Array(".concat(Ri.length,")"):ks}(ai,Li)||O()(Fi));var _s=Qi?"":'<span class="'.concat(xi("expanded collapsed"),'"><span class="').concat(xi("icon icon-caret-right"),'"></span><span class="').concat(xi("icon icon-caret-down"),'"></span></span>'),Ls="<li ".concat(Qi?'data-first-level="true"':""," ").concat('data-object-id="'+Gi+'"',">").concat(_s).concat(ws(Be),'<span class="').concat(xi("open"),'">').concat(Qi?"":fs,'</span><ul class="').concat(xi(Fi),'" ').concat(Qi?"":'style="display:none"',">");return Qi&&(Ls+=this.objToHtml(ai)),Ls+'</ul><span class="'.concat(xi("close"),'"></span></li>')}function ws(Ri){if(Qi||dt()(ai)&&wi==="virtual")return"";var ks=xi("key");return wi==="unenumerable"||wi==="symbol"?ks=xi("key-lighter"):wi==="proto"&&(ks=xi("key-special")),'<span class="'.concat(ks,'">').concat(ge(Ri),"</span>: ")}return $t()(ai)&&ai.length>1e4&&(ai=Ae()(ai,50,{separator:" ",ellipsis:"â¦"})),"<li>".concat(ws(Be),'<span class="').concat(xi((0,_.Z)(ai)),'">"').concat(ge(ai),'"</span></li>')}},{key:"render",value:function(){this.$container.html(this.objToHtml(this.data,!0))}},{key:"bindEvent",value:function(){this.$container.on("click","li",this.onItemClick)}}]),hi}(si);Zi.Static=Ht,function(ti,Ii){try{ti.exports=Ii,ti.exports.default=Ii}catch{}}(v,Zi)},8692:function(v,r,s){s.d(r,{Z:function(){return Me}});var _=s(7326),x=s(5671),I=s(3144),B=s(9340),H=s(2963),N=s(1120),l=s(1512),d=s.n(l),o=s(8613),T=s.n(o),L=s(8901),Q=s.n(L),P=s(5229),q=s.n(P),C=s(5166),Z=s.n(C),j=s(4193),dt=s.n(j),Y=s(2461),W=s.n(Y),u=s(3875),O=s.n(u),X=s(3367),ht=s.n(X),pt=s(4777),ft=s.n(pt),$=s(9702),At=s.n($),_t=s(1754),ut=s.n(_t),Ct=s(6768),vt=s.n(Ct),xt=s(4331),lt=s.n(xt),kt=s(6341),Jt=s.n(kt),Ut=s(3063),Ae=s.n(Ut),Ot=s(6156),$t=s.n(Ot),Zt=s(3783),Yt=s.n(Zt),Ve=s(1443),xe=s.n(Ve),Ee=s(5610),Qe=s.n(Ee),Bt=s(7483),ot=s.n(Bt),It=(s(3990),s(6954)),Nt=s.n(It);s(9585);function yt($e){var ii="luna-".concat($e,"-");function Le(me){return W()(lt()(me).split(/\s+/),function(Je){return Jt()(Je,ii)?Je:Je.replace(/[\w-]+/,function(Ge){return"".concat(ii).concat(Ge)})}).join(" ")}return function(me){if(/<[^>]*>/g.test(me))try{var Je=ot().parse(me);return re(Je,function(Ge){Ge.attrs&&Ge.attrs.class&&(Ge.attrs.class=Le(Ge.attrs.class))}),ot().stringify(Je)}catch{return Le(me)}return Le(me)}}function re($e,ii){for(var Le=0,me=$e.length;Le<me;Le++){var Je=$e[Le];ii(Je),Je.content&&re(Je.content,ii)}}Qe();function Wt(){var $e=Nt()();return $e==="os x"?"mac":$e}var Vt=s(6329),Tt=s.n(Vt),qt=s(5852),Gt=s.n(qt);function se($e){var ii=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Le,me=(0,N.Z)($e);if(ii){var Je=(0,N.Z)(this).constructor;Le=Reflect.construct(me,arguments,Je)}else Le=me.apply(this,arguments);return(0,H.Z)(this,Le)}}var te=function($e){(0,B.Z)(Le,$e);var ii=se(Le);function Le(me,Je){var Ge,di=Je.compName,Pi=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Ti=Pi===void 0?"light":Pi;return(0,x.Z)(this,Le),(Ge=ii.call(this)).subComponents=[],Ge.compName=di,Ge.c=yt(di),Ge.options={},Ge.container=me,Ge.$container=d()(me),Ge.$container.addClass(["luna-".concat(di),Ge.c("platform-".concat(Wt()))]),Ge.on("optionChange",function(Oi,qi,Ui){var hs=Ge.c;Oi==="theme"&&(Ge.$container.rmClass(hs("theme-".concat(Ui))).addClass(hs("theme-".concat(qi))),Yt()(Ge.subComponents,function(ns){return ns.setOption("theme",qi)}))}),Ge.setOption("theme",Ti),Ge}return(0,I.Z)(Le,[{key:"destroy",value:function(){this.destroySubComponents();var me=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(me("platform-".concat(Wt()))).rmClass(me("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(me,Je){var Ge=this,di=this.options,Pi={};typeof me=="string"?Pi[me]=Je:Pi=me,Yt()(Pi,function(Ti,Oi){var qi=di[Oi];di[Oi]=Ti,Ge.emit("optionChange",Oi,Ti,qi)})}},{key:"getOption",value:function(me){return this.options[me]}},{key:"addSubComponent",value:function(me){me.setOption("theme",this.options.theme),this.subComponents.push(me)}},{key:"removeSubComponent",value:function(me){Gt()(this.subComponents,function(Je){return Je===me})}},{key:"destroySubComponents",value:function(){Yt()(this.subComponents,function(me){return me.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(me){var Je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};dt()(me,Je),Tt()(this.options,me)}},{key:"find",value:function(me){return this.$container.find(this.c(me))}}]),Le}(xe());function ge($e){var ii=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Le,me=(0,N.Z)($e);if(ii){var Je=(0,N.Z)(this).constructor;Le=Reflect.construct(me,arguments,Je)}else Le=me.apply(this,arguments);return(0,H.Z)(this,Le)}}v=s.hmd(v);var Me=function($e){(0,B.Z)(Le,$e);var ii=ge(Le);function Le(me){var Je,Ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,x.Z)(this,Le),(Je=ii.call(this,me,{compName:"setting"},Ge)).items=[],Je.selectedItem=null,Je.initOptions(Ge,{separatorCollapse:!0,filter:""}),Je.bindEvent(),Je}return(0,I.Z)(Le,[{key:"appendTitle",value:function(me){var Je=new gi(this,me);return this.append(Je),Je}},{key:"appendSeparator",value:function(){var me=this.items,Je=this.options.separatorCollapse,Ge=At()(me);if(Je&&Ge instanceof Ei)return Ge;var di=new Ei(this);return this.append(di),di}},{key:"appendNumber",value:function(me,Je,Ge,di,Pi){Z()(di)&&(Pi=di,di="");var Ti=new yi(this,me,Je,Ge,di,Pi);return this.append(Ti),Ti}},{key:"appendButton",value:function(me,Je,Ge){ft()(Je)&&(Ge=Je,Je="");var di=new pi(this,me,Je,Ge);return this.append(di),di}},{key:"appendInput",value:function(me,Je,Ge){var di=new li(this,me,Je,Ge,arguments.length>3&&arguments[3]!==void 0?arguments[3]:"");return this.append(di),di}},{key:"appendCheckbox",value:function(me,Je,Ge,di){di||(di=Ge,Ge="");var Pi=new De(this,me,Je,Ge,di);return this.append(Pi),Pi}},{key:"appendSelect",value:function(me,Je,Ge,di,Pi){Z()(di)&&(Pi=di,di="");var Ti=new Ke(this,me,Je,Ge,di,Pi);return this.append(Ti),Ti}},{key:"remove",value:function(me){var Je=this.items,Ge=Je.indexOf(me);Ge>-1&&(me.detach(),Je.splice(Ge,1),me===this.selectedItem&&this.selectItem(null))}},{key:"clear",value:function(){Yt()(this.items,function(me){return me.detach()}),this.items=[],this.selectItem(null)}},{key:"selectItem",value:function(me){var Je;this.selectedItem&&(this.selectedItem.deselect(),this.selectedItem=null),$t()(me)||(this.selectedItem=me,(Je=this.selectedItem)===null||Je===void 0||Je.select())}},{key:"renderSettings",value:function(){var me=this,Je=this.items;Yt()(Je,function(Ge){return Ge.detach()}),Yt()(Je,function(Ge){me.filterItem(Ge)&&me.$container.append(Ge.container)})}},{key:"bindEvent",value:function(){var me=this,Je=this.c;this.on("optionChange",function(di){di==="filter"&&me.renderSettings()});var Ge=this;this.$container.on("click",Je(".item"),function(){Ge.selectItem(this.settingItem)})}},{key:"filterItem",value:function(me){var Je=this.options.filter;if(Je){if(ft()(Je))return Je(me);if(ut()(Je))return Je.test(me.text());if(vt()(Je)&&(Je=lt()(Je)))return Jt()(Ae()(me.text()),Ae()(Je))}return!0}},{key:"append",value:function(me){this.items.push(me),this.filterItem(me)&&this.$container.append(me.container)}}]),Le}(te),Ie=function(){function $e(ii,Le,me,Je){(0,x.Z)(this,$e),this.container=T()("div",{tabindex:"0"}),this.setting=ii,this.container.settingItem=this,this.$container=d()(this.container),this.$container.addClass(ii.c("item")).addClass(ii.c("item-".concat(Je))),this.key=Le,this.value=me}return(0,I.Z)($e,[{key:"select",value:function(){this.$container.addClass(this.setting.c("selected"))}},{key:"deselect",value:function(){this.$container.rmClass(this.setting.c("selected"))}},{key:"detach",value:function(){this.$container.remove()}},{key:"text",value:function(){return this.$container.text()}},{key:"onChange",value:function(ii){this.setting.emit("change",this.key,ii,this.value),this.value=ii}}]),$e}(),gi=function($e){(0,B.Z)(Le,$e);var ii=ge(Le);function Le(me,Je){var Ge;return(0,x.Z)(this,Le),(Ge=ii.call(this,me,"","","title")).$container.text(Je),Ge}return(0,I.Z)(Le)}(Ie),Ei=function($e){(0,B.Z)(Le,$e);var ii=ge(Le);function Le(me){return(0,x.Z)(this,Le),ii.call(this,me,"","","separator")}return(0,I.Z)(Le)}(Ie),li=function($e){(0,B.Z)(Le,$e);var ii=ge(Le);function Le(me,Je,Ge,di,Pi){var Ti;(0,x.Z)(this,Le),Ti=ii.call(this,me,Je,Ge,"input");var Oi=me.c;Ti.$container.html('<div class="'.concat(Oi("title"),'">').concat(Q()(di),`</div>
      <div class="`).concat(Oi("description"),'">').concat(Pi,`</div>
      <div class="`).concat(Oi("control"),`">
        <input type="text"></input>
      </div>`));var qi=Ti.$container.find("input");return qi.val(Ge),qi.on("change",function(){return Ti.onChange(qi.val())}),Ti}return(0,I.Z)(Le)}(Ie),yi=function($e){(0,B.Z)(Le,$e);var ii=ge(Le);function Le(me,Je,Ge,di,Pi){var Ti,Oi=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};(0,x.Z)(this,Le),Ti=ii.call(this,me,Je,Ge,"number"),dt()(Oi,{min:0,max:10,step:1});var qi=(0,_.Z)(Ti).$container,Ui=me.c,hs=!!Oi.range;delete Oi.range;var ns=Oi.min,ys=Oi.max,Ys='<input type="'.concat(hs?"range":"number",'"').concat(W()(Oi,function(Re,si){return" ".concat(si,'="').concat(Re,'"')}),"></input>");hs&&(Ys="".concat(ns,'<div class="').concat(Ui("range-container"),`">
        <div class="`).concat(Ui("range-track"),`">
          <div class="`).concat(Ui("range-track-bar"),`">
            <div class="`).concat(Ui("range-track-progress"),'" style="width: ').concat(ci(Ge,ns,ys),`%;"></div>
          </div>
        </div>
        `).concat(Ys,`
      </div><span class="`).concat(Ui("value"),'">').concat(Ge,"</span>/").concat(ys)),qi.html('<div class="'.concat(Ui("title"),'">').concat(Q()(di),`</div>
      <div class="`).concat(Ui("description"),'">').concat(Pi,`</div>
      <div class="`).concat(Ui("control"),'">').concat(Ys,"</div>"));var ji=qi.find(Ui(".value")),ni=qi.find("input"),Bi=qi.find(Ui(".range-track-progress"));return ni.val(ht()(Ge)),ni.on("change",function(){var Re=O()(ni.val());Ti.onChange(Re)}),ni.on("input",function(){var Re=O()(ni.val());Bi.css("width",ci(Re,ns,ys)+"%"),ji.text(ht()(Re))}),Ti}return(0,I.Z)(Le)}(Ie),ci=function($e,ii,Le){return(($e-ii)/(Le-ii)*100).toFixed(2)},De=function($e){(0,B.Z)(Le,$e);var ii=ge(Le);function Le(me,Je,Ge,di,Pi){var Ti;(0,x.Z)(this,Le),Ti=ii.call(this,me,Je,Ge,"checkbox");var Oi=me.c,qi=q()(me.c("checkbox-"));Ti.$container.html('<div class="'.concat(Oi("title"),'">').concat(Q()(di),`</div>
      <div class="`).concat(Oi("control"),`">
        <input type="checkbox" id="`).concat(qi,`"></input>
        <label for="`).concat(qi,'">').concat(Pi,`</label>
      </div>`));var Ui=Ti.$container.find("input"),hs=Ui.get(0);return hs.checked=Ge,Ui.on("change",function(){return Ti.onChange(hs.checked)}),Ti}return(0,I.Z)(Le)}(Ie),Ke=function($e){(0,B.Z)(Le,$e);var ii=ge(Le);function Le(me,Je,Ge,di,Pi,Ti){var Oi;(0,x.Z)(this,Le),Oi=ii.call(this,me,Je,Ge,"select");var qi=me.c;Oi.$container.html('<div class="'.concat(qi("title"),'">').concat(Q()(di),`</div>
      <div class="`).concat(qi("description"),'">').concat(Pi,`</div>
      <div class="`).concat(qi("control"),`">
        <div class="`).concat(qi("select"),`">
          <select>
            `).concat(W()(Ti,function(hs,ns){return'<option value="'.concat(Q()(hs),'"').concat(hs===Ge?" selected":"",">").concat(Q()(ns),"</option>")}).join(""),`
          </select>
        </div>
      </div>`));var Ui=Oi.$container.find("select");return Ui.on("change",function(){return Oi.onChange(Ui.val())}),Oi}return(0,I.Z)(Le)}(Ie),pi=function($e){(0,B.Z)(Le,$e);var ii=ge(Le);function Le(me,Je,Ge,di){var Pi;return(0,x.Z)(this,Le),Ge||(Ge=Je,Je=""),(Pi=ii.call(this,me,"","","button")).$container.html(me.c('<div class="title">'.concat(Q()(Je),`</div>
      <div class="control">
        <button>`).concat(Q()(Ge),`</button>
      </div>`))),Pi.$container.find("button").on("click",di),Pi}return(0,I.Z)(Le)}(Ie);(function($e,ii){try{$e.exports=ii,$e.exports.default=ii}catch{}})(v,Me)},7638:function(v,r,s){s.d(r,{Z:function(){return Ee}});var _=s(168),x=s(5671),I=s(3144),B=s(9340),H=s(2963),N=s(1120),l=s(1443),d=s.n(l),o=s(1512),T=s.n(o),L=s(2461),Q=s.n(L),P=s(4331),q=s.n(P),C=s(5610),Z=s.n(C),j=s(7483),dt=s.n(j),Y=s(3990),W=s.n(Y),u=s(6341),O=s.n(u),X=(s(3875),s(6954)),ht=s.n(X);s(9585);function pt(Qe){var Bt="luna-".concat(Qe,"-");function ot(It){return Q()(q()(It).split(/\s+/),function(Nt){return O()(Nt,Bt)?Nt:Nt.replace(/[\w-]+/,function(yt){return"".concat(Bt).concat(yt)})}).join(" ")}return function(It){if(/<[^>]*>/g.test(It))try{var Nt=dt().parse(It);return ft(Nt,function(yt){yt.attrs&&yt.attrs.class&&(yt.attrs.class=ot(yt.attrs.class))}),dt().stringify(Nt)}catch{return ot(It)}return ot(It)}}function ft(Qe,Bt){for(var ot=0,It=Qe.length;ot<It;ot++){var Nt=Qe[ot];Bt(Nt),Nt.content&&ft(Nt.content,Bt)}}var $;Z();function At(){var Qe=ht()();return Qe==="os x"?"mac":Qe}var _t=s(3783),ut=s.n(_t),Ct=s(6329),vt=s.n(Ct),xt=s(4193),lt=s.n(xt),kt=s(5852),Jt=s.n(kt);function Ut(Qe){var Bt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ot,It=(0,N.Z)(Qe);if(Bt){var Nt=(0,N.Z)(this).constructor;ot=Reflect.construct(It,arguments,Nt)}else ot=It.apply(this,arguments);return(0,H.Z)(this,ot)}}var Ae,Ot=function(Qe){(0,B.Z)(ot,Qe);var Bt=Ut(ot);function ot(It,Nt){var yt,re=Nt.compName,Wt=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Vt=Wt===void 0?"light":Wt;return(0,x.Z)(this,ot),(yt=Bt.call(this)).subComponents=[],yt.compName=re,yt.c=pt(re),yt.options={},yt.container=It,yt.$container=T()(It),yt.$container.addClass(["luna-".concat(re),yt.c("platform-".concat(At()))]),yt.on("optionChange",function(Tt,qt,Gt){var se=yt.c;Tt==="theme"&&(yt.$container.rmClass(se("theme-".concat(Gt))).addClass(se("theme-".concat(qt))),ut()(yt.subComponents,function(te){return te.setOption("theme",qt)}))}),yt.setOption("theme",Vt),yt}return(0,I.Z)(ot,[{key:"destroy",value:function(){this.destroySubComponents();var It=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(It("platform-".concat(At()))).rmClass(It("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(It,Nt){var yt=this,re=this.options,Wt={};typeof It=="string"?Wt[It]=Nt:Wt=It,ut()(Wt,function(Vt,Tt){var qt=re[Tt];re[Tt]=Vt,yt.emit("optionChange",Tt,Vt,qt)})}},{key:"getOption",value:function(It){return this.options[It]}},{key:"addSubComponent",value:function(It){It.setOption("theme",this.options.theme),this.subComponents.push(It)}},{key:"removeSubComponent",value:function(It){Jt()(this.subComponents,function(Nt){return Nt===It})}},{key:"destroySubComponents",value:function(){ut()(this.subComponents,function(It){return It.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(It){var Nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};lt()(It,Nt),vt()(this.options,It)}},{key:"find",value:function(It){return this.$container.find(this.c(It))}}]),ot}(d()),$t=s(1907),Zt=s.n($t),Yt=s(8901),Ve=s.n(Yt);function xe(Qe){var Bt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ot,It=(0,N.Z)(Qe);if(Bt){var Nt=(0,N.Z)(this).constructor;ot=Reflect.construct(It,arguments,Nt)}else ot=It.apply(this,arguments);return(0,H.Z)(this,ot)}}v=s.hmd(v);var Ee=function(Qe){(0,B.Z)(ot,Qe);var Bt=xe(ot);function ot(It){var Nt,yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,x.Z)(this,ot),(Nt=Bt.call(this,It,{compName:"tab"},yt)).initOptions(yt,{height:30}),Nt.initTpl(),Nt.$tabs=Nt.find(".tabs"),Nt.tabs=Nt.$tabs.get(0),Nt.$slider=Nt.find(".slider"),Nt.bindEvent(),Nt.updateHeight(),Nt}return(0,I.Z)(ot,[{key:"length",get:function(){return this.$tabs.find(this.c(".item")).length}},{key:"insert",value:function(It,Nt){var yt=this.c,re=this.$tabs,Wt=this.options.height-1,Vt=re.find(yt(".item")),Tt=Vt.length,qt='<div class="'.concat(this.c("item"),'" data-id="').concat(Ve()(Nt.id),'" style="height: ').concat(Wt,"px; line-height: ").concat(Wt,'px;">').concat(Ve()(Nt.title),"</div>");It>Tt-1?re.append(qt):Vt.eq(It).before(qt),this.updateSlider()}},{key:"append",value:function(It){this.insert(this.length,It)}},{key:"remove",value:function(It){var Nt=this.c,yt=this;this.$tabs.find(Nt(".item")).each(function(){var re=T()(this);if(re.data("id")===It){if(re.hasClass(Nt("selected")))if(yt.length>0){var Wt=yt.$tabs.find(Nt(".item")).eq(0).data("id");yt.select(Wt)}else yt.emit("deselect");re.remove()}}),this.updateSlider()}},{key:"select",value:function(It){var Nt=this.c,yt=this;this.$tabs.find(Nt(".item")).each(function(){var re=T()(this);re.data("id")===It?(re.addClass(Nt("selected")),yt.updateSlider(),yt.scrollToSelected(),yt.emit("select",It)):re.rmClass(Nt("selected"))})}},{key:"scrollToSelected",value:function(){var It,Nt=this.$tabs,yt=this.tabs,re=this.c,Wt=Nt.find(re(".selected")).get(0),Vt=Wt.offsetLeft,Tt=Wt.offsetWidth,qt=yt.offsetWidth,Gt=yt.scrollLeft;Vt<Gt?It=Vt:Vt+Tt>qt+Gt&&(It=Vt+Tt-qt),W()(It)&&(yt.scrollLeft=It)}},{key:"hideScrollbar",value:function(){var It=this.$tabs;if(getComputedStyle(this.tabs,"::-webkit-scrollbar").display!=="none"){var Nt=function(){if(W()($))return $;if(!document)return 16;var yt=document.createElement("div"),re=document.createElement("div");yt.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),re.setAttribute("style","height: 200px"),yt.appendChild(re);var Wt=document.body||document.documentElement;return Wt.appendChild(yt),$=yt.offsetWidth-yt.clientWidth,Wt.removeChild(yt),$}();It.css("height",this.options.height-1+Nt+"px")}}},{key:"updateSlider",value:function(){var It=this.$slider,Nt=this.$tabs,yt=this.c,re=Nt.find(yt(".selected")).get(0);re?It.css({width:re.offsetWidth,left:re.offsetLeft-Nt.get(0).scrollLeft}):It.css({width:0})}},{key:"updateHeight",value:function(){var It=this.options.height,Nt=It-1;this.find(".tabs-container").css("height",It+"px"),this.find(".item").css({height:Nt,lineHeight:Nt}),this.hideScrollbar()}},{key:"bindEvent",value:function(){var It=this,Nt=this.tabs,yt=this.c;this.on("optionChange",function(Wt){Wt==="height"&&It.updateHeight()});var re=this;this.$tabs.on("wheel",function(Wt){Wt.preventDefault(),Nt.scrollLeft+=Wt.origEvent.deltaY}).on("click",yt(".item"),function(){var Wt=T()(this);re.select(Wt.data("id"))}).on("scroll",function(){It.updateSlider()})}},{key:"initTpl",value:function(){this.$container.html(this.c(Zt()(Ae||(Ae=(0,_.Z)([`
        <div class="tabs-container">
          <div class="tabs"></div>
        </div>
        <div class="slider"></div>
      `])))))}}]),ot}(Ot);(function(Qe,Bt){try{Qe.exports=Bt,Qe.exports.default=Bt}catch{}})(v,Ee)},7049:function(v,r,s){s.d(r,{Z:function(){return Tt}});var _=s(5671),x=s(3144),I=s(7326),B=s(1752),H=s(9340),N=s(2963),l=s(1120),d=s(1443),o=s.n(d),T=s(1512),L=s.n(T),Q=s(2461),P=s.n(Q),q=s(4331),C=s.n(q),Z=s(5610),j=s.n(Z),dt=s(7483),Y=s.n(dt),W=(s(3990),s(6341)),u=s.n(W),O=(s(3875),s(6954)),X=s.n(O);s(9585);function ht(Gt){var se="luna-".concat(Gt,"-");function te(ge){return P()(C()(ge).split(/\s+/),function(Me){return u()(Me,se)?Me:Me.replace(/[\w-]+/,function(Ie){return"".concat(se).concat(Ie)})}).join(" ")}return function(ge){if(/<[^>]*>/g.test(ge))try{var Me=Y().parse(ge);return pt(Me,function(Ie){Ie.attrs&&Ie.attrs.class&&(Ie.attrs.class=te(Ie.attrs.class))}),Y().stringify(Me)}catch{return te(ge)}return te(ge)}}function pt(Gt,se){for(var te=0,ge=Gt.length;te<ge;te++){var Me=Gt[te];se(Me),Me.content&&pt(Me.content,se)}}var ft="ontouchstart"in j();function $(){var Gt=X()();return Gt==="os x"?"mac":Gt}var At=s(3783),_t=s.n(At),ut=s(6329),Ct=s.n(ut),vt=s(4193),xt=s.n(vt),lt=s(5852),kt=s.n(lt);function Jt(Gt){var se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var te,ge=(0,l.Z)(Gt);if(se){var Me=(0,l.Z)(this).constructor;te=Reflect.construct(ge,arguments,Me)}else te=ge.apply(this,arguments);return(0,N.Z)(this,te)}}var Ut=function(Gt){(0,H.Z)(te,Gt);var se=Jt(te);function te(ge,Me){var Ie,gi=Me.compName,Ei=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,li=Ei===void 0?"light":Ei;return(0,_.Z)(this,te),(Ie=se.call(this)).subComponents=[],Ie.compName=gi,Ie.c=ht(gi),Ie.options={},Ie.container=ge,Ie.$container=L()(ge),Ie.$container.addClass(["luna-".concat(gi),Ie.c("platform-".concat($()))]),Ie.on("optionChange",function(yi,ci,De){var Ke=Ie.c;yi==="theme"&&(Ie.$container.rmClass(Ke("theme-".concat(De))).addClass(Ke("theme-".concat(ci))),_t()(Ie.subComponents,function(pi){return pi.setOption("theme",ci)}))}),Ie.setOption("theme",li),Ie}return(0,x.Z)(te,[{key:"destroy",value:function(){this.destroySubComponents();var ge=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(ge("platform-".concat($()))).rmClass(ge("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(ge,Me){var Ie=this,gi=this.options,Ei={};typeof ge=="string"?Ei[ge]=Me:Ei=ge,_t()(Ei,function(li,yi){var ci=gi[yi];gi[yi]=li,Ie.emit("optionChange",yi,li,ci)})}},{key:"getOption",value:function(ge){return this.options[ge]}},{key:"addSubComponent",value:function(ge){ge.setOption("theme",this.options.theme),this.subComponents.push(ge)}},{key:"removeSubComponent",value:function(ge){kt()(this.subComponents,function(Me){return Me===ge})}},{key:"destroySubComponents",value:function(){_t()(this.subComponents,function(ge){return ge.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(ge){var Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xt()(ge,Me),Ct()(this.options,ge)}},{key:"find",value:function(ge){return this.$container.find(this.c(ge))}}]),te}(o()),Ae=s(9702),Ot=s.n(Ae),$t=s(8887),Zt=s.n($t),Yt=s(2439),Ve=s.n(Yt),xe=s(6049),Ee=s.n(xe),Qe=s(2327),Bt=s.n(Qe),ot=s(8901),It=s.n(ot),Nt=s(7387),yt=s.n(Nt),re=s(6677),Wt=s.n(re);function Vt(Gt){var se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var te,ge=(0,l.Z)(Gt);if(se){var Me=(0,l.Z)(this).constructor;te=Reflect.construct(ge,arguments,Me)}else te=ge.apply(this,arguments);return(0,N.Z)(this,te)}}v=s.hmd(v);var Tt=function(Gt){(0,H.Z)(te,Gt);var se=Vt(te);function te(ge){var Me,Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,_.Z)(this,te),(Me=se.call(this,ge,{compName:"text-viewer"},Ie)).lineNum=0,Me.copy=function(){var gi=(0,I.Z)(Me).c,Ei=Me.options,li=Ei.text,yi=Ei.escape;Bt()(yi?li:yt()(Wt()(li)));var ci=Me.$copy.find(gi(".icon"));ci.addClass(gi("icon-check")).rmClass(gi("icon-copy")),setTimeout(function(){ci.rmClass(gi("icon-check")).addClass(gi("icon-copy"))},1e3)},Me._updateCopyPos=function(){var gi=(0,I.Z)(Me).container;Me.$copy.css({top:gi.scrollTop+5,right:5-gi.scrollLeft})},Me.initOptions(Ie,{text:"",escape:!0,showLineNumbers:!0,wrapLongLines:!0,maxHeight:1/0}),Me.render=Ve()(function(){return Me._render()},16),Me.updateCopyPos=Ee()(function(){return Me._updateCopyPos()},300),Me.initTpl(),Me.$text=Me.find(".text"),Me.$copy=Me.find(".copy"),ft&&Me.$copy.css("opacity","1"),Me.options.text&&Me.render(),Me.bindEvent(),Me.updateHeight(),Me}return(0,x.Z)(te,[{key:"append",value:function(ge){var Me=this,Ie=this.options,gi=this.$copy,Ei=this.c,li=this.$text,yi=Ie.showLineNumbers;if(this.options.text+=ge,!yi)return this.$text.append(Ie.escape?It()(ge):ge);var ci=function(Ke){return Ke.length===0?[]:Ke.split(qt)}(ge);Zt()(ci)&&(ci=["&nbsp;"]),C()(Ot()(ci))||ci.pop();var De="";_t()(ci,function(Ke,pi){Me.lineNum+=1,De+='<div class="'.concat(Ei("table-row"),'"><div class="').concat(Ei("line-number"),'">').concat(Me.lineNum,'</div><div class="').concat(Ei("line-text"),'">').concat(Ie.escape?It()(Ke):Ke||" ","</div></div>")}),li.find(Ei(".table")).append(De),gi.hide(),li.offset().height>40&&gi.show(),this.updateCopyPos()}},{key:"destroy",value:function(){this.$container.off("scroll",this.updateCopyPos),(0,B.Z)((0,l.Z)(te.prototype),"destroy",this).call(this)}},{key:"updateHeight",value:function(){var ge=this.options.maxHeight;ge>0&&ge!==1/0?this.$text.css("max-height",ge):this.$text.css("max-height","none")}},{key:"initTpl",value:function(){this.$container.html(this.c('<div class="text"></div><div class="copy"><span class="icon icon-copy"></span></div>'))}},{key:"bindEvent",value:function(){var ge=this;this.on("optionChange",function(Me){Me==="maxHeight"?ge.updateHeight():ge.render()}),this.$container.on("scroll",this.updateCopyPos),this.$copy.on("click",this.copy)}},{key:"_render",value:function(){var ge=this.c,Me=this.$text,Ie=this.options,gi=Ie.text,Ei=Ie.wrapLongLines,li=Ie.showLineNumbers;Ei?Me.addClass(ge("wrap-long-lines")):Me.rmClass(ge("wrap-long-lines")),li?Me.addClass(ge("line-numbers")):Me.rmClass(ge("line-numbers")),Me.html('<div class="'.concat(ge("table"),'"></div>')),this.lineNum=0,this.options.text="",this.append(gi)}}]),te}(Ut),qt=/\r\n|\r|\n/g;(function(Gt,se){try{Gt.exports=se,Gt.exports.default=se}catch{}})(v,Tt)},6672:function(v,r,s){s.d(r,{Z:function(){return Rr}});var _={};s.r(_),s.d(_,{classPrefix:function(){return Ht},drag:function(){return qe},escapeJsonStr:function(){return Ys},evalCss:function(){return Te},eventClient:function(){return ai},eventPage:function(){return wi},getFileName:function(){return ni},hasSafeArea:function(){return ys},isChobitsuEl:function(){return si},isErudaEl:function(){return Re},pxToNum:function(){return Bi},safeStorage:function(){return ji}});var x=s(5671),I=s(3144),B=s(7326),H=s(9340),N=s(2963),l=s(1120),d=s(4942),o=s(1443),T=s.n(o),L=new(T());L.ADD="ADD",L.SHOW="SHOW",L.SCALE="SCALE";var Q=L,P=s(1752),q=s(7496),C=s.n(q)()({init:function(jt){this._$el=jt},show:function(){return this._$el.show(),this},hide:function(){return this._$el.hide(),this},destroy:function(){this._$el.remove()}}),Z=s(1512),j=s.n(Z),dt=s(125),Y=s.n(dt),W=s(5229),u=s.n(W),O=s(3783),X=s.n(O),ht=s(5972),pt=s.n(ht),ft=s(6768),$=s.n(ft),At=s(6341),_t=s.n(At),ut=s(4675),Ct=s.n(ut),vt=s(3367),xt=s.n(vt),lt=s(2533),kt=s.n(lt),Jt=s(7622),Ut=s.n(Jt),Ae=s(4193),Ot=s.n(Ae),$t=s(6329),Zt=s.n($t),Yt=s(6472),Ve=s.n(Yt),xe=["background","foreground","selectForeground","accent","highlight","border","primary","contrast","varColor","stringColor","keywordColor","numberColor","operatorColor","linkColor","textColor","tagNameColor","functionColor","attributeNameColor","commentColor"],Ee=xe.length;function Qe(jt){for(var zt={},Mt=0;Mt<Ee;Mt++)zt[xe[Mt]]=jt[Mt];return zt}function Bt(jt){return Ve()(jt)&&(jt=Qe(jt)),jt.darkerBackground||(jt.darkerBackground=jt.contrast),Zt()({consoleWarnBackground:"#332a00",consoleWarnForeground:"#ffcb6b",consoleWarnBorder:"#650",consoleErrorBackground:"#290000",consoleErrorForeground:"#ff8080",consoleErrorBorder:"#5c0000",light:"#ccc",dark:"#aaa"},jt)}function ot(jt){return Ve()(jt)&&(jt=Qe(jt)),jt.darkerBackground||(jt.darkerBackground=jt.contrast),Zt()({consoleWarnBackground:"#fffbe5",consoleWarnForeground:"#5c5c00",consoleWarnBorder:"#fff5c2",consoleErrorBackground:"#fff0f0",consoleErrorForeground:"#f00",consoleErrorBorder:"#ffd6d6",light:"#fff",dark:"#eee"},jt)}var It=["Dark","Material Oceanic","Material Darker","Material Palenight","Material Deep Ocean","Monokai Pro","Dracula","Arc Dark","Atom One Dark","Solarized Dark","Night Owl"],Nt={Light:ot({darkerBackground:"#f3f3f3",background:"#fff",foreground:"#333",selectForeground:"#333",accent:"#1a73e8",highlight:"#eaeaea",border:"#ccc",primary:"#333",contrast:"#f2f7fd",varColor:"#c80000",stringColor:"#1a1aa6",keywordColor:"#881280",numberColor:"#1c00cf",operatorColor:"#808080",linkColor:"#1155cc",textColor:"#8097bd",tagNameColor:"#881280",functionColor:"#222",attributeNameColor:"#994500",commentColor:"#236e25",cssProperty:"#c80000"}),Dark:Bt({darkerBackground:"#333",background:"#242424",foreground:"#a5a5a5",selectForeground:"#eaeaea",accent:"#555",highlight:"#000",border:"#3d3d3d",primary:"#ccc",contrast:"#0b2544",varColor:"#e36eec",stringColor:"#f29766",keywordColor:"#9980ff",numberColor:"#9980ff",operatorColor:"#7f7f7f",linkColor:"#ababab",textColor:"#42597f",tagNameColor:"#5db0d7",functionColor:"#d5d5d5",attributeNameColor:"#9bbbdc",commentColor:"#747474"}),"Material Oceanic":Bt(["#263238","#B0BEC5","#FFFFFF","#009688","#425B67","#2A373E","#607D8B","#1E272C","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#546e7a"]),"Material Darker":Bt(["#212121","#B0BEC5","#FFFFFF","#FF9800","#3F3F3F","#292929","#727272","#1A1A1A","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#616161"]),"Material Lighter":ot(["#FAFAFA","#546E7A","#546e7a","#00BCD4","#E7E7E8","#d3e1e8","#94A7B0","#F4F4F4","#272727","#91B859","#7C4DFF","#F76D47","#39ADB5","#39ADB5","#546E7A","#E53935","#6182B8","#F6A434","#AABFC9"]),"Material Palenight":Bt(["#292D3E","#A6ACCD","#FFFFFF","#ab47bc","#444267","#2b2a3e","#676E95","#202331","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#A6ACCD","#f07178","#82aaff","#ffcb6b","#676E95"]),"Material Deep Ocean":Bt(["#0F111A","#8F93A2","#FFFFFF","#84ffff","#1F2233","#41465b","#4B526D","#090B10","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#8F93A2","#f07178","#82aaff","#ffcb6b","#717CB4"]),"Monokai Pro":Bt(["#2D2A2E","#fcfcfa","#FFFFFF","#ffd866","#5b595c","#423f43","#939293","#221F22","#FCFCFA","#FFD866","#FF6188","#AB9DF2","#FF6188","#78DCE8","#fcfcfa","#FF6188","#A9DC76","#78DCE8","#727072"]),Dracula:Bt(["#282A36","#F8F8F2","#8BE9FD","#FF79C5","#6272A4","#21222C","#6272A4","#191A21","#F8F8F2","#F1FA8C","#FF79C6","#BD93F9","#FF79C6","#F1FA8C","#F8F8F2","#FF79C6","#50FA78","#50FA7B","#6272A4"]),"Arc Dark":Bt(["#2f343f","#D3DAE3","#FFFFFF","#42A5F5","#3F3F46","#404552","#8b9eb5","#262b33","#CF6A4C","#8F9D6A","#9B859D","#CDA869","#A7A7A7","#7587A6","#D3DAE3","#CF6A4C","#7587A6","#F9EE98","#747C84"]),"Atom One Dark":Bt(["#282C34","#979FAD","#FFFFFF","#2979ff","#383D48","#2e3239","#979FAD","#21252B","#D19A66","#98C379","#C679DD","#D19A66","#61AFEF","#56B6C2","#979FAD","#F07178","#61AEEF","#E5C17C","#59626F"]),"Atom One Light":ot(["#FAFAFA","#232324","#232324","#2979ff","#EAEAEB","#DBDBDC","#9D9D9F","#FFFFFF","#986801","#50A14E","#A626A4","#986801","#4078F2","#0184BC","#232324","#E4564A","#4078F2","#C18401","#A0A1A7"]),"Solarized Dark":Bt(["#002B36","#839496","#FFFFFF","#d33682","#11353F","#0D3640","#586e75","#00252E","#268BD2","#2AA198","#859900","#D33682","#93A1A1","#268BD2","#839496","#268BD2","#B58900","#B58900","#657B83"]),"Solarized Light":ot(["#fdf6e3","#586e75","#002b36","#d33682","#F6F0DE","#f7f2e2","#93a1a1","#eee8d5","#268BD2","#2AA198","#859900","#D33682","#657B83","#268BD2","#586e75","#268BD2","#B58900","#657B83","#93A1A1"]),Github:ot(["#F7F8FA","#5B6168","#FFFFFF","#79CB60","#CCE5FF","#DFE1E4","#292D31","#FFFFFF","#24292E","#032F62","#D73A49","#005CC5","#D73A49","#005CC5","#5B6168","#22863A","#6F42C1","#6F42C1","#6A737D"]),"Night Owl":Bt(["#011627","#b0bec5","#ffffff","#7e57c2","#152C3B","#2a373e","#607d8b","#001424","#addb67","#ecc48d","#c792ea","#f78c6c","#c792ea","#80CBC4","#b0bec5","#7fdbca","#82AAFF","#FAD430","#637777"]),"Light Owl":ot(["#FAFAFA","#546e7a","#403f53","#269386","#E0E7EA","#efefef","#403F53","#FAFAFA","#0C969B","#c96765","#994cc3","#aa0982","#7d818b","#994cc3","#546e7a","#994cc3","#4876d6","#4876d6","#637777"])},yt=[],re=1,Wt=Nt.Light,Vt=function jt(zt,Mt){zt=xt()(zt);for(var K=0,wt=yt.length;K<wt;K++)if(yt[K].css===zt)return;Mt=Mt||jt.container||document.head;var Dt=document.createElement("style");Dt.type="text/css",Mt.appendChild(Dt);var Xt={css:zt,el:Dt,container:Mt};return qt(Xt),yt.push(Xt),Xt};function Tt(){X()(yt,function(jt){return qt(jt)})}function qt(jt){var zt=jt.css,Mt=jt.el;zt=(zt=zt.replace(/(\d+)px/g,function(wt,Dt){return+Dt*re+"px"})).replace(/_/g,"eruda-");var K=kt()(Nt.Light);X()(K,function(wt){zt=zt.replace(new RegExp("var\\(--".concat(Ut()(wt),"\\)"),"g"),Wt[wt])}),Mt.innerText=zt}Vt.setScale=function(jt){re=jt,Tt()},Vt.setTheme=function(jt){Wt=$()(jt)?Nt[jt]||Nt.Light:Ot()(jt,Nt.Light),Tt()},Vt.getCurTheme=function(){return Wt},Vt.getThemes=function(){return Nt},Vt.clear=function(){X()(yt,function(jt){var zt=jt.container,Mt=jt.el;return zt.removeChild(Mt)}),yt=[]},Vt.remove=function(jt){yt=pt()(yt,function(zt){return zt!==jt}),jt.container.removeChild(jt.el)};var Gt=Vt,se=s(8692);function te(jt){var zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Mt,K=(0,l.Z)(jt);if(zt){var wt=(0,l.Z)(this).constructor;Mt=Reflect.construct(K,arguments,wt)}else Mt=K.apply(this,arguments);return(0,N.Z)(this,Mt)}}var ge=function(jt){(0,H.Z)(Mt,jt);var zt=te(Mt);function Mt(){var K;return(0,x.Z)(this,Mt),(K=zt.call(this))._style=Gt(s(8011)),K.name="settings",K._settings=[],K}return(0,I.Z)(Mt,[{key:"init",value:function(K){(0,P.Z)((0,l.Z)(Mt.prototype),"init",this).call(this,K),this._setting=new se.Z(K.get(0)),this._bindEvent()}},{key:"remove",value:function(K,wt){var Dt=this;if($()(K)){var Xt=this;this._$el.find(".luna-setting-item-title").each(function(){j()(this).text()===K&&Xt._setting.remove(this.settingItem)})}else this._settings=pt()(this._settings,function(be){return be.config!==K||be.key!==wt||(Dt._setting.remove(be.item),!1)});return this._cleanSeparator(),this}},{key:"destroy",value:function(){this._setting.destroy(),(0,P.Z)((0,l.Z)(Mt.prototype),"destroy",this).call(this),Gt.remove(this._style)}},{key:"clear",value:function(){this._settings=[],this._setting.clear()}},{key:"switch",value:function(K,wt,Dt){var Xt=this._genId(),be=this._setting.appendCheckbox(Xt,!!K.get(wt),Dt);return this._settings.push({config:K,key:wt,id:Xt,item:be}),this}},{key:"select",value:function(K,wt,Dt,Xt){var be=this._genId(),Se={};X()(Xt,function(ui){return Se[ui]=ui});var ei=this._setting.appendSelect(be,K.get(wt),"",Dt,Se);return this._settings.push({config:K,key:wt,id:be,item:ei}),this}},{key:"range",value:function(K,wt,Dt,Xt){var be=Xt.min,Se=be===void 0?0:be,ei=Xt.max,ui=ei===void 0?1:ei,Di=Xt.step,Wi=Di===void 0?.1:Di,cs=this._genId(),gs=this._setting.appendNumber(cs,K.get(wt),Dt,{max:ui,min:Se,step:Wi,range:!0});return this._settings.push({config:K,key:wt,min:Se,max:ui,step:Wi,id:cs,item:gs}),this}},{key:"button",value:function(K,wt){return this._setting.appendButton(K,wt),this}},{key:"separator",value:function(){return this._setting.appendSeparator(),this}},{key:"text",value:function(K){return this._setting.appendTitle(K),this}},{key:"_cleanSeparator",value:function(){var K=Ct()(this._$el.get(0).children);function wt(be){return _t()(be.getAttribute("class"),"luna-setting-item-separator")}for(var Dt=0,Xt=K.length;Dt<Xt-1;Dt++)wt(K[Dt])&&wt(K[Dt+1])&&j()(K[Dt]).remove()}},{key:"_genId",value:function(){return u()("eruda-settings")}},{key:"_getSetting",value:function(K){var wt;return X()(this._settings,function(Dt){Dt.id===K&&(wt=Dt)}),wt}},{key:"_bindEvent",value:function(){var K=this;this._setting.on("change",function(wt,Dt){var Xt=K._getSetting(wt);Xt.config.set(Xt.key,Dt)})}}],[{key:"createCfg",value:function(K,wt){return new(Y())("eruda-"+K,wt)}}]),Mt}(C),Me=s(6837),Ie=s.n(Me),gi=s(442),Ei=s.n(gi),li=s(6334),yi=s.n(li),ci=s(4187),De=s.n(ci),Ke=s(1286),pi=s.n(Ke),$e=s(9702),ii=s.n($e),Le=s(2461),me=s.n(Le),Je=s(5026),Ge=s.n(Je),di=s(5610),Pi=s.n(di),Ti=s(3875),Oi=s.n(Ti),qi=s(4331),Ui=s.n(qi),hs=s(7483),ns=s.n(hs);function ys(){var jt=!1,zt=document.createElement("div");if(CSS.supports("padding-bottom: env(safe-area-inset-bottom)")?(zt.style.paddingBottom="env(safe-area-inset-bottom)",jt=!0):CSS.supports("padding-bottom: constant(safe-area-inset-bottom)")&&(zt.style.paddingBottom="constant(safe-area-inset-bottom)",jt=!0),jt){document.body.appendChild(zt);var Mt=parseInt(window.getComputedStyle(zt).paddingBottom);if(document.body.removeChild(zt),Mt>0)return!0}return!1}function Ys(jt){return De()(jt).replace(/\\'/g,"'").replace(/\t/g,"\\t")}function ji(jt,zt){var Mt;switch(pi()(zt)&&(zt=!0),jt){case"local":Mt=window.localStorage;break;case"session":Mt=window.sessionStorage}try{var K="test-localStorage-"+Date.now();Mt.setItem(K,K);var wt=Mt.getItem(K);if(Mt.removeItem(K),wt!==K)throw new Error}catch{return zt?Ge():void 0}return Mt}function ni(jt){var zt=ii()(jt.split("/"));return zt===""&&(zt=(jt=new(yi())(jt)).hostname),zt}function Bi(jt){return Oi()(jt.replace("px",""))}function Re(jt){for(;jt;){if(jt.id==="eruda")return!0;jt=jt.parentNode}return!1}function si(jt){for(;jt;){var zt="";if(jt.getAttribute&&(zt=jt.getAttribute("class")||""),_t()(zt,"__chobitsu-hide__"))return!0;jt=jt.parentNode}return!1}var Te=Gt;function Ht(jt){if(/<[^>]*>/g.test(jt))try{var zt=ns().parse(jt);return Mi(zt,function(Mt){Mt.attrs&&Mt.attrs.class&&(Mt.attrs.class=Yi(Mt.attrs.class))}),ns().stringify(zt)}catch{return Yi(jt)}return Yi(jt)}function Mi(jt,zt){for(var Mt=0,K=jt.length;Mt<K;Mt++){var wt=jt[Mt];zt(wt),wt.content&&Mi(wt.content,zt)}}function Yi(jt){var zt="eruda-";return me()(Ui()(jt).split(/\s+/),function(Mt){return _t()(Mt,zt)?Mt:Mt.replace(/[\w-]+/,function(K){return"".concat(zt).concat(K)})}).join(" ")}var Zi="ontouchstart"in Pi(),ti="PointerEvent"in Pi(),Ii={start:"touchstart",move:"touchmove",end:"touchend"},hi={start:"mousedown",move:"mousemove",end:"mouseup"},Be={start:"pointerdown",move:"pointermove",end:"pointerup"};function qe(jt){return ti?Be[jt]:Zi?Ii[jt]:hi[jt]}function ai(jt,zt){var Mt=jt==="x"?"clientX":"clientY";return zt[Mt]?zt[Mt]:zt.changedTouches?zt.changedTouches[0][Mt]:0}function wi(jt,zt){var Mt=jt==="x"?"pageX":"pageY";return zt[Mt]?zt[Mt]:zt.changedTouches?zt.changedTouches[0][Mt]:0}function Qi(jt){var zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Mt,K=(0,l.Z)(jt);if(zt){var wt=(0,l.Z)(this).constructor;Mt=Reflect.construct(K,arguments,wt)}else Mt=K.apply(this,arguments);return(0,N.Z)(this,Mt)}}var Si,xi=j()(document),Fi=function(jt){(0,H.Z)(Mt,jt);var zt=Qi(Mt);function Mt(K){var wt;return(0,x.Z)(this,Mt),wt=zt.call(this),(0,d.Z)((0,B.Z)(wt),"_onDragStart",function(Dt){var Xt=wt._$el;Xt.addClass(Ht("active")),wt._isClick=!0,Dt=Dt.origEvent,wt._startX=ai("x",Dt),wt._oldX=Bi(Xt.css("left")),wt._oldY=Bi(Xt.css("top")),wt._startY=ai("y",Dt),xi.on(qe("move"),wt._onDragMove),xi.on(qe("end"),wt._onDragEnd)}),(0,d.Z)((0,B.Z)(wt),"_onDragMove",function(Dt){var Xt=wt._$el.get(0).offsetWidth,be=wt._$container.get(0).offsetWidth,Se=wt._$container.get(0).offsetHeight,ei=ai("x",Dt=Dt.origEvent)-wt._startX,ui=ai("y",Dt)-wt._startY;(Math.abs(ei)>3||Math.abs(ui)>3)&&(wt._isClick=!1);var Di=wt._oldX+ei,Wi=wt._oldY+ui;Di<0?Di=0:Di>be-Xt&&(Di=be-Xt),Wi<0?Wi=0:Wi>Se-Xt&&(Wi=Se-Xt),wt._$el.css({left:Di,top:Wi})}),(0,d.Z)((0,B.Z)(wt),"_onDragEnd",function(Dt){var Xt=wt._$el;wt._isClick&&wt.emit("click"),wt._onDragMove(Dt),xi.off(qe("move"),wt._onDragMove),xi.off(qe("end"),wt._onDragEnd);var be=wt.config;be.get("rememberPos")&&be.set("pos",{x:Bi(Xt.css("left")),y:Bi(Xt.css("top"))}),Xt.rmClass("eruda-active")}),wt._style=Gt(s(9195)),wt._$container=K,wt._initTpl(),wt._bindEvent(),wt._registerListener(),wt}return(0,I.Z)(Mt,[{key:"hide",value:function(){this._$el.hide()}},{key:"show",value:function(){this._$el.show()}},{key:"setPos",value:function(K){this._isOutOfRange(K)&&(K=this._getDefPos()),this._$el.css({left:K.x,top:K.y}),this.config.set("pos",K)}},{key:"getPos",value:function(){return this.config.get("pos")}},{key:"destroy",value:function(){Gt.remove(this._style),this._unregisterListener(),this._$el.remove()}},{key:"_isOutOfRange",value:function(K){K=K||this.config.get("pos");var wt=this._getDefPos();return K.x>wt.x+10||K.x<0||K.y<0||K.y>wt.y+10}},{key:"_registerListener",value:function(){var K=this;this._scaleListener=function(){return Ie()(function(){K._isOutOfRange()&&K._resetPos()})},Q.on(Q.SCALE,this._scaleListener)}},{key:"_unregisterListener",value:function(){Q.off(Q.SCALE,this._scaleListener)}},{key:"_initTpl",value:function(){var K=this._$container;K.append(Ht('<div class="entry-btn"><span class="icon-tool"></span></div>')),this._$el=K.find(".eruda-entry-btn")}},{key:"_resetPos",value:function(K){var wt=this.config,Dt=wt.get("pos"),Xt=this._getDefPos();wt.get("rememberPos")&&!K||(Dt=Xt),this.setPos(Dt)}},{key:"_bindEvent",value:function(){var K=this;this._$el.on(qe("start"),this._onDragStart),Ei().on("change",function(){return K._resetPos(!0)}),window.addEventListener("resize",function(){return K._resetPos()})}},{key:"initCfg",value:function(K){var wt=this.config=ge.createCfg("entry-button",{rememberPos:!0,pos:this._getDefPos()});K.switch(wt,"rememberPos","Remember Entry Button Position"),this._resetPos()}},{key:"_getDefPos",value:function(){var K=this._$el.get(0).offsetWidth+10;return{x:window.innerWidth-K,y:window.innerHeight-K}}}]),Mt}(T()),Li=s(4989),Gi=Si=new(s.n(Li)())("[Eruda]","warn");Si.formatter=function(jt,zt){return zt.unshift(this.name),zt};var Xi=s(3990),rs=s.n(Xi),fs=s(2520),_s=s.n(fs),Ls=s(6930),ws=s.n(Ls),Ri=s(4270),ks=s.n(Ri),ms=s(6093),Rs=s.n(ms),Es=s(129),gn=s(7638);function vs(jt){var zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Mt,K=(0,l.Z)(jt);if(zt){var wt=(0,l.Z)(this).constructor;Mt=Reflect.construct(K,arguments,wt)}else Mt=K.apply(this,arguments);return(0,N.Z)(this,Mt)}}var Bs=function(jt){(0,H.Z)(Mt,jt);var zt=vs(Mt);function Mt(K){var wt,Dt=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).defaults,Xt=Dt===void 0?{}:Dt;return(0,x.Z)(this,Mt),wt=zt.call(this),(0,d.Z)((0,B.Z)(wt),"_checkSafeArea",function(){var be=(0,B.Z)(wt).$container;ys()?be.addClass(Ht("safe-area")):be.rmClass(Ht("safe-area"))}),(0,d.Z)((0,B.Z)(wt),"_updateTabHeight",function(be){wt._tab.setOption("height",40*be),Ie()(function(){wt._tab.updateSlider()})}),wt._defCfg=Zt()({transparency:1,displaySize:80,theme:_s()()?"Dark":"Light"},Xt),wt._style=Gt(s(13)),wt.$container=K,wt._isShow=!1,wt._opacity=1,wt._tools={},wt._isResizing=!1,wt._resizeTimer=null,wt._resizeStartY=0,wt._resizeStartSize=0,wt._initTpl(),wt._initTab(),wt._initNotification(),wt._initModal(),ks()(function(){return wt._checkSafeArea()}),wt._bindEvent(),wt}return(0,I.Z)(Mt,[{key:"show",value:function(){var K=this;return this._isShow=!0,this._$el.show(),this._tab.updateSlider(),setTimeout(function(){K._$el.css("opacity",K._opacity)},50),this.emit("show"),this}},{key:"hide",value:function(){var K=this;return this._isShow=!1,this.emit("hide"),this._$el.css({opacity:0}),setTimeout(function(){return K._$el.hide()},300),this}},{key:"toggle",value:function(){return this._isShow?this.hide():this.show()}},{key:"add",value:function(K){var wt=this._tab;if(!(K instanceof C)){var Dt=new C,Xt=Dt.init,be=Dt.show,Se=Dt.hide,ei=Dt.destroy;Ot()(K,{init:Xt,show:be,hide:Se,destroy:ei})}var ui=K.name;return ui?(ui=ui.toLowerCase(),this._tools[ui]?Gi.warn("Tool ".concat(ui," already exists")):(this._$tools.prepend('<div id="'.concat(Ht(ui),'" class="').concat(Ht(ui+" tool"),'"></div>')),K.init(this._$tools.find(".".concat(Ht(ui),".").concat(Ht("tool"))),this),K.active=!1,this._tools[ui]=K,ui==="settings"?wt.append({id:ui,title:ui}):wt.insert(wt.length-1,{id:ui,title:ui}),this)):Gi.error("You must specify a name for a tool")}},{key:"remove",value:function(K){var wt=this._tools;if(!wt[K])return Gi.warn("Tool ".concat(K," doesn't exist"));this._tab.remove(K);var Dt=wt[K];if(delete wt[K],Dt.active){var Xt=kt()(wt);Xt.length>0&&this.showTool(wt[ii()(Xt)].name)}return Dt.destroy(),this}},{key:"removeAll",value:function(){var K=this;return X()(this._tools,function(wt){return K.remove(wt.name)}),this}},{key:"get",value:function(K){var wt=this._tools[K];if(wt)return wt}},{key:"showTool",value:function(K){if(this._curTool===K)return this;this._curTool=K;var wt=this._tools,Dt=wt[K];if(Dt){var Xt={};return X()(wt,function(be){be.active&&(Xt=be,be.active=!1,be.hide())}),Dt.active=!0,Dt.show(),this._tab.select(K),this.emit("showTool",K,Xt),this}}},{key:"initCfg",value:function(K){var wt=this,Dt=this.config=ge.createCfg("dev-tools",this._defCfg);this._setTransparency(Dt.get("transparency")),this._setDisplaySize(Dt.get("displaySize")),this._setTheme(Dt.get("theme")),Dt.on("change",function(Xt,be){switch(Xt){case"transparency":return wt._setTransparency(be);case"displaySize":return wt._setDisplaySize(be);case"theme":return wt._setTheme(be)}}),K.separator().select(Dt,"theme","Theme",kt()(Gt.getThemes())).range(Dt,"transparency","Transparency",{min:.2,max:1,step:.01}).range(Dt,"displaySize","Display Size",{min:40,max:100,step:1}).button("Restore defaults and reload",function(){var Xt=ji("local"),be=JSON.parse(JSON.stringify(Xt));X()(be,function(Se,ei){$()(Se)&&ws()(ei,"eruda")&&Xt.removeItem(ei)}),window.location.reload()}).separator()}},{key:"notify",value:function(K,wt){this._notification.notify(K,wt)}},{key:"destroy",value:function(){Gt.remove(this._style),this.removeAll(),this._tab.destroy(),this._$el.remove(),window.removeEventListener("resize",this._checkSafeArea),Q.off(Q.SCALE,this._updateTabHeight)}},{key:"_setTheme",value:function(K){var wt=this.$container;(function(Dt){return _t()(It,Dt)})(K)?wt.addClass(Ht("dark")):wt.rmClass(Ht("dark")),Gt.setTheme(K)}},{key:"_setTransparency",value:function(K){rs()(K)&&(this._opacity=K,this._isShow&&this._$el.css({opacity:K}))}},{key:"_setDisplaySize",value:function(K){rs()(K)&&this._$el.css({height:K+"%"})}},{key:"_initTpl",value:function(){var K=this.$container;K.append(Ht(`
      <div class="dev-tools">
        <div class="resizer"></div>
        <div class="tab"></div>
        <div class="tools"></div>
        <div class="notification"></div>
        <div class="modal"></div>
      </div>
      `)),this._$el=K.find(Ht(".dev-tools")),this._$tools=this._$el.find(Ht(".tools"))}},{key:"_initTab",value:function(){var K=this;this._tab=new gn.Z(this._$el.find(Ht(".tab")).get(0),{height:40}),this._tab.on("select",function(wt){return K.showTool(wt)})}},{key:"_initNotification",value:function(){this._notification=new(Rs())(this._$el.find(Ht(".notification")).get(0),{position:{x:"center",y:"top"}})}},{key:"_initModal",value:function(){Es.Z.setContainer(this._$el.find(Ht(".modal")).get(0))}},{key:"_bindEvent",value:function(){var K=this,wt=this._$el.find(Ht(".resizer")),Dt=this._$el.find(Ht(".nav-bar")),Xt=j()(document),be=function(ei){if(K._isResizing){ei.preventDefault(),ei.stopPropagation(),ei=ei.origEvent;var ui=(K._resizeStartY-ai("y",ei))/window.innerHeight*100,Di=K._resizeStartSize+ui;Di<40?Di=40:Di>100&&(Di=100),K.config.set("displaySize",Oi()(Di.toFixed(2)))}},Se=function ei(){clearTimeout(K._resizeTimer),K._isResizing=!1,wt.css("height",10),Xt.off(qe("move"),be),Xt.off(qe("end"),ei)};wt.css("height",10),wt.on(qe("start"),function(ei){ei.preventDefault(),ei.stopPropagation(),ei=ei.origEvent,K._isResizing=!0,K._resizeStartSize=K.config.get("displaySize"),K._resizeStartY=ai("y",ei),wt.css("height","100%"),Xt.on(qe("move"),be),Xt.on(qe("end"),Se)}),Dt.on("contextmenu",function(ei){return ei.preventDefault()}),this.$container.on("click",function(ei){return ei.stopPropagation()}),window.addEventListener("resize",this._checkSafeArea),Q.on(Q.SCALE,this._updateTabHeight)}}]),Mt}(T()),Vs=s(1214),xn=s.n(Vs),kn=s(4777),Us=s.n(kn),en=s(1754),ln=s.n(en),Ft=s(5484),gt=s.n(Ft),bt=s(3023),Pt=s.n(bt),ee=s(9585),ri=s.n(ee),Ne=s(6156),ve=s.n(Ne),_i=s(8816);function bi(jt){var zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Mt,K=(0,l.Z)(jt);if(zt){var wt=(0,l.Z)(this).constructor;Mt=Reflect.construct(K,arguments,wt)}else Mt=K.apply(this,arguments);return(0,N.Z)(this,Mt)}}gt().start();var ds=function(jt){(0,H.Z)(Mt,jt);var zt=bi(Mt);function Mt(){var K,wt=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).name,Dt=wt===void 0?"console":wt;return(0,x.Z)(this,Mt),K=zt.call(this),(0,d.Z)((0,B.Z)(K),"_handleShow",function(){ri()(K._$el.get(0))||K._logger.renderViewport()}),(0,d.Z)((0,B.Z)(K),"_handleErr",function(Xt){K._logger.error(Xt)}),T().mixin((0,B.Z)(K)),K.name=Dt,K._selectedLog=null,K}return(0,I.Z)(Mt,[{key:"init",value:function(K,wt){(0,P.Z)((0,l.Z)(Mt.prototype),"init",this).call(this,K),this._container=wt,this._appendTpl(),this._initCfg(),this._initLogger(),this._exposeLogger(),this._bindEvent()}},{key:"show",value:function(){(0,P.Z)((0,l.Z)(Mt.prototype),"show",this).call(this),this._handleShow()}},{key:"overrideConsole",value:function(){var K=this,wt=this._origConsole={},Dt=window.console;return Hs.forEach(function(Xt){var be=wt[Xt]=xn();Dt[Xt]&&(be=wt[Xt]=Dt[Xt].bind(Dt)),Dt[Xt]=function(){K[Xt].apply(K,arguments),be.apply(void 0,arguments)}}),this}},{key:"setGlobal",value:function(K,wt){this._logger.setGlobal(K,wt)}},{key:"restoreConsole",value:function(){var K=this;return this._origConsole?(Hs.forEach(function(wt){return window.console[wt]=K._origConsole[wt]}),delete this._origConsole,this):this}},{key:"catchGlobalErr",value:function(){return gt().addListener(this._handleErr),this}},{key:"ignoreGlobalErr",value:function(){return gt().rmListener(this._handleErr),this}},{key:"filter",value:function(K){var wt=this._$filterText,Dt=this._logger;$()(K)?(wt.text(K),Dt.setOption("filter",Ui()(K))):ln()(K)?(wt.text(xt()(K)),Dt.setOption("filter",K)):Us()(K)&&(wt.text("Æ"),Dt.setOption("filter",K))}},{key:"destroy",value:function(){this._logger.destroy(),(0,P.Z)((0,l.Z)(Mt.prototype),"destroy",this).call(this),this._container.off("show",this._handleShow),this._style&&Gt.remove(this._style),this.ignoreGlobalErr(),this.restoreConsole(),this._rmCfg()}},{key:"_enableJsExecution",value:function(K){var wt=this._$el,Dt=wt.find(Ht(".js-input"));K?(Dt.show(),wt.rmClass(Ht("js-input-hidden"))):(Dt.hide(),wt.addClass(Ht("js-input-hidden")))}},{key:"_appendTpl",value:function(){var K=this._$el;this._style=Gt(s(3191)),K.append(Ht(`
      <div class="control">
        <span class="icon-clear clear-console"></span>
        <span class="level active" data-level="all">All</span>
        <span class="level" data-level="info">Info</span>
        <span class="level" data-level="warning">Warning</span>
        <span class="level" data-level="error">Error</span>
        <span class="filter-text"></span>
        <span class="icon-filter filter"></span>
        <span class="icon-copy icon-disabled copy"></span>
      </div>
      <div class="logs-container"></div>
      <div class="js-input">
        <div class="buttons">
          <div class="button cancel">Cancel</div>
          <div class="button execute">Execute</div>
        </div>
        <span class="icon-arrow-right"></span>
        <textarea></textarea>
      </div>
    `));var wt=K.find(Ht(".js-input")),Dt=wt.find("textarea"),Xt=wt.find(Ht(".buttons"));Zt()(this,{_$control:K.find(Ht(".control")),_$logs:K.find(Ht(".logs-container")),_$inputContainer:wt,_$input:Dt,_$inputBtns:Xt,_$filterText:K.find(Ht(".filter-text"))})}},{key:"_initLogger",value:function(){var K=this.config,wt=K.get("maxLogNum");wt=wt==="infinite"?0:+wt;var Dt=this._$control.find(Ht(".level")),Xt=new _i.Z(this._$logs.get(0),{asyncRender:K.get("asyncRender"),maxNum:wt,showHeader:K.get("displayExtraInfo"),unenumerable:K.get("displayUnenumerable"),accessGetter:K.get("displayGetterVal"),lazyEvaluation:K.get("lazyEvaluation")});Xt.on("optionChange",function(be,Se){be==="level"&&Dt.each(function(){var ei=j()(this),ui=ei.data("level");ei[ui===Se||ui==="all"&&Ve()(Se)?"addClass":"rmClass"](Ht("active"))})}),K.get("overrideConsole")&&this.overrideConsole(),this._logger=Xt}},{key:"_exposeLogger",value:function(){var K=this,wt=this._logger;["html"].concat(Hs).forEach(function(Dt){return K[Dt]=function(){for(var Xt=arguments.length,be=new Array(Xt),Se=0;Se<Xt;Se++)be[Se]=arguments[Se];return wt[Dt].apply(wt,be),K.emit.apply(K,[Dt].concat(be)),K}})}},{key:"_bindEvent",value:function(){var K=this,wt=this._container,Dt=this._$input,Xt=this._$inputBtns,be=this._$control,Se=this._logger,ei=this.config;be.on("click",Ht(".clear-console"),function(){return Se.clear(!0)}).on("click",Ht(".level"),function(){var ui=j()(this).data("level");ui==="all"&&(ui=["verbose","info","warning","error"]),Se.setOption("level",ui)}).on("click",Ht(".filter"),function(){Es.Z.prompt("Filter").then(function(ui){ve()(ui)||K.filter(ui)})}).on("click",Ht(".copy"),function(){K._selectedLog.copy(),wt.notify("Copied")}),Xt.on("click",Ht(".cancel"),function(){return K._hideInput()}).on("click",Ht(".execute"),function(){var ui=Dt.val().trim();ui!==""&&(Se.evaluate(ui),Dt.val("").get(0).blur(),K._hideInput())}),Dt.on("focusin",function(){return K._showInput()}),Se.on("insert",function(ui){ui.type==="error"&&ei.get("displayIfErr")&&wt.showTool("console").show()}),Se.on("select",function(ui){K._selectedLog=ui,be.find(Ht(".icon-copy")).rmClass(Ht("icon-disabled"))}),Se.on("deselect",function(){K._selectedLog=null,be.find(Ht(".icon-copy")).addClass(Ht("icon-disabled"))}),wt.on("show",this._handleShow)}},{key:"_hideInput",value:function(){this._$inputContainer.rmClass(Ht("active")),this._$inputBtns.css("display","none")}},{key:"_showInput",value:function(){this._$inputContainer.addClass(Ht("active")),this._$inputBtns.css("display","flex")}},{key:"_rmCfg",value:function(){var K=this.config,wt=this._container.get("settings");wt&&wt.remove(K,"asyncRender").remove(K,"jsExecution").remove(K,"catchGlobalErr").remove(K,"overrideConsole").remove(K,"displayExtraInfo").remove(K,"displayUnenumerable").remove(K,"displayGetterVal").remove(K,"lazyEvaluation").remove(K,"displayIfErr").remove(K,"maxLogNum").remove(Pt()(this.name))}},{key:"_initCfg",value:function(){var K=this,wt=this._container,Dt=this.config=ge.createCfg(this.name,{asyncRender:!0,catchGlobalErr:!0,jsExecution:!0,overrideConsole:!0,displayExtraInfo:!1,displayUnenumerable:!0,displayGetterVal:!0,lazyEvaluation:!0,displayIfErr:!1,maxLogNum:"infinite"});this._enableJsExecution(Dt.get("jsExecution")),Dt.get("catchGlobalErr")&&this.catchGlobalErr(),Dt.on("change",function(be,Se){var ei=K._logger;switch(be){case"asyncRender":return ei.setOption("asyncRender",Se);case"jsExecution":return K._enableJsExecution(Se);case"catchGlobalErr":return Se?K.catchGlobalErr():K.ignoreGlobalErr();case"overrideConsole":return Se?K.overrideConsole():K.restoreConsole();case"maxLogNum":return ei.setOption("maxNum",Se==="infinite"?0:+Se);case"displayExtraInfo":return ei.setOption("showHeader",Se);case"displayUnenumerable":return ei.setOption("unenumerable",Se);case"displayGetterVal":return ei.setOption("accessGetter",Se);case"lazyEvaluation":return ei.setOption("lazyEvaluation",Se)}});var Xt=wt.get("settings");Xt&&Xt.text(Pt()(this.name)).switch(Dt,"asyncRender","Asynchronous Rendering").switch(Dt,"jsExecution","Enable JavaScript Execution").switch(Dt,"catchGlobalErr","Catch Global Errors").switch(Dt,"overrideConsole","Override Console").switch(Dt,"displayIfErr","Auto Display If Error Occurs").switch(Dt,"displayExtraInfo","Display Extra Information").switch(Dt,"displayUnenumerable","Display Unenumerable Properties").switch(Dt,"displayGetterVal","Access Getter Value").switch(Dt,"lazyEvaluation","Lazy Evaluation").select(Dt,"maxLogNum","Max Log Number",["infinite","250","125","100","50","10"]).separator()}}]),Mt}(C),Hs=["log","error","info","warn","dir","time","timeLog","timeEnd","clear","table","assert","count","countReset","debug","group","groupCollapsed","groupEnd"],Bn=s(4677),Vn=s.n(Bn),jn=s(8887),Fs=s.n(jn),Rn=s(8901),is=s.n(Rn),er=s(2327),Cn=s.n(er),ir=s(4219),sr=s.n(ir),nr=s(7756),Pn=s.n(nr);function rr(jt){var zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Mt,K=(0,l.Z)(jt);if(zt){var wt=(0,l.Z)(this).constructor;Mt=Reflect.construct(K,arguments,wt)}else Mt=K.apply(this,arguments);return(0,N.Z)(this,Mt)}}var or=function(jt){(0,H.Z)(Mt,jt);var zt=rr(Mt);function Mt(K,wt){var Dt;return(0,x.Z)(this,Mt),Dt=zt.call(this),(0,d.Z)((0,B.Z)(Dt),"_copyRes",function(){var Xt=Dt._detailData,be="".concat(Xt.method," ").concat(Xt.url," ").concat(Xt.status,`
`);Fs()(Xt.data)||(be+=`
Request Data

`,be+="".concat(Xt.data,`
`)),Fs()(Xt.reqHeaders)||(be+=`
Request Headers

`,X()(Xt.reqHeaders,function(Se,ei){return be+="".concat(ei,": ").concat(Se,`
`)})),Fs()(Xt.resHeaders)||(be+=`
Response Headers

`,X()(Xt.resHeaders,function(Se,ei){return be+="".concat(ei,": ").concat(Se,`
`)})),Xt.resTxt&&(be+=`
`.concat(Xt.resTxt,`
`)),Cn()(be),Dt._devtools.notify("Copied")}),Dt._$container=K,Dt._devtools=wt,Dt._detailData={},Dt._bindEvent(),Dt}return(0,I.Z)(Mt,[{key:"show",value:function(K){K.resTxt&&Ui()(K.resTxt)===""&&delete K.resTxt,Fs()(K.resHeaders)&&delete K.resHeaders,Fs()(K.reqHeaders)&&delete K.reqHeaders;var wt="";K.data&&(wt='<pre class="'.concat(Ht("data"),'">').concat(is()(K.data),"</pre>"));var Dt="<tr><td>Empty</td></tr>";K.reqHeaders&&(Dt=me()(K.reqHeaders,function(ui,Di){return`<tr>
          <td class="`.concat(Ht("key"),'">').concat(is()(Di),`</td>
          <td>`).concat(is()(ui),`</td>
        </tr>`)}).join(""));var Xt="<tr><td>Empty</td></tr>";K.resHeaders&&(Xt=me()(K.resHeaders,function(ui,Di){return`<tr>
          <td class="`.concat(Ht("key"),'">').concat(is()(Di),`</td>
          <td>`).concat(is()(ui),`</td>
        </tr>`)}).join(""));var be="";if(K.resTxt){var Se=K.resTxt;Se.length>Sn&&(Se=Pn()(Se,Sn)),be='<pre class="'.concat(Ht("response"),'">').concat(is()(Se),"</pre>")}var ei='<div class="'.concat(Ht("control"),`">
      <span class="`).concat(Ht("icon-arrow-left back"),`"></span>
      <span class="`).concat(Ht("icon-delete back"),`"></span>
      <span class="`).concat(Ht("url"),'">').concat(is()(K.url),`</span>
      <span class="`).concat(Ht("icon-copy copy-res"),`"></span>
    </div>
    <div class="`).concat(Ht("http"),`">
      `).concat(wt,`
      <div class="`).concat(Ht("section"),`">
        <h2>Response Headers</h2>
        <table class="`).concat(Ht("headers"),`">
          <tbody>
            `).concat(Xt,`
          </tbody>
        </table>
      </div>
      <div class="`).concat(Ht("section"),`">
        <h2>Request Headers</h2>
        <table class="`).concat(Ht("headers"),`">
          <tbody>
            `).concat(Dt,`
          </tbody>
        </table>
      </div>
      `).concat(be,`
    </div>`);this._$container.html(ei).show(),this._detailData=K}},{key:"hide",value:function(){this._$container.hide(),this.emit("hide")}},{key:"_bindEvent",value:function(){var K=this,wt=this._devtools;this._$container.on("click",Ht(".back"),function(){return K.hide()}).on("click",Ht(".copy-res"),this._copyRes).on("click",Ht(".http .response"),function(){var Xt=K._detailData,be=Xt.resTxt;if(sr()(be))return Dt("object",be);switch(Xt.subType){case"css":return Dt("css",be);case"html":return Dt("html",be);case"javascript":return Dt("js",be);case"json":return Dt("object",be)}return Xt.type==="image"?Dt("img",Xt.url):void 0});var Dt=function(Xt,be){var Se=wt.get("sources");Se&&(Se.set(Xt,be),wt.showTool("sources"))}}}]),Mt}(T()),Sn=1e5,xr=s(2439),Cr=s.n(xr),qr=s(9143),Er=s.n(qr),Ir=s(2139),ar=s(8689),Qn=s(7935),ki=s(9119);function Vi(jt,zt){var Mt=Object.keys(jt);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(jt);zt&&(K=K.filter(function(wt){return Object.getOwnPropertyDescriptor(jt,wt).enumerable})),Mt.push.apply(Mt,K)}return Mt}function Ci(jt){for(var zt=1;zt<arguments.length;zt++){var Mt=arguments[zt]!=null?arguments[zt]:{};zt%2?Vi(Object(Mt),!0).forEach(function(K){(0,d.Z)(jt,K,Mt[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(Mt)):Vi(Object(Mt)).forEach(function(K){Object.defineProperty(jt,K,Object.getOwnPropertyDescriptor(Mt,K))})}return jt}var Rt=new(Er());Rt.register("Network",Ir),Rt.register("Overlay",ar),Rt.register("DOM",Ci(Ci({},Qn),{},{getNodeId:Qn.getDOMNodeId,getNode:Qn.getDOMNode})),Rt.register("Storage",ki);var Qt=Rt,ie=s(5564),Ce=s(242),oi=s.n(Ce),Ze=s(2765),Ai=s.n(Ze),je=s(6954),mi=s.n(je),Ki=s(7913),es=s.n(Ki);function os(jt){var zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Mt,K=(0,l.Z)(jt);if(zt){var wt=(0,l.Z)(this).constructor;Mt=Reflect.construct(K,arguments,wt)}else Mt=K.apply(this,arguments);return(0,N.Z)(this,Mt)}}var Ts=function(jt){(0,H.Z)(Mt,jt);var zt=os(Mt);function Mt(){var K;return(0,x.Z)(this,Mt),K=zt.call(this),(0,d.Z)((0,B.Z)(K),"_reqWillBeSent",function(wt){if(K._isRecording){var Dt,Xt={name:ni(wt.request.url),url:wt.request.url,status:"pending",type:"unknown",subType:"unknown",size:0,data:wt.request.postData,method:wt.request.method,startTime:1e3*wt.timestamp,time:0,resTxt:"",done:!1,reqHeaders:wt.request.headers||{},resHeaders:{}};Xt.render=function(){var be={name:Xt.name,method:Xt.method,status:Xt.status,type:Xt.subType,size:Xt.size,time:Xt.displayTime};Dt?(Dt.data=be,Dt.render()):(Dt=K._requestDataGrid.append(be,{selectable:!0}),j()(Dt.container).data("id",wt.requestId)),Xt.hasErr&&j()(Dt.container).addClass(Ht("request-error"))},Xt.render(),K._requests[wt.requestId]=Xt}}),(0,d.Z)((0,B.Z)(K),"_resReceivedExtraInfo",function(wt){var Dt=K._requests[wt.requestId];K._isRecording&&Dt&&(Dt.resHeaders=wt.headers,K._updateType(Dt),Dt.render())}),(0,d.Z)((0,B.Z)(K),"_resReceived",function(wt){var Dt=K._requests[wt.requestId];if(K._isRecording&&Dt){var Xt=wt.response,be=Xt.status,Se=Xt.headers;Dt.status=be,(be<200||be>=300)&&(Dt.hasErr=!0),Se&&(Dt.resHeaders=Se,K._updateType(Dt)),Dt.render()}}),(0,d.Z)((0,B.Z)(K),"_loadingFinished",function(wt){var Dt=K._requests[wt.requestId];if(K._isRecording&&Dt){var Xt=1e3*wt.timestamp;Dt.time=Xt-Dt.startTime,Dt.displayTime=Vn()(Dt.time),Dt.size=wt.encodedDataLength,Dt.done=!0,Dt.resTxt=Qt.domain("Network").getResponseBody({requestId:wt.requestId}).body,Dt.render()}}),(0,d.Z)((0,B.Z)(K),"_copyCurl",function(){var wt=K._selectedRequest;Cn()(function(Dt){var Xt=mi()();Xt==="windows"&&(Xt="win");var be=[],Se=es()(["accept-encoding","host","method","path","scheme","version"]),ei=Xt==="win"?function(an){var _r=/[\r\n]/.test(an)?'^"':'"';return _r+an.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/[^a-zA-Z0-9\s_\-:=+~'\/.',?;()*`&]/g,"^$&").replace(/%(?=[a-zA-Z0-9_])/g,"%^").replace(/\r?\n/g,`^

`)+_r}:function(an){return/[\0-\x1F\x7F-\x9F!]|\'/.test(an)?"$'"+an.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\0-\x1F\x7F-\x9F!]/g,function(_r){for(var Ar=_r.charCodeAt(0).toString(16);Ar.length<4;)Ar="0"+Ar;return"\\u"+Ar})+"'":"'"+an+"'"};be.push(ei(Dt.url()).replace(/[[{}\]]/g,"\\$&"));var ui="GET",Di=[],Wi=Dt.requestFormData();Wi&&(Di.push("--data-raw "+ei(Wi)),Se["content-length"]=!0,ui="POST"),Dt.requestMethod!==ui&&be.push("-X "+ei(Dt.requestMethod));for(var cs=Dt.requestHeaders(),gs=0;gs<cs.length;gs++){var bs=cs[gs],on=bs.name.replace(/^:/,"");Se[on.toLowerCase()]||be.push("-H "+ei(on+": "+bs.value))}return(be=be.concat(Di)).push("--compressed"),"curl "+be.join(be.length>=3?Xt==="win"?` ^
  `:` \\
  `:" ")}({requestMethod:wt.method,url:function(){return wt.url},requestFormData:function(){return wt.data},requestHeaders:function(){var Dt=wt.reqHeaders||{};return Zt()(Dt,{"User-Agent":navigator.userAgent,Referer:location.href}),me()(Dt,function(Xt,be){return{name:be,value:Xt}})}})),K._container.notify("Copied")}),(0,d.Z)((0,B.Z)(K),"_toggleRecording",function(){K._$control.find(Ht(".record")).toggleClass(Ht("recording")),K._isRecording=!K._isRecording}),(0,d.Z)((0,B.Z)(K),"_showDetail",function(){K._selectedRequest&&(K._splitMode&&K._$network.css("width","50%"),K._detail.show(K._selectedRequest))}),(0,d.Z)((0,B.Z)(K),"_updateScale",function(wt){K._splitMediaQuery.setQuery("screen and (min-width: ".concat(680*wt,"px)"))}),K._style=Gt(s(3180)),K.name="network",K._requests={},K._selectedRequest=null,K._isRecording=!0,K}return(0,I.Z)(Mt,[{key:"init",value:function(K,wt){(0,P.Z)((0,l.Z)(Mt.prototype),"init",this).call(this,K),this._container=wt,this._initTpl(),this._detail=new or(this._$detail,wt),this._splitMediaQuery=new(Ai())("screen and (min-width: 680px)"),this._splitMode=this._splitMediaQuery.isMatch(),this._requestDataGrid=new ie.Z(this._$requests.get(0),{columns:[{id:"name",title:"Name",sortable:!0,weight:30},{id:"method",title:"Method",sortable:!0,weight:14},{id:"status",title:"Status",sortable:!0,weight:14},{id:"type",title:"Type",sortable:!0,weight:14},{id:"size",title:"Size",sortable:!0,weight:14},{id:"time",title:"Time",sortable:!0,weight:14}]}),this._resizeSensor=new(oi())(K.get(0)),this._bindEvent()}},{key:"show",value:function(){(0,P.Z)((0,l.Z)(Mt.prototype),"show",this).call(this),this._updateDataGridHeight()}},{key:"clear",value:function(){this._requests={},this._requestDataGrid.clear()}},{key:"requests",value:function(){var K=[];return X()(this._requests,function(wt){K.push(wt)}),K}},{key:"_updateDataGridHeight",value:function(){var K=this._$el.offset().height-this._$control.offset().height;this._requestDataGrid.setOption({minHeight:K,maxHeight:K})}},{key:"_updateType",value:function(K){var wt=function(be){if(!be)return"unknown";var Se=be.split(";")[0].split("/");return{type:Se[0],subType:ii()(Se)}}(K.resHeaders["content-type"]||""),Dt=wt.type,Xt=wt.subType;K.type=Dt,K.subType=Xt}},{key:"_updateButtons",value:function(){var K=this._$control,wt=K.find(Ht(".show-detail")),Dt=K.find(Ht(".copy-curl")),Xt=Ht("icon-disabled");wt.addClass(Xt),Dt.addClass(Xt),this._selectedRequest&&(wt.rmClass(Xt),Dt.rmClass(Xt))}},{key:"_bindEvent",value:function(){var K=this,wt=this._$control,Dt=this._$filterText,Xt=this._requestDataGrid,be=this;wt.on("click",Ht(".clear-request"),function(){return K.clear()}).on("click",Ht(".show-detail"),this._showDetail).on("click",Ht(".copy-curl"),this._copyCurl).on("click",Ht(".record"),this._toggleRecording).on("click",Ht(".filter"),function(){Es.Z.prompt("Filter").then(function(ei){ve()(ei)||(Dt.text(ei),Xt.setOption("filter",Ui()(ei)))})}),Xt.on("select",function(ei){var ui=j()(ei.container).data("id"),Di=be._requests[ui];K._selectedRequest=Di,K._updateButtons(),K._splitMode&&K._showDetail()}),Xt.on("deselect",function(){K._selectedRequest=null,K._updateButtons(),K._detail.hide()}),this._resizeSensor.addListener(Cr()(function(){return K._updateDataGridHeight()},15)),this._splitMediaQuery.on("match",function(){K._detail.hide(),K._splitMode=!0}),this._splitMediaQuery.on("unmatch",function(){K._detail.hide(),K._splitMode=!1}),this._detail.on("hide",function(){K._splitMode&&K._$network.css("width","100%")}),Qt.domain("Network").enable();var Se=Qt.domain("Network");Se.on("requestWillBeSent",this._reqWillBeSent),Se.on("responseReceivedExtraInfo",this._resReceivedExtraInfo),Se.on("responseReceived",this._resReceived),Se.on("loadingFinished",this._loadingFinished),Q.on(Q.SCALE,this._updateScale)}},{key:"destroy",value:function(){(0,P.Z)((0,l.Z)(Mt.prototype),"destroy",this).call(this),this._resizeSensor.destroy(),Gt.remove(this._style),this._splitMediaQuery.removeAllListeners();var K=Qt.domain("Network");K.off("requestWillBeSent",this._reqWillBeSent),K.off("responseReceivedExtraInfo",this._resReceivedExtraInfo),K.off("responseReceived",this._resReceived),K.off("loadingFinished",this._loadingFinished),Q.off(Q.SCALE,this._updateScale)}},{key:"_initTpl",value:function(){var K=this._$el;K.html(Ht(`<div class="network">
        <div class="control">
          <span class="icon-record record recording"></span>
          <span class="icon-clear clear-request"></span>
          <span class="icon-eye icon-disabled show-detail"></span>
          <span class="icon-copy icon-disabled copy-curl"></span>
          <span class="filter-text"></span>
          <span class="icon-filter filter"></span>
        </div>
        <div class="requests"></div>
      </div>
      <div class="detail"></div>`)),this._$network=K.find(Ht(".network")),this._$detail=K.find(Ht(".detail")),this._$requests=K.find(Ht(".requests")),this._$control=K.find(Ht(".control")),this._$filterText=K.find(Ht(".filter-text"))}}]),Mt}(C),ts=s(9833),ss=s.n(ts),ls=s(9956),fi=s.n(ls),us=s(8209),Js=s(3063),_n=s.n(Js),xs=s(3487),Os=s.n(xs),$s=s(42),An=s.n($s),Zs=s(4696),Mn=s.n(Zs),cn=s(7653),sn=s.n(cn),Ln=s(8613),Fn=s.n(Ln),zi=s(2289),mn=s.n(zi),Jn=s(3629),lr=s.n(Jn);function Un(jt){for(var zt={},Mt=0,K=jt.length;Mt<K;Mt++){var wt=jt[Mt];jt[wt]!=="initial"&&(zt[wt]=jt[wt])}return function(Dt){return lr()(Dt,{comparator:function(Xt,be){for(var Se=Xt.length,ei=be.length,ui=Se>ei?ei:Se,Di=0;Di<ui;Di++){var Wi=zs(Xt.charCodeAt(Di),be.charCodeAt(Di));if(Wi!==0)return Wi}return Se>ei?1:Se<ei?-1:0}})}(zt)}var as=Element.prototype,Nn=function(){return!1};as.webkitMatchesSelector?Nn=function(jt,zt){return jt.webkitMatchesSelector(zt)}:as.mozMatchesSelector&&(Nn=function(jt,zt){return jt.mozMatchesSelector(zt)});var Ss=function(){function jt(zt){(0,x.Z)(this,jt),this._el=zt}return(0,I.Z)(jt,[{key:"getComputedStyle",value:function(){return Un(window.getComputedStyle(this._el))}},{key:"getMatchedCSSRules",value:function(){var zt=this,Mt=[];return X()(document.styleSheets,function(K){try{if(!K.cssRules)return}catch{return}X()(K.cssRules,function(wt){var Dt=!1;try{Dt=zt._elMatchesSel(wt.selectorText)}catch{}Dt&&Mt.push({selectorText:wt.selectorText,style:Un(wt.style)})})}),Mt}},{key:"_elMatchesSel",value:function(zt){return Nn(this._el,zt)}}]),jt}();function zs(jt,zt){return(jt=cr(jt))>(zt=cr(zt))?1:jt<zt?-1:0}function cr(jt){return jt===45?123:jt}var Tn=s(422);function Ns(jt){var zt=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).noAttr,Mt=zt!==void 0&&zt;if(jt.nodeType===Node.TEXT_NODE)return'<span class="'.concat(Ht("tag-name-color"),'">(text)</span>');if(jt.nodeType===Node.COMMENT_NODE)return'<span class="'.concat(Ht("tag-name-color"),'"><!--></span>');var K=jt.id,wt=jt.className,Dt=jt.attributes,Xt='<span class="eruda-tag-name-color">'.concat(jt.tagName.toLowerCase(),"</span>");if(K!==""&&(Xt+='<span class="eruda-function-color">#'.concat(K,"</span>")),$()(wt)){var be="";X()(wt.split(/\s+/g),function(Se){Se.trim()!==""&&(be+=".".concat(Se))}),Xt+='<span class="eruda-attribute-name-color">'.concat(be,"</span>")}return Mt||X()(Dt,function(Se){var ei=Se.name;ei!=="id"&&ei!=="class"&&ei!=="style"&&(Xt+=' <span class="eruda-attribute-name-color">'.concat(ei,'</span><span class="eruda-operator-color">="</span><span class="eruda-string-color">').concat(Se.value,'</span><span class="eruda-operator-color">"</span>'))}),Xt}var Hn=function(){function jt(zt,Mt){var K=this;(0,x.Z)(this,jt),(0,d.Z)(this,"hide",function(){K._$container.hide(),K._disableObserver(),Qt.domain("Overlay").hideHighlight()}),this._$container=zt,this._devtools=Mt,this._curEl=document.documentElement,this._bindEvent(),this._initObserver(),this._initCfg(),this._initTpl()}return(0,I.Z)(jt,[{key:"show",value:function(zt){this._curEl=zt,this._rmDefComputedStyle=!0,this._computedStyleSearchKeyword="",this._enableObserver(),this._render();var Mt=Qt.domain("DOM").getNodeId({node:zt}).nodeId;Qt.domain("Overlay").highlightNode({nodeId:Mt,highlightConfig:{showInfo:!0,contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)"}})}},{key:"destroy",value:function(){this._disableObserver(),this.restoreEventTarget(),this._rmCfg()}},{key:"overrideEventTarget",value:function(){var zt=Hi(),Mt=this._origAddEvent=zt.addEventListener,K=this._origRmEvent=zt.removeEventListener;zt.addEventListener=function(wt,Dt,Xt){(function(be,Se,ei){var ui=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(!(!ss()(be)||!Us()(ei)||!Mn()(ui))){var Di=be.erudaEvents=be.erudaEvents||{};Di[Se]=Di[Se]||[],Di[Se].push({listener:ei,listenerStr:ei.toString(),useCapture:ui})}})(this,wt,Dt,Xt),Mt.apply(this,arguments)},zt.removeEventListener=function(wt,Dt,Xt){(function(be,Se,ei){var ui=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(!(!ss()(be)||!Us()(ei)||!Mn()(ui))){var Di=be.erudaEvents;if(!(!Di||!Di[Se])){for(var Wi=Di[Se],cs=0,gs=Wi.length;cs<gs;cs++)if(Wi[cs].listener===ei){Wi.splice(cs,1);break}Wi.length===0&&delete Di[Se],kt()(Di).length===0&&delete be.erudaEvents}}})(this,wt,Dt,Xt),K.apply(this,arguments)}}},{key:"restoreEventTarget",value:function(){var zt=Hi();this._origAddEvent&&(zt.addEventListener=this._origAddEvent),this._origRmEvent&&(zt.removeEventListener=this._origRmEvent)}},{key:"_initTpl",value:function(){var zt=this._$container,Mt='<div class="'.concat(Ht("control"),`">
      <span class="`).concat(Ht("icon-arrow-left back"),`"></span>
      <span class="`).concat(Ht("element-name"),`"></span>
      <span class="`).concat(Ht("icon-refresh refresh"),`"></span>
    </div>
    <div class="`).concat(Ht("element"),`">
      <div class="`).concat(Ht("attributes section"),`"></div>
      <div class="`).concat(Ht("styles section"),`"></div>
      <div class="`).concat(Ht("computed-style section"),`"></div>
      <div class="`).concat(Ht("listeners section"),`"></div>
    </div>`);zt.html(Mt),this._$elementName=zt.find(Ht(".element-name")),this._$attributes=zt.find(Ht(".attributes")),this._$styles=zt.find(Ht(".styles")),this._$listeners=zt.find(Ht(".listeners")),this._$computedStyle=zt.find(Ht(".computed-style"));var K=Fn()("div");this._$boxModel=j()(K),this._boxModel=new Tn.Z(K)}},{key:"_toggleAllComputedStyle",value:function(){this._rmDefComputedStyle=!this._rmDefComputedStyle,this._render()}},{key:"_render",value:function(){var zt=this._getData(this._curEl),Mt=this._$attributes,K=this._$elementName,wt=this._$styles,Dt=this._$computedStyle,Xt=this._$listeners;K.html(zt.name);var be="<tr><td>Empty</td></tr>";Fs()(zt.attributes)||(be=me()(zt.attributes,function(cs){var gs=cs.name,bs=cs.value;return`<tr>
          <td class="`.concat(Ht("attribute-name-color"),'">').concat(is()(gs),`</td>
          <td class="`).concat(Ht("string-color"),'">').concat(bs,`</td>
        </tr>`)}).join("")),be=`<h2>Attributes</h2>
    <div class="`.concat(Ht("table-wrapper"),`">
      <table>
        <tbody>
          `).concat(be,` 
        </tbody>
      </table>
    </div>`),Mt.html(be);var Se="";if(Fs()(zt.styles))wt.hide();else{var ei=me()(zt.styles,function(cs){var gs=cs.selectorText,bs=cs.style;return bs=me()(bs,function(on,an){return'<div class="'.concat(Ht("rule"),'"><span>').concat(is()(an),"</span>: ").concat(on,";</div>")}).join(""),'<div class="'.concat(Ht("style-rules"),`">
          <div>`).concat(is()(gs),` {</div>
            `).concat(bs,`
          <div>}</div>
        </div>`)}).join("");Se=`<h2>Styles</h2>
      <div class="`.concat(Ht("style-wrapper"),`">
        `).concat(ei,`
      </div>`),wt.html(Se).show()}var ui="";if(zt.computedStyle){var Di=Ht(`<div class="btn toggle-all-computed-style">
        <span class="icon-expand"></span>
      </div>`);zt.rmDefComputedStyle&&(Di=Ht(`<div class="btn toggle-all-computed-style">
          <span class="icon-compress"></span>
        </div>`)),ui=`<h2>
        Computed Style
        `.concat(Di,`
        <div class="`).concat(Ht("btn computed-style-search"),`">
          <span class="`).concat(Ht("icon-filter"),`"></span>
        </div>
        `).concat(zt.computedStyleSearchKeyword?'<div class="'.concat(Ht("btn filter-text"),'">').concat(is()(zt.computedStyleSearchKeyword),"</div>"):"",`
      </h2>
      <div class="`).concat(Ht("box-model"),`"></div>
      <div class="`).concat(Ht("table-wrapper"),`">
        <table>
          <tbody>
          `).concat(me()(zt.computedStyle,function(cs,gs){return`<tr>
              <td class="`.concat(Ht("key"),'">').concat(is()(gs),`</td>
              <td>`).concat(cs,`</td>
            </tr>`)}).join(""),`
          </tbody>
        </table>
      </div>`),Dt.html(ui).show(),this._boxModel.setOption("element",this._curEl),Dt.find(Ht(".box-model")).append(this._$boxModel.get(0))}else Dt.text("").hide();var Wi="";zt.listeners?(Wi=me()(zt.listeners,function(cs,gs){return cs=me()(cs,function(bs){var on=bs.useCapture,an=bs.listenerStr;return"<li ".concat(on?'class="'.concat(Ht("capture"),'"'):"",">").concat(is()(an),"</li>")}).join(""),'<div class="'.concat(Ht("listener"),`">
          <div class="`).concat(Ht("listener-type"),'">').concat(is()(gs),`</div>
          <ul class="`).concat(Ht("listener-content"),`">
            `).concat(cs,`
          </ul>
        </div>`)}).join(""),Wi=`<h2>Event Listeners</h2>
      <div class="`.concat(Ht("listener-wrapper"),`">
        `).concat(Wi,` 
      </div>`),Xt.html(Wi).show()):Xt.hide(),this._$container.show()}},{key:"_getData",value:function(zt){var Mt={},K=new Ss(zt),wt=zt.className,Dt=zt.id,Xt=zt.attributes,be=zt.tagName;Mt.computedStyleSearchKeyword=this._computedStyleSearchKeyword,Mt.attributes=En(Xt),Mt.name=Ns({tagName:be,id:Dt,className:wt,attributes:Xt});var Se=zt.erudaEvents;if(Se&&kt()(Se).length!==0&&(Mt.listeners=Se),Cs(be))return Mt;var ei=K.getComputedStyle(),ui=K.getMatchedCSSRules();ui.unshift(function(Wi){for(var cs={selectorText:"element.style",style:{}},gs=0,bs=Wi.length;gs<bs;gs++){var on=Wi[gs];cs.style[on]=Wi[on]}return cs}(zt.style)),ui.forEach(function(Wi){return kr(Wi.style)}),Mt.styles=ui,this._rmDefComputedStyle&&(ei=function(Wi,cs){var gs={},bs=["display","width","height"];return X()(cs,function(on){bs=bs.concat(kt()(on.style))}),bs=An()(bs),X()(Wi,function(on,an){_t()(bs,an)&&(gs[an]=on)}),gs}(ei,ui)),Mt.rmDefComputedStyle=this._rmDefComputedStyle;var Di=_n()(Mt.computedStyleSearchKeyword);return Di&&(ei=Os()(ei,function(Wi,cs){return _t()(cs,Di)||_t()(Wi,Di)})),kr(ei),Mt.computedStyle=ei,Mt}},{key:"_bindEvent",value:function(){var zt=this,Mt=this._devtools;this._$container.on("click",Ht(".toggle-all-computed-style"),function(){return zt._toggleAllComputedStyle()}).on("click",Ht(".computed-style-search"),function(){Es.Z.prompt("Filter").then(function(K){ve()(K)||(K=Ui()(K),zt._computedStyleSearchKeyword=K,zt._render())})}).on("click",".eruda-listener-content",function(){var K=j()(this).text(),wt=Mt.get("sources");wt&&(wt.set("js",K),Mt.showTool("sources"))}).on("click",Ht(".element-name"),function(){var K=Mt.get("sources");K&&(K.set("object",zt._curEl),Mt.showTool("sources"))}).on("click",Ht(".back"),this.hide).on("click",Ht(".refresh"),function(){zt._render(),Mt.notify("Refreshed")})}},{key:"_initObserver",value:function(){var zt=this;this._observer=new(mn())(function(Mt){X()(Mt,function(K){return zt._handleMutation(K)})})}},{key:"_enableObserver",value:function(){this._observer.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}},{key:"_handleMutation",value:function(zt){if(!Re(zt.target)&&zt.type==="attributes"){if(zt.target!==this._curEl)return;this._render()}}},{key:"_rmCfg",value:function(){var zt=this.config,Mt=this._devtools.get("settings");Mt&&Mt.remove(zt,"overrideEventTarget").remove(zt,"observeElement").remove("Elements")}},{key:"_initCfg",value:function(){var zt=this,Mt=this.config=ge.createCfg("elements",{overrideEventTarget:!0});Mt.get("overrideEventTarget")&&this.overrideEventTarget(),Mt.on("change",function(wt,Dt){if(wt==="overrideEventTarget")return Dt?zt.overrideEventTarget():zt.restoreEventTarget()});var K=this._devtools.get("settings");K&&(K.text("Elements").switch(Mt,"overrideEventTarget","Catch Event Listeners"),K.separator())}}]),jt}();function kr(jt){X()(jt,function(zt,Mt){return jt[Mt]=Qs(zt)})}var En=function(jt){return me()(jt,function(zt){var Mt=zt.value,K=zt.name;return Mt=is()(Mt),(K==="src"||K==="href")&&!ws()(Mt,"data")&&(Mt=Ws(Mt)),K==="style"&&(Mt=Qs(Mt)),{name:K,value:Mt}})},nn=/rgba?\((.*?)\)/g,Ds=/url\("?(.*?)"?\)/g;function Qs(jt){return(jt=xt()(jt)).replace(nn,'<span class="eruda-style-color" style="background-color: $&"></span>$&').replace(Ds,function(zt,Mt){return'url("'.concat(Ws(Mt),'")')})}var Gs=["script","style","meta","title","link","head"],Cs=function(jt){return Gs.indexOf(jt.toLowerCase())>-1},Ws=function(jt){return'<a href="'.concat(jt,'" target="_blank">').concat(jt,"</a>")},Hi=function(){return sn()(window,"EventTarget.prototype")||window.Node.prototype};function ko(jt){var zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Mt,K=(0,l.Z)(jt);if(zt){var wt=(0,l.Z)(this).constructor;Mt=Reflect.construct(K,arguments,wt)}else Mt=K.apply(this,arguments);return(0,N.Z)(this,Mt)}}var Bo=function(jt){(0,H.Z)(Mt,jt);var zt=ko(Mt);function Mt(){var K;return(0,x.Z)(this,Mt),K=zt.call(this),(0,d.Z)((0,B.Z)(K),"_showDetail",function(){K._isShow&&K._curNode&&(K._curNode.nodeType===Node.ELEMENT_NODE?K._detail.show(K._curNode):K._detail.show(K._curNode.parentNode))}),(0,d.Z)((0,B.Z)(K),"_back",function(){if(K._curNode!==K._htmlEl){for(var wt=K._curParentQueue,Dt=wt.shift();!oo(Dt);)Dt=wt.shift();K.set(Dt)}}),(0,d.Z)((0,B.Z)(K),"_updateScale",function(wt){K._splitMediaQuery.setQuery("screen and (min-width: ".concat(680*wt,"px)"))}),(0,d.Z)((0,B.Z)(K),"_deleteNode",function(){var wt=K._curNode;wt.parentNode&&wt.parentNode.removeChild(wt)}),(0,d.Z)((0,B.Z)(K),"_copyNode",function(){var wt=K._curNode;wt.nodeType===Node.ELEMENT_NODE?Cn()(wt.outerHTML):Cn()(wt.nodeValue),K._container.notify("Copied")}),(0,d.Z)((0,B.Z)(K),"_toggleSelect",function(){K._$el.find(Ht(".select")).toggleClass(Ht("active")),K._selectElement=!K._selectElement,K._selectElement?(Qt.domain("Overlay").setInspectMode({mode:"searchForNode",highlightConfig:{showInfo:!fi()(),showRulers:!1,showAccessibilityInfo:!fi()(),showExtensionLines:!1,contrastAlgorithm:"aa",contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)"}}),K._container.hide()):(Qt.domain("Overlay").setInspectMode({mode:"none"}),Qt.domain("Overlay").hideHighlight())}),(0,d.Z)((0,B.Z)(K),"_inspectNodeRequested",function(wt){var Dt=wt.backendNodeId;K._container.show(),K._toggleSelect();var Xt=Qt.domain("DOM").getNode({nodeId:Dt}).node;K.select(Xt)}),(0,d.Z)((0,B.Z)(K),"_setNode",function(wt){if(wt!==K._curNode){K._curNode=wt,K._renderCrumbs();for(var Dt=[],Xt=wt.parentNode;Xt;)Dt.push(Xt),Xt=Xt.parentNode;K._curParentQueue=Dt,K._splitMode&&K._showDetail(),K._updateButtons(),K._updateHistory()}}),K._style=Gt(s(5896)),K.name="elements",K._selectElement=!1,K._observeElement=!0,K._history=[],T().mixin((0,B.Z)(K)),K}return(0,I.Z)(Mt,[{key:"init",value:function(K,wt){var Dt=this;(0,P.Z)((0,l.Z)(Mt.prototype),"init",this).call(this,K),this._container=wt,this._initTpl(),this._htmlEl=document.documentElement,this._detail=new Hn(this._$detail,wt),this.config=this._detail.config,this._splitMediaQuery=new(Ai())("screen and (min-width: 680px)"),this._splitMode=this._splitMediaQuery.isMatch(),this._domViewer=new us.Z(this._$domViewer.get(0),{node:this._htmlEl,ignore:function(Xt){return Re(Xt)||si(Xt)}}),this._domViewer.expand(),this._bindEvent(),Qt.domain("Overlay").enable(),Ie()(function(){return Dt._updateHistory()})}},{key:"show",value:function(){(0,P.Z)((0,l.Z)(Mt.prototype),"show",this).call(this),this._isShow=!0,this._curNode?this._splitMode&&this._showDetail():this.select(document.body)}},{key:"hide",value:function(){(0,P.Z)((0,l.Z)(Mt.prototype),"hide",this).call(this),this._isShow=!1,Qt.domain("Overlay").hideHighlight()}},{key:"set",value:function(K){return this.select(K)}},{key:"select",value:function(K){return this._domViewer.select(K),this._setNode(K),this.emit("change",K),this}},{key:"destroy",value:function(){(0,P.Z)((0,l.Z)(Mt.prototype),"destroy",this).call(this),Q.off(Q.SCALE,this._updateScale),Gt.remove(this._style),this._detail.destroy(),Qt.domain("Overlay").off("inspectNodeRequested",this._inspectNodeRequested),Qt.domain("Overlay").disable(),this._splitMediaQuery.removeAllListeners()}},{key:"_updateButtons",value:function(){var K=this._$control,wt=K.find(Ht(".show-detail")),Dt=K.find(Ht(".copy-node")),Xt=K.find(Ht(".delete-node")),be=Ht("icon-disabled");wt.addClass(be),Dt.addClass(be),Xt.addClass(be);var Se=this._curNode;Se&&(Se!==document.documentElement&&Se!==document.body&&Xt.rmClass(be),Dt.rmClass(be),Se.nodeType===Node.ELEMENT_NODE&&wt.rmClass(be))}},{key:"_initTpl",value:function(){var K=this._$el;K.html(Ht(`<div class="elements">
        <div class="control">
          <span class="icon icon-select select"></span>
          <span class="icon icon-eye show-detail"></span>
          <span class="icon icon-copy copy-node"></span>
          <span class="icon icon-delete delete-node"></span>
        </div>
        <div class="dom-viewer-container">
          <div class="dom-viewer"></div>
        </div>
        <div class="crumbs"></div>
      </div>
      <div class="detail"></div>`)),this._$detail=K.find(Ht(".detail")),this._$domViewer=K.find(Ht(".dom-viewer")),this._$control=K.find(Ht(".control")),this._$crumbs=K.find(Ht(".crumbs"))}},{key:"_renderCrumbs",value:function(){var K=function(Dt){for(var Xt=[],be=0;Dt;)Xt.push({text:Ns(Dt,{noAttr:!0}),idx:be++}),Dt=Dt.parentElement;return Xt.reverse()}(this._curNode),wt="";Fs()(K)||(wt=me()(K,function(Dt){var Xt=Dt.text,be=Dt.idx;return'<li class="'.concat(Ht("crumb"),'" data-idx="').concat(be,'">').concat(Xt,"</div></li>")}).join("")),this._$crumbs.html(wt)}},{key:"_bindEvent",value:function(){var K=this,wt=this;this._$el.on("click",Ht(".crumb"),function(){for(var Dt=Oi()(j()(this).data("idx")),Xt=wt._curNode;Dt--&&Xt.parentElement;)Xt=Xt.parentElement;oo(Xt)&&wt.select(Xt)}),this._$control.on("click",Ht(".select"),this._toggleSelect).on("click",Ht(".show-detail"),this._showDetail).on("click",Ht(".copy-node"),this._copyNode).on("click",Ht(".delete-node"),this._deleteNode),this._domViewer.on("select",this._setNode).on("deselect",this._back),Qt.domain("Overlay").on("inspectNodeRequested",this._inspectNodeRequested),this._splitMediaQuery.on("match",function(){K._splitMode=!0,K._showDetail()}),this._splitMediaQuery.on("unmatch",function(){K._splitMode=!1,K._detail.hide()}),Q.on(Q.SCALE,this._updateScale)}},{key:"_updateHistory",value:function(){var K=this._container.get("console");if(K){var wt=this._history;wt.unshift(this._curNode),wt.length>5&&wt.pop();for(var Dt=0;Dt<5;Dt++)K.setGlobal("$".concat(Dt),wt[Dt])}}}]),Mt}(C),oo=function(jt){return ss()(jt)&&jt.parentNode},So=s(8847),To=s.n(So),js=s(9622),hr=s.n(js),rn=null,Do=[{name:"Border All",fn:function(){if(rn)return Gt.remove(rn),void(rn=null);rn=Gt("* { outline: 2px dashed #707d8b; outline-offset: -3px; }",document.head)},desc:"Add color borders to all elements"},{name:"Refresh Page",fn:function(){var jt=new(yi());jt.setQuery("timestamp",To()()),window.location.replace(jt.toString())},desc:"Add timestamp to url and refresh"},{name:"Search Text",fn:function(){Es.Z.prompt("Enter the text").then(function(jt){jt&&Ui()(jt)!==""&&function(zt){var Mt=document.body,K=new RegExp(zt,"ig");vn(Mt,function(wt){var Dt=j()(wt);if(Dt.hasClass("eruda-search-highlight-block"))return document.createTextNode(Dt.text())}),vn(Mt,function(wt){if(wt.nodeType===3){var Dt=wt.nodeValue;if((Dt=Dt.replace(K,function(be){return'<span class="eruda-keyword">'.concat(be,"</span>")}))!==wt.nodeValue){var Xt=j()(document.createElement("div"));return Xt.html(Dt),Xt.addClass("eruda-search-highlight-block"),Xt.get(0)}}})}(jt)})},desc:"Highlight given text on page"},{name:"Edit Page",fn:function(){var jt=document.body;jt.contentEditable=jt.contentEditable!=="true"},desc:"Toggle body contentEditable"},{name:"Fit Screen",fn:function(){var jt=document.body,zt=document.documentElement,Mt=j()(jt);if(Mt.data("scaled"))window.scrollTo(0,+Mt.data("scaled")),Mt.rmAttr("data-scaled"),Mt.css("transform","none");else{var K=Math.max(jt.scrollHeight,jt.offsetHeight,zt.clientHeight,zt.scrollHeight,zt.offsetHeight),wt=Math.max(document.documentElement.clientHeight,window.innerHeight||0),Dt=wt/K;Mt.css("transform","scale(".concat(Dt,")")),Mt.data("scaled",window.scrollY),window.scrollTo(0,K/2-wt/2)}},desc:"Scale down the whole page to fit screen"},{name:"Load Monitor Plugin",fn:function(){hn("monitor")},desc:"Display page fps and memory"},{name:"Load Features Plugin",fn:function(){hn("features")},desc:"Browser feature detections"},{name:"Load Timing Plugin",fn:function(){hn("timing")},desc:"Show performance and resource timing"},{name:"Load Code Plugin",fn:function(){hn("code")},desc:"Edit and run JavaScript"},{name:"Load Benchmark Plugin",fn:function(){hn("benchmark")},desc:"Run JavaScript benchmarks"},{name:"Load Geolocation Plugin",fn:function(){hn("geolocation")},desc:"Test geolocation"},{name:"Load Orientation Plugin",fn:function(){hn("orientation")},desc:"Test orientation api"},{name:"Load Touches Plugin",fn:function(){hn("touches")},desc:"Visualize screen touches"}];function vn(jt,zt){var Mt=jt.childNodes;if(!Re(jt)){for(var K=0,wt=Mt.length;K<wt;K++){var Dt=vn(Mt[K],zt);Dt&&jt.replaceChild(Dt,Mt[K])}return zt(jt)}}function hn(jt){var zt="eruda"+Pt()(jt);if(!window[zt]){var Mt=location.protocol;ws()(Mt,"http")||(Mt="http:"),hr()("".concat(Mt,"//cdn.jsdelivr.net/npm/eruda-").concat(jt,"@").concat(Yr[jt]),function(K){if(!K||!window[zt])return Gi.error("Fail to load plugin "+jt);Q.emit(Q.ADD,window[zt]),Q.emit(Q.SHOW,jt)})}}Gt(s(7346),document.head);var Yr={monitor:"1.0.0",features:"2.0.0",timing:"2.0.1",code:"2.1.0",benchmark:"2.0.1",geolocation:"2.0.0",dom:"2.0.0",orientation:"2.0.0",touches:"2.0.0"},Ms=s(5852),dr=s.n(Ms);function Br(jt){var zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Mt,K=(0,l.Z)(jt);if(zt){var wt=(0,l.Z)(this).constructor;Mt=Reflect.construct(K,arguments,wt)}else Mt=K.apply(this,arguments);return(0,N.Z)(this,Mt)}}var Dn=function(jt){(0,H.Z)(Mt,jt);var zt=Br(Mt);function Mt(){var K;return(0,x.Z)(this,Mt),(K=zt.call(this))._style=Gt(s(5571)),K.name="snippets",K._snippets=[],K}return(0,I.Z)(Mt,[{key:"init",value:function(K){(0,P.Z)((0,l.Z)(Mt.prototype),"init",this).call(this,K),this._bindEvent(),this._addDefSnippets()}},{key:"destroy",value:function(){(0,P.Z)((0,l.Z)(Mt.prototype),"destroy",this).call(this),Gt.remove(this._style)}},{key:"add",value:function(K,wt,Dt){return this._snippets.push({name:K,fn:wt,desc:Dt}),this._render(),this}},{key:"remove",value:function(K){return dr()(this._snippets,function(wt){return wt.name===K}),this._render(),this}},{key:"run",value:function(K){for(var wt=this._snippets,Dt=0,Xt=wt.length;Dt<Xt;Dt++)wt[Dt].name===K&&this._run(Dt);return this}},{key:"clear",value:function(){return this._snippets=[],this._render(),this}},{key:"_bindEvent",value:function(){var K=this;this._$el.on("click",".eruda-run",function(){var wt=j()(this).data("idx");K._run(wt)})}},{key:"_run",value:function(K){this._snippets[K].fn.call(null)}},{key:"_addDefSnippets",value:function(){var K=this;X()(Do,function(wt){K.add(wt.name,wt.fn,wt.desc)})}},{key:"_render",value:function(){var K=me()(this._snippets,function(wt,Dt){return'<div class="'.concat(Ht("section run"),'" data-idx="').concat(Dt,`">
        <h2 class="`).concat(Ht("name"),'">').concat(is()(wt.name),`
          <div class="`).concat(Ht("btn"),`">
            <span class="`).concat(Ht("icon-play"),`"></span>
          </div>
        </h2>
        <div class="`).concat(Ht("description"),`">
          `).concat(is()(wt.desc),`
        </div>
      </div>`)}).join("");this._renderHtml(K)}},{key:"_renderHtml",value:function(K){K!==this._lastHtml&&(this._lastHtml=K,this._$el.html(K))}}]),Mt}(C),As=s(4224),ao=s.n(As),lo=s(8991),Vr=s.n(lo),co=s(1352),Sr=s.n(co),dn=s(8099),ho=s.n(dn),Jr=function(){function jt(zt,Mt,K,wt){var Dt=this;(0,x.Z)(this,jt),(0,d.Z)(this,"_updateGridHeight",function(Xt){Dt._dataGrid.setOption({minHeight:60*Xt,maxHeight:223*Xt})}),this._type=wt,this._$container=zt,this._devtools=Mt,this._resources=K,this._selectedItem=null,this._storeData=[],this._initTpl(),this._dataGrid=new ie.Z(this._$dataGrid.get(0),{columns:[{id:"key",title:"Key",weight:30},{id:"value",title:"Value",weight:90}],minHeight:60,maxHeight:223}),this._bindEvent()}return(0,I.Z)(jt,[{key:"destroy",value:function(){Q.off(Q.SCALE,this._updateGridHeight)}},{key:"refresh",value:function(){var zt=this._dataGrid;this._refreshStorage(),zt.clear(),X()(this._storeData,function(Mt){var K=Mt.key,wt=Mt.val;zt.append({key:K,value:wt},{selectable:!0})})}},{key:"_refreshStorage",value:function(){var zt=this._resources,Mt=ji(this._type,!1);if(Mt){var K=[];Mt=JSON.parse(JSON.stringify(Mt)),X()(Mt,function(wt,Dt){$()(wt)&&(zt.config.get("hideErudaSetting")&&(ws()(Dt,"eruda")||Dt==="active-eruda")||K.push({key:Dt,val:Pn()(wt,200)}))}),this._storeData=K}}},{key:"_updateButtons",value:function(){var zt=this._$container,Mt=zt.find(Ht(".show-detail")),K=zt.find(Ht(".delete-storage")),wt=zt.find(Ht(".copy-storage")),Dt=Ht("btn-disabled");Mt.addClass(Dt),K.addClass(Dt),wt.addClass(Dt),this._selectedItem&&(Mt.rmClass(Dt),K.rmClass(Dt),wt.rmClass(Dt))}},{key:"_initTpl",value:function(){var zt=this._$container,Mt=this._type;zt.html(Ht(`<h2 class="title">
      `.concat(Mt==="local"?"Local":"Session",` Storage
      <div class="btn refresh-storage">
        <span class="icon icon-refresh"></span>
      </div>
      <div class="btn show-detail btn-disabled">
        <span class="icon icon-eye"></span>
      </div>
      <div class="btn copy-storage btn-disabled">
        <span class="icon icon-copy"></span>
      </div>
      <div class="btn delete-storage btn-disabled">
        <span class="icon icon-delete"></span>
      </div>
      <div class="btn clear-storage">
        <span class="icon icon-clear"></span>
      </div>
      <div class="btn filter">
        <span class="icon icon-filter"></span>
      </div>
      <div class="btn filter-text"></div>
    </h2>
    <div class="data-grid"></div>`))),this._$dataGrid=zt.find(Ht(".data-grid")),this._$filterText=zt.find(Ht(".filter-text"))}},{key:"_getVal",value:function(zt){return this._type==="local"?localStorage.getItem(zt):sessionStorage.getItem(zt)}},{key:"_bindEvent",value:function(){var zt=this,Mt=this._type,K=this._devtools;function wt(Dt,Xt){var be=K.get("sources");if(be)return be.set(Dt,Xt),K.showTool("sources"),!0}this._$container.on("click",Ht(".refresh-storage"),function(){K.notify("Refreshed"),zt.refresh()}).on("click",Ht(".clear-storage"),function(){X()(zt._storeData,function(Dt){Mt==="local"?localStorage.removeItem(Dt.key):sessionStorage.removeItem(Dt.key)}),zt.refresh()}).on("click",Ht(".show-detail"),function(){var Dt=zt._selectedItem,Xt=zt._getVal(Dt);try{wt("object",JSON.parse(Xt))}catch{wt("raw",Xt)}}).on("click",Ht(".copy-storage"),function(){var Dt=zt._selectedItem;Cn()(zt._getVal(Dt)),K.notify("Copied")}).on("click",Ht(".filter"),function(){Es.Z.prompt("Filter").then(function(Dt){ve()(Dt)||(Dt=Ui()(Dt),zt._$filterText.text(Dt),zt._dataGrid.setOption("filter",Dt))})}).on("click",Ht(".delete-storage"),function(){var Dt=zt._selectedItem;Mt==="local"?localStorage.removeItem(Dt):sessionStorage.removeItem(Dt),zt.refresh()}),this._dataGrid.on("select",function(Dt){zt._selectedItem=Dt.data.key,zt._updateButtons()}).on("deselect",function(){zt._selectedItem=null,zt._updateButtons()}),Q.on(Q.SCALE,this._updateGridHeight)}}]),jt}();function ur(jt,zt){jt.rmClass(Ht("ok")).rmClass(Ht("danger")).rmClass(Ht("warn")).addClass(Ht(zt))}function pr(jt,zt){if(zt===0)return"";var Mt=0,K=0;switch(jt){case"cookie":Mt=30,K=60;break;case"script":Mt=5,K=10;break;case"stylesheet":Mt=4,K=8;break;case"image":Mt=50,K=100}return zt>=K?"danger":zt>=Mt?"warn":"ok"}var uo=function(){function jt(zt,Mt){(0,x.Z)(this,jt),this._$container=zt,this._devtools=Mt,this._selectedItem=null,this._initTpl(),this._dataGrid=new ie.Z(this._$dataGrid.get(0),{columns:[{id:"key",title:"Key",weight:30},{id:"value",title:"Value",weight:90}],minHeight:60,maxHeight:223}),this._bindEvent()}return(0,I.Z)(jt,[{key:"refresh",value:function(){var zt=this._$container,Mt=this._dataGrid,K=Qt.domain("Network").getCookies().cookies,wt=me()(K,function(Dt){return{key:Dt.name,val:Dt.value}});Mt.clear(),X()(wt,function(Dt){var Xt=Dt.key,be=Dt.val;Mt.append({key:Xt,value:be},{selectable:!0})}),ur(zt,pr("cookie",wt.length))}},{key:"_initTpl",value:function(){var zt=this._$container;zt.html(Ht(`<h2 class="title">
      Cookie
      <div class="btn refresh-cookie">
        <span class="icon-refresh"></span>
      </div>
      <div class="btn show-detail btn-disabled">
        <span class="icon icon-eye"></span>
      </div>
      <div class="btn copy-cookie btn-disabled">
        <span class="icon icon-copy"></span>
      </div>
      <div class="btn delete-cookie btn-disabled">
        <span class="icon icon-delete"></span>
      </div>
      <div class="btn clear-cookie">
        <span class="icon-clear"></span>
      </div>
      <div class="btn filter" data-type="cookie">
        <span class="icon-filter"></span>
      </div>
      <div class="btn filter-text"></div>
    </h2>
    <div class="data-grid"></div>`)),this._$dataGrid=zt.find(Ht(".data-grid")),this._$filterText=zt.find(Ht(".filter-text"))}},{key:"_updateButtons",value:function(){var zt=this._$container,Mt=zt.find(Ht(".show-detail")),K=zt.find(Ht(".delete-cookie")),wt=zt.find(Ht(".copy-cookie")),Dt=Ht("btn-disabled");Mt.addClass(Dt),K.addClass(Dt),wt.addClass(Dt),this._selectedItem&&(Mt.rmClass(Dt),K.rmClass(Dt),wt.rmClass(Dt))}},{key:"_getVal",value:function(zt){for(var Mt=Qt.domain("Network").getCookies().cookies,K=0,wt=Mt.length;K<wt;K++)if(Mt[K].name===zt)return Mt[K].value;return""}},{key:"_bindEvent",value:function(){var zt=this,Mt=this._devtools;function K(wt,Dt){var Xt=Mt.get("sources");if(Xt)return Xt.set(wt,Dt),Mt.showTool("sources"),!0}this._$container.on("click",Ht(".refresh-cookie"),function(){Mt.notify("Refreshed"),zt.refresh()}).on("click",Ht(".clear-cookie"),function(){Qt.domain("Storage").clearDataForOrigin({storageTypes:"cookies"}),zt.refresh()}).on("click",Ht(".delete-cookie"),function(){var wt=zt._selectedItem;Qt.domain("Network").deleteCookies({name:wt}),zt.refresh()}).on("click",Ht(".show-detail"),function(){var wt=zt._selectedItem,Dt=zt._getVal(wt);try{K("object",JSON.parse(Dt))}catch{K("raw",Dt)}}).on("click",Ht(".copy-cookie"),function(){var wt=zt._selectedItem;Cn()(zt._getVal(wt)),Mt.notify("Copied")}).on("click",Ht(".filter"),function(){Es.Z.prompt("Filter").then(function(wt){ve()(wt)||(wt=Ui()(wt),zt._filter=wt,zt._$filterText.text(wt),zt._dataGrid.setOption("filter",wt))})}),this._dataGrid.on("select",function(wt){zt._selectedItem=wt.data.key,zt._updateButtons()}).on("deselect",function(){zt._selectedItem=null,zt._updateButtons()})}}]),jt}();function po(jt,zt){var Mt=typeof Symbol<"u"&&jt[Symbol.iterator]||jt["@@iterator"];if(!Mt){if(Array.isArray(jt)||(Mt=function(Se,ei){if(Se){if(typeof Se=="string")return $r(Se,ei);var ui=Object.prototype.toString.call(Se).slice(8,-1);if(ui==="Object"&&Se.constructor&&(ui=Se.constructor.name),ui==="Map"||ui==="Set")return Array.from(Se);if(ui==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ui))return $r(Se,ei)}}(jt))||zt){Mt&&(jt=Mt);var K=0,wt=function(){};return{s:wt,n:function(){return K>=jt.length?{done:!0}:{done:!1,value:jt[K++]}},e:function(Se){throw Se},f:wt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Dt,Xt=!0,be=!1;return{s:function(){Mt=Mt.call(jt)},n:function(){var Se=Mt.next();return Xt=Se.done,Se},e:function(Se){be=!0,Dt=Se},f:function(){try{Xt||Mt.return==null||Mt.return()}finally{if(be)throw Dt}}}}function $r(jt,zt){(zt==null||zt>jt.length)&&(zt=jt.length);for(var Mt=0,K=new Array(zt);Mt<zt;Mt++)K[Mt]=jt[Mt];return K}function fo(jt){var zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Mt,K=(0,l.Z)(jt);if(zt){var wt=(0,l.Z)(this).constructor;Mt=Reflect.construct(K,arguments,wt)}else Mt=K.apply(this,arguments);return(0,N.Z)(this,Mt)}}var go=function(jt){(0,H.Z)(Mt,jt);var zt=fo(Mt);function Mt(){var K;return(0,x.Z)(this,Mt),(K=zt.call(this))._style=Gt(s(2488)),K.name="resources",K._hideErudaSetting=!1,K._observeElement=!0,K}return(0,I.Z)(Mt,[{key:"init",value:function(K,wt){(0,P.Z)((0,l.Z)(Mt.prototype),"init",this).call(this,K),this._container=wt,this._initTpl(),this._localStorage=new Jr(this._$localStorage,wt,this,"local"),this._sessionStorage=new Jr(this._$sessionStorage,wt,this,"session"),this._cookie=new uo(this._$cookie,wt),this._bindEvent(),this._initObserver(),this._initCfg()}},{key:"refresh",value:function(){return this.refreshLocalStorage().refreshSessionStorage().refreshCookie().refreshScript().refreshStylesheet().refreshIframe().refreshImage()}},{key:"destroy",value:function(){(0,P.Z)((0,l.Z)(Mt.prototype),"destroy",this).call(this),this._localStorage.destroy(),this._sessionStorage.destroy(),this._disableObserver(),Gt.remove(this._style),this._rmCfg()}},{key:"refreshScript",value:function(){var K=[];j()("script").each(function(){var Se=this.src;Se!==""&&K.push(Se)});var wt=pr("script",(K=An()(K)).length),Dt="<li>Empty</li>";Fs()(K)||(Dt=me()(K,function(Se){return Se=is()(Se),'<li><a href="'.concat(Se,'" target="_blank" class="').concat(Ht("js-link"),'">').concat(Se,"</a></li>")}).join(""));var Xt='<h2 class="'.concat(Ht("title"),`">
      Script
      <div class="`).concat(Ht("btn refresh-script"),`">
        <span class="`).concat(Ht("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(Ht("link-list"),`">
      `).concat(Dt,`
    </ul>`),be=this._$script;return ur(be,wt),be.html(Xt),this}},{key:"refreshStylesheet",value:function(){var K=[];j()("link").each(function(){this.rel==="stylesheet"&&K.push(this.href)});var wt=pr("stylesheet",(K=An()(K)).length),Dt="<li>Empty</li>";Fs()(K)||(Dt=me()(K,function(Se){return Se=is()(Se),' <li><a href="'.concat(Se,'" target="_blank" class="').concat(Ht("css-link"),'">').concat(Se,"</a></li>")}).join(""));var Xt='<h2 class="'.concat(Ht("title"),`">
      Stylesheet
      <div class="`).concat(Ht("btn refresh-stylesheet"),`">
        <span class="`).concat(Ht("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(Ht("link-list"),`">
      `).concat(Dt,`
    </ul>`),be=this._$stylesheet;return ur(be,wt),be.html(Xt),this}},{key:"refreshIframe",value:function(){var K=[];j()("iframe").each(function(){var Xt=j()(this).attr("src");Xt&&K.push(Xt)}),K=An()(K);var wt="<li>Empty</li>";Fs()(K)||(wt=me()(K,function(Xt){return Xt=is()(Xt),'<li><a href="'.concat(Xt,'" target="_blank" class="').concat(Ht("iframe-link"),'">').concat(Xt,"</a></li>")}).join(""));var Dt='<h2 class="'.concat(Ht("title"),`">
      Iframe
      <div class="`).concat(Ht("btn refresh-iframe"),`">
        <span class="`).concat(Ht("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(Ht("link-list"),`">
      `).concat(wt,`
    </ul>`);return this._$iframe.html(Dt),this}},{key:"refreshLocalStorage",value:function(){return this._localStorage.refresh(),this}},{key:"refreshSessionStorage",value:function(){return this._sessionStorage.refresh(),this}},{key:"refreshCookie",value:function(){return this._cookie.refresh(),this}},{key:"refreshImage",value:function(){var K=[],wt=this._performance=window.webkitPerformance||window.performance;wt&&wt.getEntries?this._performance.getEntries().forEach(function(ei){if(ei.initiatorType==="img"||Ao(ei.name)){if(_t()(ei.name,"exclude=true"))return;K.push(ei.name)}}):j()("img").each(function(){var ei=j()(this),ui=ei.attr("src");ei.data("exclude")!=="true"&&K.push(ui)}),(K=An()(K)).sort();var Dt=pr("image",K.length),Xt="<li>Empty</li>";Fs()(K)||(Xt=me()(K,function(ei){return'<li class="'.concat(Ht("image"),`">
          <img src="`).concat(is()(ei),'" data-exclude="true" class="').concat(Ht("img-link"),`"/>
        </li>`)}).join(""));var be='<h2 class="'.concat(Ht("title"),`">
      Image
      <div class="`).concat(Ht("btn refresh-image"),`">
        <span class="`).concat(Ht("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(Ht("image-list"),`">
      `).concat(Xt,`
    </ul>`),Se=this._$image;return ur(Se,Dt),Se.html(be),this}},{key:"show",value:function(){return(0,P.Z)((0,l.Z)(Mt.prototype),"show",this).call(this),this._observeElement&&this._enableObserver(),this.refresh()}},{key:"hide",value:function(){return this._disableObserver(),(0,P.Z)((0,l.Z)(Mt.prototype),"hide",this).call(this)}},{key:"_initTpl",value:function(){var K=this._$el;K.html(Ht(`<div class="section local-storage"></div>
      <div class="section session-storage"></div>
      <div class="section cookie"></div>
      <div class="section script"></div>
      <div class="section stylesheet"></div>
      <div class="section iframe"></div>
      <div class="section image"></div>`)),this._$localStorage=K.find(Ht(".local-storage")),this._$sessionStorage=K.find(Ht(".session-storage")),this._$cookie=K.find(Ht(".cookie")),this._$script=K.find(Ht(".script")),this._$stylesheet=K.find(Ht(".stylesheet")),this._$iframe=K.find(Ht(".iframe")),this._$image=K.find(Ht(".image"))}},{key:"_bindEvent",value:function(){var K=this,wt=this._$el,Dt=this._container;function Xt(Se,ei){var ui=Dt.get("sources");if(ui)return ui.set(Se,ei),Dt.showTool("sources"),!0}function be(Se){return function(ei){if(Dt.get("sources")){ei.preventDefault();var ui=j()(this).attr("href");Se!=="iframe"&&ao()(location.href,ui)?Vr()({url:ui,success:function(Di){Xt(Se,Di)},dataType:"raw"}):Xt("iframe",ui)}}}wt.on("click",".eruda-refresh-script",function(){Dt.notify("Refreshed"),K.refreshScript()}).on("click",".eruda-refresh-stylesheet",function(){Dt.notify("Refreshed"),K.refreshStylesheet()}).on("click",".eruda-refresh-iframe",function(){Dt.notify("Refreshed"),K.refreshIframe()}).on("click",".eruda-refresh-image",function(){Dt.notify("Refreshed"),K.refreshImage()}).on("click",".eruda-img-link",function(){Xt("img",j()(this).attr("src"))}).on("click",".eruda-css-link",be("css")).on("click",".eruda-js-link",be("js")).on("click",".eruda-iframe-link",be("iframe"))}},{key:"_rmCfg",value:function(){var K=this.config,wt=this._container.get("settings");wt&&wt.remove(K,"hideErudaSetting").remove(K,"observeElement").remove("Resources")}},{key:"_initCfg",value:function(){var K=this,wt=this.config=ge.createCfg("resources",{hideErudaSetting:!0,observeElement:!0});wt.get("hideErudaSetting")&&(this._hideErudaSetting=!0),wt.get("observeElement")||(this._observeElement=!1),wt.on("change",function(Dt,Xt){switch(Dt){case"hideErudaSetting":return void(K._hideErudaSetting=Xt);case"observeElement":return K._observeElement=Xt,Xt?K._enableObserver():K._disableObserver()}}),this._container.get("settings").text("Resources").switch(wt,"hideErudaSetting","Hide Eruda Setting").switch(wt,"observeElement","Auto Refresh Elements").separator()}},{key:"_initObserver",value:function(){var K=this;this._observer=new(mn())(function(wt){X()(wt,function(Dt){K._handleMutation(Dt)})})}},{key:"_handleMutation",value:function(K){var wt=this;if(!Re(K.target)){var Dt=function(ei){var ui=function(Di){return Di.tagName?Di.tagName.toLowerCase():""}(ei);switch(ui){case"script":wt.refreshScript();break;case"img":wt.refreshImage();break;case"link":wt.refreshStylesheet()}};if(K.type==="attributes")Dt(K.target);else if(K.type==="childList"){Dt(K.target);var Xt,be=Sr()(K.addedNodes),Se=po(be=ho()(be,Sr()(K.removedNodes)));try{for(Se.s();!(Xt=Se.n()).done;)Dt(Xt.value)}catch(ei){Se.e(ei)}finally{Se.f()}}}}},{key:"_enableObserver",value:function(){this._observer.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}}]),Mt}(C),_o=/\.(jpeg|jpg|gif|png)$/,Ao=function(jt){return _o.test(jt)},Xr=s(4541),Tr=s.n(Xr),$n=Tr()(),Xn=[{name:"Location",val:function(){return is()(location.href)}},{name:"User Agent",val:navigator.userAgent},{name:"Device",val:["<table><tbody>",'<tr><td class="eruda-device-key">screen</td><td>'.concat(screen.width," * ").concat(screen.height,"</td></tr>"),"<tr><td>viewport</td><td>".concat(window.innerWidth," * ").concat(window.innerHeight,"</td></tr>"),"<tr><td>pixel ratio</td><td>".concat(window.devicePixelRatio,"</td></tr>"),"</tbody></table>"].join("")},{name:"System",val:["<table><tbody>",'<tr><td class="eruda-system-key">os</td><td>'.concat(mi()(),"</td></tr>"),"<tr><td>browser</td><td>".concat($n.name+" "+$n.version,"</td></tr>"),"</tbody></table>"].join("")},{name:"About",val:'<a href="https://eruda.liriliri.io" target="_blank">Eruda v3.0.1</a>'},{name:"Backers",val:function(){return'<a rel="noreferrer noopener" href="https://opencollective.com/eruda" target="_blank"><img data-exclude="true" style="width: 100%;"src="https://opencollective.com/eruda/backers.svg?width='.concat(1.5*window.innerWidth,'&exclude=true"></a>')}}],Dr=s(550),Pr=s.n(Dr);function Qr(jt){var zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Mt,K=(0,l.Z)(jt);if(zt){var wt=(0,l.Z)(this).constructor;Mt=Reflect.construct(K,arguments,wt)}else Mt=K.apply(this,arguments);return(0,N.Z)(this,Mt)}}var Mr=function(jt){(0,H.Z)(Mt,jt);var zt=Qr(Mt);function Mt(){var K;return(0,x.Z)(this,Mt),(K=zt.call(this))._style=Gt(s(879)),K.name="info",K._infos=[],K}return(0,I.Z)(Mt,[{key:"init",value:function(K,wt){(0,P.Z)((0,l.Z)(Mt.prototype),"init",this).call(this,K),this._container=wt,this._addDefInfo(),this._bindEvent()}},{key:"destroy",value:function(){(0,P.Z)((0,l.Z)(Mt.prototype),"destroy",this).call(this),Gt.remove(this._style)}},{key:"add",value:function(K,wt){var Dt=this._infos,Xt=!1;return X()(Dt,function(be){K===be.name&&(be.val=wt,Xt=!0)}),Xt||Dt.push({name:K,val:wt}),this._render(),this}},{key:"get",value:function(K){var wt,Dt=this._infos;return pi()(K)?Pr()(Dt):(X()(Dt,function(Xt){K===Xt.name&&(wt=Xt.val)}),wt)}},{key:"remove",value:function(K){for(var wt=this._infos,Dt=wt.length-1;Dt>=0;Dt--)wt[Dt].name===K&&wt.splice(Dt,1);return this._render(),this}},{key:"clear",value:function(){return this._infos=[],this._render(),this}},{key:"_addDefInfo",value:function(){var K=this;X()(Xn,function(wt){return K.add(wt.name,wt.val)})}},{key:"_render",value:function(){var K=[];X()(this._infos,function(Dt){var Xt=Dt.name,be=Dt.val;Us()(be)&&(be=be()),K.push({name:Xt,val:be})});var wt="<ul>".concat(me()(K,function(Dt){return'<li><h2 class="'.concat(Ht("title"),'">').concat(is()(Dt.name),'<span class="').concat(Ht("icon-copy copy"),'"></span></h2><div class="').concat(Ht("content"),'">').concat(Dt.val,"</div></li>")}).join(""),"</ul>");this._renderHtml(wt)}},{key:"_bindEvent",value:function(){var K=this._container;this._$el.on("click",Ht(".copy"),function(){var wt=j()(this).parent().parent(),Dt=wt.find(Ht(".title")).text(),Xt=wt.find(Ht(".content")).text();Cn()("".concat(Dt,": ").concat(Xt)),K.notify("Copied")})}},{key:"_renderHtml",value:function(K){K!==this._lastHtml&&(this._lastHtml=K,this._$el.html(K))}}]),Mt}(C),Lr=s(8299),Kn=s(8368),ps=s.n(Kn),Zn=s(3651),fr=s.n(Zn),Xs=s(7049);function mo(jt){var zt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Mt,K=(0,l.Z)(jt);if(zt){var wt=(0,l.Z)(this).constructor;Mt=Reflect.construct(K,arguments,wt)}else Mt=K.apply(this,arguments);return(0,N.Z)(this,Mt)}}var Kr=function(jt){(0,H.Z)(Mt,jt);var zt=mo(Mt);function Mt(){var K;return(0,x.Z)(this,Mt),(K=zt.call(this))._style=Gt(s(1344)),K.name="sources",K._showLineNum=!0,K}return(0,I.Z)(Mt,[{key:"init",value:function(K,wt){(0,P.Z)((0,l.Z)(Mt.prototype),"init",this).call(this,K),this._container=wt,this._bindEvent(),this._initCfg()}},{key:"destroy",value:function(){(0,P.Z)((0,l.Z)(Mt.prototype),"destroy",this).call(this),Gt.remove(this._style),this._rmCfg()}},{key:"set",value:function(K,wt){if(K==="img"){this._isFetchingData=!0;var Dt=new Image,Xt=this;return Dt.onload=function(){Xt._isFetchingData=!1,Xt._data={type:"img",val:{width:this.width,height:this.height,src:wt}},Xt._render()},Dt.onerror=function(){Xt._isFetchingData=!1},void(Dt.src=wt)}return this._data={type:K,val:wt},this._render(),this}},{key:"show",value:function(){return(0,P.Z)((0,l.Z)(Mt.prototype),"show",this).call(this),this._data||this._isFetchingData||this._renderDef(),this}},{key:"_renderDef",value:function(){var K=this;if(this._html)return this._data={type:"html",val:this._html},this._render();this._isGettingHtml||(this._isGettingHtml=!0,Vr()({url:location.href,success:function(wt){return K._html=wt},error:function(){return K._html="Sorry, unable to fetch source code:("},complete:function(){K._isGettingHtml=!1,K._renderDef()},dataType:"raw"}))}},{key:"_bindEvent",value:function(){var K=this;this._container.on("showTool",function(wt,Dt){wt!==K.name&&Dt.name===K.name&&delete K._data})}},{key:"_rmCfg",value:function(){var K=this.config,wt=this._container.get("settings");wt&&wt.remove(K,"showLineNum").remove("Sources")}},{key:"_initCfg",value:function(){var K=this,wt=this.config=ge.createCfg("sources",{showLineNum:!0});wt.get("showLineNum")||(this._showLineNum=!1),wt.on("change",function(Dt,Xt){Dt!=="showLineNum"||(K._showLineNum=Xt)}),this._container.get("settings").text("Sources").switch(wt,"showLineNum","Show Line Numbers").separator()}},{key:"_render",value:function(){switch(this._isInit=!0,this._data.type){case"html":case"js":case"css":return this._renderCode();case"img":return this._renderImg();case"object":return this._renderObj();case"raw":return this._renderRaw();case"iframe":return this._renderIframe()}}},{key:"_renderImg",value:function(){var K=this._data.val,wt=K.width,Dt=K.height,Xt=K.src;this._renderHtml('<div class="'.concat(Ht("image"),`">
      <div class="`).concat(Ht("breadcrumb"),'">').concat(is()(Xt),`</div>
      <div class="`).concat(Ht("img-container"),`" data-exclude="true">
        <img src="`).concat(is()(Xt),`">
      </div>
      <div class="`).concat(Ht("img-info"),'">').concat(is()(wt)," Ã ").concat(is()(Dt),`</div>
    </div>`))}},{key:"_renderCode",value:function(){var K=this._data;this._renderHtml('<div class="'.concat(Ht("code"),'" data-type="').concat(K.type,'"></div>'),!1);var wt=K.val,Dt=K.val.length;Dt>qn&&(wt=Pn()(wt,qn)),Dt<Wn?(wt=fr()(wt,K.type,{comment:"",string:"",number:"",keyword:"",operator:""}),X()(["comment","string","number","keyword","operator"],function(be){wt=ps()(wt,'class="'.concat(be,'"'),'class="'.concat(Ht(be),'"'))})):wt=is()(wt);var Xt=this._$el.find(Ht(".code")).get(0);new Xs.Z(Xt,{text:wt,escape:!1,wrapLongLines:!0,showLineNumbers:K.val.length<gr&&this._showLineNum})}},{key:"_renderObj",value:function(){this._renderHtml('<ul class="'.concat(Ht("json"),'"></ul>'),!1);var K=this._data.val;try{$()(K)&&(K=JSON.parse(K))}catch{}new Lr.Z(this._$el.find(".eruda-json").get(0),{unenumerable:!0,accessGetter:!0}).set(K)}},{key:"_renderRaw",value:function(){var K=this._data;this._renderHtml('<div class="'.concat(Ht("raw-wrapper"),`">
      <div class="`).concat(Ht("raw"),`"></div>
    </div>`));var wt=K.val,Dt=this._$el.find(Ht(".raw")).get(0);wt.length>qn&&(wt=Pn()(wt,qn)),new Xs.Z(Dt,{text:wt,wrapLongLines:!0,showLineNumbers:wt.length<gr&&this._showLineNum})}},{key:"_renderIframe",value:function(){this._renderHtml('<iframe src="'.concat(is()(this._data.val),'"></iframe>'))}},{key:"_renderHtml",value:function(K){var wt=this;(!(arguments.length>1&&arguments[1]!==void 0)||arguments[1])&&K===this._lastHtml||(this._lastHtml=K,this._$el.html(K),setTimeout(function(){return wt._$el.get(0).scrollTop=0},0))}}]),Mt}(C),Wn=3e4,gr=8e4,qn=1e5,Po=s(5166),vo=s.n(Po),bo=s(3514),yo=s.n(bo),Rr={init:function(){var jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},zt=jt.container,Mt=jt.tool,K=jt.autoScale,wt=K===void 0||K,Dt=jt.useShadowDom,Xt=Dt===void 0||Dt,be=jt.defaults,Se=be===void 0?{}:be;this._isInit||(this._isInit=!0,this._scale=1,this._initContainer(zt,Xt),this._initStyle(),this._initDevTools(Se),this._initEntryBtn(),this._initSettings(),this._initTools(Mt),this._registerListener(),wt&&this._autoScale())},_isInit:!1,version:"3.0.1",util:_,chobitsu:Qt,Tool:C,Console:ds,Elements:Bo,Network:Ts,Sources:Kr,Resources:go,Info:Mr,Snippets:Dn,Settings:ge,get:function(jt){if(this._checkInit()){if(jt==="entryBtn")return this._entryBtn;var zt=this._devTools;return jt?zt.get(jt):zt}},add:function(jt){if(this._checkInit())return Us()(jt)&&(jt=jt(this)),this._devTools.add(jt),this},remove:function(jt){return this._devTools.remove(jt),this},show:function(jt){if(this._checkInit()){var zt=this._devTools;return jt?zt.showTool(jt):zt.show(),this}},hide:function(){if(this._checkInit())return this._devTools.hide(),this},destroy:function(){this._devTools.destroy(),delete this._devTools,this._entryBtn.destroy(),delete this._entryBtn,this._unregisterListener(),j()(this._container).remove(),Gt.clear(),this._isInit=!1,this._container=null,this._shadowRoot=null},scale:function(jt){return rs()(jt)?(this._scale=jt,Q.emit(Q.SCALE,jt),this):this._scale},position:function(jt){var zt=this._entryBtn;return vo()(jt)?(zt.setPos(jt),this):zt.getPos()},_autoScale:function(){fi()()&&this.scale(1/yo()())},_registerListener:function(){var jt=this;this._addListener=function(){return jt.add.apply(jt,arguments)},this._showListener=function(){return jt.show.apply(jt,arguments)},Q.on(Q.ADD,this._addListener),Q.on(Q.SHOW,this._showListener),Q.on(Q.SCALE,Gt.setScale)},_unregisterListener:function(){Q.off(Q.ADD,this._addListener),Q.off(Q.SHOW,this._showListener),Q.off(Q.SCALE,Gt.setScale)},_checkInit:function(){return this._isInit||Gi.error('Please call "eruda.init()" first'),this._isInit},_initContainer:function(jt,zt){var Mt,K;jt||(jt=document.createElement("div"),document.documentElement.appendChild(jt)),jt.id="eruda",jt.style.all="initial",this._container=jt,zt&&(jt.attachShadow?Mt=jt.attachShadow({mode:"open"}):jt.createShadowRoot&&(Mt=jt.createShadowRoot()),Mt&&(Gt.container=document.head,Gt(s(5357)+s(9327)+s(4821)+s(8903)+s(5777)),K=document.createElement("div"),Mt.appendChild(K),this._shadowRoot=Mt)),this._shadowRoot||(K=document.createElement("div"),jt.appendChild(K)),Zt()(K,{className:"eruda-container __chobitsu-hide__",contentEditable:!1}),Tr()().name==="ios"&&K.setAttribute("ontouchstart",""),this._$el=j()(K)},_initDevTools:function(jt){this._devTools=new Bs(this._$el,{defaults:jt})},_initStyle:function(){var jt="eruda-style-container",zt=this._$el;this._shadowRoot?(Gt.container=this._shadowRoot,Gt(":host { all: initial }")):(zt.append('<div class="'.concat(jt,'"></div>')),Gt.container=zt.find(".".concat(jt)).get(0)),Gt(s(8020)+s(4821)+s(9327)+s(7591)+s(4987)+s(8903)+s(5512)+s(2156)+s(5777)+s(7871)+s(6833)+s(8516)+s(5357))},_initEntryBtn:function(){var jt=this;this._entryBtn=new Fi(this._$el),this._entryBtn.on("click",function(){return jt._devTools.toggle()})},_initSettings:function(){var jt=this._devTools,zt=new ge;jt.add(zt),this._entryBtn.initCfg(zt),jt.initCfg(zt)},_initTools:function(){var jt=this,zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["console","elements","network","resources","sources","info","snippets"];zt=Sr()(zt);var Mt=this._devTools;zt.forEach(function(K){var wt=jt[Pt()(K)];try{wt&&Mt.add(new wt)}catch(Dt){Ie()(function(){Gi.error("Something wrong when initializing tool ".concat(K,":"),Dt.message)})}}),Mt.showTool(zt[0]||"settings")}}},2027:function(v,r,s){var _=s(6672).Z;v.exports=_,v.exports.default=_},6610:function(v,r,s){s.r(r),r.default={}},9143:function(v,r,s){var _=this&&this.__awaiter||function(L,Q,P,q){return new(P||(P=Promise))(function(C,Z){function j(W){try{Y(q.next(W))}catch(u){Z(u)}}function dt(W){try{Y(q.throw(W))}catch(u){Z(u)}}function Y(W){var u;W.done?C(W.value):(u=W.value,u instanceof P?u:new P(function(O){O(u)})).then(j,dt)}Y((q=q.apply(L,Q||[])).next())})},x=this&&this.__generator||function(L,Q){var P,q,C,Z,j={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]};return Z={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function dt(Y){return function(W){return function(u){if(P)throw new TypeError("Generator is already executing.");for(;j;)try{if(P=1,q&&(C=2&u[0]?q.return:u[0]?q.throw||((C=q.return)&&C.call(q),0):q.next)&&!(C=C.call(q,u[1])).done)return C;switch(q=0,C&&(u=[2&u[0],C.value]),u[0]){case 0:case 1:C=u;break;case 4:return j.label++,{value:u[1],done:!1};case 5:j.label++,q=u[1],u=[0];continue;case 7:u=j.ops.pop(),j.trys.pop();continue;default:if(C=j.trys,!((C=C.length>0&&C[C.length-1])||u[0]!==6&&u[0]!==2)){j=0;continue}if(u[0]===3&&(!C||u[1]>C[0]&&u[1]<C[3])){j.label=u[1];break}if(u[0]===6&&j.label<C[1]){j.label=C[1],C=u;break}if(C&&j.label<C[2]){j.label=C[2],j.ops.push(u);break}C[2]&&j.ops.pop(),j.trys.pop();continue}u=Q.call(L,j)}catch(O){u=[6,O],q=0}finally{P=C=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([Y,W])}}},I=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(r,"__esModule",{value:!0});var B=I(s(3276)),H=I(s(1214)),N=I(s(5936)),l=I(s(3783)),d=I(s(1443)),o=s(316),T=function(){function L(){var Q=this;this.resolves=new Map,this.domains=new Map,this.onMessage=H.default,B.default.on("message",function(P){var q=JSON.parse(P),C=Q.resolves.get(q.id);if(C&&C(q.result),!q.id){var Z=q.method.split("."),j=Z[0],dt=Z[1],Y=Q.domains.get(j);Y&&Y.emit(dt,q.params)}Q.onMessage(P)})}return L.prototype.domain=function(Q){return this.domains.get(Q)},L.prototype.setOnMessage=function(Q){this.onMessage=Q},L.prototype.sendMessage=function(Q,P){var q=this;P===void 0&&(P={});var C=N.default();return this.sendRawMessage(JSON.stringify({id:C,method:Q,params:P})),new Promise(function(Z){q.resolves.set(C,Z)})},L.prototype.sendRawMessage=function(Q){return _(this,void 0,void 0,function(){var P,q,C,Z,j,dt,Y;return x(this,function(W){switch(W.label){case 0:P=JSON.parse(Q),q=P.method,C=P.params,Z=P.id,j={id:Z},W.label=1;case 1:return W.trys.push([1,3,,4]),dt=j,[4,this.callMethod(q,C)];case 2:return dt.result=W.sent(),[3,4];case 3:return(Y=W.sent())instanceof o.ErrorWithCode?j.error={message:Y.message,code:Y.code}:Y instanceof Error&&(j.error={message:Y.message}),[3,4];case 4:return B.default.emit("message",JSON.stringify(j)),[2]}})})},L.prototype.register=function(Q,P){var q=this.domains,C=q.get(Q);C||(C={},d.default.mixin(C)),l.default(P,function(Z,j){C[j]=Z}),q.set(Q,C)},L.prototype.callMethod=function(Q,P){return _(this,void 0,void 0,function(){var q,C,Z,j;return x(this,function(dt){if(q=Q.split("."),C=q[0],Z=q[1],(j=this.domain(C))&&j[Z])return[2,j[Z](P)||{}];throw Error(Q+" unimplemented")})})},L}();r.default=T},7935:function(v,r,s){var _=this&&this.__createBinding||(Object.create?function(At,_t,ut,Ct){Ct===void 0&&(Ct=ut),Object.defineProperty(At,Ct,{enumerable:!0,get:function(){return _t[ut]}})}:function(At,_t,ut,Ct){Ct===void 0&&(Ct=ut),At[Ct]=_t[ut]}),x=this&&this.__setModuleDefault||(Object.create?function(At,_t){Object.defineProperty(At,"default",{enumerable:!0,value:_t})}:function(At,_t){At.default=_t}),I=this&&this.__importStar||function(At){if(At&&At.__esModule)return At;var _t={};if(At!=null)for(var ut in At)ut!=="default"&&Object.hasOwnProperty.call(At,ut)&&_(_t,At,ut);return x(_t,At),_t},B=this&&this.__importDefault||function(At){return At&&At.__esModule?At:{default:At}};Object.defineProperty(r,"__esModule",{value:!0}),r.getDOMNode=r.getDOMNodeId=r.setOuterHTML=r.setNodeValue=r.setInspectedNode=r.setAttributeValue=r.setAttributesAsText=r.resolveNode=r.requestNode=r.requestChildNodes=r.removeNode=r.pushNodesByBackendIdsToFrontend=r.discardSearchResults=r.pushNodesToFrontend=r.getSearchResults=r.performSearch=r.moveTo=r.getOuterHTML=r.getDocument=r.enable=r.copyTo=r.collectClassNamesFromSubtree=void 0;var H=B(s(3276)),N=I(s(2049)),l=s(2049),d=I(s(7923)),o=B(s(6126)),T=B(s(1512)),L=B(s(6156)),Q=B(s(8887)),P=B(s(7483)),q=B(s(2461)),C=B(s(42)),Z=B(s(6341)),j=B(s(3063)),dt=B(s(3783)),Y=B(s(1352)),W=B(s(8933)),u=B(s(8099)),O=s(1628),X=s(316);r.collectClassNamesFromSubtree=function(At){var _t=l.getNode(At.nodeId),ut=[];return $(_t,function(Ct){if(Ct.nodeType===1){var vt=Ct.getAttribute("class");if(vt)for(var xt=0,lt=vt.split(/\s+/);xt<lt.length;xt++){var kt=lt[xt];ut.push(kt)}}}),{classNames:C.default(ut)}},r.copyTo=function(At){var _t=At.nodeId,ut=At.targetNodeId,Ct=l.getNode(_t),vt=l.getNode(ut),xt=Ct.cloneNode(!0);vt.appendChild(xt)},r.enable=function(){o.default.observe(),N.clear()},r.getDocument=function(){return{root:N.wrap(document,{depth:2})}},r.getOuterHTML=function(At){return{outerHTML:l.getNode(At.nodeId).outerHTML}},r.moveTo=function(At){var _t=At.nodeId,ut=At.targetNodeId,Ct=l.getNode(_t);l.getNode(ut).appendChild(Ct)};var ht=new Map;function pt(At){for(var _t=[At],ut=At.parentNode;ut&&(_t.push(ut),!(vt=l.getNodeId(ut)));)ut=ut.parentNode;for(;_t.length;){var Ct=_t.pop(),vt=l.getNodeId(Ct);H.default.trigger("DOM.setChildNodes",{parentId:vt,nodes:N.getChildNodes(Ct,1)})}return l.getNodeId(At)}r.performSearch=function(At){var _t=j.default(At.query),ut=[];try{ut=u.default(ut,Y.default(document.querySelectorAll(_t)))}catch{}try{ut=u.default(ut,W.default(_t))}catch{}$(document,function(vt){var xt=vt.nodeType;if(xt===1){var lt=vt.localName;if(Z.default("<"+lt+" ",_t)||Z.default("</"+lt+">",_t))return void ut.push(vt);var kt=[];dt.default(vt.attributes,function(Ae){var Ot=Ae.name,$t=Ae.value;return kt.push(Ot,$t)});for(var Jt=0,Ut=kt.length;Jt<Ut;Jt++)if(Z.default(j.default(kt[Jt]),_t)){ut.push(vt);break}}else xt===3&&Z.default(j.default(vt.nodeValue),_t)&&ut.push(vt)});var Ct=X.createId();return ht.set(Ct,ut),{searchId:Ct,resultCount:ut.length}},r.getSearchResults=function(At){var _t=At.searchId,ut=At.fromIndex,Ct=At.toIndex,vt=ht.get(_t).slice(ut,Ct);return{nodeIds:q.default(vt,function(xt){var lt=l.getNodeId(xt);return lt||pt(xt)})}},r.pushNodesToFrontend=pt,r.discardSearchResults=function(At){ht.delete(At.searchId)},r.pushNodesByBackendIdsToFrontend=function(At){return{nodeIds:At.backendNodeIds}},r.removeNode=function(At){var _t=l.getNode(At.nodeId);T.default(_t).remove()},r.requestChildNodes=function(At){var _t=At.nodeId,ut=At.depth,Ct=ut===void 0?1:ut,vt=l.getNode(_t);H.default.trigger("DOM.setChildNodes",{parentId:_t,nodes:N.getChildNodes(vt,Ct)})},r.requestNode=function(At){var _t=d.getObj(At.objectId);return{nodeId:l.getNodeId(_t)}},r.resolveNode=function(At){var _t=l.getNode(At.nodeId);return{object:d.wrap(_t)}},r.setAttributesAsText=function(At){var _t,ut=At.name,Ct=At.text,vt=At.nodeId,xt=l.getNode(vt);ut&&xt.removeAttribute(ut),T.default(xt).attr((_t="<div "+(_t=Ct)+"></div>",P.default.parse(_t)[0].attrs))},r.setAttributeValue=function(At){var _t=At.nodeId,ut=At.name,Ct=At.value;l.getNode(_t).setAttribute(ut,Ct)};var ft=[];function $(At,_t){for(var ut=N.filterNodes(At.childNodes),Ct=0,vt=ut.length;Ct<vt;Ct++){var xt=ut[Ct];_t(xt),$(xt,_t)}}r.setInspectedNode=function(At){var _t=l.getNode(At.nodeId);ft.unshift(_t),ft.length>5&&ft.pop();for(var ut=0;ut<5;ut++)O.setGlobal("$"+ut,ft[ut])},r.setNodeValue=function(At){var _t=At.nodeId,ut=At.value;l.getNode(_t).nodeValue=ut},r.setOuterHTML=function(At){var _t=At.nodeId,ut=At.outerHTML;l.getNode(_t).outerHTML=ut},r.getDOMNodeId=function(At){var _t=At.node;return{nodeId:N.getOrCreateNodeId(_t)}},r.getDOMNode=function(At){var _t=At.nodeId;return{node:l.getNode(_t)}},o.default.on("attributes",function(At,_t){var ut=l.getNodeId(At);if(ut){var Ct=At.getAttribute(_t);L.default(Ct)?H.default.trigger("DOM.attributeRemoved",{nodeId:ut,name:_t}):H.default.trigger("DOM.attributeModified",{nodeId:ut,name:_t,value:Ct})}}),o.default.on("childList",function(At,_t,ut){var Ct=l.getNodeId(At);if(Ct){if(_t=N.filterNodes(_t),ut=N.filterNodes(ut),!Q.default(_t)){Ae();for(var vt=0,xt=_t.length;vt<xt;vt++){var lt=_t[vt],kt=N.getPreviousNode(lt),Jt=kt?l.getNodeId(kt):0,Ut={node:N.wrap(lt,{depth:0}),parentNodeId:Ct,previousNodeId:Jt};H.default.trigger("DOM.childNodeInserted",Ut)}}if(!Q.default(ut))for(vt=0,xt=ut.length;vt<xt;vt++){if(lt=ut[vt],!l.getNodeId(lt)){Ae();break}H.default.trigger("DOM.childNodeRemoved",{nodeId:l.getNodeId(lt),parentNodeId:Ct})}}function Ae(){H.default.trigger("DOM.childNodeCountUpdated",{childNodeCount:N.wrap(At,{depth:0}).childNodeCount,nodeId:Ct})}}),o.default.on("characterData",function(At){var _t=l.getNodeId(At);_t&&H.default.trigger("DOM.characterDataModified",{characterData:At.nodeValue,nodeId:_t})})},2139:function(v,r,s){var _=this&&this.__spreadArrays||function(){for(var P=0,q=0,C=arguments.length;q<C;q++)P+=arguments[q].length;var Z=Array(P),j=0;for(q=0;q<C;q++)for(var dt=arguments[q],Y=0,W=dt.length;Y<W;Y++,j++)Z[j]=dt[Y];return Z},x=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(r,"__esModule",{value:!0}),r.getResponseBody=r.enable=r.getCookies=r.deleteCookies=void 0;var I=x(s(4331)),B=x(s(3783)),H=x(s(1420)),N=x(s(5031)),l=x(s(8763)),d=x(s(8740)),o=x(s(6341)),T=s(2636),L=x(s(3276));r.deleteCookies=function(P){N.default(P.name)},r.getCookies=function(){var P=[],q=document.cookie;return I.default(q)!==""&&B.default(q.split(";"),function(C){C=C.split("=");var Z=I.default(C.shift());C=H.default(C.join("=")),P.push({name:Z,value:C})}),{cookies:P}};var Q=new Map;r.enable=l.default(function(){var P=window.XMLHttpRequest.prototype,q=P.send,C=P.open,Z=P.setRequestHeader;P.open=function(Y,W){if(!function(X){return!o.default(X,"__chobitsu-hide__=true")}(W))return C.apply(this,arguments);var u=this,O=u.chobitsuRequest=new T.XhrRequest(u,Y,W);O.on("send",function(X,ht){var pt={method:ht.method,url:ht.url,headers:ht.reqHeaders};ht.data&&(pt.postData=ht.data),L.default.trigger("Network.requestWillBeSent",{requestId:X,type:"XHR",request:pt,timestamp:ht.time/1e3})}),O.on("headersReceived",function(X,ht){L.default.trigger("Network.responseReceivedExtraInfo",{requestId:X,blockedCookies:[],headers:ht.resHeaders})}),O.on("done",function(X,ht){L.default.trigger("Network.responseReceived",{requestId:X,type:"XHR",response:{status:ht.status},timestamp:ht.time/1e3}),Q.set(X,ht.resTxt),L.default.trigger("Network.loadingFinished",{requestId:X,encodedDataLength:ht.size,timestamp:ht.time/1e3})}),u.addEventListener("readystatechange",function(){switch(u.readyState){case 2:return O.handleHeadersReceived();case 4:return O.handleDone()}}),C.apply(this,arguments)},P.send=function(Y){var W=this.chobitsuRequest;W&&W.handleSend(Y),q.apply(this,arguments)},P.setRequestHeader=function(Y,W){var u=this.chobitsuRequest;u&&u.handleReqHeadersSet(Y,W),Z.apply(this,arguments)};var j=!1;if(window.fetch&&(j=d.default(window.fetch)),!j&&navigator.serviceWorker&&(j=!0),j){var dt=window.fetch;window.fetch=function(){for(var Y=[],W=0;W<arguments.length;W++)Y[W]=arguments[W];var u=new(T.FetchRequest.bind.apply(T.FetchRequest,_([void 0],Y)));u.on("send",function(X,ht){var pt={method:ht.method,url:ht.url,headers:ht.reqHeaders};ht.data&&(pt.postData=ht.data),L.default.trigger("Network.requestWillBeSent",{requestId:X,type:"Fetch",request:pt,timestamp:ht.time/1e3})}),u.on("done",function(X,ht){L.default.trigger("Network.responseReceived",{requestId:X,type:"Fetch",response:{status:ht.status,headers:ht.resHeaders},timestamp:ht.time/1e3}),Q.set(X,ht.resTxt),L.default.trigger("Network.loadingFinished",{requestId:X,encodedDataLength:ht.size,timestamp:ht.time/1e3})});var O=dt.apply(void 0,Y);return u.send(O),O}}}),r.getResponseBody=function(P){return{base64Encoded:!1,body:Q.get(P.requestId)}}},8689:function(v,r,s){var _=this&&this.__createBinding||(Object.create?function(Ot,$t,Zt,Yt){Yt===void 0&&(Yt=Zt),Object.defineProperty(Ot,Yt,{enumerable:!0,get:function(){return $t[Zt]}})}:function(Ot,$t,Zt,Yt){Yt===void 0&&(Yt=Zt),Ot[Yt]=$t[Zt]}),x=this&&this.__setModuleDefault||(Object.create?function(Ot,$t){Object.defineProperty(Ot,"default",{enumerable:!0,value:$t})}:function(Ot,$t){Ot.default=$t}),I=this&&this.__importStar||function(Ot){if(Ot&&Ot.__esModule)return Ot;var $t={};if(Ot!=null)for(var Zt in Ot)Zt!=="default"&&Object.hasOwnProperty.call(Ot,Zt)&&_($t,Ot,Zt);return x($t,Ot),$t},B=this&&this.__importDefault||function(Ot){return Ot&&Ot.__esModule?Ot:{default:Ot}};Object.defineProperty(r,"__esModule",{value:!0}),r.setInspectMode=r.setShowViewportSizeOnResize=r.hideHighlight=r.highlightNode=r.disable=r.enable=void 0;var H,N,l=s(2049),d=s(7935),o=B(s(1512)),T=B(s(8613)),L=B(s(642)),Q=B(s(4193)),P=B(s(6329)),q=B(s(3276)),C=B(s(5610)),Z=B(s(3474)),j=B(s(4210)),dt=B(s(7715)),Y=I(s(7923)),W=!1,u=!1,O=j.default("clip-path","polygon(50% 0px, 0px 100%, 100% 100%)"),X="ontouchstart"in C.default,ht=s(2777).replace("/*# sourceMappingURL=luna-dom-highlighter.css.map*/","");function pt(Ot){var $t,Zt=Ot.nodeId,Yt=Ot.highlightConfig,Ve=Ot.objectId;Zt&&($t=l.getNode(Zt)),Ve&&($t=Y.getObj(Ve)),$t.nodeType!==1&&$t.nodeType!==3||(Q.default(Yt,{contentColor:"transparent",paddingColor:"transparent",borderColor:"transparent",marginColor:"transparent"}),O||P.default(Yt,{showInfo:!1}),H.highlight($t,Yt))}function ft(){H.hide()}r.enable=function(){if(!u){var Ot=T.default("div",{class:"__chobitsu-hide__",style:{all:"initial"}});N=o.default(Ot),document.documentElement.appendChild(Ot);var $t=null,Zt=null;if(Ot.attachShadow?Zt=Ot.attachShadow({mode:"open"}):Ot.createShadowRoot&&(Zt=Ot.createShadowRoot()),Zt){var Yt=document.createElement("style");Yt.textContent=ht,Yt.type="text/css",Zt.appendChild(Yt),$t=document.createElement("div"),Zt.appendChild($t)}else $t=document.createElement("div"),Ot.appendChild($t),W||(L.default(ht),W=!0);H=new dt.default($t,{monitorResize:Z.default(C.default.ResizeObserver),showInfo:O}),window.addEventListener("resize",Jt),u=!0}},r.disable=function(){H.destroy(),N.remove(),window.removeEventListener("resize",Jt),u=!1},r.highlightNode=pt,r.hideHighlight=ft;var $=!1;r.setShowViewportSizeOnResize=function(Ot){$=Ot.show};var At={},_t="none";function ut(Ot){if(X){var $t=Ot.touches[0]||Ot.changedTouches[0];return document.elementFromPoint($t.clientX,$t.clientY)}return document.elementFromPoint(Ot.clientX,Ot.clientY)}r.setInspectMode=function(Ot){At=Ot.highlightConfig,_t=Ot.mode};var Ct=-1;function vt(Ot){if(_t!=="none"){var $t=ut(Ot);if($t&&l.isValidNode($t)){var Zt=l.getNodeId($t);Zt||(Zt=d.pushNodesToFrontend($t)),pt({nodeId:Zt,highlightConfig:At}),Zt!==Ct&&(q.default.trigger("Overlay.nodeHighlightRequested",{nodeId:Zt}),Ct=Zt)}}}function xt(Ot){if(_t!=="none"){Ot.preventDefault(),Ot.stopImmediatePropagation();var $t=ut(Ot);q.default.trigger("Overlay.inspectNodeRequested",{backendNodeId:l.getNodeId($t)}),Ct=-1,ft()}}function lt(Ot,$t){document.documentElement.addEventListener(Ot,$t,!0)}X?(lt("touchstart",vt),lt("touchmove",vt),lt("touchend",xt)):(lt("mousemove",vt),lt("mouseout",function(){_t!=="none"&&ft()}),lt("click",xt));var kt=T.default("div",{class:"__chobitsu-hide__",style:{position:"fixed",right:0,top:0,background:"#fff",fontSize:13,opacity:.5,padding:"4px 6px"}});function Jt(){$&&(Ae.text(window.innerWidth+"px Ã "+window.innerHeight+"px"),Ut?clearTimeout(Ut):document.documentElement.appendChild(kt),Ut=setTimeout(function(){Ae.remove(),Ut=null},1e3))}var Ut,Ae=o.default(kt)},9119:function(v,r,s){var _=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(r,"__esModule",{value:!0}),r.getTrustTokens=r.clearDataForOrigin=r.getUsageAndQuota=void 0;var x=_(s(3783)),I=_(s(5031)),B=_(s(615)),H=s(2139),N=B.default("local"),l=B.default("session");r.getUsageAndQuota=function(){return{quota:0,usage:0,usageBreakdown:[]}},r.clearDataForOrigin=function(d){var o=d.storageTypes.split(",");x.default(o,function(T){if(T==="cookies"){var L=H.getCookies().cookies;x.default(L,function(Q){var P=Q.name;return I.default(P)})}else T==="local_storage"&&(N.clear(),l.clear())})},r.getTrustTokens=function(){return{tokens:[]}}},3276:function(v,r,s){var _,x=this&&this.__extends||(_=function(H,N){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var o in d)d.hasOwnProperty(o)&&(l[o]=d[o])},_(H,N)},function(H,N){function l(){this.constructor=H}_(H,N),H.prototype=N===null?Object.create(N):(l.prototype=N.prototype,new l)}),I=this&&this.__importDefault||function(H){return H&&H.__esModule?H:{default:H}};Object.defineProperty(r,"__esModule",{value:!0});var B=function(H){function N(){return H!==null&&H.apply(this,arguments)||this}return x(N,H),N.prototype.trigger=function(l,d){this.emit("message",JSON.stringify({method:l,params:d}))},N}(I(s(1443)).default);r.default=new B},1628:function(v,r,s){var _=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(r,"__esModule",{value:!0}),r.setGlobal=void 0;var x=_(s(6768)),I=_(s(2327)),B=_(s(1352)),H=_(s(2533)),N=_(s(8933)),l=_(s(3783)),d={copy:function(o){x.default(o)||(o=JSON.stringify(o,null,2)),I.default(o)},$:function(o){return document.querySelector(o)},$$:function(o){return B.default(document.querySelectorAll(o))},$x:function(o){return N.default(o)},keys:H.default};r.setGlobal=function(o,T){d[o]=T},r.default=function(o){var T;l.default(d,function(L,Q){window[Q]||(window[Q]=L)});try{T=eval.call(window,"("+o+")")}catch{T=eval.call(window,o)}return l.default(d,function(L,Q){window[Q]&&window[Q]===L&&delete window[Q]}),T}},6126:function(v,r,s){var _,x=this&&this.__extends||(_=function(l,d){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,T){o.__proto__=T}||function(o,T){for(var L in T)T.hasOwnProperty(L)&&(o[L]=T[L])},_(l,d)},function(l,d){function o(){this.constructor=l}_(l,d),l.prototype=d===null?Object.create(d):(o.prototype=d.prototype,new o)}),I=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(r,"__esModule",{value:!0});var B=I(s(1443)),H=I(s(3783)),N=function(l){function d(){var o=l.call(this)||this;return o.observer=new MutationObserver(function(T){H.default(T,function(L){return o.handleMutation(L)})}),o}return x(d,l),d.prototype.observe=function(){var o=this.observer;o.disconnect(),o.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},d.prototype.handleMutation=function(o){o.type==="attributes"?this.emit("attributes",o.target,o.attributeName):o.type==="childList"?this.emit("childList",o.target,o.addedNodes,o.removedNodes):o.type==="characterData"&&this.emit("characterData",o.target)},d}(B.default);r.default=new N},2049:function(v,r,s){var _=this&&this.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(r,"__esModule",{value:!0}),r.getNode=r.isValidNode=r.filterNodes=r.getPreviousNode=r.getChildNodes=r.wrap=r.getNodeId=r.clear=r.getOrCreateNodeId=void 0;var x=_(s(2461)),I=_(s(5972)),B=_(s(3783)),H=_(s(4331)),N=_(s(6341)),l=_(s(6329)),d=s(316),o=new Map,T=new Map,L=1;function Q(j){var dt=T.get(j);return dt||(dt=L++,T.set(j,dt),o.set(dt,j),dt)}function P(j,dt){var Y=(dt===void 0?{}:dt).depth,W=Y===void 0?1:Y,u=Q(j),O={nodeName:j.nodeName,nodeType:j.nodeType,localName:j.localName||"",nodeValue:j.nodeValue||"",nodeId:u,backendNodeId:u};if(j.parentNode&&(O.parentId=Q(j.parentNode)),j.nodeType===10)return l.default(O,{publicId:"",systemId:""});if(j.attributes){var X=[];B.default(j.attributes,function(ft){var $=ft.name,At=ft.value;return X.push($,At)}),O.attributes=X}var ht=C(j.childNodes);O.childNodeCount=ht.length;var pt=O.childNodeCount===1&&ht[0].nodeType===3;return(W>0||pt)&&(O.children=q(j,W)),O}function q(j,dt){var Y=C(j.childNodes);return x.default(Y,function(W){return P(W,{depth:dt-1})})}function C(j){return I.default(j,function(dt){return Z(dt)})}function Z(j){if(j.nodeType===1){var dt=j.getAttribute("class")||"";if(N.default(dt,"__chobitsu-hide__")||N.default(dt,"html2canvas-container"))return!1}var Y=!(j.nodeType===3&&H.default(j.nodeValue||"")==="");return Y&&j.parentNode?Z(j.parentNode):Y}r.getOrCreateNodeId=Q,r.clear=function(){o.clear(),T.clear()},r.getNodeId=function(j){return T.get(j)},r.wrap=P,r.getChildNodes=q,r.getPreviousNode=function(j){var dt=j.previousSibling;if(dt){for(;!Z(dt)&&dt.previousSibling;)dt=dt.previousSibling;return dt&&Z(dt)?dt:void 0}},r.filterNodes=C,r.isValidNode=Z,r.getNode=function(j){var dt=o.get(j);if(!dt||dt.nodeType===10)throw d.createErr(-32e3,"Could not find node with given id");return dt}},7923:function(v,r,s){var _=this&&this.__importDefault||function(lt){return lt&&lt.__esModule?lt:{default:lt}};Object.defineProperty(r,"__esModule",{value:!0}),r.getProperties=r.releaseObj=r.getObj=r.wrap=r.clear=void 0;var x=_(s(3367)),I=_(s(6156)),B=_(s(6472)),H=_(s(4777)),N=_(s(9833)),l=_(s(2749)),d=_(s(3708)),o=_(s(7470)),T=_(s(1754)),L=_(s(3085)),Q=_(s(2533)),P=_(s(300)),q=_(s(1116)),C=_(s(8740)),Z=_(s(415)),j=_(s(9804)),dt=_(s(6257)),Y=new Map,W=new Map,u=new Map,O=new Map,X=1;function ht(lt,kt){var Jt=W.get(lt);return Jt||(Jt=JSON.stringify({injectedScriptId:0,id:X++}),W.set(lt,Jt),Y.set(Jt,lt),u.set(Jt,kt),Jt)}function pt(lt,kt){var Jt=kt===void 0?{}:kt,Ut=Jt.generatePreview,Ae=Ut!==void 0&&Ut,Ot=Jt.self,$t=Ot===void 0?lt:Ot,Zt=Ct(lt),Yt=Zt.type,Ve=Zt.subtype;return Yt==="undefined"?Zt:Yt==="string"||Yt==="boolean"||Ve==="null"?(Zt.value=lt,Zt):(Zt.description=ut(lt,$t),Yt==="number"?(Zt.value=lt,Zt):Yt==="symbol"?(Zt.objectId=ht(lt,$t),Zt):(Zt.className=Yt==="function"?"Function":Ve==="array"?"Array":Ve==="map"?"Map":Ve==="set"?"Set":Ve==="regexp"?"RegExp":Ve==="error"?lt.name:L.default(lt,!1),Ae&&(Zt.preview=At(lt,$t)),Zt.objectId=ht(lt,$t),Zt))}function ft(lt){return Y.get(lt)}r.clear=function(){Y.clear(),W.clear(),u.clear()},r.wrap=pt,r.getObj=ft,r.releaseObj=function(lt){var kt=ft(lt);W.delete(kt),u.delete(lt),Y.delete(lt)},r.getProperties=function(lt){for(var kt=lt.accessorPropertiesOnly,Jt=lt.objectId,Ut=lt.ownProperties,Ae=lt.generatePreview,Ot=[],$t={prototype:!Ut,unenumerable:!0,symbol:!kt},Zt=Y.get(Jt),Yt=u.get(Jt),Ve=q.default(Zt,$t),xe=Z.default(Zt),Ee=0,Qe=Ve.length;Ee<Qe;Ee++){var Bt=Ve[Ee],ot=void 0;try{ot=Yt[Bt]}catch{}var It={name:x.default(Bt),isOwn:dt.default(Yt,Bt)},Nt=Object.getOwnPropertyDescriptor(Zt,Bt);if(!Nt&&xe&&(Nt=Object.getOwnPropertyDescriptor(xe,Bt)),Nt){if(kt&&!Nt.get&&!Nt.set)continue;It.configurable=Nt.configurable,It.enumerable=Nt.enumerable,It.writable=Nt.writable,Nt.get&&(It.get=pt(Nt.get)),Nt.set&&(It.set=pt(Nt.set))}xe&&dt.default(xe,Bt)&&It.enumerable&&(It.isOwn=!0);var yt=!0;!It.isOwn&&It.get&&(yt=!1),yt&&(j.default(Bt)?(It.symbol=pt(Bt),It.value={type:"undefined"}):It.value=pt(ot,{generatePreview:Ae})),kt&&H.default(ot)&&C.default(ot)||Ot.push(It)}if(!xe||Ut||xt(Zt)||Ot.push({name:"__proto__",configurable:!0,enumerable:!1,isOwn:dt.default(Zt,"__proto__"),value:pt(xe,{self:Yt}),writable:!1}),kt)return{result:Ot};var re=[];if(xe&&!xt(Zt)&&re.push({name:"[[Prototype]]",value:pt(xe,{self:Yt})}),d.default(Zt)||o.default(Zt)){var Wt=function(Vt){for(var Tt=O.get(Vt),qt=Tt?ft(Tt):[],Gt=Vt.entries(),se=Gt.next().value;se;)d.default(Vt)?qt.push(new vt(se[1],se[0])):qt.push(new vt(se[1])),se=Gt.next().value;return qt}(Zt);re.push({name:"[[Entries]]",value:pt(Wt)})}return{internalProperties:re,result:Ot}};var $=5;function At(lt,kt){kt===void 0&&(kt=lt);var Jt=Ct(lt);Jt.description=ut(lt,kt);var Ut=!1,Ae=[],Ot=Q.default(lt),$t=Ot.length;$t>$&&($t=$,Ut=!0);for(var Zt=0;Zt<$t;Zt++){var Yt=Ot[Zt];Ae.push(_t(Yt,kt[Yt]))}if(Jt.properties=Ae,d.default(lt)){for(var Ve=[],xe=(Zt=0,lt.keys()),Ee=xe.next().value;Ee;){if(Zt>$){Ut=!0;break}Ve.push({key:At(Ee),value:At(lt.get(Ee))}),Zt++,Ee=xe.next().value}Jt.entries=Ve}else if(o.default(lt)){var Qe=[],Bt=(Zt=0,lt.keys());for(Ee=Bt.next().value;Ee;){if(Zt>$){Ut=!0;break}Qe.push({value:At(Ee)}),Zt++,Ee=Bt.next().value}Jt.entries=Qe}return Jt.overflow=Ut,Jt}function _t(lt,kt){var Jt=Ct(kt);Jt.name=lt;var Ut,Ae=Jt.subtype;return Ut=Jt.type==="object"?Ae==="null"?"null":Ae==="array"?"Array("+kt.length+")":Ae==="map"?"Map("+kt.size+")":Ae==="set"?"Set("+kt.size+")":L.default(kt,!1):x.default(kt),Jt.value=Ut,Jt}function ut(lt,kt){kt===void 0&&(kt=lt);var Jt=Ct(lt),Ut=Jt.type,Ae=Jt.subtype;return Ut==="string"?lt:Ut==="number"||Ut==="symbol"?x.default(lt):Ut==="function"?P.default(lt):Ae==="array"?"Array("+lt.length+")":Ae==="map"?"Map("+kt.size+")":Ae==="set"?"Set("+kt.size+")":Ae==="regexp"?x.default(lt):Ae==="error"?lt.stack:Ae==="internal#entry"?lt.name?'{"'+x.default(lt.name)+'" => "'+x.default(lt.value)+'"}':'"'+x.default(lt.value)+'"':L.default(lt,!1)}function Ct(lt){var kt=typeof lt,Jt="object";if(lt instanceof vt)Jt="internal#entry";else if(I.default(lt))Jt="null";else if(B.default(lt))Jt="array";else if(T.default(lt))Jt="regexp";else if(l.default(lt))Jt="error";else if(d.default(lt))Jt="map";else if(o.default(lt))Jt="set";else try{N.default(lt)&&(Jt="node")}catch{}return{type:kt,subtype:Jt}}var vt=function(lt,kt){kt&&(this.name=kt),this.value=lt};function xt(lt){return lt instanceof vt||!!(lt[0]&&lt[0]instanceof vt)}},2636:function(v,r,s){var _,x=this&&this.__extends||(_=function($,At){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,ut){_t.__proto__=ut}||function(_t,ut){for(var Ct in ut)ut.hasOwnProperty(Ct)&&(_t[Ct]=ut[Ct])},_($,At)},function($,At){function _t(){this.constructor=$}_($,At),$.prototype=At===null?Object.create(At):(_t.prototype=At.prototype,new _t)}),I=this&&this.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(r,"__esModule",{value:!0}),r.fullUrl=r.FetchRequest=r.XhrRequest=void 0;var B=I(s(1443)),H=I(s(6768)),N=I(s(9702)),l=I(s(6334)),d=I(s(8887)),o=I(s(4331)),T=I(s(8847)),L=I(s(3783)),Q=I(s(6930)),P=I(s(3875)),q=s(316),C=function($){function At(_t,ut,Ct){var vt=$.call(this)||this;return vt.xhr=_t,vt.reqHeaders={},vt.method=ut,vt.url=O(Ct),vt.id=q.createId(),vt}return x(At,$),At.prototype.toJSON=function(){return{method:this.method,url:this.url,id:this.id}},At.prototype.handleSend=function(_t){H.default(_t)||(_t=""),_t={name:X(this.url),url:this.url,data:_t,time:T.default(),reqHeaders:this.reqHeaders,method:this.method},d.default(this.reqHeaders)||(_t.reqHeaders=this.reqHeaders),this.emit("send",this.id,_t)},At.prototype.handleReqHeadersSet=function(_t,ut){_t&&ut&&(this.reqHeaders[_t]=ut)},At.prototype.handleHeadersReceived=function(){var _t=this.xhr,ut=ht(_t.getResponseHeader("Content-Type")||"");this.emit("headersReceived",this.id,{type:ut.type,subType:ut.subType,size:W(_t,!0,this.url),time:T.default(),resHeaders:Y(_t)})},At.prototype.handleDone=function(){var _t,ut,Ct,vt=this,xt=this.xhr,lt=xt.responseType,kt="",Jt=function(){vt.emit("done",vt.id,{status:xt.status,size:W(xt,!1,vt.url),time:T.default(),resTxt:kt})},Ut=ht(xt.getResponseHeader("Content-Type")||"");lt!=="blob"||Ut.type!=="text"&&Ut.subType!=="javascript"&&Ut.subType!=="json"?(lt!==""&&lt!=="text"||(kt=xt.responseText),lt==="json"&&(kt=JSON.stringify(xt.response)),Jt()):(_t=xt.response,ut=function(Ae,Ot){Ot&&(kt=Ot),Jt()},(Ct=new FileReader).onload=function(){ut(null,Ct.result)},Ct.onerror=function(Ae){ut(Ae)},Ct.readAsText(_t))},At}(B.default);r.XhrRequest=C;var Z=function($){function At(_t,ut){ut===void 0&&(ut={});var Ct=$.call(this)||this;return _t instanceof window.Request&&(_t=_t.url),Ct.url=O(_t),Ct.id=q.createId(),Ct.options=ut,Ct.reqHeaders=ut.headers||{},Ct.method=ut.method||"GET",Ct}return x(At,$),At.prototype.send=function(_t){var ut=this,Ct=this.options,vt=H.default(Ct.body)?Ct.body:"";this.emit("send",this.id,{name:X(this.url),url:this.url,data:vt,reqHeaders:this.reqHeaders,time:T.default(),method:this.method}),_t.then(function(xt){var lt=ht((xt=xt.clone()).headers.get("Content-Type"));return xt.text().then(function(kt){var Jt={type:lt.type,subType:lt.subType,time:T.default(),size:j(xt,kt),resTxt:kt,resHeaders:dt(xt),status:xt.status};d.default(ut.reqHeaders)||(Jt.reqHeaders=ut.reqHeaders),ut.emit("done",ut.id,Jt)}),xt})},At}(B.default);function j($,At){var _t=$.headers.get("Content-length");return _t?P.default(_t):ft(At)}function dt($){var At={};return $.headers.forEach(function(_t,ut){return At[ut]=_t}),At}function Y($){var At=$.getAllResponseHeaders().split(`
`),_t={};return L.default(At,function(ut){if((ut=o.default(ut))!==""){var Ct=ut.split(":",2),vt=Ct[0],xt=Ct[1];_t[vt]=o.default(xt)}}),_t}function W($,At,_t){var ut=0;function Ct(){if(!At){var vt=$.responseType,xt="";vt!==""&&vt!=="text"||(xt=$.responseText),xt&&(ut=ft(xt))}}if(function(vt){return!Q.default(vt,pt)}(_t))Ct();else try{ut=P.default($.getResponseHeader("Content-Length"))}catch{Ct()}return ut===0&&Ct(),ut}r.FetchRequest=Z;var u=document.createElement("a");function O($){return u.href=$,u.protocol+"//"+u.host+u.pathname+u.search+u.hash}function X($){var At=N.default($.split("/"));return At.indexOf("?")>-1&&(At=o.default(At.split("?")[0])),At===""&&(At=new l.default($).hostname),At}function ht($){if(!$)return{type:"unknown",subType:"unknown"};var At=$.split(";")[0].split("/");return{type:At[0],subType:N.default(At)}}r.fullUrl=O;var pt=window.location.origin;function ft($){var At=encodeURIComponent($).match(/%[89ABab]/g);return $.length+(At?At.length:0)}},316:function(v,r,s){var _,x=this&&this.__extends||(_=function(Z,j){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,Y){dt.__proto__=Y}||function(dt,Y){for(var W in Y)Y.hasOwnProperty(W)&&(dt[W]=Y[W])},_(Z,j)},function(Z,j){function dt(){this.constructor=Z}_(Z,j),Z.prototype=j===null?Object.create(j):(dt.prototype=j.prototype,new dt)}),I=this&&this.__awaiter||function(Z,j,dt,Y){return new(dt||(dt=Promise))(function(W,u){function O(pt){try{ht(Y.next(pt))}catch(ft){u(ft)}}function X(pt){try{ht(Y.throw(pt))}catch(ft){u(ft)}}function ht(pt){var ft;pt.done?W(pt.value):(ft=pt.value,ft instanceof dt?ft:new dt(function($){$(ft)})).then(O,X)}ht((Y=Y.apply(Z,j||[])).next())})},B=this&&this.__generator||function(Z,j){var dt,Y,W,u,O={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return u={next:X(0),throw:X(1),return:X(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function X(ht){return function(pt){return function(ft){if(dt)throw new TypeError("Generator is already executing.");for(;O;)try{if(dt=1,Y&&(W=2&ft[0]?Y.return:ft[0]?Y.throw||((W=Y.return)&&W.call(Y),0):Y.next)&&!(W=W.call(Y,ft[1])).done)return W;switch(Y=0,W&&(ft=[2&ft[0],W.value]),ft[0]){case 0:case 1:W=ft;break;case 4:return O.label++,{value:ft[1],done:!1};case 5:O.label++,Y=ft[1],ft=[0];continue;case 7:ft=O.ops.pop(),O.trys.pop();continue;default:if(W=O.trys,!((W=W.length>0&&W[W.length-1])||ft[0]!==6&&ft[0]!==2)){O=0;continue}if(ft[0]===3&&(!W||ft[1]>W[0]&&ft[1]<W[3])){O.label=ft[1];break}if(ft[0]===6&&O.label<W[1]){O.label=W[1],W=ft;break}if(W&&O.label<W[2]){O.label=W[2],O.ops.push(ft);break}W[2]&&O.ops.pop(),O.trys.pop();continue}ft=j.call(Z,O)}catch($){ft=[6,$],Y=0}finally{dt=W=0}if(5&ft[0])throw ft[1];return{value:ft[0]?ft[1]:void 0,done:!0}}([ht,pt])}}},H=this&&this.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(r,"__esModule",{value:!0}),r.getBase64Content=r.getTextContent=r.getOrigin=r.getUrl=r.createErr=r.ErrorWithCode=r.getAbsoluteUrl=r.createId=void 0;var N=H(s(5229)),l=H(s(1216)),d=H(s(6930)),o=H(s(6334)),T=H(s(1792)),L=H(s(6610)),Q=l.default(1e3,9999)+".";r.createId=function(){return N.default(Q)},r.getAbsoluteUrl=function(Z){var j=document.createElement("a");return j.href=Z,j.href};var P=function(Z){function j(dt,Y){var W=this.constructor,u=Z.call(this,Y)||this;return u.code=dt,Object.setPrototypeOf(u,W.prototype),u}return x(j,Z),j}(Error);function q(Z,j,dt){return dt===void 0&&(dt=""),I(this,void 0,void 0,function(){var Y;return B(this,function(W){switch(W.label){case 0:return W.trys.push([0,2,,8]),(Y=new o.default(Z)).setQuery("__chobitsu-hide__","true"),[4,L.default.get(Y.toString(),{responseType:j})];case 1:return[2,W.sent().data];case 2:if(W.sent(),!dt)return[3,7];W.label=3;case 3:return W.trys.push([3,6,,7]),[4,L.default.get(C(dt,Z),{responseType:j})];case 4:return[4,W.sent().data];case 5:return[2,W.sent()];case 6:return W.sent(),[3,7];case 7:return[3,8];case 8:return[2,j==="arraybuffer"?new ArrayBuffer(0):""]}})})}function C(Z,j){var dt=new o.default(Z);return dt.setQuery("url",j),dt.setQuery("__chobitsu-hide__","true"),dt.toString()}r.ErrorWithCode=P,r.createErr=function(Z,j){return new P(Z,j)},r.getUrl=function(){var Z=location.href;return d.default(Z,"about:")?parent.location.href:Z},r.getOrigin=function(){var Z=location.origin;return Z==="null"?parent.location.origin:Z},r.getTextContent=function(Z,j){return j===void 0&&(j=""),I(this,void 0,void 0,function(){return B(this,function(dt){switch(dt.label){case 0:return[4,q(Z,"text",j)];case 1:return[2,dt.sent()]}})})},r.getBase64Content=function(Z,j){return j===void 0&&(j=""),I(this,void 0,void 0,function(){var dt;return B(this,function(Y){switch(Y.label){case 0:return dt=T.default,[4,q(Z,"arraybuffer",j)];case 1:return[2,dt.apply(void 0,[Y.sent(),"base64"])]}})})}},3191:function(v,r,s){(r=s(3645)(!1)).push([v.id,"#_console{padding-top:40px;padding-bottom:24px;width:100%;height:100%}#_console._js-input-hidden{padding-bottom:0}#_console ._control{position:absolute;width:100%;height:40px;left:0;top:0;cursor:default;font-size:0;background:var(--darker-background);color:var(--primary);line-height:20px;border-bottom:1px solid var(--border);padding:10px 10px 10px 35px}#_console ._control [class*=' _icon-'],#_console ._control [class^='_icon-']{display:inline-block;padding:10px;font-size:16px;position:absolute;top:0;cursor:pointer;transition:color .3s}#_console ._control [class*=' _icon-']._active,#_console ._control [class*=' _icon-']:active,#_console ._control [class^='_icon-']._active,#_console ._control [class^='_icon-']:active{color:var(--accent)}#_console ._control ._icon-clear{padding-right:0;left:0}#_console ._control ._icon-copy{right:0}#_console ._control ._icon-filter{right:23px}#_console ._control ._level{cursor:pointer;font-size:12px;height:20px;display:inline-block;margin:0 2px;padding:0 4px;line-height:20px;transition:background-color .3s,color .3s}#_console ._control ._level._active{background:var(--highlight);color:var(--select-foreground)}#_console ._control ._filter-text{white-space:nowrap;position:absolute;line-height:20px;max-width:80px;overflow:hidden;right:55px;font-size:14px;text-overflow:ellipsis}#_console ._js-input{pointer-events:none;position:absolute;z-index:100;left:0;bottom:0;width:100%;border-top:1px solid var(--border);height:24px}#_console ._js-input ._icon-arrow-right{line-height:23px;color:var(--accent);position:absolute;left:10px;top:0;z-index:10}#_console ._js-input._active{height:100%;padding-top:40px;padding-bottom:40px;border-top:none}#_console ._js-input._active ._icon-arrow-right{display:none}#_console ._js-input._active textarea{overflow:auto;padding-left:10px}#_console ._js-input ._buttons{display:none;position:absolute;left:0;bottom:0;width:100%;height:40px;color:var(--primary);background:var(--darker-background);font-size:12px;border-top:1px solid var(--border)}#_console ._js-input ._buttons ._button{pointer-events:all;cursor:pointer;flex:1;text-align:center;border-right:1px solid var(--border);height:40px;line-height:40px;transition:background-color .3s,color .3s}#_console ._js-input ._buttons ._button:last-child{border-right:none}#_console ._js-input ._buttons ._button:active{color:var(--select-foreground);background:var(--highlight)}#_console ._js-input textarea{overflow:hidden;pointer-events:all;padding:3px 10px;padding-left:25px;outline:0;border:none;font-size:14px;width:100%;height:100%;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;resize:none;color:var(--primary);background:var(--background)}._safe-area #_console{padding-bottom:calc(24px + env(safe-area-inset-bottom))}._safe-area #_console._js-input-hidden{padding-bottom:0}._safe-area #_console ._js-input{height:calc(24px + env(safe-area-inset-bottom))}._safe-area #_console ._js-input._active{height:100%;padding-bottom:calc(40px + env(safe-area-inset-bottom))}._safe-area #_console ._js-input ._buttons{height:calc(40px + env(safe-area-inset-bottom))}._safe-area #_console ._js-input ._buttons ._button{height:calc(40px + env(safe-area-inset-bottom))}",""]),v.exports=r},13:function(v,r,s){(r=s(3645)(!1)).push([v.id,"._dev-tools{position:absolute;width:100%;height:100%;left:0;bottom:0;background:var(--background);z-index:500;display:none;padding-top:40px!important;opacity:0;transition:opacity .3s;border-top:1px solid var(--border)}._dev-tools ._resizer{position:absolute;width:100%;touch-action:none;left:0;top:-8px;cursor:row-resize;z-index:120}._dev-tools ._tools{overflow:auto;-webkit-overflow-scrolling:touch;height:100%;width:100%;position:relative}._dev-tools ._tools ._tool{position:absolute;width:100%;height:100%;left:0;top:0;overflow:hidden;display:none}",""]),v.exports=r},5896:function(v,r,s){(r=s(3645)(!1)).push([v.id,"#_elements ._elements{position:absolute;width:100%;height:100%;left:0;top:0;padding-top:40px;padding-bottom:24px;font-size:14px}#_elements ._control{position:absolute;width:100%;height:40px;left:0;top:0;cursor:default;font-size:0;background:var(--darker-background);color:var(--primary);line-height:20px;border-bottom:1px solid var(--border);padding:10px 0}#_elements ._control [class*=' _icon-'],#_elements ._control [class^='_icon-']{display:inline-block;padding:10px;font-size:16px;position:absolute;top:0;cursor:pointer;transition:color .3s}#_elements ._control [class*=' _icon-']._active,#_elements ._control [class*=' _icon-']:active,#_elements ._control [class^='_icon-']._active,#_elements ._control [class^='_icon-']:active{color:var(--accent)}#_elements ._control ._icon-eye{right:0}#_elements ._control ._icon-copy{right:23px}#_elements ._control ._icon-delete{right:46px}#_elements ._dom-viewer-container{overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;padding:5px 0}#_elements ._crumbs{position:absolute;width:100%;height:24px;left:0;top:0;top:initial;line-height:24px;bottom:0;border-top:1px solid var(--border);background:var(--darker-background);color:var(--primary);font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}#_elements ._crumbs li{cursor:pointer;padding:0 7px;display:inline-block}#_elements ._crumbs li:hover,#_elements ._crumbs li:last-child{background:var(--highlight)}#_elements ._crumbs ._icon-arrow-right{font-size:12px;position:relative;top:1px}#_elements ._detail{position:absolute;width:100%;height:100%;left:0;top:0;z-index:10;padding-top:40px;display:none;background:var(--background)}#_elements ._detail ._control{padding:10px 35px}#_elements ._detail ._control ._element-name{font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%;display:inline-block}#_elements ._detail ._control ._icon-arrow-left{left:0}#_elements ._detail ._control ._icon-refresh{right:0}#_elements ._detail ._element{overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%}#_elements ._section{border-bottom:1px solid var(--border);color:var(--foreground);margin:10px 0}#_elements ._section h2{color:var(--primary);background:var(--darker-background);border-top:1px solid var(--border);padding:10px;line-height:18px;font-size:14px;transition:background-color .3s}#_elements ._section h2 ._btn{margin-left:5px;float:right;color:var(--primary);width:18px;height:18px;font-size:16px;cursor:pointer;transition:color .3s}#_elements ._section h2 ._btn._filter-text{width:auto;max-width:80px;font-size:14px;overflow:hidden;font-weight:400;text-overflow:ellipsis;display:inline-block}#_elements ._section h2 ._btn:active{color:var(--accent)}#_elements ._section h2 ._btn._btn-disabled{color:inherit!important;cursor:default!important;pointer-events:none;opacity:.5}#_elements ._section h2 ._btn._btn-disabled *{pointer-events:none}#_elements ._section h2._active-effect{cursor:pointer}#_elements ._section h2._active-effect:active{background:var(--highlight);color:var(--select-foreground)}#_elements ._attributes{font-size:12px}#_elements ._attributes a{color:var(--link-color)}#_elements ._attributes ._table-wrapper{overflow-x:auto;-webkit-overflow-scrolling:touch}#_elements ._attributes table td{padding:5px 10px}#_elements ._text-content{background:#fff}#_elements ._text-content ._content{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px}#_elements ._style-color{position:relative;top:1px;width:10px;height:10px;border-radius:50%;margin-right:2px;border:1px solid var(--border);display:inline-block}#_elements ._box-model{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px;text-align:center;border-bottom:1px solid var(--color)}#_elements ._computed-style{font-size:12px}#_elements ._computed-style a{color:var(--link-color)}#_elements ._computed-style ._table-wrapper{overflow-y:auto;-webkit-overflow-scrolling:touch;max-height:200px;border-top:1px solid var(--border)}#_elements ._computed-style table td{padding:5px 10px}#_elements ._computed-style table td._key{white-space:nowrap;color:var(--var-color)}#_elements ._styles{font-size:12px}#_elements ._styles ._style-wrapper{padding:10px}#_elements ._styles ._style-wrapper ._style-rules{border:1px solid var(--border);padding:10px;margin-bottom:10px}#_elements ._styles ._style-wrapper ._style-rules ._rule{padding-left:2em;word-break:break-all}#_elements ._styles ._style-wrapper ._style-rules ._rule a{color:var(--link-color)}#_elements ._styles ._style-wrapper ._style-rules ._rule span{color:var(--var-color)}#_elements ._styles ._style-wrapper ._style-rules:last-child{margin-bottom:0}#_elements ._listeners{font-size:12px}#_elements ._listeners ._listener-wrapper{padding:10px}#_elements ._listeners ._listener-wrapper ._listener{margin-bottom:10px;overflow:hidden;border:1px solid var(--border)}#_elements ._listeners ._listener-wrapper ._listener ._listener-type{padding:10px;background:var(--darker-background);color:var(--primary)}#_elements ._listeners ._listener-wrapper ._listener ._listener-content li{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px;border-top:none}._safe-area #_elements ._elements{padding-bottom:calc(24px + env(safe-area-inset-bottom))}._safe-area #_elements ._crumbs{height:calc(24px + env(safe-area-inset-bottom))}._safe-area #_elements ._element{padding-bottom:calc(0px + env(safe-area-inset-bottom))}@media screen and (min-width:680px){#_elements ._elements{width:50%}#_elements ._elements ._control ._icon-eye{display:none}#_elements ._elements ._control ._icon-copy{right:0}#_elements ._elements ._control ._icon-delete{right:23px}#_elements ._detail{width:50%;left:initial;right:0;border-left:1px solid var(--border)}#_elements ._detail ._control{padding-left:10px}#_elements ._detail ._control ._icon-arrow-left{display:none}}",""]),v.exports=r},9195:function(v,r,s){(r=s(3645)(!1)).push([v.id,"._container ._entry-btn{touch-action:none;width:40px;height:40px;display:flex;background:#000;opacity:.3;border-radius:10px;position:relative;z-index:1000;transition:opacity .3s;color:#fff;font-size:25px;align-items:center;justify-content:center}._container ._entry-btn._active,._container ._entry-btn:active{opacity:.8}",""]),v.exports=r},879:function(v,r,s){(r=s(3645)(!1)).push([v.id,"#_info{overflow-y:auto;-webkit-overflow-scrolling:touch}#_info li{margin:10px;border:1px solid var(--border)}#_info li ._content,#_info li ._title{padding:10px}#_info li ._title{position:relative;padding-bottom:0;color:var(--accent)}#_info li ._title ._icon-copy{position:absolute;right:10px;top:14px;color:var(--primary);cursor:pointer;transition:color .3s}#_info li ._title ._icon-copy:active{color:var(--accent)}#_info li ._content{margin:0;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;color:var(--foreground);font-size:12px;word-break:break-all}#_info li ._content table{width:100%;border-collapse:collapse}#_info li ._content table td,#_info li ._content table th{border:1px solid var(--border);padding:10px}#_info li ._content *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#_info li ._content a{color:var(--link-color)}#_info li ._device-key,#_info li ._system-key{width:100px}._safe-area #_info{padding-bottom:calc(10px + env(safe-area-inset-bottom))}",""]),v.exports=r},3180:function(v,r,s){(r=s(3645)(!1)).push([v.id,"#_network ._network{position:absolute;width:100%;height:100%;left:0;top:0;padding-top:39px}#_network ._control{position:absolute;width:100%;height:40px;left:0;top:0;cursor:default;font-size:0;background:var(--darker-background);color:var(--primary);line-height:20px;border-bottom:1px solid var(--border);padding:10px;border-bottom:none}#_network ._control [class*=' _icon-'],#_network ._control [class^='_icon-']{display:inline-block;padding:10px;font-size:16px;position:absolute;top:0;cursor:pointer;transition:color .3s}#_network ._control [class*=' _icon-']._active,#_network ._control [class*=' _icon-']:active,#_network ._control [class^='_icon-']._active,#_network ._control [class^='_icon-']:active{color:var(--accent)}#_network ._control ._title{font-size:14px}#_network ._control ._icon-clear{left:23px}#_network ._control ._icon-eye{right:0}#_network ._control ._icon-copy{right:23px}#_network ._control ._icon-filter{right:46px}#_network ._control ._filter-text{white-space:nowrap;position:absolute;line-height:20px;max-width:80px;overflow:hidden;right:88px;font-size:14px;text-overflow:ellipsis}#_network ._control ._icon-record{left:0}#_network ._control ._icon-record._recording{color:var(--console-error-foreground);text-shadow:0 0 4px var(--console-error-foreground)}#_network ._request-error{color:var(--console-error-foreground)}#_network .luna-data-grid:focus .luna-data-grid-data-container ._request-error.luna-data-grid-selected{background:var(--console-error-background)}#_network .luna-data-grid{border-left:none;border-right:none}#_network ._detail{position:absolute;width:100%;height:100%;left:0;top:0;z-index:10;display:none;padding-top:40px;background:var(--background)}#_network ._detail ._control{padding:10px 35px;border-bottom:1px solid var(--border)}#_network ._detail ._control ._url{font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%;display:inline-block}#_network ._detail ._control ._icon-arrow-left{left:0}#_network ._detail ._control ._icon-delete{left:0;display:none}#_network ._detail ._control ._icon-copy{right:0}#_network ._detail ._http{overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%}#_network ._detail ._http ._section{border-top:1px solid var(--border);border-bottom:1px solid var(--border);margin-top:10px;margin-bottom:10px}#_network ._detail ._http ._section h2{background:var(--darker-background);color:var(--primary);padding:10px;line-height:18px;font-size:14px}#_network ._detail ._http ._section table{color:var(--foreground)}#_network ._detail ._http ._section table *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#_network ._detail ._http ._section table td{font-size:12px;padding:5px 10px;word-break:break-all}#_network ._detail ._http ._section table ._key{white-space:nowrap;font-weight:700;color:var(--accent)}#_network ._detail ._http ._data,#_network ._detail ._http ._response{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px;font-size:12px;margin:10px 0;white-space:pre-wrap;border-top:1px solid var(--border);color:var(--foreground);border-bottom:1px solid var(--border)}._safe-area #_network ._http{padding-bottom:calc(0px + env(safe-area-inset-bottom))}@media screen and (min-width:680px){#_network ._network ._control ._icon-eye{display:none}#_network ._network ._control ._icon-copy{right:0}#_network ._network ._control ._icon-filter{right:23px}#_network ._network ._control ._filter-text{right:55px}#_network ._detail{width:50%;left:initial;right:0;border-left:1px solid var(--border)}#_network ._detail ._control ._icon-arrow-left{display:none}#_network ._detail ._control ._icon-delete{display:block}}",""]),v.exports=r},2488:function(v,r,s){(r=s(3645)(!1)).push([v.id,"#_resources{overflow-y:auto;-webkit-overflow-scrolling:touch;padding:10px;font-size:14px}#_resources ._section{margin-bottom:10px;overflow:hidden;border:1px solid var(--border)}#_resources ._section._warn{border:1px solid var(--console-warn-border)}#_resources ._section._warn ._title{background:var(--console-warn-background);color:var(--console-warn-foreground)}#_resources ._section._danger{border:1px solid var(--console-error-border)}#_resources ._section._danger ._title{background:var(--console-error-background);color:var(--console-error-foreground)}#_resources ._section._cookie,#_resources ._section._local-storage,#_resources ._section._session-storage{border:none}#_resources ._section._cookie ._title,#_resources ._section._local-storage ._title,#_resources ._section._session-storage ._title{border:1px solid var(--border);border-bottom:none}#_resources ._title{padding:10px;line-height:18px;color:var(--primary);background:var(--darker-background)}#_resources ._title ._btn{margin-left:5px;float:right;color:var(--primary);width:18px;height:18px;font-size:16px;cursor:pointer;transition:color .3s}#_resources ._title ._btn._filter-text{width:auto;max-width:80px;font-size:14px;overflow:hidden;font-weight:400;text-overflow:ellipsis;display:inline-block}#_resources ._title ._btn:active{color:var(--accent)}#_resources ._title ._btn._btn-disabled{color:inherit!important;cursor:default!important;pointer-events:none;opacity:.5}#_resources ._title ._btn._btn-disabled *{pointer-events:none}#_resources ._link-list{font-size:12px;color:var(--foreground)}#_resources ._link-list li{padding:10px;word-break:break-all}#_resources ._link-list li a{color:var(--link-color)!important}#_resources ._image-list{color:var(--foreground);font-size:12px;display:flex;flex-wrap:wrap;padding:10px!important}#_resources ._image-list:after{content:'';display:block;clear:both}#_resources ._image-list li{flex-grow:1;cursor:pointer;overflow-y:hidden}#_resources ._image-list li._image{height:100px;font-size:0}#_resources ._image-list li img{height:100px;min-width:100%;-o-object-fit:cover;object-fit:cover}._safe-area #_resources{padding-bottom:calc(10px + env(safe-area-inset-bottom))}",""]),v.exports=r},8011:function(v,r,s){(r=s(3645)(!1)).push([v.id,"#_settings{overflow-y:auto;-webkit-overflow-scrolling:touch}._safe-area #_settings{padding-bottom:calc(0px + env(safe-area-inset-bottom))}",""]),v.exports=r},5571:function(v,r,s){(r=s(3645)(!1)).push([v.id,"#_snippets{overflow-y:auto;-webkit-overflow-scrolling:touch;padding:10px}#_snippets ._section{margin-bottom:10px;border:1px solid var(--border);overflow:hidden;cursor:pointer}#_snippets ._section:active ._name{background:var(--highlight);color:var(--select-foreground)}#_snippets ._section ._name{padding:10px;line-height:18px;color:var(--primary);background:var(--darker-background);transition:background-color .3s}#_snippets ._section ._name ._btn{margin-left:10px;float:right;text-align:center;width:18px;height:18px;font-size:12px}#_snippets ._section ._description{font-size:12px;color:var(--foreground);padding:10px;transition:background-color .3s}._safe-area #_snippets{padding-bottom:calc(10px + env(safe-area-inset-bottom))}",""]),v.exports=r},7346:function(v,r,s){(r=s(3645)(!1)).push([v.id,"._search-highlight-block{display:inline}._search-highlight-block ._keyword{background:var(--console-warn-background);color:var(--console-warn-foreground)}",""]),v.exports=r},1344:function(v,r,s){(r=s(3645)(!1)).push([v.id,"#_sources{font-size:0;overflow-y:auto;-webkit-overflow-scrolling:touch;color:var(--foreground)}#_sources ._code-wrapper,#_sources ._raw-wrapper{overflow-x:auto;-webkit-overflow-scrolling:touch;width:100%;min-height:100%}#_sources ._code,#_sources ._raw{height:100%}#_sources ._code ._keyword,#_sources ._raw ._keyword{color:var(--keyword-color)}#_sources ._code ._comment,#_sources ._raw ._comment{color:var(--comment-color)}#_sources ._code ._number,#_sources ._raw ._number{color:var(--number-color)}#_sources ._code ._string,#_sources ._raw ._string{color:var(--string-color)}#_sources ._code ._operator,#_sources ._raw ._operator{color:var(--operator-color)}#_sources ._code[data-type=html] ._keyword,#_sources ._raw[data-type=html] ._keyword{color:var(--tag-name-color)}#_sources ._image{font-size:12px}#_sources ._image ._breadcrumb{background:var(--darker-background);color:var(--primary);-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;margin-bottom:10px;word-break:break-all;padding:10px;font-size:16px;min-height:40px;border-bottom:1px solid var(--border)}#_sources ._image ._img-container{text-align:center}#_sources ._image ._img-container img{max-width:100%}#_sources ._image ._img-info{text-align:center;margin:20px 0;color:var(--foreground)}#_sources ._json{padding:0 10px}#_sources ._json *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#_sources iframe{width:100%;height:100%}",""]),v.exports=r},8020:function(v,r,s){(r=s(3645)(!1)).push([v.id,"._container a,._container abbr,._container acronym,._container address,._container applet,._container article,._container aside,._container audio,._container b,._container big,._container blockquote,._container canvas,._container caption,._container center,._container cite,._container code,._container dd,._container del,._container details,._container dfn,._container dl,._container dt,._container em,._container embed,._container fieldset,._container figcaption,._container figure,._container footer,._container form,._container h1,._container h2,._container h3,._container h4,._container h5,._container h6,._container header,._container hgroup,._container i,._container iframe,._container img,._container ins,._container kbd,._container label,._container legend,._container li,._container mark,._container menu,._container nav,._container object,._container ol,._container output,._container p,._container pre,._container q,._container ruby,._container s,._container samp,._container section,._container small,._container span,._container strike,._container strong,._container sub,._container summary,._container sup,._container table,._container tbody,._container td,._container tfoot,._container th,._container thead,._container time,._container tr,._container tt,._container u,._container ul,._container var,._container video{margin:0;padding:0;border:0;font-size:100%}._container article,._container aside,._container details,._container figcaption,._container figure,._container footer,._container header,._container hgroup,._container menu,._container nav,._container section{display:block}._container body{line-height:1}._container ol,._container ul{list-style:none}._container blockquote,._container q{quotes:none}._container blockquote:after,._container blockquote:before,._container q:after,._container q:before{content:'';content:none}._container table{border-collapse:collapse;border-spacing:0}",""]),v.exports=r},8516:function(v,r,s){(r=s(3645)(!1)).push([v.id,`.luna-console{background:var(--background)}.luna-console-header{color:var(--link-color);border-bottom-color:var(--border)}.luna-console-nesting-level{border-right-color:var(--border)}.luna-console-nesting-level::before{border-bottom-color:var(--border)}.luna-console-log-container.luna-console-selected .luna-console-log-item{background:var(--contrast)}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:var(--border)}.luna-console-log-item{border-bottom-color:var(--border);color:var(--foreground)}.luna-console-log-item a{color:var(--link-color)!important}.luna-console-log-item .luna-console-icon-container .luna-console-icon{color:var(--foreground)}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{color:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{color:#e8a400}.luna-console-log-item .luna-console-count{color:var(--select-foreground);background:var(--highlight)}.luna-console-log-item.luna-console-warn{color:var(--console-warn-foreground);background:var(--console-warn-background);border-color:var(--console-warn-border)}.luna-console-log-item.luna-console-error{background:var(--console-error-background);color:var(--console-error-foreground);border-color:var(--console-error-border)}.luna-console-log-item.luna-console-error .luna-console-count{background:var(--console-error-foreground)}.luna-console-log-item .luna-console-code .luna-console-key{color:var(--var-color)}.luna-console-log-item .luna-console-code .luna-console-number{color:var(--number-color)}.luna-console-log-item .luna-console-code .luna-console-null{color:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-string{color:var(--string-color)}.luna-console-log-item .luna-console-code .luna-console-boolean{color:var(--keyword-color)}.luna-console-log-item .luna-console-code .luna-console-special{color:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-keyword{color:var(--keyword-color)}.luna-console-log-item .luna-console-code .luna-console-operator{color:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-comment{color:var(--comment-color)}.luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-log-item .luna-console-log-content .luna-console-undefined{color:var(--operator-color)}.luna-console-log-item .luna-console-log-content .luna-console-number{color:var(--number-color)}.luna-console-log-item .luna-console-log-content .luna-console-boolean{color:var(--keyword-color)}.luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-log-item .luna-console-log-content .luna-console-symbol{color:var(--var-color)}.luna-console-preview .luna-console-key{color:var(--var-color)}.luna-console-preview .luna-console-number{color:var(--number-color)}.luna-console-preview .luna-console-null{color:var(--operator-color)}.luna-console-preview .luna-console-string{color:var(--string-color)}.luna-console-preview .luna-console-boolean{color:var(--keyword-color)}.luna-console-preview .luna-console-special{color:var(--operator-color)}.luna-console-preview .luna-console-keyword{color:var(--keyword-color)}.luna-console-preview .luna-console-operator{color:var(--operator-color)}.luna-console-preview .luna-console-comment{color:var(--comment-color)}.luna-object-viewer{color:var(--primary);font-size:12px!important}.luna-object-viewer-null{color:var(--operator-color)}.luna-object-viewer-regexp,.luna-object-viewer-string{color:var(--string-color)}.luna-object-viewer-number{color:var(--number-color)}.luna-object-viewer-boolean{color:var(--keyword-color)}.luna-object-viewer-special{color:var(--operator-color)}.luna-object-viewer-key,.luna-object-viewer-key-lighter{color:var(--var-color)}.luna-object-viewer-expanded:before{border-color:transparent;border-top-color:var(--foreground)}.luna-object-viewer-collapsed:before{border-top-color:transparent;border-left-color:var(--foreground)}.luna-notification{pointer-events:none!important;padding:10px;z-index:1000}.luna-notification-item{z-index:500;color:var(--foreground);background:var(--background);box-shadow:none;padding:5px 10px;border:1px solid var(--border)}.luna-notification-upper{margin-bottom:10px}.luna-notification-lower{margin-top:10px}.luna-data-grid{color:var(--foreground);background:var(--background);border-color:var(--border)}.luna-data-grid:focus .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:var(--accent)}.luna-data-grid td,.luna-data-grid th{border-color:var(--border)}.luna-data-grid th{background:var(--darker-background)}.luna-data-grid th.luna-data-grid-sortable:active,.luna-data-grid th.luna-data-grid-sortable:hover{color:var(--select-foreground);background:var(--highlight)}.luna-data-grid .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:var(--highlight)}.luna-data-grid .luna-data-grid-data-container tr:nth-child(even){background:var(--contrast)}.luna-dom-viewer{color:var(--foreground)}.luna-dom-viewer .luna-dom-viewer-html-tag,.luna-dom-viewer .luna-dom-viewer-tag-name{color:var(--tag-name-color)}.luna-dom-viewer .luna-dom-viewer-attribute-name{color:var(--attribute-name-color)}.luna-dom-viewer .luna-dom-viewer-attribute-value{color:var(--string-color)}.luna-dom-viewer .luna-dom-viewer-html-comment{color:var(--comment-color)}.luna-dom-viewer .luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:var(--contrast)}.luna-dom-viewer .luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:var(--highlight)}.luna-dom-viewer .luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:var(--accent);opacity:.2}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-key{color:var(--var-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-number{color:var(--number-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-null{color:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-string{color:var(--string-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-boolean{color:var(--keyword-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-special{color:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:var(--keyword-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-operator{color:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-comment{color:var(--comment-color)}.luna-dom-viewer-children{margin:0;padding-left:15px!important}.luna-modal{z-index:9999999}.luna-modal-body,.luna-modal-input{color:var(--foreground);background:var(--background)}.luna-modal-input{-webkit-user-select:text!important;-moz-user-select:text!important;-ms-user-select:text!important;user-select:text!important;border-color:var(--border)}.luna-modal-button-group .luna-modal-secondary{border-color:var(--border);color:var(--foreground);background:var(--background)}.luna-modal-button-group .luna-modal-primary{background:var(--accent)}.luna-modal-button-group .luna-modal-button:active::before{background:var(--accent)}.luna-tab{position:absolute;left:0;top:0;color:var(--foreground);background:var(--darker-background)}.luna-tab-tabs-container{border-color:var(--border)}.luna-tab-item.luna-tab-selected,.luna-tab-item:hover{background:var(--highlight);color:var(--select-foreground)}.luna-tab-slider{background:var(--accent)}.luna-text-viewer{color:var(--foreground);border:none;border-bottom:1px solid var(--border);background:var(--background);font-size:12px}.luna-text-viewer .luna-text-viewer-line-text{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-text-viewer .luna-text-viewer-line-text *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-text-viewer .luna-text-viewer-copy,.luna-text-viewer .luna-text-viewer-line-number{border-color:var(--border)}.luna-text-viewer .luna-text-viewer-copy .luna-text-viewer-icon-check{color:var(--accent)}.luna-text-viewer .luna-text-viewer-copy{background-color:var(--background)}.luna-setting{color:var(--foreground);background:var(--background)}.luna-setting-item.luna-setting-selected,.luna-setting-item:hover{background:var(--darker-background)}.luna-setting-item.luna-setting-selected:focus{outline:0}.luna-setting-item-title{font-size:14px}.luna-setting-item-separator{border-color:var(--border)}.luna-setting-item-checkbox input{border-color:var(--border)}.luna-setting-item-checkbox input:checked{background-color:var(--accent);border-color:var(--accent)}.luna-setting-item-select .luna-setting-select select{color:var(--foreground);border-color:var(--border);background:var(--background)}.luna-setting-item-select .luna-setting-select:after{border-top-color:var(--foreground)}.luna-setting-item-button button{color:var(--accent);background:var(--background);border-color:var(--border)}.luna-setting-item-button button:active,.luna-setting-item-button button:hover{background:var(--darker-background)}.luna-setting-item-button button:active{border:1px solid var(--accent)}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{background:var(--border)}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar .luna-setting-range-track-progress{background:var(--accent)}.luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{border-color:var(--border);background:radial-gradient(circle at center,var(--dark) 0,var(--dark) 15%,var(--light) 22%,var(--light) 100%)}.luna-box-model{background:0 0}.luna-box-model-position{color:var(--foreground)}._container{min-width:320px;pointer-events:none;position:fixed;left:0;top:0;width:100%;height:100%;z-index:9999999;color:var(--foreground);font-family:".SFNSDisplay-Regular","Helvetica Neue","Lucida Grande","Segoe UI",Tahoma,sans-serif;font-size:14px;direction:ltr}._container._dark{color-scheme:dark}._container *{box-sizing:border-box;pointer-events:all;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;-webkit-text-size-adjust:none}._container ul{list-style:none;padding:0;margin:0}._container h1,._container h2,._container h3,._container h4{margin:0}._container h2{font-size:14px}._container h2 [class*=' _icon-'],._container h2 [class^='_icon-']{font-weight:400}._hidden{display:none}._icon-disabled{opacity:.5;pointer-events:none;cursor:default!important}._icon-disabled:active{color:inherit!important}._tag-name-color{color:var(--tag-name-color)}._function-color{color:var(--function-color)}._attribute-name-color{color:var(--attribute-name-color)}._operator-color{color:var(--operator-color)}._string-color{color:var(--string-color)}`,""]),v.exports=r},6833:function(v,r,s){(r=s(3645)(!1)).push([v.id,".luna-box-model{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;display:inline-block;color:#222;font-size:12px;text-align:center;white-space:nowrap}.luna-box-model.luna-box-model-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-box-model.luna-box-model-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-box-model .luna-box-model-hidden,.luna-box-model.luna-box-model-hidden{display:none}.luna-box-model .luna-box-model-invisible,.luna-box-model.luna-box-model-invisible{visibility:hidden}.luna-box-model *{box-sizing:border-box}.luna-box-model.luna-box-model-theme-dark{color:#a5a5a5;background-color:#242424}.luna-box-model-label{position:absolute;margin-left:3px;padding:0 2px}.luna-box-model-bottom,.luna-box-model-left,.luna-box-model-right,.luna-box-model-top{display:inline-block}.luna-box-model-left,.luna-box-model-right{vertical-align:middle}.luna-box-model-border,.luna-box-model-content,.luna-box-model-margin,.luna-box-model-padding,.luna-box-model-position{position:relative;display:inline-block;text-align:center;vertical-align:middle;padding:3px;margin:3px}.luna-box-model-position{border:1px grey dotted}.luna-box-model-margin{color:#333;border:1px dashed;background:rgba(246,178,107,.66)}.luna-box-model-border{color:#333;border:1px #000 solid;background:rgba(255,229,153,.66)}.luna-box-model-padding{color:#333;border:1px grey dashed;background:rgba(147,196,125,.55)}.luna-box-model-content{color:#333;border:1px grey solid;min-width:100px;background:rgba(111,168,220,.66)}",""]),v.exports=r},9327:function(v,r,s){(r=s(3645)(!1)).push([v.id,`@font-face{font-family:luna-console-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAasAAsAAAAACnAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAI4AAADcIsYnIk9TLzIAAAGYAAAAPgAAAFZWmlGRY21hcAAAAdgAAAD2AAACyDioZ9NnbHlmAAAC0AAAAZgAAAH8Lq6nDGhlYWQAAARoAAAAMQAAADZ25cSzaGhlYQAABJwAAAAdAAAAJAgCBBRobXR4AAAEvAAAABkAAABYGAH//GxvY2EAAATYAAAAGAAAAC4J8glUbWF4cAAABPAAAAAfAAAAIAEjAFBuYW1lAAAFEAAAASkAAAIWm5e+CnBvc3QAAAY8AAAAcAAAAJ7qA/7MeJxNjTsOwjAQRJ8TJzE2hPBrKBBHQByAAiGqFBRcIBVCiqhyBA7O2AgRr9Y7M2+lxQCeAyeyy7W9U/fd8GKL5fsiH2vTPx8d7ufEbJpO/aagYc+RM7fEjBKnmiRuySmZUTNNf0wybYSRj9VoO4iU7NQh+Up8qelZs5EupP75Shfm2oz3Kmkvt/gARcgJKwAAeJxjYGQUZ5zAwMrAwNTJdIaBgaEfQjO+ZjBi5ACKMrAyM2AFAWmuKQwHGHQ/srGAuDEsTGBhRhABALQ1CMwAAHiczdJNbsIwEIbh1+QHQsJviNRFF1XX7aEQRZQNRQjEHXqgrnopn4B+E8+qqip117GeRB4nk4lloAAyeZIcwicBiw9lQ5/PGPf5nHfNV8yVyXlmzZY9R05cuMbydtOqZTfsOCh7Vjb02e8RVMXGHfc8aDxqwFKVF7QMtdLpmzUVDSOmTJjpnUH/3YJSBcofqv4Wyz8+b6FuWvXSjW1SV30r1sl/icYuofFZh+1+Yn+7dnPZuIW8uFa2big7t5JXZzX3znbh4Gp5c5UcnfVyciM5u6lc3ESuTnsZQ2JnLQ4S7J4ldjZjntj5jEVi5zaWCeUXWN4q9AAAeJxdUMFOU0EUnTMzb2o1FB5O5wENg31k5mExVEo7jSGBEuO6CStDmtbIBuiKBYg/gRu/ABO3/ocscOEXsHBpogtWvFfnvQgxJnduztx7zknuIXQyIYSDE9IgLwmBmIZI1pDYbTSxBqeW4KvrVKSmaaRKFZREE7YJIyONSLW6W37bLiRxscXNTH1zbnFqlnJ5Eu+G9MnT8JBy9l69ELx69Ohd9JCryrwcU07TbCU5H4y+jQbnyco/EF+8x1/eaX03bCzR8IgGwVn0WC/I8YOzaLGS+4+p4K8O/lcXkPhj/CP0ig1JQIhJyugCxz3o7LqH4YUH0L3swlMK3q+CV/HMbhkJAqlarm1jgd+97DpnfsKPeH15eT2+l9L5OJ/kcjZJfY6MU++wQPzI+PRECUJjo97aAtqupaqhFLHtRLHNf1Kwn9lAOid9L7tV9nzVldNL3dC+NmrGOGM+sme2VrO335Mda3foXlXravY57zemY23HkLs72RsW5JegDjZK99FnPPtwl8FX1i92IfAax6yfvkWf/AHb1F1JeJxjYGRgYABi3/mPYuP5bb4ycLOABKI4H+9rgNH//zIwsDCzMAElOBhAJAMAQ2IK+QAAAHicY2BkYGBhAAEWhv9///9lYWZgZEAFYgBbLQQgAAAAeJxjYGBgYGH4/58FTIPZf2FsSgAAM58EEwAAAHicY2AAgjyGJoYlDI8YPjD8ww8BeTMTR3icY2BkYGAQY3BhYGYAASYg5gJCBob/YD4DABGFAXQAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxtxksOgjAUQNF3kaIW/x9cBYtqgEAnLXlp0+1rwtQzuVcq2Vj5r6NiR42hYc+BI5aWE2cuXLlx58GTF286PmIm1ajGhzWnJub0S12cBjs4nVI/xhLabdXPS2JCiXgCK5lEwTHQMzKziHwBqnYYpg==') format('woff')}[class*=' luna-console-icon-'],[class^=luna-console-icon-]{display:inline-block;font-family:luna-console-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-console-icon-error:before{content:'\\f101'}.luna-console-icon-input:before{content:'\\f102'}.luna-console-icon-output:before{content:'\\f103'}.luna-console-icon-warn:before{content:'\\f104'}.luna-console-icon-caret-down:before{content:'\\f105'}.luna-console-icon-caret-right:before{content:'\\f106'}.luna-console{background:#fff;overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;position:relative;will-change:scroll-position;cursor:default;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-console.luna-console-theme-dark{background-color:#242424}.luna-console-hidden{display:none}.luna-console-fake-logs{position:absolute;left:0;top:0;pointer-events:none;visibility:hidden;width:100%}.luna-console-logs{padding-top:1px;position:absolute;width:100%}.luna-console-log-container{box-sizing:content-box}.luna-console-log-container.luna-console-selected .luna-console-log-item{background:#ecf1f8}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#ccdef5}.luna-console-header{white-space:nowrap;display:flex;font-size:11px;color:#545454;border-top:1px solid transparent;border-bottom:1px solid #ccc}.luna-console-header .luna-console-time-from-container{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:3px 10px}.luna-console-nesting-level{width:14px;flex-shrink:0;margin-top:-1px;margin-bottom:-1px;position:relative;border-right:1px solid #ccc}.luna-console-nesting-level.luna-console-group-closed::before{content:""}.luna-console-nesting-level::before{border-bottom:1px solid #ccc;position:absolute;top:0;left:0;margin-left:100%;width:5px;height:100%;box-sizing:border-box}.luna-console-log-item{position:relative;display:flex;border-top:1px solid transparent;border-bottom:1px solid #ccc;margin-top:-1px;color:#333}.luna-console-log-item:after{content:"";display:block;clear:both}.luna-console-log-item .luna-console-code{display:inline;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-console-log-item .luna-console-code .luna-console-keyword{color:#881280}.luna-console-log-item .luna-console-code .luna-console-number{color:#1c00cf}.luna-console-log-item .luna-console-code .luna-console-operator{color:gray}.luna-console-log-item .luna-console-code .luna-console-comment{color:#236e25}.luna-console-log-item .luna-console-code .luna-console-string{color:#1a1aa6}.luna-console-log-item a{color:#15c!important}.luna-console-log-item .luna-console-icon-container{margin:0 -6px 0 10px}.luna-console-log-item .luna-console-icon-container .luna-console-icon{line-height:20px;font-size:12px;color:#333;position:relative}.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-right{top:0;left:-2px}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{top:0;color:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{top:0;color:#e8a400}.luna-console-log-item .luna-console-count{background:#8097bd;color:#fff;padding:2px 4px;border-radius:10px;font-size:12px;float:left;margin:1px -6px 0 10px}.luna-console-log-item .luna-console-log-content-wrapper{flex:1;overflow:hidden}.luna-console-log-item .luna-console-log-content{padding:3px 0;margin:0 10px;overflow-x:auto;-webkit-overflow-scrolling:touch;white-space:pre-wrap;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-console-log-item .luna-console-log-content *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-console-log-item .luna-console-log-content>*{vertical-align:top}.luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-log-item .luna-console-log-content .luna-console-undefined{color:#5e5e5e}.luna-console-log-item .luna-console-log-content .luna-console-number{color:#1c00cf}.luna-console-log-item .luna-console-log-content .luna-console-boolean{color:#0d22aa}.luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-log-item .luna-console-log-content .luna-console-symbol{color:#881391}.luna-console-log-item .luna-console-data-grid,.luna-console-log-item .luna-console-dom-viewer{white-space:initial}.luna-console-log-item.luna-console-error{z-index:50;background:#fff0f0;color:red;border-top:1px solid #ffd6d6;border-bottom:1px solid #ffd6d6}.luna-console-log-item.luna-console-error .luna-console-stack{padding-left:1.2em;white-space:nowrap}.luna-console-log-item.luna-console-error .luna-console-count{background:red}.luna-console-log-item.luna-console-debug{z-index:20}.luna-console-log-item.luna-console-input{border-bottom-color:transparent}.luna-console-log-item.luna-console-warn{z-index:40;color:#5c5c00;background:#fffbe5;border-top:1px solid #fff5c2;border-bottom:1px solid #fff5c2}.luna-console-log-item.luna-console-warn .luna-console-count{background:#e8a400}.luna-console-log-item.luna-console-info{z-index:30}.luna-console-log-item.luna-console-group,.luna-console-log-item.luna-console-groupCollapsed{font-weight:700}.luna-console-preview{display:inline-block}.luna-console-preview .luna-console-preview-container{display:flex;align-items:center}.luna-console-preview .luna-console-json{overflow-x:auto;-webkit-overflow-scrolling:touch;padding-left:12px}.luna-console-preview .luna-console-preview-icon-container{display:block}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon{position:relative;font-size:12px}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon-caret-down{top:2px}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon-caret-right{top:1px}.luna-console-preview .luna-console-preview-content-container{word-break:break-all}.luna-console-preview .luna-console-descriptor,.luna-console-preview .luna-console-object-preview{font-style:italic}.luna-console-preview .luna-console-key{color:#881391}.luna-console-preview .luna-console-number{color:#1c00cf}.luna-console-preview .luna-console-null{color:#5e5e5e}.luna-console-preview .luna-console-string{color:#c41a16}.luna-console-preview .luna-console-boolean{color:#0d22aa}.luna-console-preview .luna-console-special{color:#5e5e5e}.luna-console-theme-dark{color-scheme:dark}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item{background:#29323d}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#4173b4}.luna-console-theme-dark .luna-console-log-item{color:#a5a5a5;border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-keyword{color:#e36eec}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-operator{color:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-comment{color:#747474}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-string{color:#f29766}.luna-console-theme-dark .luna-console-log-item.luna-console-error{background:#290000;color:#ff8080;border-top-color:#5c0000;border-bottom-color:#5c0000}.luna-console-theme-dark .luna-console-log-item.luna-console-error .luna-console-count{background:#ff8080}.luna-console-theme-dark .luna-console-log-item.luna-console-warn{color:#ffcb6b;background:#332a00;border-top-color:#650;border-bottom-color:#650}.luna-console-theme-dark .luna-console-log-item .luna-console-count{background:#42597f;color:#949494}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-undefined{color:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-boolean,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-symbol{color:#e36eec}.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-right{color:#9aa0a6}.luna-console-theme-dark .luna-console-header{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level{border-right-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level::before{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-preview .luna-console-key{color:#e36eec}.luna-console-theme-dark .luna-console-preview .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-null{color:#7f7f7f}.luna-console-theme-dark .luna-console-preview .luna-console-string{color:#f29766}.luna-console-theme-dark .luna-console-preview .luna-console-boolean{color:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-special{color:#7f7f7f}`,""]),v.exports=r},4987:function(v,r,s){(r=s(3645)(!1)).push([v.id,'.luna-data-grid{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;position:relative;font-size:12px;border:1px solid #ccc;overflow:hidden;outline:0}.luna-data-grid.luna-data-grid-platform-windows{font-family:"Segoe UI",Tahoma,sans-serif}.luna-data-grid.luna-data-grid-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-data-grid .luna-data-grid-hidden,.luna-data-grid.luna-data-grid-hidden{display:none}.luna-data-grid .luna-data-grid-invisible,.luna-data-grid.luna-data-grid-invisible{visibility:hidden}.luna-data-grid *{box-sizing:border-box}.luna-data-grid.luna-data-grid-theme-dark{color:#a5a5a5;background-color:#242424}.luna-data-grid.luna-data-grid-theme-dark{color:#a5a5a5;background:#242424;border-color:#3d3d3d}.luna-data-grid table{width:100%;height:100%;border-collapse:separate;border-spacing:0;table-layout:fixed}.luna-data-grid td,.luna-data-grid th{padding:1px 4px;border-left:1px solid #ccc;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.luna-data-grid td:first-child,.luna-data-grid th:first-child{border-left:none}.luna-data-grid th{font-weight:400;border-bottom:1px solid #ccc;text-align:left;background:#f3f3f3}.luna-data-grid th.luna-data-grid-sortable:active,.luna-data-grid th.luna-data-grid-sortable:hover{background:#e6e6e6}.luna-data-grid td{height:20px;cursor:default;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-data-grid:focus .luna-data-grid-node.luna-data-grid-selected{color:#fff;background:#1a73e8}.luna-data-grid:focus.luna-data-grid-theme-dark .luna-data-grid-node.luna-data-grid-selected{background:#0e639c}.luna-data-grid-data-container,.luna-data-grid-header-container{overflow:hidden}.luna-data-grid-header-container{height:21px}.luna-data-grid-data-container{overflow-y:auto}.luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:#ddd}.luna-data-grid-data-container tr:nth-child(even){background:#f2f7fd}.luna-data-grid-filler-row td{height:auto}.luna-data-grid-resizer{position:absolute;top:0;bottom:0;width:5px;z-index:500;touch-action:none;cursor:col-resize}.luna-data-grid-resizing{cursor:col-resize!important}.luna-data-grid-resizing .luna-data-grid *{cursor:col-resize!important}.luna-data-grid-theme-dark{color-scheme:dark}.luna-data-grid-theme-dark td,.luna-data-grid-theme-dark th{border-color:#3d3d3d}.luna-data-grid-theme-dark th{background:#292a2d}.luna-data-grid-theme-dark th.luna-data-grid-sortable:hover{background:#303030}.luna-data-grid-theme-dark .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:#393939}.luna-data-grid-theme-dark .luna-data-grid-data-container tr:nth-child(even){background:#0b2544}',""]),v.exports=r},8903:function(v,r,s){(r=s(3645)(!1)).push([v.id,"@font-face{font-family:luna-dom-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAASgAAsAAAAAB4QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFwAAACMIRYl8k9TLzIAAAFkAAAAPQAAAFZLxUkaY21hcAAAAaQAAADHAAACWBcU1KRnbHlmAAACbAAAAC4AAAAwabU7V2hlYWQAAAKcAAAALwAAADZzjr4faGhlYQAAAswAAAAYAAAAJAFyANdobXR4AAAC5AAAABAAAAA4AZAAAGxvY2EAAAL0AAAAEAAAAB4AnACQbWF4cAAAAwQAAAAfAAAAIAEZAA9uYW1lAAADJAAAASkAAAIWm5e+CnBvc3QAAARQAAAATgAAAG5m1cqleJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiC2AdNMDGwMckCSGyzHCuSxA2kuIJ+HgReoggtJnANMcwJFGRmYAXZLBkt4nGNgZJBlnMDAysDAUMfQAyRloHQCAyeDMQMDEwMrMwNWEJDmmsJwgEH3IxPDCSBXCEwyMDCCCABbzwhtAAAAeJy1kksKwjAQhr/0oX0JLlyIZ9BDCQXtRkEEwQO56uV6Av0nmZWI4MIJX2H+JvNIBiiBXGxFAWEkYPaQGqKe00S94C5/xVJKwY49PQNnLly5Tdnzqb9JPXByNUT13YKipLVm4wvmilvR0ilfrboKFsy0N9OB2Yco32z+437SLVTQdo05dUksgF8z/8+6+B3dU2m67YR1u3fsLXtH7egtEq04OhZpcKzbk1OLs2NzcXE0F3rNhOW9ObqbKSRsVqYsQfYC6fYeiQB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOLeSTNM4/ltvjJwM5wACkRxPt7XgKCBYCXDMiDJwcAE4gAAQEgKxAB4nGNgZGBgOMHAACdXMjAyoAI+ADixAkp4nGNgAIITUEwCAABMyAGReJxjYAACHgYJ7BAADsoBLXicY2BkYGDgY2BmANEMDExAzAWEDAz/wXwGAAomASkAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxk0KgCAUAOE3/adlJ/FQgqBuFETw+i2kTd9mRiYZvv4ZJmYWVjZ2Dk4UmosbwyPK1Vq69aVnPbamEBuOSqFj8WQSgUgTeQGPtA2iAAA=') format('woff')}[class*=' luna-dom-viewer-icon-'],[class^=luna-dom-viewer-icon-]{display:inline-block;font-family:luna-dom-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-dom-viewer-icon-arrow-down:before{content:'\\f101'}.luna-dom-viewer-icon-arrow-right:before{content:'\\f102'}.luna-dom-viewer{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;overflow-y:auto;-webkit-overflow-scrolling:touch;background:0 0;overflow-x:hidden;word-wrap:break-word;padding:0 0 0 12px;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;cursor:default;list-style:none}.luna-dom-viewer.luna-dom-viewer-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-dom-viewer.luna-dom-viewer-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-viewer .luna-dom-viewer-hidden,.luna-dom-viewer.luna-dom-viewer-hidden{display:none}.luna-dom-viewer .luna-dom-viewer-invisible,.luna-dom-viewer.luna-dom-viewer-invisible{visibility:hidden}.luna-dom-viewer *{box-sizing:border-box}.luna-dom-viewer.luna-dom-viewer-theme-dark{color:#a5a5a5;background-color:#242424}.luna-dom-viewer ul{list-style:none}.luna-dom-viewer.luna-dom-viewer-theme-dark{color:#e8eaed}.luna-dom-viewer-toggle{min-width:12px;margin-left:-12px}.luna-dom-viewer-icon-arrow-down,.luna-dom-viewer-icon-arrow-right{position:absolute!important;font-size:12px!important}.luna-dom-viewer-tree-item{line-height:16px;min-height:16px;position:relative;z-index:10;outline:0}.luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection,.luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{display:block}.luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:#f2f7fd}.luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:#e0e0e0}.luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:#cfe8fc}.luna-dom-viewer-tree-item .luna-dom-viewer-icon-arrow-down{display:none}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-arrow-down{display:inline-block}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-arrow-right{display:none}.luna-dom-viewer-html-tag{color:#881280}.luna-dom-viewer-tag-name{color:#881280}.luna-dom-viewer-attribute-name{color:#994500}.luna-dom-viewer-attribute-value{color:#1a1aa6}.luna-dom-viewer-attribute-value.luna-dom-viewer-attribute-underline{text-decoration:underline}.luna-dom-viewer-html-comment{color:#236e25}.luna-dom-viewer-selection{position:absolute;display:none;left:-10000px;right:-10000px;top:0;bottom:0;z-index:-1}.luna-dom-viewer-children{margin:0;overflow-x:visible;overflow-y:visible;padding-left:15px}.luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:#881280}.luna-dom-viewer-text-node .luna-dom-viewer-number{color:#1c00cf}.luna-dom-viewer-text-node .luna-dom-viewer-operator{color:grey}.luna-dom-viewer-text-node .luna-dom-viewer-comment{color:#236e25}.luna-dom-viewer-text-node .luna-dom-viewer-string{color:#1a1aa6}.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-arrow-down,.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-arrow-right{color:#9aa0a6}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-tag,.luna-dom-viewer-theme-dark .luna-dom-viewer-tag-name{color:#5db0d7}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-name{color:#9bbbdc}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-value{color:#f29766}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-comment{color:#898989}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:#083c69}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:#454545}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:#073d69}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:#e36eec}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-number{color:#9980ff}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-operator{color:#7f7f7f}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-comment{color:#747474}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-string{color:#f29766}",""]),v.exports=r},5512:function(v,r,s){(r=s(3645)(!1)).push([v.id,`@font-face{font-family:luna-modal-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAQwAAsAAAAABpQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAEkAAABoILgliE9TLzIAAAFUAAAAPQAAAFZL+0kZY21hcAAAAZQAAACBAAAB3sqmCy5nbHlmAAACGAAAAC0AAAA0Ftcaz2hlYWQAAAJIAAAALgAAADZzhL4YaGhlYQAAAngAAAAYAAAAJAFoANBobXR4AAACkAAAAA8AAAAcAMgAAGxvY2EAAAKgAAAADgAAABAATgBObWF4cAAAArAAAAAfAAAAIAESABhuYW1lAAAC0AAAASkAAAIWm5e+CnBvc3QAAAP8AAAAMQAAAEOplauDeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiCWgNIsQMzKwAykWRnYgGxGBiYAk+wFgwAAAHicY2BkkGWcwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAIfkjI8MJIFcITDIwMIIIAGAqCKIAAAB4nM2RQQqDQAxFXxyVUsST9DhduBd3ggsv0JX39QT6kwYED1D6hzeQD0nmM0ADFPESNdiG4frItfALz/Br3qp7HlS0jEzMLKy7HYf8e33J1HMdortoWuPzreUX8p2hEikj9f+oi3vIyl86JpWYEvfnxH9sSTzPmijXbl+wE7urE5sAAAB4nGNgZACB+UDIzcBgrs6uzi7OLm4ubq4+j1tfn1tPD0xOhjGAJAMDAKekBtMAAAB4nGNgZGBgAGLPuE0l8fw2Xxm4GU4ABaI4H+9rQNBAMB8IGRg4GJhAHAA5KgqUAAB4nGNgZGBgOMHAACfnMzAyoAJ2ADfsAjl4nGNgAIITDFgBABIUAMkAeJxjYAACKQQEAAO4AJ0AAHicY2BkYGBgZ+BhANEMDExAzAWEDAz/wXwGAApKASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxjYGKAABiNDtgZmRiZGVkYWRnZGNkZORhYk3Pyi1MZkxlzGPMZixlTGRgANIEEbAAAAA==') format('woff')}[class*=' luna-modal-icon-'],[class^=luna-modal-icon-]{display:inline-block;font-family:luna-modal-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-modal-icon-close:before{content:'\\f101'}.luna-modal{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;justify-content:center;align-items:center}.luna-modal.luna-modal-platform-windows{font-family:"Segoe UI",Tahoma,sans-serif}.luna-modal.luna-modal-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-modal .luna-modal-hidden,.luna-modal.luna-modal-hidden{display:none}.luna-modal .luna-modal-invisible,.luna-modal.luna-modal-invisible{visibility:hidden}.luna-modal *{box-sizing:border-box}.luna-modal.luna-modal-theme-dark{color:#a5a5a5;background-color:#242424}.luna-modal-icon-close{position:absolute;right:16px;top:18px;cursor:pointer;font-size:20px}.luna-modal-body{position:relative;background:#fff;max-height:100%;display:flex;flex-direction:column;border-radius:4px}.luna-modal-body.luna-modal-no-title{position:static}.luna-modal-body.luna-modal-no-title .luna-modal-title{display:none}.luna-modal-body.luna-modal-no-title .luna-modal-icon-close{color:#fff}.luna-modal-body.luna-modal-no-footer .luna-modal-footer{display:none}.luna-modal-hidden{display:none}.luna-modal-title{padding:16px;padding-right:36px;padding-bottom:0;font-size:18px;height:46px;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.luna-modal-content{padding:16px;overflow-y:auto}.luna-modal-footer{padding:12px}.luna-modal-button-group{display:flex;justify-content:flex-end}.luna-modal-button{padding:0 12px;background:#e9ecef;cursor:default;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin:0 4px;font-size:12px;border-radius:4px;overflow:hidden;height:28px;line-height:28px}.luna-modal-button:active::before{background:#1a73e8;content:"";opacity:.4;position:absolute;top:0;left:0;width:100%;height:100%;z-index:2}.luna-modal-button.luna-modal-secondary{color:#1a73e8;border:1px solid #ccc;background:#fff}.luna-modal-button.luna-modal-primary{color:#fff;background:#1a73e8}.luna-modal-input{box-sizing:border-box;outline:0;width:100%;font-size:16px;padding:6px 12px;border:1px solid #ccc;-webkit-appearance:none;-moz-appearance:none}.luna-modal-theme-dark{color:#a5a5a5}.luna-modal-theme-dark .luna-modal-body{background:#242424}`,""]),v.exports=r},7591:function(v,r,s){(r=s(3645)(!1)).push([v.id,".luna-notification{position:fixed;top:0;left:0;width:100%;height:100%;padding:20px;box-sizing:border-box;pointer-events:none;display:flex;flex-direction:column;font-size:14px;font-family:Arial,Helvetica,sans-serif}.luna-notification-item{display:flex;box-shadow:0 2px 2px 0 rgba(0,0,0,.07),0 1px 5px 0 rgba(0,0,0,.1);padding:10px 16px;color:#333;background:#fff}.luna-notification-lower{margin-top:16px}.luna-notification-upper{margin-bottom:16px}.luna-notification-theme-dark .luna-notification-item{box-shadow:0 2px 2px 0 rgba(255,255,255,.07),0 1px 5px 0 rgba(255,255,255,.1);color:#a5a5a5;background:#242424}",""]),v.exports=r},4821:function(v,r,s){(r=s(3645)(!1)).push([v.id,"@font-face{font-family:luna-object-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS8AAsAAAAAB7QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAGEAAACMISgl+k9TLzIAAAFsAAAAPQAAAFZLxUkWY21hcAAAAawAAADWAAACdBU42qdnbHlmAAAChAAAAC4AAAAwabU7V2hlYWQAAAK0AAAALwAAADZzjr4faGhlYQAAAuQAAAAYAAAAJAFyANlobXR4AAAC/AAAABAAAABAAZAAAGxvY2EAAAMMAAAAEAAAACIAtACobWF4cAAAAxwAAAAfAAAAIAEbAA9uYW1lAAADPAAAASkAAAIWm5e+CnBvc3QAAARoAAAAUwAAAHZW8MNZeJxNjTsOQFAQRc/z/+sV1mABohKV0gZeJRJR2X9cT4RJZu7nFIMBMjoGvHGaF6rdngcNAc/c/O/Nvq2W5E1igdNE2zv1iGh1c5FQPlYXUlJRyxt9+/pUKadQa/AveGEGZQAAAHicY2BkkGScwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAQfcjE8MJIFcITDIwMIIIAFqDCGkAAAB4nM2STQ4BQRCFv54ZP8MwFhYW4gQcShBsSERi50BWDuFCcwJedddKRGKnOt8k9aanqudVAy0gF3NRQLgTsLhJDVHP6UW94Kp8zEhKwYIlG/YcOXHm0mTPp96aumLLwdUQ1fcIqmJrwpSZL+iqak5JmyE1Ayr1bdGhr/2ZPmp/qPQtuj/uJzqQl+pfDyypesQD6AT/ElV8PjyrMccT9rdLR3PUFBI227VTio1jbm6dodg5VnPvmAsHxzofHfmi+Sbs/pwdWcXFkWdNSNg9arIE2QufuSCyAAB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOINe2b6x/PbfGXgZjgBFIjifLyvAUEDwUqGZUCSg4EJxAEAUn4LLAB4nGNgZGBgOMHAACdXMjAyoAIBADizAkx4nGNgAIITUEwGAABZUAGReJxjYAACHgYJ3BAAE94BXXicY2BkYGAQYGBmANEMDExAzAWEDAz/wXwGAApcASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxjkOgCAUANE/uOOGB+FQBIjaaEJIuL6FsfE1M6Lk9fXPoKioaWjp6BnQjEzMLKwYNtHepZhtuMs1vpvO/ch4HIlIxhK4KVyc7BwiD8nvDlkA') format('woff')}[class*=' luna-object-viewer-icon-'],[class^=luna-object-viewer-icon-]{display:inline-block;font-family:luna-object-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-object-viewer-icon-caret-down:before{content:'\\f101'}.luna-object-viewer-icon-caret-right:before{content:'\\f102'}.luna-object-viewer{overflow-x:auto;-webkit-overflow-scrolling:touch;overflow-y:hidden;cursor:default;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;font-size:12px;line-height:1.2;min-height:100%;color:#333;list-style:none!important}.luna-object-viewer ul{list-style:none!important;padding:0!important;padding-left:12px!important;margin:0!important}.luna-object-viewer li{position:relative;white-space:nowrap;line-height:16px;min-height:16px}.luna-object-viewer>li>.luna-object-viewer-key{display:none}.luna-object-viewer span{position:static!important}.luna-object-viewer li .luna-object-viewer-collapsed~.luna-object-viewer-close:before{color:#999}.luna-object-viewer-array .luna-object-viewer-object .luna-object-viewer-key{display:inline}.luna-object-viewer-null{color:#5e5e5e}.luna-object-viewer-regexp,.luna-object-viewer-string{color:#c41a16}.luna-object-viewer-number{color:#1c00cf}.luna-object-viewer-boolean{color:#0d22aa}.luna-object-viewer-special{color:#5e5e5e}.luna-object-viewer-key,.luna-object-viewer-key-lighter{color:#881391}.luna-object-viewer-key-lighter{opacity:.6}.luna-object-viewer-key-special{color:#5e5e5e}.luna-object-viewer-collapsed .luna-object-viewer-icon,.luna-object-viewer-expanded .luna-object-viewer-icon{position:absolute!important;left:-12px;color:#727272;font-size:12px}.luna-object-viewer-icon-caret-right{top:0}.luna-object-viewer-icon-caret-down{top:1px}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-down{display:inline}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-right{display:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-down{display:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-right{display:inline}.luna-object-viewer-hidden~ul{display:none}.luna-object-viewer-theme-dark{color:#fff}.luna-object-viewer-theme-dark .luna-object-viewer-null,.luna-object-viewer-theme-dark .luna-object-viewer-special{color:#a1a1a1}.luna-object-viewer-theme-dark .luna-object-viewer-regexp,.luna-object-viewer-theme-dark .luna-object-viewer-string{color:#f28b54}.luna-object-viewer-theme-dark .luna-object-viewer-boolean,.luna-object-viewer-theme-dark .luna-object-viewer-number{color:#9980ff}.luna-object-viewer-theme-dark .luna-object-viewer-key,.luna-object-viewer-theme-dark .luna-object-viewer-key-lighter{color:#5db0d7}",""]),v.exports=r},7871:function(v,r,s){(r=s(3645)(!1)).push([v.id,`.luna-setting{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;min-width:320px}.luna-setting.luna-setting-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-setting.luna-setting-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-setting .luna-setting-hidden,.luna-setting.luna-setting-hidden{display:none}.luna-setting .luna-setting-invisible,.luna-setting.luna-setting-invisible{visibility:hidden}.luna-setting *{box-sizing:border-box}.luna-setting-item.luna-setting-selected,.luna-setting-item:hover{background:#f3f3f3}.luna-setting-item.luna-setting-selected:focus{outline:1px solid #1a73e8}.luna-setting-item .luna-setting-title{line-height:1.4em;font-weight:600}.luna-setting-item .luna-setting-description{line-height:1.4em}.luna-setting-item .luna-setting-description *{margin:0}.luna-setting-item .luna-setting-description strong{font-weight:600}.luna-setting-item .luna-setting-description a{background-color:transparent;color:#0969da;text-decoration:none}.luna-setting-item .luna-setting-control,.luna-setting-item .luna-setting-description{font-size:12px}.luna-setting-item .luna-setting-description{margin-bottom:8px}.luna-setting-item .luna-setting-control{display:flex;align-items:center}.luna-setting-item-button,.luna-setting-item-checkbox,.luna-setting-item-input,.luna-setting-item-number,.luna-setting-item-select,.luna-setting-item-title{padding:10px}.luna-setting-item-title{font-size:18px;font-weight:600}.luna-setting-item-input input{-webkit-tap-highlight-color:transparent;color:#333;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid #ccc;outline:0;padding:2px 8px;border-radius:0;font-size:14px;background:#fff;width:100%}.luna-setting-item-number input[type=number]{-webkit-tap-highlight-color:transparent;color:#333;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid #ccc;outline:0;padding:2px 8px;border-radius:0;font-size:14px;background:#fff;width:200px;padding:2px}.luna-setting-item-number .luna-setting-range-container{flex:2;position:relative;top:1px}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track{height:4px;width:100%;padding:0 10px;position:absolute;left:0;top:4px}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{background:#ccc;border-radius:2px;overflow:hidden;width:100%;height:4px}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar .luna-setting-range-track-progress{height:100%;background:#1a73e8;width:50%}.luna-setting-item-number .luna-setting-range-container input{-webkit-appearance:none;background:0 0;height:4px;width:100%;position:relative;top:-3px;margin:0 auto;outline:0;border-radius:2px}.luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{-webkit-appearance:none;position:relative;top:0;z-index:1;width:16px;border:none;height:16px;border-radius:10px;border:1px solid #ccc;background:radial-gradient(circle at center,#eee 0,#eee 15%,#fff 22%,#fff 100%)}.luna-setting-item-checkbox input{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:14px;height:14px;border:1px solid #ccc;border-radius:0;position:relative;outline:0;margin-left:0;margin-right:8px;transition:background-color .1s;align-self:flex-start;flex-shrink:0}.luna-setting-item-checkbox input:checked{background-color:#1a73e8;border-color:#1a73e8}.luna-setting-item-checkbox input:checked:after{content:"";width:100%;height:100%;position:absolute;left:0;top:0;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9JzMwMHB4JyB3aWR0aD0nMzAwcHgnICBmaWxsPSIjZmZmZmZmIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgdmVyc2lvbj0iMS4xIiB4PSIwcHgiIHk9IjBweCI+PHRpdGxlPmljb25fYnlfUG9zaGx5YWtvdjEwPC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZyBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBmaWxsPSIjZmZmZmZmIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi4wMDAwMDAsIDI2LjAwMDAwMCkiPjxwYXRoIGQ9Ik0xNy45OTk5ODc4LDMyLjQgTDEwLjk5OTk4NzgsMjUuNCBDMTAuMjI2Nzg5MSwyNC42MjY4MDE0IDguOTczMTg2NDQsMjQuNjI2ODAxNCA4LjE5OTk4Nzc5LDI1LjQgTDguMTk5OTg3NzksMjUuNCBDNy40MjY3ODkxNCwyNi4xNzMxOTg2IDcuNDI2Nzg5MTQsMjcuNDI2ODAxNCA4LjE5OTk4Nzc5LDI4LjIgTDE2LjU4NTc3NDIsMzYuNTg1Nzg2NCBDMTcuMzY2ODIyOCwzNy4zNjY4MzUgMTguNjMzMTUyOCwzNy4zNjY4MzUgMTkuNDE0MjAxNCwzNi41ODU3ODY0IEw0MC41OTk5ODc4LDE1LjQgQzQxLjM3MzE4NjQsMTQuNjI2ODAxNCA0MS4zNzMxODY0LDEzLjM3MzE5ODYgNDAuNTk5OTg3OCwxMi42IEw0MC41OTk5ODc4LDEyLjYgQzM5LjgyNjc4OTEsMTEuODI2ODAxNCAzOC41NzMxODY0LDExLjgyNjgwMTQgMzcuNzk5OTg3OCwxMi42IEwxNy45OTk5ODc4LDMyLjQgWiI+PC9wYXRoPjwvZz48L2c+PC9nPjwvc3ZnPg==);background-size:30px;background-repeat:no-repeat;background-position:center}.luna-setting-item-checkbox label{-webkit-tap-highlight-color:transparent}.luna-setting-item-checkbox label *{margin:0}.luna-setting-item-select .luna-setting-select{position:relative}.luna-setting-item-select .luna-setting-select select{margin:0;font-size:14px;background:#fff;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid #ccc;padding:2px 8px;padding-right:18px;outline:0;color:#333;border-radius:0;-webkit-tap-highlight-color:transparent}.luna-setting-item-select .luna-setting-select:after{content:'';width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #333;position:absolute;top:0;bottom:0;right:6px;margin:auto;pointer-events:none}.luna-setting-item-select .luna-setting-select select{width:300px}.luna-setting-item-button button{-webkit-tap-highlight-color:transparent;background:#fff;border:1px solid #ccc;padding:2px 8px;color:#1a73e8;font-size:14px;border-radius:2px}.luna-setting-item-button button:active,.luna-setting-item-button button:hover{background:#f3f3f3}.luna-setting-item-button button:active{border:1px solid #1a73e8}.luna-setting-item-separator{border-bottom:1px solid #ccc}.luna-setting-theme-dark{color-scheme:dark;color:#a5a5a5;background:#242424}.luna-setting-theme-dark .luna-setting-item.luna-setting-selected,.luna-setting-theme-dark .luna-setting-item:hover{background:#292a2d}.luna-setting-theme-dark .luna-setting-item .luna-setting-description a{background-color:transparent;color:#58a6ff}.luna-setting-theme-dark .luna-setting-item-separator{border-color:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-input input{background:#3d3d3d;border-color:#3d3d3d;color:#a5a5a5}.luna-setting-theme-dark .luna-setting-item-checkbox input{border-color:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-select .luna-setting-select select{color:#a5a5a5;border-color:#3d3d3d;background:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-select .luna-setting-select:after{border-top-color:#a5a5a5}.luna-setting-theme-dark .luna-setting-item-button button{background:#242424;border-color:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-button button:active,.luna-setting-theme-dark .luna-setting-item-button button:hover{background:#292a2d}.luna-setting-theme-dark .luna-setting-item-button button:active{border:1px solid #1a73e8}.luna-setting-theme-dark .luna-setting-item-number input[type=number]{background:#3d3d3d;border-color:#3d3d3d;color:#a5a5a5}.luna-setting-theme-dark .luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{background:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{border-color:#3d3d3d;background:radial-gradient(circle at center,#aaa 0,#aaa 15%,#ccc 22%,#ccc 100%)}`,""]),v.exports=r},2156:function(v,r,s){(r=s(3645)(!1)).push([v.id,".luna-tab{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;position:relative;overflow:hidden;width:100%}.luna-tab.luna-tab-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-tab.luna-tab-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-tab .luna-tab-hidden,.luna-tab.luna-tab-hidden{display:none}.luna-tab .luna-tab-invisible,.luna-tab.luna-tab-invisible{visibility:hidden}.luna-tab *{box-sizing:border-box}.luna-tab.luna-tab-theme-dark{color:#a5a5a5;background-color:#242424}.luna-tab-tabs-container{border-bottom:1px solid #ccc}.luna-tab-tabs{overflow-x:auto;-webkit-overflow-scrolling:touch;overflow-y:hidden;width:100%;height:100%;font-size:0;white-space:nowrap}.luna-tab-tabs::-webkit-scrollbar{display:none;width:0;height:0}.luna-tab-item{cursor:pointer;display:inline-block;padding:0 10px;font-size:12px;text-align:center;text-transform:capitalize}.luna-tab-item:hover{background:#f3f3f3}.luna-tab-slider{transition:left .3s,width .3s;height:1px;background:#1a73e8;position:absolute;bottom:0;left:0}",""]),v.exports=r},5777:function(v,r,s){(r=s(3645)(!1)).push([v.id,"@font-face{font-family:luna-text-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS0AAsAAAAAB2QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFQAAAB0INElr09TLzIAAAFcAAAAPQAAAFZL+0klY21hcAAAAZwAAACfAAACEAEewxRnbHlmAAACPAAAAIYAAACkNSDggmhlYWQAAALEAAAALgAAADZzrb4oaGhlYQAAAvQAAAAWAAAAJAGRANNobXR4AAADDAAAABAAAAAoAZAAAGxvY2EAAAMcAAAAEAAAABYBWgFIbWF4cAAAAywAAAAdAAAAIAEXADtuYW1lAAADTAAAASkAAAIWm5e+CnBvc3QAAAR4AAAAOwAAAFJIWdOleJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBWAdNMDGwMQkAWK1CGlYEZyGMCstiBMpxAUUYGZgDbGgXDeJxjYGTQYJzAwMrAwFDH0AMkZaB0AgMngzEDAxMDKzMDVhCQ5prCcIAh+SMTwwkgVwhMMjAwgggAY84IrgAAAHicvZFLCsMwDERHzsdJ6aL0HD1VQiDQRbIN9Axd9aI+QTpjq5Bdd5F4Bo1lybIBNAAq8iA1YB8YZG+qlvUKl6zXGBjf6MofMWHGEyu2FPb9oCxULCtHs3yy+J2urg1rtojo0HM/MKnFGabOGlbdYvdT+1N6/7drXl8e6Vajo3efHP3b7HAUvntBMy1OJKujMTeHNZMV9McpFBC+tLgY4QB4nGNgZACBEwzrGdgZGOwZxdnVDdXNPfKEGlhchO0KhZtZ3IQYmMFq1jCsZpBi0GLQY2AwNzGzZjQSk2UUYdNmVFID8UyVRUXYlNRMlVGlTM1FjU3tmZkTmVhYmFRBhHwoCyuzKgtTIjMzWJg3ZClIGMRlZQmVB7GhMixM0aGhQIsB52sTqgAAeJxjYGRgYADi2JNxkvH8Nl8ZuBlOAAWiOB/va0DQQHCCYT2Q5GBgAnEANJ0KnQAAeJxjYGRgYDjBwIBEMjKgAi4AOvoCZQAAeJxjYACCE1CMBwAAM7gBkXicY2AAAiGGIFQIABXIAqN4nGNgZGBg4GLQZ2BmAAEmMI8LSP4H8xkADjQBUwAAAHicZZA9bsJAFITHYEgCUoIUKSmzVQoimZ+SA0BPQZfCmLUxsr3WekGiywlyhBwhp4hyghwoY/NoYC0/fzNv3u7KAAb4hYd6ebhtar1auKE6cZv0IOyTn4U76ONFuEt/KNzDG6bCfTzinTt4/h2dAUrhFu7xIdym/ynsk7+EO3jCt3CX/o9wDyv8Cffx6g3TyBSxKdxSJ/sstGd5/q60rVJTqEkwPlsLXWgbOr1R66OqDsnUuVjF1uRqzq7OMqNKa3Y6csHWuXI2GsXiB5HJkSKCQYG4qQ5LaCTYI0MIe9W91CumLSr6tVaYIMD4KrVgqmiSIZXGhsk1jqwVDjxtStcxrfhazuSkucxq3iQjK/7vurejE9EPsG2mSsww4hNf5IPmDvk/PRFeqAAAAHicXcU7CsAgFEXBe4x/l/kQBAtt3X0KSZNpRk7X91/F8eAJRBKZQqUp2Og2va19MAadyWJzpBd4kgcWAA==') format('woff')}[class*=' luna-text-viewer-icon-'],[class^=luna-text-viewer-icon-]{display:inline-block;font-family:luna-text-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-text-viewer-icon-check:before{content:'\\f101'}.luna-text-viewer-icon-copy:before{content:'\\f102'}.luna-text-viewer{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;padding:0;unicode-bidi:embed;position:relative;overflow:auto;border:1px solid #ccc}.luna-text-viewer.luna-text-viewer-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-text-viewer.luna-text-viewer-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-text-viewer .luna-text-viewer-hidden,.luna-text-viewer.luna-text-viewer-hidden{display:none}.luna-text-viewer .luna-text-viewer-invisible,.luna-text-viewer.luna-text-viewer-invisible{visibility:hidden}.luna-text-viewer *{box-sizing:border-box}.luna-text-viewer.luna-text-viewer-theme-dark{color:#d9d9d9;border-color:#3d3d3d;background:#242424}.luna-text-viewer:hover .luna-text-viewer-copy{opacity:1}.luna-text-viewer-table{display:table}.luna-text-viewer-table .luna-text-viewer-line-number,.luna-text-viewer-table .luna-text-viewer-line-text{padding:0}.luna-text-viewer-table-row{display:table-row}.luna-text-viewer-line-number{display:table-cell;padding:0 3px 0 8px!important;text-align:right;vertical-align:top;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-right:1px solid #ccc}.luna-text-viewer-line-text{display:table-cell;padding-left:4px!important;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-text-viewer-copy{background:#fff;opacity:0;position:absolute;right:5px;top:5px;border:1px solid #ccc;border-radius:4px;width:25px;height:25px;text-align:center;line-height:25px;cursor:pointer;transition:opacity .3s,top .3s}.luna-text-viewer-copy .luna-text-viewer-icon-check{color:#188037}.luna-text-viewer-text{padding:4px;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;box-sizing:border-box;white-space:pre;display:block}.luna-text-viewer-text.luna-text-viewer-line-numbers{padding:0}.luna-text-viewer-text.luna-text-viewer-wrap-long-lines{white-space:pre-wrap}.luna-text-viewer-text.luna-text-viewer-wrap-long-lines .luna-text-viewer-line-text{word-break:break-all}.luna-text-viewer-theme-dark{color-scheme:dark}.luna-text-viewer-theme-dark .luna-text-viewer-copy,.luna-text-viewer-theme-dark .luna-text-viewer-line-number{border-color:#3d3d3d}.luna-text-viewer-theme-dark .luna-text-viewer-copy .luna-text-viewer-icon-check{color:#81c995}.luna-text-viewer-theme-dark .luna-text-viewer-copy{background-color:#242424}",""]),v.exports=r},5357:function(v,r,s){(r=s(3645)(!1)).push([v.id,"@font-face{font-family:eruda-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAA6UAAsAAAAAGvAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAARoAAAHeLjoycE9TLzIAAAIkAAAAPwAAAFZWm1KoY21hcAAAAmQAAAFdAAADwhPu1O9nbHlmAAADxAAAB+wAAA9I7RPQpGhlYWQAAAuwAAAAMQAAADZ26MSyaGhlYQAAC+QAAAAdAAAAJAgEBC9obXR4AAAMBAAAAB0AAACwXAv//GxvY2EAAAwkAAAAOwAAAFpuVmoybWF4cAAADGAAAAAfAAAAIAE9AQ1uYW1lAAAMgAAAASkAAAIWm5e+CnBvc3QAAA2sAAAA5QAAAU4VMmUJeJxNkD1Ow0AQhb9NHGISCH9RiB0cErCNHRrqFFSIyqKiQHSpEFJERUnBCTgPZ+AEHIe34wDe1f69efPezOKAHldc07q5re4ZrFevL8QE1MPHm3e3fn5aEf6+FAvsDHHuTUoxd7zzwSdffLulq9wjLbaYau8TacZMONE554xzZsrtNfBEzFOhbSmOyTmga0ikvRR/37RSsSMyDukYPjWdgGOtsSK55Y/k0Bf/ksK0MrbFr70idsVZKNPnDcSay3umd2TISCvWTJSxI78lFQ/C+qbv/Zo9tNXDP55ZL7k0Q90u5F5XX0qrYx16btccCtXg/ULrKzGFuqY9rUTMhf3fkCNj+MxUnsM/frr5Qx+ZbH4vVQ0F5Q/ZQBvxAAB4nGNgZJJgnMDAysDA1Mt0hoGBoR9CM75mMGLkAIoysDIzYAUBaa4pDAcYdD+KsIC4MSxMDIxAGoQZALgnCOUAeJy1011SGlEQhuF3BFHxD5UUyr8gIJIsiiKJsSqJlrHKsJssKFeuxF6Bfj3dF96aqhzqoZnDzJyG8w2wCVTko1SheKLAx1/NFuV8hXo5X+WPjht6+fmfWHLDHQ+srfnykjMrvnPPoxXlzNtRlFc26HLBZblal1N9ntBnwIgx5/SYMaWt78+YM6TDgitduaEVq+q0xhbb7KifPQ441N2OOOaEJh9oaYka7xvdd57vQz1P+oPR+Bx6s2lbrc6H0Flc/cO9/sfY87fiOY8u8X0J/muX6VRW6UI+p4l8SX35mgZynUbyLY3lJukf0e6HnvxIM/mZpnKb2nKXvM/7dCa/0lwe0lAeU0d+p4Wsk3bBiuDptY2A10rw9Fo1eOJtM/iTYLWA162A1+2A152A13rwJ8R2g++AJaUU2w/KK3YQlFzsMCjDWCMozdhRUK6x46CEYydBWceagdYraihRngAAAHic7RdbbBxX9Z57Z2d2d2ZndryzM7ve9ax3NztjO/bann0lTuW16zoBJSWJ7Zg83NiUJCQ1Ik2ikKQJNC9FFQqVEG0RVLQoSpEKH2klqgpEIyWAUMRTNBJC/PUDhETgiwhQd8y5s1s7oqr624/srO6ce89zzjn3nHsJEPwxyn5GVEJKBTcCdc80pAiYhkjfNWL+NnhLdTKqfxVOqJlxFX6E84wb86/6X4+5GRLw0/vsOgkREoFGBFx62P/uFviBP78FWrC02d/r79vcpmMl+k2uBwwJxIILTrVeyXsmK8krRLb5YGqUaCb9ksYnMuBqMtnRcY6V1nidml6texaY9CxSRm3TtKNIjcxrUjhEWKD3OnuNJEgPKSG/I6nUpo06fxwXH8lmEoyDFQIVyrROs7254z990rj0u2PLez47WqG1yu69V7ZdfDxU9He4C6P+v+HN+vlnD9Uou0Zp+NnfvveT/XL0kbGFxT/u37tx7CTdeuGlKfiibcMr/gt9qfyu05e4+YEdb7A3iEVG0ArdEAvDIPHBqTbB7bgCDA0sdH0x3/nEHDT4YFJi9siz74iaOBkK3ZyRTRXwE+FGG15BeA0Pf14hqinP3AyFJnHhnVm5xzThmNSBNFjDdvwzw75GFJIlvWhZ1UHlYlI3zIputa3CSduiRF7P09e9on+jODpanPOKsJMDOPV2wU7/BqsVPcQ2ix41X/8ARKpbfhPVtHNgik1hXAhIlmQ1rIbbcCVIzN/7+65794KRTc13IBwJXVkhRACBkAEyhVyiBqJbRn81YRjKUDfRN9xHpoVBt0xJRZ+iS4ehZFg2utJrjCO2GrAUAizcj+c3pXpiXVQwThZmdNrbrx+hAjtjbhSF5FPyKSsqmGraWKYCbfl97vMLi79fXHje7XsAhBsoo0P35fyMPpCj+lM0FDptJexuYzl82upRufxlKgrTh/+fOwBXc+Jt9jZJBTnxUbH/yGT5j4jRT2pB9O1oO/oi3FyD2/ggU14LY/j5RuHTJIZf5LR/WVmbaB2CT6xdQa4KwJZIHPfyMFoWRNSmQZDLlJVpdRw8GwwVWEGlScOGijdOq2VKyfHDB7/d1/+d37zXeT/dXG42l7/Kh2a20pd0JpxsxTVNt8KWyuu/94Ujr+7uvFpvQXP5PCfEAU4l+6pZZ9Ix3eqGqmsGrvok28V+zi6TKEYyi/Udt0MNavkkJC1e+vQA1tGqil6EV93j/UBbY0AXm/2Vku+z53x/8MDT5879U9Nb4Cqq/yf/WEjReiECfS9+C2f/6umFS/77q3t7kp0nGu8DTrFTQrwG1KtsoHVXlnXL0qMKHTRpGbaJlt7aoVsSbO3aQFb5L7MTJElIwrBMvnWxQteCEl2QREn8Ci/Ef9i7u1IT6tX5Pb/ePV+rUXKEL3DMkUPzc6OeNzo3/6C8K2QdrzVlKAYyHhBcxGgUyoCRqXimJZXYwYO1y1tWxQWKLkyfunpqevrU5vJs4SQ02JUDw94qMlC6maORJpc9AR/Sm7C4cK7S4MoL/FNqFYy+Nw5VbpIoWaWXP0atf+fj1Lb36w12h6SxShIouuNQw+TCVDNsWvHqDStpNUoFnobUs6mhUvpmn+r2VxaeuXjmCc974vSjm44OxfytrXeH5iaKxYm5fXMThcLEHLwcGzq66dHTnObMxWcWKv2u2tfa1ipMzu7rEM5OFshqLfsFu4R9thszrVjAUoHFgH98DxRreb3CK74rMTh/bWmJTq9Pd0nCZOvsbfrYrVsTty9cOPc5Or2U6spq8rXbrbNAL9yeuHWLYuEnEiErK0JIAPIN8kNyl9wn/yUt7mioN6GGTi1jDQrypNPRxQ+8zREatnUsVtgbcDHAaZA0rc6TxOIWLPFVXLDbvYRT45CDSnBOqFhee4aTcWw8gapGnS+Z+EYrOuqh825jrY5WSVwPDSewh/OWqYueCJQFEjhELTdgcdEODjUCo5yge7lcAlJxRSgceyZyu5LFfqnaeldKlsyunnK6N6LEaUSqTSndgpZK7jC7NZaR7LGcGhXwgMNC+WFt0MxEomZcECQ9EY4JkgAQDilSNKnGuxXJ0u2hdG9YUZkiZcfWpaOWkUv0G6IaCseVVH81o0dEEClKGokassX0hKSk44PxBGOS4E8cmNk+OMSY5+2cXfz8zI4hrG4jI9tnFpW/hqKx7PCnH1O7wpFkqeANT4IUVhopPTUwnNJxzSlUzLASV+4YfUIkpoQFTYvoMUFkJgtJ/Z6VEIyymx4usdCW5CuDc9s+dZDm6GeiejTl1jN6VFKUdMHMlUIWzaQEOdyrKHIsL0VZJB0TE1rUlLvCo71yPKya3dW+ONBQRBajUdPuKoXFsBAOiYoUdx7JtSXlU3ZJNAW1O+4ktBCFqBjLJhMW97JgyonISE5kVIJQJJ6tO6nueCJj1TV/D6uMzu06tH/H44NlRr3RnbNPLu7cXh75sWOklURzi5ZI9dgqG6tuEAf0bkWX0/0j6S6+RjfaYiQsbkKHhuNdms6kUExWZNGSlJgzkjIGjPK61KjLxOvGc/1/27r9KOQe7omHe+LhnvjQnmArLTyHMYHiPbGbFLEL4Q1BxOsiHrfy2HIBz67BXQbPsVbB4TNDZP/wF4x63cAxUl/PRtbXI61f2QM2/iuZUqleKr3ABp1Mxnn/rjvpOJN0b9K2k/73+Xi/VHOcGl4qyf8AzjWNo3icY2BkYGAA4uhnXafj+W2+MnCzgASiOB/va4DR///+/8/CysIElOBgAJEMAHS2DWQAAAB4nGNgZGBgYQABFtb/f///ZWFlYGRABToAW+YEPQAAAHicY2BgYGAhiP//J6wGCbNCMcP/vwxUBgDl4QRhAAAAeJxjYAACBQYThiCGAoYtjAyMZowBjPuYuJjCmBYxvWNWYXZhzmFewfyIRYUliPUOexr7EmIhAF3rF0sAeJxjYGRgYNBhZGRgZwABJiDmAkIGhv9gPgMADcIBTAB4nGWQPW7CQBSEx2BIAlKCFCkps1UKIpmfkgNAT0GXwpi1MbK91npBossJcoQcIaeIcoIcKGPzaGAtP38zb97uygAG+IWHenm4bWq9WrihOnGb9CDsk5+FO+jjRbhLfyjcwxumwn084p07eP4dnQFK4Rbu8SHcpv8p7JO/hDt4wrdwl/6PcA8r/An38eoN08gUsSncUif7LLRnef6utK1SU6hJMD5bC11oGzq9Ueujqg7J1LlYxdbkas6uzjKjSmt2OnLB1rlyNhrF4geRyZEigkGBuKkOS2gk2CNDCHvVvdQrpi0q+rVWmCDA+Cq1YKpokiGVxobJNY6sFQ48bUrXMa34Ws7kpLnMat4kIyv+77q3oxPRD7BtpkrMMOITX+SD5g75Pz0RXqgAAAB4nG2MyW6DQBiD+RKYpKT7vqf7Gg55pNHwEyJNGDSMRHj70nKtD7Zly45G0YA0+h8LRoyJSVBMmLJDyoxd9tjngEOOOOaEU84454JLrrjmhlvuuGfOA4888cwLr7zxzgeffPHNgixKtfeuzawUYTZYv16VITXaS8hy11azwf7FibGi/dS4Te2laWLj6k7lYiVIIv3aK9nWusqng2TLsXR900m2VMXaBvFxbXWnvBjn84mXor8pk54kqKa/NmUvVkyIg3NW/VK2jFvtKzQeR0uGRSgIrFlRYsip2FDT0LGNoh/MCkh9AAAA') format('woff')}[class*=' _icon-'],[class^='_icon-']{display:inline-block;font-family:eruda-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}._icon-arrow-left:before{content:'\\f101'}._icon-arrow-right:before{content:'\\f102'}._icon-caret-down:before{content:'\\f103'}._icon-caret-right:before{content:'\\f104'}._icon-clear:before{content:'\\f105'}._icon-compress:before{content:'\\f106'}._icon-copy:before{content:'\\f107'}._icon-delete:before{content:'\\f108'}._icon-error:before{content:'\\f109'}._icon-expand:before{content:'\\f10a'}._icon-eye:before{content:'\\f10b'}._icon-filter:before{content:'\\f10c'}._icon-play:before{content:'\\f10d'}._icon-record:before{content:'\\f10e'}._icon-refresh:before{content:'\\f10f'}._icon-reset:before{content:'\\f110'}._icon-search:before{content:'\\f111'}._icon-select:before{content:'\\f112'}._icon-tool:before{content:'\\f113'}._icon-warn:before{content:'\\f114'}",""]),v.exports=r},3645:function(v){v.exports=function(r){var s=[];return s.toString=function(){return this.map(function(_){var x=function(I,B){var H=I[1]||"",N=I[3];if(!N)return H;if(B&&typeof btoa=="function"){var l=(o=N,T=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),L="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(T),"/*# ".concat(L," */")),d=N.sources.map(function(Q){return"/*# sourceURL=".concat(N.sourceRoot||"").concat(Q," */")});return[H].concat(d).concat([l]).join(`
`)}var o,T,L;return[H].join(`
`)}(_,r);return _[2]?"@media ".concat(_[2]," {").concat(x,"}"):x}).join("")},s.i=function(_,x,I){typeof _=="string"&&(_=[[null,_,""]]);var B={};if(I)for(var H=0;H<this.length;H++){var N=this[H][0];N!=null&&(B[N]=!0)}for(var l=0;l<_.length;l++){var d=[].concat(_[l]);I&&B[d[0]]||(x&&(d[2]?d[2]="".concat(x," and ").concat(d[2]):d[2]=x),s.push(d))}},s}},1512:function(v,r,s){var _=s(3244),x=s(6906),I=s(7665),B=s(975),H=s(4991),N=s(4209),l=s(9702),d=s(6757),o=s(8381),T=s(5543),L=s(7781),Q=s(8908),P=s(1286),q=s(6768);r=function(Z){return new _(Z)},_.methods({offset:function(){return x(this)},hide:function(){return this.css("display","none")},show:function(){return I(this),this},first:function(){return r(this[0])},last:function(){return r(l(this))},get:function(Z){return this[Z]},eq:function(Z){return r(this[Z])},on:function(Z,j,dt){return T.on(this,Z,j,dt),this},off:function(Z,j,dt){return T.off(this,Z,j,dt),this},html:function(Z){var j=N.html(this,Z);return P(Z)?j:this},text:function(Z){var j=N.text(this,Z);return P(Z)?j:this},val:function(Z){var j=N.val(this,Z);return P(Z)?j:this},css:function(Z,j){var dt=B(this,Z,j);return C(Z,j)?dt:this},attr:function(Z,j){var dt=H(this,Z,j);return C(Z,j)?dt:this},data:function(Z,j){var dt=o(this,Z,j);return C(Z,j)?dt:this},rmAttr:function(Z){return H.remove(this,Z),this},remove:function(){return d(this),this},addClass:function(Z){return L.add(this,Z),this},rmClass:function(Z){return L.remove(this,Z),this},toggleClass:function(Z){return L.toggle(this,Z),this},hasClass:function(Z){return L.has(this,Z)},parent:function(){return r(this[0].parentNode)},append:function(Z){return Q.append(this,Z),this},prepend:function(Z){return Q.prepend(this,Z),this},before:function(Z){return Q.before(this,Z),this},after:function(Z){return Q.after(this,Z),this}});var C=function(Z,j){return P(j)&&q(Z)};v.exports=r},4991:function(v,r,s){var _=s(1352),x=s(5166),I=s(6768),B=s(3783),H=s(1286),N=s(2341);(r=function(l,d,o){if(l=N(l),H(o)&&I(d))return function(L,Q){return L.getAttribute(Q)}(l[0],d);var T=d;x(T)||((T={})[d]=o),function(L,Q){B(L,function(P){B(Q,function(q,C){P.setAttribute(C,q)})})}(l,T)}).remove=function(l,d){l=N(l),d=_(d),B(l,function(o){B(d,function(T){o.removeAttribute(T)})})},v.exports=r},7781:function(v,r,s){var _=s(1352),x=s(6053),I=s(2341),B=s(6768),H=s(3783);function N(l){return B(l)?l.split(/\s+/):_(l)}r={add:function(l,d){l=I(l);var o=N(d);H(l,function(T){var L=[];H(o,function(Q){r.has(T,Q)||L.push(Q)}),L.length!==0&&(T.className+=(T.className?" ":"")+L.join(" "))})},has:function(l,d){l=I(l);var o=new RegExp("(^|\\s)"+d+"(\\s|$)");return x(l,function(T){return o.test(T.className)})},toggle:function(l,d){l=I(l),H(l,function(o){if(!r.has(o,d))return r.add(o,d);r.remove(o,d)})},remove:function(l,d){l=I(l);var o=N(d);H(l,function(T){H(o,function(L){T.classList.remove(L)})})}},v.exports=r},975:function(v,r,s){var _=s(6768),x=s(5166),I=s(7622),B=s(1286),H=s(6341),N=s(3990),l=s(2341),d=s(747),o=s(3783);r=function(L,Q,P){if(L=l(L),B(P)&&_(Q))return function(C,Z){return C.style[d(Z)]||getComputedStyle(C,"").getPropertyValue(Z)}(L[0],Q);var q=Q;x(q)||((q={})[Q]=P),function(C,Z){o(C,function(j){var dt=";";o(Z,function(Y,W){W=d.dash(W),dt+=W+":"+function(u,O){var X=N(O)&&!H(T,I(u));return X?O+"px":O}(W,Y)+";"}),j.style.cssText+=dt})}(L,q)};var T=["column-count","columns","font-weight","line-weight","opacity","z-index","zoom"];v.exports=r},8381:function(v,r,s){var _=s(4991),x=s(6768),I=s(5166),B=s(3783);s(2341),r=function(H,N,l){var d=N;return x(N)&&(d="data-"+N),I(N)&&(d={},B(N,function(o,T){d["data-"+T]=o})),_(H,d,l)},v.exports=r},5543:function(v,r,s){var _=s(2443),x=s(1286),I=s(2341),B=s(3783);function H(N){return function(l,d,o,T){l=I(l),x(T)&&(T=o,o=void 0),B(l,function(L){_[N](L,d,o,T)})}}r={on:H("add"),off:H("remove")},v.exports=r},8908:function(v,r,s){var _=s(3783),x=s(2341),I=s(6768);function B(H){return function(N,l){N=x(N),_(N,function(d){if(I(l))d.insertAdjacentHTML(H,l);else{var o=d.parentNode;switch(H){case"beforebegin":o&&o.insertBefore(l,d);break;case"afterend":o&&o.insertBefore(l,d.nextSibling);break;case"beforeend":d.appendChild(l);break;case"afterbegin":d.prepend(l)}}})}}r={before:B("beforebegin"),after:B("afterend"),append:B("beforeend"),prepend:B("afterbegin")},v.exports=r},6906:function(v,r,s){var _=s(2341);r=function(x){var I=(x=_(x))[0].getBoundingClientRect();return{left:I.left+window.pageXOffset,top:I.top+window.pageYOffset,width:Math.round(I.width),height:Math.round(I.height)}},v.exports=r},4209:function(v,r,s){var _=s(1286),x=s(3783),I=s(2341);function B(H){return function(N,l){var d=(N=I(N))[0];if(_(l))return d?d[H]:"";d&&x(N,function(o){o[H]=l})}}r={html:B("innerHTML"),text:B("textContent"),val:B("value")},v.exports=r},6757:function(v,r,s){var _=s(3783),x=s(2341);r=function(I){I=x(I),_(I,function(B){var H=B.parentNode;H&&H.removeChild(B)})},v.exports=r},2341:function(v,r,s){var _=s(6768),x=s(1352),I=s(3244);r=function(B){return x(_(B)?new I(B):B)},v.exports=r},7665:function(v,r,s){var _=s(3783),x=s(2341);r=function(B){B=x(B),_(B,function(H){(function(N){return getComputedStyle(N,"").getPropertyValue("display")=="none"})(H)&&(H.style.display=function(N){var l,d;return I[N]||(l=document.createElement(N),document.documentElement.appendChild(l),d=getComputedStyle(l,"").getPropertyValue("display"),l.parentNode.removeChild(l),d=="none"&&(d="block"),I[N]=d),I[N]}(H.nodeName))})};var I={};v.exports=r},7496:function(v,r,s){var _=s(6329),x=s(1352),I=s(5022),B=s(7653),H=s(9537),N=(r=function(l,d){return N.extend(l,d)}).Base=function l(d,o,T){T=T||{};var L=o.className||B(o,"initialize.name")||"";delete o.className;var Q=function(){var P=x(arguments);return this.initialize&&this.initialize.apply(this,P)||this};if(!H)try{Q=new Function("toArr","return function "+L+"(){var args = toArr(arguments);return this.initialize ? this.initialize.apply(this, args) || this : this;};")(x)}catch{}return I(Q,d),Q.prototype.constructor=Q,Q.extend=function(P,q){return l(Q,P,q)},Q.inherits=function(P){I(Q,P)},Q.methods=function(P){return _(Q.prototype,P),Q},Q.statics=function(P){return _(Q,P),Q},Q.methods(o).statics(T),Q}(Object,{className:"Base",callSuper:function(l,d,o){return l.prototype[d].apply(this,o)},toString:function(){return this.constructor.name}});v.exports=r},3009:function(v,r,s){var _=s(7496),x=s(6768),I=s(9882),B=s(3279),H=s(5925),N=s(5044);r=_({initialize:function(Q){x(Q)&&(Q=r.parse(Q)),this.model=Q.model,this.val=Q.val},toRgb:function(){var Q=this.val;this.model==="hsl"&&(Q=H(Q));var P="rgba";return Q[3]===1&&(P="rgb",Q=Q.slice(0,3)),P+"("+Q.join(", ")+")"},toHex:function(){var Q=this.val;this.model==="hsl"&&(Q=H(Q));var P=N.encode(Q.slice(0,3));return P[0]===P[1]&&P[2]===P[3]&&P[4]===P[5]&&(P=P[0]+P[2]+P[5]),"#"+P},toHsl:function(){var Q=this.val;this.model==="rgb"&&(Q=B(Q));var P="hsla";return Q[3]===1&&(P="hsl",Q=Q.slice(0,3)),Q[1]=Q[1]+"%",Q[2]=Q[2]+"%",P+"("+Q.join(", ")+")"}},{parse:function(Q){var P,q,C=[0,0,0,1],Z="rgb";if(q=Q.match(l))for(q=q[1],P=0;P<3;P++)C[P]=parseInt(q[P]+q[P],16);else if(q=Q.match(d))for(q=q[1],P=0;P<3;P++){var j=2*P;C[P]=parseInt(q.slice(j,j+2),16)}else if(q=Q.match(o)){for(P=0;P<3;P++)C[P]=parseInt(q[P+1],0);q[4]&&(C[3]=parseFloat(q[4]))}else if(q=Q.match(T)){for(P=0;P<3;P++)C[P]=Math.round(2.55*parseFloat(q[P+1]));q[4]&&(C[3]=parseFloat(q[4]))}else(q=Q.match(L))&&(Z="hsl",C=[(parseFloat(q[1])%360+360)%360,I(parseFloat(q[2]),0,100),I(parseFloat(q[3]),0,100),I(parseFloat(q[4]),0,1)]);return{val:C,model:Z}}});var l=/^#([a-fA-F0-9]{3})$/,d=/^#([a-fA-F0-9]{6})$/,o=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,T=/^rgba?\(\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,L=/^hsla?\(\s*([+-]?\d*[.]?\d+)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/;v.exports=r},1443:function(v,r,s){var _=s(7496),x=s(6257),I=s(3783),B=s(9677),H=s(8763),N=s(4675);r=_({initialize:function(){this._events=this._events||{}},on:function(l,d){return this._events[l]=this._events[l]||[],this._events[l].push(d),this},off:function(l,d){var o=this._events;if(x(o,l)){var T=o[l].indexOf(d);return T>-1&&o[l].splice(T,1),this}},once:function(l,d){return this.on(l,H(d)),this},emit:function(l){var d=this;if(x(this._events,l)){var o=B(arguments,1),T=N(this._events[l]);return I(T,function(L){return L.apply(d,o)},this),this}},removeAllListeners:function(l){return l?delete this._events[l]:this._events={},this}},{mixin:function(l){I(["on","off","once","emit","removeAllListeners"],function(d){l[d]=r.prototype[d]}),l._events=l._events||{}}}),v.exports=r},9640:function(v,r,s){var _=s(7496),x=s(4454),I=s(6472),B=s(3783),H=s(2533);r=_({initialize:function(N){I(N)?(this.size=N.length,B(N,function(l,d){this[l]=d},this)):(this.size=H(N).length,B(N,function(l,d){this[d]=l},this)),x(this)}}),v.exports=r},125:function(v,r,s){var _=s(5128),x=s(615),I=s(8887),B=s(4400),H=s(4193),N=s(5166),l=x("local");r=_.extend({initialize:function(d,o){this._name=d,o=o||{};var T=l.getItem(d);try{T=JSON.parse(T)}catch{T={}}N(T)||(T={}),o=H(T,o),this.callSuper(_,"initialize",[o])},save:function(d){if(I(d))return l.removeItem(this._name);l.setItem(this._name,B(d))}}),v.exports=r},4989:function(v,r,s){var _=s(1443),x=s(9640),I=s(1352),B=s(1286),H=s(4675),N=s(6768),l=s(3990);r=_.extend({initialize:function(d,o){this.name=d,this.setLevel(B(o)?r.level.DEBUG:o),this.callSuper(_,"initialize",arguments)},setLevel:function(d){return N(d)?((d=r.level[d.toUpperCase()])&&(this._level=d),this):(l(d)&&(this._level=d),this)},getLevel:function(){return this._level},formatter:function(d,o){return o},trace:function(){return this._log("trace",arguments)},debug:function(){return this._log("debug",arguments)},info:function(){return this._log("info",arguments)},warn:function(){return this._log("warn",arguments)},error:function(){return this._log("error",arguments)},_log:function(d,o){return(o=I(o)).length===0?this:(this.emit("all",d,H(o)),r.level[d.toUpperCase()]<this._level||(this.emit(d,H(o)),(d==="debug"?console.log:console[d]).apply(console,this.formatter(d,o))),this)}},{level:new x({TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5})}),v.exports=r},2765:function(v,r,s){var _=s(1443);r=_.extend({className:"MediaQuery",initialize:function(x){var I=this;this.callSuper(_,"initialize"),this._listener=function(){I.emit(I.isMatch()?"match":"unmatch")},this.setQuery(x)},setQuery:function(x){this._mql&&this._mql.removeListener(this._listener),this._mql=window.matchMedia(x),this._mql.addListener(this._listener)},isMatch:function(){return this._mql.matches}}),v.exports=r},2289:function(v,r,s){var _=s(7496);(r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)||(r=_({initialize:function(){},observe:function(){},disconnect:function(){},takeRecords:function(){}})),v.exports=r},242:function(v,r,s){var _=s(8985),x=s(8613),I=s(5543),B=s(975),H=s(6341),N=s(6329),l=s(5610);r=l.ResizeObserver?_.extend({initialize:function(d){var o=this;if(d._resizeSensor)return d._resizeSensor;this.callSuper(_,"initialize");var T=new l.ResizeObserver(function(){return o.emit()});T.observe(d),d._resizeSensor=this,this._resizeObserver=T,this._el=d},destroy:function(){var d=this._el;d._resizeSensor&&(this.rmAllListeners(),delete d._resizeSensor,this._resizeObserver.unobserve(d))}}):_.extend({initialize:function(d){if(d._resizeSensor)return d._resizeSensor;this.callSuper(_,"initialize"),this._el=d,d._resizeSensor=this,H(["absolute","relative","fixed","sticky"],B(d,"position"))||B(d,"position","relative"),this._appendResizeSensor(),this._bindEvent()},destroy:function(){var d=this._el;d._resizeSensor&&(this.rmAllListeners(),delete d._resizeSensor,d.removeChild(this._resizeSensorEl))},_appendResizeSensor:function(){var d=this._el,o={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},T={position:"absolute",left:"0px",top:"0px",transition:"0s"},L=x("div",{style:T}),Q=x("div.resize-sensor-expand",{style:o},L),P=x("div.resize-sensor-shrink",{style:o},x("div",{style:N({width:"200%",height:"200%"},T)})),q=x("div.resize-sensor",{dir:"ltr",style:o},Q,P);this._expandEl=Q,this._expandChildEl=L,this._shrinkEl=P,this._resizeSensorEl=q,d.appendChild(q),this._resetExpandShrink()},_bindEvent:function(){var d=this;I.on(this._expandEl,"scroll",function(){return d._onScroll()}),I.on(this._shrinkEl,"scroll",function(){return d._onScroll()})},_onScroll:function(){this.emit(),this._resetExpandShrink()},_resetExpandShrink:function(){var d=this._el,o=d.offsetWidth,T=d.offsetHeight;B(this._expandChildEl,{width:o+10,height:T+10}),N(this._expandEl,{scrollLeft:o+10,scrollTop:T+10}),N(this._shrinkEl,{scrollLeft:o+10,scrollTop:T+10})}}),v.exports=r},3244:function(v,r,s){var _=s(7496),x=s(6768),I=s(3783),B=s(9971),H=new(r=_({className:"Select",initialize:function(N){return this.length=0,N?x(N)?H.find(N):void(N.nodeType&&(this[0]=N,this.length=1)):this},find:function(N){var l=new r;return this.each(function(){B(l,this.querySelectorAll(N))}),l},each:function(N){return I(this,function(l,d){N.call(l,d,l)}),this}}))(document);v.exports=r},8985:function(v,r,s){var _=s(7496),x=s(4675),I=s(3783),B=s(1352);r=_({initialize:function(){this._listeners=[]},addListener:function(H){this._listeners.push(H)},rmListener:function(H){var N=this._listeners.indexOf(H);N>-1&&this._listeners.splice(N,1)},rmAllListeners:function(){this._listeners=[]},emit:function(){var H=this,N=B(arguments),l=x(this._listeners);I(l,function(d){return d.apply(H,N)},this)}},{mixin:function(H){I(["addListener","rmListener","emit","rmAllListeners"],function(N){H[N]=r.prototype[N]}),H._listeners=H._listeners||[]}}),v.exports=r},9001:function(v,r,s){var _=s(7496),x=s(1527);r=_({initialize:function(){this.clear()},clear:function(){this._items=[],this.size=0},push:function(I){return this._items.push(I),++this.size},pop:function(){if(this.size)return this.size--,this._items.pop()},peek:function(){return this._items[this.size-1]},forEach:function(I,B){B=arguments.length>1?B:this;for(var H=this._items,N=this.size-1,l=0;N>=0;N--,l++)I.call(B,H[N],l,this)},toArr:function(){return x(this._items)}}),v.exports=r},5128:function(v,r,s){var _=s(1443),x=s(6768),I=s(5166),B=s(3783),H=s(1352);r=_.extend({initialize:function(N){this.callSuper(_,"initialize",arguments),this._data=N||{},this.save(this._data)},set:function(N,l){var d;x(N)?(d={})[N]=l:I(N)&&(d=N);var o=this;B(d,function(T,L){var Q=o._data[L];o._data[L]=T,o.emit("change",L,T,Q)}),this.save(this._data)},get:function(N){var l=this._data;if(x(N))return l[N];var d={};return B(N,function(o){d[o]=l[o]}),d},remove:function(N){N=H(N);var l=this._data;B(N,function(d){delete l[d]}),this.save(l)},clear:function(){this._data={},this.save(this._data)},each:function(N){B(this._data,N)},save:function(N){this._data=N}}),v.exports=r},6334:function(v,r,s){var _=s(7496),x=s(6329),I=s(4331),B=s(1745),H=s(8887),N=s(3783),l=s(6472),d=s(1352),o=s(2727),T=s(5166),L=s(3367);r=_({className:"Url",initialize:function(C){!C&&o&&(C=window.location.href),x(this,r.parse(C||""))},setQuery:function(C,Z){var j=this.query;return T(C)?N(C,function(dt,Y){j[Y]=L(dt)}):j[C]=L(Z),this},rmQuery:function(C){var Z=this.query;return l(C)||(C=d(C)),N(C,function(j){delete Z[j]}),this},toString:function(){return r.stringify(this)}},{parse:function(C){var Z={protocol:"",auth:"",hostname:"",hash:"",query:{},port:"",pathname:"",slashes:!1},j=I(C),dt=!1,Y=j.match(Q);if(Y&&(Y=Y[0],Z.protocol=Y.toLowerCase(),j=j.substr(Y.length)),Y&&(dt=j.substr(0,2)==="//")&&(j=j.slice(2),Z.slashes=!0),dt){for(var W=j,u=-1,O=0,X=q.length;O<X;O++){var ht=j.indexOf(q[O]);ht!==-1&&(u===-1||ht<u)&&(u=ht)}u>-1&&(W=j.slice(0,u),j=j.slice(u));var pt=W.lastIndexOf("@");pt!==-1&&(Z.auth=decodeURIComponent(W.slice(0,pt)),W=W.slice(pt+1)),Z.hostname=W;var ft=W.match(P);ft&&((ft=ft[0])!==":"&&(Z.port=ft.substr(1)),Z.hostname=W.substr(0,W.length-ft.length))}var $=j.indexOf("#");$!==-1&&(Z.hash=j.substr($),j=j.slice(0,$));var At=j.indexOf("?");return At!==-1&&(Z.query=B.parse(j.substr(At+1)),j=j.slice(0,At)),Z.pathname=j||"/",Z},stringify:function(C){var Z=C.protocol+(C.slashes?"//":"")+(C.auth?encodeURIComponent(C.auth)+"@":"")+C.hostname+(C.port?":"+C.port:"")+C.pathname;return H(C.query)||(Z+="?"+B.stringify(C.query)),C.hash&&(Z+=C.hash),Z}});var Q=/^([a-z0-9.+-]+:)/i,P=/:[0-9]*$/,q=["/","?","#"];v.exports=r},8991:function(v,r,s){var _=s(4777),x=s(1214),I=s(4193),B=s(5166),H=s(1745);function N(l,d,o,T){return _(d)&&(T=o,o=d,d={}),{url:l,data:d,success:o,dataType:T}}(r=function(l){I(l,r.setting);var d,o=l.type,T=l.url,L=l.data,Q=l.dataType,P=l.success,q=l.error,C=l.timeout,Z=l.complete,j=l.xhr();return j.onreadystatechange=function(){if(j.readyState===4){var dt;clearTimeout(d);var Y=j.status;if(Y>=200&&Y<300||Y===304){dt=j.responseText,Q==="xml"&&(dt=j.responseXML);try{Q==="json"&&(dt=JSON.parse(dt))}catch{}P(dt,j)}else q(j);Z(j)}},o==="GET"?(L=H.stringify(L))&&(T+=T.indexOf("?")>-1?"&"+L:"?"+L):l.contentType==="application/x-www-form-urlencoded"?B(L)&&(L=H.stringify(L)):l.contentType==="application/json"&&B(L)&&(L=JSON.stringify(L)),j.open(o,T,!0),j.setRequestHeader("Content-Type",l.contentType),C>0&&(d=setTimeout(function(){j.onreadystatechange=x,j.abort(),q(j,"timeout"),Z(j)},C)),j.send(o==="GET"?null:L),j}).setting={type:"GET",success:x,error:x,complete:x,dataType:"json",contentType:"application/x-www-form-urlencoded",data:{},xhr:function(){return new XMLHttpRequest},timeout:0},r.get=function(){return r(N.apply(null,arguments))},r.post=function(){var l=N.apply(null,arguments);return l.type="POST",r(l)},v.exports=r},1116:function(v,r,s){var _=s(2533),x=s(415),I=s(42),B=Object.getOwnPropertyNames,H=Object.getOwnPropertySymbols;r=function(N){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=l.prototype,o=d===void 0||d,T=l.unenumerable,L=T!==void 0&&T,Q=l.symbol,P=Q!==void 0&&Q,q=[];if((L||P)&&B){var C=_;L&&B&&(C=B);do q=q.concat(C(N)),P&&H&&(q=q.concat(H(N)));while(o&&(N=x(N))&&N!==Object.prototype);q=I(q)}else if(o)for(var Z in N)q.push(Z);else q=_(N);return q},v.exports=r},7913:function(v,r,s){var _=s(3783),x=s(1286),I=s(4777);r=function(B,H){x(H)&&(H=!0);var N=I(H),l={};return _(B,function(d){l[d]=N?H(d):H}),l},v.exports=r},3901:function(v,r){r={encode:function(B){var H,N,l=[],d=B.length,o=d%3;d-=o;for(var T=0;T<d;T+=3)l.push((H=(B[T]<<16)+(B[T+1]<<8)+B[T+2],_[H>>18&63]+_[H>>12&63]+_[H>>6&63]+_[63&H]));return d=B.length,o===1?(N=B[d-1],l.push(_[N>>2]),l.push(_[N<<4&63]),l.push("==")):o===2&&(N=(B[d-2]<<8)+B[d-1],l.push(_[N>>10]),l.push(_[N>>4&63]),l.push(_[N<<2&63]),l.push("=")),l.join("")},decode:function(B){var H=B.length,N=0;B[H-2]==="="?N=2:B[H-1]==="="&&(N=1);var l,d,o,T,L,Q,P,q=new Array(3*H/4-N);for(H=N>0?H-4:H,l=0,d=0;l<H;l+=4){var C=(o=B[l],T=B[l+1],L=B[l+2],Q=B[l+3],s[o.charCodeAt(0)]<<18|s[T.charCodeAt(0)]<<12|s[L.charCodeAt(0)]<<6|s[Q.charCodeAt(0)]);q[d++]=C>>16&255,q[d++]=C>>8&255,q[d++]=255&C}return N===2?(P=s[B.charCodeAt(l)]<<2|s[B.charCodeAt(l+1)]>>4,q[d++]=255&P):N===1&&(P=s[B.charCodeAt(l)]<<10|s[B.charCodeAt(l+1)]<<4|s[B.charCodeAt(l+2)]>>2,q[d++]=P>>8&255,q[d++]=255&P),q}};for(var s=[],_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x=0,I=_.length;x<I;x++)s[_.charCodeAt(x)]=x;v.exports=r},5637:function(v,r){r=function(s,_){var x;return function(){return--s>0&&(x=_.apply(this,arguments)),s<=1&&(_=null),x}},v.exports=r},7494:function(v,r,s){var _=s(8935);function x(I,B){this[B]=I.replace(/\w/,function(H){return H.toUpperCase()})}r=function(I){var B=_(I),H=B[0];return B.shift(),B.forEach(x,B),H+=B.join("")},v.exports=r},1694:function(v,r,s){var _=s(6257),x=s(6472);r=function(H,N){if(x(H))return H;if(N&&_(N,H))return[H];var l=[];return H.replace(I,function(d,o,T,L){l.push(T?L.replace(B,"$1"):o||d)}),l};var I=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,B=/\\(\\)?/g;v.exports=r},996:function(v,r){r=function(s,_){var x=[];_=_||1;for(var I=0,B=Math.ceil(s.length/_);I<B;I++){var H=I*_,N=H+_;x.push(s.slice(H,N))}return x},v.exports=r},9882:function(v,r,s){var _=s(1286);r=function(x,I,B){return _(B)&&(B=I,I=void 0),!_(I)&&x<I?I:x>B?B:x},v.exports=r},4675:function(v,r,s){var _=s(5166),x=s(6472),I=s(6329);r=function(B){return _(B)?x(B)?B.slice():I({},B):B},v.exports=r},550:function(v,r,s){var _=s(5166),x=s(4777),I=s(6472),B=s(8820);r=function(H){return I(H)?H.map(function(N){return r(N)}):_(H)&&!x(H)?B(H,function(N){return r(N)}):H},v.exports=r},8099:function(v,r,s){var _=s(1352);r=function(){for(var x=_(arguments),I=[],B=0,H=x.length;B<H;B++)I=I.concat(_(x[B]));return I},v.exports=r},6341:function(v,r,s){var _=s(496),x=s(6768),I=s(1369),B=s(2578);r=function(H,N){return x(H)?H.indexOf(N)>-1:(I(H)||(H=B(H)),_(H,N)>=0)},v.exports=r},1792:function(v,r,s){var _=s(6768),x=s(3901),I=s(385),B=s(6472),H=s(2349),N=s(3085),l=s(3063);(r=function(d,o){var T;if(o=l(o),_(d))T=new Uint8Array(x.decode(d));else if(I(d))d=d.slice(0),T=new Uint8Array(d);else if(B(d))T=new Uint8Array(d);else if(N(d)==="uint8array")T=d.slice(0);else if(H(d)){T=new Uint8Array(d.length);for(var L=0;L<d.length;L++)T[L]=d[L]}if(T)switch(o){case"base64":T=x.encode(T);break;case"arraybuffer":T=T.buffer;break;case"array":T=[].slice.call(T);break;case"buffer":T=Buffer.from(T);break;case"blob":T=new Blob([T.buffer])}return T}).blobToArrBuffer=function(d){return new Promise(function(o,T){var L=new FileReader;L.onload=function(Q){o(Q.target.result)},L.onerror=function(Q){T(Q)},L.readAsArrayBuffer(d)})},v.exports=r},6299:function(v,r,s){var _=s(4193),x=s(3990),I=s(1286),B=s(1420),H={path:"/"};function N(l,d,o){if(!I(d)){if(o=_(o=o||{},H),x(o.expires)){var T=new Date;T.setMilliseconds(T.getMilliseconds()+864e5*o.expires),o.expires=T}return d=encodeURIComponent(d),l=encodeURIComponent(l),document.cookie=[l,"=",d,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join(""),r}for(var L=document.cookie?document.cookie.split("; "):[],Q=l?void 0:{},P=0,q=L.length;P<q;P++){var C=L[P],Z=C.split("="),j=B(Z.shift());if(C=Z.join("="),C=B(C),l===j){Q=C;break}l||(Q[j]=C)}return Q}r={get:N,set:N,remove:function(l,d){return(d=d||{}).expires=-1,N(l,"",d)}},v.exports=r},2327:function(v,r,s){var _=s(6329),x=s(1214);r=function(I,B){B=B||x;var H=document.createElement("textarea"),N=document.body;_(H.style,{fontSize:"12pt",border:"0",padding:"0",margin:"0",position:"absolute",left:"-9999px"}),H.value=I,N.appendChild(H),H.setAttribute("readonly",""),H.select(),H.setSelectionRange(0,I.length);try{document.execCommand("copy"),B()}catch(l){B(l)}finally{N.removeChild(H)}},v.exports=r},1662:function(v,r,s){var _=s(5166);r=function(I){if(!_(I))return{};if(x)return x(I);function B(){}return B.prototype=I,new B};var x=Object.create;v.exports=r},4427:function(v,r,s){var _=s(1286),x=s(3783);r=function(I,B){return function(H){return x(arguments,function(N,l){if(l!==0){var d=I(N);x(d,function(o){B&&!_(H[o])||(H[o]=N[o])})}}),H}},v.exports=r},4210:function(v,r,s){var _=s(1475),x=s(1286),I=s(7494);r=_(function(H,N){return x(N)?(H=I(H),!x(B[H])):(B.cssText="",B.cssText=H+":"+N,!!B.length)},function(H,N){return H+" "+N});var B=document.createElement("p").style;v.exports=r},4407:function(v,r,s){var _=s(6768),x=s(2106),I=s(3367),B=s(5351);r=function(T,L,Q,P){arguments.length===1&&_(T)&&!d.test(T)&&(L=T,T=void 0),T=T||new Date,x(T)||(T=new Date(T));var q=(L=I(r.masks[L]||L||r.masks.default)).slice(0,4);q!=="UTC:"&&q!=="GMT:"||(L=L.slice(4),Q=!0,q==="GMT:"&&(P=!0));var C=Q?"getUTC":"get",Z=T[C+"Date"](),j=T[C+"Day"](),dt=T[C+"Month"](),Y=T[C+"FullYear"](),W=T[C+"Hours"](),u=T[C+"Minutes"](),O=T[C+"Seconds"](),X=T[C+"Milliseconds"](),ht=Q?0:T.getTimezoneOffset(),pt={d:Z,dd:H(Z),ddd:r.i18n.dayNames[j],dddd:r.i18n.dayNames[j+7],m:dt+1,mm:H(dt+1),mmm:r.i18n.monthNames[dt],mmmm:r.i18n.monthNames[dt+12],yy:I(Y).slice(2),yyyy:Y,h:W%12||12,hh:H(W%12||12),H:W,HH:H(W),M:u,MM:H(u),s:O,ss:H(O),l:H(X,3),L:H(Math.round(X/10)),t:W<12?"a":"p",tt:W<12?"am":"pm",T:W<12?"A":"P",TT:W<12?"AM":"PM",Z:P?"GMT":Q?"UTC":(I(T).match(l)||[""]).pop().replace(o,""),o:(ht>0?"-":"+")+H(100*Math.floor(Math.abs(ht)/60)+Math.abs(ht)%60,4),S:["th","st","nd","rd"][Z%10>3?0:(Z%100-Z%10!=10)*Z%10]};return L.replace(N,function(ft){return ft in pt?pt[ft]:ft.slice(1,ft.length-1)})};var H=function(T){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return B(I(T),L,"0")},N=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,l=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/\d/,o=/[^-+\dA-Z]/g;r.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},r.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},v.exports=r},6049:function(v,r){r=function(s,_,x){var I;return function(){var B=this,H=arguments;x||clearTimeout(I),x&&I||(I=setTimeout(function(){I=null,s.apply(B,H)},_))}},v.exports=r},1420:function(v,r,s){var _=s(3783),x=s(8166),I=s(2461),B=s(5742);function H(l){return+("0x"+l)}r=function(l){try{return decodeURIComponent(l)}catch{var d=l.match(N);return d&&_(d,function(T){l=l.replace(T,function(L){L=L.split("%").slice(1);var Q=I(L,H);return L=x.encode(Q),L=B.decode(L,!0),L}(T))}),l}};var N=/(%[a-f0-9]{2})+/gi;v.exports=r},4193:function(v,r,s){r=s(4427)(s(1116),!0),v.exports=r},9803:function(v,r,s){var _=s(1694),x=s(6768),I=s(5166),B=s(3783);function H(N,l,d){for(var o=_(l,N),T=o.pop();l=o.shift();)N[l]||(N[l]={}),N=N[l];Object.defineProperty(N,T,d)}r=function(N,l,d){return x(l)?H(N,l,d):I(l)&&B(l,function(o,T){H(N,T,o)}),N},v.exports=r},2443:function(v,r,s){var _=s(7496),x=s(6341);function I(){return!0}function B(){return!1}function H(l){var d,o=this.events[l.type],T=N.call(this,l,o);l=new r.Event(l);for(var L,Q,P=0;(Q=T[P++])&&!l.isPropagationStopped();)for(l.curTarget=Q.el,L=0;(d=Q.handlers[L++])&&!l.isImmediatePropagationStopped();)d.handler.apply(Q.el,[l])===!1&&(l.preventDefault(),l.stopPropagation())}function N(l,d){var o,T,L,Q,P=l.target,q=[],C=d.delegateCount;if(P.nodeType)for(;P!==this;P=P.parentNode||this){for(T=[],Q=0;Q<C;Q++)T[o=(L=d[Q]).selector+" "]===void 0&&(T[o]=x(this.querySelectorAll(o),P)),T[o]&&T.push(L);T.length&&q.push({el:P,handlers:T})}return C<d.length&&q.push({el:this,handlers:d.slice(C)}),q}r={add:function(l,d,o,T){var L,Q={selector:o,handler:T};l.events||(l.events={}),(L=l.events[d])||((L=l.events[d]=[]).delegateCount=0,l.addEventListener(d,function(){H.apply(l,arguments)},!1)),o?L.splice(L.delegateCount++,0,Q):L.push(Q)},remove:function(l,d,o,T){var L=l.events;if(L&&L[d])for(var Q,P=L[d],q=P.length;q--;)Q=P[q],o&&Q.selector!=o||Q.handler!=T||(P.splice(q,1),Q.selector&&P.delegateCount--)},Event:_({className:"Event",initialize:function(l){this.origEvent=l},isDefaultPrevented:B,isPropagationStopped:B,isImmediatePropagationStopped:B,preventDefault:function(){var l=this.origEvent;this.isDefaultPrevented=I,l&&l.preventDefault&&l.preventDefault()},stopPropagation:function(){var l=this.origEvent;this.isPropagationStopped=I,l&&l.stopPropagation&&l.stopPropagation()},stopImmediatePropagation:function(){var l=this.origEvent;this.isImmediatePropagationStopped=I,l&&l.stopImmediatePropagation&&l.stopImmediatePropagation(),this.stopPropagation()}})},v.exports=r},4541:function(v,r,s){var _=s(2727),x=s(9296),I=s(2533);r=function(d){var o=l(d=(d=d||(_?navigator.userAgent:"")).toLowerCase(),"msie ");if(o)return{version:o,name:"ie"};if(H.test(d))return{version:11,name:"ie"};for(var T=0,L=N.length;T<L;T++){var Q=N[T],P=d.match(B[Q]);if(P!=null){var q=x(P[1].split(".")[0]);return Q==="opera"&&(q=l(d,"version/")||q),{name:Q,version:q}}}return{name:"unknown",version:-1}};var B={edge:/edge\/([0-9._]+)/,firefox:/firefox\/([0-9.]+)(?:\s|$)/,opera:/opera\/([0-9.]+)(?:\s|$)/,android:/android\s([0-9.]+)/,ios:/version\/([0-9._]+).*mobile.*safari.*/,safari:/version\/([0-9._]+).*safari/,chrome:/(?!chrom.*opr)chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/},H=/trident\/7\./,N=I(B);function l(d,o){var T=d.indexOf(o);if(T>-1)return x(d.substring(T+o.length,d.indexOf(".",T)))}v.exports=r},6954:function(v,r,s){var _=s(2727);r=function(x){if(x=(x=x||(_?navigator.userAgent:"")).toLowerCase(),I("windows phone"))return"windows phone";if(I("win"))return"windows";if(I("android"))return"android";if(I("ipad")||I("iphone")||I("ipod"))return"ios";if(I("mac"))return"os x";if(I("linux"))return"linux";function I(B){return x.indexOf(B)>-1}return"unknown"},v.exports=r},801:function(v,r,s){var _=s(1137),x=s(288),I=s(5972),B=s(6341);r=_(function(H,N){return N=x(N),I(H,function(l){return!B(N,l)})}),v.exports=r},3783:function(v,r,s){var _=s(1369),x=s(2533),I=s(3955);r=function(B,H,N){var l,d;if(H=I(H,N),_(B))for(l=0,d=B.length;l<d;l++)H(B[l],l,B);else{var o=x(B);for(l=0,d=o.length;l<d;l++)H(B[o[l]],o[l],B)}return B},v.exports=r},4858:function(v,r){r=function(s,_){var x=s.length-_.length;return x>=0&&s.indexOf(_,x)===x},v.exports=r},8901:function(v,r,s){var _=s(2533),x=(r=function(l){return B.test(l)?l.replace(H,N):l}).map={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I="(?:"+_(x).join("|")+")",B=new RegExp(I),H=new RegExp(I,"g"),N=function(l){return x[l]};v.exports=r},4187:function(v,r,s){var _=s(3367);r=function(I){return _(I).replace(x,function(B){switch(B){case'"':case"'":case"\\":return"\\"+B;case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}})};var x=/["'\\\n\r\u2028\u2029]/g;v.exports=r},2337:function(v,r){r=function(s){return s.replace(/\W/g,"\\$&")},v.exports=r},642:function(v,r){r=function(s){var _=document.createElement("style");return _.textContent=s,_.type="text/css",document.head.appendChild(_),_},v.exports=r},1672:function(v,r,s){var _=s(2838),x=s(1369),I=s(2533);r=function(B,H,N){H=_(H,N);for(var l=!x(B)&&I(B),d=(l||B).length,o=0;o<d;o++){var T=l?l[o]:o;if(!H(B[T],T,B))return!1}return!0},v.exports=r},6329:function(v,r,s){r=s(4427)(s(1116)),v.exports=r},3021:function(v,r,s){var _=s(2533);r=s(4427)(_),v.exports=r},2581:function(v,r,s){var _=s(42),x=s(4331),I=s(2461),B=s(1352);r=function(N){var l=B(N.match(H));return _(I(l,function(d){return x(d)}))};var H=/((https?)|(ftp)):\/\/[\w.]+[^ \f\n\r\t\v"\\<>[\]\u2100-\uFFFF(),]*/gi;v.exports=r},5972:function(v,r,s){var _=s(2838),x=s(3783);r=function(I,B,H){var N=[];return B=_(B,H),x(I,function(l,d,o){B(l,d,o)&&N.push(l)}),N},v.exports=r},2244:function(v,r,s){var _=s(2267),x=s(4072),I=s(1369),B=s(1286);r=function(H,N,l){var d=(I(H)?x:_)(H,N,l);if(!B(d)&&d!==-1)return H[d]},v.exports=r},4072:function(v,r,s){var _=s(2838);r=function(x,I,B,H){H=H||1,I=_(I,B);for(var N=x.length,l=H>0?0:N-1;l>=0&&l<N;){if(I(x[l],l,x))return l;l+=H}return-1},v.exports=r},2267:function(v,r,s){var _=s(2838),x=s(2533);r=function(I,B,H){B=_(B,H);for(var N,l=x(I),d=0,o=l.length;d<o;d++)if(B(I[N=l[d]],N,I))return N},v.exports=r},288:function(v,r,s){var _=s(6472);function x(I,B){for(var H,N=I.length,l=-1;N--;)H=I[++l],_(H)?x(H,B):B.push(H);return B}r=function(I){return x(I,[])},v.exports=r},4454:function(v,r,s){var _=s(2533);r=function(x){return Object.freeze?Object.freeze(x):(_(x).forEach(function(I){Object.getOwnPropertyDescriptor(x,I).configurable&&Object.defineProperty(x,I,{writable:!1,configurable:!1})}),x)},v.exports=r},415:function(v,r,s){var _=s(5166),x=s(4777),I=Object.getPrototypeOf,B={}.constructor;r=function(H){if(_(H)){if(I)return I(H);var N=H.__proto__;return N||N===null?N:x(H.constructor)?H.constructor.prototype:H instanceof B?B.prototype:void 0}},v.exports=r},8613:function(v,r,s){var _=s(9833),x=s(6768),I=s(6930),B=s(7781),H=s(975),N=s(3783),l=s(4777);r=function(d,o){for(var T=arguments.length,L=new Array(T>2?T-2:0),Q=2;Q<T;Q++)L[Q-2]=arguments[Q];(_(o)||x(o))&&(L.unshift(o),o=null),o||(o={});var P=function(dt){for(var Y="div",W="",u=[],O=[],X="",ht=0,pt=dt.length;ht<pt;ht++){var ft=dt[ht];ft==="#"||ft==="."?(O.push(X),X=ft):X+=ft}O.push(X);for(var $=0,At=O.length;$<At;$++)(X=O[$])&&(I(X,"#")?W=X.slice(1):I(X,".")?u.push(X.slice(1)):Y=X);return{tagName:Y,id:W,classes:u}}(d),q=P.tagName,C=P.id,Z=P.classes,j=document.createElement(q);return C&&j.setAttribute("id",C),B.add(j,Z),N(L,function(dt){x(dt)?j.appendChild(document.createTextNode(dt)):_(dt)&&j.appendChild(dt)}),N(o,function(dt,Y){x(dt)?j.setAttribute(Y,dt):l(dt)&&I(Y,"on")?j.addEventListener(Y.slice(2),dt,!1):Y==="style"&&H(j,dt)}),j},v.exports=r},6257:function(v,r){var s=Object.prototype.hasOwnProperty;r=function(_,x){return s.call(_,x)},v.exports=r},5044:function(v,r,s){var _=s(7348);r={encode:function(x){for(var I=[],B=0,H=x.length;B<H;B++){var N=x[B];I.push((N>>>4).toString(16)),I.push((15&N).toString(16))}return I.join("")},decode:function(x){var I=[],B=x.length;_(B)&&B--;for(var H=0;H<B;H+=2)I.push(parseInt(x.substr(H,2),16));return I}},v.exports=r},3651:function(v,r,s){var _=s(3783),x=s(4193);r=function(H){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"js",l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};x(l,I),H=H.replace(/</g,"&lt;").replace(/>/g,"&gt;"),N=B[N];var d=0,o=[];_(N,function(L){L.language&&(H=H.replace(L.re,function(Q,P){return P?(o[d++]=r(P,L.language,l),Q.replace(P,"___subtmpl"+(d-1)+"___")):Q}))}),_(N,function(L,Q){B[L.language]||(H=H.replace(L.re,"___"+Q+"___$1___end"+Q+"___"))});var T=[];return H=H.replace(/___(?!subtmpl)\w+?___/g,function(L){var Q=L.substr(3,3)==="end",P=(Q?L.substr(6):L.substr(3)).replace(/_/g,""),q=T.length>0?T[T.length-1]:null;return!Q&&(q==null||P==q||q!=null&&N[q]&&N[q].embed!=null&&N[q].embed.indexOf(P)>-1)?(T.push(P),L):Q&&P==q?(T.pop(),L):""}),_(N,function(L,Q){var P=l[L.style]?' style="'.concat(l[L.style],'"'):"";H=H.replace(new RegExp("___end"+Q+"___","g"),"</span>").replace(new RegExp("___"+Q+"___","g"),'<span class="'.concat(L.style,'"').concat(P,">"))}),_(N,function(L){L.language&&(H=H.replace(/___subtmpl\d+___/g,function(Q){var P=parseInt(Q.replace(/___subtmpl(\d+)___/,"$1"),10);return o[P]}))}),H};var I={comment:"color:#63a35c;",string:"color:#183691;",number:"color:#0086b3;",keyword:"color:#a71d5d;",operator:"color:#994500;"},B={js:{comment:{re:/(\/\/.*|\/\*([\s\S]*?)\*\/)/g,style:"comment"},string:{re:/(('.*?')|(".*?"))/g,style:"string"},numbers:{re:/(-?(\d+|\d+\.\d+|\.\d+))/g,style:"number"},keywords:{re:/(?:\b)(function|for|foreach|while|if|else|elseif|switch|break|as|return|this|class|self|default|var|const|let|false|true|null|undefined)(?:\b)/gi,style:"keyword"},operator:{re:/(\+|-|\/|\*|%|=|&lt;|&gt;|\||\?|\.)/g,style:"operator"}}};B.html={comment:{re:/(&lt;!--([\s\S]*?)--&gt;)/g,style:"comment"},tag:{re:/(&lt;\/?\w(.|\n)*?\/?&gt;)/g,style:"keyword",embed:["string"]},string:B.js.string,css:{re:/(?:&lt;style.*?&gt;)([\s\S]*)?(?:&lt;\/style&gt;)/gi,language:"css"},script:{re:/(?:&lt;script.*?&gt;)([\s\S]*?)(?:&lt;\/script&gt;)/gi,language:"js"}},B.css={comment:B.js.comment,string:B.js.string,numbers:{re:/((-?(\d+|\d+\.\d+|\.\d+)(%|px|em|pt|in)?)|#[0-9a-fA-F]{3}[0-9a-fA-F]{3})/g,style:"number"},keywords:{re:/(@\w+|:?:\w+|[a-z-]+:)/g,style:"keyword"}},v.exports=r},5925:function(v,r){r=function(_){var x,I,B,H=_[0]/360,N=_[1]/100,l=_[2]/100,d=[];if(_[3]&&(d[3]=_[3]),N===0)return B=s(255*l),d[0]=d[1]=d[2]=B,d;for(var o=2*l-(x=l<.5?l*(1+N):l+N-l*N),T=0;T<3;T++)(I=H+.3333333333333333*-(T-1))<0&&I++,I>1&&I--,B=6*I<1?o+6*(x-o)*I:2*I<1?x:3*I<2?o+(x-o)*(.6666666666666666-I)*6:o,d[T]=s(255*B);return d};var s=Math.round;v.exports=r},7483:function(v,r,s){var _=s(8702),x=s(9001),I=s(6472),B=s(3783),H=s(6768),N=s(8820),l=function(o){return o.replace(/&quot;/g,'"')},d=function(o){return o.replace(/"/g,"&quot;")};r={parse:function(o){var T=[],L=new x;return _(o,{start:function(Q,P){P=N(P,function(q){return l(q)}),L.push({tag:Q,attrs:P})},end:function(){var Q=L.pop();if(L.size){var P=L.peek();I(P.content)||(P.content=[]),P.content.push(Q)}else T.push(Q)},comment:function(Q){var P="<!--".concat(Q,"-->"),q=L.peek();q?(q.content||(q.content=[]),q.content.push(P)):T.push(P)},text:function(Q){var P=L.peek();P?(P.content||(P.content=[]),P.content.push(Q)):T.push(Q)}}),T},stringify:function o(T){var L="";return I(T)?B(T,function(Q){return L+=o(Q)}):H(T)?L=T:(L+="<".concat(T.tag),B(T.attrs,function(Q,P){return L+=" ".concat(P,'="').concat(d(Q),'"')}),L+=">",T.content&&(L+=o(T.content)),L+="</".concat(T.tag,">")),L}},v.exports=r},6362:function(v,r){r=function(s){return s},v.exports=r},496:function(v,r){r=function(s,_,x){return Array.prototype.indexOf.call(s,_,x)},v.exports=r},5022:function(v,r,s){var _=s(1662);r=function(x,I){x.prototype=_(I.prototype)},v.exports=r},7190:function(v,r,s){var _=s(3783);r=function(x){var I={};return _(x,function(B,H){I[B]=H}),I},v.exports=r},7403:function(v,r,s){var _=s(106);r=function(x){return _(x)==="[object Arguments]"},v.exports=r},6472:function(v,r,s){var _=s(106);r=Array.isArray?Array.isArray:function(x){return _(x)==="[object Array]"},v.exports=r},385:function(v,r,s){var _=s(106);r=function(x){return _(x)==="[object ArrayBuffer]"},v.exports=r},1369:function(v,r,s){var _=s(3990),x=s(4777),I=Math.pow(2,53)-1;r=function(B){if(!B)return!1;var H=B.length;return _(H)&&H>=0&&H<=I&&!x(B)},v.exports=r},4696:function(v,r){r=function(s){return s===!0||s===!1},v.exports=r},2727:function(v,r){r=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,v.exports=r},2349:function(v,r,s){var _=s(4777);r=function(x){return x!=null&&(!!x._isBuffer||x.constructor&&_(x.constructor.isBuffer)&&x.constructor.isBuffer(x))},v.exports=r},2520:function(v,r,s){var _=new(s(2765))("(prefers-color-scheme: dark)");r=function(){return _.isMatch()},v.exports=r},2106:function(v,r,s){var _=s(106);r=function(x){return _(x)==="[object Date]"},v.exports=r},9833:function(v,r){r=function(s){return!(!s||s.nodeType!==1)},v.exports=r},8887:function(v,r,s){var _=s(1369),x=s(6472),I=s(6768),B=s(7403),H=s(2533);r=function(N){return N==null||(_(N)&&(x(N)||I(N)||B(N))?N.length===0:H(N).length===0)},v.exports=r},2749:function(v,r,s){var _=s(106);r=function(x){return _(x)==="[object Error]"},v.exports=r},4777:function(v,r,s){var _=s(106);r=function(x){var I=_(x);return I==="[object Function]"||I==="[object GeneratorFunction]"||I==="[object AsyncFunction]"},v.exports=r},9585:function(v,r,s){var _=s(5610),x=_.getComputedStyle,I=_.document;function B(H,N){return H.right<N.left||H.left>N.right||H.bottom<N.top||H.top>N.bottom}r=function(H){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=N.display,d=l===void 0||l,o=N.visibility,T=o!==void 0&&o,L=N.opacity,Q=L!==void 0&&L,P=N.size,q=P!==void 0&&P,C=N.viewport,Z=C!==void 0&&C,j=N.overflow,dt=j!==void 0&&j,Y=x(H);if(d){var W=H.tagName;if(W==="BODY"||W==="HTML"||Y.position==="fixed"){if(Y.display==="none")return!0;for(var u=H;u=u.parentElement;)if(x(u).display==="none")return!0}else if(H.offsetParent===null)return!0}if(T&&Y.visibility==="hidden")return!0;if(Q){if(Y.opacity==="0")return!0;for(var O=H;O=O.parentElement;)if(x(O).opacity==="0")return!0}var X=H.getBoundingClientRect();if(q&&(X.width===0||X.height===0))return!0;if(Z)return B(X,{top:0,left:0,right:I.documentElement.clientWidth,bottom:I.documentElement.clientHeight});if(dt)for(var ht=H;ht=ht.parentElement;){var pt=x(ht).overflow;if((pt==="scroll"||pt==="hidden")&&B(X,ht.getBoundingClientRect()))return!0}return!1},v.exports=r},2246:function(v,r,s){var _=s(3990);r=function(x){return _(x)&&x%1==0},v.exports=r},4219:function(v,r){r=function(s){try{return JSON.parse(s),!0}catch{return!1}},v.exports=r},3708:function(v,r,s){var _=s(106);r=function(x){return _(x)==="[object Map]"},v.exports=r},7949:function(v,r,s){var _=s(2533);r=function(x,I){var B=_(I),H=B.length;if(x==null)return!H;x=Object(x);for(var N=0;N<H;N++){var l=B[N];if(I[l]!==x[l]||!(l in x))return!1}return!0},v.exports=r},9537:function(v,r,s){var _=s(4777);r=typeof wx<"u"&&_(wx.openLocation),v.exports=r},9956:function(v,r,s){var _=s(2727),x=s(1475),I=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,B=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i;r=x(function(H){return H=H||(_?navigator.userAgent:""),I.test(H)||B.test(H.substr(0,4))}),v.exports=r},9433:function(v,r,s){var _=s(3990);r=function(x){return _(x)&&x!==+x},v.exports=r},8740:function(v,r,s){var _=s(5166),x=s(4777),I=s(300);r=function(l){return!!_(l)&&(x(l)?H.test(I(l)):N.test(I(l)))};var B=Object.prototype.hasOwnProperty,H=new RegExp("^"+I(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=/^\[object .+?Constructor\]$/;v.exports=r},2763:function(v,r){r=function(s){return s==null},v.exports=r},1965:function(v,r,s){var _=s(106);r=typeof process<"u"&&_(process)==="[object process]",v.exports=r},6156:function(v,r){r=function(s){return s===null},v.exports=r},3990:function(v,r,s){var _=s(106);r=function(x){return _(x)==="[object Number]"},v.exports=r},5166:function(v,r){r=function(s){var _=typeof s;return!!s&&(_==="function"||_==="object")},v.exports=r},7348:function(v,r,s){var _=s(2246);r=function(x){return!!_(x)&&x%2!=0},v.exports=r},6997:function(v,r){r=function(s){var _=typeof s;return s==null||_!=="function"&&_!=="object"},v.exports=r},4321:function(v,r,s){var _=s(5166),x=s(4777);r=function(I){return _(I)&&x(I.then)&&x(I.catch)},v.exports=r},1754:function(v,r,s){var _=s(106);r=function(x){return _(x)==="[object RegExp]"},v.exports=r},7470:function(v,r,s){var _=s(106);r=function(x){return _(x)==="[object Set]"},v.exports=r},3843:function(v,r){r=function(s){for(var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r.defComparator,x=0,I=s.length;x<I-1;x++)if(_(s[x],s[x+1])>0)return!1;return!0},r.defComparator=function(s,_){return s<_?-1:s>_?1:0},v.exports=r},6768:function(v,r,s){var _=s(106);r=function(x){return _(x)==="[object String]"},v.exports=r},9804:function(v,r){r=function(s){return typeof s=="symbol"},v.exports=r},1286:function(v,r){r=function(s){return s===void 0},v.exports=r},7622:function(v,r,s){var _=s(8935);r=function(x){return _(x).join("-")},v.exports=r},2533:function(v,r,s){var _=s(6257);r=Object.keys?Object.keys:function(x){var I=[];for(var B in x)_(x,B)&&I.push(B);return I},v.exports=r},9702:function(v,r){r=function(s){var _=s?s.length:0;if(_)return s[_-1]},v.exports=r},3988:function(v,r,s){var _=s(2581),x=s(3783),I=s(2337);function B(H){return'<a href="'+H+'">'+H+"</a>"}r=function(H,N){N=N||B;var l=_(H);return x(l,function(d){H=H.replace(new RegExp(I(d),"g"),N)}),H},v.exports=r},9622:function(v,r){r=function(s,_){var x=document.createElement("script");x.src=s,x.onload=function(){var I=x.readyState&&x.readyState!="complete"&&x.readyState!="loaded";_&&_(!I)},x.onerror=function(){_(!1)},document.body.appendChild(x)},v.exports=r},3063:function(v,r,s){var _=s(3367);r=function(x){return _(x).toLocaleLowerCase()},v.exports=r},5351:function(v,r,s){var _=s(4552),x=s(3367);r=function(I,B,H){var N=(I=x(I)).length;return H=H||" ",N<B&&(I=(_(H,B-N)+I).slice(-B)),I},v.exports=r},7767:function(v,r){var s=/^\s+/;r=function(_,x){if(x==null)return _.trimLeft?_.trimLeft():_.replace(s,"");for(var I,B,H=0,N=_.length,l=x.length,d=!0;d&&H<N;)for(d=!1,I=-1,B=_.charAt(H);++I<l;)if(B===x[I]){d=!0,H++;break}return H>=N?"":_.substr(H,N)},v.exports=r},2461:function(v,r,s){var _=s(2838),x=s(2533),I=s(1369);r=function(B,H,N){H=_(H,N);for(var l=!I(B)&&x(B),d=(l||B).length,o=Array(d),T=0;T<d;T++){var L=l?l[T]:T;o[T]=H(B[L],L,B)}return o},v.exports=r},8820:function(v,r,s){var _=s(2838),x=s(2533);r=function(I,B,H){B=_(B,H);for(var N=x(I),l=N.length,d={},o=0;o<l;o++){var T=N[o];d[T]=B(I[T],T,I)}return d},v.exports=r},4491:function(v,r,s){var _=s(3021),x=s(7949);r=function(I){return I=_({},I),function(B){return x(B,I)}},v.exports=r},9853:function(v,r){r=function(){for(var s=arguments,_=s[0],x=1,I=s.length;x<I;x++)s[x]>_&&(_=s[x]);return _},v.exports=r},5026:function(v,r,s){var _=s(2533);r={getItem:function(l){return(I[l]?x[l]:this[l])||null},setItem:function(l,d){I[l]?x[l]=d:this[l]=d},removeItem:function(l){I[l]?delete x[l]:delete this[l]},key:function(l){var d=B();return l>=0&&l<d.length?d[l]:null},clear:function(){for(var l,d=H(),o=0;l=d[o];o++)delete this[l];d=N();for(var T,L=0;T=d[L];L++)delete x[T]}},Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,get:function(){return B().length}});var x={},I={getItem:1,setItem:1,removeItem:1,key:1,clear:1,length:1};function B(){return H().concat(N())}function H(){return _(r).filter(function(l){return!I[l]})}function N(){return _(x)}v.exports=r},1475:function(v,r,s){var _=s(6257);r=function(x,I){var B=function(H){var N=B.cache,l=""+(I?I.apply(this,arguments):H);return _(N,l)||(N[l]=x.apply(this,arguments)),N[l]};return B.cache={},B},v.exports=r},9971:function(v,r,s){r=s(1137)(function(_,x){for(var I=_.length,B=0,H=x.length;B<H;B++)for(var N=x[B],l=0,d=N.length;l<d;l++)_[I++]=N[l];return _.length=I,_}),v.exports=r},8573:function(v,r,s){var _=s(3783),x=s(6768),I=s(1286),B=s(6341),H=s(6472),N=s(5166),l=s(1352);(r=function(L,Q){if(I(L))return P={},o(function(C,Z){P[C]=Z}),P;var P;if(x(L)&&I(Q)||H(L))return function(C){if(!x(C)){var Z={};return o(function(dt,Y){B(C,dt)&&(Z[dt]=Y)}),Z}var j=T(C);if(j)return j.getAttribute("content")}(L);var q=L;N(q)||((q={})[L]=Q),function(C){_(C,function(Z,j){var dt=T(j);if(dt)return dt.setAttribute("content",Z);(dt=d.createElement("meta")).setAttribute("name",j),dt.setAttribute("content",Z),d.head.appendChild(dt)})}(q)}).remove=function(L){L=l(L),_(L,function(Q){var P=T(Q);P&&d.head.removeChild(P)})};var d=document;function o(L){var Q=d.querySelectorAll("meta");_(Q,function(P){var q=P.getAttribute("name"),C=P.getAttribute("content");q&&C&&L(q,C)})}function T(L){return d.querySelector('meta[name="'+L+'"]')}v.exports=r},6435:function(v,r){r=function(){for(var s=arguments,_=s[0],x=1,I=s.length;x<I;x++)s[x]<_&&(_=s[x]);return _},v.exports=r},4677:function(v,r,s){var _=s(3875),x=s(6768);r=function(N){if(x(N)){var l=N.match(H);return l?_(l[1])*I[l[2]||"ms"]:0}for(var d=N,o="ms",T=0,L=B.length;T<L;T++)if(d>=I[B[T]]){o=B[T];break}return+(d/I[o]).toFixed(2)+o};var I={ms:1,s:1e3};I.m=60*I.s,I.h=60*I.m,I.d=24*I.h,I.y=365.25*I.d;var B=["y","d","h","m","s"],H=/^((?:\d+)?\.?\d+) *(s|m|h|d|y)?$/;v.exports=r},6339:function(v,r,s){var _=s(6930),x=s(5610),I=s(3367);function B(H,N){if(H=I(H),N=I(N),_(H,"_")&&!_(N,"_"))return 1;if(_(N,"_")&&!_(H,"_"))return-1;for(var l,d,o,T,L=/^\d+|^\D+/;;){if(!H)return N?-1:0;if(!N)return 1;if(l=H.match(L)[0],d=N.match(L)[0],o=!x.isNaN(l),T=!x.isNaN(d),o&&!T)return-1;if(T&&!o)return 1;if(o&&T){var Q=l-d;if(Q)return Q;if(l.length!==d.length)return+l||+d?d.length-l.length:l.length-d.length}else if(l!==d)return l<d?-1:1;H=H.substring(l.length),N=N.substring(d.length)}}r=function(H){return H.sort(B)},v.exports=r},6837:function(v,r){function s(_){if(typeof _!="function")throw new TypeError(_+" is not a function");return _}r=typeof process=="object"&&process.nextTick?process.nextTick:typeof setImmediate=="function"?function(_){setImmediate(s(_))}:function(_){setTimeout(s(_),0)},v.exports=r},1214:function(v,r){r=function(){},v.exports=r},8847:function(v,r){r=Date.now?Date.now:function(){return new Date().getTime()},v.exports=r},106:function(v,r){var s=Object.prototype.toString;r=function(_){return s.call(_)},v.exports=r},8763:function(v,r,s){r=s(4198)(s(5637),2),v.exports=r},3955:function(v,r,s){var _=s(1286);r=function(x,I,B){if(_(I))return x;switch(B??3){case 1:return function(H){return x.call(I,H)};case 3:return function(H,N,l){return x.call(I,H,N,l)};case 4:return function(H,N,l,d){return x.call(I,H,N,l,d)}}return function(){return x.apply(I,arguments)}},v.exports=r},442:function(v,r,s){var _=s(1443),x=s(7653),I=window.screen;r={get:function(){if(I){var B=x(I,"orientation.type");if(B)return B.split("-").shift()}return window.innerWidth>window.innerHeight?"landscape":"portrait"}},_.mixin(r),window.addEventListener("orientationchange",function(){setTimeout(function(){r.emit("change",r.get())},200)},!1),v.exports=r},8702:function(v,r,s){var _=s(9702),x=s(7913),I=s(6930),B=s(3063);r=function(T,L){for(var Q,P=[],q=T;T;){if(Q=!0,_(P)&&o[_(P)]){var C=new RegExp("</".concat(_(P),"[^>]*>")).exec(T);if(C){var Z=T.substring(0,C.index);T=T.substring(C.index+C[0].length),Z&&L.text&&L.text(Z)}ht("",_(P))}else{if(I(T,"<!--")){var j=T.indexOf("-->");j>=0&&(L.comment&&L.comment(T.substring(4,j)),T=T.substring(j+3),Q=!1)}else if(I(T,"<!")){var dt=T.match(H);dt&&(L.text&&L.text(T.substring(0,dt[0].length)),T=T.substring(dt[0].length),Q=!1)}else if(I(T,"</")){var Y=T.match(N);Y&&(T=T.substring(Y[0].length),Y[0].replace(N,ht),Q=!1)}else if(I(T,"<")){var W=T.match(l);W&&(T=T.substring(W[0].length),W[0].replace(l,X),Q=!1)}if(Q){var u=T.indexOf("<"),O=u<0?T:T.substring(0,u);T=u<0?"":T.substring(u),L.text&&L.text(O)}}if(q===T)throw Error("Parse Error: "+T);q=T}function X(pt,ft,$,At){if(ft=B(ft),(At=!!At)||P.push(ft),L.start){var _t={};$.replace(d,function(ut,Ct,vt,xt,lt){_t[Ct]=vt||xt||lt||""}),L.start(ft,_t,At)}}function ht(pt,ft){var $;if(ft=B(ft))for($=P.length-1;$>=0&&P[$]!==ft;$--);else $=0;if($>=0){for(var At=P.length-1;At>=$;At--)L.end&&L.end(P[At]);P.length=$}}ht()};var H=/^<!\s*doctype((?:\s+[\w:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,N=/^<\/([-A-Za-z0-9_]+)[^>]*>/,l=/^<([-A-Za-z0-9_]+)((?:\s+[-A-Za-z0-9_:@.]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,d=/([-A-Za-z0-9_:@.]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,o=x("script,style".split(","));v.exports=r},4198:function(v,r,s){var _=s(1137),x=s(1352);r=_(function(I,B){return function(){var H=[];return H=(H=H.concat(B)).concat(x(arguments)),I.apply(this,H)}}),v.exports=r},1194:function(v,r,s){var _,x=s(8847),I=s(5610),B=I.performance,H=I.process;if(B&&B.now)r=function(){return B.now()};else if(H&&H.hrtime){var N=function(){var l=H.hrtime();return 1e9*l[0]+l[1]};_=N()-1e9*H.uptime(),r=function(){return(N()-_)/1e6}}else _=x(),r=function(){return x()-_};v.exports=r},3487:function(v,r,s){var _=s(6768),x=s(6472),I=s(6341),B=s(3783);r=function(H,N,l){if(_(N)&&(N=[N]),x(N)){var d=N;N=function(L,Q){return I(d,Q)}}var o={},T=function(L,Q){N(L,Q)&&(o[Q]=L)};return l&&(T=function(L,Q){N(L,Q)||(o[Q]=L)}),B(H,T),o},v.exports=r},747:function(v,r,s){var _=s(1475),x=s(7494),I=s(3023),B=s(6257),H=s(7622);(r=_(function(o){if(o=o.replace(l,""),o=x(o),B(d,o))return o;for(var T=N.length;T--;){var L=N[T]+I(o);if(B(d,L))return L}return o})).dash=_(function(o){var T=r(o);return(l.test(T)?"-":"")+H(T)});var N=["O","ms","Moz","Webkit"],l=/^(O)|(ms)|(Moz)|(Webkit)|(-o-)|(-ms-)|(-moz-)|(-webkit-)/g,d=document.createElement("p").style;v.exports=r},2994:function(v,r,s){var _=s(6472),x=s(7653);r=function(I){return _(I)?function(H){return x(H,I)}:(B=I,function(H){return H?.[B]});var B},v.exports=r},1745:function(v,r,s){var _=s(4331),x=s(3783),I=s(1286),B=s(6472),H=s(2461),N=s(8887),l=s(5972),d=s(5166);r={parse:function(T){var L={};return T=_(T).replace(o,""),x(T.split("&"),function(Q){var P=Q.split("="),q=P.shift(),C=P.length>0?P.join("="):null;q=decodeURIComponent(q),C=decodeURIComponent(C),I(L[q])?L[q]=C:B(L[q])?L[q].push(C):L[q]=[L[q],C]}),L},stringify:function(T,L){return l(H(T,function(Q,P){return d(Q)&&N(Q)?"":B(Q)?r.stringify(Q,P):encodeURIComponent(L||P)+"="+encodeURIComponent(Q)}),function(Q){return Q.length>0}).join("&")}};var o=/^(\?|#|&)/g;v.exports=r},1571:function(v,r,s){var _,x,I=s(8847),B=s(2727),H=0;if(B){_=window.requestAnimationFrame,x=window.cancelAnimationFrame;for(var N=["ms","moz","webkit","o"],l=0,d=N.length;l<d&&!_;l++)_=window[N[l]+"RequestAnimationFrame"],x=window[N[l]+"CancelAnimationFrame"]||window[N[l]+"CancelRequestAnimationFrame"];_&&(_=_.bind(window),x=x.bind(window))}x=x||function(o){clearTimeout(o)},(_=_||function(o){var T=I(),L=Math.max(0,16-(T-H)),Q=setTimeout(function(){o(T+L)},L);return H=T+L,Q}).cancel=x,r=_,v.exports=r},1216:function(v,r){r=function(s,_,x){_==null&&(_=s,s=0);var I=Math.random();return x||s%1||_%1?Math.min(s+I*(_-s+parseFloat("1e-"+((I+"").length-1))),_):s+Math.floor(I*(_-s+1))},v.exports=r},3366:function(module,exports,__webpack_require__){var random=__webpack_require__(1216),isBrowser=__webpack_require__(2727),isNode=__webpack_require__(1965),crypto;exports=function(v){for(var r=new Uint8Array(v),s=0;s<v;s++)r[s]=random(0,255);return r},isBrowser?(crypto=window.crypto||window.msCrypto,crypto&&(exports=function(v){var r=new Uint8Array(v);return crypto.getRandomValues(r),r})):isNode&&(crypto=eval("require")("crypto"),exports=function(v){return crypto.randomBytes(v)}),module.exports=exports},4270:function(v,r){var s,_=[],x=document,I=x.documentElement.doScroll,B="DOMContentLoaded",H=(I?/^loaded|^c/:/^loaded|^i|^c/).test(x.readyState);H||x.addEventListener(B,s=function(){for(x.removeEventListener(B,s),H=1;s=_.shift();)s()}),r=function(N){H?setTimeout(N,0):_.push(N)},v.exports=r},5852:function(v,r,s){var _=s(2838);r=function(x,I,B){var H=[];I=_(I,B);for(var N=-1,l=x.length;++N<l;){var d=N-H.length,o=x[d];I(o,N,x)&&(H.push(o),x.splice(d,1))}return H},v.exports=r},4552:function(v,r){r=function(s,_){var x="";if(_<1)return"";for(;_>0;)1&_&&(x+=s),_>>=1,s+=s;return x},v.exports=r},8368:function(v,r,s){var _=s(2337);r=function(x,I,B){return x.replace(new RegExp(_(I),"g"),B)},v.exports=r},1137:function(v,r){r=function(s,_){return _=_==null?s.length-1:+_,function(){var x,I=Math.max(arguments.length-_,0),B=new Array(I);for(x=0;x<I;x++)B[x]=arguments[x+_];switch(_){case 0:return s.call(this,B);case 1:return s.call(this,arguments[0],B);case 2:return s.call(this,arguments[0],arguments[1],B)}var H=new Array(_+1);for(x=0;x<_;x++)H[x]=arguments[x];return H[_]=B,s.apply(this,H)}},v.exports=r},1527:function(v,r){r=function(s){var _=s.length,x=Array(_);_--;for(var I=0;I<=_;I++)x[_-I]=s[I];return x},v.exports=r},3279:function(v,r){r=function(I){var B,H,N=I[0]/255,l=I[1]/255,d=I[2]/255,o=s(N,l,d),T=_(N,l,d),L=T-o;(B=s(60*(B=T===o?0:N===T?(l-d)/L:l===T?2+(d-N)/L:4+(N-l)/L),360))<0&&(B+=360);var Q=(o+T)/2;H=T===o?0:Q<=.5?L/(T+o):L/(2-T-o);var P=[x(B),x(100*H),x(100*Q)];return I[3]&&(P[3]=I[3]),P};var s=Math.min,_=Math.max,x=Math.round;v.exports=r},5031:function(v,r,s){var _=s(6299);r=function(x){var I,B=window.location,H=B.hostname,N=B.pathname,l=H.split("."),d=N.split("/"),o="",T=d.length;if(!C())for(var L=l.length-1;L>=0;L--){var Q=l[L];if(Q!==""){if(C({domain:o=o===""?Q:Q+"."+o,path:I="/"})||C({domain:o}))return;for(var P=0;P<T;P++){var q=d[P];if(q!==""&&(C({domain:o,path:I+=q})||C({path:I})||C({domain:o,path:I+="/"})||C({path:I})))return}}}function C(Z){return Z=Z||{},_.remove(x,Z),!_.get(x)}},v.exports=r},5610:function(v,r,s){r=s(2727)?window:s.g,v.exports=r},3597:function(v,r){r=function(s,_){if(_==null){if(s.trimRight)return s.trimRight();_=` \r
	\f\v`}for(var x,I,B=s.length-1,H=_.length,N=!0;N&&B>=0;)for(N=!1,x=-1,I=s.charAt(B);++x<H;)if(I===_[x]){N=!0,B--;break}return B>=0?s.substring(0,B+1):""},v.exports=r},2838:function(v,r,s){var _=s(4777),x=s(5166),I=s(6472),B=s(3955),H=s(4491),N=s(6362),l=s(2994);r=function(d,o,T){return d==null?N:_(d)?B(d,o,T):x(d)&&!I(d)?H(d):l(d)},v.exports=r},7653:function(v,r,s){var _=s(1286),x=s(1694);r=function(I,B){var H;for(H=(B=x(B,I)).shift();!_(H);){if((I=I[H])==null)return;H=B.shift()}return I},v.exports=r},8079:function(v,r,s){var _=s(1694),x=s(1286),I=s(3367),B=s(9804),H=s(6768);r=function(N,l,d){var o,T=(l=_(l,N)).pop();for(o=l.shift();!x(o);){if(H(o)||B(o)||(o=I(o)),o==="__proto__"||o==="constructor"||o==="prototype")return;N[o]||(N[o]={}),N=N[o],o=l.shift()}N[T]=d},v.exports=r},615:function(v,r,s){var _=s(5026);r=function(x){var I;switch(x=x||"local"){case"local":I=window.localStorage;break;case"session":I=window.sessionStorage}try{var B="test-localStorage-"+Date.now();I.setItem(B,B);var H=I.getItem(B);if(I.removeItem(B),H!==B)throw new Error}catch{return _}return I},v.exports=r},4224:function(v,r,s){var _=s(6334);r=function(x,I){return x=new _(x),I=new _(I),x.port=0|x.port||(x.protocol==="https"?443:80),I.port=0|I.port||(I.protocol==="https"?443:80),x.protocol===I.protocol&&x.hostname===I.hostname&&x.port===I.port},v.exports=r},9677:function(v,r){r=function(s,_,x){var I=s.length;_=_==null?0:_<0?Math.max(I+_,0):Math.min(_,I),x=x==null?I:x<0?Math.max(I+x,0):Math.min(x,I);for(var B=[];_<x;)B.push(s[_++]);return B},v.exports=r},6053:function(v,r,s){var _=s(2838),x=s(1369),I=s(2533);r=function(B,H,N){H=_(H,N);for(var l=!x(B)&&I(B),d=(l||B).length,o=0;o<d;o++){var T=l?l[o]:o;if(H(B[T],T,B))return!0}return!1},v.exports=r},3629:function(v,r,s){var _=s(3843),x=s(4193),I=s(2533),B=s(6472),H=s(5166);r=function(l){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x(d,N);var o=d.deep,T=d.comparator,L=[],Q=[];return function P(q){var C,Z=L.indexOf(q);if(Z>-1)return Q[Z];if(B(q)){C=[],L.push(q),Q.push(C);for(var j=0,dt=q.length;j<dt;j++){var Y=q[j];o&&H(Y)?C[j]=P(Y):C[j]=Y}}else{C={},L.push(q),Q.push(C);for(var W=I(q).sort(T),u=0,O=W.length;u<O;u++){var X=W[u],ht=q[X];o&&H(ht)?C[X]=P(ht):C[X]=ht}}return C}(l)};var N={deep:!1,comparator:_.defComparator};v.exports=r},8935:function(v,r){var s=/([A-Z])/g,_=/[_.\- ]+/g,x=/(^-)|(-$)/g;r=function(I){return(I=I.replace(s,"-$1").toLowerCase().replace(_,"-").replace(x,"")).split("-")},v.exports=r},6930:function(v,r){r=function(s,_){return s.indexOf(_)===0},v.exports=r},4400:function(v,r,s){var _=s(3085),x=s(3023),I=s(3367),B=s(1286),H=s(4777),N=s(1754);r=function(l,d){return JSON.stringify(l,(o=[],T=[],function(L,Q){if(o.length>0){var P=o.indexOf(this);P>-1?(o.splice(P+1),T.splice(P,1/0,L)):(o.push(this),T.push(L));var q=o.indexOf(Q);q>-1&&(Q=o[0]===Q?"[Circular ~]":"[Circular ~."+T.slice(0,q).join(".")+"]")}else o.push(Q);return N(Q)||H(Q)?Q="["+x(_(Q))+" "+I(Q)+"]":B(Q)&&(Q=null),Q}),d);var o,T},v.exports=r},9963:function(v,r,s){var _=s(4187),x=s(3085),I=s(3367),B=s(4858),H=s(300),N=s(2533),l=s(3783),d=s(7496),o=s(415),T=s(801),L=s(6329),Q=s(4321),P=s(5972),q=s(8847),C=s(1116),Z=s(6341),j=s(5166),dt=s(9537),Y=s(1662),W=s(6930),u=s(8079),O=s(9803),X=s(3487),ht=s(1369);function pt(vt,xt,lt,kt){var Jt=[];return l(xt,function(Ut){var Ae,Ot=Object.getOwnPropertyDescriptor(lt,Ut),$t=Ot&&Ot.get,Zt=Ot&&Ot.set;if(!kt.accessGetter&&$t)Ae="(...)";else try{if(Ae=lt[Ut],Z(kt.ignore,Ae))return;Q(Ae)&&Ae.catch(function(){})}catch(Yt){Ae=Yt.message}Jt.push("".concat(ft(Ut),":").concat(r(Ae,kt))),$t&&Jt.push("".concat(ft("get "+I(Ut)),":").concat(r(Ot.get,kt))),Zt&&Jt.push("".concat(ft("set "+I(Ut)),":").concat(r(Ot.set,kt)))}),'"'.concat(vt,'":{')+Jt.join(",")+"}"}function ft(vt){return'"'.concat(At(vt),'"')}function $(vt){return'"'.concat(At(I(vt)),'"')}function At(vt){return _(vt).replace(/\\'/g,"'").replace(/\t/g,"\\t")}r=function(vt){var xt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},lt=xt.self,kt=xt.startTime,Jt=kt===void 0?q():kt,Ut=xt.timeout,Ae=Ut===void 0?0:Ut,Ot=xt.depth,$t=Ot===void 0?0:Ot,Zt=xt.curDepth,Yt=Zt===void 0?1:Zt,Ve=xt.visitor,xe=Ve===void 0?new _t:Ve,Ee=xt.unenumerable,Qe=Ee!==void 0&&Ee,Bt=xt.symbol,ot=Bt!==void 0&&Bt,It=xt.accessGetter,Nt=It!==void 0&&It,yt=xt.ignore,re=yt===void 0?[]:yt,Wt="",Vt={visitor:xe,unenumerable:Qe,symbol:ot,accessGetter:Nt,depth:$t,curDepth:Yt+1,timeout:Ae,startTime:Jt,ignore:re},Tt=x(vt,!1);if(Tt==="String")Wt=$(vt);else if(Tt==="Number")Wt=I(vt),B(Wt,"Infinity")&&(Wt='{"value":"'.concat(Wt,'","type":"Number"}'));else if(Tt==="NaN")Wt='{"value":"NaN","type":"Number"}';else if(Tt==="Boolean")Wt=vt?"true":"false";else if(Tt==="Null")Wt="null";else if(Tt==="Undefined")Wt='{"type":"Undefined"}';else if(Tt==="Symbol"){var qt="Symbol";try{qt=I(vt)}catch{}Wt='{"value":'.concat($(qt),',"type":"Symbol"}')}else{if(Ae&&q()-Jt>Ae)return $("Timeout");if($t&&Yt>$t)return $("{...}");Wt="{";var Gt,se=[],te=xe.get(vt);if(te?(Gt=te.id,se.push('"reference":'.concat(Gt))):(Gt=xe.set(vt),se.push('"id":'.concat(Gt))),se.push('"type":"'.concat(Tt,'"')),B(Tt,"Function")?se.push('"value":'.concat($(H(vt)))):Tt==="RegExp"&&se.push('"value":'.concat($(vt))),!te){var ge=N(vt);if(ge.length&&se.push(pt("enumerable",ge,lt||vt,Vt)),Qe){var Me=T(C(vt,{prototype:!1,unenumerable:!0}),ge);Me.length&&se.push(pt("unenumerable",Me,lt||vt,Vt))}if(ot){var Ie=P(C(vt,{prototype:!1,symbol:!0}),function(li){return typeof li=="symbol"});Ie.length&&se.push(pt("symbol",Ie,lt||vt,Vt))}var gi=o(vt);if(gi&&!Z(re,gi)){var Ei='"proto":'.concat(r(gi,L(Vt,{self:lt||vt})));se.push(Ei)}}Wt+=se.join(",")+"}"}return Wt};var _t=d({initialize:function(){this.id=1,this.visited=[]},set:function(vt){var xt=this.visited,lt=this.id,kt={id:lt,val:vt};return xt.push(kt),this.id++,lt},get:function(vt){for(var xt=this.visited,lt=0,kt=xt.length;lt<kt;lt++){var Jt=xt[lt];if(vt===Jt.val)return Jt}return!1}});function ut(vt,xt){var lt=xt.map;if(!j(vt))return vt;var kt=vt.id,Jt=vt.type,Ut=vt.value,Ae=vt.proto,Ot=vt.reference,$t=vt.enumerable,Zt=vt.unenumerable;if(Ot)return vt;if(Jt==="Number")return Ut==="Infinity"?Number.POSITIVE_INFINITY:Ut==="-Infinity"?Number.NEGATIVE_INFINITY:NaN;if(Jt!=="Undefined"){var Yt,Ve,xe;if(Jt==="Function")(Yt=function(){}).toString=function(){return Ut},Ae&&Object.setPrototypeOf(Yt,ut(Ae,xt));else if(Jt==="RegExp")xe=(Ve=Ut).lastIndexOf("/"),Yt=new RegExp(Ve.slice(1,xe),Ve.slice(xe+1));else{var Ee;Jt!=="Object"?(Ee=dt?function(){}:new Function(Jt,""),Ae&&(Ee.prototype=ut(Ae,xt)),Yt=new Ee):Yt=Y(Ae?ut(Ae,xt):null)}var Qe,Bt={};return $t&&(ht($t)&&(Qe=$t.length,delete $t.length),$t=X($t,function(It,Nt){return!ot($t,It,Nt)}),l($t,function(It,Nt){(Bt[Nt]||{}).get||(Yt[Nt]=ut(It,xt))}),Qe&&(Yt.length=Qe)),Zt&&(Zt=X(Zt,function(It,Nt){return!ot(Zt,It,Nt)}),l(Zt,function(It,Nt){var yt=Bt[Nt]||{};if(!yt.get)if(It=ut(It,xt),j(It)&&It.reference){var re=It.reference;It=function(){return lt[re]},yt.get=It}else yt.value=It;yt.enumerable=!1,Bt[Nt]=yt})),O(Yt,Bt),lt[kt]=Yt,Yt}function ot(It,Nt,yt){yt=I(yt);var re=!1;return l(["get","set"],function(Wt){if(W(yt,Wt+" ")){var Vt=yt.replace(Wt+" ","");It[Vt]&&((Nt=ut(Nt,xt))==="Timeout"&&(Nt=Ct),u(Bt,[Vt,Wt],Nt),re=!0)}}),re}}function Ct(){return"Timeout"}r.parse=function(vt){var xt={},lt=ut(JSON.parse(vt),{map:xt});return function(kt){l(kt,function(Jt){for(var Ut=N(Jt),Ae=0,Ot=Ut.length;Ae<Ot;Ae++){var $t=Ut[Ae];if(j(Jt[$t])){var Zt=Jt[$t].reference;Zt&&kt[Zt]&&(Jt[$t]=kt[Zt])}}var Yt=o(Jt);Yt&&Yt.reference&&kt[Yt.reference]&&Object.setPrototypeOf(Jt,kt[Yt.reference])})}(xt),lt},v.exports=r},6677:function(v,r){var s=/<[^>]*>/g;r=function(_){return _.replace(s,"")},v.exports=r},1907:function(v,r,s){var _=s(6768),x=s(1352),I=s(6435),B=s(2461),H=s(4331);r=function(l){_(l)&&(l=x(l));for(var d="",o=arguments.length,T=new Array(o>1?o-1:0),L=1;L<o;L++)T[L-1]=arguments[L];for(var Q=0,P=l.length;Q<P;Q++)d+=l[Q],T[Q]&&(d+=T[Q]);for(var q=d.split(`
`),C=[],Z=0,j=q.length;Z<j;Z++){var dt=q[Z].match(N);dt&&C.push(dt[1].length)}var Y=C.length>0?I.apply(null,C):0;return H(B(q,function(W){return W[0]===" "?W.slice(Y):W}).join(`
`))};var N=/^(\s+)\S+/;v.exports=r},2439:function(v,r,s){var _=s(6049);r=function(x,I){return _(x,I,!0)},v.exports=r},1352:function(v,r,s){var _=s(1369),x=s(2461),I=s(6472),B=s(6768);r=function(H){return H?I(H)?H:_(H)&&!B(H)?x(H):[H]:[]},v.exports=r},3474:function(v,r,s){var _=s(6768);r=function(x){return _(x)?(x=x.toLowerCase())!=="0"&&x!==""&&x!=="false":!!x},v.exports=r},4891:function(v,r){var s=document;if(r=function(x){var I=s.createElement("body");return I.innerHTML=x,I.childNodes[0]},s.createRange&&s.body){var _=s.createRange();_.selectNode(s.body),_.createContextualFragment&&(r=function(x){return _.createContextualFragment(x).childNodes[0]})}v.exports=r},9296:function(v,r,s){var _=s(3875);r=function(x){return x?(x=_(x))-x%1:x===0?x:0},v.exports=r},3875:function(v,r,s){var _=s(3990),x=s(5166),I=s(4777),B=s(6768);r=function(H){if(_(H))return H;if(x(H)){var N=I(H.valueOf)?H.valueOf():H;H=x(N)?N+"":N}return B(H)?+H:H===0?H:+H},v.exports=r},300:function(v,r,s){var _=s(2763);r=function(I){if(_(I))return"";try{return x.call(I)}catch{}try{return I+""}catch{}return""};var x=Function.prototype.toString;v.exports=r},3367:function(v,r){r=function(s){return s==null?"":s.toString()},v.exports=r},4331:function(v,r,s){var _=s(7767),x=s(3597);r=function(I,B){return B==null&&I.trim?I.trim():_(x(I,B),B)},v.exports=r},7756:function(v,r,s){var _=s(4193),x=s(1286);r=function(B,H){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};_(N,I);var l=N.ellipsis,d=N.separator;if(H>B.length)return B;var o=H-l.length;if(o<1)return l;var T=B.slice(0,o);if(x(d))return T+l;if(B.indexOf(d,o)!==o){var L=T.lastIndexOf(d);L>-1&&(T=T.slice(0,L))}return T+l};var I={ellipsis:"..."};v.exports=r},3085:function(v,r,s){var _=s(106),x=s(9433),I=s(3063),B=s(2349);r=function(N){var l,d=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return N===null&&(l="Null"),N===void 0&&(l="Undefined"),x(N)&&(l="NaN"),B(N)&&(l="Buffer"),l||(l=_(N).match(H))&&(l=l[1]),l?d?I(l):l:""};var H=/^\[object\s+(.*?)]$/;v.exports=r},8166:function(v,r,s){var _=s(996),x=s(2461);r={encode:function(I){return I.length<32768?String.fromCodePoint.apply(String,I):x(_(I,32767),function(B){return String.fromCodePoint.apply(String,B)}).join("")},decode:function(I){for(var B=[],H=0,N=I.length;H<N;){var l=I.charCodeAt(H++);if(l>=55296&&l<=56319&&H<N){var d=I.charCodeAt(H++);(64512&d)==56320?B.push(((1023&l)<<10)+(1023&d)+65536):(B.push(l),H--)}else B.push(l)}return B}},v.exports=r},5484:function(v,r,s){var _=s(2727),x=s(8985),I=!1;function B(H){I&&r.emit(H)}r={start:function(){I=!0},stop:function(){I=!1}},x.mixin(r),_?(window.addEventListener("error",function(H){if(H.error)B(H.error);else if(H.message){var N=new Error(H.message);N.stack="Error: ".concat(H.message,` 
 at `).concat(H.filename,":").concat(H.lineno,":").concat(H.colno),B(N)}}),window.addEventListener("unhandledrejection",function(H){B(H.reason)})):(process.on("uncaughtException",B),process.on("unhandledRejection",B)),v.exports=r},7387:function(v,r,s){var _=s(8901),x=s(2533);r=function(d){return H.test(d)?d.replace(N,l):d};var I=s(7190)(_.map),B="(?:"+x(I).join("|")+")",H=new RegExp(B),N=new RegExp(B,"g");function l(d){return I[d]}v.exports=r},5229:function(v,r){var s=0;r=function(_){var x=++s+"";return _?_+x:x},v.exports=r},42:function(v,r,s){var _=s(5972);function x(I,B){return I===B}r=function(I,B){return B=B||x,_(I,function(H,N,l){for(var d=l.length;++N<d;)if(B(H,l[N]))return!1;return!0})},v.exports=r},4502:function(v,r,s){var _=s(3367);r=function(x){return _(x).toLocaleUpperCase()},v.exports=r},3023:function(v,r){r=function(s){return s.length<1?s:s[0].toUpperCase()+s.slice(1)},v.exports=r},5742:function(v,r,s){var _=s(8166);r={encode:function(q){for(var C=_.decode(q),Z="",j=0,dt=C.length;j<dt;j++)Z+=L(C[j]);return Z},decode:function(q,C){x=_.decode(q),I=0,B=x.length,H=0,N=0,l=0,d=128,o=191;for(var Z,j=[];(Z=Q(C))!==!1;)j.push(Z);return _.encode(j)}};var x,I,B,H,N,l,d,o,T=String.fromCharCode;function L(q){if(!(4294967168&q))return T(q);var C,Z,j="";for(4294965248&q?4294901760&q?!(4292870144&q)&&(C=3,Z=240):(C=2,Z=224):(C=1,Z=192),j+=T((q>>6*C)+Z);C>0;)j+=T(128|63&q>>6*(C-1)),C--;return j}function Q(q){for(;;){if(I>=B&&l){if(q)return P();throw new Error("Invalid byte index")}if(I===B)return!1;var C=x[I];if(I++,l){if(C<d||C>o){if(q)return I--,P();throw new Error("Invalid continuation byte")}if(d=128,o=191,H=H<<6|63&C,++N===l){var Z=H;return H=0,l=0,N=0,Z}}else{if(!(128&C))return C;if((224&C)==192)l=1,H=31&C;else if((240&C)==224)C===224&&(d=160),C===237&&(o=159),l=2,H=15&C;else{if((248&C)!=240){if(q)return P();throw new Error("Invalid UTF-8 detected")}C===240&&(d=144),C===244&&(o=143),l=3,H=7&C}}}}function P(){var q=I-N-1;return I=q+1,H=0,l=0,N=0,d=128,o=191,x[q]}v.exports=r},5936:function(v,r,s){var _=s(3366);r=function(){var B=_(16);return B[6]=15&B[6]|64,B[8]=63&B[8]|128,x[B[0]]+x[B[1]]+x[B[2]]+x[B[3]]+"-"+x[B[4]]+x[B[5]]+"-"+x[B[6]]+x[B[7]]+"-"+x[B[8]]+x[B[9]]+"-"+x[B[10]]+x[B[11]]+x[B[12]]+x[B[13]]+x[B[14]]+x[B[15]]};for(var x=[],I=0;I<256;I++)x[I]=(I+256).toString(16).substr(1);v.exports=r},2578:function(v,r,s){var _=s(3783);r=function(x){var I=[];return _(x,function(B){I.push(B)}),I},v.exports=r},3514:function(v,r,s){var _=s(8573),x=s(9882),I=s(4331),B=s(3783),H=s(2461),N=s(9433);r=function(){var l=_("viewport");if(!l)return 1;l=H(l.split(","),function(Q){return I(Q)});var d=.25,o=5,T=1;B(l,function(Q){var P=(Q=Q.split("="))[0];Q=Q[1],P==="initial-scale"&&(T=+Q),P==="maximum-scale"&&(o=+Q),P==="minimum-scale"&&(d=+Q)});var L=x(T,d,o);return N(L)?1:L},v.exports=r},8933:function(v,r){r=function(s){for(var _=[],x=document.evaluate(s,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),I=0;I<x.snapshotLength;I++)_.push(x.snapshotItem(I));return _},v.exports=r},3577:function(v,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=[["menuitem","command"],["rel","roletype"],["article","article"],["header","banner"],["input","button",[["type","checkbox"]]],["summary","button",[["aria-expanded","false"]]],["summary","button",[["aria-expanded","true"]]],["input","button",[["type","button"]]],["input","button",[["type","image"]]],["input","button",[["type","reset"]]],["input","button",[["type","submit"]]],["button","button"],["td","cell"],["input","checkbox",[["type","checkbox"]]],["th","columnheader"],["input","combobox",[["type","email"]]],["input","combobox",[["type","search"]]],["input","combobox",[["type","tel"]]],["input","combobox",[["type","text"]]],["input","combobox",[["type","url"]]],["input","combobox",[["type","url"]]],["select","combobox"],["select","combobox",[["size",1]]],["aside","complementary"],["footer","contentinfo"],["dd","definition"],["dialog","dialog"],["body","document"],["figure","figure"],["form","form"],["form","form"],["form","form"],["span","generic"],["div","generic"],["table","grid",[["role","grid"]]],["td","gridcell",[["role","gridcell"]]],["details","group"],["fieldset","group"],["optgroup","group"],["h1","heading"],["h2","heading"],["h3","heading"],["h4","heading"],["h5","heading"],["h6","heading"],["img","img"],["img","img"],["a","link"],["area","link"],["link","link"],["menu","list"],["ol","list"],["ul","list"],["select","listbox"],["select","listbox"],["select","listbox"],["datalist","listbox"],["li","listitem"],["main","main"],["math","math"],["menuitem","command"],["nav","navigation"],["option","option"],["progress","progressbar"],["input","radio",[["type","radio"]]],["section","region"],["section","region"],["frame","region"],["tr","row"],["tbody","rowgroup"],["tfoot","rowgroup"],["thead","rowgroup"],["th","rowheader",[["scope","row"]]],["input","searchbox",[["type","search"]]],["hr","separator"],["input","slider",[["type","range"]]],["input","spinbutton",[["type","number"]]],["output","status"],["table","table"],["dfn","term"],["input","textbox"],["input","textbox",[["type","email"]]],["input","textbox",[["type","tel"]]],["input","textbox",[["type","text"]]],["input","textbox",[["type","url"]]],["textarea","textbox"]]},7715:function(v,r,s){var _,x=this&&this.__extends||(_=function($,At){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,ut){_t.__proto__=ut}||function(_t,ut){for(var Ct in ut)Object.prototype.hasOwnProperty.call(ut,Ct)&&(_t[Ct]=ut[Ct])},_($,At)},function($,At){if(typeof At!="function"&&At!==null)throw new TypeError("Class extends value "+String(At)+" is not a constructor or null");function _t(){this.constructor=$}_($,At),$.prototype=At===null?Object.create(At):(_t.prototype=At.prototype,new _t)}),I=this&&this.__assign||function(){return I=Object.assign||function($){for(var At,_t=1,ut=arguments.length;_t<ut;_t++)for(var Ct in At=arguments[_t])Object.prototype.hasOwnProperty.call(At,Ct)&&($[Ct]=At[Ct]);return $},I.apply(this,arguments)},B=this&&this.__values||function($){var At=typeof Symbol=="function"&&Symbol.iterator,_t=At&&$[At],ut=0;if(_t)return _t.call($);if($&&typeof $.length=="number")return{next:function(){return $&&ut>=$.length&&($=void 0),{value:$&&$[ut++],done:!$}}};throw new TypeError(At?"Object is not iterable.":"Symbol.iterator is not defined.")},H=this&&this.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(r,"__esModule",{value:!0});var N=H(s(1160)),l=s(7669),d=s(2062),o=H(s(242)),T=H(s(2439)),L=H(s(3063)),Q=H(s(3783)),P=H(s(3009)),q=H(s(5044)),C=H(s(4502)),Z=H(s(6329)),j=H(s(7494)),dt=H(s(6341)),Y=H(s(3875)),W=H(s(3577)),u=H(s(6768));s(8169);var O=function($){function At(_t,ut){ut===void 0&&(ut={});var Ct=$.call(this,_t,{compName:"dom-highlighter"},ut)||this;return Ct.overlay=new l.HighlightOverlay(window),Ct.reset=function(){var vt=document.documentElement.clientWidth,xt=document.documentElement.clientHeight;Ct.overlay.reset({viewportSize:{width:vt,height:xt},deviceScaleFactor:1,pageScaleFactor:1,pageZoomFactor:1,emulationScaleFactor:1,scrollX:window.scrollX,scrollY:window.scrollY})},Ct.initOptions(ut,{showRulers:!1,showExtensionLines:!1,showInfo:!0,showStyles:!0,showAccessibilityInfo:!0,colorFormat:"hex",contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)",monitorResize:!0}),Ct.overlay.setContainer(_t),Ct.overlay.setPlatform("mac"),Ct.redraw=(0,T.default)(function(){Ct.reset(),Ct.draw()},16),Ct.redraw(),Ct.bindEvent(),Ct}return x(At,$),At.prototype.highlight=function(_t,ut){ut&&(0,Z.default)(this.options,ut),this.target=_t,_t instanceof HTMLElement&&this.options.monitorResize&&(this.resizeSensor&&this.resizeSensor.destroy(),this.resizeSensor=new o.default(_t),this.resizeSensor.addListener(this.redraw)),this.redraw()},At.prototype.hide=function(){this.target=null,this.redraw()},At.prototype.intercept=function(_t){this.interceptor=_t},At.prototype.destroy=function(){window.removeEventListener("resize",this.redraw),window.removeEventListener("scroll",this.redraw),this.resizeSensor&&this.resizeSensor.destroy(),$.prototype.destroy.call(this)},At.prototype.draw=function(){var _t=this.target;_t&&(_t instanceof Text?this.drawText(_t):this.drawElement(_t))},At.prototype.drawText=function(_t){var ut=this.options,Ct=document.createRange();Ct.selectNode(_t);var vt=Ct.getBoundingClientRect(),xt=vt.left,lt=vt.top,kt=vt.width,Jt=vt.height;Ct.detach();var Ut={paths:[{path:this.rectToPath({left:xt,top:lt,width:kt,height:Jt}),fillColor:pt(ut.contentColor),name:"content"}],showExtensionLines:ut.showExtensionLines,showRulers:ut.showRulers};ut.showInfo&&(Ut.elementInfo={tagName:"#text",nodeWidth:kt,nodeHeight:Jt}),this.overlay.drawHighlight(Ut)},At.prototype.drawElement=function(_t){var ut={paths:this.getPaths(_t),showExtensionLines:this.options.showExtensionLines,showRulers:this.options.showRulers,colorFormat:this.options.colorFormat};if(this.options.showInfo&&(ut.elementInfo=this.getElementInfo(_t)),this.interceptor){var Ct=this.interceptor(ut);Ct&&(ut=Ct)}this.overlay.drawHighlight(ut)},At.prototype.getPaths=function(_t){var ut=this.options,Ct=window.getComputedStyle(_t),vt=_t.getBoundingClientRect(),xt=vt.left,lt=vt.top,kt=vt.width,Jt=vt.height,Ut=function(Nt){return(0,d.pxToNum)(Ct.getPropertyValue(Nt))},Ae=Ut("margin-left"),Ot=Ut("margin-right"),$t=Ut("margin-top"),Zt=Ut("margin-bottom"),Yt=Ut("border-left-width"),Ve=Ut("border-right-width"),xe=Ut("border-top-width"),Ee=Ut("border-bottom-width"),Qe=Ut("padding-left"),Bt=Ut("padding-right"),ot=Ut("padding-top"),It=Ut("padding-bottom");return[{path:this.rectToPath({left:xt+Yt+Qe,top:lt+xe+ot,width:kt-Yt-Qe-Ve-Bt,height:Jt-xe-ot-Ee-It}),fillColor:pt(ut.contentColor),name:"content"},{path:this.rectToPath({left:xt+Yt,top:lt+xe,width:kt-Yt-Ve,height:Jt-xe-Ee}),fillColor:pt(ut.paddingColor),name:"padding"},{path:this.rectToPath({left:xt,top:lt,width:kt,height:Jt}),fillColor:pt(ut.borderColor),name:"border"},{path:this.rectToPath({left:xt-Ae,top:lt-$t,width:kt+Ae+Ot,height:Jt+$t+Zt}),fillColor:pt(ut.marginColor),name:"margin"}]},At.prototype.getElementInfo=function(_t){var ut=_t.getBoundingClientRect(),Ct=ut.width,vt=ut.height,xt=_t.getAttribute("class")||"";xt=xt.split(/\s+/).map(function(kt){return"."+kt}).join("");var lt={tagName:(0,L.default)(_t.tagName),className:xt,idValue:_t.id,nodeWidth:Ct,nodeHeight:vt};return this.options.showStyles&&(lt.style=this.getStyles(_t)),this.options.showAccessibilityInfo&&(0,Z.default)(lt,this.getAccessibilityInfo(_t)),lt},At.prototype.getStyles=function(_t){for(var ut=window.getComputedStyle(_t),Ct=!1,vt=_t.childNodes,xt=0,lt=vt.length;xt<lt;xt++)vt[xt].nodeType===3&&(Ct=!0);var kt=[];return Ct&&kt.push("color","font-family","font-size","line-height"),kt.push("padding","margin","background-color"),ft(ut,kt)},At.prototype.getAccessibilityInfo=function(_t){var ut=window.getComputedStyle(_t);return I({showAccessibilityInfo:!0,contrast:I({contrastAlgorithm:"aa",textOpacity:.1},ft(ut,["font-size","font-weight","background-color","text-opacity"],!0)),isKeyboardFocusable:this.isFocusable(_t)},this.getAccessibleNameAndRole(_t))},At.prototype.isFocusable=function(_t){var ut=(0,L.default)(_t.tagName);if((0,dt.default)(["a","button","input","textarea","select","details"],ut))return!0;var Ct=_t.getAttribute("tabindex");return!!(Ct&&(0,Y.default)(Ct)>-1)},At.prototype.getAccessibleNameAndRole=function(_t){var ut=_t.getAttribute("labelledby")||_t.getAttribute("aria-label"),Ct=_t.getAttribute("role"),vt=(0,L.default)(_t.tagName);return W.default.forEach(function(xt){var lt,kt;if(!Ct){var Jt=xt[0],Ut=xt[2];if(Jt===vt){if(Ut)try{for(var Ae=B(Ut),Ot=Ae.next();!Ot.done;Ot=Ae.next()){var $t=Ot.value;if(_t.getAttribute($t[0])!==$t[1])return}}catch(Zt){lt={error:Zt}}finally{try{Ot&&!Ot.done&&(kt=Ae.return)&&kt.call(Ae)}finally{if(lt)throw lt.error}}Ct=xt[1]}}}),{accessibleName:ut||_t.getAttribute("title")||"",accessibleRole:Ct||"generic"}},At.prototype.bindEvent=function(){var _t=this;window.addEventListener("resize",this.redraw),window.addEventListener("scroll",this.redraw),this.on("optionChange",function(){return _t.redraw()})},At.prototype.rectToPath=function(_t){var ut=_t.left,Ct=_t.top,vt=_t.width,xt=_t.height,lt=[];return lt.push("M",ut,Ct),lt.push("L",ut+vt,Ct),lt.push("L",ut+vt,Ct+xt),lt.push("L",ut,Ct+xt),lt.push("Z"),lt},At}(N.default);r.default=O,v.exports=O,v.exports.default=O;var X=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,ht=/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*(?:\.\d+)?)\)$/;function pt($){return(0,u.default)($)?$:$.a?"rgba(".concat($.r,", ").concat($.g,", ").concat($.b,", ").concat($.a,")"):"rgb(".concat($.r,", ").concat($.g,", ").concat($.b,")")}function ft($,At,_t){_t===void 0&&(_t=!1);var ut={};return(0,Q.default)(At,function(Ct){var vt,xt=$[Ct==="text-opacity"?"color":Ct];xt&&(vt=xt,(X.test(vt)||ht.test(vt))&&(xt=function(lt){var kt=P.default.parse(lt),Jt=kt.val[3]||1;return kt.val=kt.val.slice(0,3),kt.val.push(Math.round(255*Jt)),"#"+(0,C.default)(q.default.encode(kt.val))}(xt),Ct==="text-opacity"&&(xt=xt.slice(7),xt=q.default.decode(xt)[0]/255)),_t&&(Ct=(0,j.default)(Ct)),ut[Ct]=xt)}),ut}},9706:function(v,r){var s=this&&this.__read||function(pt,ft){var $=typeof Symbol=="function"&&pt[Symbol.iterator];if(!$)return pt;var At,_t,ut=$.call(pt),Ct=[];try{for(;(ft===void 0||ft-- >0)&&!(At=ut.next()).done;)Ct.push(At.value)}catch(vt){_t={error:vt}}finally{try{At&&!At.done&&($=ut.return)&&$.call(ut)}finally{if(_t)throw _t.error}}return Ct},_=this&&this.__values||function(pt){var ft=typeof Symbol=="function"&&Symbol.iterator,$=ft&&pt[ft],At=0;if($)return $.call(pt);if(pt&&typeof pt.length=="number")return{next:function(){return pt&&At>=pt.length&&(pt=void 0),{value:pt&&pt[At++],done:!pt}}};throw new TypeError(ft?"Object is not iterable.":"Symbol.iterator is not defined.")};function x(pt,ft){var $=pt[3];return[(1-$)*ft[0]+$*pt[0],(1-$)*ft[1]+$*pt[1],(1-$)*ft[2]+$*pt[2],$+ft[3]*(1-$)]}function I(pt){var ft=s(pt,3),$=ft[0],At=ft[1],_t=ft[2];return .2126*($<=.03928?$/12.92:Math.pow(($+.055)/1.055,2.4))+.7152*(At<=.03928?At/12.92:Math.pow((At+.055)/1.055,2.4))+.0722*(_t<=.03928?_t/12.92:Math.pow((_t+.055)/1.055,2.4))}Object.defineProperty(r,"__esModule",{value:!0}),r.getContrastThreshold=r.isLargeFont=r.getAPCAThreshold=r.desiredLuminanceAPCA=r.contrastRatioByLuminanceAPCA=r.contrastRatioAPCA=r.luminanceAPCA=r.contrastRatio=r.luminance=r.rgbaToHsla=r.blendColors=void 0,r.blendColors=x,r.rgbaToHsla=function(pt){var ft=s(pt,4),$=ft[0],At=ft[1],_t=ft[2],ut=ft[3],Ct=Math.max($,At,_t),vt=Math.min($,At,_t),xt=Ct-vt,lt=Ct+vt,kt=.5*lt;return[vt===Ct?0:$===Ct?(.16666666666666666*(At-_t)/xt+1)%1:At===Ct?.16666666666666666*(_t-$)/xt+.3333333333333333:.16666666666666666*($-At)/xt+.6666666666666666,kt===0||kt===1?0:kt<=.5?xt/lt:xt/(2-lt),kt,ut]},r.luminance=I,r.contrastRatio=function(pt,ft){var $=I(x(pt,ft)),At=I(ft);return(Math.max($,At)+.05)/(Math.min($,At)+.05)};var B=2.4,H=.55,N=.58,l=.62,d=.57,o=.03,T=1.45,L=1.25,Q=1.25,P=5e-4,q=.078,C=12.82051282051282,Z=.06,j=.001;function dt(pt){var ft=s(pt,3),$=ft[0],At=ft[1],_t=ft[2];return .2126729*Math.pow($,B)+.7151522*Math.pow(At,B)+.072175*Math.pow(_t,B)}function Y(pt){return pt>o?pt:pt+Math.pow(o-pt,T)}function W(pt,ft){if(pt=Y(pt),ft=Y(ft),Math.abs(pt-ft)<P)return 0;var $=0;return 100*($=ft>=pt?($=(Math.pow(ft,H)-Math.pow(pt,N))*L)<j?0:$<q?$-$*C*Z:$-Z:($=(Math.pow(ft,l)-Math.pow(pt,d))*Q)>-j?0:$>-q?$-$*C*Z:$+Z)}r.luminanceAPCA=dt,r.contrastRatioAPCA=function(pt,ft){return W(dt(pt),dt(ft))},r.contrastRatioByLuminanceAPCA=W,r.desiredLuminanceAPCA=function(pt,ft,$){function At(){return $?Math.pow(Math.abs(Math.pow(pt,l)-(-ft-Z)/Q),1/d):Math.pow(Math.abs(Math.pow(pt,H)-(ft+Z)/L),1/N)}pt=Y(pt),ft/=100;var _t=At();return(_t<0||_t>1)&&($=!$,_t=At()),_t};var u=[[12,-1,-1,-1,-1,100,90,80,-1,-1],[14,-1,-1,-1,100,90,80,60,60,-1],[16,-1,-1,100,90,80,60,55,50,50],[18,-1,-1,90,80,60,55,50,40,40],[24,-1,100,80,60,55,50,40,38,35],[30,-1,90,70,55,50,40,38,35,40],[36,-1,80,60,50,40,38,35,30,25],[48,100,70,55,40,38,35,30,25,20],[60,90,60,50,38,35,30,25,20,20],[72,80,55,40,35,30,25,20,20,20],[96,70,50,35,30,25,20,20,20,20],[120,60,40,30,25,20,20,20,20,20]];function O(pt,ft){var $=72*parseFloat(pt.replace("px",""))/96;return["bold","bolder","600","700","800","900"].indexOf(ft)!==-1?$>=14:$>=18}u.reverse(),r.getAPCAThreshold=function(pt,ft){var $,At,_t,ut,Ct=parseFloat(pt.replace("px","")),vt=parseFloat(ft);try{for(var xt=_(u),lt=xt.next();!lt.done;lt=xt.next()){var kt=s(lt.value),Jt=kt[0],Ut=kt.slice(1);if(Ct>=Jt)try{for(var Ae=(_t=void 0,_([900,800,700,600,500,400,300,200,100].entries())),Ot=Ae.next();!Ot.done;Ot=Ae.next()){var $t=s(Ot.value,2),Zt=$t[0];if(vt>=$t[1]){var Yt=Ut[Ut.length-1-Zt];return Yt===-1?null:Yt}}}catch(Ve){_t={error:Ve}}finally{try{Ot&&!Ot.done&&(ut=Ae.return)&&ut.call(Ae)}finally{if(_t)throw _t.error}}}}catch(Ve){$={error:Ve}}finally{try{lt&&!lt.done&&(At=xt.return)&&At.call(xt)}finally{if($)throw $.error}}return null},r.isLargeFont=O;var X={aa:3,aaa:4.5},ht={aa:4.5,aaa:7};r.getContrastThreshold=function(pt,ft){return O(pt,ft)?X:ht}},9434:function(v,r){var s=this&&this.__values||function(l){var d=typeof Symbol=="function"&&Symbol.iterator,o=d&&l[d],T=0;if(o)return o.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&T>=l.length&&(l=void 0),{value:l&&l[T++],done:!l}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},_=this&&this.__read||function(l,d){var o=typeof Symbol=="function"&&l[Symbol.iterator];if(!o)return l;var T,L,Q=o.call(l),P=[];try{for(;(d===void 0||d-- >0)&&!(T=Q.next()).done;)P.push(T.value)}catch(q){L={error:q}}finally{try{T&&!T.done&&(o=Q.return)&&o.call(Q)}finally{if(L)throw L.error}}return P},x=this&&this.__spreadArray||function(l,d,o){if(o||arguments.length===2)for(var T,L=0,Q=d.length;L<Q;L++)!T&&L in d||(T||(T=Array.prototype.slice.call(d,0,L)),T[L]=d[L]);return l.concat(T||Array.prototype.slice.call(d))};Object.defineProperty(r,"__esModule",{value:!0}),r.adoptStyleSheet=r.constrainNumber=r.ellipsify=r.createElement=r.createTextChild=r.createChild=r.log=r.Overlay=void 0;var I=function(){function l(d,o){o===void 0&&(o=[]),this.viewportSize={width:800,height:600},this.deviceScaleFactor=1,this.emulationScaleFactor=1,this.pageScaleFactor=1,this.pageZoomFactor=1,this.scrollX=0,this.scrollY=0,this.canvasWidth=0,this.canvasHeight=0,this._installed=!1,this._window=d,this._document=d.document,Array.isArray(o)||(o=[o]),this.style=o}return l.prototype.setCanvas=function(d){this.canvas=d,this._context=d.getContext("2d")},l.prototype.install=function(){var d,o;try{for(var T=s(this.style),L=T.next();!L.done;L=T.next())N(L.value)}catch(Q){d={error:Q}}finally{try{L&&!L.done&&(o=T.return)&&o.call(T)}finally{if(d)throw d.error}}this._installed=!0},l.prototype.uninstall=function(){var d,o,T=function(P){document.adoptedStyleSheets=document.adoptedStyleSheets.filter(function(q){return q!==P})};try{for(var L=s(this.style),Q=L.next();!Q.done;Q=L.next())T(Q.value)}catch(P){d={error:P}}finally{try{Q&&!Q.done&&(o=L.return)&&o.call(L)}finally{if(d)throw d.error}}this._installed=!1},l.prototype.reset=function(d){d&&(this.viewportSize=d.viewportSize,this.visualViewportSize=d.visualViewportSize,this.deviceScaleFactor=d.deviceScaleFactor,this.pageScaleFactor=d.pageScaleFactor,this.pageZoomFactor=d.pageZoomFactor,this.emulationScaleFactor=d.emulationScaleFactor,this.scrollX=Math.round(d.scrollX),this.scrollY=Math.round(d.scrollY)),this.resetCanvas()},l.prototype.resetCanvas=function(){this.canvas&&this._context&&(this.canvas.width=this.deviceScaleFactor*this.viewportSize.width,this.canvas.height=this.deviceScaleFactor*this.viewportSize.height,this.canvas.style.width=this.viewportSize.width+"px",this.canvas.style.height=this.viewportSize.height+"px",this._context.scale(this.deviceScaleFactor,this.deviceScaleFactor),this.canvasWidth=this.viewportSize.width,this.canvasHeight=this.viewportSize.height)},l.prototype.setPlatform=function(d){this.platform=d,this._installed||this.install()},l.prototype.dispatch=function(d){this[d.shift()].apply(this,d)},l.prototype.eventHasCtrlOrMeta=function(d){return this.platform==="mac"?d.metaKey&&!d.ctrlKey:d.ctrlKey&&!d.metaKey},Object.defineProperty(l.prototype,"context",{get:function(){if(!this._context)throw new Error("Context object is missing");return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"document",{get:function(){if(!this._document)throw new Error("Document object is missing");return this._document},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"window",{get:function(){if(!this._window)throw new Error("Window object is missing");return this._window},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"installed",{get:function(){return this._installed},enumerable:!1,configurable:!0}),l}();function B(l,d,o){var T=H(d,o);return T.addEventListener("click",function(L){L.stopPropagation()},!1),l.appendChild(T),T}function H(l,d){var o=document.createElement(l);if(d){var T=d.split(/\s+/);T=T.map(function(L){return"luna-dom-highlighter-"+L}),o.className=T.join(" ")}return o}function N(l){document.adoptedStyleSheets=x(x([],_(document.adoptedStyleSheets),!1),[l],!1)}r.Overlay=I,r.log=function(l){var d=document.getElementById("log");d||((d=B(document.body,"div")).id="log"),B(d,"div").textContent=l},r.createChild=B,r.createTextChild=function(l,d){var o=document.createTextNode(d);return l.appendChild(o),o},r.createElement=H,r.ellipsify=function(l,d){return l.length<=d?String(l):l.substr(0,d-1)+"â¦"},r.constrainNumber=function(l,d,o){return l<d?l=d:l>o&&(l=o),l},r.adoptStyleSheet=N},1521:function(v,r,s){var _=this&&this.__values||function(C){var Z=typeof Symbol=="function"&&Symbol.iterator,j=Z&&C[Z],dt=0;if(j)return j.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&dt>=C.length&&(C=void 0),{value:C&&C[dt++],done:!C}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")},x=this&&this.__read||function(C,Z){var j=typeof Symbol=="function"&&C[Symbol.iterator];if(!j)return C;var dt,Y,W=j.call(C),u=[];try{for(;(Z===void 0||Z-- >0)&&!(dt=W.next()).done;)u.push(dt.value)}catch(O){Y={error:O}}finally{try{dt&&!dt.done&&(j=W.return)&&j.call(W)}finally{if(Y)throw Y.error}}return u},I=this&&this.__spreadArray||function(C,Z,j){if(j||arguments.length===2)for(var dt,Y=0,W=Z.length;Y<W;Y++)!dt&&Y in Z||(dt||(dt=Array.prototype.slice.call(Z,0,Y)),dt[Y]=Z[Y]);return C.concat(dt||Array.prototype.slice.call(Z))},B=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(r,"__esModule",{value:!0}),r.drawPath=r.formatColor=r.formatRgba=r.parseHexa=r.createPathForQuad=r.hatchFillPath=r.applyMatrixToPoint=r.emptyBounds=r.buildPath=r.fillPathWithBoxStyle=r.drawPathWithLineStyle=void 0;var H=B(s(4858)),N=s(9706);function l(C,Z,j){var dt=0;function Y(O){for(var X=[],ht=0;ht<O;++ht){var pt=Math.round(C[dt++]*j);Z.maxX=Math.max(Z.maxX,pt),Z.minX=Math.min(Z.minX,pt);var ft=Math.round(C[dt++]*j);Z.maxY=Math.max(Z.maxY,ft),Z.minY=Math.min(Z.minY,ft),Z.leftmostXForY[ft]=Math.min(Z.leftmostXForY[ft]||Number.MAX_VALUE,pt),Z.rightmostXForY[ft]=Math.max(Z.rightmostXForY[ft]||Number.MIN_VALUE,pt),Z.topmostYForX[pt]=Math.min(Z.topmostYForX[pt]||Number.MAX_VALUE,ft),Z.bottommostYForX[pt]=Math.max(Z.bottommostYForX[pt]||Number.MIN_VALUE,ft),Z.allPoints.push({x:pt,y:ft}),X.push(pt,ft)}return X}for(var W=C.length,u=new Path2D;dt<W;)switch(C[dt++]){case"M":u.moveTo.apply(u,Y(1));break;case"L":u.lineTo.apply(u,Y(1));break;case"C":u.bezierCurveTo.apply(u,Y(3));break;case"Q":u.quadraticCurveTo.apply(u,Y(2));break;case"Z":u.closePath()}return u}r.drawPathWithLineStyle=function(C,Z,j,dt){dt===void 0&&(dt=1),j&&j.color&&(C.save(),C.translate(.5,.5),C.lineWidth=dt,j.pattern==="dashed"&&C.setLineDash([3,3]),j.pattern==="dotted"&&C.setLineDash([2,2]),C.strokeStyle=j.color,C.stroke(Z),C.restore())},r.fillPathWithBoxStyle=function(C,Z,j,dt,Y){Y&&(C.save(),Y.fillColor&&(C.fillStyle=Y.fillColor,C.fill(Z)),Y.hatchColor&&Q(C,Z,j,10,Y.hatchColor,dt,!1),C.restore())},r.buildPath=l,r.emptyBounds=function(){return{minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,maxY:-Number.MAX_VALUE,leftmostXForY:{},rightmostXForY:{},topmostYForX:{},bottommostYForX:{},allPoints:[]}},r.applyMatrixToPoint=function(C,Z){var j=new DOMPoint(C.x,C.y);return{x:(j=j.matrixTransform(Z)).x,y:j.y}};var d,o=5,T=3,L="";function Q(C,Z,j,dt,Y,W,u){if((C.canvas.width<j.maxX-j.minX||C.canvas.height<j.maxY-j.minY)&&(j={minX:0,maxX:C.canvas.width,minY:0,maxY:C.canvas.height,allPoints:[]}),!d||Y!==L){L=Y;var O=document.createElement("canvas");O.width=dt,O.height=o+T;var X=O.getContext("2d");X.clearRect(0,0,O.width,O.height),X.rect(0,0,1,o),X.fillStyle=Y,X.fill(),d=C.createPattern(O,"repeat")}C.save();var ht=new DOMMatrix;d.setTransform(ht.scale(u?-1:1,1).rotate(0,0,-45+W)),C.fillStyle=d,C.fill(Z),C.restore()}function P(C){return(C.match(/#(\w\w)(\w\w)(\w\w)(\w\w)/)||[]).slice(1).map(function(Z){return parseInt(Z,16)/255})}function q(C,Z){if(Z==="rgb"){var j=x(C,4),dt=j[0],Y=j[1],W=j[2],u=j[3];return"rgb(".concat((255*dt).toFixed()," ").concat((255*Y).toFixed()," ").concat((255*W).toFixed()).concat(u===1?"":" / "+Math.round(100*u)/100,")")}if(Z==="hsl"){var O=x((0,N.rgbaToHsla)(C),4),X=O[0],ht=O[1],pt=O[2];return u=O[3],"hsl(".concat(Math.round(360*X),"deg ").concat(Math.round(100*ht)," ").concat(Math.round(100*pt)).concat(u===1?"":" / "+Math.round(100*u)/100,")")}throw new Error("NOT_REACHED")}r.hatchFillPath=Q,r.createPathForQuad=function(C,Z,j,dt){var Y,W,u=["M",C.p1.x,C.p1.y,"L",C.p2.x,C.p2.y,"L",C.p3.x,C.p3.y,"L",C.p4.x,C.p4.y];try{for(var O=_(Z),X=O.next();!X.done;X=O.next()){var ht=X.value;u=I(I([],x(u),!1),["L",ht.p4.x,ht.p4.y,"L",ht.p3.x,ht.p3.y,"L",ht.p2.x,ht.p2.y,"L",ht.p1.x,ht.p1.y,"L",ht.p4.x,ht.p4.y,"L",C.p4.x,C.p4.y],!1)}}catch(pt){Y={error:pt}}finally{try{X&&!X.done&&(W=O.return)&&W.call(O)}finally{if(Y)throw Y.error}}return u.push("Z"),l(u,j,dt)},r.parseHexa=P,r.formatRgba=q,r.formatColor=function(C,Z){return Z==="rgb"||Z==="hsl"?q(P(C),Z):(0,H.default)(C,"FF")?C.substr(0,7):C},r.drawPath=function(C,Z,j,dt,Y,W,u){C.save();var O=l(Z,W,u);return j&&(C.fillStyle=j,C.fill(O)),dt&&(Y==="dashed"&&C.setLineDash([3,3]),Y==="dotted"&&C.setLineDash([2,2]),C.lineWidth=2,C.strokeStyle=dt,C.stroke(O)),C.restore(),O}},7669:function(v,r,s){var _,x=this&&this.__extends||(_=function(P,q){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,Z){C.__proto__=Z}||function(C,Z){for(var j in Z)Object.prototype.hasOwnProperty.call(Z,j)&&(C[j]=Z[j])},_(P,q)},function(P,q){if(typeof q!="function"&&q!==null)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function C(){this.constructor=P}_(P,q),P.prototype=q===null?Object.create(q):(C.prototype=q.prototype,new C)}),I=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(r,"__esModule",{value:!0}),r.HighlightOverlay=void 0;var B=I(s(4858)),H=s(9706),N=s(9434),l=s(1521),d=function(P){function q(){var C=P!==null&&P.apply(this,arguments)||this;return C.gridLabelState={gridLayerCounter:0},C}return x(q,P),q.prototype.setContainer=function(C){this._container=C},q.prototype.setPlatform=function(C){this.container&&this.container.classList.add("luna-dom-highlighter-platform-"+C),P.prototype.setPlatform.call(this,C)},Object.defineProperty(q.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),q.prototype.reset=function(C){P.prototype.reset.call(this,C),this.tooltip.innerHTML="",this.gridLabelState.gridLayerCounter=0},q.prototype.install=function(){var C=this.document.createElement("canvas");C.classList.add("luna-dom-highlighter-fill"),this.container.appendChild(C);var Z=this.document.createElement("div");this.container.appendChild(Z),this.tooltip=Z,this.setCanvas(C),P.prototype.install.call(this)},q.prototype.uninstall=function(){this.document.body.classList.remove("fill"),this.document.body.innerHTML="",P.prototype.uninstall.call(this)},q.prototype.drawHighlight=function(C){this.context.save();for(var Z=(0,l.emptyBounds)(),j=C.paths.slice();j.length;){var dt=j.pop();dt&&(this.context.save(),(0,l.drawPath)(this.context,dt.path,dt.fillColor,dt.outlineColor,void 0,Z,this.emulationScaleFactor),j.length&&(this.context.globalCompositeOperation="destination-out",(0,l.drawPath)(this.context,j[j.length-1].path,"red",void 0,void 0,Z,this.emulationScaleFactor)),this.context.restore())}this.context.restore(),this.context.save();var Y=!!(C.paths.length&&C.showRulers&&Z.minX<20&&Z.maxX+20<this.canvasWidth),W=!!(C.paths.length&&C.showRulers&&Z.minY<20&&Z.maxY+20<this.canvasHeight);return C.showRulers&&this.drawAxis(this.context,Y,W),C.paths.length&&(C.showExtensionLines&&function(u,O,X,ht,pt,ft,$,At){u.save();var _t=$,ut=At;if(u.strokeStyle=Q,u.lineWidth=1,u.translate(.5,.5),X)for(var Ct in O.rightmostXForY)u.beginPath(),u.moveTo(_t,Number(Ct)),u.lineTo(O.rightmostXForY[Ct],Number(Ct)),u.stroke();else for(var Ct in O.leftmostXForY)u.beginPath(),u.moveTo(0,Number(Ct)),u.lineTo(O.leftmostXForY[Ct],Number(Ct)),u.stroke();if(ht)for(var vt in O.bottommostYForX)u.beginPath(),u.moveTo(Number(vt),ut),u.lineTo(Number(vt),O.topmostYForX[vt]),u.stroke();else for(var vt in O.topmostYForX)u.beginPath(),u.moveTo(Number(vt),0),u.lineTo(Number(vt),O.topmostYForX[vt]),u.stroke();u.restore()}(this.context,Z,Y,W,void 0,!1,this.canvasWidth,this.canvasHeight),C.elementInfo&&function(u,O,X,ht,pt,ft){u.innerHTML="";var $=(0,N.createChild)(u,"div"),At=(0,N.createChild)($,"div","tooltip-content"),_t=function(It,Nt){var yt=(0,N.createElement)("div","element-info"),re=(0,N.createChild)(yt,"div","element-info-header"),Wt=function(Ge){return Ge.layoutObjectName&&(0,B.default)(Ge.layoutObjectName,"Grid")?"grid":Ge.layoutObjectName&&Ge.layoutObjectName==="LayoutNGFlexibleBox"?"flex":null}(It);Wt&&(0,N.createChild)(re,"div","element-layout-type ".concat(Wt));var Vt=(0,N.createChild)(re,"div","element-description");(0,N.createChild)(Vt,"span","material-tag-name").textContent=It.tagName;var Tt=(0,N.createChild)(Vt,"span","material-node-id"),qt=80;Tt.textContent=It.idValue?"#"+(0,N.ellipsify)(It.idValue,qt):"",Tt.classList.toggle("hidden",!It.idValue);var Gt=(0,N.createChild)(Vt,"span","material-class-name");Tt.textContent.length<qt&&(Gt.textContent=(0,N.ellipsify)(It.className||"",qt-Tt.textContent.length)),Gt.classList.toggle("hidden",!It.className);var se=(0,N.createChild)(re,"div","dimensions");(0,N.createChild)(se,"span","material-node-width").textContent=String(Math.round(100*It.nodeWidth)/100),(0,N.createTextChild)(se,"Ã"),(0,N.createChild)(se,"span","material-node-height").textContent=String(Math.round(100*It.nodeHeight)/100);var te,ge=It.style||{};It.isLockedAncestor&&Le("Showing content-visibility ancestor",""),It.isLocked&&Le("Descendants are skipped due to content-visibility","");var Me=ge.color;Me&&Me!=="#00000000"&&me("Color",Me,Nt);var Ie=ge["font-family"],gi=ge["font-size"];Ie&&gi!=="0px"&&Le("Font","".concat(gi," ").concat(Ie));var Ei=ge["background-color"];Ei&&Ei!=="#00000000"&&me("Background",Ei,Nt);var li=ge.margin;li&&li!=="0px"&&Le("Margin",li);var yi=ge.padding;yi&&yi!=="0px"&&Le("Padding",yi);var ci=It.contrast?It.contrast.backgroundColor:null,De=Me&&Me!=="#00000000"&&ci&&ci!=="#00000000";It.showAccessibilityInfo&&(pi("Accessibility"),De&&ge.color&&It.contrast&&Je(ge.color,It.contrast),Le("Name",It.accessibleName),Le("Role",It.accessibleRole),ii("Keyboard-focusable",It.isKeyboardFocusable?"a11y-icon a11y-icon-ok":"a11y-icon a11y-icon-not-ok"));function Ke(){te||(te=(0,N.createChild)(yt,"div","element-info-body"))}function pi(Ge){Ke();var di=(0,N.createChild)(te,"div","element-info-row element-info-section");(0,N.createChild)(di,"div","section-name").textContent=Ge,(0,N.createChild)((0,N.createChild)(di,"div","separator-container"),"div","separator")}function $e(Ge,di,Pi){Ke();var Ti=(0,N.createChild)(te,"div","element-info-row");return(0,N.createChild)(Ti,"div","element-info-name").textContent=Ge,(0,N.createChild)(Ti,"div","element-info-gap"),(0,N.createChild)(Ti,"div",Pi||"")}function ii(Ge,di){(0,N.createChild)($e(Ge,"","element-info-value-icon"),"div",di)}function Le(Ge,di){(0,N.createTextChild)($e(Ge,"","element-info-value-text"),di)}function me(Ge,di,Pi){var Ti=$e(Ge,"","element-info-value-color"),Oi=(0,N.createChild)(Ti,"div","color-swatch");(0,N.createChild)(Oi,"div","color-swatch-inner").style.backgroundColor=di,(0,N.createTextChild)(Ti,(0,l.formatColor)(di,Pi))}function Je(Ge,di){var Pi=(0,l.parseHexa)(Ge),Ti=(0,l.parseHexa)(di.backgroundColor);Pi[3]*=di.textOpacity;var Oi=$e("Contrast","","element-info-value-contrast"),qi=(0,N.createChild)(Oi,"div","contrast-text");qi.style.color=(0,l.formatRgba)(Pi,"rgb"),qi.style.backgroundColor=di.backgroundColor,qi.textContent="Aa";var Ui=(0,N.createChild)(Oi,"span");if(di.contrastAlgorithm==="apca"){var hs=(0,H.contrastRatioAPCA)(Pi,Ti),ns=(0,H.getAPCAThreshold)(di.fontSize,di.fontWeight);Ui.textContent=String(Math.floor(100*hs)/100)+"%",(0,N.createChild)(Oi,"div",ns===null||Math.abs(hs)<ns?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}else if(di.contrastAlgorithm==="aa"||di.contrastAlgorithm==="aaa"){var ys=(0,H.contrastRatio)(Pi,Ti);ns=(0,H.getContrastThreshold)(di.fontSize,di.fontWeight)[di.contrastAlgorithm],Ui.textContent=String(Math.floor(100*ys)/100),(0,N.createChild)(Oi,"div",ys<ns?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}}return yt}(O,X);At.appendChild(_t);var ut,Ct=At.offsetWidth,vt=At.offsetHeight,xt=8,lt=2,kt=2*xt,Jt=xt+2,Ut=lt+Jt,Ae=pt-lt-Jt-kt,Ot=ht.maxX-ht.minX<kt+2*Jt;if(Ot)ut=.5*(ht.minX+ht.maxX)-xt;else{var $t=ht.minX+Jt,Zt=ht.maxX-Jt-kt;ut=$t>Ut&&$t<Ae?$t:(0,N.constrainNumber)(Ut,$t,Zt)}var Yt=ut<Ut||ut>Ae,Ve=ut-Jt;Ve=(0,N.constrainNumber)(Ve,lt,pt-Ct-lt);var xe=ht.minY-xt-vt,Ee=!0;xe<0?(xe=Math.min(ft-vt,ht.maxY+xt),Ee=!1):ht.minY>ft&&(xe=ft-xt-vt);var Qe=Ve>=ht.minX&&Ve+Ct<=ht.maxX&&xe>=ht.minY&&xe+vt<=ht.maxY,Bt=Ve<ht.maxX&&Ve+Ct>ht.minX&&xe<ht.maxY&&xe+vt>ht.minY;if(Bt&&!Qe)return void(At.style.display="none");if(At.style.top=xe+"px",At.style.left=Ve+"px",!Yt){var ot=(0,N.createChild)(At,"div","tooltip-arrow");ot.style.clipPath=Ee?"polygon(0 0, 100% 0, 50% 100%)":"polygon(50% 0, 0 100%, 100% 100%)",ot.style.top=(Ee?vt-1:-xt)+"px",ot.style.left=ut-Ve+"px"}}(this.tooltip,C.elementInfo,C.colorFormat,Z,this.canvasWidth,this.canvasHeight)),this.context.restore(),{bounds:Z}},q.prototype.drawAxis=function(C,Z,j){C.save();var dt=this.pageZoomFactor*this.pageScaleFactor*this.emulationScaleFactor,Y=this.scrollX*this.pageScaleFactor,W=this.scrollY*this.pageScaleFactor;function u(Ct){return Math.round(Ct*dt)}function O(Ct){return Math.round(Ct/dt)}var X=this.canvasWidth/dt,ht=this.canvasHeight/dt,pt=50;C.save(),C.fillStyle=L,j?C.fillRect(0,u(ht)-15,u(X),u(ht)):C.fillRect(0,0,u(X),15),C.globalCompositeOperation="destination-out",C.fillStyle="red",Z?C.fillRect(u(X)-15,0,u(X),u(ht)):C.fillRect(0,0,15,u(ht)),C.restore(),C.fillStyle=L,Z?C.fillRect(u(X)-15,0,u(X),u(ht)):C.fillRect(0,0,15,u(ht)),C.lineWidth=1,C.strokeStyle=T,C.fillStyle=T,C.save(),C.translate(-Y,.5-W);for(var ft=ht+O(W),$=100;$<ft;$+=100)C.save(),C.translate(Y,u($)),C.rotate(-Math.PI/2),C.fillText(String($),2,Z?u(X)-7:13),C.restore();C.translate(.5,-.5);for(var At=X+O(Y),_t=100;_t<At;_t+=100)C.save(),C.fillText(String(_t),u(_t)+2,j?W+u(ht)-7:W+13),C.restore();for(C.restore(),C.save(),Z&&(C.translate(u(X),0),C.scale(-1,1)),C.translate(-Y,.5-W),ft=ht+O(W),$=pt;$<ft;$+=pt){C.beginPath(),C.moveTo(Y,u($));var ut=$%100?5:8;C.lineTo(Y+ut,u($)),C.stroke()}for(C.strokeStyle=o,$=5;$<ft;$+=5)$%pt&&(C.beginPath(),C.moveTo(Y,u($)),C.lineTo(Y+5,u($)),C.stroke());for(C.restore(),C.save(),j&&(C.translate(0,u(ht)),C.scale(1,-1)),C.translate(.5-Y,-W),At=X+O(Y),_t=pt;_t<At;_t+=pt)C.beginPath(),C.moveTo(u(_t),W),ut=_t%100?5:8,C.lineTo(u(_t),W+ut),C.stroke();for(C.strokeStyle=o,_t=5;_t<At;_t+=5)_t%pt&&(C.beginPath(),C.moveTo(u(_t),W),C.lineTo(u(_t),W+5),C.stroke());C.restore(),C.restore()},q}(N.Overlay);r.HighlightOverlay=d;var o="rgba(0,0,0,0.2)",T="rgba(0,0,0,0.7)",L="rgba(255, 255, 255, 0.8)",Q="rgba(128, 128, 128, 0.3)"},1160:function(v,r,s){var _,x=this&&this.__extends||(_=function(Q,P){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,C){q.__proto__=C}||function(q,C){for(var Z in C)Object.prototype.hasOwnProperty.call(C,Z)&&(q[Z]=C[Z])},_(Q,P)},function(Q,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function q(){this.constructor=Q}_(Q,P),Q.prototype=P===null?Object.create(P):(q.prototype=P.prototype,new q)}),I=this&&this.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(r,"__esModule",{value:!0});var B=I(s(1443)),H=I(s(1512)),N=s(2062),l=I(s(3783)),d=I(s(6329)),o=I(s(4193)),T=I(s(5852)),L=function(Q){function P(q,C,Z){var j=C.compName,dt=(Z===void 0?{}:Z).theme,Y=dt===void 0?"light":dt,W=Q.call(this)||this;return W.subComponents=[],W.compName=j,W.c=(0,N.classPrefix)(j),W.options={},W.container=q,W.$container=(0,H.default)(q),W.$container.addClass(["luna-".concat(j),W.c("platform-".concat((0,N.getPlatform)()))]),W.on("optionChange",function(u,O,X){var ht=W.c;u==="theme"&&(W.$container.rmClass(ht("theme-".concat(X))).addClass(ht("theme-".concat(O))),(0,l.default)(W.subComponents,function(pt){return pt.setOption("theme",O)}))}),W.setOption("theme",Y),W}return x(P,Q),P.prototype.destroy=function(){this.destroySubComponents();var q=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(q("platform-".concat((0,N.getPlatform)()))).rmClass(q("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},P.prototype.setOption=function(q,C){var Z=this,j=this.options,dt={};typeof q=="string"?dt[q]=C:dt=q,(0,l.default)(dt,function(Y,W){var u=j[W];j[W]=Y,Z.emit("optionChange",W,Y,u)})},P.prototype.getOption=function(q){return this.options[q]},P.prototype.addSubComponent=function(q){q.setOption("theme",this.options.theme),this.subComponents.push(q)},P.prototype.removeSubComponent=function(q){(0,T.default)(this.subComponents,function(C){return C===q})},P.prototype.destroySubComponents=function(){(0,l.default)(this.subComponents,function(q){return q.destroy()}),this.subComponents=[]},P.prototype.initOptions=function(q,C){C===void 0&&(C={}),(0,o.default)(q,C),(0,d.default)(this.options,q)},P.prototype.find=function(q){return this.$container.find(this.c(q))},P}(B.default);r.default=L},2062:function(v,r,s){var _=this&&this.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(r,"__esModule",{value:!0}),r.resetCanvasSize=r.getPlatform=r.pxToNum=r.executeAfterTransition=r.hasVerticalScrollbar=r.measuredScrollbarWidth=r.eventPage=r.eventClient=r.drag=r.classPrefix=void 0;var x=_(s(2461)),I=_(s(4331)),B=_(s(5610)),H=_(s(7483)),N=_(s(3990)),l=_(s(6341)),d=_(s(3875)),o=_(s(6954)),T=_(s(9585));function L(Z,j){for(var dt=0,Y=Z.length;dt<Y;dt++){var W=Z[dt];j(W),W.content&&L(W.content,j)}}r.classPrefix=function(Z){var j="luna-".concat(Z,"-");function dt(Y){return(0,x.default)((0,I.default)(Y).split(/\s+/),function(W){return(0,l.default)(W,j)?W:W.replace(/[\w-]+/,function(u){return"".concat(j).concat(u)})}).join(" ")}return function(Y){if(/<[^>]*>/g.test(Y))try{var W=H.default.parse(Y);return L(W,function(u){u.attrs&&u.attrs.class&&(u.attrs.class=dt(u.attrs.class))}),H.default.stringify(W)}catch{return dt(Y)}return dt(Y)}};var Q,P="ontouchstart"in B.default,q={start:"touchstart",move:"touchmove",end:"touchend"},C={start:"mousedown",move:"mousemove",end:"mouseup"};r.drag=function(Z){return P?q[Z]:C[Z]},r.eventClient=function(Z,j){var dt=Z==="x"?"clientX":"clientY";return j[dt]?j[dt]:j.changedTouches?j.changedTouches[0][dt]:0},r.eventPage=function(Z,j){var dt=Z==="x"?"pageX":"pageY";return j[dt]?j[dt]:j.changedTouches?j.changedTouches[0][dt]:0},r.measuredScrollbarWidth=function(){if((0,N.default)(Q))return Q;if(!document)return 16;var Z=document.createElement("div"),j=document.createElement("div");return Z.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),j.setAttribute("style","height: 200px"),Z.appendChild(j),document.body.appendChild(Z),Q=Z.offsetWidth-Z.clientWidth,document.body.removeChild(Z),Q},r.hasVerticalScrollbar=function(Z){return Z.scrollHeight>Z.offsetHeight},r.executeAfterTransition=function(Z,j){if((0,T.default)(Z))return j();var dt=function(Y){Y.target===Z&&(Z.removeEventListener("transitionend",dt),j())};Z.addEventListener("transitionend",dt)},r.pxToNum=function(Z){return(0,d.default)(Z.replace("px",""))},r.getPlatform=function(){var Z=(0,o.default)();return Z==="os x"?"mac":Z},r.resetCanvasSize=function(Z){Z.width=Math.round(Z.offsetWidth*window.devicePixelRatio),Z.height=Math.round(Z.offsetHeight*window.devicePixelRatio)}},6093:function(v,r,s){var _,x=this&&this.__extends||(_=function(T,L){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,P){Q.__proto__=P}||function(Q,P){for(var q in P)Object.prototype.hasOwnProperty.call(P,q)&&(Q[q]=P[q])},_(T,L)},function(T,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function Q(){this.constructor=T}_(T,L),T.prototype=L===null?Object.create(L):(Q.prototype=L.prototype,new Q)}),I=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(r,"__esModule",{value:!0});var B=I(s(1512)),H=I(s(5229)),N=I(s(2244)),l=I(s(8613)),d=function(T){function L(Q,P){P===void 0&&(P={});var q=T.call(this,Q,{compName:"notification"},P)||this;return q.notifications=[],q.initOptions(P,{position:{x:"right",y:"bottom"},duration:2e3}),q.initTpl(),q}return x(L,T),L.prototype.notify=function(Q,P){var q=this;P===void 0&&(P={duration:this.options.duration});var C=new o(this,Q);this.notifications.push(C),this.add(C),setTimeout(function(){return q.remove(C.id)},P.duration)},L.prototype.dismissAll=function(){for(var Q=this.notifications,P=Q[0];P;)this.remove(P.id),P=Q[0]},L.prototype.add=function(Q){this.container.appendChild(Q.container)},L.prototype.remove=function(Q){var P=this.notifications,q=(0,N.default)(P,function(Z){return Z.id===Q});if(q){q.destroy();var C=P.indexOf(q);P.splice(C,1)}},L.prototype.initTpl=function(){var Q=this.$container,P=this.options.position,q=P.x,C=P.y,Z="flex-end",j="flex-end";switch(q){case"center":j="center";break;case"left":j="flex-start"}C==="top"&&(Z="flex-start"),Q.attr("style","justify-content: ".concat(Z,"; align-items: ").concat(j))},L}(I(s(5404)).default);r.default=d;var o=function(){function T(L,Q){this.container=(0,l.default)("div"),this.$container=(0,B.default)(this.container),this.notification=L,this.content=Q,this.id=(0,H.default)("luna-notification-"),this.$container.attr({id:this.id,class:L.c("item ".concat(L.getOption("position").y==="bottom"?"lower":"upper"))}),this.initTpl()}return T.prototype.destroy=function(){this.$container.remove()},T.prototype.initTpl=function(){this.$container.html(this.notification.c('<div class="content">'.concat(this.content,"</div>")))},T}();v.exports=d,v.exports.default=d},5404:function(v,r,s){var _,x=this&&this.__extends||(_=function(Q,P){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,C){q.__proto__=C}||function(q,C){for(var Z in C)Object.prototype.hasOwnProperty.call(C,Z)&&(q[Z]=C[Z])},_(Q,P)},function(Q,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function q(){this.constructor=Q}_(Q,P),Q.prototype=P===null?Object.create(P):(q.prototype=P.prototype,new q)}),I=this&&this.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(r,"__esModule",{value:!0});var B=I(s(1443)),H=I(s(1512)),N=s(164),l=I(s(3783)),d=I(s(6329)),o=I(s(4193)),T=I(s(5852)),L=function(Q){function P(q,C,Z){var j=C.compName,dt=(Z===void 0?{}:Z).theme,Y=dt===void 0?"light":dt,W=Q.call(this)||this;return W.subComponents=[],W.compName=j,W.c=(0,N.classPrefix)(j),W.options={},W.container=q,W.$container=(0,H.default)(q),W.$container.addClass(["luna-".concat(j),W.c("platform-".concat((0,N.getPlatform)()))]),W.on("optionChange",function(u,O,X){var ht=W.c;u==="theme"&&(W.$container.rmClass(ht("theme-".concat(X))).addClass(ht("theme-".concat(O))),(0,l.default)(W.subComponents,function(pt){return pt.setOption("theme",O)}))}),W.setOption("theme",Y),W}return x(P,Q),P.prototype.destroy=function(){this.destroySubComponents();var q=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(q("platform-".concat((0,N.getPlatform)()))).rmClass(q("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},P.prototype.setOption=function(q,C){var Z=this,j=this.options,dt={};typeof q=="string"?dt[q]=C:dt=q,(0,l.default)(dt,function(Y,W){var u=j[W];j[W]=Y,Z.emit("optionChange",W,Y,u)})},P.prototype.getOption=function(q){return this.options[q]},P.prototype.addSubComponent=function(q){q.setOption("theme",this.options.theme),this.subComponents.push(q)},P.prototype.removeSubComponent=function(q){(0,T.default)(this.subComponents,function(C){return C===q})},P.prototype.destroySubComponents=function(){(0,l.default)(this.subComponents,function(q){return q.destroy()}),this.subComponents=[]},P.prototype.initOptions=function(q,C){C===void 0&&(C={}),(0,o.default)(q,C),(0,d.default)(this.options,q)},P.prototype.find=function(q){return this.$container.find(this.c(q))},P}(B.default);r.default=L},164:function(v,r,s){var _=this&&this.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(r,"__esModule",{value:!0}),r.resetCanvasSize=r.getPlatform=r.pxToNum=r.executeAfterTransition=r.hasVerticalScrollbar=r.measuredScrollbarWidth=r.eventClient=r.drag=r.classPrefix=void 0;var x=_(s(2461)),I=_(s(4331)),B=_(s(5610)),H=_(s(7483)),N=_(s(3990)),l=_(s(6341)),d=_(s(3875)),o=_(s(6954)),T=_(s(9585));function L(Z,j){for(var dt=0,Y=Z.length;dt<Y;dt++){var W=Z[dt];j(W),W.content&&L(W.content,j)}}r.classPrefix=function(Z){var j="luna-".concat(Z,"-");function dt(Y){return(0,x.default)((0,I.default)(Y).split(/\s+/),function(W){return(0,l.default)(W,j)?W:W.replace(/[\w-]+/,function(u){return"".concat(j).concat(u)})}).join(" ")}return function(Y){if(/<[^>]*>/g.test(Y))try{var W=H.default.parse(Y);return L(W,function(u){u.attrs&&u.attrs.class&&(u.attrs.class=dt(u.attrs.class))}),H.default.stringify(W)}catch{return dt(Y)}return dt(Y)}};var Q,P="ontouchstart"in B.default,q={start:"touchstart",move:"touchmove",end:"touchend"},C={start:"mousedown",move:"mousemove",end:"mouseup"};r.drag=function(Z){return P?q[Z]:C[Z]},r.eventClient=function(Z,j){var dt=Z==="x"?"clientX":"clientY";return j[dt]?j[dt]:j.changedTouches?j.changedTouches[0][dt]:0},r.measuredScrollbarWidth=function(){if((0,N.default)(Q))return Q;if(!document)return 16;var Z=document.createElement("div"),j=document.createElement("div");return Z.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),j.setAttribute("style","height: 200px"),Z.appendChild(j),document.body.appendChild(Z),Q=Z.offsetWidth-Z.clientWidth,document.body.removeChild(Z),Q},r.hasVerticalScrollbar=function(Z){return Z.scrollHeight>Z.offsetHeight},r.executeAfterTransition=function(Z,j){if((0,T.default)(Z))return j();var dt=function(Y){Y.target===Z&&(Z.removeEventListener("transitionend",dt),j())};Z.addEventListener("transitionend",dt)},r.pxToNum=function(Z){return(0,d.default)(Z.replace("px",""))},r.getPlatform=function(){var Z=(0,o.default)();return Z==="os x"?"mac":Z},r.resetCanvasSize=function(Z){Z.width=Math.round(Z.offsetWidth*window.devicePixelRatio),Z.height=Math.round(Z.offsetHeight*window.devicePixelRatio)}},8169:function(v,r,s){s.r(r),s.d(r,{default:function(){return q}});var _={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},x=/([astvzqmhlc])([^astvzqmhlc]*)/gi,I=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,B=function(C){var Z=[],j=String(C).trim();return j[0]!=="M"&&j[0]!=="m"||j.replace(x,function(dt,Y,W){var u=Y.toLowerCase(),O=function(ht){var pt=ht.match(I);return pt?pt.map(Number):[]}(W),X=Y;if(u==="m"&&O.length>2&&(Z.push([X].concat(O.splice(0,2))),u="l",X=X==="m"?"l":"L"),O.length<_[u])return"";for(Z.push([X].concat(O.splice(0,_[u])));O.length>=_[u]&&O.length&&_[u];)Z.push([X].concat(O.splice(0,_[u])));return""}),Z};function H(C,Z){for(var j=0;j<Z.length;j++){var dt=Z[j];dt.enumerable=dt.enumerable||!1,dt.configurable=!0,"value"in dt&&(dt.writable=!0),Object.defineProperty(C,dt.key,dt)}}function N(C){return function(Z){if(Array.isArray(Z))return l(Z)}(C)||function(Z){if(typeof Symbol<"u"&&Z[Symbol.iterator]!=null||Z["@@iterator"]!=null)return Array.from(Z)}(C)||function(Z,j){if(Z){if(typeof Z=="string")return l(Z,j);var dt=Object.prototype.toString.call(Z).slice(8,-1);if(dt==="Object"&&Z.constructor&&(dt=Z.constructor.name),dt==="Map"||dt==="Set")return Array.from(Z);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return l(Z,j)}}(C)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function l(C,Z){(Z==null||Z>C.length)&&(Z=C.length);for(var j=0,dt=new Array(Z);j<Z;j++)dt[j]=C[j];return dt}var d=B;function o(C,Z){var j=C.x*Math.cos(Z)-C.y*Math.sin(Z),dt=C.y*Math.cos(Z)+C.x*Math.sin(Z);C.x=j,C.y=dt}function T(C,Z){C.x*=Z,C.y*=Z}var L=function(C){if(C!==void 0&&C.CanvasRenderingContext2D&&(!C.Path2D||!function(u){var O=u.document.createElement("canvas").getContext("2d"),X=new u.Path2D("M0 0 L1 1");return O.strokeStyle="red",O.lineWidth=1,O.stroke(X),O.getImageData(0,0,1,1).data[0]===255}(C))){var Z=function(){function u(ht){var pt;(function(ft,$){if(!(ft instanceof $))throw new TypeError("Cannot call a class as a function")})(this,u),this.segments=[],ht&&ht instanceof u?(pt=this.segments).push.apply(pt,N(ht.segments)):ht&&(this.segments=d(ht))}var O,X;return O=u,(X=[{key:"addPath",value:function(ht){var pt;ht&&ht instanceof u&&(pt=this.segments).push.apply(pt,N(ht.segments))}},{key:"moveTo",value:function(ht,pt){this.segments.push(["M",ht,pt])}},{key:"lineTo",value:function(ht,pt){this.segments.push(["L",ht,pt])}},{key:"arc",value:function(ht,pt,ft,$,At,_t){this.segments.push(["AC",ht,pt,ft,$,At,!!_t])}},{key:"arcTo",value:function(ht,pt,ft,$,At){this.segments.push(["AT",ht,pt,ft,$,At])}},{key:"ellipse",value:function(ht,pt,ft,$,At,_t,ut,Ct){this.segments.push(["E",ht,pt,ft,$,At,_t,ut,!!Ct])}},{key:"closePath",value:function(){this.segments.push(["Z"])}},{key:"bezierCurveTo",value:function(ht,pt,ft,$,At,_t){this.segments.push(["C",ht,pt,ft,$,At,_t])}},{key:"quadraticCurveTo",value:function(ht,pt,ft,$){this.segments.push(["Q",ht,pt,ft,$])}},{key:"rect",value:function(ht,pt,ft,$){this.segments.push(["R",ht,pt,ft,$])}}])&&H(O.prototype,X),Object.defineProperty(O,"prototype",{writable:!1}),u}(),j=C.CanvasRenderingContext2D.prototype.fill,dt=C.CanvasRenderingContext2D.prototype.stroke;C.CanvasRenderingContext2D.prototype.fill=function(){for(var u=arguments.length,O=new Array(u),X=0;X<u;X++)O[X]=arguments[X];var ht="nonzero";O.length===0||O.length===1&&typeof O[0]=="string"?j.apply(this,O):(arguments.length===2&&(ht=O[1]),W(this,O[0].segments),j.call(this,ht))},C.CanvasRenderingContext2D.prototype.stroke=function(u){u?(W(this,u.segments),dt.call(this)):dt.call(this)};var Y=C.CanvasRenderingContext2D.prototype.isPointInPath;C.CanvasRenderingContext2D.prototype.isPointInPath=function(){for(var u=arguments.length,O=new Array(u),X=0;X<u;X++)O[X]=arguments[X];if(O[0].constructor.name==="Path2D"){var ht=O[1],pt=O[2],ft=O[3]||"nonzero";return W(this,O[0].segments),Y.apply(this,[ht,pt,ft])}return Y.apply(this,O)},C.Path2D=Z}function W(u,O){var X,ht,pt,ft,$,At,_t,ut,Ct,vt,xt,lt,kt,Jt,Ut,Ae,Ot,$t,Zt,Yt,Ve,xe,Ee,Qe,Bt,ot,It,Nt,yt,re={x:0,y:0},Wt={x:0,y:0};u.beginPath();for(var Vt=0;Vt<O.length;++Vt){var Tt=O[Vt];switch((Yt=Tt[0])!=="S"&&Yt!=="s"&&Yt!=="C"&&Yt!=="c"&&(xe=null,Ee=null),Yt!=="T"&&Yt!=="t"&&Yt!=="Q"&&Yt!=="q"&&(Qe=null,Bt=null),Yt){case"m":case"M":Yt==="m"?(xt+=Tt[1],kt+=Tt[2]):(xt=Tt[1],kt=Tt[2]),Yt!=="M"&&re||(re={x:xt,y:kt}),u.moveTo(xt,kt);break;case"l":xt+=Tt[1],kt+=Tt[2],u.lineTo(xt,kt);break;case"L":xt=Tt[1],kt=Tt[2],u.lineTo(xt,kt);break;case"H":xt=Tt[1],u.lineTo(xt,kt);break;case"h":xt+=Tt[1],u.lineTo(xt,kt);break;case"V":kt=Tt[1],u.lineTo(xt,kt);break;case"v":kt+=Tt[1],u.lineTo(xt,kt);break;case"a":case"A":Yt==="a"?(xt+=Tt[6],kt+=Tt[7]):(xt=Tt[6],kt=Tt[7]),Ae=Tt[1],Ot=Tt[2],_t=Tt[3]*Math.PI/180,pt=!!Tt[4],ft=!!Tt[5],$={x:xt,y:kt},o(At={x:(Wt.x-$.x)/2,y:(Wt.y-$.y)/2},-_t),(ut=At.x*At.x/(Ae*Ae)+At.y*At.y/(Ot*Ot))>1&&(Ae*=ut=Math.sqrt(ut),Ot*=ut),Ct=Ae*Ae*Ot*Ot,vt=Ae*Ae*At.y*At.y+Ot*Ot*At.x*At.x,T(Ve={x:Ae*At.y/Ot,y:-Ot*At.x/Ae},ft!==pt?Math.sqrt((Ct-vt)/vt)||0:-Math.sqrt((Ct-vt)/vt)||0),ht=Math.atan2((At.y-Ve.y)/Ot,(At.x-Ve.x)/Ae),X=Math.atan2(-(At.y+Ve.y)/Ot,-(At.x+Ve.x)/Ae),o(Ve,_t),It=Ve,Nt=($.x+Wt.x)/2,yt=($.y+Wt.y)/2,It.x+=Nt,It.y+=yt,u.save(),u.translate(Ve.x,Ve.y),u.rotate(_t),u.scale(Ae,Ot),u.arc(0,0,1,ht,X,!ft),u.restore();break;case"C":xe=Tt[3],Ee=Tt[4],xt=Tt[5],kt=Tt[6],u.bezierCurveTo(Tt[1],Tt[2],xe,Ee,xt,kt);break;case"c":u.bezierCurveTo(Tt[1]+xt,Tt[2]+kt,Tt[3]+xt,Tt[4]+kt,Tt[5]+xt,Tt[6]+kt),xe=Tt[3]+xt,Ee=Tt[4]+kt,xt+=Tt[5],kt+=Tt[6];break;case"S":xe!==null&&Ee!==null||(xe=xt,Ee=kt),u.bezierCurveTo(2*xt-xe,2*kt-Ee,Tt[1],Tt[2],Tt[3],Tt[4]),xe=Tt[1],Ee=Tt[2],xt=Tt[3],kt=Tt[4];break;case"s":xe!==null&&Ee!==null||(xe=xt,Ee=kt),u.bezierCurveTo(2*xt-xe,2*kt-Ee,Tt[1]+xt,Tt[2]+kt,Tt[3]+xt,Tt[4]+kt),xe=Tt[1]+xt,Ee=Tt[2]+kt,xt+=Tt[3],kt+=Tt[4];break;case"Q":Qe=Tt[1],Bt=Tt[2],xt=Tt[3],kt=Tt[4],u.quadraticCurveTo(Qe,Bt,xt,kt);break;case"q":Qe=Tt[1]+xt,Bt=Tt[2]+kt,xt+=Tt[3],kt+=Tt[4],u.quadraticCurveTo(Qe,Bt,xt,kt);break;case"T":Qe!==null&&Bt!==null||(Qe=xt,Bt=kt),Qe=2*xt-Qe,Bt=2*kt-Bt,xt=Tt[1],kt=Tt[2],u.quadraticCurveTo(Qe,Bt,xt,kt);break;case"t":Qe!==null&&Bt!==null||(Qe=xt,Bt=kt),Qe=2*xt-Qe,Bt=2*kt-Bt,xt+=Tt[1],kt+=Tt[2],u.quadraticCurveTo(Qe,Bt,xt,kt);break;case"z":case"Z":xt=re.x,kt=re.y,re=void 0,u.closePath();break;case"AC":xt=Tt[1],kt=Tt[2],Ut=Tt[3],ht=Tt[4],X=Tt[5],ot=Tt[6],u.arc(xt,kt,Ut,ht,X,ot);break;case"AT":lt=Tt[1],Jt=Tt[2],xt=Tt[3],kt=Tt[4],Ut=Tt[5],u.arcTo(lt,Jt,xt,kt,Ut);break;case"E":xt=Tt[1],kt=Tt[2],Ae=Tt[3],Ot=Tt[4],_t=Tt[5],ht=Tt[6],X=Tt[7],ot=Tt[8],u.save(),u.translate(xt,kt),u.rotate(_t),u.scale(Ae,Ot),u.arc(0,0,1,ht,X,ot),u.restore();break;case"R":xt=Tt[1],kt=Tt[2],$t=Tt[3],Zt=Tt[4],re={x:xt,y:kt},u.rect(xt,kt,$t,Zt)}Wt.x=xt,Wt.y=kt}}},Q=B,P=L;typeof window<"u"&&P(window);var q={path2dPolyfill:P,parsePath:Q}},2777:function(v){v.exports=`.luna-dom-highlighter{position:fixed;left:0;top:0;width:100%;height:100%;z-index:100000;pointer-events:none;font-size:13px}.luna-dom-highlighter-fill{position:absolute;top:0;right:0;bottom:0;left:0}.luna-dom-highlighter-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-highlighter-platform-mac{color:#303942;font-family:'.SFNSDisplay-Regular','Helvetica Neue','Lucida Grande',sans-serif}.luna-dom-highlighter-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-dom-highlighter-px{color:gray}#luna-dom-highlighter-element-title{position:absolute;z-index:10}.luna-dom-highlighter-tooltip-content{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:#fff;padding:5px 8px;border:1px solid #fff;border-radius:3px;box-sizing:border-box;min-width:100px;max-width:min(300px,100% - 4px);z-index:2;background-clip:padding-box;will-change:transform;text-rendering:optimizeLegibility;pointer-events:none;filter:drop-shadow(0 2px 4px rgba(0,0,0,.35))}.luna-dom-highlighter-tooltip-content .luna-dom-highlighter-tooltip-arrow{background:#fff;width:15px;height:8px;position:absolute}.luna-dom-highlighter-element-info-section{margin-top:12px;margin-bottom:6px}.luna-dom-highlighter-section-name{color:#333;font-weight:500;font-size:10px;text-transform:uppercase;letter-spacing:.05em;line-height:12px}.luna-dom-highlighter-element-info{display:flex;flex-direction:column}.luna-dom-highlighter-element-info-header{display:flex;align-items:center}.luna-dom-highlighter-element-info-body{display:flex;flex-direction:column;padding-top:2px;margin-top:2px}.luna-dom-highlighter-element-info-row{display:flex;line-height:19px}.luna-dom-highlighter-separator-container{display:flex;align-items:center;flex:auto;margin-left:7px}.luna-dom-highlighter-separator{border-top:1px solid #ddd;width:100%}.luna-dom-highlighter-element-info-name{flex-shrink:0;color:#666}.luna-dom-highlighter-element-info-gap{flex:auto}.luna-dom-highlighter-element-info-value-color{display:flex;color:#303942;margin-left:10px;align-items:baseline}.luna-dom-highlighter-a11y-icon{width:16px;height:16px;background-repeat:no-repeat;display:inline-block}.luna-dom-highlighter-element-info-value-contrast{display:flex;align-items:center;text-align:right;color:#303942;margin-left:10px}.luna-dom-highlighter-element-info-value-contrast .luna-dom-highlighter-a11y-icon{margin-left:8px}.luna-dom-highlighter-element-info-value-icon{display:flex;align-items:center}.luna-dom-highlighter-element-info-value-text{text-align:right;color:#303942;margin-left:10px;align-items:baseline;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.luna-dom-highlighter-color-swatch{display:flex;margin-right:2px;width:10px;height:10px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==);line-height:10px}.luna-dom-highlighter-color-swatch-inner{flex:auto;border:1px solid #808002}.luna-dom-highlighter-element-layout-type{margin-right:10px;width:16px;height:16px}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-grid{background-image:url('data:image/svg+xml,<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="9.5" width="4" height="4" stroke="%231A73E8"/><rect x="2.5" y="9.5" width="4" height="4" stroke="%231A73E8"/></svg>')}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-flex{background-image:url('data:image/svg+xml,<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 3.5h8v3H1v-3zm-1 0a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H1a1 1 0 01-1-1v-3zm12 0h3v3h-3v-3zm-1 0a1 1 0 011-1h3a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-3zm-7 6H1v3h3v-3zm-3-1a1 1 0 00-1 1v3a1 1 0 001 1h3a1 1 0 001-1v-3a1 1 0 00-1-1H1zm6 4v-3h8v3H7zm-1-3a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H7a1 1 0 01-1-1v-3z" fill="%231A73E8"/></svg>')}.luna-dom-highlighter-element-description{flex:1 1;font-weight:700;word-wrap:break-word;word-break:break-all}.luna-dom-highlighter-dimensions{color:#737373;text-align:right;margin-left:10px}.luna-dom-highlighter-material-node-width{margin-right:2px}.luna-dom-highlighter-material-node-height{margin-left:2px}.luna-dom-highlighter-material-tag-name{color:#881280}.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id{color:#1a1aa6}.luna-dom-highlighter-contrast-text{width:16px;height:16px;text-align:center;line-height:16px;margin-right:8px;border:1px solid #000;padding:0 1px}.luna-dom-highlighter-a11y-icon-not-ok{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.315 0-6-2.685-6-6 0-1.3875.4725-2.6625 1.2675-3.675l8.4075 8.4075c-1.0125.795-2.2875 1.2675-3.675 1.2675zm4.7325-2.325-8.4075-8.4075c1.0125-.795 2.2875-1.2675 3.675-1.2675 3.315 0 6 2.685 6 6 0 1.3875-.4725 2.6625-1.2675 3.675z" fill="%239e9e9e"/></svg>')}.luna-dom-highlighter-a11y-icon-warning{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m8.25 11.25h1.5v1.5h-1.5zm0-6h1.5v4.5h-1.5zm.7425-3.75c-4.14 0-7.4925 3.36-7.4925 7.5s3.3525 7.5 7.4925 7.5c4.1475 0 7.5075-3.36 7.5075-7.5s-3.36-7.5-7.5075-7.5zm.0075 13.5c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6z" fill="%23e37400"/></svg>')}.luna-dom-highlighter-a11y-icon-ok{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.3075 0-6-2.6925-6-6s2.6925-6 6-6 6 2.6925 6 6-2.6925 6-6 6zm-1.5-4.35-1.95-1.95-1.05 1.05 3 3 6-6-1.05-1.05z" fill="%230ca40c"/></svg>')}@media (forced-colors:active){:root,body{background-color:transparent;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content{border-color:Highlight;background-color:canvas;color:text;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content::after{background-color:Highlight}.luna-dom-highlighter-color-swatch-inner,.luna-dom-highlighter-contrast-text,.luna-dom-highlighter-separator{border-color:Highlight}.luna-dom-highlighter-section-name{color:Highlight}.luna-dom-highlighter-dimensions,.luna-dom-highlighter-element-info-name,.luna-dom-highlighter-element-info-value-color,.luna-dom-highlighter-element-info-value-contrast,.luna-dom-highlighter-element-info-value-icon,.luna-dom-highlighter-element-info-value-text,.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id,.luna-dom-highlighter-material-tag-name{color:canvastext}}

/*# sourceMappingURL=luna-dom-highlighter.css.map*/`},907:function(v,r,s){function _(x,I){(I==null||I>x.length)&&(I=x.length);for(var B=0,H=new Array(I);B<I;B++)H[B]=x[B];return H}s.d(r,{Z:function(){return _}})},7326:function(v,r,s){function _(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}s.d(r,{Z:function(){return _}})},5671:function(v,r,s){function _(x,I){if(!(x instanceof I))throw new TypeError("Cannot call a class as a function")}s.d(r,{Z:function(){return _}})},3144:function(v,r,s){s.d(r,{Z:function(){return I}});var _=s(9142);function x(B,H){for(var N=0;N<H.length;N++){var l=H[N];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(B,(0,_.Z)(l.key),l)}}function I(B,H,N){return H&&x(B.prototype,H),N&&x(B,N),Object.defineProperty(B,"prototype",{writable:!1}),B}},4942:function(v,r,s){s.d(r,{Z:function(){return x}});var _=s(9142);function x(I,B,H){return(B=(0,_.Z)(B))in I?Object.defineProperty(I,B,{value:H,enumerable:!0,configurable:!0,writable:!0}):I[B]=H,I}},1752:function(v,r,s){s.d(r,{Z:function(){return x}});var _=s(1120);function x(){return x=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(I,B,H){var N=function(d,o){for(;!Object.prototype.hasOwnProperty.call(d,o)&&(d=(0,_.Z)(d))!==null;);return d}(I,B);if(N){var l=Object.getOwnPropertyDescriptor(N,B);return l.get?l.get.call(arguments.length<3?I:H):l.value}},x.apply(this,arguments)}},1120:function(v,r,s){function _(x){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(I){return I.__proto__||Object.getPrototypeOf(I)},_(x)}s.d(r,{Z:function(){return _}})},9340:function(v,r,s){function _(I,B){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(H,N){return H.__proto__=N,H},_(I,B)}function x(I,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(B&&B.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),Object.defineProperty(I,"prototype",{writable:!1}),B&&_(I,B)}s.d(r,{Z:function(){return x}})},2963:function(v,r,s){s.d(r,{Z:function(){return I}});var _=s(1002),x=s(7326);function I(B,H){if(H&&((0,_.Z)(H)==="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(0,x.Z)(B)}},168:function(v,r,s){function _(x,I){return I||(I=x.slice(0)),Object.freeze(Object.defineProperties(x,{raw:{value:Object.freeze(I)}}))}s.d(r,{Z:function(){return _}})},9142:function(v,r,s){s.d(r,{Z:function(){return x}});var _=s(1002);function x(I){var B=function(H,N){if((0,_.Z)(H)!=="object"||H===null)return H;var l=H[Symbol.toPrimitive];if(l!==void 0){var d=l.call(H,N||"default");if((0,_.Z)(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)(H)}(I,"string");return(0,_.Z)(B)==="symbol"?B:String(B)}},1002:function(v,r,s){function _(x){return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},_(x)}s.d(r,{Z:function(){return _}})},181:function(v,r,s){s.d(r,{Z:function(){return x}});var _=s(907);function x(I,B){if(I){if(typeof I=="string")return(0,_.Z)(I,B);var H=Object.prototype.toString.call(I).slice(8,-1);return H==="Object"&&I.constructor&&(H=I.constructor.name),H==="Map"||H==="Set"?Array.from(I):H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H)?(0,_.Z)(I,B):void 0}}}},__webpack_module_cache__={};function __webpack_require__(v){var r=__webpack_module_cache__[v];if(r!==void 0)return r.exports;var s=__webpack_module_cache__[v]={id:v,loaded:!1,exports:{}};return __webpack_modules__[v].call(s.exports,s,s.exports,__webpack_require__),s.loaded=!0,s.exports}__webpack_require__.n=function(v){var r=v&&v.__esModule?function(){return v.default}:function(){return v};return __webpack_require__.d(r,{a:r}),r},__webpack_require__.d=function(v,r){for(var s in r)__webpack_require__.o(r,s)&&!__webpack_require__.o(v,s)&&Object.defineProperty(v,s,{enumerable:!0,get:r[s]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.hmd=function(v){return(v=Object.create(v)).children||(v.children=[]),Object.defineProperty(v,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+v.id)}}),v},__webpack_require__.o=function(v,r){return Object.prototype.hasOwnProperty.call(v,r)},__webpack_require__.r=function(v){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(v,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(2027);return __webpack_exports__}()})})(eruda$1);var erudaExports=eruda$1.exports;const eruda=getDefaultExportFromCjs(erudaExports);class VikingsMap extends __webpack_exports__Actor{constructor(){super({pos:__webpack_exports__vec(0,0),width:100,height:100})}onInitialize(){this.graphics.add(Resources.MapSprite.toSprite())}}var We=Object.defineProperty,Ue=(v,r,s)=>r in v?We(v,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):v[r]=s,c=(v,r,s)=>Ue(v,typeof r!="symbol"?r+"":r,s);function oe(v,r){let s;const _=()=>{s!==void 0&&r&&r(s),s=void 0};return[()=>s===void 0?s=v(_):s,_]}class Oe{constructor(r,s={}){this.scope=r,this.options=s}print(r,...s){const _=new Date,x=Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(_),{textColor:I,bgColor:B}=this.options,H="font-weight: bold;padding: 0 5px;border-radius:5px";console[r](`%c${x}%c / %c${this.scope}`,`${H};background-color: lightblue;color:black`,"",`${H};${I?`color:${I};`:""}${B?`background-color:${B}`:""}`,...s)}error(...r){this.print("error",...r)}log(...r){this.print("log",...r)}}const F=new Oe("SDK",{bgColor:"forestgreen",textColor:"white"});class R{constructor(){c(this,"listeners",new Map),c(this,"listenersCount",0),c(this,"subscribeListeners",[])}clear(){this.listeners.clear(),this.subscribeListeners=[]}get count(){return this.listenersCount+this.subscribeListeners.length}emit(r,...s){this.subscribeListeners.forEach(_=>_({event:r,args:s})),(this.listeners.get(r)||[]).forEach(([_,x])=>{_(...s),x&&this.off(r,_)})}on(r,s,_){let x=this.listeners.get(r);return x||this.listeners.set(r,x=[]),x.push([s,_]),this.listenersCount+=1,()=>this.off(r,s)}off(r,s){const _=this.listeners.get(r)||[];for(let x=0;x<_.length;x+=1)if(s===_[x][0]){_.splice(x,1),this.listenersCount-=1;return}}subscribe(r){return this.subscribeListeners.push(r),()=>this.unsubscribe(r)}unsubscribe(r){for(let s=0;s<this.subscribeListeners.length;s+=1)if(this.subscribeListeners[s]===r){this.subscribeListeners.splice(s,1);return}}}function G(v,r,s){return window.addEventListener(v,r,s),()=>window.removeEventListener(v,r,s)}function J(...v){let r=!1;const s=v.flat(1);return[_=>!r&&s.push(_),()=>{r||(r=!0,s.forEach(_=>_()))},r]}class V extends Error{constructor(r,s,_){super(s,{cause:_}),this.type=r,Object.setPrototypeOf(this,V.prototype)}}function f(v,r,s){return new V(v,r,s)}const Fe="ERR_UNKNOWN_ENV",Ye="ERR_UNEXPECTED_TYPE",ce="ERR_PARSE";function E(){return f(Ye,"Value has unexpected type")}class D{constructor(r,s,_){this.parser=r,this.isOptional=s,this.type=_}parse(r){if(!(this.isOptional&&r===void 0))try{return this.parser(r)}catch(s){throw f(ce,`Unable to parse value${this.type?` as ${this.type}`:""}`,s)}}optional(){return this.isOptional=!0,this}}function S(v,r){return()=>new D(v,!1,r)}const b=S(v=>{if(typeof v=="boolean")return v;const r=String(v);if(r==="1"||r==="true")return!0;if(r==="0"||r==="false")return!1;throw E()},"boolean");function he(v,r){const s={};for(const _ in v){const x=v[_];if(!x)continue;let I,B;if(typeof x=="function"||"parse"in x)I=_,B=typeof x=="function"?x:x.parse.bind(x);else{const{type:H}=x;I=x.from||_,B=typeof H=="function"?H:H.parse.bind(H)}try{const H=B(r(I));H!==void 0&&(s[_]=H)}catch(H){throw f(ce,`Unable to parse field "${_}"`,H)}}return s}function pe(v){let r=v;if(typeof r=="string"&&(r=JSON.parse(r)),typeof r!="object"||r===null||Array.isArray(r))throw E();return r}function g(v,r){return new D(s=>{const _=pe(s);return he(v,x=>_[x])},!1,r)}const y=S(v=>{if(typeof v=="number")return v;if(typeof v=="string"){const r=Number(v);if(!Number.isNaN(r))return r}throw E()},"number"),p=S(v=>{if(typeof v=="string"||typeof v=="number")return v.toString();throw E()},"string");function ue(v){return g({eventType:p(),eventData:r=>r}).parse(v)}function et(){["TelegramGameProxy_receiveEvent","TelegramGameProxy","Telegram"].forEach(v=>{delete window[v]})}function z(v,r){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:v,eventData:r}),source:window.parent}))}function tt(){[["TelegramGameProxy_receiveEvent"],["TelegramGameProxy","receiveEvent"],["Telegram","WebView","receiveEvent"]].forEach(v=>{let r=window;v.forEach((s,_,x)=>{if(_===x.length-1){r[s]=z;return}s in r||(r[s]={}),r=r[s]})})}const st={clipboard_text_received:g({req_id:p(),data:v=>v===null?v:p().optional().parse(v)}),custom_method_invoked:g({req_id:p(),result:v=>v,error:p().optional()}),popup_closed:{parse(v){return g({button_id:r=>r==null?void 0:p().parse(r)}).parse(v??{})}},viewport_changed:g({height:y(),width:v=>v==null?window.innerWidth:y().parse(v),is_state_stable:b(),is_expanded:b()})};function nt(){const v=new R,r=new R;r.subscribe(_=>{v.emit("event",{name:_.event,payload:_.args[0]})}),tt();const[,s]=J(et,G("resize",()=>{r.emit("viewport_changed",{width:window.innerWidth,height:window.innerHeight,is_state_stable:!0,is_expanded:!0})}),G("message",_=>{if(_.source!==window.parent)return;let x;try{x=ue(_.data)}catch{return}const{eventType:I,eventData:B}=x,H=st[I];try{const N=H?H.parse(B):B;r.emit(...N?[I,N]:[I])}catch(N){F.error(`An error occurred processing the "${I}" event from the Telegram application.
Please, file an issue here:
https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose`,x,N)}}),()=>v.clear(),()=>r.clear());return[{on:r.on.bind(r),off:r.off.bind(r),subscribe(_){return v.on("event",_)},unsubscribe(_){v.off("event",_)},get count(){return r.count+v.count}},s]}const[rt,it]=oe(v=>{const[r,s]=nt(),_=r.off.bind(r);return r.off=(x,I)=>{const{count:B}=r;_(x,I),B&&!r.count&&v()},[r,s]},([,v])=>v());function M(){return rt()[0]}function w(v,r,s){return M().on(v,r,s)}function k(v){return typeof v=="object"&&v!==null&&!Array.isArray(v)}function le(v){return"external"in v&&k(v.external)&&"notify"in v.external&&typeof v.external.notify=="function"}function de(v){return"TelegramWebviewProxy"in v&&k(v.TelegramWebviewProxy)&&"postEvent"in v.TelegramWebviewProxy&&typeof v.TelegramWebviewProxy.postEvent=="function"}function _e(){try{return window.self!==window.top}catch{return!0}}const at="https://web.telegram.org";let fe=at;function ct(){return fe}function A(v,r,s){let _={},x;if(!r&&!s?_={}:r&&s?(_=s,x=r):r&&("targetOrigin"in r?_=r:x=r),_e())return window.parent.postMessage(JSON.stringify({eventType:v,eventData:x}),_.targetOrigin||ct());if(le(window)){window.external.notify(JSON.stringify({eventType:v,eventData:x}));return}if(de(window)){window.TelegramWebviewProxy.postEvent(v,JSON.stringify(x));return}throw f(Fe,"Unable to determine current environment and possible way to send event. You are probably trying to use Mini Apps method outside the Telegram application environment.")}g({id:y(),type:p(),title:p(),photoUrl:{type:p().optional(),from:"photo_url"},username:p().optional()},"Chat").optional();g({addedToAttachmentMenu:{type:b().optional(),from:"added_to_attachment_menu"},allowsWriteToPm:{type:b().optional(),from:"allows_write_to_pm"},firstName:{type:p(),from:"first_name"},id:y(),isBot:{type:b().optional(),from:"is_bot"},isPremium:{type:b().optional(),from:"is_premium"},languageCode:{type:p().optional(),from:"language_code"},lastName:{type:p().optional(),from:"last_name"},photoUrl:{type:p().optional(),from:"photo_url"},username:p().optional()},"User").optional();function Ps(v=!0){const r=[w("reload_iframe",()=>{A("iframe_will_reload"),window.location.reload()})],s=()=>r.forEach(_=>_());if(v){const _=document.createElement("style");_.id="telegram-custom-styles",document.head.appendChild(_),r.push(w("set_custom_style",x=>{_.innerHTML=x}),()=>document.head.removeChild(_))}return A("iframe_ready",{reload_supported:!0}),s}class Game extends __webpack_exports__Engine{constructor(){super({displayMode:__webpack_exports__DisplayMode.FillScreen,pointerScope:__webpack_exports__PointerScope.Canvas,antialiasing:!1})}initialize(){}}_e()&&Ps(!0);eruda.init();const game=new Game;game.initialize();game.start(loader).then(()=>{const v=new VikingsMap;game.add(v);let r=new __webpack_exports__BoundingBox(-2048,-1660,2048,1640);game.currentScene.camera.strategy.limitCameraBounds(r),addEventListener("mouseout",()=>{isDragging=!1,dragStartPointerPos=null,dragStartCameraPos=null})});let isDragging=!1,dragStartPointerPos=null,dragStartCameraPos=null;game.input.pointers.primary.on("down",v=>{isDragging=!0;const r=Resources.TiledMap.getTileByPoint("Tile Layer 2",v.worldPos);r&&console.log(r),dragStartPointerPos=v.screenPos.clone(),dragStartCameraPos=game.currentScene.camera.pos.clone()});game.input.pointers.primary.on("up",()=>{isDragging=!1,dragStartPointerPos=null,dragStartCameraPos=null});game.input.pointers.primary.on("move",v=>{if(isDragging&&dragStartPointerPos&&dragStartCameraPos){const r=game.screenToWorldCoordinates(v.screenPos).sub(game.screenToWorldCoordinates(dragStartPointerPos));game.currentScene.camera.x=dragStartCameraPos.x-r.x,game.currentScene.camera.y=dragStartCameraPos.y-r.y}});let maxZoom=1,minZoom=.4;game.input.pointers.primary.on("wheel",v=>{zoom(v.deltaY*zoomFactor)});let scale=1;const zoomFactor=.1;function zoom(v){scale+=v,scale=Math.min(Math.max(scale,minZoom),maxZoom),game.currentScene.camera.zoom=scale}let lastDistance=0;addEventListener("touchstart",v=>{v.touches.length===2&&(lastDistance=getDistance(v.touches[0],v.touches[1]))});addEventListener("touchmove",v=>{if(v.touches.length===2){const r=getDistance(v.touches[0],v.touches[1]),s=r-lastDistance;s>0?zoom(zoomFactor):s<0&&zoom(-zoomFactor),lastDistance=r}});addEventListener("touchend",v=>{v.touches.length<2&&(lastDistance=0)});function getDistance(v,r){const s=v.clientX-r.clientX,_=v.clientY-r.clientY;return Math.sqrt(s*s+_*_)}
